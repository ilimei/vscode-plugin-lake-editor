/*! For license information please see doc.umd.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React"),require("ReactDOM")):"function"==typeof define&&define.amd?define(["React","ReactDOM"],t):"object"==typeof exports?exports.Doc=t(require("React"),require("ReactDOM")):e.Doc=t(e.React,e.ReactDOM)}(self,((e,t)=>(()=>{var n={5041:(e,t,n)=>{"use strict";function r(e,t){(function(e){return"string"==typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!==e.indexOf("%")}(e);return e=360===t?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:e=360===t?(e<0?e%t+t:e%t)/parseFloat(String(t)):e%t/parseFloat(String(t))}function o(e){return e<=1?"".concat(100*Number(e),"%"):e}function i(e){return 1===e.length?"0"+e:String(e)}function a(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*n*(t-e):n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function l(e){return u(e)/255}function u(e){return parseInt(e,16)}n.r(t),n.d(t,{blue:()=>V,cyan:()=>U,geekblue:()=>H,generate:()=>D,gold:()=>I,green:()=>L,grey:()=>q,lime:()=>F,magenta:()=>W,orange:()=>B,presetDarkPalettes:()=>S,presetPalettes:()=>R,presetPrimaryColors:()=>P,purple:()=>z,red:()=>T,volcano:()=>j,yellow:()=>M});var c={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function s(e){var t,n,i,s={r:0,g:0,b:0},d=1,f=null,h=null,m=null,g=!1,b=!1;return"string"==typeof e&&(e=function(e){if(0===(e=e.trim().toLowerCase()).length)return!1;var t=!1;if(c[e])e=c[e],t=!0;else if("transparent"===e)return{r:0,g:0,b:0,a:0,format:"name"};var n=p.rgb.exec(e);return n?{r:n[1],g:n[2],b:n[3]}:(n=p.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=p.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=p.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=p.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=p.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=p.hex8.exec(e))?{r:u(n[1]),g:u(n[2]),b:u(n[3]),a:l(n[4]),format:t?"name":"hex8"}:(n=p.hex6.exec(e))?{r:u(n[1]),g:u(n[2]),b:u(n[3]),format:t?"name":"hex"}:(n=p.hex4.exec(e))?{r:u(n[1]+n[1]),g:u(n[2]+n[2]),b:u(n[3]+n[3]),a:l(n[4]+n[4]),format:t?"name":"hex8"}:!!(n=p.hex3.exec(e))&&{r:u(n[1]+n[1]),g:u(n[2]+n[2]),b:u(n[3]+n[3]),format:t?"name":"hex"}}(e)),"object"==typeof e&&(v(e.r)&&v(e.g)&&v(e.b)?(t=e.r,n=e.g,i=e.b,s={r:255*r(t,255),g:255*r(n,255),b:255*r(i,255)},g=!0,b="%"===String(e.r).substr(-1)?"prgb":"rgb"):v(e.h)&&v(e.s)&&v(e.v)?(f=o(e.s),h=o(e.v),s=function(e,t,n){e=6*r(e,360),t=r(t,100),n=r(n,100);var o=Math.floor(e),i=e-o,a=n*(1-t),l=n*(1-i*t),u=n*(1-(1-i)*t),c=o%6;return{r:255*[n,l,a,a,u,n][c],g:255*[u,n,n,l,a,a][c],b:255*[a,a,u,n,n,l][c]}}(e.h,f,h),g=!0,b="hsv"):v(e.h)&&v(e.s)&&v(e.l)&&(f=o(e.s),m=o(e.l),s=function(e,t,n){var o,i,l;if(e=r(e,360),t=r(t,100),n=r(n,100),0===t)i=n,l=n,o=n;else{var u=n<.5?n*(1+t):n+t-n*t,c=2*n-u;o=a(c,u,e+1/3),i=a(c,u,e),l=a(c,u,e-1/3)}return{r:255*o,g:255*i,b:255*l}}(e.h,f,m),g=!0,b="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(d=e.a)),d=function(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}(d),{ok:g,format:e.format||b,r:Math.min(255,Math.max(s.r,0)),g:Math.min(255,Math.max(s.g,0)),b:Math.min(255,Math.max(s.b,0)),a:d}}var d="(?:".concat("[-\\+]?\\d*\\.\\d+%?",")|(?:").concat("[-\\+]?\\d+%?",")"),f="[\\s|\\(]+(".concat(d,")[,|\\s]+(").concat(d,")[,|\\s]+(").concat(d,")\\s*\\)?"),h="[\\s|\\(]+(".concat(d,")[,|\\s]+(").concat(d,")[,|\\s]+(").concat(d,")[,|\\s]+(").concat(d,")\\s*\\)?"),p={CSS_UNIT:new RegExp(d),rgb:new RegExp("rgb"+f),rgba:new RegExp("rgba"+h),hsl:new RegExp("hsl"+f),hsla:new RegExp("hsla"+h),hsv:new RegExp("hsv"+f),hsva:new RegExp("hsva"+h),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function v(e){return Boolean(p.CSS_UNIT.exec(String(e)))}var m=2,g=.16,b=.05,y=.05,w=.15,A=5,k=4,_=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function C(e){var t=function(e,t,n){e=r(e,255),t=r(t,255),n=r(n,255);var o=Math.max(e,t,n),i=Math.min(e,t,n),a=0,l=o,u=o-i,c=0===o?0:u/o;if(o===i)a=0;else{switch(o){case e:a=(t-n)/u+(t<n?6:0);break;case t:a=(n-e)/u+2;break;case n:a=(e-t)/u+4}a/=6}return{h:a,s:c,v:l}}(e.r,e.g,e.b);return{h:360*t.h,s:t.s,v:t.v}}function N(e){var t=e.r,n=e.g,r=e.b;return"#".concat(function(e,t,n,r){var o=[i(Math.round(e).toString(16)),i(Math.round(t).toString(16)),i(Math.round(n).toString(16))];return o.join("")}(t,n,r))}function O(e,t,n){var r;return(r=Math.round(e.h)>=60&&Math.round(e.h)<=240?n?Math.round(e.h)-m*t:Math.round(e.h)+m*t:n?Math.round(e.h)+m*t:Math.round(e.h)-m*t)<0?r+=360:r>=360&&(r-=360),r}function x(e,t,n){return 0===e.h&&0===e.s?e.s:((r=n?e.s-g*t:t===k?e.s+g:e.s+b*t)>1&&(r=1),n&&t===A&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2)));var r}function E(e,t,n){var r;return(r=n?e.v+y*t:e.v-w*t)>1&&(r=1),Number(r.toFixed(2))}function D(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=s(e),o=A;o>0;o-=1){var i=C(r),a=N(s({h:O(i,o,!0),s:x(i,o,!0),v:E(i,o,!0)}));n.push(a)}n.push(N(r));for(var l=1;l<=k;l+=1){var u=C(r),c=N(s({h:O(u,l),s:x(u,l),v:E(u,l)}));n.push(c)}return"dark"===t.theme?_.map((function(e){var r,o,i,a=e.index,l=e.opacity;return N((r=s(t.backgroundColor||"#141414"),i=100*l/100,{r:((o=s(n[a])).r-r.r)*i+r.r,g:(o.g-r.g)*i+r.g,b:(o.b-r.b)*i+r.b}))})):n}var P={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},R={},S={};Object.keys(P).forEach((function(e){R[e]=D(P[e]),R[e].primary=R[e][5],S[e]=D(P[e],{theme:"dark",backgroundColor:"#141414"}),S[e].primary=S[e][5]}));var T=R.red,j=R.volcano,I=R.gold,B=R.orange,M=R.yellow,F=R.lime,L=R.green,U=R.cyan,V=R.blue,H=R.geekblue,z=R.purple,W=R.magenta,q=R.grey},2505:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"}},6215:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"}},5397:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"}},9843:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"}},9323:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"}},6872:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"}},9378:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"}},2137:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"}},5799:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"}},9059:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"}},4843:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=(r=n(766))&&r.__esModule?r:{default:r};t.default=o,e.exports=o},8613:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=(r=n(5196))&&r.__esModule?r:{default:r};t.default=o,e.exports=o},8887:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=(r=n(9218))&&r.__esModule?r:{default:r};t.default=o,e.exports=o},7457:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=(r=n(5808))&&r.__esModule?r:{default:r};t.default=o,e.exports=o},765:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=(r=n(6412))&&r.__esModule?r:{default:r};t.default=o,e.exports=o},4738:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=(r=n(2519))&&r.__esModule?r:{default:r};t.default=o,e.exports=o},7664:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=(r=n(8545))&&r.__esModule?r:{default:r};t.default=o,e.exports=o},9655:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=(r=n(4420))&&r.__esModule?r:{default:r};t.default=o,e.exports=o},609:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=(r=n(8526))&&r.__esModule?r:{default:r};t.default=o,e.exports=o},6741:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=(r=n(1307))&&r.__esModule?r:{default:r};t.default=o,e.exports=o},9476:(e,t,n)=>{"use strict";var r=n(1012),o=n(1048);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(2335)),a=r(n(313)),l=r(n(9599)),u=r(n(9297)),c=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=o(e)&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(4883)),s=r(n(5399)),d=r(n(6767)),f=r(n(6722)),h=n(111),p=n(398),v=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}(0,h.setTwoToneColor)("#1890ff");var g=c.forwardRef((function(e,t){var n=e.className,r=e.icon,o=e.spin,h=e.rotate,m=e.tabIndex,g=e.onClick,b=e.twoToneColor,y=(0,u.default)(e,v),w=c.useContext(d.default),A=w.prefixCls,k=void 0===A?"anticon":A,_=w.rootClassName,C=(0,s.default)(_,k,(0,l.default)((0,l.default)({},"".concat(k,"-").concat(r.name),!!r.name),"".concat(k,"-spin"),!!o||"loading"===r.name),n),N=m;void 0===N&&g&&(N=-1);var O=h?{msTransform:"rotate(".concat(h,"deg)"),transform:"rotate(".concat(h,"deg)")}:void 0,x=(0,p.normalizeTwoToneColors)(b),E=(0,a.default)(x,2),D=E[0],P=E[1];return c.createElement("span",(0,i.default)((0,i.default)({role:"img","aria-label":r.name},y),{},{ref:t,tabIndex:N,onClick:g,className:C}),c.createElement(f.default,{icon:r,primaryColor:D,secondaryColor:P,style:O}))}));g.displayName="AntdIcon",g.getTwoToneColor=h.getTwoToneColor,g.setTwoToneColor=h.setTwoToneColor,t.default=g},6767:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(0,n(4883).createContext)({});t.default=r},6722:(e,t,n)=>{"use strict";var r=n(1012);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(9297)),i=r(n(2335)),a=n(398),l=["icon","className","onClick","style","primaryColor","secondaryColor"],u={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1},c=function(e){var t=e.icon,n=e.className,r=e.onClick,c=e.style,s=e.primaryColor,d=e.secondaryColor,f=(0,o.default)(e,l),h=u;if(s&&(h={primaryColor:s,secondaryColor:d||(0,a.getSecondaryColor)(s)}),(0,a.useInsertStyles)(),(0,a.warning)((0,a.isIconDefinition)(t),"icon should be icon definiton, but got ".concat(t)),!(0,a.isIconDefinition)(t))return null;var p=t;return p&&"function"==typeof p.icon&&(p=(0,i.default)((0,i.default)({},p),{},{icon:p.icon(h.primaryColor,h.secondaryColor)})),(0,a.generate)(p.icon,"svg-".concat(p.name),(0,i.default)({className:n,onClick:r,style:c,"data-icon":p.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},f))};c.displayName="IconReact",c.getTwoToneColors=function(){return(0,i.default)({},u)},c.setTwoToneColors=function(e){var t=e.primaryColor,n=e.secondaryColor;u.primaryColor=t,u.secondaryColor=n||(0,a.getSecondaryColor)(t),u.calculated=!!n},t.default=c},111:(e,t,n)=>{"use strict";var r=n(1012);Object.defineProperty(t,"__esModule",{value:!0}),t.getTwoToneColor=function(){var e=i.default.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor},t.setTwoToneColor=function(e){var t=(0,a.normalizeTwoToneColors)(e),n=(0,o.default)(t,2),r=n[0],l=n[1];return i.default.setTwoToneColors({primaryColor:r,secondaryColor:l})};var o=r(n(313)),i=r(n(6722)),a=n(398)},766:(e,t,n)=>{"use strict";var r=n(1012),o=n(1048);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(2335)),a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=o(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(4883)),l=r(n(2505)),u=r(n(9476));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}var s=function(e,t){return a.createElement(u.default,(0,i.default)((0,i.default)({},e),{},{ref:t,icon:l.default}))},d=a.forwardRef(s);t.default=d},5196:(e,t,n)=>{"use strict";var r=n(1012),o=n(1048);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(2335)),a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=o(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(4883)),l=r(n(6215)),u=r(n(9476));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}var s=function(e,t){return a.createElement(u.default,(0,i.default)((0,i.default)({},e),{},{ref:t,icon:l.default}))},d=a.forwardRef(s);t.default=d},9218:(e,t,n)=>{"use strict";var r=n(1012),o=n(1048);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(2335)),a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=o(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(4883)),l=r(n(5397)),u=r(n(9476));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}var s=function(e,t){return a.createElement(u.default,(0,i.default)((0,i.default)({},e),{},{ref:t,icon:l.default}))},d=a.forwardRef(s);t.default=d},5808:(e,t,n)=>{"use strict";var r=n(1012),o=n(1048);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(2335)),a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=o(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(4883)),l=r(n(9843)),u=r(n(9476));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}var s=function(e,t){return a.createElement(u.default,(0,i.default)((0,i.default)({},e),{},{ref:t,icon:l.default}))},d=a.forwardRef(s);t.default=d},6412:(e,t,n)=>{"use strict";var r=n(1012),o=n(1048);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(2335)),a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=o(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(4883)),l=r(n(9323)),u=r(n(9476));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}var s=function(e,t){return a.createElement(u.default,(0,i.default)((0,i.default)({},e),{},{ref:t,icon:l.default}))},d=a.forwardRef(s);t.default=d},2519:(e,t,n)=>{"use strict";var r=n(1012),o=n(1048);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(2335)),a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=o(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(4883)),l=r(n(6872)),u=r(n(9476));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}var s=function(e,t){return a.createElement(u.default,(0,i.default)((0,i.default)({},e),{},{ref:t,icon:l.default}))},d=a.forwardRef(s);t.default=d},8545:(e,t,n)=>{"use strict";var r=n(1012),o=n(1048);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(2335)),a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=o(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(4883)),l=r(n(9378)),u=r(n(9476));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}var s=function(e,t){return a.createElement(u.default,(0,i.default)((0,i.default)({},e),{},{ref:t,icon:l.default}))},d=a.forwardRef(s);t.default=d},4420:(e,t,n)=>{"use strict";var r=n(1012),o=n(1048);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(2335)),a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=o(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(4883)),l=r(n(2137)),u=r(n(9476));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}var s=function(e,t){return a.createElement(u.default,(0,i.default)((0,i.default)({},e),{},{ref:t,icon:l.default}))},d=a.forwardRef(s);t.default=d},8526:(e,t,n)=>{"use strict";var r=n(1012),o=n(1048);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(2335)),a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=o(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(4883)),l=r(n(5799)),u=r(n(9476));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}var s=function(e,t){return a.createElement(u.default,(0,i.default)((0,i.default)({},e),{},{ref:t,icon:l.default}))},d=a.forwardRef(s);t.default=d},1307:(e,t,n)=>{"use strict";var r=n(1012),o=n(1048);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(2335)),a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=o(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(4883)),l=r(n(9059)),u=r(n(9476));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}var s=function(e,t){return a.createElement(u.default,(0,i.default)((0,i.default)({},e),{},{ref:t,icon:l.default}))},d=a.forwardRef(s);t.default=d},398:(e,t,n)=>{"use strict";var r=n(1012),o=n(1048);Object.defineProperty(t,"__esModule",{value:!0}),t.generate=function e(t,n,r){return r?u.default.createElement(t.tag,(0,i.default)((0,i.default)({key:n},p(t.attrs)),r),(t.children||[]).map((function(r,o){return e(r,"".concat(n,"-").concat(t.tag,"-").concat(o))}))):u.default.createElement(t.tag,(0,i.default)({key:n},p(t.attrs)),(t.children||[]).map((function(r,o){return e(r,"".concat(n,"-").concat(t.tag,"-").concat(o))})))},t.getSecondaryColor=function(e){return(0,l.generate)(e)[0]},t.iconStyles=void 0,t.isIconDefinition=function(e){return"object"===(0,a.default)(e)&&"string"==typeof e.name&&"string"==typeof e.theme&&("object"===(0,a.default)(e.icon)||"function"==typeof e.icon)},t.normalizeAttrs=p,t.normalizeTwoToneColors=function(e){return e?Array.isArray(e)?e:[e]:[]},t.useInsertStyles=t.svgBaseProps=void 0,t.warning=function(e,t){(0,c.default)(e,"[@ant-design/icons] ".concat(t))};var i=r(n(2335)),a=r(n(1048)),l=n(5041),u=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=o(e)&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(4883)),c=r(n(9070)),s=n(5901),d=r(n(6767)),f=r(n(3657));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){var r=e[n];return"class"===n?(t.className=r,delete t.class):(delete t[n],t[(0,f.default)(n)]=r),t}),{})}t.svgBaseProps={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"};var v=t.iconStyles="\n.anticon {\n  display: inline-flex;\n  alignItems: center;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n";t.useInsertStyles=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=(0,u.useContext)(d.default).csp;(0,u.useEffect)((function(){(0,s.updateCSS)(e,"@ant-design-icons",{prepend:!0,csp:t})}),[])}},7489:(e,t,n)=>{"use strict";var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=(r=n(4883))&&r.__esModule?r:{default:r};t.A=function(e){var t=e.fill,n=void 0===t?"currentColor":t,r=e.width,a=void 0===r?24:r,l=e.height,u=void 0===l?24:l,c=e.style,s=void 0===c?{}:c,d=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["fill","width","height","style"]);return i.default.createElement("svg",o({viewBox:"0 0 24 24",style:o({fill:n,width:a,height:u},s)},d),i.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))}},6086:(e,t,n)=>{"use strict";var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=(r=n(4883))&&r.__esModule?r:{default:r};t.A=function(e){var t=e.fill,n=void 0===t?"currentColor":t,r=e.width,a=void 0===r?24:r,l=e.height,u=void 0===l?24:l,c=e.style,s=void 0===c?{}:c,d=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["fill","width","height","style"]);return i.default.createElement("svg",o({viewBox:"0 0 24 24",style:o({fill:n,width:a,height:u},s)},d),i.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))}},4404:(e,t,n)=>{"use strict";var r=n(1048);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"resetWarned",{enumerable:!0,get:function(){return o.resetWarned}}),t.default=void 0;var o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=a?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(o,l,u):o[l]=e[l]}return o.default=e,n&&n.set(e,o),o}(n(9070));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}t.default=function(e,t,n){(0,o.default)(e,"[antd: ".concat(t,"] ").concat(n))}},6855:(e,t,n)=>{"use strict";var r=n(1012),o=n(1048);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=a.useReducer((function(e){return e+1}),0);return(0,i.default)(e,2)[1]};var i=r(n(313)),a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(r,a,u):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(4883));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}},6825:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tupleNum=t.tuple=void 0,t.tuple=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t},t.tupleNum=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}},9277:(e,t,n)=>{"use strict";var r=n(1012);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(1212)).default;t.default=o},8224:(e,t,n)=>{"use strict";var r=n(1048);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SizeContextProvider=void 0;var o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=a?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(o,l,u):o[l]=e[l]}return o.default=e,n&&n.set(e,o),o}(n(4883));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}var a=o.createContext(void 0);t.SizeContextProvider=function(e){var t=e.children,n=e.size;return o.createElement(a.Consumer,null,(function(e){return o.createElement(a.Provider,{value:n||e},t)}))};var l=a;t.default=l},1431:(e,t,n)=>{"use strict";var r=n(1012),o=n(1048);Object.defineProperty(t,"__esModule",{value:!0}),t.withConfigConsumer=function(e){return function(t){var n=function(n){return a.createElement(s,null,(function(r){var o=e.prefixCls,l=(0,r.getPrefixCls)(o,n.prefixCls);return a.createElement(t,(0,i.default)({},r,n,{prefixCls:l}))}))},r=t.constructor,o=r&&r.displayName||t.name||"Component";return n.displayName="withConfigConsumer(".concat(o,")"),n}},t.ConfigConsumer=t.ConfigContext=void 0;var i=r(n(1316)),a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(4883)),l=r(n(3077));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}var c=a.createContext({getPrefixCls:function(e,t){return t||(e?"ant-".concat(e):"ant")},renderEmpty:l.default});t.ConfigContext=c;var s=c.Consumer;t.ConfigConsumer=s},452:(e,t,n)=>{"use strict";var r=n(1012),o=n(1048);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ConfigConsumer",{enumerable:!0,get:function(){return f.ConfigConsumer}}),Object.defineProperty(t,"ConfigContext",{enumerable:!0,get:function(){return f.ConfigContext}}),t.default=t.globalConfig=t.defaultPrefixCls=t.configConsumerProps=void 0;var i=r(n(1316)),a=g(n(4883)),l=r(n(6767)),u=n(3386),c=r(n(9932)),s=g(n(1e3)),d=r(n(6213)),f=n(1431),h=g(n(8224)),p=r(n(3735)),v=r(n(9743));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}t.configConsumerProps=["getTargetContainer","getPopupContainer","rootPrefixCls","getPrefixCls","renderEmpty","csp","autoInsertSpaceInButton","locale","pageHeader"];var b,y=["getTargetContainer","getPopupContainer","renderEmpty","pageHeader","input","form"];function w(){return b||"ant"}t.defaultPrefixCls="ant",t.globalConfig=function(){return{getPrefixCls:function(e,t){return t||(e?"".concat(w(),"-").concat(e):w())},getRootPrefixCls:function(e,t){return e||b||(t&&t.includes("-")?t.replace(/^(.*)-[^-]*$/,"$1"):w())}}};var A=function(e){var t=e.children,n=e.csp,r=e.autoInsertSpaceInButton,o=e.form,d=e.locale,p=e.componentSize,v=e.direction,m=e.space,g=e.virtual,b=e.dropdownMatchSelectWidth,w=e.legacyLocale,A=e.parentContext,k=e.iconPrefixCls,_=a.useCallback((function(t,n){var r=e.prefixCls;if(n)return n;var o=r||A.getPrefixCls("");return t?"".concat(o,"-").concat(t):o}),[A.getPrefixCls,e.prefixCls]),C=(0,i.default)((0,i.default)({},A),{csp:n,autoInsertSpaceInButton:r,locale:d||w,direction:v,space:m,virtual:g,dropdownMatchSelectWidth:b,getPrefixCls:_});y.forEach((function(t){var n=e[t];n&&(C[t]=n)}));var N=(0,c.default)((function(){return C}),C,(function(e,t){var n=Object.keys(e),r=Object.keys(t);return n.length!==r.length||n.some((function(n){return e[n]!==t[n]}))})),O=a.useMemo((function(){return{prefixCls:k,csp:n}}),[k]),x=t,E={};return d&&d.Form&&d.Form.defaultValidateMessages&&(E=d.Form.defaultValidateMessages),o&&o.validateMessages&&(E=(0,i.default)((0,i.default)({},E),o.validateMessages)),Object.keys(E).length>0&&(x=a.createElement(u.FormProvider,{validateMessages:E},t)),d&&(x=a.createElement(s.default,{locale:d,_ANT_MARK__:s.ANT_MARK},x)),k&&(x=a.createElement(l.default.Provider,{value:O},x)),p&&(x=a.createElement(h.SizeContextProvider,{size:p},x)),a.createElement(f.ConfigContext.Provider,{value:N},x)},k=function(e){return a.useEffect((function(){e.direction&&(p.default.config({rtl:"rtl"===e.direction}),v.default.config({rtl:"rtl"===e.direction}))}),[e.direction]),a.createElement(d.default,null,(function(t,n,r){return a.createElement(f.ConfigConsumer,null,(function(t){return a.createElement(A,(0,i.default)({parentContext:t,legacyLocale:r},e))}))}))};k.ConfigContext=f.ConfigContext,k.SizeContext=h.default,k.config=function(e){void 0!==e.prefixCls&&(b=e.prefixCls)};var _=k;t.default=_},3077:(e,t,n)=>{"use strict";var r=n(1012),o=n(1048);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(4883)),a=r(n(5605)),l=n(452);function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}t.default=function(e){return i.createElement(l.ConfigConsumer,null,(function(t){var n=(0,t.getPrefixCls)("empty");switch(e){case"Table":case"List":return i.createElement(a.default,{image:a.default.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return i.createElement(a.default,{image:a.default.PRESENTED_IMAGE_SIMPLE,className:"".concat(n,"-small")});default:return i.createElement(a.default,null)}}))}},1212:(e,t,n)=>{"use strict";var r=n(1012);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(1316)),i=r(n(2154)),a=r(n(1261)),l={lang:(0,o.default)({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},i.default),timePickerLocale:(0,o.default)({},a.default)};t.default=l},6289:(e,t,n)=>{"use strict";var r=n(1012),o=n(1048);t.A=void 0;var i=r(n(9599)),a=r(n(1316)),l=r(n(313)),u=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(4883)),c=r(n(5087)),s=r(n(4311)),d=r(n(765)),f=r(n(5399)),h=n(452),p=n(6825),v=r(n(6855));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}var g=u.createContext(null),b=((0,p.tuple)("top","right","bottom","left"),{distance:180}),y=u.forwardRef((function(e,t){var n=e.width,r=void 0===n?256:n,o=e.height,h=void 0===o?256:o,p=e.closable,m=void 0===p||p,y=e.placement,w=void 0===y?"right":y,A=e.maskClosable,k=void 0===A||A,_=e.mask,C=void 0===_||_,N=e.level,O=void 0===N?null:N,x=e.keyboard,E=void 0===x||x,D=e.push,P=void 0===D?b:D,R=e.closeIcon,S=void 0===R?u.createElement(d.default,null):R,T=e.bodyStyle,j=e.drawerStyle,I=e.prefixCls,B=e.className,M=e.direction,F=e.visible,L=e.children,U=e.zIndex,V=e.destroyOnClose,H=e.style,z=e.title,W=e.headerStyle,q=e.onClose,$=e.footer,K=e.footerStyle,Y=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["width","height","closable","placement","maskClosable","mask","level","keyboard","push","closeIcon","bodyStyle","drawerStyle","prefixCls","className","direction","visible","children","zIndex","destroyOnClose","style","title","headerStyle","onClose","footer","footerStyle"]),G=(0,v.default)(),J=u.useState(!1),X=(0,l.default)(J,2),Q=X[0],Z=X[1],ee=u.useContext(g),te=u.useRef(!1);u.useEffect((function(){return F&&ee&&ee.push(),function(){ee&&ee.pull()}}),[]),u.useEffect((function(){ee&&(F?ee.push():ee.pull())}),[F]);var ne=u.useMemo((function(){return{push:function(){P&&Z(!0)},pull:function(){P&&Z(!1)}}}),[P]);u.useImperativeHandle(t,(function(){return ne}),[ne]);var re=V&&!F,oe=function(){re&&(F||(te.current=!0,G()))},ie=function(){if(!F&&!C)return{};var e={};return"left"===w||"right"===w?e.width=r:e.height=h,e};var ae=(0,f.default)((0,i.default)({"no-mask":!C},"".concat(I,"-rtl"),"rtl"===M),B),le=C?ie():{};return u.createElement(g.Provider,{value:ne},u.createElement(c.default,(0,a.default)({handler:!1},(0,a.default)({placement:w,prefixCls:I,maskClosable:k,level:O,keyboard:E,children:L,onClose:q},Y),le,{open:F,showMask:C,style:function(){var e,t,n=C?{}:ie();return(0,a.default)((0,a.default)({zIndex:U,transform:Q?(e=w,t="boolean"==typeof P?P?b.distance:0:P.distance,t=parseFloat(String(t||0)),"left"===e||"right"===e?"translateX(".concat("left"===e?t:-t,"px)"):"top"===e||"bottom"===e?"translateY(".concat("top"===e?t:-t,"px)"):void 0):void 0},n),H)}(),className:ae}),function(){if(te.current&&!F)return null;te.current=!1;var e={};return re&&(e.opacity=0,e.transition="opacity .3s"),u.createElement("div",{className:"".concat(I,"-wrapper-body"),style:(0,a.default)((0,a.default)({},e),j),onTransitionEnd:oe},function(){if(!z&&!m)return null;var e="".concat(I,z?"-header":"-header-no-title");return u.createElement("div",{className:e,style:W},z&&u.createElement("div",{className:"".concat(I,"-title")},z),m&&m&&u.createElement("button",{type:"button",onClick:q,"aria-label":"Close",className:"".concat(I,"-close"),style:{"--scroll-bar":"".concat((0,s.default)(),"px")}},S))}(),u.createElement("div",{className:"".concat(I,"-body"),style:T},L),function(){if(!$)return null;var e="".concat(I,"-footer");return u.createElement("div",{className:e,style:K},$)}())}()))}));y.displayName="Drawer";var w=u.forwardRef((function(e,t){var n=e.prefixCls,r=e.getContainer,o=u.useContext(h.ConfigContext),i=o.getPopupContainer,l=o.getPrefixCls,c=o.direction,s=l("drawer",n),d=void 0===r&&i?function(){return i(document.body)}:r;return u.createElement(y,(0,a.default)({},e,{ref:t,prefixCls:s,getContainer:d,direction:c}))}));w.displayName="DrawerWrapper";var A=w;t.A=A},1800:(e,t,n)=>{"use strict";var r=n(1048);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=i?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(o,l,u):o[l]=e[l]}return o.default=e,n&&n.set(e,o),o}(n(4883)),i=n(452);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}t.default=function(){var e=(0,o.useContext(i.ConfigContext).getPrefixCls)("empty-img-default");return o.createElement("svg",{className:e,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},o.createElement("g",{fill:"none",fillRule:"evenodd"},o.createElement("g",{transform:"translate(24 31.67)"},o.createElement("ellipse",{className:"".concat(e,"-ellipse"),cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),o.createElement("path",{className:"".concat(e,"-path-1"),d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"}),o.createElement("path",{className:"".concat(e,"-path-2"),d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",transform:"translate(13.56)"}),o.createElement("path",{className:"".concat(e,"-path-3"),d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"}),o.createElement("path",{className:"".concat(e,"-path-4"),d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"})),o.createElement("path",{className:"".concat(e,"-path-5"),d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"}),o.createElement("g",{className:"".concat(e,"-g"),transform:"translate(149.65 15.383)"},o.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),o.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))}},5605:(e,t,n)=>{"use strict";var r=n(1012),o=n(1048);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1316)),a=r(n(9599)),l=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(4883)),u=r(n(5399)),c=n(452),s=r(n(6213)),d=r(n(1800)),f=r(n(8211));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}var p=l.createElement(d.default,null),v=l.createElement(f.default,null),m=function(e){var t=e.className,n=e.prefixCls,r=e.image,o=void 0===r?p:r,d=e.description,f=e.children,h=e.imageStyle,m=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["className","prefixCls","image","description","children","imageStyle"]),g=l.useContext(c.ConfigContext),b=g.getPrefixCls,y=g.direction;return l.createElement(s.default,{componentName:"Empty"},(function(e){var r,c,s=b("empty",n),p=void 0!==d?d:e.description,g="string"==typeof p?p:"empty";return c="string"==typeof o?l.createElement("img",{alt:g,src:o}):o,l.createElement("div",(0,i.default)({className:(0,u.default)(s,(r={},(0,a.default)(r,"".concat(s,"-normal"),o===v),(0,a.default)(r,"".concat(s,"-rtl"),"rtl"===y),r),t)},m),l.createElement("div",{className:"".concat(s,"-image"),style:h},c),p&&l.createElement("div",{className:"".concat(s,"-description")},p),f&&l.createElement("div",{className:"".concat(s,"-footer")},f))}))};m.PRESENTED_IMAGE_DEFAULT=p,m.PRESENTED_IMAGE_SIMPLE=v;var g=m;t.default=g},8211:(e,t,n)=>{"use strict";var r=n(1048);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=i?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(o,l,u):o[l]=e[l]}return o.default=e,n&&n.set(e,o),o}(n(4883)),i=n(452);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}t.default=function(){var e=(0,o.useContext(i.ConfigContext).getPrefixCls)("empty-img-simple");return o.createElement("svg",{className:e,width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},o.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},o.createElement("ellipse",{className:"".concat(e,"-ellipse"),cx:"32",cy:"33",rx:"32",ry:"7"}),o.createElement("g",{className:"".concat(e,"-g"),fillRule:"nonzero"},o.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),o.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",className:"".concat(e,"-path")}))))}},6213:(e,t,n)=>{"use strict";var r=n(1012),o=n(1048);Object.defineProperty(t,"__esModule",{value:!0}),t.useLocaleReceiver=function(e,t){var n=s.useContext(f.default);return[s.useMemo((function(){var r=t||d.default[e||"global"],o=e&&n?n[e]:{};return(0,i.default)((0,i.default)({},"function"==typeof r?r():r),o||{})}),[e,t,n])]},t.default=void 0;var i=r(n(1316)),a=r(n(1009)),l=r(n(6153)),u=r(n(9489)),c=r(n(3006)),s=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(4883)),d=r(n(4089)),f=r(n(4811));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}var p=function(e){(0,u.default)(n,e);var t=(0,c.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return(0,l.default)(n,[{key:"getLocale",value:function(){var e=this.props,t=e.componentName,n=e.defaultLocale||d.default[t||"global"],r=this.context,o=t&&r?r[t]:{};return(0,i.default)((0,i.default)({},"function"==typeof n?n():n),o||{})}},{key:"getLocaleCode",value:function(){var e=this.context,t=e&&e.locale;return e&&e.exist&&!t?d.default.locale:t}},{key:"render",value:function(){return this.props.children(this.getLocale(),this.getLocaleCode(),this.context)}}]),n}(s.Component);t.default=p,p.defaultProps={componentName:"global"},p.contextType=f.default},4811:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(0,n(4883).createContext)(void 0);t.default=r},4089:(e,t,n)=>{"use strict";var r=n(1012);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(4627)).default;t.default=o},1e3:(e,t,n)=>{"use strict";var r=n(1012),o=n(1048);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ANT_MARK=void 0;var i=r(n(1316)),a=r(n(1009)),l=r(n(6153)),u=r(n(9489)),c=r(n(3006)),s=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(4883)),d=r(n(4404)),f=n(8071),h=r(n(4811));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}var v="internalMark";t.ANT_MARK=v;var m=function(e){(0,u.default)(n,e);var t=(0,c.default)(n);function n(e){var r;return(0,a.default)(this,n),r=t.call(this,e),(0,f.changeConfirmLocale)(e.locale&&e.locale.Modal),(0,d.default)(e._ANT_MARK__===v,"LocaleProvider","`LocaleProvider` is deprecated. Please use `locale` with `ConfigProvider` instead: http://u.ant.design/locale"),r}return(0,l.default)(n,[{key:"componentDidMount",value:function(){(0,f.changeConfirmLocale)(this.props.locale&&this.props.locale.Modal)}},{key:"componentDidUpdate",value:function(e){var t=this.props.locale;e.locale!==t&&(0,f.changeConfirmLocale)(t&&t.Modal)}},{key:"componentWillUnmount",value:function(){(0,f.changeConfirmLocale)()}},{key:"render",value:function(){var e=this.props,t=e.locale,n=e.children;return s.createElement(h.default.Provider,{value:(0,i.default)((0,i.default)({},t),{exist:!0})},n)}}]),n}(s.Component);t.default=m,m.defaultProps={locale:{}}},4627:(e,t,n)=>{"use strict";var r=n(1012);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(3559)),i=r(n(1212)),a=r(n(1261)),l=r(n(9277)),u="${label} is not a valid ${type}",c={locale:"en",Pagination:o.default,DatePicker:i.default,TimePicker:a.default,Calendar:l.default,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No Data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:u,method:u,array:u,object:u,number:u,date:u,boolean:u,integer:u,float:u,regexp:u,email:u,url:u,hex:u},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"}};t.default=c},9472:(e,t,n)=>{"use strict";var r=n(1012),o=n(1048);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return function(){var n,r=null,o={add:function(e,t){null==r||r.component.add(e,t)}},d=(0,u.default)(o),f=(0,a.default)(d,2),h=f[0],p=f[1],v=l.useRef({});return v.current.open=function(o){var a=o.prefixCls,l=n("message",a),u=n(),c=o.key||(0,s.getKeyThenIncreaseKey)(),d=new Promise((function(n){var a=function(){return"function"==typeof o.onClose&&o.onClose(),n(!0)};e((0,i.default)((0,i.default)({},o),{prefixCls:l,rootPrefixCls:u}),(function(e){var n=e.prefixCls,l=e.instance;r=l,h(t((0,i.default)((0,i.default)({},o),{key:c,onClose:a}),n))}))})),f=function(){r&&r.removeNotice(c)};return f.then=function(e,t){return d.then(e,t)},f.promise=d,f},["success","info","warning","error","loading"].forEach((function(e){return(0,s.attachTypeApi)(v.current,e)})),[v.current,l.createElement(c.ConfigConsumer,{key:"holder"},(function(e){return n=e.getPrefixCls,p}))]}};var i=r(n(1316)),a=r(n(313)),l=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(4883)),u=r(n(8856)),c=n(452),s=n(3735);function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}},3735:(e,t,n)=>{"use strict";var r=n(1012),o=n(1048);Object.defineProperty(t,"__esModule",{value:!0}),t.getKeyThenIncreaseKey=function(){return _++},t.attachTypeApi=S,t.default=t.getInstance=void 0;var i,a=r(n(1316)),l=r(n(9599)),u=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(4883)),c=r(n(5399)),s=r(n(1915)),d=r(n(6741)),f=r(n(4738)),h=r(n(8887)),p=r(n(4843)),v=r(n(9655)),m=r(n(9472)),g=n(452);function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}var y,w,A,k=3,_=1,C="",N="move-up",O=!1,x=!1;function E(e,t){var n=e.prefixCls,r=(0,g.globalConfig)(),o=r.getPrefixCls,a=r.getRootPrefixCls,l=o("message",n||C),u=a(e.rootPrefixCls,l);if(i)t({prefixCls:l,rootPrefixCls:u,instance:i});else{var c={prefixCls:l,transitionName:O?N:"".concat(u,"-").concat(N),style:{top:y},getContainer:w,maxCount:A};s.default.newInstance(c,(function(e){i?t({prefixCls:l,rootPrefixCls:u,instance:i}):(i=e,t({prefixCls:l,rootPrefixCls:u,instance:e}))}))}}var D={info:v.default,success:p.default,error:h.default,warning:f.default,loading:d.default};function P(e,t){var n,r=void 0!==e.duration?e.duration:k,o=D[e.type],i=(0,c.default)("".concat(t,"-custom-content"),(n={},(0,l.default)(n,"".concat(t,"-").concat(e.type),e.type),(0,l.default)(n,"".concat(t,"-rtl"),!0===x),n));return{key:e.key,duration:r,style:e.style||{},className:e.className,content:u.createElement("div",{className:i},e.icon||o&&u.createElement(o,null),u.createElement("span",null,e.content)),onClose:e.onClose,onClick:e.onClick}}var R={open:function(e){var t=e.key||_++,n=new Promise((function(n){var r=function(){return"function"==typeof e.onClose&&e.onClose(),n(!0)};E(e,(function(n){var o=n.prefixCls;n.instance.notice(P((0,a.default)((0,a.default)({},e),{key:t,onClose:r}),o))}))})),r=function(){i&&i.removeNotice(t)};return r.then=function(e,t){return n.then(e,t)},r.promise=n,r},config:function(e){void 0!==e.top&&(y=e.top,i=null),void 0!==e.duration&&(k=e.duration),void 0!==e.prefixCls&&(C=e.prefixCls),void 0!==e.getContainer&&(w=e.getContainer),void 0!==e.transitionName&&(N=e.transitionName,i=null,O=!0),void 0!==e.maxCount&&(A=e.maxCount,i=null),void 0!==e.rtl&&(x=e.rtl)},destroy:function(e){if(i)if(e)(0,i.removeNotice)(e);else{(0,i.destroy)(),i=null}}};function S(e,t){e[t]=function(n,r,o){return function(e){return"[object Object]"===Object.prototype.toString.call(e)&&!!e.content}(n)?e.open((0,a.default)((0,a.default)({},n),{type:t})):("function"==typeof r&&(o=r,r=void 0),e.open({content:n,duration:r,type:t,onClose:o}))}}["success","info","warning","error","loading"].forEach((function(e){return S(R,e)})),R.warn=R.warning,R.useMessage=(0,m.default)(E,P),t.getInstance=function(){return null};var T=R;t.default=T},8071:(e,t,n)=>{"use strict";var r=n(1012);Object.defineProperty(t,"__esModule",{value:!0}),t.changeConfirmLocale=function(e){a=e?(0,o.default)((0,o.default)({},a),e):(0,o.default)({},i.default.Modal)},t.getConfirmLocale=function(){return a};var o=r(n(1316)),i=r(n(4627)),a=(0,o.default)({},i.default.Modal)},4272:(e,t,n)=>{"use strict";var r=n(1012),o=n(1048);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return function(){var n,r=null,o={add:function(e,t){null==r||r.component.add(e,t)}},s=(0,u.default)(o),d=(0,a.default)(s,2),f=d[0],h=d[1],p=l.useRef({});return p.current.open=function(o){var a=o.prefixCls,l=n("notification",a);e((0,i.default)((0,i.default)({},o),{prefixCls:l}),(function(e){var n=e.prefixCls,i=e.instance;r=i,f(t(o,n))}))},["success","info","warning","error"].forEach((function(e){p.current[e]=function(t){return p.current.open((0,i.default)((0,i.default)({},t),{type:e}))}})),[p.current,l.createElement(c.ConfigConsumer,{key:"holder"},(function(e){return n=e.getPrefixCls,h}))]}};var i=r(n(1316)),a=r(n(313)),l=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(4883)),u=r(n(8856)),c=n(452);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}},9743:(e,t,n)=>{"use strict";var r=n(1012),o=n(1048);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.getInstance=void 0;var i=r(n(6450)),a=r(n(1316)),l=r(n(9599)),u=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n(4883)),c=r(n(1915)),s=r(n(765)),d=r(n(5399)),f=r(n(8613)),h=r(n(7457)),p=r(n(7664)),v=r(n(609)),m=r(n(4272)),g=n(452);function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}var y,w,A={},k=4.5,_=24,C=24,N="",O="topRight",x=!1;function E(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:C;switch(e){case"topLeft":t={left:0,top:n,bottom:"auto"};break;case"topRight":t={right:0,top:n,bottom:"auto"};break;case"bottomLeft":t={left:0,top:"auto",bottom:r};break;default:t={right:0,top:"auto",bottom:r}}return t}function D(e,t){var n=e.placement,r=void 0===n?O:n,o=e.top,i=e.bottom,a=e.getContainer,f=void 0===a?y:a,h=e.closeIcon,p=void 0===h?w:h,v=e.prefixCls,m=(0,(0,g.globalConfig)().getPrefixCls)("notification",v||N),b="".concat(m,"-").concat(r),k=A[b];if(k)Promise.resolve(k).then((function(e){t({prefixCls:"".concat(m,"-notice"),instance:e})}));else{var _=u.createElement("span",{className:"".concat(m,"-close-x")},p||u.createElement(s.default,{className:"".concat(m,"-close-icon")})),C=(0,d.default)("".concat(m,"-").concat(r),(0,l.default)({},"".concat(m,"-rtl"),!0===x));A[b]=new Promise((function(e){c.default.newInstance({prefixCls:m,className:C,style:E(r,o,i),getContainer:f,closeIcon:_},(function(n){e(n),t({prefixCls:"".concat(m,"-notice"),instance:n})}))}))}}var P={success:f.default,info:v.default,error:h.default,warning:p.default};function R(e,t){var n=e.duration,r=e.icon,o=e.type,i=e.description,a=e.message,c=e.btn,s=e.onClose,f=e.onClick,h=e.key,p=e.style,v=e.className,m=void 0===n?k:n,g=null;r?g=u.createElement("span",{className:"".concat(t,"-icon")},e.icon):o&&(g=u.createElement(P[o]||null,{className:"".concat(t,"-icon ").concat(t,"-icon-").concat(o)}));var b=!i&&g?u.createElement("span",{className:"".concat(t,"-message-single-line-auto-margin")}):null;return{content:u.createElement("div",{className:g?"".concat(t,"-with-icon"):"",role:"alert"},g,u.createElement("div",{className:"".concat(t,"-message")},b,a),u.createElement("div",{className:"".concat(t,"-description")},i),c?u.createElement("span",{className:"".concat(t,"-btn")},c):null),duration:m,closable:!0,onClose:s,onClick:f,key:h,style:p||{},className:(0,d.default)(v,(0,l.default)({},"".concat(t,"-").concat(o),!!o))}}var S={open:function(e){D(e,(function(t){var n=t.prefixCls;t.instance.notice(R(e,n))}))},close:function(e){Object.keys(A).forEach((function(t){return Promise.resolve(A[t]).then((function(t){t.removeNotice(e)}))}))},config:function(e){var t=e.duration,n=e.placement,r=e.bottom,o=e.top,i=e.getContainer,a=e.closeIcon,l=e.prefixCls;void 0!==l&&(N=l),void 0!==t&&(k=t),void 0!==n?O=n:e.rtl&&(O="topLeft"),void 0!==r&&(C=r),void 0!==o&&(_=o),void 0!==i&&(y=i),void 0!==a&&(w=a),void 0!==e.rtl&&(x=e.rtl)},destroy:function(){Object.keys(A).forEach((function(e){Promise.resolve(A[e]).then((function(e){e.destroy()})),delete A[e]}))}};["success","info","warning","error"].forEach((function(e){S[e]=function(t){return S.open((0,a.default)((0,a.default)({},t),{type:e}))}})),S.warn=S.warning,S.useNotification=(0,m.default)(D,R),t.getInstance=function(e){return t=void 0,n=void 0,r=void 0,o=i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}}),e)})),new(r||(r=Promise))((function(e,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function l(e){try{u(o.throw(e))}catch(e){i(e)}}function u(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(a,l)}u((o=o.apply(t,n||[])).next())}));var t,n,r,o};var T=S;t.default=T},1261:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={placeholder:"Select time",rangePlaceholder:["Start time","End time"]}},3346:function(e,t,n){var r;!function(o){"use strict";function i(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function a(e,t,n,r,o,a){return i((l=i(i(t,e),i(r,a)))<<(u=o)|l>>>32-u,n);var l,u}function l(e,t,n,r,o,i,l){return a(t&n|~t&r,e,t,o,i,l)}function u(e,t,n,r,o,i,l){return a(t&r|n&~r,e,t,o,i,l)}function c(e,t,n,r,o,i,l){return a(t^n^r,e,t,o,i,l)}function s(e,t,n,r,o,i,l){return a(n^(t|~r),e,t,o,i,l)}function d(e,t){var n,r,o,a,d;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var f=1732584193,h=-271733879,p=-1732584194,v=271733878;for(n=0;n<e.length;n+=16)r=f,o=h,a=p,d=v,f=l(f,h,p,v,e[n],7,-680876936),v=l(v,f,h,p,e[n+1],12,-389564586),p=l(p,v,f,h,e[n+2],17,606105819),h=l(h,p,v,f,e[n+3],22,-1044525330),f=l(f,h,p,v,e[n+4],7,-176418897),v=l(v,f,h,p,e[n+5],12,1200080426),p=l(p,v,f,h,e[n+6],17,-1473231341),h=l(h,p,v,f,e[n+7],22,-45705983),f=l(f,h,p,v,e[n+8],7,1770035416),v=l(v,f,h,p,e[n+9],12,-1958414417),p=l(p,v,f,h,e[n+10],17,-42063),h=l(h,p,v,f,e[n+11],22,-1990404162),f=l(f,h,p,v,e[n+12],7,1804603682),v=l(v,f,h,p,e[n+13],12,-40341101),p=l(p,v,f,h,e[n+14],17,-1502002290),f=u(f,h=l(h,p,v,f,e[n+15],22,1236535329),p,v,e[n+1],5,-165796510),v=u(v,f,h,p,e[n+6],9,-1069501632),p=u(p,v,f,h,e[n+11],14,643717713),h=u(h,p,v,f,e[n],20,-373897302),f=u(f,h,p,v,e[n+5],5,-701558691),v=u(v,f,h,p,e[n+10],9,38016083),p=u(p,v,f,h,e[n+15],14,-660478335),h=u(h,p,v,f,e[n+4],20,-405537848),f=u(f,h,p,v,e[n+9],5,568446438),v=u(v,f,h,p,e[n+14],9,-1019803690),p=u(p,v,f,h,e[n+3],14,-187363961),h=u(h,p,v,f,e[n+8],20,1163531501),f=u(f,h,p,v,e[n+13],5,-1444681467),v=u(v,f,h,p,e[n+2],9,-51403784),p=u(p,v,f,h,e[n+7],14,1735328473),f=c(f,h=u(h,p,v,f,e[n+12],20,-1926607734),p,v,e[n+5],4,-378558),v=c(v,f,h,p,e[n+8],11,-2022574463),p=c(p,v,f,h,e[n+11],16,1839030562),h=c(h,p,v,f,e[n+14],23,-35309556),f=c(f,h,p,v,e[n+1],4,-1530992060),v=c(v,f,h,p,e[n+4],11,1272893353),p=c(p,v,f,h,e[n+7],16,-155497632),h=c(h,p,v,f,e[n+10],23,-1094730640),f=c(f,h,p,v,e[n+13],4,681279174),v=c(v,f,h,p,e[n],11,-358537222),p=c(p,v,f,h,e[n+3],16,-722521979),h=c(h,p,v,f,e[n+6],23,76029189),f=c(f,h,p,v,e[n+9],4,-640364487),v=c(v,f,h,p,e[n+12],11,-421815835),p=c(p,v,f,h,e[n+15],16,530742520),f=s(f,h=c(h,p,v,f,e[n+2],23,-995338651),p,v,e[n],6,-198630844),v=s(v,f,h,p,e[n+7],10,1126891415),p=s(p,v,f,h,e[n+14],15,-1416354905),h=s(h,p,v,f,e[n+5],21,-57434055),f=s(f,h,p,v,e[n+12],6,1700485571),v=s(v,f,h,p,e[n+3],10,-1894986606),p=s(p,v,f,h,e[n+10],15,-1051523),h=s(h,p,v,f,e[n+1],21,-2054922799),f=s(f,h,p,v,e[n+8],6,1873313359),v=s(v,f,h,p,e[n+15],10,-30611744),p=s(p,v,f,h,e[n+6],15,-1560198380),h=s(h,p,v,f,e[n+13],21,1309151649),f=s(f,h,p,v,e[n+4],6,-145523070),v=s(v,f,h,p,e[n+11],10,-1120210379),p=s(p,v,f,h,e[n+2],15,718787259),h=s(h,p,v,f,e[n+9],21,-343485551),f=i(f,r),h=i(h,o),p=i(p,a),v=i(v,d);return[f,h,p,v]}function f(e){var t,n="",r=32*e.length;for(t=0;t<r;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function h(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function p(e){var t,n,r="0123456789abcdef",o="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),o+=r.charAt(t>>>4&15)+r.charAt(15&t);return o}function v(e){return unescape(encodeURIComponent(e))}function m(e){return function(e){return f(d(h(e),8*e.length))}(v(e))}function g(e,t){return function(e,t){var n,r,o=h(e),i=[],a=[];for(i[15]=a[15]=void 0,o.length>16&&(o=d(o,8*e.length)),n=0;n<16;n+=1)i[n]=909522486^o[n],a[n]=1549556828^o[n];return r=d(i.concat(h(t)),512+8*t.length),f(d(a.concat(r),640))}(v(e),v(t))}function b(e,t,n){return t?n?g(t,e):p(g(t,e)):n?m(e):p(m(e))}void 0===(r=function(){return b}.call(t,n,t,e))||(e.exports=r)}()},7771:(e,t,n)=>{"use strict";var r=n(4591),o={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var n,i,a,l,u,c,s=!1;t||(t={}),n=t.debug||!1;try{if(a=r(),l=document.createRange(),u=document.getSelection(),(c=document.createElement("span")).textContent=e,c.ariaHidden="true",c.style.all="unset",c.style.position="fixed",c.style.top=0,c.style.clip="rect(0, 0, 0, 0)",c.style.whiteSpace="pre",c.style.webkitUserSelect="text",c.style.MozUserSelect="text",c.style.msUserSelect="text",c.style.userSelect="text",c.addEventListener("copy",(function(r){if(r.stopPropagation(),t.format)if(r.preventDefault(),void 0===r.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var i=o[t.format]||o.default;window.clipboardData.setData(i,e)}else r.clipboardData.clearData(),r.clipboardData.setData(t.format,e);t.onCopy&&(r.preventDefault(),t.onCopy(r.clipboardData))})),document.body.appendChild(c),l.selectNodeContents(c),u.addRange(l),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");s=!0}catch(r){n&&console.error("unable to copy using execCommand: ",r),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),s=!0}catch(r){n&&console.error("unable to copy using clipboardData: ",r),n&&console.error("falling back to prompt"),i=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(i,e)}}finally{u&&("function"==typeof u.removeRange?u.removeRange(l):u.removeAllRanges()),c&&document.body.removeChild(c),a()}return s}},6862:(e,t,n)=>{var r=n(1080),o=n(6690);function i(e){return null==e}function a(e){(e=function(e){var t={};for(var n in e)t[n]=e[n];return t}(e||{})).whiteList=e.whiteList||r.whiteList,e.onAttr=e.onAttr||r.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||r.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||r.safeAttrValue,this.options=e}n(2973),a.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,n=t.whiteList,r=t.onAttr,a=t.onIgnoreAttr,l=t.safeAttrValue;return o(e,(function(e,t,o,u,c){var s=n[o],d=!1;if(!0===s?d=s:"function"==typeof s?d=s(u):s instanceof RegExp&&(d=s.test(u)),!0!==d&&(d=!1),u=l(o,u)){var f,h={position:t,sourcePosition:e,source:c,isWhite:d};return d?i(f=r(o,u,h))?o+":"+u:f:i(f=a(o,u,h))?void 0:f}}))},e.exports=a},1080:(e,t)=>{function n(){return{"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1}}var r=/javascript\s*\:/gim;t.whiteList={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1},t.getDefaultWhiteList=n,t.onAttr=function(e,t,n){},t.onIgnoreAttr=function(e,t,n){},t.safeAttrValue=function(e,t){return r.test(t)?"":t}},285:(e,t,n)=>{var r=n(1080),o=n(6862);for(var i in(t=e.exports=function(e,t){return new o(t).process(e)}).FilterCSS=o,r)t[i]=r[i];"undefined"!=typeof window&&(window.filterCSS=e.exports)},6690:(e,t,n)=>{var r=n(2973);e.exports=function(e,t){";"!==(e=r.trimRight(e))[e.length-1]&&(e+=";");var n=e.length,o=!1,i=0,a=0,l="";function u(){if(!o){var n=r.trim(e.slice(i,a)),u=n.indexOf(":");if(-1!==u){var c=r.trim(n.slice(0,u)),s=r.trim(n.slice(u+1));if(c){var d=t(i,l.length,c,s,n);d&&(l+=d+"; ")}}}i=a+1}for(;a<n;a++){var c=e[a];if("/"===c&&"*"===e[a+1]){var s=e.indexOf("*/",a+2);if(-1===s)break;i=(a=s+1)+1,o=!1}else"("===c?o=!0:")"===c?o=!1:";"===c?o||u():"\n"===c&&u()}return r.trim(l)}},2973:e=>{e.exports={indexOf:function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var r,o;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,o=e.length;r<o;r++)t.call(n,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}}},5710:function(e){e.exports=function(){"use strict";var e=6e4,t=36e5,n="millisecond",r="second",o="minute",i="hour",a="day",l="week",u="month",c="quarter",s="year",d="date",f="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},m=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},g={s:m,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),o=n%60;return(t<=0?"+":"-")+m(r,2,"0")+":"+m(o,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),o=t.clone().add(r,u),i=n-o<0,a=t.clone().add(r+(i?-1:1),u);return+(-(r+(n-o)/(i?o-a:a-o))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:u,y:s,w:l,d:a,D:d,h:i,m:o,s:r,ms:n,Q:c}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},b="en",y={};y[b]=v;var w="$isDayjsObject",A=function(e){return e instanceof N||!(!e||!e[w])},k=function e(t,n,r){var o;if(!t)return b;if("string"==typeof t){var i=t.toLowerCase();y[i]&&(o=i),n&&(y[i]=n,o=i);var a=t.split("-");if(!o&&a.length>1)return e(a[0])}else{var l=t.name;y[l]=t,o=l}return!r&&o&&(b=o),o||!r&&b},_=function(e,t){if(A(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new N(n)},C=g;C.l=k,C.i=A,C.w=function(e,t){return _(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var N=function(){function v(e){this.$L=k(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[w]=!0}var m=v.prototype;return m.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(C.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(h);if(r){var o=r[2]-1||0,i=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)):new Date(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)}}return new Date(t)}(e),this.init()},m.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},m.$utils=function(){return C},m.isValid=function(){return!(this.$d.toString()===f)},m.isSame=function(e,t){var n=_(e);return this.startOf(t)<=n&&n<=this.endOf(t)},m.isAfter=function(e,t){return _(e)<this.startOf(t)},m.isBefore=function(e,t){return this.endOf(t)<_(e)},m.$g=function(e,t,n){return C.u(e)?this[t]:this.set(n,e)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(e,t){var n=this,c=!!C.u(t)||t,f=C.p(e),h=function(e,t){var r=C.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return c?r:r.endOf(a)},p=function(e,t){return C.w(n.toDate()[e].apply(n.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},v=this.$W,m=this.$M,g=this.$D,b="set"+(this.$u?"UTC":"");switch(f){case s:return c?h(1,0):h(31,11);case u:return c?h(1,m):h(0,m+1);case l:var y=this.$locale().weekStart||0,w=(v<y?v+7:v)-y;return h(c?g-w:g+(6-w),m);case a:case d:return p(b+"Hours",0);case i:return p(b+"Minutes",1);case o:return p(b+"Seconds",2);case r:return p(b+"Milliseconds",3);default:return this.clone()}},m.endOf=function(e){return this.startOf(e,!1)},m.$set=function(e,t){var l,c=C.p(e),f="set"+(this.$u?"UTC":""),h=(l={},l[a]=f+"Date",l[d]=f+"Date",l[u]=f+"Month",l[s]=f+"FullYear",l[i]=f+"Hours",l[o]=f+"Minutes",l[r]=f+"Seconds",l[n]=f+"Milliseconds",l)[c],p=c===a?this.$D+(t-this.$W):t;if(c===u||c===s){var v=this.clone().set(d,1);v.$d[h](p),v.init(),this.$d=v.set(d,Math.min(this.$D,v.daysInMonth())).$d}else h&&this.$d[h](p);return this.init(),this},m.set=function(e,t){return this.clone().$set(e,t)},m.get=function(e){return this[C.p(e)]()},m.add=function(n,c){var d,f=this;n=Number(n);var h=C.p(c),p=function(e){var t=_(f);return C.w(t.date(t.date()+Math.round(e*n)),f)};if(h===u)return this.set(u,this.$M+n);if(h===s)return this.set(s,this.$y+n);if(h===a)return p(1);if(h===l)return p(7);var v=(d={},d[o]=e,d[i]=t,d[r]=1e3,d)[h]||1,m=this.$d.getTime()+n*v;return C.w(m,this)},m.subtract=function(e,t){return this.add(-1*e,t)},m.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||f;var r=e||"YYYY-MM-DDTHH:mm:ssZ",o=C.z(this),i=this.$H,a=this.$m,l=this.$M,u=n.weekdays,c=n.months,s=n.meridiem,d=function(e,n,o,i){return e&&(e[n]||e(t,r))||o[n].slice(0,i)},h=function(e){return C.s(i%12||12,e,"0")},v=s||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(p,(function(e,r){return r||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return C.s(t.$y,4,"0");case"M":return l+1;case"MM":return C.s(l+1,2,"0");case"MMM":return d(n.monthsShort,l,c,3);case"MMMM":return d(c,l);case"D":return t.$D;case"DD":return C.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(n.weekdaysMin,t.$W,u,2);case"ddd":return d(n.weekdaysShort,t.$W,u,3);case"dddd":return u[t.$W];case"H":return String(i);case"HH":return C.s(i,2,"0");case"h":return h(1);case"hh":return h(2);case"a":return v(i,a,!0);case"A":return v(i,a,!1);case"m":return String(a);case"mm":return C.s(a,2,"0");case"s":return String(t.$s);case"ss":return C.s(t.$s,2,"0");case"SSS":return C.s(t.$ms,3,"0");case"Z":return o}return null}(e)||o.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(n,d,f){var h,p=this,v=C.p(d),m=_(n),g=(m.utcOffset()-this.utcOffset())*e,b=this-m,y=function(){return C.m(p,m)};switch(v){case s:h=y()/12;break;case u:h=y();break;case c:h=y()/3;break;case l:h=(b-g)/6048e5;break;case a:h=(b-g)/864e5;break;case i:h=b/t;break;case o:h=b/e;break;case r:h=b/1e3;break;default:h=b}return f?h:C.a(h)},m.daysInMonth=function(){return this.endOf(u).$D},m.$locale=function(){return y[this.$L]},m.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=k(e,t,!0);return r&&(n.$L=r),n},m.clone=function(){return C.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},v}(),O=N.prototype;return _.prototype=O,[["$ms",n],["$s",r],["$m",o],["$H",i],["$W",a],["$M",u],["$y",s],["$D",d]].forEach((function(e){O[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),_.extend=function(e,t){return e.$i||(e(t,N,_),e.$i=!0),_},_.locale=k,_.isDayjs=A,_.unix=function(e){return _(1e3*e)},_.en=y[b],_.Ls=y,_.p={},_}()},4980:function(e,t,n){e.exports=function(e){"use strict";var t=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(e),n={name:"zh-cn",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(e,t){return"W"===t?e+"周":e+"日"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},meridiem:function(e,t){var n=100*e+t;return n<600?"凌晨":n<900?"早上":n<1100?"上午":n<1300?"中午":n<1800?"下午":"晚上"}};return t.default.locale(n,null,!0),n}(n(5710))},3364:function(e){e.exports=function(){"use strict";return function(e,t){var n=t.prototype,r=n.format;n.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return r.bind(this)(e);var o=this.$utils(),i=(e||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,(function(e){switch(e){case"Q":return Math.ceil((t.$M+1)/3);case"Do":return n.ordinal(t.$D);case"gggg":return t.weekYear();case"GGGG":return t.isoWeekYear();case"wo":return n.ordinal(t.week(),"W");case"w":case"ww":return o.s(t.week(),"w"===e?1:2,"0");case"W":case"WW":return o.s(t.isoWeek(),"W"===e?1:2,"0");case"k":case"kk":return o.s(String(0===t.$H?24:t.$H),"k"===e?1:2,"0");case"X":return Math.floor(t.$d.getTime()/1e3);case"x":return t.$d.getTime();case"z":return"["+t.offsetName()+"]";case"zzz":return"["+t.offsetName("long")+"]";default:return e}}));return r.bind(this)(i)}}}()},3375:function(e){e.exports=function(){"use strict";return function(e,t,n){var r="h:mm A",o={lastDay:"[Yesterday at] "+r,sameDay:"[Today at] "+r,nextDay:"[Tomorrow at] "+r,nextWeek:"dddd [at] "+r,lastWeek:"[Last] dddd [at] "+r,sameElse:"MM/DD/YYYY"};t.prototype.calendar=function(e,t){var r=t||this.$locale().calendar||o,i=n(e||void 0).startOf("d"),a=this.diff(i,"d",!0),l="sameElse",u=a<-6?l:a<-1?"lastWeek":a<0?"lastDay":a<1?"sameDay":a<2?"nextDay":a<7?"nextWeek":l,c=r[u]||o[u];return"function"==typeof c?c.call(this,n()):this.format(c)}}}()},1164:function(e){e.exports=function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,n=/\d\d/,r=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,i={},a=function(e){return(e=+e)+(e>68?1900:2e3)},l=function(e){return function(t){this[e]=+t}},u=[/[+-]\d\d:?(\d\d)?|Z/,function(e){(this.zone||(this.zone={})).offset=function(e){if(!e)return 0;if("Z"===e)return 0;var t=e.match(/([+-]|\d\d)/g),n=60*t[1]+(+t[2]||0);return 0===n?0:"+"===t[0]?-n:n}(e)}],c=function(e){var t=i[e];return t&&(t.indexOf?t:t.s.concat(t.f))},s=function(e,t){var n,r=i.meridiem;if(r){for(var o=1;o<=24;o+=1)if(e.indexOf(r(o,0,t))>-1){n=o>12;break}}else n=e===(t?"pm":"PM");return n},d={A:[o,function(e){this.afternoon=s(e,!1)}],a:[o,function(e){this.afternoon=s(e,!0)}],S:[/\d/,function(e){this.milliseconds=100*+e}],SS:[n,function(e){this.milliseconds=10*+e}],SSS:[/\d{3}/,function(e){this.milliseconds=+e}],s:[r,l("seconds")],ss:[r,l("seconds")],m:[r,l("minutes")],mm:[r,l("minutes")],H:[r,l("hours")],h:[r,l("hours")],HH:[r,l("hours")],hh:[r,l("hours")],D:[r,l("day")],DD:[n,l("day")],Do:[o,function(e){var t=i.ordinal,n=e.match(/\d+/);if(this.day=n[0],t)for(var r=1;r<=31;r+=1)t(r).replace(/\[|\]/g,"")===e&&(this.day=r)}],M:[r,l("month")],MM:[n,l("month")],MMM:[o,function(e){var t=c("months"),n=(c("monthsShort")||t.map((function(e){return e.slice(0,3)}))).indexOf(e)+1;if(n<1)throw new Error;this.month=n%12||n}],MMMM:[o,function(e){var t=c("months").indexOf(e)+1;if(t<1)throw new Error;this.month=t%12||t}],Y:[/[+-]?\d+/,l("year")],YY:[n,function(e){this.year=a(e)}],YYYY:[/\d{4}/,l("year")],Z:u,ZZ:u};function f(n){var r,o;r=n,o=i&&i.formats;for(var a=(n=r.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,n,r){var i=r&&r.toUpperCase();return n||o[r]||e[r]||o[i].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,n){return t||n.slice(1)}))}))).match(t),l=a.length,u=0;u<l;u+=1){var c=a[u],s=d[c],f=s&&s[0],h=s&&s[1];a[u]=h?{regex:f,parser:h}:c.replace(/^\[|\]$/g,"")}return function(e){for(var t={},n=0,r=0;n<l;n+=1){var o=a[n];if("string"==typeof o)r+=o.length;else{var i=o.regex,u=o.parser,c=e.slice(r),s=i.exec(c)[0];u.call(t,s),e=e.replace(s,"")}}return function(e){var t=e.afternoon;if(void 0!==t){var n=e.hours;t?n<12&&(e.hours+=12):12===n&&(e.hours=0),delete e.afternoon}}(t),t}}return function(e,t,n){n.p.customParseFormat=!0,e&&e.parseTwoDigitYear&&(a=e.parseTwoDigitYear);var r=t.prototype,o=r.parse;r.parse=function(e){var t=e.date,r=e.utc,a=e.args;this.$u=r;var l=a[1];if("string"==typeof l){var u=!0===a[2],c=!0===a[3],s=u||c,d=a[2];c&&(d=a[2]),i=this.$locale(),!u&&d&&(i=n.Ls[d]),this.$d=function(e,t,n){try{if(["x","X"].indexOf(t)>-1)return new Date(("X"===t?1e3:1)*e);var r=f(t)(e),o=r.year,i=r.month,a=r.day,l=r.hours,u=r.minutes,c=r.seconds,s=r.milliseconds,d=r.zone,h=new Date,p=a||(o||i?1:h.getDate()),v=o||h.getFullYear(),m=0;o&&!i||(m=i>0?i-1:h.getMonth());var g=l||0,b=u||0,y=c||0,w=s||0;return d?new Date(Date.UTC(v,m,p,g,b,y,w+60*d.offset*1e3)):n?new Date(Date.UTC(v,m,p,g,b,y,w)):new Date(v,m,p,g,b,y,w)}catch(e){return new Date("")}}(t,l,r),this.init(),d&&!0!==d&&(this.$L=this.locale(d).$L),s&&t!=this.format(l)&&(this.$d=new Date("")),i={}}else if(l instanceof Array)for(var h=l.length,p=1;p<=h;p+=1){a[1]=l[p-1];var v=n.apply(this,a);if(v.isValid()){this.$d=v.$d,this.$L=v.$L,this.init();break}p===h&&(this.$d=new Date(""))}else o.call(this,e)}}}()},6709:function(e){e.exports=function(){"use strict";return function(e,t,n){t.prototype.isBetween=function(e,t,r,o){var i=n(e),a=n(t),l="("===(o=o||"()")[0],u=")"===o[1];return(l?this.isAfter(i,r):!this.isBefore(i,r))&&(u?this.isBefore(a,r):!this.isAfter(a,r))||(l?this.isBefore(i,r):!this.isAfter(i,r))&&(u?this.isAfter(a,r):!this.isBefore(a,r))}}}()},7534:function(e){e.exports=function(){"use strict";return function(e,t){t.prototype.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)}}}()},293:function(e){e.exports=function(){"use strict";return function(e,t){t.prototype.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)}}}()},7960:function(e){e.exports=function(){"use strict";return function(e,t,n){t.prototype.isToday=function(){var e="YYYY-MM-DD",t=n();return this.format(e)===t.format(e)}}}()},2711:function(e){e.exports=function(){"use strict";return function(e,t,n){var r=t.prototype,o=function(e){return e&&(e.indexOf?e:e.s)},i=function(e,t,n,r,i){var a=e.name?e:e.$locale(),l=o(a[t]),u=o(a[n]),c=l||u.map((function(e){return e.slice(0,r)}));if(!i)return c;var s=a.weekStart;return c.map((function(e,t){return c[(t+(s||0))%7]}))},a=function(){return n.Ls[n.locale()]},l=function(e,t){return e.formats[t]||function(e){return e.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,n){return t||n.slice(1)}))}(e.formats[t.toUpperCase()])},u=function(){var e=this;return{months:function(t){return t?t.format("MMMM"):i(e,"months")},monthsShort:function(t){return t?t.format("MMM"):i(e,"monthsShort","months",3)},firstDayOfWeek:function(){return e.$locale().weekStart||0},weekdays:function(t){return t?t.format("dddd"):i(e,"weekdays")},weekdaysMin:function(t){return t?t.format("dd"):i(e,"weekdaysMin","weekdays",2)},weekdaysShort:function(t){return t?t.format("ddd"):i(e,"weekdaysShort","weekdays",3)},longDateFormat:function(t){return l(e.$locale(),t)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};r.localeData=function(){return u.bind(this)()},n.localeData=function(){var e=a();return{firstDayOfWeek:function(){return e.weekStart||0},weekdays:function(){return n.weekdays()},weekdaysShort:function(){return n.weekdaysShort()},weekdaysMin:function(){return n.weekdaysMin()},months:function(){return n.months()},monthsShort:function(){return n.monthsShort()},longDateFormat:function(t){return l(e,t)},meridiem:e.meridiem,ordinal:e.ordinal}},n.months=function(){return i(a(),"months")},n.monthsShort=function(){return i(a(),"monthsShort","months",3)},n.weekdays=function(e){return i(a(),"weekdays",null,null,e)},n.weekdaysShort=function(e){return i(a(),"weekdaysShort","weekdays",3,e)},n.weekdaysMin=function(e){return i(a(),"weekdaysMin","weekdays",2,e)}}}()},7682:function(e){e.exports=function(){"use strict";return function(e,t,n){n.updateLocale=function(e,t){var r=n.Ls[e];if(r)return(t?Object.keys(t):[]).forEach((function(e){r[e]=t[e]})),r}}}()},8513:function(e){e.exports=function(){"use strict";var e="week",t="year";return function(n,r,o){var i=r.prototype;i.week=function(n){if(void 0===n&&(n=null),null!==n)return this.add(7*(n-this.week()),"day");var r=this.$locale().yearStart||1;if(11===this.month()&&this.date()>25){var i=o(this).startOf(t).add(1,t).date(r),a=o(this).endOf(e);if(i.isBefore(a))return 1}var l=o(this).startOf(t).date(r).startOf(e).subtract(1,"millisecond"),u=this.diff(l,e,!0);return u<0?o(this).startOf("week").week():Math.ceil(u)},i.weeks=function(e){return void 0===e&&(e=null),this.week(e)}}}()},1132:function(e){e.exports=function(){"use strict";return function(e,t){t.prototype.weekYear=function(){var e=this.month(),t=this.week(),n=this.year();return 1===t&&11===e?n+1:0===e&&t>=52?n-1:n}}}()},7639:function(e){e.exports=function(){"use strict";return function(e,t){t.prototype.weekday=function(e){var t=this.$locale().weekStart||0,n=this.$W,r=(n<t?n+7:n)-t;return this.$utils().u(e)?r:this.subtract(r,"day").add(e,"day")}}}()},8385:(e,t,n)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(o=r))})),t.splice(o,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(6888)(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},6888:(e,t,n)=>{e.exports=function(e){function t(e){let n,o,i,a=null;function l(...e){if(!l.enabled)return;const r=l,o=Number(new Date),i=o-(n||o);r.diff=i,r.prev=n,r.curr=o,n=o,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,o)=>{if("%%"===n)return"%";a++;const i=t.formatters[o];if("function"==typeof i){const t=e[a];n=i.call(r,t),e.splice(a,1),a--}return n})),t.formatArgs.call(r,e),(r.log||t.log).apply(r,e)}return l.namespace=e,l.useColors=t.useColors(),l.color=t.selectColor(e),l.extend=r,l.destroy=t.destroy,Object.defineProperty(l,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(o!==t.namespaces&&(o=t.namespaces,i=t.enabled(e)),i),set:e=>{a=e}}),"function"==typeof t.init&&t.init(l),l}function r(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(o),...t.skips.map(o).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(8787),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},1010:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.attributeNames=t.elementNames=void 0,t.elementNames=new Map([["altglyph","altGlyph"],["altglyphdef","altGlyphDef"],["altglyphitem","altGlyphItem"],["animatecolor","animateColor"],["animatemotion","animateMotion"],["animatetransform","animateTransform"],["clippath","clipPath"],["feblend","feBlend"],["fecolormatrix","feColorMatrix"],["fecomponenttransfer","feComponentTransfer"],["fecomposite","feComposite"],["feconvolvematrix","feConvolveMatrix"],["fediffuselighting","feDiffuseLighting"],["fedisplacementmap","feDisplacementMap"],["fedistantlight","feDistantLight"],["fedropshadow","feDropShadow"],["feflood","feFlood"],["fefunca","feFuncA"],["fefuncb","feFuncB"],["fefuncg","feFuncG"],["fefuncr","feFuncR"],["fegaussianblur","feGaussianBlur"],["feimage","feImage"],["femerge","feMerge"],["femergenode","feMergeNode"],["femorphology","feMorphology"],["feoffset","feOffset"],["fepointlight","fePointLight"],["fespecularlighting","feSpecularLighting"],["fespotlight","feSpotLight"],["fetile","feTile"],["feturbulence","feTurbulence"],["foreignobject","foreignObject"],["glyphref","glyphRef"],["lineargradient","linearGradient"],["radialgradient","radialGradient"],["textpath","textPath"]]),t.attributeNames=new Map([["definitionurl","definitionURL"],["attributename","attributeName"],["attributetype","attributeType"],["basefrequency","baseFrequency"],["baseprofile","baseProfile"],["calcmode","calcMode"],["clippathunits","clipPathUnits"],["diffuseconstant","diffuseConstant"],["edgemode","edgeMode"],["filterunits","filterUnits"],["glyphref","glyphRef"],["gradienttransform","gradientTransform"],["gradientunits","gradientUnits"],["kernelmatrix","kernelMatrix"],["kernelunitlength","kernelUnitLength"],["keypoints","keyPoints"],["keysplines","keySplines"],["keytimes","keyTimes"],["lengthadjust","lengthAdjust"],["limitingconeangle","limitingConeAngle"],["markerheight","markerHeight"],["markerunits","markerUnits"],["markerwidth","markerWidth"],["maskcontentunits","maskContentUnits"],["maskunits","maskUnits"],["numoctaves","numOctaves"],["pathlength","pathLength"],["patterncontentunits","patternContentUnits"],["patterntransform","patternTransform"],["patternunits","patternUnits"],["pointsatx","pointsAtX"],["pointsaty","pointsAtY"],["pointsatz","pointsAtZ"],["preservealpha","preserveAlpha"],["preserveaspectratio","preserveAspectRatio"],["primitiveunits","primitiveUnits"],["refx","refX"],["refy","refY"],["repeatcount","repeatCount"],["repeatdur","repeatDur"],["requiredextensions","requiredExtensions"],["requiredfeatures","requiredFeatures"],["specularconstant","specularConstant"],["specularexponent","specularExponent"],["spreadmethod","spreadMethod"],["startoffset","startOffset"],["stddeviation","stdDeviation"],["stitchtiles","stitchTiles"],["surfacescale","surfaceScale"],["systemlanguage","systemLanguage"],["tablevalues","tableValues"],["targetx","targetX"],["targety","targetY"],["textlength","textLength"],["viewbox","viewBox"],["viewtarget","viewTarget"],["xchannelselector","xChannelSelector"],["ychannelselector","yChannelSelector"],["zoomandpan","zoomAndPan"]])},2744:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var l=a(n(7815)),u=n(5380),c=n(1010),s=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]),d=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function f(e,t){void 0===t&&(t={});for(var n=("length"in e?e:[e]),r="",o=0;o<n.length;o++)r+=h(n[o],t);return r}function h(e,t){switch(e.type){case l.Root:return f(e.children,t);case l.Directive:case l.Doctype:return"<"+e.data+">";case l.Comment:return"\x3c!--"+e.data+"--\x3e";case l.CDATA:return function(e){return"<![CDATA["+e.children[0].data+"]]>"}(e);case l.Script:case l.Style:case l.Tag:return function(e,t){var n;"foreign"===t.xmlMode&&(e.name=null!==(n=c.elementNames.get(e.name))&&void 0!==n?n:e.name,e.parent&&p.has(e.parent.name)&&(t=r(r({},t),{xmlMode:!1}))),!t.xmlMode&&v.has(e.name)&&(t=r(r({},t),{xmlMode:"foreign"}));var o="<"+e.name,i=function(e,t){if(e)return Object.keys(e).map((function(n){var r,o,i=null!==(r=e[n])&&void 0!==r?r:"";return"foreign"===t.xmlMode&&(n=null!==(o=c.attributeNames.get(n))&&void 0!==o?o:n),t.emptyAttrs||t.xmlMode||""!==i?n+'="'+(!1!==t.decodeEntities?u.encodeXML(i):i.replace(/"/g,"&quot;"))+'"':n})).join(" ")}(e.attribs,t);return i&&(o+=" "+i),0===e.children.length&&(t.xmlMode?!1!==t.selfClosingTags:t.selfClosingTags&&d.has(e.name))?(t.xmlMode||(o+=" "),o+="/>"):(o+=">",e.children.length>0&&(o+=f(e.children,t)),!t.xmlMode&&d.has(e.name)||(o+="</"+e.name+">")),o}(e,t);case l.Text:return function(e,t){var n=e.data||"";return!1===t.decodeEntities||!t.xmlMode&&e.parent&&s.has(e.parent.name)||(n=u.encodeXML(n)),n}(e,t)}}t.default=f;var p=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),v=new Set(["svg","math"])},7815:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Doctype=t.CDATA=t.Tag=t.Style=t.Script=t.Comment=t.Directive=t.Text=t.Root=t.isTag=t.ElementType=void 0,function(e){e.Root="root",e.Text="text",e.Directive="directive",e.Comment="comment",e.Script="script",e.Style="style",e.Tag="tag",e.CDATA="cdata",e.Doctype="doctype"}(n=t.ElementType||(t.ElementType={})),t.isTag=function(e){return e.type===n.Tag||e.type===n.Script||e.type===n.Style},t.Root=n.Root,t.Text=n.Text,t.Directive=n.Directive,t.Comment=n.Comment,t.Script=n.Script,t.Style=n.Style,t.Tag=n.Tag,t.CDATA=n.CDATA,t.Doctype=n.Doctype},8312:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.DomHandler=void 0;var i=n(7815),a=n(6310);o(n(6310),t);var l=/\s+/g,u={normalizeWhitespace:!1,withStartIndices:!1,withEndIndices:!1,xmlMode:!1},c=function(){function e(e,t,n){this.dom=[],this.root=new a.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,"function"==typeof t&&(n=t,t=u),"object"==typeof e&&(t=e,e=void 0),this.callback=null!=e?e:null,this.options=null!=t?t:u,this.elementCB=null!=n?n:null}return e.prototype.onparserinit=function(e){this.parser=e},e.prototype.onreset=function(){this.dom=[],this.root=new a.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},e.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},e.prototype.onerror=function(e){this.handleCallback(e)},e.prototype.onclosetag=function(){this.lastNode=null;var e=this.tagStack.pop();this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(e)},e.prototype.onopentag=function(e,t){var n=this.options.xmlMode?i.ElementType.Tag:void 0,r=new a.Element(e,t,void 0,n);this.addNode(r),this.tagStack.push(r)},e.prototype.ontext=function(e){var t=this.options.normalizeWhitespace,n=this.lastNode;if(n&&n.type===i.ElementType.Text)t?n.data=(n.data+e).replace(l," "):n.data+=e,this.options.withEndIndices&&(n.endIndex=this.parser.endIndex);else{t&&(e=e.replace(l," "));var r=new a.Text(e);this.addNode(r),this.lastNode=r}},e.prototype.oncomment=function(e){if(this.lastNode&&this.lastNode.type===i.ElementType.Comment)this.lastNode.data+=e;else{var t=new a.Comment(e);this.addNode(t),this.lastNode=t}},e.prototype.oncommentend=function(){this.lastNode=null},e.prototype.oncdatastart=function(){var e=new a.Text(""),t=new a.NodeWithChildren(i.ElementType.CDATA,[e]);this.addNode(t),e.parent=t,this.lastNode=e},e.prototype.oncdataend=function(){this.lastNode=null},e.prototype.onprocessinginstruction=function(e,t){var n=new a.ProcessingInstruction(e,t);this.addNode(n)},e.prototype.handleCallback=function(e){if("function"==typeof this.callback)this.callback(e,this.dom);else if(e)throw e},e.prototype.addNode=function(e){var t=this.tagStack[this.tagStack.length-1],n=t.children[t.children.length-1];this.options.withStartIndices&&(e.startIndex=this.parser.startIndex),this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),t.children.push(e),n&&(e.prev=n,n.next=e),e.parent=t,this.lastNode=null},e}();t.DomHandler=c,t.default=c},6310:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.cloneNode=t.hasChildren=t.isDocument=t.isDirective=t.isComment=t.isText=t.isCDATA=t.isTag=t.Element=t.Document=t.NodeWithChildren=t.ProcessingInstruction=t.Comment=t.Text=t.DataNode=t.Node=void 0;var a=n(7815),l=new Map([[a.ElementType.Tag,1],[a.ElementType.Script,1],[a.ElementType.Style,1],[a.ElementType.Directive,1],[a.ElementType.Text,3],[a.ElementType.CDATA,4],[a.ElementType.Comment,8],[a.ElementType.Root,9]]),u=function(){function e(e){this.type=e,this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"nodeType",{get:function(){var e;return null!==(e=l.get(this.type))&&void 0!==e?e:1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(e){this.parent=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(e){this.prev=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(e){this.next=e},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(e){return void 0===e&&(e=!1),k(this,e)},e}();t.Node=u;var c=function(e){function t(t,n){var r=e.call(this,t)||this;return r.data=n,r}return o(t,e),Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(e){this.data=e},enumerable:!1,configurable:!0}),t}(u);t.DataNode=c;var s=function(e){function t(t){return e.call(this,a.ElementType.Text,t)||this}return o(t,e),t}(c);t.Text=s;var d=function(e){function t(t){return e.call(this,a.ElementType.Comment,t)||this}return o(t,e),t}(c);t.Comment=d;var f=function(e){function t(t,n){var r=e.call(this,a.ElementType.Directive,n)||this;return r.name=t,r}return o(t,e),t}(c);t.ProcessingInstruction=f;var h=function(e){function t(t,n){var r=e.call(this,t)||this;return r.children=n,r}return o(t,e),Object.defineProperty(t.prototype,"firstChild",{get:function(){var e;return null!==(e=this.children[0])&&void 0!==e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(e){this.children=e},enumerable:!1,configurable:!0}),t}(u);t.NodeWithChildren=h;var p=function(e){function t(t){return e.call(this,a.ElementType.Root,t)||this}return o(t,e),t}(h);t.Document=p;var v=function(e){function t(t,n,r,o){void 0===r&&(r=[]),void 0===o&&(o="script"===t?a.ElementType.Script:"style"===t?a.ElementType.Style:a.ElementType.Tag);var i=e.call(this,o,r)||this;return i.name=t,i.attribs=n,i}return o(t,e),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(e){this.name=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var e=this;return Object.keys(this.attribs).map((function(t){var n,r;return{name:t,value:e.attribs[t],namespace:null===(n=e["x-attribsNamespace"])||void 0===n?void 0:n[t],prefix:null===(r=e["x-attribsPrefix"])||void 0===r?void 0:r[t]}}))},enumerable:!1,configurable:!0}),t}(h);function m(e){return(0,a.isTag)(e)}function g(e){return e.type===a.ElementType.CDATA}function b(e){return e.type===a.ElementType.Text}function y(e){return e.type===a.ElementType.Comment}function w(e){return e.type===a.ElementType.Directive}function A(e){return e.type===a.ElementType.Root}function k(e,t){var n;if(void 0===t&&(t=!1),b(e))n=new s(e.data);else if(y(e))n=new d(e.data);else if(m(e)){var r=t?_(e.children):[],o=new v(e.name,i({},e.attribs),r);r.forEach((function(e){return e.parent=o})),null!=e.namespace&&(o.namespace=e.namespace),e["x-attribsNamespace"]&&(o["x-attribsNamespace"]=i({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(o["x-attribsPrefix"]=i({},e["x-attribsPrefix"])),n=o}else if(g(e)){r=t?_(e.children):[];var l=new h(a.ElementType.CDATA,r);r.forEach((function(e){return e.parent=l})),n=l}else if(A(e)){r=t?_(e.children):[];var u=new p(r);r.forEach((function(e){return e.parent=u})),e["x-mode"]&&(u["x-mode"]=e["x-mode"]),n=u}else{if(!w(e))throw new Error("Not implemented yet: ".concat(e.type));var c=new f(e.name,e.data);null!=e["x-name"]&&(c["x-name"]=e["x-name"],c["x-publicId"]=e["x-publicId"],c["x-systemId"]=e["x-systemId"]),n=c}return n.startIndex=e.startIndex,n.endIndex=e.endIndex,null!=e.sourceCodeLocation&&(n.sourceCodeLocation=e.sourceCodeLocation),n}function _(e){for(var t=e.map((function(e){return k(e,!0)})),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}t.Element=v,t.isTag=m,t.isCDATA=g,t.isText=b,t.isComment=y,t.isDirective=w,t.isDocument=A,t.hasChildren=function(e){return Object.prototype.hasOwnProperty.call(e,"children")},t.cloneNode=k},6023:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFeed=void 0;var r=n(6899),o=n(5431);t.getFeed=function(e){var t=u(d,e);return t?"feed"===t.name?function(e){var t,n=e.children,r={type:"atom",items:(0,o.getElementsByTagName)("entry",n).map((function(e){var t,n=e.children,r={media:l(n)};s(r,"id","id",n),s(r,"title","title",n);var o=null===(t=u("link",n))||void 0===t?void 0:t.attribs.href;o&&(r.link=o);var i=c("summary",n)||c("content",n);i&&(r.description=i);var a=c("updated",n);return a&&(r.pubDate=new Date(a)),r}))};s(r,"id","id",n),s(r,"title","title",n);var i=null===(t=u("link",n))||void 0===t?void 0:t.attribs.href;i&&(r.link=i),s(r,"description","subtitle",n);var a=c("updated",n);return a&&(r.updated=new Date(a)),s(r,"author","email",n,!0),r}(t):function(e){var t,n,r=null!==(n=null===(t=u("channel",e.children))||void 0===t?void 0:t.children)&&void 0!==n?n:[],i={type:e.name.substr(0,3),id:"",items:(0,o.getElementsByTagName)("item",e.children).map((function(e){var t=e.children,n={media:l(t)};s(n,"id","guid",t),s(n,"title","title",t),s(n,"link","link",t),s(n,"description","description",t);var r=c("pubDate",t);return r&&(n.pubDate=new Date(r)),n}))};s(i,"title","title",r),s(i,"link","link",r),s(i,"description","description",r);var a=c("lastBuildDate",r);return a&&(i.updated=new Date(a)),s(i,"author","managingEditor",r,!0),i}(t):null};var i=["url","type","lang"],a=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function l(e){return(0,o.getElementsByTagName)("media:content",e).map((function(e){for(var t=e.attribs,n={medium:t.medium,isDefault:!!t.isDefault},r=0,o=i;r<o.length;r++)t[c=o[r]]&&(n[c]=t[c]);for(var l=0,u=a;l<u.length;l++){var c;t[c=u[l]]&&(n[c]=parseInt(t[c],10))}return t.expression&&(n.expression=t.expression),n}))}function u(e,t){return(0,o.getElementsByTagName)(e,t,!0,1)[0]}function c(e,t,n){return void 0===n&&(n=!1),(0,r.textContent)((0,o.getElementsByTagName)(e,t,n,1)).trim()}function s(e,t,n,r,o){void 0===o&&(o=!1);var i=c(n,r,o);i&&(e[t]=i)}function d(e){return"rss"===e||"feed"===e||"rdf:RDF"===e}},191:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uniqueSort=t.compareDocumentPosition=t.removeSubsets=void 0;var r=n(8312);function o(e,t){var n=[],o=[];if(e===t)return 0;for(var i=(0,r.hasChildren)(e)?e:e.parent;i;)n.unshift(i),i=i.parent;for(i=(0,r.hasChildren)(t)?t:t.parent;i;)o.unshift(i),i=i.parent;for(var a=Math.min(n.length,o.length),l=0;l<a&&n[l]===o[l];)l++;if(0===l)return 1;var u=n[l-1],c=u.children,s=n[l],d=o[l];return c.indexOf(s)>c.indexOf(d)?u===t?20:4:u===e?10:2}t.removeSubsets=function(e){for(var t=e.length;--t>=0;){var n=e[t];if(t>0&&e.lastIndexOf(n,t-1)>=0)e.splice(t,1);else for(var r=n.parent;r;r=r.parent)if(e.includes(r)){e.splice(t,1);break}}return e},t.compareDocumentPosition=o,t.uniqueSort=function(e){return(e=e.filter((function(e,t,n){return!n.includes(e,t+1)}))).sort((function(e,t){var n=o(e,t);return 2&n?-1:4&n?1:0})),e}},9374:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.hasChildren=t.isDocument=t.isComment=t.isText=t.isCDATA=t.isTag=void 0,o(n(6899),t),o(n(7140),t),o(n(3197),t),o(n(4600),t),o(n(5431),t),o(n(191),t),o(n(6023),t);var i=n(8312);Object.defineProperty(t,"isTag",{enumerable:!0,get:function(){return i.isTag}}),Object.defineProperty(t,"isCDATA",{enumerable:!0,get:function(){return i.isCDATA}}),Object.defineProperty(t,"isText",{enumerable:!0,get:function(){return i.isText}}),Object.defineProperty(t,"isComment",{enumerable:!0,get:function(){return i.isComment}}),Object.defineProperty(t,"isDocument",{enumerable:!0,get:function(){return i.isDocument}}),Object.defineProperty(t,"hasChildren",{enumerable:!0,get:function(){return i.hasChildren}})},5431:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getElementsByTagType=t.getElementsByTagName=t.getElementById=t.getElements=t.testElement=void 0;var r=n(8312),o=n(4600),i={tag_name:function(e){return"function"==typeof e?function(t){return(0,r.isTag)(t)&&e(t.name)}:"*"===e?r.isTag:function(t){return(0,r.isTag)(t)&&t.name===e}},tag_type:function(e){return"function"==typeof e?function(t){return e(t.type)}:function(t){return t.type===e}},tag_contains:function(e){return"function"==typeof e?function(t){return(0,r.isText)(t)&&e(t.data)}:function(t){return(0,r.isText)(t)&&t.data===e}}};function a(e,t){return"function"==typeof t?function(n){return(0,r.isTag)(n)&&t(n.attribs[e])}:function(n){return(0,r.isTag)(n)&&n.attribs[e]===t}}function l(e,t){return function(n){return e(n)||t(n)}}function u(e){var t=Object.keys(e).map((function(t){var n=e[t];return Object.prototype.hasOwnProperty.call(i,t)?i[t](n):a(t,n)}));return 0===t.length?null:t.reduce(l)}t.testElement=function(e,t){var n=u(e);return!n||n(t)},t.getElements=function(e,t,n,r){void 0===r&&(r=1/0);var i=u(e);return i?(0,o.filter)(i,t,n,r):[]},t.getElementById=function(e,t,n){return void 0===n&&(n=!0),Array.isArray(t)||(t=[t]),(0,o.findOne)(a("id",e),t,n)},t.getElementsByTagName=function(e,t,n,r){return void 0===n&&(n=!0),void 0===r&&(r=1/0),(0,o.filter)(i.tag_name(e),t,n,r)},t.getElementsByTagType=function(e,t,n,r){return void 0===n&&(n=!0),void 0===r&&(r=1/0),(0,o.filter)(i.tag_type(e),t,n,r)}},3197:(e,t)=>{"use strict";function n(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){var t=e.parent.children;t.splice(t.lastIndexOf(e),1)}}Object.defineProperty(t,"__esModule",{value:!0}),t.prepend=t.prependChild=t.append=t.appendChild=t.replaceElement=t.removeElement=void 0,t.removeElement=n,t.replaceElement=function(e,t){var n=t.prev=e.prev;n&&(n.next=t);var r=t.next=e.next;r&&(r.prev=t);var o=t.parent=e.parent;if(o){var i=o.children;i[i.lastIndexOf(e)]=t}},t.appendChild=function(e,t){if(n(t),t.next=null,t.parent=e,e.children.push(t)>1){var r=e.children[e.children.length-2];r.next=t,t.prev=r}else t.prev=null},t.append=function(e,t){n(t);var r=e.parent,o=e.next;if(t.next=o,t.prev=e,e.next=t,t.parent=r,o){if(o.prev=t,r){var i=r.children;i.splice(i.lastIndexOf(o),0,t)}}else r&&r.children.push(t)},t.prependChild=function(e,t){if(n(t),t.parent=e,t.prev=null,1!==e.children.unshift(t)){var r=e.children[1];r.prev=t,t.next=r}else t.next=null},t.prepend=function(e,t){n(t);var r=e.parent;if(r){var o=r.children;o.splice(o.indexOf(e),0,t)}e.prev&&(e.prev.next=t),t.parent=r,t.prev=e.prev,t.next=e,e.prev=t}},4600:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findAll=t.existsOne=t.findOne=t.findOneChild=t.find=t.filter=void 0;var r=n(8312);function o(e,t,n,i){for(var a=[],l=0,u=t;l<u.length;l++){var c=u[l];if(e(c)&&(a.push(c),--i<=0))break;if(n&&(0,r.hasChildren)(c)&&c.children.length>0){var s=o(e,c.children,n,i);if(a.push.apply(a,s),(i-=s.length)<=0)break}}return a}t.filter=function(e,t,n,r){return void 0===n&&(n=!0),void 0===r&&(r=1/0),Array.isArray(t)||(t=[t]),o(e,t,n,r)},t.find=o,t.findOneChild=function(e,t){return t.find(e)},t.findOne=function e(t,n,o){void 0===o&&(o=!0);for(var i=null,a=0;a<n.length&&!i;a++){var l=n[a];(0,r.isTag)(l)&&(t(l)?i=l:o&&l.children.length>0&&(i=e(t,l.children)))}return i},t.existsOne=function e(t,n){return n.some((function(n){return(0,r.isTag)(n)&&(t(n)||n.children.length>0&&e(t,n.children))}))},t.findAll=function(e,t){for(var n,o,i=[],a=t.filter(r.isTag);o=a.shift();){var l=null===(n=o.children)||void 0===n?void 0:n.filter(r.isTag);l&&l.length>0&&a.unshift.apply(a,l),e(o)&&i.push(o)}return i}},6899:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.innerText=t.textContent=t.getText=t.getInnerHTML=t.getOuterHTML=void 0;var o=n(8312),i=r(n(2744)),a=n(7815);function l(e,t){return(0,i.default)(e,t)}t.getOuterHTML=l,t.getInnerHTML=function(e,t){return(0,o.hasChildren)(e)?e.children.map((function(e){return l(e,t)})).join(""):""},t.getText=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,o.isTag)(t)?"br"===t.name?"\n":e(t.children):(0,o.isCDATA)(t)?e(t.children):(0,o.isText)(t)?t.data:""},t.textContent=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,o.hasChildren)(t)&&!(0,o.isComment)(t)?e(t.children):(0,o.isText)(t)?t.data:""},t.innerText=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,o.hasChildren)(t)&&(t.type===a.ElementType.Tag||(0,o.isCDATA)(t))?e(t.children):(0,o.isText)(t)?t.data:""}},7140:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prevElementSibling=t.nextElementSibling=t.getName=t.hasAttrib=t.getAttributeValue=t.getSiblings=t.getParent=t.getChildren=void 0;var r=n(8312),o=[];function i(e){var t;return null!==(t=e.children)&&void 0!==t?t:o}function a(e){return e.parent||null}t.getChildren=i,t.getParent=a,t.getSiblings=function(e){var t=a(e);if(null!=t)return i(t);for(var n=[e],r=e.prev,o=e.next;null!=r;)n.unshift(r),r=r.prev;for(;null!=o;)n.push(o),o=o.next;return n},t.getAttributeValue=function(e,t){var n;return null===(n=e.attribs)||void 0===n?void 0:n[t]},t.hasAttrib=function(e,t){return null!=e.attribs&&Object.prototype.hasOwnProperty.call(e.attribs,t)&&null!=e.attribs[t]},t.getName=function(e){return e.name},t.nextElementSibling=function(e){for(var t=e.next;null!==t&&!(0,r.isTag)(t);)t=t.next;return t},t.prevElementSibling=function(e){for(var t=e.prev;null!==t&&!(0,r.isTag)(t);)t=t.prev;return t}},1538:e=>{"use strict";const t={en:{},useEn:()=>!1,transferFilter:e=>e,outputFilter:e=>e.join("")};e.exports=(e={})=>{const n={...t,...e};return(...e)=>((e,t={},n)=>{const{en:r,useEn:o,transferFilter:i}=n;o(n)&&(e=r[e]||e);let a=i(e,t);a=a.replace(/#\w*$/,"");const l=[],u=a;let c=0;return a.replace(/\{(\w*)\}/g,((e,n,r)=>{l.push(u.substring(c,r)),c=r+e.length;let o=n.trim();if(!o)return"";o.match(/^\d+$/)&&(o=parseInt(o,10));const i=t[o];return void 0===i?(l.push(e),e):(l.push(i),"")})),c<u.length&&l.push(u.substring(c)),n.outputFilter(l)})(e[0],e[1],n)}},3824:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.decodeHTML=t.decodeHTMLStrict=t.decodeXML=void 0;var o=r(n(620)),i=r(n(9584)),a=r(n(7084)),l=r(n(8030)),u=/&(?:[a-zA-Z0-9]+|#[xX][\da-fA-F]+|#\d+);/g;function c(e){var t=d(e);return function(e){return String(e).replace(u,t)}}t.decodeXML=c(a.default),t.decodeHTMLStrict=c(o.default);var s=function(e,t){return e<t?1:-1};function d(e){return function(t){if("#"===t.charAt(1)){var n=t.charAt(2);return"X"===n||"x"===n?l.default(parseInt(t.substr(3),16)):l.default(parseInt(t.substr(2),10))}return e[t.slice(1,-1)]||t}}t.decodeHTML=function(){for(var e=Object.keys(i.default).sort(s),t=Object.keys(o.default).sort(s),n=0,r=0;n<t.length;n++)e[r]===t[n]?(t[n]+=";?",r++):t[n]+=";";var a=new RegExp("&(?:"+t.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),l=d(o.default);function u(e){return";"!==e.substr(-1)&&(e+=";"),l(e)}return function(e){return String(e).replace(a,u)}}()},8030:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(9749)),i=String.fromCodePoint||function(e){var t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+String.fromCharCode(e)};t.default=function(e){return e>=55296&&e<=57343||e>1114111?"�":(e in o.default&&(e=o.default[e]),i(e))}},5480:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.escapeUTF8=t.escape=t.encodeNonAsciiHTML=t.encodeHTML=t.encodeXML=void 0;var o=s(r(n(7084)).default),i=d(o);t.encodeXML=m(o);var a,l,u=s(r(n(620)).default),c=d(u);function s(e){return Object.keys(e).sort().reduce((function(t,n){return t[e[n]]="&"+n+";",t}),{})}function d(e){for(var t=[],n=[],r=0,o=Object.keys(e);r<o.length;r++){var i=o[r];1===i.length?t.push("\\"+i):n.push(i)}t.sort();for(var a=0;a<t.length-1;a++){for(var l=a;l<t.length-1&&t[l].charCodeAt(1)+1===t[l+1].charCodeAt(1);)l+=1;var u=1+l-a;u<3||t.splice(a,u,t[a]+"-"+t[l])}return n.unshift("["+t.join("")+"]"),new RegExp(n.join("|"),"g")}t.encodeHTML=(a=u,l=c,function(e){return e.replace(l,(function(e){return a[e]})).replace(f,p)}),t.encodeNonAsciiHTML=m(u);var f=/(?:[\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,h=null!=String.prototype.codePointAt?function(e){return e.codePointAt(0)}:function(e){return 1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)-56320+65536};function p(e){return"&#x"+(e.length>1?h(e):e.charCodeAt(0)).toString(16).toUpperCase()+";"}var v=new RegExp(i.source+"|"+f.source,"g");function m(e){return function(t){return t.replace(v,(function(t){return e[t]||p(t)}))}}t.escape=function(e){return e.replace(v,p)},t.escapeUTF8=function(e){return e.replace(i,p)}},5380:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeXMLStrict=t.decodeHTML5Strict=t.decodeHTML4Strict=t.decodeHTML5=t.decodeHTML4=t.decodeHTMLStrict=t.decodeHTML=t.decodeXML=t.encodeHTML5=t.encodeHTML4=t.escapeUTF8=t.escape=t.encodeNonAsciiHTML=t.encodeHTML=t.encodeXML=t.encode=t.decodeStrict=t.decode=void 0;var r=n(3824),o=n(5480);t.decode=function(e,t){return(!t||t<=0?r.decodeXML:r.decodeHTML)(e)},t.decodeStrict=function(e,t){return(!t||t<=0?r.decodeXML:r.decodeHTMLStrict)(e)},t.encode=function(e,t){return(!t||t<=0?o.encodeXML:o.encodeHTML)(e)};var i=n(5480);Object.defineProperty(t,"encodeXML",{enumerable:!0,get:function(){return i.encodeXML}}),Object.defineProperty(t,"encodeHTML",{enumerable:!0,get:function(){return i.encodeHTML}}),Object.defineProperty(t,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return i.encodeNonAsciiHTML}}),Object.defineProperty(t,"escape",{enumerable:!0,get:function(){return i.escape}}),Object.defineProperty(t,"escapeUTF8",{enumerable:!0,get:function(){return i.escapeUTF8}}),Object.defineProperty(t,"encodeHTML4",{enumerable:!0,get:function(){return i.encodeHTML}}),Object.defineProperty(t,"encodeHTML5",{enumerable:!0,get:function(){return i.encodeHTML}});var a=n(3824);Object.defineProperty(t,"decodeXML",{enumerable:!0,get:function(){return a.decodeXML}}),Object.defineProperty(t,"decodeHTML",{enumerable:!0,get:function(){return a.decodeHTML}}),Object.defineProperty(t,"decodeHTMLStrict",{enumerable:!0,get:function(){return a.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTML4",{enumerable:!0,get:function(){return a.decodeHTML}}),Object.defineProperty(t,"decodeHTML5",{enumerable:!0,get:function(){return a.decodeHTML}}),Object.defineProperty(t,"decodeHTML4Strict",{enumerable:!0,get:function(){return a.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTML5Strict",{enumerable:!0,get:function(){return a.decodeHTMLStrict}}),Object.defineProperty(t,"decodeXMLStrict",{enumerable:!0,get:function(){return a.decodeXML}})},2310:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,r,i,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var l=new o(r,i||e,a),u=n?n+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],l]:e._events[u].push(l):(e._events[u]=l,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function l(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),l.prototype.eventNames=function(){var e,r,o=[];if(0===this._eventsCount)return o;for(r in e=this._events)t.call(e,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},l.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,a=new Array(i);o<i;o++)a[o]=r[o].fn;return a},l.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},l.prototype.emit=function(e,t,r,o,i,a){var l=n?n+e:e;if(!this._events[l])return!1;var u,c,s=this._events[l],d=arguments.length;if(s.fn){switch(s.once&&this.removeListener(e,s.fn,void 0,!0),d){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,t),!0;case 3:return s.fn.call(s.context,t,r),!0;case 4:return s.fn.call(s.context,t,r,o),!0;case 5:return s.fn.call(s.context,t,r,o,i),!0;case 6:return s.fn.call(s.context,t,r,o,i,a),!0}for(c=1,u=new Array(d-1);c<d;c++)u[c-1]=arguments[c];s.fn.apply(s.context,u)}else{var f,h=s.length;for(c=0;c<h;c++)switch(s[c].once&&this.removeListener(e,s[c].fn,void 0,!0),d){case 1:s[c].fn.call(s[c].context);break;case 2:s[c].fn.call(s[c].context,t);break;case 3:s[c].fn.call(s[c].context,t,r);break;case 4:s[c].fn.call(s[c].context,t,r,o);break;default:if(!u)for(f=1,u=new Array(d-1);f<d;f++)u[f-1]=arguments[f];s[c].fn.apply(s[c].context,u)}}return!0},l.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},l.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},l.prototype.removeListener=function(e,t,r,o){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return a(this,i),this;var l=this._events[i];if(l.fn)l.fn!==t||o&&!l.once||r&&l.context!==r||a(this,i);else{for(var u=0,c=[],s=l.length;u<s;u++)(l[u].fn!==t||o&&!l[u].once||r&&l[u].context!==r)&&c.push(l[u]);c.length?this._events[i]=1===c.length?c[0]:c:a(this,i)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l},3398:(e,t,n)=>{var r;!function(o,i,a,l){"use strict";var u,c=["","webkit","Moz","MS","ms","o"],s=i.createElement("div"),d="function",f=Math.round,h=Math.abs,p=Date.now;function v(e,t,n){return setTimeout(k(e,n),t)}function m(e,t,n){return!!Array.isArray(e)&&(g(e,n[t],n),!0)}function g(e,t,n){var r;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==l)for(r=0;r<e.length;)t.call(n,e[r],r,e),r++;else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function b(e,t,n){var r="DEPRECATED METHOD: "+t+"\n"+n+" AT \n";return function(){var t=new Error("get-stack-trace"),n=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",i=o.console&&(o.console.warn||o.console.log);return i&&i.call(o.console,r,n),e.apply(this,arguments)}}u="function"!=typeof Object.assign?function(e){if(e===l||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==l&&null!==r)for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])}return t}:Object.assign;var y=b((function(e,t,n){for(var r=Object.keys(t),o=0;o<r.length;)(!n||n&&e[r[o]]===l)&&(e[r[o]]=t[r[o]]),o++;return e}),"extend","Use `assign`."),w=b((function(e,t){return y(e,t,!0)}),"merge","Use `assign`.");function A(e,t,n){var r,o=t.prototype;(r=e.prototype=Object.create(o)).constructor=e,r._super=o,n&&u(r,n)}function k(e,t){return function(){return e.apply(t,arguments)}}function _(e,t){return typeof e==d?e.apply(t&&t[0]||l,t):e}function C(e,t){return e===l?t:e}function N(e,t,n){g(D(t),(function(t){e.addEventListener(t,n,!1)}))}function O(e,t,n){g(D(t),(function(t){e.removeEventListener(t,n,!1)}))}function x(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function E(e,t){return e.indexOf(t)>-1}function D(e){return e.trim().split(/\s+/g)}function P(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var r=0;r<e.length;){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function R(e){return Array.prototype.slice.call(e,0)}function S(e,t,n){for(var r=[],o=[],i=0;i<e.length;){var a=t?e[i][t]:e[i];P(o,a)<0&&r.push(e[i]),o[i]=a,i++}return n&&(r=t?r.sort((function(e,n){return e[t]>n[t]})):r.sort()),r}function T(e,t){for(var n,r,o=t[0].toUpperCase()+t.slice(1),i=0;i<c.length;){if((r=(n=c[i])?n+o:t)in e)return r;i++}return l}var j=1;function I(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||o}var B="ontouchstart"in o,M=T(o,"PointerEvent")!==l,F=B&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),L="touch",U="mouse",V=25,H=1,z=4,W=8,q=1,$=2,K=4,Y=8,G=16,J=$|K,X=Y|G,Q=J|X,Z=["x","y"],ee=["clientX","clientY"];function te(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){_(e.options.enable,[e])&&n.handler(t)},this.init()}function ne(e,t,n){var r=n.pointers.length,o=n.changedPointers.length,i=t&H&&r-o==0,a=t&(z|W)&&r-o==0;n.isFirst=!!i,n.isFinal=!!a,i&&(e.session={}),n.eventType=t,function(e,t){var n=e.session,r=t.pointers,o=r.length;n.firstInput||(n.firstInput=re(t)),o>1&&!n.firstMultiple?n.firstMultiple=re(t):1===o&&(n.firstMultiple=!1);var i=n.firstInput,a=n.firstMultiple,u=a?a.center:i.center,c=t.center=oe(r);t.timeStamp=p(),t.deltaTime=t.timeStamp-i.timeStamp,t.angle=ue(u,c),t.distance=le(u,c),function(e,t){var n=t.center,r=e.offsetDelta||{},o=e.prevDelta||{},i=e.prevInput||{};t.eventType!==H&&i.eventType!==z||(o=e.prevDelta={x:i.deltaX||0,y:i.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=o.x+(n.x-r.x),t.deltaY=o.y+(n.y-r.y)}(n,t),t.offsetDirection=ae(t.deltaX,t.deltaY);var s,d,f=ie(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=f.x,t.overallVelocityY=f.y,t.overallVelocity=h(f.x)>h(f.y)?f.x:f.y,t.scale=a?(s=a.pointers,le((d=r)[0],d[1],ee)/le(s[0],s[1],ee)):1,t.rotation=a?function(e,t){return ue(t[1],t[0],ee)+ue(e[1],e[0],ee)}(a.pointers,r):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,function(e,t){var n,r,o,i,a=e.lastInterval||t,u=t.timeStamp-a.timeStamp;if(t.eventType!=W&&(u>V||a.velocity===l)){var c=t.deltaX-a.deltaX,s=t.deltaY-a.deltaY,d=ie(u,c,s);r=d.x,o=d.y,n=h(d.x)>h(d.y)?d.x:d.y,i=ae(c,s),e.lastInterval=t}else n=a.velocity,r=a.velocityX,o=a.velocityY,i=a.direction;t.velocity=n,t.velocityX=r,t.velocityY=o,t.direction=i}(n,t);var v=e.element;x(t.srcEvent.target,v)&&(v=t.srcEvent.target),t.target=v}(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function re(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:f(e.pointers[n].clientX),clientY:f(e.pointers[n].clientY)},n++;return{timeStamp:p(),pointers:t,center:oe(t),deltaX:e.deltaX,deltaY:e.deltaY}}function oe(e){var t=e.length;if(1===t)return{x:f(e[0].clientX),y:f(e[0].clientY)};for(var n=0,r=0,o=0;o<t;)n+=e[o].clientX,r+=e[o].clientY,o++;return{x:f(n/t),y:f(r/t)}}function ie(e,t,n){return{x:t/e||0,y:n/e||0}}function ae(e,t){return e===t?q:h(e)>=h(t)?e<0?$:K:t<0?Y:G}function le(e,t,n){n||(n=Z);var r=t[n[0]]-e[n[0]],o=t[n[1]]-e[n[1]];return Math.sqrt(r*r+o*o)}function ue(e,t,n){n||(n=Z);var r=t[n[0]]-e[n[0]],o=t[n[1]]-e[n[1]];return 180*Math.atan2(o,r)/Math.PI}te.prototype={handler:function(){},init:function(){this.evEl&&N(this.element,this.evEl,this.domHandler),this.evTarget&&N(this.target,this.evTarget,this.domHandler),this.evWin&&N(I(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&O(this.element,this.evEl,this.domHandler),this.evTarget&&O(this.target,this.evTarget,this.domHandler),this.evWin&&O(I(this.element),this.evWin,this.domHandler)}};var ce={mousedown:H,mousemove:2,mouseup:z},se="mousedown",de="mousemove mouseup";function fe(){this.evEl=se,this.evWin=de,this.pressed=!1,te.apply(this,arguments)}A(fe,te,{handler:function(e){var t=ce[e.type];t&H&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=z),this.pressed&&(t&z&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:U,srcEvent:e}))}});var he={pointerdown:H,pointermove:2,pointerup:z,pointercancel:W,pointerout:W},pe={2:L,3:"pen",4:U,5:"kinect"},ve="pointerdown",me="pointermove pointerup pointercancel";function ge(){this.evEl=ve,this.evWin=me,te.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}o.MSPointerEvent&&!o.PointerEvent&&(ve="MSPointerDown",me="MSPointerMove MSPointerUp MSPointerCancel"),A(ge,te,{handler:function(e){var t=this.store,n=!1,r=e.type.toLowerCase().replace("ms",""),o=he[r],i=pe[e.pointerType]||e.pointerType,a=i==L,l=P(t,e.pointerId,"pointerId");o&H&&(0===e.button||a)?l<0&&(t.push(e),l=t.length-1):o&(z|W)&&(n=!0),l<0||(t[l]=e,this.callback(this.manager,o,{pointers:t,changedPointers:[e],pointerType:i,srcEvent:e}),n&&t.splice(l,1))}});var be={touchstart:H,touchmove:2,touchend:z,touchcancel:W};function ye(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,te.apply(this,arguments)}function we(e,t){var n=R(e.touches),r=R(e.changedTouches);return t&(z|W)&&(n=S(n.concat(r),"identifier",!0)),[n,r]}A(ye,te,{handler:function(e){var t=be[e.type];if(t===H&&(this.started=!0),this.started){var n=we.call(this,e,t);t&(z|W)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:L,srcEvent:e})}}});var Ae={touchstart:H,touchmove:2,touchend:z,touchcancel:W},ke="touchstart touchmove touchend touchcancel";function _e(){this.evTarget=ke,this.targetIds={},te.apply(this,arguments)}function Ce(e,t){var n=R(e.touches),r=this.targetIds;if(t&(2|H)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var o,i,a=R(e.changedTouches),l=[],u=this.target;if(i=n.filter((function(e){return x(e.target,u)})),t===H)for(o=0;o<i.length;)r[i[o].identifier]=!0,o++;for(o=0;o<a.length;)r[a[o].identifier]&&l.push(a[o]),t&(z|W)&&delete r[a[o].identifier],o++;return l.length?[S(i.concat(l),"identifier",!0),l]:void 0}A(_e,te,{handler:function(e){var t=Ae[e.type],n=Ce.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:L,srcEvent:e})}});var Ne=2500;function Oe(){te.apply(this,arguments);var e=k(this.handler,this);this.touch=new _e(this.manager,e),this.mouse=new fe(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function xe(e,t){e&H?(this.primaryTouch=t.changedPointers[0].identifier,Ee.call(this,t)):e&(z|W)&&Ee.call(this,t)}function Ee(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout((function(){var e=r.indexOf(n);e>-1&&r.splice(e,1)}),Ne)}}function De(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var o=this.lastTouches[r],i=Math.abs(t-o.x),a=Math.abs(n-o.y);if(i<=25&&a<=25)return!0}return!1}A(Oe,te,{handler:function(e,t,n){var r=n.pointerType==L,o=n.pointerType==U;if(!(o&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)xe.call(this,t,n);else if(o&&De.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Pe=T(s.style,"touchAction"),Re=Pe!==l,Se="compute",Te="auto",je="manipulation",Ie="none",Be="pan-x",Me="pan-y",Fe=function(){if(!Re)return!1;var e={},t=o.CSS&&o.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){e[n]=!t||o.CSS.supports("touch-action",n)})),e}();function Le(e,t){this.manager=e,this.set(t)}Le.prototype={set:function(e){e==Se&&(e=this.compute()),Re&&this.manager.element.style&&Fe[e]&&(this.manager.element.style[Pe]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return g(this.manager.recognizers,(function(t){_(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))})),function(e){if(E(e,Ie))return Ie;var t=E(e,Be),n=E(e,Me);return t&&n?Ie:t||n?t?Be:Me:E(e,je)?je:Te}(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var r=this.actions,o=E(r,Ie)&&!Fe[Ie],i=E(r,Me)&&!Fe[Me],a=E(r,Be)&&!Fe[Be];if(o){var l=1===e.pointers.length,u=e.distance<2,c=e.deltaTime<250;if(l&&u&&c)return}if(!a||!i)return o||i&&n&J||a&&n&X?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var Ue=1,Ve=32;function He(e){this.options=u({},this.defaults,e||{}),this.id=j++,this.manager=null,this.options.enable=C(this.options.enable,!0),this.state=Ue,this.simultaneous={},this.requireFail=[]}function ze(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function We(e){return e==G?"down":e==Y?"up":e==$?"left":e==K?"right":""}function qe(e,t){var n=t.manager;return n?n.get(e):e}function $e(){He.apply(this,arguments)}function Ke(){$e.apply(this,arguments),this.pX=null,this.pY=null}function Ye(){$e.apply(this,arguments)}function Ge(){He.apply(this,arguments),this._timer=null,this._input=null}function Je(){$e.apply(this,arguments)}function Xe(){$e.apply(this,arguments)}function Qe(){He.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Ze(e,t){return(t=t||{}).recognizers=C(t.recognizers,Ze.defaults.preset),new et(e,t)}function et(e,t){this.options=u({},Ze.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new(this.options.inputClass||(M?ge:F?_e:B?Oe:fe))(this,ne),this.touchAction=new Le(this,this.options.touchAction),tt(this,!0),g(this.options.recognizers,(function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])}),this)}function tt(e,t){var n,r=e.element;r.style&&(g(e.options.cssProps,(function(o,i){n=T(r.style,i),t?(e.oldCssProps[n]=r.style[n],r.style[n]=o):r.style[n]=e.oldCssProps[n]||""})),t||(e.oldCssProps={}))}He.prototype={defaults:{},set:function(e){return u(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(m(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=qe(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return m(e,"dropRecognizeWith",this)||(e=qe(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(m(e,"requireFailure",this))return this;var t=this.requireFail;return-1===P(t,e=qe(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(m(e,"dropRequireFailure",this))return this;e=qe(e,this);var t=P(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,n=this.state;function r(n){t.manager.emit(n,e)}n<8&&r(t.options.event+ze(n)),r(t.options.event),e.additionalEvent&&r(e.additionalEvent),n>=8&&r(t.options.event+ze(n))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=Ve},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(Ve|Ue)))return!1;e++}return!0},recognize:function(e){var t=u({},e);if(!_(this.options.enable,[this,t]))return this.reset(),void(this.state=Ve);56&this.state&&(this.state=Ue),this.state=this.process(t),30&this.state&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},A($e,He,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=6&t,o=this.attrTest(e);return r&&(n&W||!o)?16|t:r||o?n&z?8|t:2&t?4|t:2:Ve}}),A(Ke,$e,{defaults:{event:"pan",threshold:10,pointers:1,direction:Q},getTouchAction:function(){var e=this.options.direction,t=[];return e&J&&t.push(Me),e&X&&t.push(Be),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,o=e.direction,i=e.deltaX,a=e.deltaY;return o&t.direction||(t.direction&J?(o=0===i?q:i<0?$:K,n=i!=this.pX,r=Math.abs(e.deltaX)):(o=0===a?q:a<0?Y:G,n=a!=this.pY,r=Math.abs(e.deltaY))),e.direction=o,n&&r>t.threshold&&o&t.direction},attrTest:function(e){return $e.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=We(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),A(Ye,$e,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ie]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),A(Ge,He,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Te]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,o=e.deltaTime>t.time;if(this._input=e,!r||!n||e.eventType&(z|W)&&!o)this.reset();else if(e.eventType&H)this.reset(),this._timer=v((function(){this.state=8,this.tryEmit()}),t.time,this);else if(e.eventType&z)return 8;return Ve},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&e.eventType&z?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=p(),this.manager.emit(this.options.event,this._input)))}}),A(Je,$e,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ie]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),A(Xe,$e,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:J|X,pointers:1},getTouchAction:function(){return Ke.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(J|X)?t=e.overallVelocity:n&J?t=e.overallVelocityX:n&X&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&h(t)>this.options.velocity&&e.eventType&z},emit:function(e){var t=We(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),A(Qe,He,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[je]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,o=e.deltaTime<t.time;if(this.reset(),e.eventType&H&&0===this.count)return this.failTimeout();if(r&&o&&n){if(e.eventType!=z)return this.failTimeout();var i=!this.pTime||e.timeStamp-this.pTime<t.interval,a=!this.pCenter||le(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,a&&i?this.count+=1:this.count=1,this._input=e,0==this.count%t.taps)return this.hasRequireFailures()?(this._timer=v((function(){this.state=8,this.tryEmit()}),t.interval,this),2):8}return Ve},failTimeout:function(){return this._timer=v((function(){this.state=Ve}),this.options.interval,this),Ve},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Ze.VERSION="2.0.7",Ze.defaults={domEvents:!1,touchAction:Se,enable:!0,inputTarget:null,inputClass:null,preset:[[Je,{enable:!1}],[Ye,{enable:!1},["rotate"]],[Xe,{direction:J}],[Ke,{direction:J},["swipe"]],[Qe],[Qe,{event:"doubletap",taps:2},["tap"]],[Ge]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},et.prototype={set:function(e){return u(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var n;this.touchAction.preventDefaults(e);var r=this.recognizers,o=t.curRecognizer;(!o||o&&8&o.state)&&(o=t.curRecognizer=null);for(var i=0;i<r.length;)n=r[i],2===t.stopped||o&&n!=o&&!n.canRecognizeWith(o)?n.reset():n.recognize(e),!o&&14&n.state&&(o=t.curRecognizer=n),i++}},get:function(e){if(e instanceof He)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(m(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(m(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=P(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==l&&t!==l){var n=this.handlers;return g(D(e),(function(e){n[e]=n[e]||[],n[e].push(t)})),this}},off:function(e,t){if(e!==l){var n=this.handlers;return g(D(e),(function(e){t?n[e]&&n[e].splice(P(n[e],t),1):delete n[e]})),this}},emit:function(e,t){this.options.domEvents&&function(e,t){var n=i.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](t),r++}},destroy:function(){this.element&&tt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},u(Ze,{INPUT_START:H,INPUT_MOVE:2,INPUT_END:z,INPUT_CANCEL:W,STATE_POSSIBLE:Ue,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Ve,DIRECTION_NONE:q,DIRECTION_LEFT:$,DIRECTION_RIGHT:K,DIRECTION_UP:Y,DIRECTION_DOWN:G,DIRECTION_HORIZONTAL:J,DIRECTION_VERTICAL:X,DIRECTION_ALL:Q,Manager:et,Input:te,TouchAction:Le,TouchInput:_e,MouseInput:fe,PointerEventInput:ge,TouchMouseInput:Oe,SingleTouchInput:ye,Recognizer:He,AttrRecognizer:$e,Tap:Qe,Pan:Ke,Swipe:Xe,Pinch:Ye,Rotate:Je,Press:Ge,on:N,off:O,each:g,merge:w,extend:y,assign:u,inherit:A,bindFn:k,prefixed:T}),(void 0!==o?o:"undefined"!=typeof self?self:{}).Hammer=Ze,(r=function(){return Ze}.call(t,n,t,e))===l||(e.exports=r)}(window,document)},8903:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.parseFeed=t.FeedHandler=void 0;var c,s,d=u(n(8312)),f=l(n(9374)),h=n(4940);!function(e){e[e.image=0]="image",e[e.audio=1]="audio",e[e.video=2]="video",e[e.document=3]="document",e[e.executable=4]="executable"}(c||(c={})),function(e){e[e.sample=0]="sample",e[e.full=1]="full",e[e.nonstop=2]="nonstop"}(s||(s={}));var p=function(e){function t(t,n){return"object"==typeof t&&(n=t=void 0),e.call(this,t,n)||this}return o(t,e),t.prototype.onend=function(){var e,t,n=g(A,this.dom);if(n){var r={};if("feed"===n.name){var o=n.children;r.type="atom",w(r,"id","id",o),w(r,"title","title",o);var i=y("href",g("link",o));i&&(r.link=i),w(r,"description","subtitle",o),(a=b("updated",o))&&(r.updated=new Date(a)),w(r,"author","email",o,!0),r.items=m("entry",o).map((function(e){var t={},n=e.children;w(t,"id","id",n),w(t,"title","title",n);var r=y("href",g("link",n));r&&(t.link=r);var o=b("summary",n)||b("content",n);o&&(t.description=o);var i=b("updated",n);return i&&(t.pubDate=new Date(i)),t.media=v(n),t}))}else{var a;o=null!==(t=null===(e=g("channel",n.children))||void 0===e?void 0:e.children)&&void 0!==t?t:[],r.type=n.name.substr(0,3),r.id="",w(r,"title","title",o),w(r,"link","link",o),w(r,"description","description",o),(a=b("lastBuildDate",o))&&(r.updated=new Date(a)),w(r,"author","managingEditor",o,!0),r.items=m("item",n.children).map((function(e){var t={},n=e.children;w(t,"id","guid",n),w(t,"title","title",n),w(t,"link","link",n),w(t,"description","description",n);var r=b("pubDate",n);return r&&(t.pubDate=new Date(r)),t.media=v(n),t}))}this.feed=r,this.handleCallback(null)}else this.handleCallback(new Error("couldn't find root of feed"))},t}(d.default);function v(e){return m("media:content",e).map((function(e){var t={medium:e.attribs.medium,isDefault:!!e.attribs.isDefault};return e.attribs.url&&(t.url=e.attribs.url),e.attribs.fileSize&&(t.fileSize=parseInt(e.attribs.fileSize,10)),e.attribs.type&&(t.type=e.attribs.type),e.attribs.expression&&(t.expression=e.attribs.expression),e.attribs.bitrate&&(t.bitrate=parseInt(e.attribs.bitrate,10)),e.attribs.framerate&&(t.framerate=parseInt(e.attribs.framerate,10)),e.attribs.samplingrate&&(t.samplingrate=parseInt(e.attribs.samplingrate,10)),e.attribs.channels&&(t.channels=parseInt(e.attribs.channels,10)),e.attribs.duration&&(t.duration=parseInt(e.attribs.duration,10)),e.attribs.height&&(t.height=parseInt(e.attribs.height,10)),e.attribs.width&&(t.width=parseInt(e.attribs.width,10)),e.attribs.lang&&(t.lang=e.attribs.lang),t}))}function m(e,t){return f.getElementsByTagName(e,t,!0)}function g(e,t){return f.getElementsByTagName(e,t,!0,1)[0]}function b(e,t,n){return void 0===n&&(n=!1),f.getText(f.getElementsByTagName(e,t,n,1)).trim()}function y(e,t){return t?t.attribs[e]:null}function w(e,t,n,r,o){void 0===o&&(o=!1);var i=b(n,r,o);i&&(e[t]=i)}function A(e){return"rss"===e||"feed"===e||"rdf:RDF"===e}t.FeedHandler=p,t.parseFeed=function(e,t){void 0===t&&(t={xmlMode:!0});var n=new p(t);return new h.Parser(n,t).end(e),n.feed}},4940:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=void 0;var o=r(n(78)),i=new Set(["input","option","optgroup","select","button","datalist","textarea"]),a=new Set(["p"]),l={tr:new Set(["tr","th","td"]),th:new Set(["th"]),td:new Set(["thead","th","td"]),body:new Set(["head","link","script"]),li:new Set(["li"]),p:a,h1:a,h2:a,h3:a,h4:a,h5:a,h6:a,select:i,input:i,output:i,button:i,datalist:i,textarea:i,option:new Set(["option"]),optgroup:new Set(["optgroup","option"]),dd:new Set(["dt","dd"]),dt:new Set(["dt","dd"]),address:a,article:a,aside:a,blockquote:a,details:a,div:a,dl:a,fieldset:a,figcaption:a,figure:a,footer:a,form:a,header:a,hr:a,main:a,nav:a,ol:a,pre:a,section:a,table:a,ul:a,rt:new Set(["rt","rp"]),rp:new Set(["rt","rp"]),tbody:new Set(["thead","tbody"]),tfoot:new Set(["thead","tbody"])},u=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),c=new Set(["math","svg"]),s=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),d=/\s|\//,f=function(){function e(e,t){var n,r,i,a,l;void 0===t&&(t={}),this.startIndex=0,this.endIndex=null,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.options=t,this.cbs=null!=e?e:{},this.lowerCaseTagNames=null!==(n=t.lowerCaseTags)&&void 0!==n?n:!t.xmlMode,this.lowerCaseAttributeNames=null!==(r=t.lowerCaseAttributeNames)&&void 0!==r?r:!t.xmlMode,this.tokenizer=new(null!==(i=t.Tokenizer)&&void 0!==i?i:o.default)(this.options,this),null===(l=(a=this.cbs).onparserinit)||void 0===l||l.call(a,this)}return e.prototype.updatePosition=function(e){null===this.endIndex?this.tokenizer.sectionStart<=e?this.startIndex=0:this.startIndex=this.tokenizer.sectionStart-e:this.startIndex=this.endIndex+1,this.endIndex=this.tokenizer.getAbsoluteIndex()},e.prototype.ontext=function(e){var t,n;this.updatePosition(1),this.endIndex--,null===(n=(t=this.cbs).ontext)||void 0===n||n.call(t,e)},e.prototype.onopentagname=function(e){var t,n;if(this.lowerCaseTagNames&&(e=e.toLowerCase()),this.tagname=e,!this.options.xmlMode&&Object.prototype.hasOwnProperty.call(l,e))for(var r=void 0;this.stack.length>0&&l[e].has(r=this.stack[this.stack.length-1]);)this.onclosetag(r);!this.options.xmlMode&&u.has(e)||(this.stack.push(e),c.has(e)?this.foreignContext.push(!0):s.has(e)&&this.foreignContext.push(!1)),null===(n=(t=this.cbs).onopentagname)||void 0===n||n.call(t,e),this.cbs.onopentag&&(this.attribs={})},e.prototype.onopentagend=function(){var e,t;this.updatePosition(1),this.attribs&&(null===(t=(e=this.cbs).onopentag)||void 0===t||t.call(e,this.tagname,this.attribs),this.attribs=null),!this.options.xmlMode&&this.cbs.onclosetag&&u.has(this.tagname)&&this.cbs.onclosetag(this.tagname),this.tagname=""},e.prototype.onclosetag=function(e){if(this.updatePosition(1),this.lowerCaseTagNames&&(e=e.toLowerCase()),(c.has(e)||s.has(e))&&this.foreignContext.pop(),!this.stack.length||!this.options.xmlMode&&u.has(e))this.options.xmlMode||"br"!==e&&"p"!==e||(this.onopentagname(e),this.closeCurrentTag());else{var t=this.stack.lastIndexOf(e);if(-1!==t)if(this.cbs.onclosetag)for(t=this.stack.length-t;t--;)this.cbs.onclosetag(this.stack.pop());else this.stack.length=t;else"p"!==e||this.options.xmlMode||(this.onopentagname(e),this.closeCurrentTag())}},e.prototype.onselfclosingtag=function(){this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?this.closeCurrentTag():this.onopentagend()},e.prototype.closeCurrentTag=function(){var e,t,n=this.tagname;this.onopentagend(),this.stack[this.stack.length-1]===n&&(null===(t=(e=this.cbs).onclosetag)||void 0===t||t.call(e,n),this.stack.pop())},e.prototype.onattribname=function(e){this.lowerCaseAttributeNames&&(e=e.toLowerCase()),this.attribname=e},e.prototype.onattribdata=function(e){this.attribvalue+=e},e.prototype.onattribend=function(e){var t,n;null===(n=(t=this.cbs).onattribute)||void 0===n||n.call(t,this.attribname,this.attribvalue,e),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribname="",this.attribvalue=""},e.prototype.getInstructionName=function(e){var t=e.search(d),n=t<0?e:e.substr(0,t);return this.lowerCaseTagNames&&(n=n.toLowerCase()),n},e.prototype.ondeclaration=function(e){if(this.cbs.onprocessinginstruction){var t=this.getInstructionName(e);this.cbs.onprocessinginstruction("!"+t,"!"+e)}},e.prototype.onprocessinginstruction=function(e){if(this.cbs.onprocessinginstruction){var t=this.getInstructionName(e);this.cbs.onprocessinginstruction("?"+t,"?"+e)}},e.prototype.oncomment=function(e){var t,n,r,o;this.updatePosition(4),null===(n=(t=this.cbs).oncomment)||void 0===n||n.call(t,e),null===(o=(r=this.cbs).oncommentend)||void 0===o||o.call(r)},e.prototype.oncdata=function(e){var t,n,r,o,i,a;this.updatePosition(1),this.options.xmlMode||this.options.recognizeCDATA?(null===(n=(t=this.cbs).oncdatastart)||void 0===n||n.call(t),null===(o=(r=this.cbs).ontext)||void 0===o||o.call(r,e),null===(a=(i=this.cbs).oncdataend)||void 0===a||a.call(i)):this.oncomment("[CDATA["+e+"]]")},e.prototype.onerror=function(e){var t,n;null===(n=(t=this.cbs).onerror)||void 0===n||n.call(t,e)},e.prototype.onend=function(){var e,t;if(this.cbs.onclosetag)for(var n=this.stack.length;n>0;this.cbs.onclosetag(this.stack[--n]));null===(t=(e=this.cbs).onend)||void 0===t||t.call(e)},e.prototype.reset=function(){var e,t,n,r;null===(t=(e=this.cbs).onreset)||void 0===t||t.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack=[],null===(r=(n=this.cbs).onparserinit)||void 0===r||r.call(n,this)},e.prototype.parseComplete=function(e){this.reset(),this.end(e)},e.prototype.write=function(e){this.tokenizer.write(e)},e.prototype.end=function(e){this.tokenizer.end(e)},e.prototype.pause=function(){this.tokenizer.pause()},e.prototype.resume=function(){this.tokenizer.resume()},e.prototype.parseChunk=function(e){this.write(e)},e.prototype.done=function(e){this.end(e)},e}();t.Parser=f},78:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(8030)),i=r(n(620)),a=r(n(9584)),l=r(n(7084));function u(e){return" "===e||"\n"===e||"\t"===e||"\f"===e||"\r"===e}function c(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}function s(e,t,n){var r=e.toLowerCase();return e===r?function(e,o){o===r?e._state=t:(e._state=n,e._index--)}:function(o,i){i===r||i===e?o._state=t:(o._state=n,o._index--)}}function d(e,t){var n=e.toLowerCase();return function(r,o){o===n||o===e?r._state=t:(r._state=3,r._index--)}}var f=s("C",24,16),h=s("D",25,16),p=s("A",26,16),v=s("T",27,16),m=s("A",28,16),g=d("R",35),b=d("I",36),y=d("P",37),w=d("T",38),A=s("R",40,1),k=s("I",41,1),_=s("P",42,1),C=s("T",43,1),N=d("Y",45),O=d("L",46),x=d("E",47),E=s("Y",49,1),D=s("L",50,1),P=s("E",51,1),R=d("I",54),S=d("T",55),T=d("L",56),j=d("E",57),I=s("I",58,1),B=s("T",59,1),M=s("L",60,1),F=s("E",61,1),L=s("#",63,64),U=s("X",66,65),V=function(){function e(e,t){var n;this._state=1,this.buffer="",this.sectionStart=0,this._index=0,this.bufferOffset=0,this.baseState=1,this.special=1,this.running=!0,this.ended=!1,this.cbs=t,this.xmlMode=!!(null==e?void 0:e.xmlMode),this.decodeEntities=null===(n=null==e?void 0:e.decodeEntities)||void 0===n||n}return e.prototype.reset=function(){this._state=1,this.buffer="",this.sectionStart=0,this._index=0,this.bufferOffset=0,this.baseState=1,this.special=1,this.running=!0,this.ended=!1},e.prototype.write=function(e){this.ended&&this.cbs.onerror(Error(".write() after done!")),this.buffer+=e,this.parse()},e.prototype.end=function(e){this.ended&&this.cbs.onerror(Error(".end() after done!")),e&&this.write(e),this.ended=!0,this.running&&this.finish()},e.prototype.pause=function(){this.running=!1},e.prototype.resume=function(){this.running=!0,this._index<this.buffer.length&&this.parse(),this.ended&&this.finish()},e.prototype.getAbsoluteIndex=function(){return this.bufferOffset+this._index},e.prototype.stateText=function(e){"<"===e?(this._index>this.sectionStart&&this.cbs.ontext(this.getSection()),this._state=2,this.sectionStart=this._index):!this.decodeEntities||"&"!==e||1!==this.special&&4!==this.special||(this._index>this.sectionStart&&this.cbs.ontext(this.getSection()),this.baseState=1,this._state=62,this.sectionStart=this._index)},e.prototype.isTagStartChar=function(e){return c(e)||this.xmlMode&&!u(e)&&"/"!==e&&">"!==e},e.prototype.stateBeforeTagName=function(e){"/"===e?this._state=5:"<"===e?(this.cbs.ontext(this.getSection()),this.sectionStart=this._index):">"===e||1!==this.special||u(e)?this._state=1:"!"===e?(this._state=15,this.sectionStart=this._index+1):"?"===e?(this._state=17,this.sectionStart=this._index+1):this.isTagStartChar(e)?(this._state=this.xmlMode||"s"!==e&&"S"!==e?this.xmlMode||"t"!==e&&"T"!==e?3:52:32,this.sectionStart=this._index):this._state=1},e.prototype.stateInTagName=function(e){("/"===e||">"===e||u(e))&&(this.emitToken("onopentagname"),this._state=8,this._index--)},e.prototype.stateBeforeClosingTagName=function(e){u(e)||(">"===e?this._state=1:1!==this.special?4===this.special||"s"!==e&&"S"!==e?4!==this.special||"t"!==e&&"T"!==e?(this._state=1,this._index--):this._state=53:this._state=33:this.isTagStartChar(e)?(this._state=6,this.sectionStart=this._index):(this._state=20,this.sectionStart=this._index))},e.prototype.stateInClosingTagName=function(e){(">"===e||u(e))&&(this.emitToken("onclosetag"),this._state=7,this._index--)},e.prototype.stateAfterClosingTagName=function(e){">"===e&&(this._state=1,this.sectionStart=this._index+1)},e.prototype.stateBeforeAttributeName=function(e){">"===e?(this.cbs.onopentagend(),this._state=1,this.sectionStart=this._index+1):"/"===e?this._state=4:u(e)||(this._state=9,this.sectionStart=this._index)},e.prototype.stateInSelfClosingTag=function(e){">"===e?(this.cbs.onselfclosingtag(),this._state=1,this.sectionStart=this._index+1,this.special=1):u(e)||(this._state=8,this._index--)},e.prototype.stateInAttributeName=function(e){("="===e||"/"===e||">"===e||u(e))&&(this.cbs.onattribname(this.getSection()),this.sectionStart=-1,this._state=10,this._index--)},e.prototype.stateAfterAttributeName=function(e){"="===e?this._state=11:"/"===e||">"===e?(this.cbs.onattribend(void 0),this._state=8,this._index--):u(e)||(this.cbs.onattribend(void 0),this._state=9,this.sectionStart=this._index)},e.prototype.stateBeforeAttributeValue=function(e){'"'===e?(this._state=12,this.sectionStart=this._index+1):"'"===e?(this._state=13,this.sectionStart=this._index+1):u(e)||(this._state=14,this.sectionStart=this._index,this._index--)},e.prototype.handleInAttributeValue=function(e,t){e===t?(this.emitToken("onattribdata"),this.cbs.onattribend(t),this._state=8):this.decodeEntities&&"&"===e&&(this.emitToken("onattribdata"),this.baseState=this._state,this._state=62,this.sectionStart=this._index)},e.prototype.stateInAttributeValueDoubleQuotes=function(e){this.handleInAttributeValue(e,'"')},e.prototype.stateInAttributeValueSingleQuotes=function(e){this.handleInAttributeValue(e,"'")},e.prototype.stateInAttributeValueNoQuotes=function(e){u(e)||">"===e?(this.emitToken("onattribdata"),this.cbs.onattribend(null),this._state=8,this._index--):this.decodeEntities&&"&"===e&&(this.emitToken("onattribdata"),this.baseState=this._state,this._state=62,this.sectionStart=this._index)},e.prototype.stateBeforeDeclaration=function(e){this._state="["===e?23:"-"===e?18:16},e.prototype.stateInDeclaration=function(e){">"===e&&(this.cbs.ondeclaration(this.getSection()),this._state=1,this.sectionStart=this._index+1)},e.prototype.stateInProcessingInstruction=function(e){">"===e&&(this.cbs.onprocessinginstruction(this.getSection()),this._state=1,this.sectionStart=this._index+1)},e.prototype.stateBeforeComment=function(e){"-"===e?(this._state=19,this.sectionStart=this._index+1):this._state=16},e.prototype.stateInComment=function(e){"-"===e&&(this._state=21)},e.prototype.stateInSpecialComment=function(e){">"===e&&(this.cbs.oncomment(this.buffer.substring(this.sectionStart,this._index)),this._state=1,this.sectionStart=this._index+1)},e.prototype.stateAfterComment1=function(e){this._state="-"===e?22:19},e.prototype.stateAfterComment2=function(e){">"===e?(this.cbs.oncomment(this.buffer.substring(this.sectionStart,this._index-2)),this._state=1,this.sectionStart=this._index+1):"-"!==e&&(this._state=19)},e.prototype.stateBeforeCdata6=function(e){"["===e?(this._state=29,this.sectionStart=this._index+1):(this._state=16,this._index--)},e.prototype.stateInCdata=function(e){"]"===e&&(this._state=30)},e.prototype.stateAfterCdata1=function(e){this._state="]"===e?31:29},e.prototype.stateAfterCdata2=function(e){">"===e?(this.cbs.oncdata(this.buffer.substring(this.sectionStart,this._index-2)),this._state=1,this.sectionStart=this._index+1):"]"!==e&&(this._state=29)},e.prototype.stateBeforeSpecialS=function(e){"c"===e||"C"===e?this._state=34:"t"===e||"T"===e?this._state=44:(this._state=3,this._index--)},e.prototype.stateBeforeSpecialSEnd=function(e){2!==this.special||"c"!==e&&"C"!==e?3!==this.special||"t"!==e&&"T"!==e?this._state=1:this._state=48:this._state=39},e.prototype.stateBeforeSpecialLast=function(e,t){("/"===e||">"===e||u(e))&&(this.special=t),this._state=3,this._index--},e.prototype.stateAfterSpecialLast=function(e,t){">"===e||u(e)?(this.special=1,this._state=6,this.sectionStart=this._index-t,this._index--):this._state=1},e.prototype.parseFixedEntity=function(e){if(void 0===e&&(e=this.xmlMode?l.default:i.default),this.sectionStart+1<this._index){var t=this.buffer.substring(this.sectionStart+1,this._index);Object.prototype.hasOwnProperty.call(e,t)&&(this.emitPartial(e[t]),this.sectionStart=this._index+1)}},e.prototype.parseLegacyEntity=function(){for(var e=this.sectionStart+1,t=Math.min(this._index-e,6);t>=2;){var n=this.buffer.substr(e,t);if(Object.prototype.hasOwnProperty.call(a.default,n))return this.emitPartial(a.default[n]),void(this.sectionStart+=t+1);t--}},e.prototype.stateInNamedEntity=function(e){";"===e?(this.parseFixedEntity(),1===this.baseState&&this.sectionStart+1<this._index&&!this.xmlMode&&this.parseLegacyEntity(),this._state=this.baseState):(e<"0"||e>"9")&&!c(e)&&(this.xmlMode||this.sectionStart+1===this._index||(1!==this.baseState?"="!==e&&this.parseFixedEntity(a.default):this.parseLegacyEntity()),this._state=this.baseState,this._index--)},e.prototype.decodeNumericEntity=function(e,t,n){var r=this.sectionStart+e;if(r!==this._index){var i=this.buffer.substring(r,this._index),a=parseInt(i,t);this.emitPartial(o.default(a)),this.sectionStart=n?this._index+1:this._index}this._state=this.baseState},e.prototype.stateInNumericEntity=function(e){";"===e?this.decodeNumericEntity(2,10,!0):(e<"0"||e>"9")&&(this.xmlMode?this._state=this.baseState:this.decodeNumericEntity(2,10,!1),this._index--)},e.prototype.stateInHexEntity=function(e){";"===e?this.decodeNumericEntity(3,16,!0):(e<"a"||e>"f")&&(e<"A"||e>"F")&&(e<"0"||e>"9")&&(this.xmlMode?this._state=this.baseState:this.decodeNumericEntity(3,16,!1),this._index--)},e.prototype.cleanup=function(){this.sectionStart<0?(this.buffer="",this.bufferOffset+=this._index,this._index=0):this.running&&(1===this._state?(this.sectionStart!==this._index&&this.cbs.ontext(this.buffer.substr(this.sectionStart)),this.buffer="",this.bufferOffset+=this._index,this._index=0):this.sectionStart===this._index?(this.buffer="",this.bufferOffset+=this._index,this._index=0):(this.buffer=this.buffer.substr(this.sectionStart),this._index-=this.sectionStart,this.bufferOffset+=this.sectionStart),this.sectionStart=0)},e.prototype.parse=function(){for(;this._index<this.buffer.length&&this.running;){var e=this.buffer.charAt(this._index);1===this._state?this.stateText(e):12===this._state?this.stateInAttributeValueDoubleQuotes(e):9===this._state?this.stateInAttributeName(e):19===this._state?this.stateInComment(e):20===this._state?this.stateInSpecialComment(e):8===this._state?this.stateBeforeAttributeName(e):3===this._state?this.stateInTagName(e):6===this._state?this.stateInClosingTagName(e):2===this._state?this.stateBeforeTagName(e):10===this._state?this.stateAfterAttributeName(e):13===this._state?this.stateInAttributeValueSingleQuotes(e):11===this._state?this.stateBeforeAttributeValue(e):5===this._state?this.stateBeforeClosingTagName(e):7===this._state?this.stateAfterClosingTagName(e):32===this._state?this.stateBeforeSpecialS(e):21===this._state?this.stateAfterComment1(e):14===this._state?this.stateInAttributeValueNoQuotes(e):4===this._state?this.stateInSelfClosingTag(e):16===this._state?this.stateInDeclaration(e):15===this._state?this.stateBeforeDeclaration(e):22===this._state?this.stateAfterComment2(e):18===this._state?this.stateBeforeComment(e):33===this._state?this.stateBeforeSpecialSEnd(e):53===this._state?I(this,e):39===this._state?A(this,e):40===this._state?k(this,e):41===this._state?_(this,e):34===this._state?g(this,e):35===this._state?b(this,e):36===this._state?y(this,e):37===this._state?w(this,e):38===this._state?this.stateBeforeSpecialLast(e,2):42===this._state?C(this,e):43===this._state?this.stateAfterSpecialLast(e,6):44===this._state?N(this,e):29===this._state?this.stateInCdata(e):45===this._state?O(this,e):46===this._state?x(this,e):47===this._state?this.stateBeforeSpecialLast(e,3):48===this._state?E(this,e):49===this._state?D(this,e):50===this._state?P(this,e):51===this._state?this.stateAfterSpecialLast(e,5):52===this._state?R(this,e):54===this._state?S(this,e):55===this._state?T(this,e):56===this._state?j(this,e):57===this._state?this.stateBeforeSpecialLast(e,4):58===this._state?B(this,e):59===this._state?M(this,e):60===this._state?F(this,e):61===this._state?this.stateAfterSpecialLast(e,5):17===this._state?this.stateInProcessingInstruction(e):64===this._state?this.stateInNamedEntity(e):23===this._state?f(this,e):62===this._state?L(this,e):24===this._state?h(this,e):25===this._state?p(this,e):30===this._state?this.stateAfterCdata1(e):31===this._state?this.stateAfterCdata2(e):26===this._state?v(this,e):27===this._state?m(this,e):28===this._state?this.stateBeforeCdata6(e):66===this._state?this.stateInHexEntity(e):65===this._state?this.stateInNumericEntity(e):63===this._state?U(this,e):this.cbs.onerror(Error("unknown _state"),this._state),this._index++}this.cleanup()},e.prototype.finish=function(){this.sectionStart<this._index&&this.handleTrailingData(),this.cbs.onend()},e.prototype.handleTrailingData=function(){var e=this.buffer.substr(this.sectionStart);29===this._state||30===this._state||31===this._state?this.cbs.oncdata(e):19===this._state||21===this._state||22===this._state?this.cbs.oncomment(e):64!==this._state||this.xmlMode?65!==this._state||this.xmlMode?66!==this._state||this.xmlMode?3!==this._state&&8!==this._state&&11!==this._state&&10!==this._state&&9!==this._state&&13!==this._state&&12!==this._state&&14!==this._state&&6!==this._state&&this.cbs.ontext(e):(this.decodeNumericEntity(3,16,!1),this.sectionStart<this._index&&(this._state=this.baseState,this.handleTrailingData())):(this.decodeNumericEntity(2,10,!1),this.sectionStart<this._index&&(this._state=this.baseState,this.handleTrailingData())):(this.parseLegacyEntity(),this.sectionStart<this._index&&(this._state=this.baseState,this.handleTrailingData()))},e.prototype.getSection=function(){return this.buffer.substring(this.sectionStart,this._index)},e.prototype.emitToken=function(e){this.cbs[e](this.getSection()),this.sectionStart=-1},e.prototype.emitPartial=function(e){1!==this.baseState?this.cbs.onattribdata(e):this.cbs.ontext(e)},e}();t.default=V},6147:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RssHandler=t.DefaultHandler=t.DomUtils=t.ElementType=t.Tokenizer=t.createDomStream=t.parseDOM=t.parseDocument=t.DomHandler=t.Parser=void 0;var u=n(4940);Object.defineProperty(t,"Parser",{enumerable:!0,get:function(){return u.Parser}});var c=n(8312);function s(e,t){var n=new c.DomHandler(void 0,t);return new u.Parser(n,t).end(e),n.root}Object.defineProperty(t,"DomHandler",{enumerable:!0,get:function(){return c.DomHandler}}),Object.defineProperty(t,"DefaultHandler",{enumerable:!0,get:function(){return c.DomHandler}}),t.parseDocument=s,t.parseDOM=function(e,t){return s(e,t).children},t.createDomStream=function(e,t,n){var r=new c.DomHandler(e,t,n);return new u.Parser(r,t)};var d=n(78);Object.defineProperty(t,"Tokenizer",{enumerable:!0,get:function(){return l(d).default}});var f=i(n(7815));t.ElementType=f,a(n(8903),t),t.DomUtils=i(n(9374));var h=n(8903);Object.defineProperty(t,"RssHandler",{enumerable:!0,get:function(){return h.FeedHandler}})},4987:(e,t,n)=>{var r=n(527)(n(394),"DataView");e.exports=r},318:(e,t,n)=>{var r=n(6677),o=n(4997),i=n(4780),a=n(1352),l=n(4312);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=a,u.prototype.set=l,e.exports=u},5630:(e,t,n)=>{var r=n(2789),o=n(8805),i=n(5852),a=n(7112),l=n(3688);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=a,u.prototype.set=l,e.exports=u},4718:(e,t,n)=>{var r=n(527)(n(394),"Map");e.exports=r},9150:(e,t,n)=>{var r=n(7973),o=n(2677),i=n(4044),a=n(8952),l=n(5064);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=a,u.prototype.set=l,e.exports=u},3129:(e,t,n)=>{var r=n(527)(n(394),"Promise");e.exports=r},9116:(e,t,n)=>{var r=n(527)(n(394),"Set");e.exports=r},2824:(e,t,n)=>{var r=n(9150),o=n(3625),i=n(2058);function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=o,a.prototype.has=i,e.exports=a},3616:(e,t,n)=>{var r=n(5630),o=n(803),i=n(6183),a=n(9798),l=n(3218),u=n(106);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=o,c.prototype.delete=i,c.prototype.get=a,c.prototype.has=l,c.prototype.set=u,e.exports=c},6190:(e,t,n)=>{var r=n(394).Symbol;e.exports=r},9971:(e,t,n)=>{var r=n(394).Uint8Array;e.exports=r},1722:(e,t,n)=>{var r=n(527)(n(394),"WeakMap");e.exports=r},3524:e=>{e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},9144:e=>{e.exports=function(e,t,n,r){for(var o=-1,i=null==e?0:e.length;++o<i;){var a=e[o];t(r,a,n(a),e)}return r}},3092:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},4707:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}},9440:(e,t,n)=>{var r=n(5722);e.exports=function(e,t){return!(null==e||!e.length)&&r(e,t,0)>-1}},7608:e=>{e.exports=function(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1}},7034:(e,t,n)=>{var r=n(3733),o=n(8751),i=n(5490),a=n(3473),l=n(6372),u=n(7702),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=i(e),s=!n&&o(e),d=!n&&!s&&a(e),f=!n&&!s&&!d&&u(e),h=n||s||d||f,p=h?r(e.length,String):[],v=p.length;for(var m in e)!t&&!c.call(e,m)||h&&("length"==m||d&&("offset"==m||"parent"==m)||f&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||l(m,v))||p.push(m);return p}},1635:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}},7517:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}},6039:e=>{e.exports=function(e,t,n,r){var o=-1,i=null==e?0:e.length;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}},3589:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},1417:e=>{e.exports=function(e){return e.split("")}},406:e=>{var t=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;e.exports=function(e){return e.match(t)||[]}},9118:(e,t,n)=>{var r=n(7909),o=n(4425);e.exports=function(e,t,n){(void 0!==n&&!o(e[t],n)||void 0===n&&!(t in e))&&r(e,t,n)}},266:(e,t,n)=>{var r=n(7909),o=n(4425),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var a=e[t];i.call(e,t)&&o(a,n)&&(void 0!==n||t in e)||r(e,t,n)}},3806:(e,t,n)=>{var r=n(4425);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},1918:(e,t,n)=>{var r=n(7265);e.exports=function(e,t,n,o){return r(e,(function(e,r,i){t(o,e,n(e),i)})),o}},2374:(e,t,n)=>{var r=n(3532),o=n(6055);e.exports=function(e,t){return e&&r(t,o(t),e)}},9409:(e,t,n)=>{var r=n(3532),o=n(8460);e.exports=function(e,t){return e&&r(t,o(t),e)}},7909:(e,t,n)=>{var r=n(7976);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},2378:(e,t,n)=>{var r=n(3616),o=n(3092),i=n(266),a=n(2374),l=n(9409),u=n(5623),c=n(9302),s=n(3766),d=n(5793),f=n(9549),h=n(4174),p=n(674),v=n(6410),m=n(6108),g=n(8096),b=n(5490),y=n(3473),w=n(7925),A=n(5464),k=n(339),_=n(6055),C=n(8460),N="[object Arguments]",O="[object Function]",x="[object Object]",E={};E[N]=E["[object Array]"]=E["[object ArrayBuffer]"]=E["[object DataView]"]=E["[object Boolean]"]=E["[object Date]"]=E["[object Float32Array]"]=E["[object Float64Array]"]=E["[object Int8Array]"]=E["[object Int16Array]"]=E["[object Int32Array]"]=E["[object Map]"]=E["[object Number]"]=E[x]=E["[object RegExp]"]=E["[object Set]"]=E["[object String]"]=E["[object Symbol]"]=E["[object Uint8Array]"]=E["[object Uint8ClampedArray]"]=E["[object Uint16Array]"]=E["[object Uint32Array]"]=!0,E["[object Error]"]=E[O]=E["[object WeakMap]"]=!1,e.exports=function e(t,n,D,P,R,S){var T,j=1&n,I=2&n,B=4&n;if(D&&(T=R?D(t,P,R,S):D(t)),void 0!==T)return T;if(!A(t))return t;var M=b(t);if(M){if(T=v(t),!j)return c(t,T)}else{var F=p(t),L=F==O||"[object GeneratorFunction]"==F;if(y(t))return u(t,j);if(F==x||F==N||L&&!R){if(T=I||L?{}:g(t),!j)return I?d(t,l(T,t)):s(t,a(T,t))}else{if(!E[F])return R?t:{};T=m(t,F,j)}}S||(S=new r);var U=S.get(t);if(U)return U;S.set(t,T),k(t)?t.forEach((function(r){T.add(e(r,n,D,r,t,S))})):w(t)&&t.forEach((function(r,o){T.set(o,e(r,n,D,o,t,S))}));var V=M?void 0:(B?I?h:f:I?C:_)(t);return o(V||t,(function(r,o){V&&(r=t[o=r]),i(T,o,e(r,n,D,o,t,S))})),T}},9988:(e,t,n)=>{var r=n(5464),o=Object.create,i=function(){function e(){}return function(t){if(!r(t))return{};if(o)return o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=i},7265:(e,t,n)=>{var r=n(9878),o=n(7494)(r);e.exports=o},198:e=>{e.exports=function(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}},3453:(e,t,n)=>{var r=n(7517),o=n(6214);e.exports=function e(t,n,i,a,l){var u=-1,c=t.length;for(i||(i=o),l||(l=[]);++u<c;){var s=t[u];n>0&&i(s)?n>1?e(s,n-1,i,a,l):r(l,s):a||(l[l.length]=s)}return l}},824:(e,t,n)=>{var r=n(1648)();e.exports=r},9878:(e,t,n)=>{var r=n(824),o=n(6055);e.exports=function(e,t){return e&&r(e,t,o)}},1695:(e,t,n)=>{var r=n(1514),o=n(2652);e.exports=function(e,t){for(var n=0,i=(t=r(t,e)).length;null!=e&&n<i;)e=e[o(t[n++])];return n&&n==i?e:void 0}},2128:(e,t,n)=>{var r=n(7517),o=n(5490);e.exports=function(e,t,n){var i=t(e);return o(e)?i:r(i,n(e))}},7943:(e,t,n)=>{var r=n(6190),o=n(6418),i=n(1825),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?o(e):i(e)}},4736:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},5722:(e,t,n)=>{var r=n(198),o=n(9186),i=n(7710);e.exports=function(e,t,n){return t==t?i(e,t,n):r(e,o,n)}},3791:(e,t,n)=>{var r=n(7943),o=n(7279);e.exports=function(e){return o(e)&&"[object Arguments]"==r(e)}},9435:(e,t,n)=>{var r=n(4677),o=n(7279);e.exports=function e(t,n,i,a,l){return t===n||(null==t||null==n||!o(t)&&!o(n)?t!=t&&n!=n:r(t,n,i,a,e,l))}},4677:(e,t,n)=>{var r=n(3616),o=n(7106),i=n(6457),a=n(1330),l=n(674),u=n(5490),c=n(3473),s=n(7702),d="[object Arguments]",f="[object Array]",h="[object Object]",p=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,v,m,g){var b=u(e),y=u(t),w=b?f:l(e),A=y?f:l(t),k=(w=w==d?h:w)==h,_=(A=A==d?h:A)==h,C=w==A;if(C&&c(e)){if(!c(t))return!1;b=!0,k=!1}if(C&&!k)return g||(g=new r),b||s(e)?o(e,t,n,v,m,g):i(e,t,w,n,v,m,g);if(!(1&n)){var N=k&&p.call(e,"__wrapped__"),O=_&&p.call(t,"__wrapped__");if(N||O){var x=N?e.value():e,E=O?t.value():t;return g||(g=new r),m(x,E,n,v,g)}}return!!C&&(g||(g=new r),a(e,t,n,v,m,g))}},6533:(e,t,n)=>{var r=n(674),o=n(7279);e.exports=function(e){return o(e)&&"[object Map]"==r(e)}},9646:(e,t,n)=>{var r=n(3616),o=n(9435);e.exports=function(e,t,n,i){var a=n.length,l=a,u=!i;if(null==e)return!l;for(e=Object(e);a--;){var c=n[a];if(u&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++a<l;){var s=(c=n[a])[0],d=e[s],f=c[1];if(u&&c[2]){if(void 0===d&&!(s in e))return!1}else{var h=new r;if(i)var p=i(d,f,s,e,t,h);if(!(void 0===p?o(f,d,3,i,h):p))return!1}}return!0}},9186:e=>{e.exports=function(e){return e!=e}},9428:(e,t,n)=>{var r=n(1739),o=n(1859),i=n(5464),a=n(7262),l=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,s=u.toString,d=c.hasOwnProperty,f=RegExp("^"+s.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||o(e))&&(r(e)?f:l).test(a(e))}},8947:(e,t,n)=>{var r=n(674),o=n(7279);e.exports=function(e){return o(e)&&"[object Set]"==r(e)}},6422:(e,t,n)=>{var r=n(7943),o=n(7607),i=n(7279),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&o(e.length)&&!!a[r(e)]}},5082:(e,t,n)=>{var r=n(8922),o=n(8299),i=n(2417),a=n(5490),l=n(9230);e.exports=function(e){return"function"==typeof e?e:null==e?i:"object"==typeof e?a(e)?o(e[0],e[1]):r(e):l(e)}},2135:(e,t,n)=>{var r=n(8518),o=n(9813),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=[];for(var n in Object(e))i.call(e,n)&&"constructor"!=n&&t.push(n);return t}},7052:(e,t,n)=>{var r=n(5464),o=n(8518),i=n(2678),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=o(e),n=[];for(var l in e)("constructor"!=l||!t&&a.call(e,l))&&n.push(l);return n}},4733:(e,t,n)=>{var r=n(7265),o=n(5277);e.exports=function(e,t){var n=-1,i=o(e)?Array(e.length):[];return r(e,(function(e,r,o){i[++n]=t(e,r,o)})),i}},8922:(e,t,n)=>{var r=n(9646),o=n(1291),i=n(8740);e.exports=function(e){var t=o(e);return 1==t.length&&t[0][2]?i(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},8299:(e,t,n)=>{var r=n(9435),o=n(6063),i=n(2480),a=n(5591),l=n(7831),u=n(8740),c=n(2652);e.exports=function(e,t){return a(e)&&l(t)?u(c(e),t):function(n){var a=o(n,e);return void 0===a&&a===t?i(n,e):r(t,a,3)}}},1119:(e,t,n)=>{var r=n(3616),o=n(9118),i=n(824),a=n(257),l=n(5464),u=n(8460),c=n(3999);e.exports=function e(t,n,s,d,f){t!==n&&i(n,(function(i,u){if(f||(f=new r),l(i))a(t,n,u,s,e,d,f);else{var h=d?d(c(t,u),i,u+"",t,n,f):void 0;void 0===h&&(h=i),o(t,u,h)}}),u)}},257:(e,t,n)=>{var r=n(9118),o=n(5623),i=n(6796),a=n(9302),l=n(8096),u=n(8751),c=n(5490),s=n(9490),d=n(3473),f=n(1739),h=n(5464),p=n(988),v=n(7702),m=n(3999),g=n(7264);e.exports=function(e,t,n,b,y,w,A){var k=m(e,n),_=m(t,n),C=A.get(_);if(C)r(e,n,C);else{var N=w?w(k,_,n+"",e,t,A):void 0,O=void 0===N;if(O){var x=c(_),E=!x&&d(_),D=!x&&!E&&v(_);N=_,x||E||D?c(k)?N=k:s(k)?N=a(k):E?(O=!1,N=o(_,!0)):D?(O=!1,N=i(_,!0)):N=[]:p(_)||u(_)?(N=k,u(k)?N=g(k):h(k)&&!f(k)||(N=l(_))):O=!1}O&&(A.set(_,N),y(N,_,b,w,A),A.delete(_)),r(e,n,N)}}},926:(e,t,n)=>{var r=n(2563),o=n(2480);e.exports=function(e,t){return r(e,t,(function(t,n){return o(e,n)}))}},2563:(e,t,n)=>{var r=n(1695),o=n(6027),i=n(1514);e.exports=function(e,t,n){for(var a=-1,l=t.length,u={};++a<l;){var c=t[a],s=r(e,c);n(s,c)&&o(u,i(c,e),s)}return u}},1406:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},6012:(e,t,n)=>{var r=n(1695);e.exports=function(e){return function(t){return r(t,e)}}},2815:e=>{e.exports=function(e){return function(t){return null==e?void 0:e[t]}}},9109:(e,t,n)=>{var r=n(2417),o=n(2254),i=n(5392);e.exports=function(e,t){return i(o(e,t,r),e+"")}},6027:(e,t,n)=>{var r=n(266),o=n(1514),i=n(6372),a=n(5464),l=n(2652);e.exports=function(e,t,n,u){if(!a(e))return e;for(var c=-1,s=(t=o(t,e)).length,d=s-1,f=e;null!=f&&++c<s;){var h=l(t[c]),p=n;if("__proto__"===h||"constructor"===h||"prototype"===h)return e;if(c!=d){var v=f[h];void 0===(p=u?u(v,h,f):void 0)&&(p=a(v)?v:i(t[c+1])?[]:{})}r(f,h,p),f=f[h]}return e}},823:(e,t,n)=>{var r=n(5335),o=n(7976),i=n(2417),a=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:i;e.exports=a},6273:e=>{e.exports=function(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(o);++r<o;)i[r]=e[r+t];return i}},3733:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},1991:(e,t,n)=>{var r=n(6190),o=n(1635),i=n(5490),a=n(8847),l=r?r.prototype:void 0,u=l?l.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(i(t))return o(t,e)+"";if(a(t))return u?u.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},9535:(e,t,n)=>{var r=n(437),o=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(o,""):e}},8456:e=>{e.exports=function(e){return function(t){return e(t)}}},5674:(e,t,n)=>{var r=n(2824),o=n(9440),i=n(7608),a=n(4124),l=n(8180),u=n(8552);e.exports=function(e,t,n){var c=-1,s=o,d=e.length,f=!0,h=[],p=h;if(n)f=!1,s=i;else if(d>=200){var v=t?null:l(e);if(v)return u(v);f=!1,s=a,p=new r}else p=t?[]:h;e:for(;++c<d;){var m=e[c],g=t?t(m):m;if(m=n||0!==m?m:0,f&&g==g){for(var b=p.length;b--;)if(p[b]===g)continue e;t&&p.push(g),h.push(m)}else s(p,g,n)||(p!==h&&p.push(g),h.push(m))}return h}},4246:(e,t,n)=>{var r=n(1514),o=n(4555),i=n(5813),a=n(2652);e.exports=function(e,t){return t=r(t,e),null==(e=i(e,t))||delete e[a(o(t))]}},4124:e=>{e.exports=function(e,t){return e.has(t)}},1606:(e,t,n)=>{var r=n(2417);e.exports=function(e){return"function"==typeof e?e:r}},1514:(e,t,n)=>{var r=n(5490),o=n(5591),i=n(2801),a=n(9815);e.exports=function(e,t){return r(e)?e:o(e,t)?[e]:i(a(e))}},4391:(e,t,n)=>{var r=n(6273);e.exports=function(e,t,n){var o=e.length;return n=void 0===n?o:n,!t&&n>=o?e:r(e,t,n)}},9350:(e,t,n)=>{var r=n(9971);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},5623:(e,t,n)=>{e=n.nmd(e);var r=n(394),o=t&&!t.nodeType&&t,i=o&&e&&!e.nodeType&&e,a=i&&i.exports===o?r.Buffer:void 0,l=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=l?l(n):new e.constructor(n);return e.copy(r),r}},4996:(e,t,n)=>{var r=n(9350);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},1560:e=>{var t=/\w*$/;e.exports=function(e){var n=new e.constructor(e.source,t.exec(e));return n.lastIndex=e.lastIndex,n}},5593:(e,t,n)=>{var r=n(6190),o=r?r.prototype:void 0,i=o?o.valueOf:void 0;e.exports=function(e){return i?Object(i.call(e)):{}}},6796:(e,t,n)=>{var r=n(9350);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},9302:e=>{e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},3532:(e,t,n)=>{var r=n(266),o=n(7909);e.exports=function(e,t,n,i){var a=!n;n||(n={});for(var l=-1,u=t.length;++l<u;){var c=t[l],s=i?i(n[c],e[c],c,n,e):void 0;void 0===s&&(s=e[c]),a?o(n,c,s):r(n,c,s)}return n}},3766:(e,t,n)=>{var r=n(3532),o=n(4847);e.exports=function(e,t){return r(e,o(e),t)}},5793:(e,t,n)=>{var r=n(3532),o=n(9716);e.exports=function(e,t){return r(e,o(e),t)}},1986:(e,t,n)=>{var r=n(394)["__core-js_shared__"];e.exports=r},1871:(e,t,n)=>{var r=n(9144),o=n(1918),i=n(5082),a=n(5490);e.exports=function(e,t){return function(n,l){var u=a(n)?r:o,c=t?t():{};return u(n,e,i(l,2),c)}}},940:(e,t,n)=>{var r=n(9109),o=n(2355);e.exports=function(e){return r((function(t,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,l=i>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(i--,a):void 0,l&&o(n[0],n[1],l)&&(a=i<3?void 0:a,i=1),t=Object(t);++r<i;){var u=n[r];u&&e(t,u,r,a)}return t}))}},7494:(e,t,n)=>{var r=n(5277);e.exports=function(e,t){return function(n,o){if(null==n)return n;if(!r(n))return e(n,o);for(var i=n.length,a=t?i:-1,l=Object(n);(t?a--:++a<i)&&!1!==o(l[a],a,l););return n}}},1648:e=>{e.exports=function(e){return function(t,n,r){for(var o=-1,i=Object(t),a=r(t),l=a.length;l--;){var u=a[e?l:++o];if(!1===n(i[u],u,i))break}return t}}},8738:(e,t,n)=>{var r=n(4391),o=n(341),i=n(625),a=n(9815);e.exports=function(e){return function(t){t=a(t);var n=o(t)?i(t):void 0,l=n?n[0]:t.charAt(0),u=n?r(n,1).join(""):t.slice(1);return l[e]()+u}}},2620:(e,t,n)=>{var r=n(6039),o=n(5970),i=n(862),a=RegExp("['’]","g");e.exports=function(e){return function(t){return r(i(o(t).replace(a,"")),e,"")}}},6265:(e,t,n)=>{var r=n(5082),o=n(5277),i=n(6055);e.exports=function(e){return function(t,n,a){var l=Object(t);if(!o(t)){var u=r(n,3);t=i(t),n=function(e){return u(l[e],e,l)}}var c=e(t,n,a);return c>-1?l[u?t[c]:c]:void 0}}},8180:(e,t,n)=>{var r=n(9116),o=n(8059),i=n(8552),a=r&&1/i(new r([,-0]))[1]==1/0?function(e){return new r(e)}:o;e.exports=a},9071:(e,t,n)=>{var r=n(988);e.exports=function(e){return r(e)?void 0:e}},7652:(e,t,n)=>{var r=n(2815)({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"});e.exports=r},7976:(e,t,n)=>{var r=n(527),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},7106:(e,t,n)=>{var r=n(2824),o=n(3589),i=n(4124);e.exports=function(e,t,n,a,l,u){var c=1&n,s=e.length,d=t.length;if(s!=d&&!(c&&d>s))return!1;var f=u.get(e),h=u.get(t);if(f&&h)return f==t&&h==e;var p=-1,v=!0,m=2&n?new r:void 0;for(u.set(e,t),u.set(t,e);++p<s;){var g=e[p],b=t[p];if(a)var y=c?a(b,g,p,t,e,u):a(g,b,p,e,t,u);if(void 0!==y){if(y)continue;v=!1;break}if(m){if(!o(t,(function(e,t){if(!i(m,t)&&(g===e||l(g,e,n,a,u)))return m.push(t)}))){v=!1;break}}else if(g!==b&&!l(g,b,n,a,u)){v=!1;break}}return u.delete(e),u.delete(t),v}},6457:(e,t,n)=>{var r=n(6190),o=n(9971),i=n(4425),a=n(7106),l=n(9090),u=n(8552),c=r?r.prototype:void 0,s=c?c.valueOf:void 0;e.exports=function(e,t,n,r,c,d,f){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!d(new o(e),new o(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var h=l;case"[object Set]":var p=1&r;if(h||(h=u),e.size!=t.size&&!p)return!1;var v=f.get(e);if(v)return v==t;r|=2,f.set(e,t);var m=a(h(e),h(t),r,c,d,f);return f.delete(e),m;case"[object Symbol]":if(s)return s.call(e)==s.call(t)}return!1}},1330:(e,t,n)=>{var r=n(9549),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,i,a,l){var u=1&n,c=r(e),s=c.length;if(s!=r(t).length&&!u)return!1;for(var d=s;d--;){var f=c[d];if(!(u?f in t:o.call(t,f)))return!1}var h=l.get(e),p=l.get(t);if(h&&p)return h==t&&p==e;var v=!0;l.set(e,t),l.set(t,e);for(var m=u;++d<s;){var g=e[f=c[d]],b=t[f];if(i)var y=u?i(b,g,f,t,e,l):i(g,b,f,e,t,l);if(!(void 0===y?g===b||a(g,b,n,i,l):y)){v=!1;break}m||(m="constructor"==f)}if(v&&!m){var w=e.constructor,A=t.constructor;w==A||!("constructor"in e)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof A&&A instanceof A||(v=!1)}return l.delete(e),l.delete(t),v}},6955:(e,t,n)=>{var r=n(1933),o=n(2254),i=n(5392);e.exports=function(e){return i(o(e,void 0,r),e+"")}},9043:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},9549:(e,t,n)=>{var r=n(2128),o=n(4847),i=n(6055);e.exports=function(e){return r(e,i,o)}},4174:(e,t,n)=>{var r=n(2128),o=n(9716),i=n(8460);e.exports=function(e){return r(e,i,o)}},3872:(e,t,n)=>{var r=n(6943);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},1291:(e,t,n)=>{var r=n(7831),o=n(6055);e.exports=function(e){for(var t=o(e),n=t.length;n--;){var i=t[n],a=e[i];t[n]=[i,a,r(a)]}return t}},527:(e,t,n)=>{var r=n(9428),o=n(9831);e.exports=function(e,t){var n=o(e,t);return r(n)?n:void 0}},7732:(e,t,n)=>{var r=n(7026)(Object.getPrototypeOf,Object);e.exports=r},6418:(e,t,n)=>{var r=n(6190),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,l=r?r.toStringTag:void 0;e.exports=function(e){var t=i.call(e,l),n=e[l];try{e[l]=void 0;var r=!0}catch(e){}var o=a.call(e);return r&&(t?e[l]=n:delete e[l]),o}},4847:(e,t,n)=>{var r=n(4707),o=n(5958),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,l=a?function(e){return null==e?[]:(e=Object(e),r(a(e),(function(t){return i.call(e,t)})))}:o;e.exports=l},9716:(e,t,n)=>{var r=n(7517),o=n(7732),i=n(4847),a=n(5958),l=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,i(e)),e=o(e);return t}:a;e.exports=l},674:(e,t,n)=>{var r=n(4987),o=n(4718),i=n(3129),a=n(9116),l=n(1722),u=n(7943),c=n(7262),s="[object Map]",d="[object Promise]",f="[object Set]",h="[object WeakMap]",p="[object DataView]",v=c(r),m=c(o),g=c(i),b=c(a),y=c(l),w=u;(r&&w(new r(new ArrayBuffer(1)))!=p||o&&w(new o)!=s||i&&w(i.resolve())!=d||a&&w(new a)!=f||l&&w(new l)!=h)&&(w=function(e){var t=u(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case v:return p;case m:return s;case g:return d;case b:return f;case y:return h}return t}),e.exports=w},9831:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},8175:(e,t,n)=>{var r=n(1514),o=n(8751),i=n(5490),a=n(6372),l=n(7607),u=n(2652);e.exports=function(e,t,n){for(var c=-1,s=(t=r(t,e)).length,d=!1;++c<s;){var f=u(t[c]);if(!(d=null!=e&&n(e,f)))break;e=e[f]}return d||++c!=s?d:!!(s=null==e?0:e.length)&&l(s)&&a(f,s)&&(i(e)||o(e))}},341:e=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},2745:e=>{var t=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;e.exports=function(e){return t.test(e)}},6677:(e,t,n)=>{var r=n(1405);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},4997:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},4780:(e,t,n)=>{var r=n(1405),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return o.call(t,e)?t[e]:void 0}},1352:(e,t,n)=>{var r=n(1405),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:o.call(t,e)}},4312:(e,t,n)=>{var r=n(1405);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},6410:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e){var n=e.length,r=new e.constructor(n);return n&&"string"==typeof e[0]&&t.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},6108:(e,t,n)=>{var r=n(9350),o=n(4996),i=n(1560),a=n(5593),l=n(6796);e.exports=function(e,t,n){var u=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new u(+e);case"[object DataView]":return o(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return l(e,n);case"[object Map]":case"[object Set]":return new u;case"[object Number]":case"[object String]":return new u(e);case"[object RegExp]":return i(e);case"[object Symbol]":return a(e)}}},8096:(e,t,n)=>{var r=n(9988),o=n(7732),i=n(8518);e.exports=function(e){return"function"!=typeof e.constructor||i(e)?{}:r(o(e))}},6214:(e,t,n)=>{var r=n(6190),o=n(8751),i=n(5490),a=r?r.isConcatSpreadable:void 0;e.exports=function(e){return i(e)||o(e)||!!(a&&e&&e[a])}},6372:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},2355:(e,t,n)=>{var r=n(4425),o=n(5277),i=n(6372),a=n(5464);e.exports=function(e,t,n){if(!a(n))return!1;var l=typeof t;return!!("number"==l?o(n)&&i(t,n.length):"string"==l&&t in n)&&r(n[t],e)}},5591:(e,t,n)=>{var r=n(5490),o=n(8847),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!o(e))||a.test(e)||!i.test(e)||null!=t&&e in Object(t)}},6943:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},1859:(e,t,n)=>{var r,o=n(1986),i=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!i&&i in e}},8518:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},7831:(e,t,n)=>{var r=n(5464);e.exports=function(e){return e==e&&!r(e)}},2789:e=>{e.exports=function(){this.__data__=[],this.size=0}},8805:(e,t,n)=>{var r=n(3806),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():o.call(t,n,1),--this.size,0))}},5852:(e,t,n)=>{var r=n(3806);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},7112:(e,t,n)=>{var r=n(3806);e.exports=function(e){return r(this.__data__,e)>-1}},3688:(e,t,n)=>{var r=n(3806);e.exports=function(e,t){var n=this.__data__,o=r(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}},7973:(e,t,n)=>{var r=n(318),o=n(5630),i=n(4718);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||o),string:new r}}},2677:(e,t,n)=>{var r=n(3872);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},4044:(e,t,n)=>{var r=n(3872);e.exports=function(e){return r(this,e).get(e)}},8952:(e,t,n)=>{var r=n(3872);e.exports=function(e){return r(this,e).has(e)}},5064:(e,t,n)=>{var r=n(3872);e.exports=function(e,t){var n=r(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}},9090:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},8740:e=>{e.exports=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}},3337:(e,t,n)=>{var r=n(9207);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},1405:(e,t,n)=>{var r=n(527)(Object,"create");e.exports=r},9813:(e,t,n)=>{var r=n(7026)(Object.keys,Object);e.exports=r},2678:e=>{e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},1022:(e,t,n)=>{e=n.nmd(e);var r=n(9043),o=t&&!t.nodeType&&t,i=o&&e&&!e.nodeType&&e,a=i&&i.exports===o&&r.process,l=function(){try{return i&&i.require&&i.require("util").types||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=l},1825:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},7026:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},2254:(e,t,n)=>{var r=n(3524),o=Math.max;e.exports=function(e,t,n){return t=o(void 0===t?e.length-1:t,0),function(){for(var i=arguments,a=-1,l=o(i.length-t,0),u=Array(l);++a<l;)u[a]=i[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=i[a];return c[t]=n(u),r(e,this,c)}}},5813:(e,t,n)=>{var r=n(1695),o=n(6273);e.exports=function(e,t){return t.length<2?e:r(e,o(t,0,-1))}},394:(e,t,n)=>{var r=n(9043),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},3999:e=>{e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},3625:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},2058:e=>{e.exports=function(e){return this.__data__.has(e)}},8552:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},5392:(e,t,n)=>{var r=n(823),o=n(5488)(r);e.exports=o},5488:e=>{var t=Date.now;e.exports=function(e){var n=0,r=0;return function(){var o=t(),i=16-(o-r);if(r=o,i>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},803:(e,t,n)=>{var r=n(5630);e.exports=function(){this.__data__=new r,this.size=0}},6183:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},9798:e=>{e.exports=function(e){return this.__data__.get(e)}},3218:e=>{e.exports=function(e){return this.__data__.has(e)}},106:(e,t,n)=>{var r=n(5630),o=n(4718),i=n(9150);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!o||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new i(a)}return n.set(e,t),this.size=n.size,this}},7710:e=>{e.exports=function(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}},625:(e,t,n)=>{var r=n(1417),o=n(341),i=n(8265);e.exports=function(e){return o(e)?i(e):r(e)}},2801:(e,t,n)=>{var r=n(3337),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,a=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o,(function(e,n,r,o){t.push(r?o.replace(i,"$1"):n||e)})),t}));e.exports=a},2652:(e,t,n)=>{var r=n(8847);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},7262:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},437:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},8265:e=>{var t="\\ud800-\\udfff",n="["+t+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",o="\\ud83c[\\udffb-\\udfff]",i="[^"+t+"]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",l="[\\ud800-\\udbff][\\udc00-\\udfff]",u="(?:"+r+"|"+o+")?",c="[\\ufe0e\\ufe0f]?",s=c+u+"(?:\\u200d(?:"+[i,a,l].join("|")+")"+c+u+")*",d="(?:"+[i+r+"?",r,a,l,n].join("|")+")",f=RegExp(o+"(?="+o+")|"+d+s,"g");e.exports=function(e){return e.match(f)||[]}},8182:e=>{var t="\\ud800-\\udfff",n="\\u2700-\\u27bf",r="a-z\\xdf-\\xf6\\xf8-\\xff",o="A-Z\\xc0-\\xd6\\xd8-\\xde",i="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",a="["+i+"]",l="\\d+",u="["+n+"]",c="["+r+"]",s="[^"+t+i+l+n+r+o+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",h="["+o+"]",p="(?:"+c+"|"+s+")",v="(?:"+h+"|"+s+")",m="(?:['’](?:d|ll|m|re|s|t|ve))?",g="(?:['’](?:D|LL|M|RE|S|T|VE))?",b="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",y="[\\ufe0e\\ufe0f]?",w=y+b+"(?:\\u200d(?:"+["[^"+t+"]",d,f].join("|")+")"+y+b+")*",A="(?:"+[u,d,f].join("|")+")"+w,k=RegExp([h+"?"+c+"+"+m+"(?="+[a,h,"$"].join("|")+")",v+"+"+g+"(?="+[a,h+p,"$"].join("|")+")",h+"?"+p+"+"+m,h+"+"+g,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",l,A].join("|"),"g");e.exports=function(e){return e.match(k)||[]}},3657:(e,t,n)=>{var r=n(1313),o=n(2620)((function(e,t,n){return t=t.toLowerCase(),e+(n?r(t):t)}));e.exports=o},1313:(e,t,n)=>{var r=n(9815),o=n(9153);e.exports=function(e){return o(r(e).toLowerCase())}},2160:(e,t,n)=>{var r=n(2378);e.exports=function(e){return r(e,5)}},5335:e=>{e.exports=function(e){return function(){return e}}},5748:(e,t,n)=>{var r=n(5464),o=n(8643),i=n(6119),a=Math.max,l=Math.min;e.exports=function(e,t,n){var u,c,s,d,f,h,p=0,v=!1,m=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function b(t){var n=u,r=c;return u=c=void 0,p=t,d=e.apply(r,n)}function y(e){var n=e-h;return void 0===h||n>=t||n<0||m&&e-p>=s}function w(){var e=o();if(y(e))return A(e);f=setTimeout(w,function(e){var n=t-(e-h);return m?l(n,s-(e-p)):n}(e))}function A(e){return f=void 0,g&&u?b(e):(u=c=void 0,d)}function k(){var e=o(),n=y(e);if(u=arguments,c=this,h=e,n){if(void 0===f)return function(e){return p=e,f=setTimeout(w,t),v?b(e):d}(h);if(m)return clearTimeout(f),f=setTimeout(w,t),b(h)}return void 0===f&&(f=setTimeout(w,t)),d}return t=i(t)||0,r(n)&&(v=!!n.leading,s=(m="maxWait"in n)?a(i(n.maxWait)||0,t):s,g="trailing"in n?!!n.trailing:g),k.cancel=function(){void 0!==f&&clearTimeout(f),p=0,u=h=c=f=void 0},k.flush=function(){return void 0===f?d:A(o())},k}},5970:(e,t,n)=>{var r=n(7652),o=n(9815),i=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,a=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");e.exports=function(e){return(e=o(e))&&e.replace(i,r).replace(a,"")}},4425:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},1151:(e,t,n)=>{var r=n(6265)(n(2230));e.exports=r},2230:(e,t,n)=>{var r=n(198),o=n(5082),i=n(6670),a=Math.max,l=Math.min;e.exports=function(e,t,n){var u=null==e?0:e.length;if(!u)return-1;var c=u-1;return void 0!==n&&(c=i(n),c=n<0?a(u+c,0):l(c,u-1)),r(e,o(t,3),c,!0)}},1933:(e,t,n)=>{var r=n(3453);e.exports=function(e){return null!=e&&e.length?r(e,1):[]}},2797:(e,t,n)=>{var r=n(3092),o=n(7265),i=n(1606),a=n(5490);e.exports=function(e,t){return(a(e)?r:o)(e,i(t))}},4934:(e,t,n)=>{var r=n(9878),o=n(1606);e.exports=function(e,t){return e&&r(e,o(t))}},6063:(e,t,n)=>{var r=n(1695);e.exports=function(e,t,n){var o=null==e?void 0:r(e,t);return void 0===o?n:o}},2480:(e,t,n)=>{var r=n(4736),o=n(8175);e.exports=function(e,t){return null!=e&&o(e,t,r)}},2417:e=>{e.exports=function(e){return e}},8751:(e,t,n)=>{var r=n(3791),o=n(7279),i=Object.prototype,a=i.hasOwnProperty,l=i.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(e){return o(e)&&a.call(e,"callee")&&!l.call(e,"callee")};e.exports=u},5490:e=>{var t=Array.isArray;e.exports=t},5277:(e,t,n)=>{var r=n(1739),o=n(7607);e.exports=function(e){return null!=e&&o(e.length)&&!r(e)}},9490:(e,t,n)=>{var r=n(5277),o=n(7279);e.exports=function(e){return o(e)&&r(e)}},4455:(e,t,n)=>{var r=n(7943),o=n(7279);e.exports=function(e){return!0===e||!1===e||o(e)&&"[object Boolean]"==r(e)}},3473:(e,t,n)=>{e=n.nmd(e);var r=n(394),o=n(2248),i=t&&!t.nodeType&&t,a=i&&e&&!e.nodeType&&e,l=a&&a.exports===i?r.Buffer:void 0,u=(l?l.isBuffer:void 0)||o;e.exports=u},878:(e,t,n)=>{var r=n(2135),o=n(674),i=n(8751),a=n(5490),l=n(5277),u=n(3473),c=n(8518),s=n(7702),d=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(l(e)&&(a(e)||"string"==typeof e||"function"==typeof e.splice||u(e)||s(e)||i(e)))return!e.length;var t=o(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(c(e))return!r(e).length;for(var n in e)if(d.call(e,n))return!1;return!0}},1563:(e,t,n)=>{var r=n(9435);e.exports=function(e,t){return r(e,t)}},7683:(e,t,n)=>{var r=n(9435);e.exports=function(e,t,n){var o=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===o?r(e,t,void 0,n):!!o}},1739:(e,t,n)=>{var r=n(7943),o=n(5464);e.exports=function(e){if(!o(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},7607:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},7925:(e,t,n)=>{var r=n(6533),o=n(8456),i=n(1022),a=i&&i.isMap,l=a?o(a):r;e.exports=l},5464:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},7279:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},988:(e,t,n)=>{var r=n(7943),o=n(7732),i=n(7279),a=Function.prototype,l=Object.prototype,u=a.toString,c=l.hasOwnProperty,s=u.call(Object);e.exports=function(e){if(!i(e)||"[object Object]"!=r(e))return!1;var t=o(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==s}},339:(e,t,n)=>{var r=n(8947),o=n(8456),i=n(1022),a=i&&i.isSet,l=a?o(a):r;e.exports=l},7222:(e,t,n)=>{var r=n(7943),o=n(5490),i=n(7279);e.exports=function(e){return"string"==typeof e||!o(e)&&i(e)&&"[object String]"==r(e)}},8847:(e,t,n)=>{var r=n(7943),o=n(7279);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==r(e)}},7702:(e,t,n)=>{var r=n(6422),o=n(8456),i=n(1022),a=i&&i.isTypedArray,l=a?o(a):r;e.exports=l},121:(e,t,n)=>{var r=n(7909),o=n(1871)((function(e,t,n){r(e,n,t)}));e.exports=o},6055:(e,t,n)=>{var r=n(7034),o=n(2135),i=n(5277);e.exports=function(e){return i(e)?r(e):o(e)}},8460:(e,t,n)=>{var r=n(7034),o=n(7052),i=n(5277);e.exports=function(e){return i(e)?r(e,!0):o(e)}},4555:e=>{e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},9101:(e,t,n)=>{var r=n(1635),o=n(5082),i=n(4733),a=n(5490);e.exports=function(e,t){return(a(e)?r:i)(e,o(t,3))}},9207:(e,t,n)=>{var r=n(9150);function o(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(o.Cache||r),n}o.Cache=r,e.exports=o},2511:(e,t,n)=>{var r=n(1119),o=n(940)((function(e,t,n){r(e,t,n)}));e.exports=o},8059:e=>{e.exports=function(){}},8643:(e,t,n)=>{var r=n(394);e.exports=function(){return r.Date.now()}},2746:(e,t,n)=>{var r=n(1635),o=n(2378),i=n(4246),a=n(1514),l=n(3532),u=n(9071),c=n(6955),s=n(4174),d=c((function(e,t){var n={};if(null==e)return n;var c=!1;t=r(t,(function(t){return t=a(t,e),c||(c=t.length>1),t})),l(e,s(e),n),c&&(n=o(n,7,u));for(var d=t.length;d--;)i(n,t[d]);return n}));e.exports=d},4846:(e,t,n)=>{var r=n(926),o=n(6955)((function(e,t){return null==e?{}:r(e,t)}));e.exports=o},7619:(e,t,n)=>{var r=n(1635),o=n(5082),i=n(2563),a=n(4174);e.exports=function(e,t){if(null==e)return{};var n=r(a(e),(function(e){return[e]}));return t=o(t),i(e,n,(function(e,n){return t(e,n[0])}))}},9230:(e,t,n)=>{var r=n(1406),o=n(6012),i=n(5591),a=n(2652);e.exports=function(e){return i(e)?r(a(e)):o(e)}},5958:e=>{e.exports=function(){return[]}},2248:e=>{e.exports=function(){return!1}},5879:(e,t,n)=>{var r=n(5748),o=n(5464);e.exports=function(e,t,n){var i=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return o(n)&&(i="leading"in n?!!n.leading:i,a="trailing"in n?!!n.trailing:a),r(e,t,{leading:i,maxWait:t,trailing:a})}},2025:(e,t,n)=>{var r=n(6119),o=1/0;e.exports=function(e){return e?(e=r(e))===o||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},6670:(e,t,n)=>{var r=n(2025);e.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},6119:(e,t,n)=>{var r=n(9535),o=n(5464),i=n(8847),a=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=l.test(e);return n||u.test(e)?c(e.slice(2),n?2:8):a.test(e)?NaN:+e}},7264:(e,t,n)=>{var r=n(3532),o=n(8460);e.exports=function(e){return r(e,o(e))}},9815:(e,t,n)=>{var r=n(1991);e.exports=function(e){return null==e?"":r(e)}},6319:(e,t,n)=>{var r=n(5082),o=n(5674);e.exports=function(e,t){return e&&e.length?o(e,r(t,2)):[]}},9153:(e,t,n)=>{var r=n(8738)("toUpperCase");e.exports=r},862:(e,t,n)=>{var r=n(406),o=n(2745),i=n(9815),a=n(8182);e.exports=function(e,t,n){return e=i(e),void 0===(t=n?void 0:t)?o(e)?a(e):r(e):e.match(t)||[]}},8787:e=>{var t=1e3,n=60*t,r=60*n,o=24*r,i=7*o;function a(e,t,n,r){var o=t>=1.5*n;return Math.round(e/n)+" "+r+(o?"s":"")}e.exports=function(e,l){l=l||{};var u,c,s=typeof e;if("string"===s&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(a){var l=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*l;case"weeks":case"week":case"w":return l*i;case"days":case"day":case"d":return l*o;case"hours":case"hour":case"hrs":case"hr":case"h":return l*r;case"minutes":case"minute":case"mins":case"min":case"m":return l*n;case"seconds":case"second":case"secs":case"sec":case"s":return l*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}}}(e);if("number"===s&&isFinite(e))return l.long?(u=e,(c=Math.abs(u))>=o?a(u,c,o,"day"):c>=r?a(u,c,r,"hour"):c>=n?a(u,c,n,"minute"):c>=t?a(u,c,t,"second"):u+" ms"):function(e){var i=Math.abs(e);return i>=o?Math.round(e/o)+"d":i>=r?Math.round(e/r)+"h":i>=n?Math.round(e/n)+"m":i>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},4697:(e,t,n)=>{"use strict";var r=n(9634);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,a){if(a!==r){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},3813:(e,t,n)=>{e.exports=n(4697)()},9634:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},5087:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>P});var r=n(3082),o=n(4632),i=n(8599),a=n(3075),l=n(9239),u=n(8636),c=n(7323),s=n(4883),d=n(6001),f=n(7373),h=n(7211),p=n(5399),v=n.n(p),m=n(2008),g=n(1145),b=n(4382),y={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend"},w=Object.keys(y).filter((function(e){if("undefined"==typeof document)return!1;var t=document.getElementsByTagName("html")[0];return e in(t?t.style:{})}))[0],A=y[w];function k(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on".concat(t),n)}function _(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r):e.attachEvent&&e.detachEvent("on".concat(t),n)}var C=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},N=!("undefined"!=typeof window&&window.document&&window.document.createElement),O=function e(t,n,r,o){if(!n||n===document||n instanceof Document)return!1;if(n===t.parentNode)return!0;var i=Math.max(Math.abs(r),Math.abs(o))===Math.abs(o),a=Math.max(Math.abs(r),Math.abs(o))===Math.abs(r),l=n.scrollHeight-n.clientHeight,u=n.scrollWidth-n.clientWidth,c=document.defaultView.getComputedStyle(n),s="auto"===c.overflowY||"scroll"===c.overflowY,d="auto"===c.overflowX||"scroll"===c.overflowX,f=l&&s,h=u&&d;return!!(i&&(!f||f&&(n.scrollTop>=l&&o<0||n.scrollTop<=0&&o>0))||a&&(!h||h&&(n.scrollLeft>=u&&r<0||n.scrollLeft<=0&&r>0)))&&e(t,n.parentNode,r,o)},x={};const E=function(e){(0,l.A)(n,e);var t=(0,u.A)(n);function n(e){var r;return(0,i.A)(this,n),(r=t.call(this,e)).domFocus=function(){r.dom&&r.dom.focus()},r.removeStartHandler=function(e){e.touches.length>1||(r.startPos={x:e.touches[0].clientX,y:e.touches[0].clientY})},r.removeMoveHandler=function(e){if(!(e.changedTouches.length>1)){var t=e.currentTarget,n=e.changedTouches[0].clientX-r.startPos.x,o=e.changedTouches[0].clientY-r.startPos.y;(t===r.maskDom||t===r.handlerDom||t===r.contentDom&&O(t,e.target,n,o))&&e.cancelable&&e.preventDefault()}},r.transitionEnd=function(e){var t=e.target;_(t,A,r.transitionEnd),t.style.transition=""},r.onKeyDown=function(e){if(e.keyCode===g.A.ESC){var t=r.props.onClose;e.stopPropagation(),t&&t(e)}},r.onWrapperTransitionEnd=function(e){var t=r.props,n=t.open,o=t.afterVisibleChange;e.target===r.contentWrapper&&e.propertyName.match(/transform$/)&&(r.dom.style.transition="",!n&&r.getCurrentDrawerSome()&&(document.body.style.overflowX="",r.maskDom&&(r.maskDom.style.left="",r.maskDom.style.width="")),o&&o(!!n))},r.openLevelTransition=function(){var e=r.props,t=e.open,n=e.width,o=e.height,i=r.getHorizontalBoolAndPlacementName(),a=i.isHorizontal,l=i.placementName,u=r.contentDom?r.contentDom.getBoundingClientRect()[a?"width":"height"]:0,c=(a?n:o)||u;r.setLevelAndScrolling(t,l,c)},r.setLevelTransform=function(e,t,n,o){var i=r.props,a=i.placement,l=i.levelMove,u=i.duration,c=i.ease,s=i.showMask;r.levelDom.forEach((function(i){i.style.transition="transform ".concat(u," ").concat(c),k(i,A,r.transitionEnd);var d,f,h=e?n:0;if(l){var p=(f="function"==typeof(d=l)?d({target:i,open:e}):d,Array.isArray(f)?2===f.length?f:[f[0],f[1]]:[f]);h=e?p[0]:p[1]||0}var v="number"==typeof h?"".concat(h,"px"):h,m="left"===a||"top"===a?v:"-".concat(v);m=s&&"right"===a&&o?"calc(".concat(m," + ").concat(o,"px)"):m,i.style.transform=h?"".concat(t,"(").concat(m,")"):""}))},r.setLevelAndScrolling=function(e,t,n){var o=r.props.onChange;if(!N){var i=document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth?(0,m.A)(!0):0;r.setLevelTransform(e,t,n,i),r.toggleScrollingToDrawerAndBody(i)}o&&o(e)},r.toggleScrollingToDrawerAndBody=function(e){var t=r.props,n=t.getContainer,o=t.showMask,i=t.open,a=n&&n();if(a&&a.parentNode===document.body&&o){var l=["touchstart"],u=[document.body,r.maskDom,r.handlerDom,r.contentDom];i&&"hidden"!==document.body.style.overflow?(e&&r.addScrollingEffect(e),document.body.style.touchAction="none",u.forEach((function(e,t){e&&k(e,l[t]||"touchmove",t?r.removeMoveHandler:r.removeStartHandler,r.passive)}))):r.getCurrentDrawerSome()&&(document.body.style.touchAction="",e&&r.remScrollingEffect(e),u.forEach((function(e,t){e&&_(e,l[t]||"touchmove",t?r.removeMoveHandler:r.removeStartHandler,r.passive)})))}},r.addScrollingEffect=function(e){var t=r.props,n=t.placement,o=t.duration,i=t.ease,a="width ".concat(o," ").concat(i),l="transform ".concat(o," ").concat(i);switch(r.dom.style.transition="none",n){case"right":r.dom.style.transform="translateX(-".concat(e,"px)");break;case"top":case"bottom":r.dom.style.width="calc(100% - ".concat(e,"px)"),r.dom.style.transform="translateZ(0)"}clearTimeout(r.timeout),r.timeout=setTimeout((function(){r.dom&&(r.dom.style.transition="".concat(l,",").concat(a),r.dom.style.width="",r.dom.style.transform="")}))},r.remScrollingEffect=function(e){var t,n=r.props,o=n.placement,i=n.duration,a=n.ease;w&&(document.body.style.overflowX="hidden"),r.dom.style.transition="none";var l="width ".concat(i," ").concat(a),u="transform ".concat(i," ").concat(a);switch(o){case"left":r.dom.style.width="100%",l="width 0s ".concat(a," ").concat(i);break;case"right":r.dom.style.transform="translateX(".concat(e,"px)"),r.dom.style.width="100%",l="width 0s ".concat(a," ").concat(i),r.maskDom&&(r.maskDom.style.left="-".concat(e,"px"),r.maskDom.style.width="calc(100% + ".concat(e,"px)"));break;case"top":case"bottom":r.dom.style.width="calc(100% + ".concat(e,"px)"),r.dom.style.height="100%",r.dom.style.transform="translateZ(0)",t="height 0s ".concat(a," ").concat(i)}clearTimeout(r.timeout),r.timeout=setTimeout((function(){r.dom&&(r.dom.style.transition="".concat(u,",").concat(t?"".concat(t,","):"").concat(l),r.dom.style.transform="",r.dom.style.width="",r.dom.style.height="")}))},r.getCurrentDrawerSome=function(){return!Object.keys(x).some((function(e){return x[e]}))},r.getLevelDom=function(e){var t=e.level,n=e.getContainer;if(!N){var o,i=n&&n(),a=i?i.parentNode:null;r.levelDom=[],"all"===t?(a?Array.prototype.slice.call(a.children):[]).forEach((function(e){"SCRIPT"!==e.nodeName&&"STYLE"!==e.nodeName&&"LINK"!==e.nodeName&&e!==i&&r.levelDom.push(e)})):t&&(o=t,Array.isArray(o)?o:[o]).forEach((function(e){document.querySelectorAll(e).forEach((function(e){r.levelDom.push(e)}))}))}},r.getHorizontalBoolAndPlacementName=function(){var e=r.props.placement,t="left"===e||"right"===e;return{isHorizontal:t,placementName:"translate".concat(t?"X":"Y")}},r.state={_self:(0,h.A)(r)},r}return(0,a.A)(n,[{key:"componentDidMount",value:function(){var e=this;if(!N){var t=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){return t=!0,null}}))}catch(e){}this.passive=!!t&&{passive:!1}}var n,r=this.props,o=r.open,i=r.getContainer,a=r.showMask,l=i&&i();this.drawerId="drawer_id_".concat(Number((Date.now()+Math.random()).toString().replace(".",Math.round(9*Math.random()).toString())).toString(16)),this.getLevelDom(this.props),o&&(l&&l.parentNode===document.body&&(x[this.drawerId]=o),this.openLevelTransition(),this.forceUpdate((function(){e.domFocus()})),a&&(null===(n=this.props.scrollLocker)||void 0===n||n.lock()))}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.open,r=t.getContainer,o=t.scrollLocker,i=t.showMask,a=r&&r();n!==e.open&&(a&&a.parentNode===document.body&&(x[this.drawerId]=!!n),this.openLevelTransition(),n?(this.domFocus(),i&&(null==o||o.lock())):null==o||o.unLock())}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.open,n=e.scrollLocker;delete x[this.drawerId],t&&(this.setLevelTransform(!1),document.body.style.touchAction=""),null==n||n.unLock()}},{key:"render",value:function(){var e,t=this,n=this.props,i=n.className,a=n.children,l=n.style,u=n.width,c=n.height,h=(n.defaultOpen,n.open),p=n.prefixCls,m=n.placement,g=(n.level,n.levelMove,n.ease,n.duration,n.getContainer,n.handler),y=(n.onChange,n.afterVisibleChange,n.showMask),w=n.maskClosable,A=n.maskStyle,k=n.onClose,_=n.onHandleClick,N=n.keyboard,O=(n.getOpenCount,n.scrollLocker,n.contentWrapperStyle),x=(0,o.A)(n,["className","children","style","width","height","defaultOpen","open","prefixCls","placement","level","levelMove","ease","duration","getContainer","handler","onChange","afterVisibleChange","showMask","maskClosable","maskStyle","onClose","onHandleClick","keyboard","getOpenCount","scrollLocker","contentWrapperStyle"]),E=!!this.dom&&h,D=v()(p,(e={},(0,f.A)(e,"".concat(p,"-").concat(m),!0),(0,f.A)(e,"".concat(p,"-open"),E),(0,f.A)(e,i||"",!!i),(0,f.A)(e,"no-mask",!y),e)),P=this.getHorizontalBoolAndPlacementName().placementName,R="left"===m||"top"===m?"-100%":"100%",S=E?"":"".concat(P,"(").concat(R,")"),T=g&&s.cloneElement(g,{onClick:function(e){g.props.onClick&&g.props.onClick(),_&&_(e)},ref:function(e){t.handlerDom=e}});return s.createElement("div",(0,r.A)({},(0,b.A)(x,["switchScrollingEffect"]),{tabIndex:-1,className:D,style:l,ref:function(e){t.dom=e},onKeyDown:E&&N?this.onKeyDown:void 0,onTransitionEnd:this.onWrapperTransitionEnd}),y&&s.createElement("div",{className:"".concat(p,"-mask"),onClick:w?k:void 0,style:A,ref:function(e){t.maskDom=e}}),s.createElement("div",{className:"".concat(p,"-content-wrapper"),style:(0,d.A)({transform:S,msTransform:S,width:C(u)?"".concat(u,"px"):u,height:C(c)?"".concat(c,"px"):c},O),ref:function(e){t.contentWrapper=e}},s.createElement("div",{className:"".concat(p,"-content"),ref:function(e){t.contentDom=e},onTouchStart:E&&y?this.removeStartHandler:void 0,onTouchMove:E&&y?this.removeMoveHandler:void 0},a),T))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.prevProps,r=t._self,o={prevProps:e};if(void 0!==n){var i=e.placement,a=e.level;i!==n.placement&&(r.contentDom=null),a!==n.level&&r.getLevelDom(e)}return o}}]),n}(s.Component);var D=function(e){(0,l.A)(n,e);var t=(0,u.A)(n);function n(e){var r;(0,i.A)(this,n),(r=t.call(this,e)).onHandleClick=function(e){var t=r.props,n=t.onHandleClick,o=t.open;if(n&&n(e),void 0===o){var i=r.state.open;r.setState({open:!i})}},r.onClose=function(e){var t=r.props,n=t.onClose,o=t.open;n&&n(e),void 0===o&&r.setState({open:!1})};var o=void 0!==e.open?e.open:!!e.defaultOpen;return r.state={open:o},"onMaskClick"in e&&console.warn("`onMaskClick` are removed, please use `onClose` instead."),r}return(0,a.A)(n,[{key:"render",value:function(){var e=this,t=this.props,n=(t.defaultOpen,t.getContainer),i=t.wrapperClassName,a=t.forceRender,l=t.handler,u=(0,o.A)(t,["defaultOpen","getContainer","wrapperClassName","forceRender","handler"]),d=this.state.open;if(!n)return s.createElement("div",{className:i,ref:function(t){e.dom=t}},s.createElement(E,(0,r.A)({},u,{open:d,handler:l,getContainer:function(){return e.dom},onClose:this.onClose,onHandleClick:this.onHandleClick})));var f=!!l||a;return s.createElement(c.A,{visible:d,forceRender:f,getContainer:n,wrapperClassName:i},(function(t){var n=t.visible,i=t.afterClose,a=(0,o.A)(t,["visible","afterClose"]);return s.createElement(E,(0,r.A)({},u,a,{open:void 0!==n?n:d,afterVisibleChange:void 0!==i?i:u.afterVisibleChange,handler:l,onClose:e.onClose,onHandleClick:e.onHandleClick}))}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.prevProps,r={prevProps:e};return void 0!==n&&e.open!==n.open&&(r.open=e.open),r}}]),n}(s.Component);D.defaultProps={prefixCls:"drawer",placement:"left",getContainer:"body",defaultOpen:!1,level:"all",duration:".3s",ease:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",onChange:function(){},afterVisibleChange:function(){},handler:s.createElement("div",{className:"drawer-handle"},s.createElement("i",{className:"drawer-handle-icon"})),showMask:!0,maskClosable:!0,maskStyle:{},wrapperClassName:"",className:"",keyboard:!0,forceRender:!1};const P=D},8498:(e,t,n)=>{"use strict";n.d(t,{A:()=>l,c:()=>i});var r=n(4883),o=n(8227),i="RC_FORM_INTERNAL_HOOKS",a=function(){(0,o.Ay)(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")};const l=r.createContext({getFieldValue:a,getFieldsValue:a,getFieldError:a,getFieldsError:a,isFieldsTouched:a,isFieldTouched:a,isFieldValidating:a,isFieldsValidating:a,resetFields:a,setFields:a,setFieldsValue:a,validateFields:a,submit:a,getInternalHooks:function(){return a(),{dispatch:a,initEntityValue:a,registerField:a,useSubscribe:a,setInitialValues:a,setCallbacks:a,getFields:a,setValidateMessages:a,setPreserve:a}}})},3386:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Field:()=>me,FormProvider:()=>Ne,List:()=>ge,default:()=>De,useForm:()=>_e});var r=n(4883),o=n(3082),i=n(4632),a=n(7373),l=n(6001),u=n(4522),c=n(8599),s=n(3075),d=n(7211),f=n(9239),h=n(8636),p=n(5861),v=n(8227),m=n(8498);function g(e){return null==e?[]:Array.isArray(e)?e:[e]}var b=n(6450),y=n.n(b),w=n(957),A=n(7786);function k(){return k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k.apply(this,arguments)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function C(e,t){return C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},C(e,t)}function N(e,t,n){return N=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&C(o,n.prototype),o},N.apply(null,arguments)}function O(e){var t="function"==typeof Map?new Map:void 0;return O=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return N(e,arguments,_(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),C(r,e)},O(e)}var x=/%[sdj%]/g;function E(e){if(!e||!e.length)return null;var t={};return e.forEach((function(e){var n=e.field;t[n]=t[n]||[],t[n].push(e)})),t}function D(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=1,o=t[0],i=t.length;return"function"==typeof o?o.apply(null,t.slice(1)):"string"==typeof o?String(o).replace(x,(function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(t[r++]);case"%d":return Number(t[r++]);case"%j":try{return JSON.stringify(t[r++])}catch(e){return"[Circular]"}break;default:return e}})):o}function P(e,t){return null==e||!("array"!==t||!Array.isArray(e)||e.length)||!(!function(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"date"===e||"pattern"===e}(t)||"string"!=typeof e||e)}function R(e,t,n){var r=0,o=e.length;!function i(a){if(a&&a.length)n(a);else{var l=r;r+=1,l<o?t(e[l],i):n([])}}([])}"undefined"!=typeof process&&process.env;var S=function(e){var t,n;function r(t,n){var r;return(r=e.call(this,"Async Validation Error")||this).errors=t,r.fields=n,r}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,C(t,n),r}(O(Error));function T(e){return function(t){return t&&t.message?(t.field=t.field||e.fullField,t):{message:"function"==typeof t?t():t,field:t.field||e.fullField}}}function j(e,t){if(t)for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];"object"==typeof r&&"object"==typeof e[n]?e[n]=k({},e[n],r):e[n]=r}return e}function I(e,t,n,r,o,i){!e.required||n.hasOwnProperty(e.field)&&!P(t,i||e.type)||r.push(D(o.messages.required,e.fullField))}var B={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},M={integer:function(e){return M.number(e)&&parseInt(e,10)===e},float:function(e){return M.number(e)&&!M.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(e){return!1}},date:function(e){return"function"==typeof e.getTime&&"function"==typeof e.getMonth&&"function"==typeof e.getYear&&!isNaN(e.getTime())},number:function(e){return!isNaN(e)&&"number"==typeof e},object:function(e){return"object"==typeof e&&!M.array(e)},method:function(e){return"function"==typeof e},email:function(e){return"string"==typeof e&&!!e.match(B.email)&&e.length<255},url:function(e){return"string"==typeof e&&!!e.match(B.url)},hex:function(e){return"string"==typeof e&&!!e.match(B.hex)}},F="enum",L={required:I,whitespace:function(e,t,n,r,o){(/^\s+$/.test(t)||""===t)&&r.push(D(o.messages.whitespace,e.fullField))},type:function(e,t,n,r,o){if(e.required&&void 0===t)I(e,t,n,r,o);else{var i=e.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(i)>-1?M[i](t)||r.push(D(o.messages.types[i],e.fullField,e.type)):i&&typeof t!==e.type&&r.push(D(o.messages.types[i],e.fullField,e.type))}},range:function(e,t,n,r,o){var i="number"==typeof e.len,a="number"==typeof e.min,l="number"==typeof e.max,u=t,c=null,s="number"==typeof t,d="string"==typeof t,f=Array.isArray(t);if(s?c="number":d?c="string":f&&(c="array"),!c)return!1;f&&(u=t.length),d&&(u=t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),i?u!==e.len&&r.push(D(o.messages[c].len,e.fullField,e.len)):a&&!l&&u<e.min?r.push(D(o.messages[c].min,e.fullField,e.min)):l&&!a&&u>e.max?r.push(D(o.messages[c].max,e.fullField,e.max)):a&&l&&(u<e.min||u>e.max)&&r.push(D(o.messages[c].range,e.fullField,e.min,e.max))},enum:function(e,t,n,r,o){e[F]=Array.isArray(e[F])?e[F]:[],-1===e[F].indexOf(t)&&r.push(D(o.messages[F],e.fullField,e[F].join(", ")))},pattern:function(e,t,n,r,o){e.pattern&&(e.pattern instanceof RegExp?(e.pattern.lastIndex=0,e.pattern.test(t)||r.push(D(o.messages.pattern.mismatch,e.fullField,t,e.pattern))):"string"==typeof e.pattern&&(new RegExp(e.pattern).test(t)||r.push(D(o.messages.pattern.mismatch,e.fullField,t,e.pattern))))}};function U(e,t,n,r,o){var i=e.type,a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(P(t,i)&&!e.required)return n();L.required(e,t,r,a,o,i),P(t,i)||L.type(e,t,r,a,o)}n(a)}var V={string:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(P(t,"string")&&!e.required)return n();L.required(e,t,r,i,o,"string"),P(t,"string")||(L.type(e,t,r,i,o),L.range(e,t,r,i,o),L.pattern(e,t,r,i,o),!0===e.whitespace&&L.whitespace(e,t,r,i,o))}n(i)},method:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(P(t)&&!e.required)return n();L.required(e,t,r,i,o),void 0!==t&&L.type(e,t,r,i,o)}n(i)},number:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(""===t&&(t=void 0),P(t)&&!e.required)return n();L.required(e,t,r,i,o),void 0!==t&&(L.type(e,t,r,i,o),L.range(e,t,r,i,o))}n(i)},boolean:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(P(t)&&!e.required)return n();L.required(e,t,r,i,o),void 0!==t&&L.type(e,t,r,i,o)}n(i)},regexp:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(P(t)&&!e.required)return n();L.required(e,t,r,i,o),P(t)||L.type(e,t,r,i,o)}n(i)},integer:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(P(t)&&!e.required)return n();L.required(e,t,r,i,o),void 0!==t&&(L.type(e,t,r,i,o),L.range(e,t,r,i,o))}n(i)},float:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(P(t)&&!e.required)return n();L.required(e,t,r,i,o),void 0!==t&&(L.type(e,t,r,i,o),L.range(e,t,r,i,o))}n(i)},array:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(null==t&&!e.required)return n();L.required(e,t,r,i,o,"array"),null!=t&&(L.type(e,t,r,i,o),L.range(e,t,r,i,o))}n(i)},object:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(P(t)&&!e.required)return n();L.required(e,t,r,i,o),void 0!==t&&L.type(e,t,r,i,o)}n(i)},enum:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(P(t)&&!e.required)return n();L.required(e,t,r,i,o),void 0!==t&&L.enum(e,t,r,i,o)}n(i)},pattern:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(P(t,"string")&&!e.required)return n();L.required(e,t,r,i,o),P(t,"string")||L.pattern(e,t,r,i,o)}n(i)},date:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(P(t,"date")&&!e.required)return n();var a;L.required(e,t,r,i,o),P(t,"date")||(a=t instanceof Date?t:new Date(t),L.type(e,a,r,i,o),a&&L.range(e,a.getTime(),r,i,o))}n(i)},url:U,hex:U,email:U,required:function(e,t,n,r,o){var i=[],a=Array.isArray(t)?"array":typeof t;L.required(e,t,r,i,o,a),n(i)},any:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(P(t)&&!e.required)return n();L.required(e,t,r,i,o)}n(i)}};function H(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var z=H();function W(e){this.rules=null,this._messages=z,this.define(e)}W.prototype={messages:function(e){return e&&(this._messages=j(H(),e)),this._messages},define:function(e){if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!=typeof e||Array.isArray(e))throw new Error("Rules must be an object");var t,n;for(t in this.rules={},e)e.hasOwnProperty(t)&&(n=e[t],this.rules[t]=Array.isArray(n)?n:[n])},validate:function(e,t,n){var r=this;void 0===t&&(t={}),void 0===n&&(n=function(){});var o,i,a=e,l=t,u=n;if("function"==typeof l&&(u=l,l={}),!this.rules||0===Object.keys(this.rules).length)return u&&u(),Promise.resolve();if(l.messages){var c=this.messages();c===z&&(c=H()),j(c,l.messages),l.messages=c}else l.messages=this.messages();var s={};(l.keys||Object.keys(this.rules)).forEach((function(t){o=r.rules[t],i=a[t],o.forEach((function(n){var o=n;"function"==typeof o.transform&&(a===e&&(a=k({},a)),i=a[t]=o.transform(i)),(o="function"==typeof o?{validator:o}:k({},o)).validator=r.getValidationMethod(o),o.field=t,o.fullField=o.fullField||t,o.type=r.getType(o),o.validator&&(s[t]=s[t]||[],s[t].push({rule:o,value:i,source:a,field:t}))}))}));var d={};return function(e,t,n,r){if(t.first){var o=new Promise((function(t,o){var i=function(e){var t=[];return Object.keys(e).forEach((function(n){t.push.apply(t,e[n])})),t}(e);R(i,n,(function(e){return r(e),e.length?o(new S(e,E(e))):t()}))}));return o.catch((function(e){return e})),o}var i=t.firstFields||[];!0===i&&(i=Object.keys(e));var a=Object.keys(e),l=a.length,u=0,c=[],s=new Promise((function(t,o){var s=function(e){if(c.push.apply(c,e),++u===l)return r(c),c.length?o(new S(c,E(c))):t()};a.length||(r(c),t()),a.forEach((function(t){var r=e[t];-1!==i.indexOf(t)?R(r,n,s):function(e,t,n){var r=[],o=0,i=e.length;function a(e){r.push.apply(r,e),++o===i&&n(r)}e.forEach((function(e){t(e,a)}))}(r,n,s)}))}));return s.catch((function(e){return e})),s}(s,l,(function(e,t){var n,r=e.rule,o=!("object"!==r.type&&"array"!==r.type||"object"!=typeof r.fields&&"object"!=typeof r.defaultField);function i(e,t){return k({},t,{fullField:r.fullField+"."+e})}function a(n){void 0===n&&(n=[]);var a=n;if(Array.isArray(a)||(a=[a]),!l.suppressWarning&&a.length&&W.warning("async-validator:",a),a.length&&void 0!==r.message&&(a=[].concat(r.message)),a=a.map(T(r)),l.first&&a.length)return d[r.field]=1,t(a);if(o){if(r.required&&!e.value)return void 0!==r.message?a=[].concat(r.message).map(T(r)):l.error&&(a=[l.error(r,D(l.messages.required,r.field))]),t(a);var u={};if(r.defaultField)for(var c in e.value)e.value.hasOwnProperty(c)&&(u[c]=r.defaultField);for(var s in u=k({},u,e.rule.fields))if(u.hasOwnProperty(s)){var f=Array.isArray(u[s])?u[s]:[u[s]];u[s]=f.map(i.bind(null,s))}var h=new W(u);h.messages(l.messages),e.rule.options&&(e.rule.options.messages=l.messages,e.rule.options.error=l.error),h.validate(e.value,e.rule.options||l,(function(e){var n=[];a&&a.length&&n.push.apply(n,a),e&&e.length&&n.push.apply(n,e),t(n.length?n:null)}))}else t(a)}o=o&&(r.required||!r.required&&e.value),r.field=e.field,r.asyncValidator?n=r.asyncValidator(r,e.value,a,e.source,l):r.validator&&(!0===(n=r.validator(r,e.value,a,e.source,l))?a():!1===n?a(r.message||r.field+" fails"):n instanceof Array?a(n):n instanceof Error&&a(n.message)),n&&n.then&&n.then((function(){return a()}),(function(e){return a(e)}))}),(function(e){!function(e){var t,n,r,o=[],i={};for(t=0;t<e.length;t++)n=e[t],r=void 0,Array.isArray(n)?o=(r=o).concat.apply(r,n):o.push(n);o.length?i=E(o):(o=null,i=null),u(o,i)}(e)}))},getType:function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!=typeof e.validator&&e.type&&!V.hasOwnProperty(e.type))throw new Error(D("Unknown rule type %s",e.type));return e.type||"string"},getValidationMethod:function(e){if("function"==typeof e.validator)return e.validator;var t=Object.keys(e),n=t.indexOf("message");return-1!==n&&t.splice(n,1),1===t.length&&"required"===t[0]?V.required:V[this.getType(e)]||!1}},W.register=function(e,t){if("function"!=typeof t)throw new Error("Cannot register a validator by type, validator is not a function");V[e]=t},W.warning=function(){},W.messages=z,W.validators=V;const q=W;var $=n(4045),K=n(9225);function Y(e){return g(e)}function G(e,t){return(0,$.A)(e,t)}function J(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,K.A)(e,t,n,r)}function X(e,t){var n={};return t.forEach((function(t){var r=G(e,t);n=J(n,t,r)})),n}function Q(e,t){return e&&e.some((function(e){return ne(e,t)}))}function Z(e){return"object"===(0,A.A)(e)&&null!==e&&Object.getPrototypeOf(e)===Object.prototype}function ee(e,t){var n=Array.isArray(e)?(0,u.A)(e):(0,l.A)({},e);return t?(Object.keys(t).forEach((function(e){var r=n[e],o=t[e],i=Z(r)&&Z(o);n[e]=i?ee(r,o||{}):o})),n):n}function te(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(e,t){return ee(e,t)}),e)}function ne(e,t){return!(!e||!t||e.length!==t.length)&&e.every((function(e,n){return t[n]===e}))}function re(e){var t=arguments.length<=1?void 0:arguments[1];return t&&t.target&&e in t.target?t.target[e]:t}function oe(e,t,n){var r=e.length;if(t<0||t>=r||n<0||n>=r)return e;var o=e[t],i=t-n;return i>0?[].concat((0,u.A)(e.slice(0,n)),[o],(0,u.A)(e.slice(n,t)),(0,u.A)(e.slice(t+1,r))):i<0?[].concat((0,u.A)(e.slice(0,t)),(0,u.A)(e.slice(t+1,n+1)),[o],(0,u.A)(e.slice(n+1,r))):e}var ie="'${name}' is not a valid ${type}",ae={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:ie,method:ie,array:ie,object:ie,number:ie,date:ie,boolean:ie,integer:ie,float:ie,regexp:ie,email:ie,url:ie,hex:ie},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},le=q;function ue(e,t,n,r){var o=(0,l.A)((0,l.A)({},n),{},{name:t,enum:(n.enum||[]).join(", ")});return function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).forEach((function(i){var a,u,c=t[i];"string"==typeof c?n[i]=(a=c,u=r,function(){return function(e,t){return e.replace(/\$\{\w+\}/g,(function(e){var n=e.slice(2,-1);return t[n]}))}(a,(0,l.A)((0,l.A)({},o),u))}):c&&"object"===(0,A.A)(c)?(n[i]={},e(c,n[i])):n[i]=c})),n}(te({},ae,e))}function ce(e,t,n,r,o){return se.apply(this,arguments)}function se(){return se=(0,w.A)(y().mark((function e(t,n,o,i,c){var s,d,f,h,p,v;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=(0,l.A)({},o),d=null,s&&"array"===s.type&&s.defaultField&&(d=s.defaultField,delete s.defaultField),f=new le((0,a.A)({},t,[s])),h=ue(i.validateMessages,t,s,c),f.messages(h),p=[],e.prev=7,e.next=10,Promise.resolve(f.validate((0,a.A)({},t,n),(0,l.A)({},i)));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),e.t0.errors?p=e.t0.errors.map((function(e,t){var n=e.message;return r.isValidElement(n)?r.cloneElement(n,{key:"error_".concat(t)}):n})):(console.error(e.t0),p=[h.default()]);case 15:if(p.length||!d){e.next=20;break}return e.next=18,Promise.all(n.map((function(e,n){return ce("".concat(t,".").concat(n),e,d,i,c)})));case 18:return v=e.sent,e.abrupt("return",v.reduce((function(e,t){return[].concat((0,u.A)(e),(0,u.A)(t))}),[]));case 20:return e.abrupt("return",p);case 21:case"end":return e.stop()}}),e,null,[[7,12]])}))),se.apply(this,arguments)}function de(e,t,n,r,o,i){var a,u=e.join("."),c=n.map((function(e){var t=e.validator;return t?(0,l.A)((0,l.A)({},e),{},{validator:function(e,n,r){var o=!1,i=t(e,n,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Promise.resolve().then((function(){(0,v.Ay)(!o,"Your validator function has already return a promise. `callback` will be ignored."),o||r.apply(void 0,t)}))}));o=i&&"function"==typeof i.then&&"function"==typeof i.catch,(0,v.Ay)(o,"`callback` is deprecated. Please return a promise instead."),o&&i.then((function(){r()})).catch((function(e){r(e||" ")}))}}):e}));if(!0===o)a=new Promise(function(){var e=(0,w.A)(y().mark((function e(n,o){var a,l;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=0;case 1:if(!(a<c.length)){e.next=11;break}return e.next=4,ce(u,t,c[a],r,i);case 4:if(!(l=e.sent).length){e.next=8;break}return o(l),e.abrupt("return");case 8:a+=1,e.next=1;break;case 11:n([]);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());else{var s=c.map((function(e){return ce(u,t,e,r,i)}));a=(o?function(e){return he.apply(this,arguments)}(s):function(e){return fe.apply(this,arguments)}(s)).then((function(e){return e.length?Promise.reject(e):[]}))}return a.catch((function(e){return e})),a}function fe(){return(fe=(0,w.A)(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t).then((function(e){var t;return(t=[]).concat.apply(t,(0,u.A)(e))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(){return(he=(0,w.A)(y().mark((function e(t){var n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=0,e.abrupt("return",new Promise((function(e){t.forEach((function(r){r.then((function(r){r.length&&e(r),(n+=1)===t.length&&e([])}))}))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(e,t,n,r,o,i){return"function"==typeof e?e(t,n,"source"in i?{source:i.source}:{}):r!==o}var ve=function(e){(0,f.A)(n,e);var t=(0,h.A)(n);function n(e){var o;return(0,c.A)(this,n),(o=t.call(this,e)).state={resetCount:0},o.cancelRegisterFunc=null,o.mounted=!1,o.touched=!1,o.dirty=!1,o.validatePromise=null,o.errors=[],o.cancelRegister=function(){var e=o.props,t=e.preserve,n=e.isListField,r=e.name;o.cancelRegisterFunc&&o.cancelRegisterFunc(n,t,Y(r)),o.cancelRegisterFunc=null},o.getNamePath=function(){var e=o.props,t=e.name,n=e.fieldContext.prefixName,r=void 0===n?[]:n;return void 0!==t?[].concat((0,u.A)(r),(0,u.A)(t)):[]},o.getRules=function(){var e=o.props,t=e.rules,n=void 0===t?[]:t,r=e.fieldContext;return n.map((function(e){return"function"==typeof e?e(r):e}))},o.refresh=function(){o.mounted&&o.setState((function(e){return{resetCount:e.resetCount+1}}))},o.onStoreChange=function(e,t,n){var r=o.props,i=r.shouldUpdate,a=r.dependencies,l=void 0===a?[]:a,u=r.onReset,c=n.store,s=o.getNamePath(),d=o.getValue(e),f=o.getValue(c),h=t&&Q(t,s);switch("valueUpdate"===n.type&&"external"===n.source&&d!==f&&(o.touched=!0,o.dirty=!0,o.validatePromise=null,o.errors=[]),n.type){case"reset":if(!t||h)return o.touched=!1,o.dirty=!1,o.validatePromise=null,o.errors=[],u&&u(),void o.refresh();break;case"setField":if(h){var p=n.data;return"touched"in p&&(o.touched=p.touched),"validating"in p&&!("originRCField"in p)&&(o.validatePromise=p.validating?Promise.resolve([]):null),"errors"in p&&(o.errors=p.errors||[]),o.dirty=!0,void o.reRender()}if(i&&!s.length&&pe(i,e,c,d,f,n))return void o.reRender();break;case"dependenciesUpdate":if(l.map(Y).some((function(e){return Q(n.relatedFields,e)})))return void o.reRender();break;default:if(h||(!l.length||s.length||i)&&pe(i,e,c,d,f,n))return void o.reRender()}!0===i&&o.reRender()},o.validateRules=function(e){var t=o.getNamePath(),n=o.getValue(),r=Promise.resolve().then((function(){if(!o.mounted)return[];var i=o.props,a=i.validateFirst,l=void 0!==a&&a,u=i.messageVariables,c=(e||{}).triggerName,s=o.getRules();c&&(s=s.filter((function(e){var t=e.validateTrigger;return!t||g(t).includes(c)})));var d=de(t,n,s,e,l,u);return d.catch((function(e){return e})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];o.validatePromise===r&&(o.validatePromise=null,o.errors=e,o.reRender())})),d}));return o.validatePromise=r,o.dirty=!0,o.errors=[],o.reRender(),r},o.isFieldValidating=function(){return!!o.validatePromise},o.isFieldTouched=function(){return o.touched},o.isFieldDirty=function(){return o.dirty},o.getErrors=function(){return o.errors},o.isListField=function(){return o.props.isListField},o.isList=function(){return o.props.isList},o.isPreserve=function(){return o.props.preserve},o.getMeta=function(){return o.prevValidating=o.isFieldValidating(),{touched:o.isFieldTouched(),validating:o.prevValidating,errors:o.errors,name:o.getNamePath()}},o.getOnlyChild=function(e){if("function"==typeof e){var t=o.getMeta();return(0,l.A)((0,l.A)({},o.getOnlyChild(e(o.getControlled(),t,o.props.fieldContext))),{},{isFunction:!0})}var n=(0,p.A)(e);return 1===n.length&&r.isValidElement(n[0])?{child:n[0],isFunction:!1}:{child:n,isFunction:!1}},o.getValue=function(e){var t=o.props.fieldContext.getFieldsValue,n=o.getNamePath();return G(e||t(!0),n)},o.getControlled=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=o.props,n=t.trigger,r=t.validateTrigger,i=t.getValueFromEvent,u=t.normalize,c=t.valuePropName,s=t.getValueProps,d=t.fieldContext,f=void 0!==r?r:d.validateTrigger,h=o.getNamePath(),p=d.getInternalHooks,v=d.getFieldsValue,b=p(m.c).dispatch,y=o.getValue(),w=s||function(e){return(0,a.A)({},c,e)},A=e[n],k=(0,l.A)((0,l.A)({},e),w(y));return k[n]=function(){var e;o.touched=!0,o.dirty=!0;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e=i?i.apply(void 0,n):re.apply(void 0,[c].concat(n)),u&&(e=u(e,y,v(!0))),b({type:"updateValue",namePath:h,value:e}),A&&A.apply(void 0,n)},g(f||[]).forEach((function(e){var t=k[e];k[e]=function(){t&&t.apply(void 0,arguments);var n=o.props.rules;n&&n.length&&b({type:"validateField",namePath:h,triggerName:e})}})),k},e.fieldContext&&(0,(0,e.fieldContext.getInternalHooks)(m.c).initEntityValue)((0,d.A)(o)),o}return(0,s.A)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.shouldUpdate,n=e.fieldContext;if(this.mounted=!0,n){var r=(0,n.getInternalHooks)(m.c).registerField;this.cancelRegisterFunc=r(this)}!0===t&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var e,t=this.state.resetCount,n=this.props.children,o=this.getOnlyChild(n),i=o.child;return o.isFunction?e=i:r.isValidElement(i)?e=r.cloneElement(i,this.getControlled(i.props)):((0,v.Ay)(!i,"`children` of Field is not validate ReactElement."),e=i),r.createElement(r.Fragment,{key:t},e)}}]),n}(r.Component);ve.contextType=m.A,ve.defaultProps={trigger:"onChange",valuePropName:"value"};const me=function(e){var t=e.name,n=(0,i.A)(e,["name"]),a=r.useContext(m.A),l=void 0!==t?Y(t):void 0,u="keep";return n.isListField||(u="_".concat((l||[]).join("_"))),r.createElement(ve,(0,o.A)({key:u,name:l},n,{fieldContext:a}))},ge=function(e){var t=e.name,n=e.initialValue,o=e.children,i=e.rules,a=e.validateTrigger,c=r.useContext(m.A),s=r.useRef({keys:[],id:0}).current;if("function"!=typeof o)return(0,v.Ay)(!1,"Form.List only accepts function as children."),null;var d=Y(c.prefixName)||[],f=[].concat((0,u.A)(d),(0,u.A)(Y(t)));return r.createElement(m.A.Provider,{value:(0,l.A)((0,l.A)({},c),{},{prefixName:f})},r.createElement(me,{name:[],shouldUpdate:function(e,t,n){return"internal"!==n.source&&e!==t},rules:i,validateTrigger:a,initialValue:n,isList:!0},(function(e,t){var n=e.value,r=void 0===n?[]:n,i=e.onChange,a=c.getFieldValue,l=function(){return a(f||[])||[]},d={add:function(e,t){var n=l();t>=0&&t<=n.length?(s.keys=[].concat((0,u.A)(s.keys.slice(0,t)),[s.id],(0,u.A)(s.keys.slice(t))),i([].concat((0,u.A)(n.slice(0,t)),[e],(0,u.A)(n.slice(t))))):(s.keys=[].concat((0,u.A)(s.keys),[s.id]),i([].concat((0,u.A)(n),[e]))),s.id+=1},remove:function(e){var t=l(),n=new Set(Array.isArray(e)?e:[e]);n.size<=0||(s.keys=s.keys.filter((function(e,t){return!n.has(t)})),i(t.filter((function(e,t){return!n.has(t)}))))},move:function(e,t){if(e!==t){var n=l();e<0||e>=n.length||t<0||t>=n.length||(s.keys=oe(s.keys,e,t),i(oe(n,e,t)))}}},h=r||[];return Array.isArray(h)||(h=[]),o(h.map((function(e,t){var n=s.keys[t];return void 0===n&&(s.keys[t]=s.id,n=s.keys[t],s.id+=1),{name:t,key:n,isListField:!0}})),d,t)})))};var be=n(7510),ye="__@field_split__";function we(e){return e.map((function(e){return"".concat((0,A.A)(e),":").concat(e)})).join(ye)}const Ae=function(){function e(){(0,c.A)(this,e),this.kvs=new Map}return(0,s.A)(e,[{key:"set",value:function(e,t){this.kvs.set(we(e),t)}},{key:"get",value:function(e){return this.kvs.get(we(e))}},{key:"update",value:function(e,t){var n=t(this.get(e));n?this.set(e,n):this.delete(e)}},{key:"delete",value:function(e){this.kvs.delete(we(e))}},{key:"map",value:function(e){return(0,u.A)(this.kvs.entries()).map((function(t){var n=(0,be.A)(t,2),r=n[0],o=n[1],i=r.split(ye);return e({key:i.map((function(e){var t=e.match(/^([^:]*):(.*)$/),n=(0,be.A)(t,3),r=n[1],o=n[2];return"number"===r?Number(o):o})),value:o})}))}},{key:"toJSON",value:function(){var e={};return this.map((function(t){var n=t.key,r=t.value;return e[n.join(".")]=r,null})),e}}]),e}();var ke=function e(t){var n=this;(0,c.A)(this,e),this.formHooked=!1,this.subscribable=!0,this.store={},this.fieldEntities=[],this.initialValues={},this.callbacks={},this.validateMessages=null,this.preserve=null,this.lastValidatePromise=null,this.getForm=function(){return{getFieldValue:n.getFieldValue,getFieldsValue:n.getFieldsValue,getFieldError:n.getFieldError,getFieldsError:n.getFieldsError,isFieldsTouched:n.isFieldsTouched,isFieldTouched:n.isFieldTouched,isFieldValidating:n.isFieldValidating,isFieldsValidating:n.isFieldsValidating,resetFields:n.resetFields,setFields:n.setFields,setFieldsValue:n.setFieldsValue,validateFields:n.validateFields,submit:n.submit,getInternalHooks:n.getInternalHooks}},this.getInternalHooks=function(e){return e===m.c?(n.formHooked=!0,{dispatch:n.dispatch,initEntityValue:n.initEntityValue,registerField:n.registerField,useSubscribe:n.useSubscribe,setInitialValues:n.setInitialValues,setCallbacks:n.setCallbacks,setValidateMessages:n.setValidateMessages,getFields:n.getFields,setPreserve:n.setPreserve}):((0,v.Ay)(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)},this.useSubscribe=function(e){n.subscribable=e},this.setInitialValues=function(e,t){n.initialValues=e||{},t&&(n.store=te({},e,n.store))},this.getInitialValue=function(e){return G(n.initialValues,e)},this.setCallbacks=function(e){n.callbacks=e},this.setValidateMessages=function(e){n.validateMessages=e},this.setPreserve=function(e){n.preserve=e},this.timeoutId=null,this.warningUnhooked=function(){},this.getFieldEntities=function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?n.fieldEntities.filter((function(e){return e.getNamePath().length})):n.fieldEntities},this.getFieldsMap=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new Ae;return n.getFieldEntities(e).forEach((function(e){var n=e.getNamePath();t.set(n,e)})),t},this.getFieldEntitiesForNamePathList=function(e){if(!e)return n.getFieldEntities(!0);var t=n.getFieldsMap(!0);return e.map((function(e){var n=Y(e);return t.get(n)||{INVALIDATE_NAME_PATH:Y(e)}}))},this.getFieldsValue=function(e,t){if(n.warningUnhooked(),!0===e&&!t)return n.store;var r=n.getFieldEntitiesForNamePathList(Array.isArray(e)?e:null),o=[];return r.forEach((function(n){var r,i="INVALIDATE_NAME_PATH"in n?n.INVALIDATE_NAME_PATH:n.getNamePath();if(e||!(null===(r=n.isListField)||void 0===r?void 0:r.call(n)))if(t){var a="getMeta"in n?n.getMeta():null;t(a)&&o.push(i)}else o.push(i)})),X(n.store,o.map(Y))},this.getFieldValue=function(e){n.warningUnhooked();var t=Y(e);return G(n.store,t)},this.getFieldsError=function(e){return n.warningUnhooked(),n.getFieldEntitiesForNamePathList(e).map((function(t,n){return t&&!("INVALIDATE_NAME_PATH"in t)?{name:t.getNamePath(),errors:t.getErrors()}:{name:Y(e[n]),errors:[]}}))},this.getFieldError=function(e){n.warningUnhooked();var t=Y(e);return n.getFieldsError([t])[0].errors},this.isFieldsTouched=function(){n.warningUnhooked();for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var o,i=t[0],a=t[1],l=!1;0===t.length?o=null:1===t.length?Array.isArray(i)?(o=i.map(Y),l=!1):(o=null,l=i):(o=i.map(Y),l=a);var c=n.getFieldEntities(!0),s=function(e){return e.isFieldTouched()};if(!o)return l?c.every(s):c.some(s);var d=new Ae;o.forEach((function(e){d.set(e,[])})),c.forEach((function(e){var t=e.getNamePath();o.forEach((function(n){n.every((function(e,n){return t[n]===e}))&&d.update(n,(function(t){return[].concat((0,u.A)(t),[e])}))}))}));var f=function(e){return e.some(s)},h=d.map((function(e){return e.value}));return l?h.every(f):h.some(f)},this.isFieldTouched=function(e){return n.warningUnhooked(),n.isFieldsTouched([e])},this.isFieldsValidating=function(e){n.warningUnhooked();var t=n.getFieldEntities();if(!e)return t.some((function(e){return e.isFieldValidating()}));var r=e.map(Y);return t.some((function(e){var t=e.getNamePath();return Q(r,t)&&e.isFieldValidating()}))},this.isFieldValidating=function(e){return n.warningUnhooked(),n.isFieldsValidating([e])},this.resetWithFieldInitialValue=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=new Ae,o=n.getFieldEntities(!0);o.forEach((function(e){var t=e.props.initialValue,n=e.getNamePath();if(void 0!==t){var o=r.get(n)||new Set;o.add({entity:e,value:t}),r.set(n,o)}})),t.entities?e=t.entities:t.namePathList?(e=[],t.namePathList.forEach((function(t){var n,o=r.get(t);o&&(n=e).push.apply(n,(0,u.A)((0,u.A)(o).map((function(e){return e.entity}))))}))):e=o,e.forEach((function(e){if(void 0!==e.props.initialValue){var o=e.getNamePath();if(void 0!==n.getInitialValue(o))(0,v.Ay)(!1,"Form already set 'initialValues' with path '".concat(o.join("."),"'. Field can not overwrite it."));else{var i=r.get(o);if(i&&i.size>1)(0,v.Ay)(!1,"Multiple Field with path '".concat(o.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(i){var a=n.getFieldValue(o);t.skipExist&&void 0!==a||(n.store=J(n.store,o,(0,u.A)(i)[0].value))}}}}))},this.resetFields=function(e){n.warningUnhooked();var t=n.store;if(!e)return n.store=te({},n.initialValues),n.resetWithFieldInitialValue(),void n.notifyObservers(t,null,{type:"reset"});var r=e.map(Y);r.forEach((function(e){var t=n.getInitialValue(e);n.store=J(n.store,e,t)})),n.resetWithFieldInitialValue({namePathList:r}),n.notifyObservers(t,r,{type:"reset"})},this.setFields=function(e){n.warningUnhooked();var t=n.store;e.forEach((function(e){var r=e.name,o=(e.errors,(0,i.A)(e,["name","errors"])),a=Y(r);"value"in o&&(n.store=J(n.store,a,o.value)),n.notifyObservers(t,[a],{type:"setField",data:e})}))},this.getFields=function(){return n.getFieldEntities(!0).map((function(e){var t=e.getNamePath(),r=e.getMeta(),o=(0,l.A)((0,l.A)({},r),{},{name:t,value:n.getFieldValue(t)});return Object.defineProperty(o,"originRCField",{value:!0}),o}))},this.initEntityValue=function(e){var t=e.props.initialValue;if(void 0!==t){var r=e.getNamePath();void 0===G(n.store,r)&&(n.store=J(n.store,r,t))}},this.registerField=function(e){if(n.fieldEntities.push(e),void 0!==e.props.initialValue){var t=n.store;n.resetWithFieldInitialValue({entities:[e],skipExist:!0}),n.notifyObservers(t,[e.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(n.fieldEntities=n.fieldEntities.filter((function(t){return t!==e})),!1===(void 0!==r?r:n.preserve)&&(!t||o.length>1)){var i=e.getNamePath(),a=t?void 0:G(n.initialValues,i);i.length&&n.getFieldValue(i)!==a&&n.fieldEntities.every((function(e){return!ne(e.getNamePath(),i)}))&&(n.store=J(n.store,i,a,!0))}}},this.dispatch=function(e){switch(e.type){case"updateValue":var t=e.namePath,r=e.value;n.updateValue(t,r);break;case"validateField":var o=e.namePath,i=e.triggerName;n.validateFields([o],{triggerName:i})}},this.notifyObservers=function(e,t,r){if(n.subscribable){var o=(0,l.A)((0,l.A)({},r),{},{store:n.getFieldsValue(!0)});n.getFieldEntities().forEach((function(n){(0,n.onStoreChange)(e,t,o)}))}else n.forceRootUpdate()},this.updateValue=function(e,t){var r=Y(e),o=n.store;n.store=J(n.store,r,t),n.notifyObservers(o,[r],{type:"valueUpdate",source:"internal"});var i=n.getDependencyChildrenFields(r);i.length&&n.validateFields(i),n.notifyObservers(o,i,{type:"dependenciesUpdate",relatedFields:[r].concat((0,u.A)(i))});var a=n.callbacks.onValuesChange;a&&a(X(n.store,[r]),n.getFieldsValue()),n.triggerOnFieldsChange([r].concat((0,u.A)(i)))},this.setFieldsValue=function(e){n.warningUnhooked();var t=n.store;e&&(n.store=te(n.store,e)),n.notifyObservers(t,null,{type:"valueUpdate",source:"external"})},this.getDependencyChildrenFields=function(e){var t=new Set,r=[],o=new Ae;return n.getFieldEntities().forEach((function(e){(e.props.dependencies||[]).forEach((function(t){var n=Y(t);o.update(n,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return t.add(e),t}))}))})),function e(n){(o.get(n)||new Set).forEach((function(n){if(!t.has(n)){t.add(n);var o=n.getNamePath();n.isFieldDirty()&&o.length&&(r.push(o),e(o))}}))}(e),r},this.triggerOnFieldsChange=function(e,t){var r=n.callbacks.onFieldsChange;if(r){var o=n.getFields();if(t){var i=new Ae;t.forEach((function(e){var t=e.name,n=e.errors;i.set(t,n)})),o.forEach((function(e){e.errors=i.get(e.name)||e.errors}))}r(o.filter((function(t){var n=t.name;return Q(e,n)})),o)}},this.validateFields=function(e,t){n.warningUnhooked();var r=!!e,o=r?e.map(Y):[],i=[];n.getFieldEntities(!0).forEach((function(a){if(r||o.push(a.getNamePath()),(null==t?void 0:t.recursive)&&r){var u=a.getNamePath();u.every((function(t,n){return e[n]===t||void 0===e[n]}))&&o.push(u)}if(a.props.rules&&a.props.rules.length){var c=a.getNamePath();if(!r||Q(o,c)){var s=a.validateRules((0,l.A)({validateMessages:(0,l.A)((0,l.A)({},ae),n.validateMessages)},t));i.push(s.then((function(){return{name:c,errors:[]}})).catch((function(e){return Promise.reject({name:c,errors:e})})))}}}));var a=function(e){var t=!1,n=e.length,r=[];return e.length?new Promise((function(o,i){e.forEach((function(e,a){e.catch((function(e){return t=!0,e})).then((function(e){n-=1,r[a]=e,n>0||(t&&i(r),o(r))}))}))})):Promise.resolve([])}(i);n.lastValidatePromise=a,a.catch((function(e){return e})).then((function(e){var t=e.map((function(e){return e.name}));n.notifyObservers(n.store,t,{type:"validateFinish"}),n.triggerOnFieldsChange(t,e)}));var u=a.then((function(){return n.lastValidatePromise===a?Promise.resolve(n.getFieldsValue(o)):Promise.reject([])})).catch((function(e){var t=e.filter((function(e){return e&&e.errors.length}));return Promise.reject({values:n.getFieldsValue(o),errorFields:t,outOfDate:n.lastValidatePromise!==a})}));return u.catch((function(e){return e})),u},this.submit=function(){n.warningUnhooked(),n.validateFields().then((function(e){var t=n.callbacks.onFinish;if(t)try{t(e)}catch(e){console.error(e)}})).catch((function(e){var t=n.callbacks.onFinishFailed;t&&t(e)}))},this.forceRootUpdate=t};const _e=function(e){var t=r.useRef(),n=r.useState({}),o=(0,be.A)(n,2)[1];if(!t.current)if(e)t.current=e;else{var i=new ke((function(){o({})}));t.current=i.getForm()}return[t.current]};var Ce=r.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),Ne=function(e){var t=e.validateMessages,n=e.onFormChange,o=e.onFormFinish,i=e.children,u=r.useContext(Ce),c=r.useRef({});return r.createElement(Ce.Provider,{value:(0,l.A)((0,l.A)({},u),{},{validateMessages:(0,l.A)((0,l.A)({},u.validateMessages),t),triggerFormChange:function(e,t){n&&n(e,{changedFields:t,forms:c.current}),u.triggerFormChange(e,t)},triggerFormFinish:function(e,t){o&&o(e,{values:t,forms:c.current}),u.triggerFormFinish(e,t)},registerForm:function(e,t){e&&(c.current=(0,l.A)((0,l.A)({},c.current),{},(0,a.A)({},e,t))),u.registerForm(e,t)},unregisterForm:function(e){var t=(0,l.A)({},c.current);delete t[e],c.current=t,u.unregisterForm(e)}})},i)};const Oe=Ce,xe=function(e,t){var n=e.name,a=e.initialValues,c=e.fields,s=e.form,d=e.preserve,f=e.children,h=e.component,p=void 0===h?"form":h,v=e.validateMessages,g=e.validateTrigger,b=void 0===g?"onChange":g,y=e.onValuesChange,w=e.onFieldsChange,k=e.onFinish,_=e.onFinishFailed,C=(0,i.A)(e,["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"]),N=r.useContext(Oe),O=_e(s),x=(0,be.A)(O,1)[0],E=x.getInternalHooks(m.c),D=E.useSubscribe,P=E.setInitialValues,R=E.setCallbacks,S=E.setValidateMessages,T=E.setPreserve;r.useImperativeHandle(t,(function(){return x})),r.useEffect((function(){return N.registerForm(n,x),function(){N.unregisterForm(n)}}),[N,x,n]),S((0,l.A)((0,l.A)({},N.validateMessages),v)),R({onValuesChange:y,onFieldsChange:function(e){if(N.triggerFormChange(n,e),w){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];w.apply(void 0,[e].concat(r))}},onFinish:function(e){N.triggerFormFinish(n,e),k&&k(e)},onFinishFailed:_}),T(d);var j=r.useRef(null);P(a,!j.current),j.current||(j.current=!0);var I=f,B="function"==typeof f;B&&(I=f(x.getFieldsValue(!0),x)),D(!B);var M=r.useRef();r.useEffect((function(){(function(e,t){if(e===t)return!0;if(!e&&t||e&&!t)return!1;if(!e||!t||"object"!==(0,A.A)(e)||"object"!==(0,A.A)(t))return!1;var n=Object.keys(e),r=Object.keys(t),o=new Set([].concat((0,u.A)(n),(0,u.A)(r)));return(0,u.A)(o).every((function(n){var r=e[n],o=t[n];return"function"==typeof r&&"function"==typeof o||r===o}))})(M.current||[],c||[])||x.setFields(c||[]),M.current=c}),[c,x]);var F=r.useMemo((function(){return(0,l.A)((0,l.A)({},x),{},{validateTrigger:b})}),[x,b]),L=r.createElement(m.A.Provider,{value:F},I);return!1===p?L:r.createElement(p,(0,o.A)({},C,{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),x.submit()},onReset:function(e){var t;e.preventDefault(),x.resetFields(),null===(t=C.onReset)||void 0===t||t.call(C,e)}}),L)};var Ee=r.forwardRef(xe);Ee.FormProvider=Ne,Ee.Field=me,Ee.List=ge,Ee.useForm=_e;const De=Ee},6129:(e,t,n)=>{"use strict";n.d(t,{aF:()=>he,Ay:()=>pe});var r=n(7373),o=n(6001),i=n(7510),a=n(7786),l=n(5399),u=n.n(l),c=n(8217),s=n(9438),d=n(4883),f=d.createContext({}),h=n(8599),p=n(3075),v=n(9239),m=n(8636);const g=function(e){(0,v.A)(n,e);var t=(0,m.A)(n);function n(){return(0,h.A)(this,n),t.apply(this,arguments)}return(0,p.A)(n,[{key:"render",value:function(){return this.props.children}}]),n}(d.Component);var b=n(6491),y=n(2022),w=n(4695),A="none",k="appear",_="enter",C="leave",N="none",O="prepare",x="start",E="active",D="end",P="prepared",R=n(9411);function S(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit".concat(e)]="webkit".concat(t),n["Moz".concat(e)]="moz".concat(t),n["ms".concat(e)]="MS".concat(t),n["O".concat(e)]="o".concat(t.toLowerCase()),n}var T,j,I,B=(T=(0,R.A)(),j="undefined"!=typeof window?window:{},I={animationend:S("Animation","AnimationEnd"),transitionend:S("Transition","TransitionEnd")},T&&("AnimationEvent"in j||delete I.animationend.animation,"TransitionEvent"in j||delete I.transitionend.transition),I),M={};if((0,R.A)()){var F=document.createElement("div");M=F.style}var L={};function U(e){if(L[e])return L[e];var t=B[e];if(t)for(var n=Object.keys(t),r=n.length,o=0;o<r;o+=1){var i=n[o];if(Object.prototype.hasOwnProperty.call(t,i)&&i in M)return L[e]=t[i],L[e]}return""}var V=U("animationend"),H=U("transitionend"),z=!(!V||!H),W=V||"animationend",q=H||"transitionend";function $(e,t){return e?"object"===(0,a.A)(e)?e[t.replace(/-\w/g,(function(e){return e[1].toUpperCase()}))]:"".concat(e,"-").concat(t):null}const K=(0,R.A)()?d.useLayoutEffect:d.useEffect;var Y=n(7114),G=[O,x,E,D],J=[O,P],X=!1;function Q(e){return e===E||e===D}function Z(e,t,n,a){var l,u,c,s,f=a.motionEnter,h=void 0===f||f,p=a.motionAppear,v=void 0===p||p,m=a.motionLeave,g=void 0===m||m,R=a.motionDeadline,S=a.motionLeaveImmediately,T=a.onAppearPrepare,j=a.onEnterPrepare,I=a.onLeavePrepare,B=a.onAppearStart,M=a.onEnterStart,F=a.onLeaveStart,L=a.onAppearActive,U=a.onEnterActive,V=a.onLeaveActive,H=a.onAppearEnd,z=a.onEnterEnd,$=a.onLeaveEnd,Z=a.onVisibleChanged,ee=(0,y.A)(),te=(0,i.A)(ee,2),ne=te[0],re=te[1],oe=(l=A,u=d.useReducer((function(e){return e+1}),0),c=(0,i.A)(u,2)[1],s=d.useRef(l),[(0,w.A)((function(){return s.current})),(0,w.A)((function(e){s.current="function"==typeof e?e(s.current):e,c()}))]),ie=(0,i.A)(oe,2),ae=ie[0],le=ie[1],ue=(0,y.A)(null),ce=(0,i.A)(ue,2),se=ce[0],de=ce[1],fe=ae(),he=(0,d.useRef)(!1),pe=(0,d.useRef)(null);function ve(){return n()}var me=(0,d.useRef)(!1);function ge(){le(A),de(null,!0)}var be=(0,b._q)((function(e){var t=ae();if(t!==A){var n=ve();if(!e||e.deadline||e.target===n){var r,o=me.current;t===k&&o?r=null==H?void 0:H(n,e):t===_&&o?r=null==z?void 0:z(n,e):t===C&&o&&(r=null==$?void 0:$(n,e)),o&&!1!==r&&ge()}}})),ye=function(e){var t=(0,d.useRef)();function n(t){t&&(t.removeEventListener(q,e),t.removeEventListener(W,e))}return d.useEffect((function(){return function(){n(t.current)}}),[]),[function(r){t.current&&t.current!==r&&n(t.current),r&&r!==t.current&&(r.addEventListener(q,e),r.addEventListener(W,e),t.current=r)},n]}(be),we=(0,i.A)(ye,1)[0],Ae=function(e){switch(e){case k:return(0,r.A)((0,r.A)((0,r.A)({},O,T),x,B),E,L);case _:return(0,r.A)((0,r.A)((0,r.A)({},O,j),x,M),E,U);case C:return(0,r.A)((0,r.A)((0,r.A)({},O,I),x,F),E,V);default:return{}}},ke=d.useMemo((function(){return Ae(fe)}),[fe]),_e=function(e,t,n){var r=(0,y.A)(N),o=(0,i.A)(r,2),a=o[0],l=o[1],u=function(){var e=d.useRef(null);function t(){Y.A.cancel(e.current)}return d.useEffect((function(){return function(){t()}}),[]),[function n(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;t();var i=(0,Y.A)((function(){o<=1?r({isCanceled:function(){return i!==e.current}}):n(r,o-1)}));e.current=i},t]}(),c=(0,i.A)(u,2),s=c[0],f=c[1],h=t?J:G;return K((function(){if(a!==N&&a!==D){var e=h.indexOf(a),t=h[e+1],r=n(a);r===X?l(t,!0):t&&s((function(e){function n(){e.isCanceled()||l(t,!0)}!0===r?n():Promise.resolve(r).then(n)}))}}),[e,a]),d.useEffect((function(){return function(){f()}}),[]),[function(){l(O,!0)},a]}(fe,!e,(function(e){if(e===O){var t=ke[O];return t?t(ve()):X}var n;return Oe in ke&&de((null===(n=ke[Oe])||void 0===n?void 0:n.call(ke,ve(),null))||null),Oe===E&&fe!==A&&(we(ve()),R>0&&(clearTimeout(pe.current),pe.current=setTimeout((function(){be({deadline:!0})}),R))),Oe===P&&ge(),true})),Ce=(0,i.A)(_e,2),Ne=Ce[0],Oe=Ce[1],xe=Q(Oe);me.current=xe,K((function(){re(t);var n,r=he.current;he.current=!0,!r&&t&&v&&(n=k),r&&t&&h&&(n=_),(r&&!t&&g||!r&&S&&!t&&g)&&(n=C);var o=Ae(n);n&&(e||o[O])?(le(n),Ne()):le(A)}),[t]),(0,d.useEffect)((function(){(fe===k&&!v||fe===_&&!h||fe===C&&!g)&&le(A)}),[v,h,g]),(0,d.useEffect)((function(){return function(){he.current=!1,clearTimeout(pe.current)}}),[]);var Ee=d.useRef(!1);(0,d.useEffect)((function(){ne&&(Ee.current=!0),void 0!==ne&&fe===A&&((Ee.current||ne)&&(null==Z||Z(ne)),Ee.current=!0)}),[ne,fe]);var De=se;return ke[O]&&Oe===x&&(De=(0,o.A)({transition:"none"},De)),[fe,Oe,De,null!=ne?ne:t]}const ee=function(e){var t=e;"object"===(0,a.A)(e)&&(t=e.transitionSupport);var n=d.forwardRef((function(e,n){var a=e.visible,l=void 0===a||a,h=e.removeOnLeave,p=void 0===h||h,v=e.forceRender,m=e.children,b=e.motionName,y=e.leavedClassName,w=e.eventProps,k=function(e,n){return!(!e.motionName||!t||!1===n)}(e,d.useContext(f).motion),_=(0,d.useRef)(),C=(0,d.useRef)(),N=Z(k,l,(function(){try{return _.current instanceof HTMLElement?_.current:(0,c.Ay)(C.current)}catch(e){return null}}),e),E=(0,i.A)(N,4),D=E[0],P=E[1],R=E[2],S=E[3],T=d.useRef(S);S&&(T.current=!0);var j,I=d.useCallback((function(e){_.current=e,(0,s.Xf)(n,e)}),[n]),B=(0,o.A)((0,o.A)({},w),{},{visible:l});if(m)if(D===A)j=S?m((0,o.A)({},B),I):!p&&T.current&&y?m((0,o.A)((0,o.A)({},B),{},{className:y}),I):v||!p&&!y?m((0,o.A)((0,o.A)({},B),{},{style:{display:"none"}}),I):null;else{var M;P===O?M="prepare":Q(P)?M="active":P===x&&(M="start");var F=$(b,"".concat(D,"-").concat(M));j=m((0,o.A)((0,o.A)({},B),{},{className:u()($(b,D),(0,r.A)((0,r.A)({},F,F&&M),b,"string"==typeof b)),style:R}),I)}else j=null;return d.isValidElement(j)&&(0,s.f3)(j)&&(j.ref||(j=d.cloneElement(j,{ref:I}))),d.createElement(g,{ref:C},j)}));return n.displayName="CSSMotion",n}(z);var te=n(3082),ne=n(4632),re=n(7211),oe="add",ie="keep",ae="remove",le="removed";function ue(e){var t;return t=e&&"object"===(0,a.A)(e)&&"key"in e?e:{key:e},(0,o.A)((0,o.A)({},t),{},{key:String(t.key)})}function ce(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(ue)}var se=["component","children","onVisibleChanged","onAllRemoved"],de=["status"],fe=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];const he=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ee,n=function(e){(0,v.A)(i,e);var n=(0,m.A)(i);function i(){var e;(0,h.A)(this,i);for(var t=arguments.length,a=new Array(t),l=0;l<t;l++)a[l]=arguments[l];return e=n.call.apply(n,[this].concat(a)),(0,r.A)((0,re.A)(e),"state",{keyEntities:[]}),(0,r.A)((0,re.A)(e),"removeKey",(function(t){var n=e.state.keyEntities.map((function(e){return e.key!==t?e:(0,o.A)((0,o.A)({},e),{},{status:le})}));return e.setState({keyEntities:n}),n.filter((function(e){return e.status!==le})).length})),e}return(0,p.A)(i,[{key:"render",value:function(){var e=this,n=this.state.keyEntities,r=this.props,i=r.component,a=r.children,l=r.onVisibleChanged,u=r.onAllRemoved,c=(0,ne.A)(r,se),s=i||d.Fragment,f={};return fe.forEach((function(e){f[e]=c[e],delete c[e]})),delete c.keys,d.createElement(s,c,n.map((function(n,r){var i=n.status,c=(0,ne.A)(n,de),s=i===oe||i===ie;return d.createElement(t,(0,te.A)({},f,{key:c.key,visible:s,eventProps:c,onVisibleChanged:function(t){null==l||l(t,{key:c.key}),t||0===e.removeKey(c.key)&&u&&u()}}),(function(e,t){return a((0,o.A)((0,o.A)({},e),{},{index:r}),t)}))})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.keys,r=t.keyEntities,i=ce(n),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=0,i=t.length,a=ce(e),l=ce(t);a.forEach((function(e){for(var t=!1,a=r;a<i;a+=1){var u=l[a];if(u.key===e.key){r<a&&(n=n.concat(l.slice(r,a).map((function(e){return(0,o.A)((0,o.A)({},e),{},{status:oe})}))),r=a),n.push((0,o.A)((0,o.A)({},u),{},{status:ie})),r+=1,t=!0;break}}t||n.push((0,o.A)((0,o.A)({},e),{},{status:ae}))})),r<i&&(n=n.concat(l.slice(r).map((function(e){return(0,o.A)((0,o.A)({},e),{},{status:oe})}))));var u={};return n.forEach((function(e){var t=e.key;u[t]=(u[t]||0)+1})),Object.keys(u).filter((function(e){return u[e]>1})).forEach((function(e){(n=n.filter((function(t){var n=t.key,r=t.status;return n!==e||r!==ae}))).forEach((function(t){t.key===e&&(t.status=ie)}))})),n}(r,i);return{keyEntities:a.filter((function(e){var t=r.find((function(t){var n=t.key;return e.key===n}));return!t||t.status!==le||e.status!==ae}))}}}]),i}(d.Component);return(0,r.A)(n,"defaultProps",{component:"div"}),n}(z),pe=ee},5537:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var r=n(3082),o=n(7373),i=n(8599),a=n(3075),l=n(9239),u=n(8636),c=n(4883),s=n(1845),d=n.n(s),f=n(5399),h=n.n(f),p=function(e){(0,l.A)(n,e);var t=(0,u.A)(n);function n(){var e;(0,i.A)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).closeTimer=null,e.close=function(t){t&&t.stopPropagation(),e.clearCloseTimer();var n=e.props,r=n.onClose,o=n.noticeKey;r&&r(o)},e.startCloseTimer=function(){e.props.duration&&(e.closeTimer=window.setTimeout((function(){e.close()}),1e3*e.props.duration))},e.clearCloseTimer=function(){e.closeTimer&&(clearTimeout(e.closeTimer),e.closeTimer=null)},e}return(0,a.A)(n,[{key:"componentDidMount",value:function(){this.startCloseTimer()}},{key:"componentDidUpdate",value:function(e){(this.props.duration!==e.duration||this.props.updateMark!==e.updateMark||this.props.visible!==e.visible&&this.props.visible)&&this.restartCloseTimer()}},{key:"componentWillUnmount",value:function(){this.clearCloseTimer()}},{key:"restartCloseTimer",value:function(){this.clearCloseTimer(),this.startCloseTimer()}},{key:"render",value:function(){var e=this,t=this.props,n=t.prefixCls,i=t.className,a=t.closable,l=t.closeIcon,u=t.style,s=t.onClick,f=t.children,p=t.holder,v="".concat(n,"-notice"),m=Object.keys(this.props).reduce((function(t,n){return"data-"!==n.substr(0,5)&&"aria-"!==n.substr(0,5)&&"role"!==n||(t[n]=e.props[n]),t}),{}),g=c.createElement("div",(0,r.A)({className:h()(v,i,(0,o.A)({},"".concat(v,"-closable"),a)),style:u,onMouseEnter:this.clearCloseTimer,onMouseLeave:this.startCloseTimer,onClick:s},m),c.createElement("div",{className:"".concat(v,"-content")},f),a?c.createElement("a",{tabIndex:0,onClick:this.close,className:"".concat(v,"-close")},l||c.createElement("span",{className:"".concat(v,"-close-x")})):null);return p?d().createPortal(g,p):g}}]),n}(c.Component);p.defaultProps={onClose:function(){},duration:1.5}},1915:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>k});var r=n(4632),o=n(3082),i=n(6001),a=n(8599),l=n(3075),u=n(9239),c=n(8636),s=n(4883),d=n(1845),f=n.n(d),h=n(5399),p=n.n(h),v=n(6129),m=n(5537),g=n(5325),b=0,y=Date.now();function w(){var e=b;return b+=1,"rcNotification_".concat(y,"_").concat(e)}var A=function(e){(0,u.A)(n,e);var t=(0,c.A)(n);function n(){var e;(0,a.A)(this,n);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={notices:[]},e.hookRefs=new Map,e.add=function(t,n){var r=t.key||w(),o=(0,i.A)((0,i.A)({},t),{},{key:r}),a=e.props.maxCount;e.setState((function(e){var t=e.notices,i=t.map((function(e){return e.notice.key})).indexOf(r),l=t.concat();return-1!==i?l.splice(i,1,{notice:o,holderCallback:n}):(a&&t.length>=a&&(o.key=l[0].notice.key,o.updateMark=w(),o.userPassKey=r,l.shift()),l.push({notice:o,holderCallback:n})),{notices:l}}))},e.remove=function(t){e.setState((function(e){return{notices:e.notices.filter((function(e){var n=e.notice,r=n.key;return(n.userPassKey||r)!==t}))}}))},e.noticePropsMap={},e}return(0,l.A)(n,[{key:"getTransitionName",value:function(){var e=this.props,t=e.prefixCls,n=e.animation,r=this.props.transitionName;return!r&&n&&(r="".concat(t,"-").concat(n)),r}},{key:"render",value:function(){var e=this,t=this.state.notices,n=this.props,r=n.prefixCls,a=n.className,l=n.closeIcon,u=n.style,c=[];return t.forEach((function(n,o){var a=n.notice,u=n.holderCallback,s=o===t.length-1?a.updateMark:void 0,d=a.key,f=a.userPassKey,h=(0,i.A)((0,i.A)((0,i.A)({prefixCls:r,closeIcon:l},a),a.props),{},{key:d,noticeKey:f||d,updateMark:s,onClose:function(t){var n;e.remove(t),null===(n=a.onClose)||void 0===n||n.call(a)},onClick:a.onClick,children:a.content});c.push(d),e.noticePropsMap[d]={props:h,holderCallback:u}})),s.createElement("div",{className:p()(r,a),style:u},s.createElement(v.aF,{keys:c,motionName:this.getTransitionName(),onVisibleChanged:function(t,n){var r=n.key;t||delete e.noticePropsMap[r]}},(function(t){var n=t.key,a=t.className,l=t.style,u=t.visible,c=e.noticePropsMap[n],d=c.props,f=c.holderCallback;return f?s.createElement("div",{key:n,className:p()(a,"".concat(r,"-hook-holder")),style:(0,i.A)({},l),ref:function(t){void 0!==n&&(t?(e.hookRefs.set(n,t),f(t,d)):e.hookRefs.delete(n))}}):s.createElement(m.A,(0,o.A)({},d,{className:p()(a,null==d?void 0:d.className),style:(0,i.A)((0,i.A)({},l),null==d?void 0:d.style),visible:u}))})))}}]),n}(s.Component);A.newInstance=void 0,A.defaultProps={prefixCls:"rc-notification",animation:"fade",style:{top:65,left:"50%"}},A.newInstance=function(e,t){var n=e||{},i=n.getContainer,a=(0,r.A)(n,["getContainer"]),l=document.createElement("div");i?i().appendChild(l):document.body.appendChild(l);var u=!1;f().render(s.createElement(A,(0,o.A)({},a,{ref:function(e){u||(u=!0,t({notice:function(t){e.add(t)},removeNotice:function(t){e.remove(t)},component:e,destroy:function(){f().unmountComponentAtNode(l),l.parentNode&&l.parentNode.removeChild(l)},useNotification:function(){return(0,g.A)(e)}}))}})),l)};const k=A},5325:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(4522),o=n(3082),i=n(7510),a=n(4883),l=n(5537);function u(e){var t=a.useRef({}),n=a.useState([]),u=(0,i.A)(n,2),c=u[0],s=u[1];return[function(n){var i=!0;e.add(n,(function(e,n){var u=n.key;if(e&&(!t.current[u]||i)){var c=a.createElement(l.A,(0,o.A)({},n,{holder:e}));t.current[u]=c,s((function(e){var t=e.findIndex((function(e){return e.key===n.key}));if(-1===t)return[].concat((0,r.A)(e),[c]);var o=(0,r.A)(e);return o[t]=c,o}))}i=!1}))},a.createElement(a.Fragment,null,c)]}},5538:(e,t,n)=>{"use strict";var r=n(5743),o=n(1012);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n(1316)),a=o(n(9599)),l=o(n(1009)),u=o(n(6153)),c=o(n(9489)),s=o(n(3006)),d=r(n(4883)),f=o(n(1845)),h=o(n(5399)),p=function(e){(0,c.default)(n,e);var t=(0,s.default)(n);function n(){var e;(0,l.default)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).closeTimer=null,e.close=function(t){t&&t.stopPropagation(),e.clearCloseTimer();var n=e.props,r=n.onClose,o=n.noticeKey;r&&r(o)},e.startCloseTimer=function(){e.props.duration&&(e.closeTimer=window.setTimeout((function(){e.close()}),1e3*e.props.duration))},e.clearCloseTimer=function(){e.closeTimer&&(clearTimeout(e.closeTimer),e.closeTimer=null)},e}return(0,u.default)(n,[{key:"componentDidMount",value:function(){this.startCloseTimer()}},{key:"componentDidUpdate",value:function(e){(this.props.duration!==e.duration||this.props.updateMark!==e.updateMark||this.props.visible!==e.visible&&this.props.visible)&&this.restartCloseTimer()}},{key:"componentWillUnmount",value:function(){this.clearCloseTimer()}},{key:"restartCloseTimer",value:function(){this.clearCloseTimer(),this.startCloseTimer()}},{key:"render",value:function(){var e=this,t=this.props,n=t.prefixCls,r=t.className,o=t.closable,l=t.closeIcon,u=t.style,c=t.onClick,s=t.children,p=t.holder,v="".concat(n,"-notice"),m=Object.keys(this.props).reduce((function(t,n){return"data-"!==n.substr(0,5)&&"aria-"!==n.substr(0,5)&&"role"!==n||(t[n]=e.props[n]),t}),{}),g=d.createElement("div",(0,i.default)({className:(0,h.default)(v,r,(0,a.default)({},"".concat(v,"-closable"),o)),style:u,onMouseEnter:this.clearCloseTimer,onMouseLeave:this.startCloseTimer,onClick:c},m),d.createElement("div",{className:"".concat(v,"-content")},s),o?d.createElement("a",{tabIndex:0,onClick:this.close,className:"".concat(v,"-close")},l||d.createElement("span",{className:"".concat(v,"-close-x")})):null);return p?f.default.createPortal(g,p):g}}]),n}(d.Component);t.default=p,p.defaultProps={onClose:function(){},duration:1.5}},8856:(e,t,n)=>{"use strict";var r=n(5743),o=n(1012);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=u.useRef({}),n=u.useState([]),r=(0,l.default)(n,2),o=r[0],s=r[1];return[function(n){var r=!0;e.add(n,(function(e,n){var o=n.key;if(e&&(!t.current[o]||r)){var l=u.createElement(c.default,(0,a.default)({},n,{holder:e}));t.current[o]=l,s((function(e){var t=e.findIndex((function(e){return e.key===n.key}));if(-1===t)return[].concat((0,i.default)(e),[l]);var r=(0,i.default)(e);return r[t]=l,r}))}r=!1}))},u.createElement(u.Fragment,null,o)]};var i=o(n(9174)),a=o(n(1316)),l=o(n(313)),u=r(n(4883)),c=o(n(5538))},3559:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"}},9898:(e,t,n)=>{"use strict";var r=n(1012);t.A=void 0;var o=r(n(5710)),i=n(9070),a=r(n(7639)),l=r(n(2711)),u=r(n(8513)),c=r(n(1132)),s=r(n(3364)),d=r(n(1164));o.default.extend(d.default),o.default.extend(s.default),o.default.extend(a.default),o.default.extend(l.default),o.default.extend(u.default),o.default.extend(c.default),o.default.extend((function(e,t){var n=t.prototype,r=n.format;n.format=function(e){var t=(e||"").replace("Wo","wo");return r.bind(this)(t)}}));var f={en_GB:"en-gb",en_US:"en",zh_CN:"zh-cn",zh_TW:"zh-tw"},h=function(e){return f[e]||e.split("_")[0]},p=function(){(0,i.noteOnce)(!1,"Not match any format. Please help to fire a issue about this.")},v={getNow:function(){return(0,o.default)()},getFixedDate:function(e){return(0,o.default)(e,"YYYY-MM-DD")},getEndDate:function(e){return e.endOf("month")},getWeekDay:function(e){var t=e.locale("en");return t.weekday()+t.localeData().firstDayOfWeek()},getYear:function(e){return e.year()},getMonth:function(e){return e.month()},getDate:function(e){return e.date()},getHour:function(e){return e.hour()},getMinute:function(e){return e.minute()},getSecond:function(e){return e.second()},addYear:function(e,t){return e.add(t,"year")},addMonth:function(e,t){return e.add(t,"month")},addDate:function(e,t){return e.add(t,"day")},setYear:function(e,t){return e.year(t)},setMonth:function(e,t){return e.month(t)},setDate:function(e,t){return e.date(t)},setHour:function(e,t){return e.hour(t)},setMinute:function(e,t){return e.minute(t)},setSecond:function(e,t){return e.second(t)},isAfter:function(e,t){return e.isAfter(t)},isValidate:function(e){return e.isValid()},locale:{getWeekFirstDay:function(e){return(0,o.default)().locale(h(e)).localeData().firstDayOfWeek()},getWeekFirstDate:function(e,t){return t.locale(h(e)).weekday(0)},getWeek:function(e,t){return t.locale(h(e)).week()},getShortWeekDays:function(e){return(0,o.default)().locale(h(e)).localeData().weekdaysMin()},getShortMonths:function(e){return(0,o.default)().locale(h(e)).localeData().monthsShort()},format:function(e,t,n){return t.locale(h(e)).format(n)},parse:function(e,t,n){for(var r=h(e),i=0;i<n.length;i+=1){var a=n[i],l=t;if(a.includes("wo")||a.includes("Wo")){for(var u=l.split("-")[0],c=l.split("-")[1],s=(0,o.default)(u,"YYYY").startOf("year").locale(r),d=0;d<=52;d+=1){var f=s.add(d,"week");if(f.format("Wo")===c)return f}return p(),null}var v=(0,o.default)(l,a).locale(r);if(v.isValid())return v}return t&&p(),null}}};t.A=v},2154:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"}},5861:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(4883),o=n.n(r),i=n(3631);function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];return o().Children.forEach(e,(function(e){(null!=e||t.keepEmpty)&&(Array.isArray(e)?n=n.concat(a(e)):(0,i.isFragment)(e)&&e.props?n=n.concat(a(e.props.children,t)):n.push(e))})),n}},9411:(e,t,n)=>{"use strict";function r(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}n.d(t,{A:()=>r})},9451:(e,t,n)=>{"use strict";function r(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}n.d(t,{A:()=>r})},9762:(e,t,n)=>{"use strict";n.d(t,{BD:()=>m,m6:()=>v});var r=n(6001),o=n(9411),i=n(9451),a="data-rc-order",l="data-rc-priority",u="rc-util-key",c=new Map;function s(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).mark;return e?e.startsWith("data-")?e:"data-".concat(e):u}function d(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function f(e){return Array.from((c.get(e)||e).children).filter((function(e){return"STYLE"===e.tagName}))}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,o.A)())return null;var n=t.csp,r=t.prepend,i=t.priority,u=void 0===i?0:i,c=function(e){return"queue"===e?"prependQueue":e?"prepend":"append"}(r),s="prependQueue"===c,h=document.createElement("style");h.setAttribute(a,c),s&&u&&h.setAttribute(l,"".concat(u)),null!=n&&n.nonce&&(h.nonce=null==n?void 0:n.nonce),h.innerHTML=e;var p=d(t),v=p.firstChild;if(r){if(s){var m=(t.styles||f(p)).filter((function(e){if(!["prepend","prependQueue"].includes(e.getAttribute(a)))return!1;var t=Number(e.getAttribute(l)||0);return u>=t}));if(m.length)return p.insertBefore(h,m[m.length-1].nextSibling),h}p.insertBefore(h,v)}else p.appendChild(h);return h}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=d(t);return(t.styles||f(n)).find((function(n){return n.getAttribute(s(t))===e}))}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=p(e,t);n&&d(t).removeChild(n)}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=d(n),a=f(o),l=(0,r.A)((0,r.A)({},n),{},{styles:a});!function(e,t){var n=c.get(e);if(!n||!(0,i.A)(document,n)){var r=h("",t),o=r.parentNode;c.set(e,o),e.removeChild(r)}}(o,l);var u,v,m,g=p(t,l);if(g)return null!==(u=l.csp)&&void 0!==u&&u.nonce&&g.nonce!==(null===(v=l.csp)||void 0===v?void 0:v.nonce)&&(g.nonce=null===(m=l.csp)||void 0===m?void 0:m.nonce),g.innerHTML!==e&&(g.innerHTML=e),g;var b=h(e,l);return b.setAttribute(s(l),t),b}},8217:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>c});var r=n(7786),o=n(4883),i=n.n(o),a=n(1845),l=n.n(a);function u(e){return e instanceof HTMLElement||e instanceof SVGElement}function c(e){var t,n=function(e){return e&&"object"===(0,r.A)(e)&&u(e.nativeElement)?e.nativeElement:u(e)?e:null}(e);return n||(e instanceof i().Component?null===(t=l().findDOMNode)||void 0===t?void 0:t.call(l(),e):null)}},1145:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=r.F1&&t<=r.F12)return!1;switch(t){case r.ALT:case r.CAPS_LOCK:case r.CONTEXT_MENU:case r.CTRL:case r.DOWN:case r.END:case r.ESC:case r.HOME:case r.INSERT:case r.LEFT:case r.MAC_FF_META:case r.META:case r.NUMLOCK:case r.NUM_CENTER:case r.PAGE_DOWN:case r.PAGE_UP:case r.PAUSE:case r.PRINT_SCREEN:case r.RIGHT:case r.SHIFT:case r.UP:case r.WIN_KEY:case r.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=r.ZERO&&e<=r.NINE)return!0;if(e>=r.NUM_ZERO&&e<=r.NUM_MULTIPLY)return!0;if(e>=r.A&&e<=r.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case r.SPACE:case r.QUESTION_MARK:case r.NUM_PLUS:case r.NUM_MINUS:case r.NUM_PERIOD:case r.NUM_DIVISION:case r.SEMICOLON:case r.DASH:case r.EQUALS:case r.COMMA:case r.PERIOD:case r.SLASH:case r.APOSTROPHE:case r.SINGLE_QUOTE:case r.OPEN_SQUARE_BRACKET:case r.BACKSLASH:case r.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};const o=r},4033:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(4883),o=n(1845),i=n.n(o),a=n(9411);const l=(0,r.forwardRef)((function(e,t){var n=e.didUpdate,o=e.getContainer,l=e.children,u=(0,r.useRef)(),c=(0,r.useRef)();(0,r.useImperativeHandle)(t,(function(){return{}}));var s=(0,r.useRef)(!1);return!s.current&&(0,a.A)()&&(c.current=o(),u.current=c.current.parentNode,s.current=!0),(0,r.useEffect)((function(){null==n||n(e)})),(0,r.useEffect)((function(){return null===c.current.parentNode&&null!==u.current&&u.current.appendChild(c.current),function(){var e;null===(e=c.current)||void 0===e||null===(e=e.parentNode)||void 0===e||e.removeChild(c.current)}}),[]),c.current?i().createPortal(l,c.current):null}))},7323:(e,t,n)=>{"use strict";n.d(t,{A:()=>D});var r=n(8599),o=n(3075),i=n(7211),a=n(9239),l=n(8636),u=n(7373),c=n(7786),s=n(4883),d=n(7114),f=n(4033),h=n(9411),p=n(2008);const v=function(e){if(!e)return{};var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).element,n=void 0===t?document.body:t,r={},o=Object.keys(e);return o.forEach((function(e){r[e]=n.style[e]})),o.forEach((function(t){n.style[t]=e[t]})),r};var m={};const g=function(e){if(document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth||e){var t="ant-scrolling-effect",n=new RegExp("".concat(t),"g"),r=document.body.className;if(e){if(!n.test(r))return;return v(m),m={},void(document.body.className=r.replace(n,"").trim())}var o=(0,p.A)();if(o&&(m=v({position:"relative",width:"calc(100% - ".concat(o,"px)")}),!n.test(r))){var i="".concat(r," ").concat(t);document.body.className=i.trim()}}};var b=n(4522),y=0,w=[],A="ant-scrolling-effect",k=new RegExp("".concat(A),"g"),_=new Map,C=(0,o.A)((function e(t){var n=this;(0,r.A)(this,e),(0,u.A)(this,"lockTarget",void 0),(0,u.A)(this,"options",void 0),(0,u.A)(this,"getContainer",(function(){var e;return null===(e=n.options)||void 0===e?void 0:e.container})),(0,u.A)(this,"reLock",(function(e){var t=w.find((function(e){return e.target===n.lockTarget}));t&&n.unLock(),n.options=e,t&&(t.options=e,n.lock())})),(0,u.A)(this,"lock",(function(){var e;if(!w.some((function(e){return e.target===n.lockTarget})))if(w.some((function(e){var t,r=e.options;return(null==r?void 0:r.container)===(null===(t=n.options)||void 0===t?void 0:t.container)})))w=[].concat((0,b.A)(w),[{target:n.lockTarget,options:n.options}]);else{var t=0,r=(null===(e=n.options)||void 0===e?void 0:e.container)||document.body;(r===document.body&&window.innerWidth-document.documentElement.clientWidth>0||r.scrollHeight>r.clientHeight)&&"hidden"!==getComputedStyle(r).overflow&&(t=(0,p.A)());var o=r.className;if(0===w.filter((function(e){var t,r=e.options;return(null==r?void 0:r.container)===(null===(t=n.options)||void 0===t?void 0:t.container)})).length&&_.set(r,v({width:0!==t?"calc(100% - ".concat(t,"px)"):void 0,overflow:"hidden",overflowX:"hidden",overflowY:"hidden"},{element:r})),!k.test(o)){var i="".concat(o," ").concat(A);r.className=i.trim()}w=[].concat((0,b.A)(w),[{target:n.lockTarget,options:n.options}])}})),(0,u.A)(this,"unLock",(function(){var e,t=w.find((function(e){return e.target===n.lockTarget}));if(w=w.filter((function(e){return e.target!==n.lockTarget})),t&&!w.some((function(e){var n,r=e.options;return(null==r?void 0:r.container)===(null===(n=t.options)||void 0===n?void 0:n.container)}))){var r=(null===(e=n.options)||void 0===e?void 0:e.container)||document.body,o=r.className;k.test(o)&&(v(_.get(r),{element:r}),_.delete(r),r.className=r.className.replace(k,"").trim())}})),this.lockTarget=y++,this.options=t})),N=0,O=(0,h.A)(),x={},E=function(e){if(!O)return null;if(e){if("string"==typeof e)return document.querySelectorAll(e)[0];if("function"==typeof e)return e();if("object"===(0,c.A)(e)&&e instanceof window.HTMLElement)return e}return document.body};const D=function(e){(0,a.A)(n,e);var t=(0,l.A)(n);function n(e){var o;return(0,r.A)(this,n),o=t.call(this,e),(0,u.A)((0,i.A)(o),"container",void 0),(0,u.A)((0,i.A)(o),"componentRef",s.createRef()),(0,u.A)((0,i.A)(o),"rafId",void 0),(0,u.A)((0,i.A)(o),"scrollLocker",void 0),(0,u.A)((0,i.A)(o),"renderComponent",void 0),(0,u.A)((0,i.A)(o),"updateScrollLocker",(function(e){var t=(e||{}).visible,n=o.props,r=n.getContainer,i=n.visible;i&&i!==t&&O&&E(r)!==o.scrollLocker.getContainer()&&o.scrollLocker.reLock({container:E(r)})})),(0,u.A)((0,i.A)(o),"updateOpenCount",(function(e){var t=e||{},n=t.visible,r=t.getContainer,i=o.props,a=i.visible,l=i.getContainer;a!==n&&O&&E(l)===document.body&&(a&&!n?N+=1:e&&(N-=1)),("function"==typeof l&&"function"==typeof r?l.toString()!==r.toString():l!==r)&&o.removeCurrentContainer()})),(0,u.A)((0,i.A)(o),"attachToParent",(function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||o.container&&!o.container.parentNode){var e=E(o.props.getContainer);return!!e&&(e.appendChild(o.container),!0)}return!0})),(0,u.A)((0,i.A)(o),"getContainer",(function(){return O?(o.container||(o.container=document.createElement("div"),o.attachToParent(!0)),o.setWrapperClassName(),o.container):null})),(0,u.A)((0,i.A)(o),"setWrapperClassName",(function(){var e=o.props.wrapperClassName;o.container&&e&&e!==o.container.className&&(o.container.className=e)})),(0,u.A)((0,i.A)(o),"removeCurrentContainer",(function(){var e;null===(e=o.container)||void 0===e||null===(e=e.parentNode)||void 0===e||e.removeChild(o.container)})),(0,u.A)((0,i.A)(o),"switchScrollingEffect",(function(){1!==N||Object.keys(x).length?N||(v(x),x={},g(!0)):(g(),x=v({overflow:"hidden",overflowX:"hidden",overflowY:"hidden"}))})),o.scrollLocker=new C({container:E(e.getContainer)}),o}return(0,o.A)(n,[{key:"componentDidMount",value:function(){var e=this;this.updateOpenCount(),this.attachToParent()||(this.rafId=(0,d.A)((function(){e.forceUpdate()})))}},{key:"componentDidUpdate",value:function(e){this.updateOpenCount(e),this.updateScrollLocker(e),this.setWrapperClassName(),this.attachToParent()}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.visible,n=e.getContainer;O&&E(n)===document.body&&(N=t&&N?N-1:N),this.removeCurrentContainer(),d.A.cancel(this.rafId)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.forceRender,r=e.visible,o=null,i={getOpenCount:function(){return N},getContainer:this.getContainer,switchScrollingEffect:this.switchScrollingEffect,scrollLocker:this.scrollLocker};return(n||r||this.componentRef.current)&&(o=s.createElement(f.A,{getContainer:this.getContainer,ref:this.componentRef},t(i))),o}}]),n}(s.Component)},2008:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r,o=n(9762);function i(e){return"undefined"==typeof document?0:((e||void 0===r)&&(r=function(e){var t="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),n=document.createElement("div");n.id=t;var r,i,a=n.style;if(a.position="absolute",a.left="0",a.top="0",a.width="100px",a.height="100px",a.overflow="scroll",e){var l=getComputedStyle(e);a.scrollbarColor=l.scrollbarColor,a.scrollbarWidth=l.scrollbarWidth;var u=getComputedStyle(e,"::-webkit-scrollbar"),c=parseInt(u.width,10),s=parseInt(u.height,10);try{var d=c?"width: ".concat(u.width,";"):"",f=s?"height: ".concat(u.height,";"):"";(0,o.BD)("\n#".concat(t,"::-webkit-scrollbar {\n").concat(d,"\n").concat(f,"\n}"),t)}catch(e){console.error(e),r=c,i=s}}document.body.appendChild(n);var h=e&&r&&!isNaN(r)?r:n.offsetWidth-n.clientWidth,p=e&&i&&!isNaN(i)?i:n.offsetHeight-n.clientHeight;return document.body.removeChild(n),(0,o.m6)(t),{width:h,height:p}}()),r.width)}},4695:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(4883);function o(e){var t=r.useRef();t.current=e;var n=r.useCallback((function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return null===(e=t.current)||void 0===e?void 0:e.call.apply(e,[t].concat(r))}),[]);return n}},2968:(e,t,n)=>{"use strict";n.d(t,{A:()=>l,o:()=>a});var r=n(4883),o=(0,n(9411).A)()?r.useLayoutEffect:r.useEffect,i=function(e,t){var n=r.useRef(!0);o((function(){return e(n.current)}),t),o((function(){return n.current=!1,function(){n.current=!0}}),[])},a=function(e,t){i((function(t){if(!t)return e()}),t)};const l=i},3085:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(4883);function o(e,t,n){var o=r.useRef({});return"value"in o.current&&!n(o.current.condition,t)||(o.current.value=e(),o.current.condition=t),o.current.value}},9046:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(7510),o=n(4695),i=n(2968),a=n(2022);function l(e){return void 0!==e}function u(e,t){var n=t||{},u=n.defaultValue,c=n.value,s=n.onChange,d=n.postState,f=(0,a.A)((function(){return l(c)?c:l(u)?"function"==typeof u?u():u:"function"==typeof e?e():e})),h=(0,r.A)(f,2),p=h[0],v=h[1],m=void 0!==c?c:p,g=d?d(m):m,b=(0,o.A)(s),y=(0,a.A)([m]),w=(0,r.A)(y,2),A=w[0],k=w[1];return(0,i.o)((function(){var e=A[0];p!==e&&b(p,e)}),[A]),(0,i.o)((function(){l(c)||v(c)}),[c]),[g,(0,o.A)((function(e,t){v(e,t),k([m],t)}))]}},2022:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(7510),o=n(4883);function i(e){var t=o.useRef(!1),n=o.useState(e),i=(0,r.A)(n,2),a=i[0],l=i[1];return o.useEffect((function(){return t.current=!1,function(){t.current=!0}}),[]),[a,function(e,n){n&&t.current||l(e)}]}},6491:(e,t,n)=>{"use strict";n.d(t,{_q:()=>r.A});var r=n(4695);n(9046),n(9438),n(9225),n(8227)},4382:(e,t,n)=>{"use strict";function r(e,t){var n=Object.assign({},e);return Array.isArray(t)&&t.forEach((function(e){delete n[e]})),n}n.d(t,{A:()=>r})},7114:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=function(e){return+setTimeout(e,16)},o=function(e){return clearTimeout(e)};"undefined"!=typeof window&&"requestAnimationFrame"in window&&(r=function(e){return window.requestAnimationFrame(e)},o=function(e){return window.cancelAnimationFrame(e)});var i=0,a=new Map;function l(e){a.delete(e)}var u=function(e){var t=i+=1;return function n(o){if(0===o)l(t),e();else{var i=r((function(){n(o-1)}));a.set(t,i)}}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),t};u.cancel=function(e){var t=a.get(e);return l(e),o(t)};const c=u},9438:(e,t,n)=>{"use strict";n.d(t,{K4:()=>u,Xf:()=>l,f3:()=>s,xK:()=>c});var r=n(7786),o=n(4883),i=n(3631),a=n(3085),l=function(e,t){"function"==typeof e?e(t):"object"===(0,r.A)(e)&&e&&"current"in e&&(e.current=t)},u=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter(Boolean);return r.length<=1?r[0]:function(e){t.forEach((function(t){l(t,e)}))}},c=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.A)((function(){return u.apply(void 0,t)}),t,(function(e,t){return e.length!==t.length||e.every((function(e,n){return e!==t[n]}))}))},s=function(e){var t,n,r=(0,i.isMemo)(e)?e.type.type:e.type;return!!("function"!=typeof r||null!==(t=r.prototype)&&void 0!==t&&t.render||r.$$typeof===i.ForwardRef)&&!!("function"!=typeof e||null!==(n=e.prototype)&&void 0!==n&&n.render||e.$$typeof===i.ForwardRef)};Number(o.version.split(".")[0])},4045:(e,t,n)=>{"use strict";function r(e,t){for(var n=e,r=0;r<t.length;r+=1){if(null==n)return;n=n[t[r]]}return n}n.d(t,{A:()=>r})},9225:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(6001),o=n(4522),i=n(7413),a=n(4045);function l(e,t,n,a){if(!t.length)return n;var u,c=(0,i.A)(t),s=c[0],d=c.slice(1);return u=e||"number"!=typeof s?Array.isArray(e)?(0,o.A)(e):(0,r.A)({},e):[],a&&void 0===n&&1===d.length?delete u[s][d[0]]:u[s]=l(u[s],d,n,a),u}function u(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t.length&&r&&void 0===n&&!(0,a.A)(e,t.slice(0,-1))?e:l(e,t,n,r)}"undefined"==typeof Reflect?Object.keys:Reflect.ownKeys},8227:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>s,g9:()=>c});var r={},o=[];function i(e,t){}function a(e,t){}function l(e,t,n){t||r[n]||(e(!1,n),r[n]=!0)}function u(e,t){l(i,e,t)}function c(e,t){l(a,e,t)}u.preMessage=function(e){o.push(e)},u.resetWarned=function(){r={}},u.noteOnce=c;const s=u},8354:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}},2540:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}},5901:(e,t,n)=>{"use strict";var r=n(1012).default;Object.defineProperty(t,"__esModule",{value:!0}),t.clearContainerCache=function(){s.clear()},t.injectCSS=p,t.removeCSS=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=v(e,t);n&&f(t).removeChild(n)},t.updateCSS=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=f(n),i=h(r),l=(0,o.default)((0,o.default)({},n),{},{styles:i});!function(e,t){var n=s.get(e);if(!n||!(0,a.default)(document,n)){var r=p("",t),o=r.parentNode;s.set(e,o),e.removeChild(r)}}(r,l);var u,c,m,g=v(t,l);if(g)return null!==(u=l.csp)&&void 0!==u&&u.nonce&&g.nonce!==(null===(c=l.csp)||void 0===c?void 0:c.nonce)&&(g.nonce=null===(m=l.csp)||void 0===m?void 0:m.nonce),g.innerHTML!==e&&(g.innerHTML=e),g;var b=p(e,l);return b.setAttribute(d(l),t),b};var o=r(n(2335)),i=r(n(8354)),a=r(n(2540)),l="data-rc-order",u="data-rc-priority",c="rc-util-key",s=new Map;function d(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).mark;return e?e.startsWith("data-")?e:"data-".concat(e):c}function f(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function h(e){return Array.from((s.get(e)||e).children).filter((function(e){return"STYLE"===e.tagName}))}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,i.default)())return null;var n=t.csp,r=t.prepend,o=t.priority,a=void 0===o?0:o,c=function(e){return"queue"===e?"prependQueue":e?"prepend":"append"}(r),s="prependQueue"===c,d=document.createElement("style");d.setAttribute(l,c),s&&a&&d.setAttribute(u,"".concat(a)),null!=n&&n.nonce&&(d.nonce=null==n?void 0:n.nonce),d.innerHTML=e;var p=f(t),v=p.firstChild;if(r){if(s){var m=(t.styles||h(p)).filter((function(e){if(!["prepend","prependQueue"].includes(e.getAttribute(l)))return!1;var t=Number(e.getAttribute(u)||0);return a>=t}));if(m.length)return p.insertBefore(d,m[m.length-1].nextSibling),d}p.insertBefore(d,v)}else p.appendChild(d);return d}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=f(t);return(t.styles||h(n)).find((function(n){return n.getAttribute(d(t))===e}))}},4311:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"undefined"==typeof document?0:((e||void 0===r)&&(r=i()),r.width)},t.getTargetScrollBarSize=function(e){return"undefined"!=typeof document&&e&&e instanceof Element?i(e):{width:0,height:0}};var r,o=n(5901);function i(e){var t="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),n=document.createElement("div");n.id=t;var r,i,a=n.style;if(a.position="absolute",a.left="0",a.top="0",a.width="100px",a.height="100px",a.overflow="scroll",e){var l=getComputedStyle(e);a.scrollbarColor=l.scrollbarColor,a.scrollbarWidth=l.scrollbarWidth;var u=getComputedStyle(e,"::-webkit-scrollbar"),c=parseInt(u.width,10),s=parseInt(u.height,10);try{var d=c?"width: ".concat(u.width,";"):"",f=s?"height: ".concat(u.height,";"):"";(0,o.updateCSS)("\n#".concat(t,"::-webkit-scrollbar {\n").concat(d,"\n").concat(f,"\n}"),t)}catch(e){console.error(e),r=c,i=s}}document.body.appendChild(n);var h=e&&r&&!isNaN(r)?r:n.offsetWidth-n.clientWidth,p=e&&i&&!isNaN(i)?i:n.offsetHeight-n.clientHeight;return document.body.removeChild(n),(0,o.removeCSS)(t),{width:h,height:p}}},9932:(e,t,n)=>{"use strict";var r=n(5743).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=o.useRef({});return"value"in r.current&&!n(r.current.condition,t)||(r.current.value=e(),r.current.condition=t),r.current.value};var o=r(n(4883))},9070:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.call=u,t.default=void 0,t.note=a,t.noteOnce=s,t.preMessage=void 0,t.resetWarned=l,t.warning=i,t.warningOnce=c;var n={},r=[],o=t.preMessage=function(e){r.push(e)};function i(e,t){}function a(e,t){}function l(){n={}}function u(e,t,r){t||n[r]||(e(!1,r),n[r]=!0)}function c(e,t){u(i,e,t)}function s(e,t){u(a,e,t)}c.preMessage=o,c.resetWarned=l,c.noteOnce=s,t.default=c},619:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.server_context"),s=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy");Symbol.for("react.offscreen");function v(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case o:case a:case i:case d:case f:return e;default:switch(e=e&&e.$$typeof){case c:case u:case s:case p:case h:case l:return e;default:return t}}case r:return t}}}Symbol.for("react.module.reference"),t.ForwardRef=s,t.isFragment=function(e){return v(e)===o},t.isMemo=function(e){return v(e)===h}},3631:(e,t,n)=>{"use strict";e.exports=n(619)},543:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.autoprefix=void 0;var r,o=(r=n(4934))&&r.__esModule?r:{default:r},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a={borderRadius:function(e){return{msBorderRadius:e,MozBorderRadius:e,OBorderRadius:e,WebkitBorderRadius:e,borderRadius:e}},boxShadow:function(e){return{msBoxShadow:e,MozBoxShadow:e,OBoxShadow:e,WebkitBoxShadow:e,boxShadow:e}},userSelect:function(e){return{WebkitTouchCallout:e,KhtmlUserSelect:e,MozUserSelect:e,msUserSelect:e,WebkitUserSelect:e,userSelect:e}},flex:function(e){return{WebkitBoxFlex:e,MozBoxFlex:e,WebkitFlex:e,msFlex:e,flex:e}},flexBasis:function(e){return{WebkitFlexBasis:e,flexBasis:e}},justifyContent:function(e){return{WebkitJustifyContent:e,justifyContent:e}},transition:function(e){return{msTransition:e,MozTransition:e,OTransition:e,WebkitTransition:e,transition:e}},transform:function(e){return{msTransform:e,MozTransform:e,OTransform:e,WebkitTransform:e,transform:e}},absolute:function(e){var t=e&&e.split(" ");return{position:"absolute",top:t&&t[0],right:t&&t[1],bottom:t&&t[2],left:t&&t[3]}},extend:function(e,t){return t[e]||{extend:e}}},l=t.autoprefix=function(e){var t={};return(0,o.default)(e,(function(e,n){var r={};(0,o.default)(e,(function(e,t){var n=a[t];n?r=i({},r,n(e)):r[t]=e})),t[n]=r})),t};t.default=l},7577:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.active=void 0;var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=(r=n(4883))&&r.__esModule?r:{default:r};function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=t.active=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var n,l,u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var c=arguments.length,s=Array(c),d=0;d<c;d++)s[d]=arguments[d];return l=u=a(this,(n=r.__proto__||Object.getPrototypeOf(r)).call.apply(n,[this].concat(s))),u.state={active:!1},u.handleMouseDown=function(){return u.setState({active:!0})},u.handleMouseUp=function(){return u.setState({active:!1})},u.render=function(){return i.default.createElement(t,{onMouseDown:u.handleMouseDown,onMouseUp:u.handleMouseUp},i.default.createElement(e,o({},u.props,u.state)))},a(u,l)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),r}(i.default.Component)};t.default=l},897:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hover=void 0;var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=(r=n(4883))&&r.__esModule?r:{default:r};function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=t.hover=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var n,l,u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var c=arguments.length,s=Array(c),d=0;d<c;d++)s[d]=arguments[d];return l=u=a(this,(n=r.__proto__||Object.getPrototypeOf(r)).call.apply(n,[this].concat(s))),u.state={hover:!1},u.handleMouseOver=function(){return u.setState({hover:!0})},u.handleMouseOut=function(){return u.setState({hover:!1})},u.render=function(){return i.default.createElement(t,{onMouseOver:u.handleMouseOver,onMouseOut:u.handleMouseOut},i.default.createElement(e,o({},u.props,u.state)))},a(u,l)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),r}(i.default.Component)};t.default=l},7950:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenNames=void 0;var r=l(n(7222)),o=l(n(4934)),i=l(n(988)),a=l(n(9101));function l(e){return e&&e.__esModule?e:{default:e}}var u=t.flattenNames=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return(0,a.default)(t,(function(t){Array.isArray(t)?e(t).map((function(e){return n.push(e)})):(0,i.default)(t)?(0,o.default)(t,(function(e,t){!0===e&&n.push(t),n.push(t+"-"+e)})):(0,r.default)(t)&&n.push(t)})),n};t.default=u},4102:(e,t,n)=>{"use strict";t.H8=void 0;var r=c(n(7950)),o=c(n(1828)),i=c(n(543)),a=c(n(897)),l=c(n(7577)),u=c(n(7310));function c(e){return e&&e.__esModule?e:{default:e}}a.default,t.H8=a.default,l.default,u.default;t.Ay=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var l=(0,r.default)(n),u=(0,o.default)(e,l);return(0,i.default)(u)}},7310:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n={},r=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n[e]=t};return 0===e&&r("first-child"),e===t-1&&r("last-child"),(0===e||e%2==0)&&r("even"),1===Math.abs(e%2)&&r("odd"),r("nth-child",e),n}},1828:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeClasses=void 0;var r=a(n(4934)),o=a(n(2160)),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function a(e){return e&&e.__esModule?e:{default:e}}var l=t.mergeClasses=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.default&&(0,o.default)(e.default)||{};return t.map((function(t){var o=e[t];return o&&(0,r.default)(o,(function(e,t){n[t]||(n[t]={}),n[t]=i({},n[t],o[t])})),t})),n};t.default=l},7842:e=>{e.exports=function(e,t,n,r){var o=n?n.call(r,e,t):void 0;if(void 0!==o)return!!o;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(t),u=0;u<i.length;u++){var c=i[u];if(!l(c))return!1;var s=e[c],d=t[c];if(!1===(o=n?n.call(r,s,d,c):void 0)||void 0===o&&s!==d)return!1}return!0}},4591:e=>{e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},7416:(e,t,n)=>{var r=n(285).FilterCSS,o=n(285).getDefaultWhiteList,i=n(8269);var a=new r;function l(e){return e.replace(u,"&lt;").replace(c,"&gt;")}var u=/</g,c=/>/g,s=/"/g,d=/&quot;/g,f=/&#([a-zA-Z0-9]*);?/gim,h=/&colon;?/gim,p=/&newline;?/gim,v=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,m=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,g=/u\s*r\s*l\s*\(.*/gi;function b(e){return e.replace(s,"&quot;")}function y(e){return e.replace(d,'"')}function w(e){return e.replace(f,(function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))}))}function A(e){return e.replace(h,":").replace(p," ")}function k(e){for(var t="",n=0,r=e.length;n<r;n++)t+=e.charCodeAt(n)<32?" ":e.charAt(n);return i.trim(t)}function _(e){return k(e=A(e=w(e=y(e))))}function C(e){return l(e=b(e))}t.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height","loading"],ins:["datetime"],kbd:[],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},t.getDefaultWhiteList=function(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height","loading"],ins:["datetime"],kbd:[],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}},t.onTag=function(e,t,n){},t.onIgnoreTag=function(e,t,n){},t.onTagAttr=function(e,t,n){},t.onIgnoreTagAttr=function(e,t,n){},t.safeAttrValue=function(e,t,n,r){if(n=_(n),"href"===t||"src"===t){if("#"===(n=i.trim(n)))return"#";if("http://"!==n.substr(0,7)&&"https://"!==n.substr(0,8)&&"mailto:"!==n.substr(0,7)&&"tel:"!==n.substr(0,4)&&"data:image/"!==n.substr(0,11)&&"ftp://"!==n.substr(0,6)&&"./"!==n.substr(0,2)&&"../"!==n.substr(0,3)&&"#"!==n[0]&&"/"!==n[0])return""}else if("background"===t){if(v.lastIndex=0,v.test(n))return""}else if("style"===t){if(m.lastIndex=0,m.test(n))return"";if(g.lastIndex=0,g.test(n)&&(v.lastIndex=0,v.test(n)))return"";!1!==r&&(n=(r=r||a).process(n))}return C(n)},t.escapeHtml=l,t.escapeQuote=b,t.unescapeQuote=y,t.escapeHtmlEntities=w,t.escapeDangerHtml5Entities=A,t.clearNonPrintableCharacter=k,t.friendlyAttrValue=_,t.escapeAttrValue=C,t.onIgnoreTagStripAll=function(){return""},t.StripTagBody=function(e,t){"function"!=typeof t&&(t=function(){});var n=!Array.isArray(e),r=[],o=!1;return{onIgnoreTag:function(a,l,u){if(function(t){return!!n||-1!==i.indexOf(e,t)}(a)){if(u.isClosing){var c=u.position+10;return r.push([!1!==o?o:u.position,c]),o=!1,"[/removed]"}return o||(o=u.position),"[removed]"}return t(a,l,u)},remove:function(e){var t="",n=0;return i.forEach(r,(function(r){t+=e.slice(n,r[0]),n=r[1]})),t+=e.slice(n)}}},t.stripCommentTag=function(e){for(var t="",n=0;n<e.length;){var r=e.indexOf("\x3c!--",n);if(-1===r){t+=e.slice(n);break}t+=e.slice(n,r);var o=e.indexOf("--\x3e",r);if(-1===o)break;n=o+3}return t},t.stripBlankChar=function(e){var t=e.split("");return(t=t.filter((function(e){var t=e.charCodeAt(0);return!(127===t||t<=31&&10!==t&&13!==t)}))).join("")},t.attributeWrapSign='"',t.cssFilter=a,t.getDefaultCSSWhiteList=o},7309:(e,t,n)=>{var r=n(7416),o=n(8546),i=n(3439);function a(e,t){return new i(t).process(e)}(t=e.exports=a).filterXSS=a,t.FilterXSS=i,function(){for(var e in r)t[e]=r[e];for(var n in o)t[n]=o[n]}(),"undefined"!=typeof window&&(window.filterXSS=e.exports),"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)},8546:(e,t,n)=>{var r=n(8269);function o(e){var t,n=r.spaceIndex(e);return t=-1===n?e.slice(1,-1):e.slice(1,n+1),"/"===(t=r.trim(t).toLowerCase()).slice(0,1)&&(t=t.slice(1)),"/"===t.slice(-1)&&(t=t.slice(0,-1)),t}function i(e){return"</"===e.slice(0,2)}var a=/[^a-zA-Z0-9\\_:.-]/gim;function l(e,t){for(;t<e.length;t++){var n=e[t];if(" "!==n)return"="===n?t:-1}}function u(e,t){for(;t<e.length;t++){var n=e[t];if(" "!==n)return"'"===n||'"'===n?t:-1}}function c(e,t){for(;t>0;t--){var n=e[t];if(" "!==n)return"="===n?t:-1}}function s(e){return function(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}(e)?e.substr(1,e.length-2):e}t.parseTag=function(e,t,n){"use strict";var r="",a=0,l=!1,u=!1,c=0,s=e.length,d="",f="";e:for(c=0;c<s;c++){var h=e.charAt(c);if(!1===l){if("<"===h){l=c;continue}}else if(!1===u){if("<"===h){r+=n(e.slice(a,c)),l=c,a=c;continue}if(">"===h||c===s-1){r+=n(e.slice(a,l)),d=o(f=e.slice(l,c+1)),r+=t(l,r.length,d,f,i(f)),a=c+1,l=!1;continue}if('"'===h||"'"===h)for(var p=1,v=e.charAt(c-p);""===v.trim()||"="===v;){if("="===v){u=h;continue e}v=e.charAt(c-++p)}}else if(h===u){u=!1;continue}}return a<s&&(r+=n(e.substr(a))),r},t.parseAttr=function(e,t){"use strict";var n=0,o=0,i=[],d=!1,f=e.length;function h(e,n){if(!((e=(e=r.trim(e)).replace(a,"").toLowerCase()).length<1)){var o=t(e,n||"");o&&i.push(o)}}for(var p=0;p<f;p++){var v,m=e.charAt(p);if(!1!==d||"="!==m)if(!1===d||p!==o){if(/\s|\n|\t/.test(m)){if(e=e.replace(/\s|\n|\t/g," "),!1===d){if(-1===(v=l(e,p))){h(r.trim(e.slice(n,p))),d=!1,n=p+1;continue}p=v-1;continue}if(-1===(v=c(e,p-1))){h(d,s(r.trim(e.slice(n,p)))),d=!1,n=p+1;continue}}}else{if(-1===(v=e.indexOf(m,p+1)))break;h(d,r.trim(e.slice(o+1,v))),d=!1,n=(p=v)+1}else d=e.slice(n,p),n=p+1,o='"'===e.charAt(n)||"'"===e.charAt(n)?n:u(e,p+1)}return n<e.length&&(!1===d?h(e.slice(n)):h(d,s(r.trim(e.slice(n))))),r.trim(i.join(" "))}},8269:e=>{e.exports={indexOf:function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var r,o;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,o=e.length;r<o;r++)t.call(n,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1}}},3439:(e,t,n)=>{var r=n(285).FilterCSS,o=n(7416),i=n(8546),a=i.parseTag,l=i.parseAttr,u=n(8269);function c(e){return null==e}function s(e){(e=function(e){var t={};for(var n in e)t[n]=e[n];return t}(e||{})).stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=o.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=function(e){var t={};for(var n in e)Array.isArray(e[n])?t[n.toLowerCase()]=e[n].map((function(e){return e.toLowerCase()})):t[n.toLowerCase()]=e[n];return t}(e.whiteList||e.allowList):e.whiteList=o.whiteList,this.attributeWrapSign=!0===e.singleQuotedAttributeValue?"'":o.attributeWrapSign,e.onTag=e.onTag||o.onTag,e.onTagAttr=e.onTagAttr||o.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||o.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||o.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||o.safeAttrValue,e.escapeHtml=e.escapeHtml||o.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new r(e.css))}s.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this,n=t.options,r=n.whiteList,i=n.onTag,s=n.onIgnoreTag,d=n.onTagAttr,f=n.onIgnoreTagAttr,h=n.safeAttrValue,p=n.escapeHtml,v=t.attributeWrapSign,m=t.cssFilter;n.stripBlankChar&&(e=o.stripBlankChar(e)),n.allowCommentTag||(e=o.stripCommentTag(e));var g=!1;n.stripIgnoreTagBody&&(g=o.StripTagBody(n.stripIgnoreTagBody,s),s=g.onIgnoreTag);var b=a(e,(function(e,t,n,o,a){var g={sourcePosition:e,position:t,isClosing:a,isWhite:Object.prototype.hasOwnProperty.call(r,n)},b=i(n,o,g);if(!c(b))return b;if(g.isWhite){if(g.isClosing)return"</"+n+">";var y=function(e){var t=u.spaceIndex(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var n="/"===(e=u.trim(e.slice(t+1,-1)))[e.length-1];return n&&(e=u.trim(e.slice(0,-1))),{html:e,closing:n}}(o),w=r[n],A=l(y.html,(function(e,t){var r=-1!==u.indexOf(w,e),o=d(n,e,t,r);return c(o)?r?(t=h(n,e,t,m))?e+"="+v+t+v:e:c(o=f(n,e,t,r))?void 0:o:o}));return o="<"+n,A&&(o+=" "+A),y.closing&&(o+=" /"),o+">"}return c(b=s(n,o,g))?p(o):b}),p);return g&&(b=g.remove(b)),b},e.exports=s},1839:e=>{"use strict";e.exports=class{constructor(e){this.max=e,this.size=0,this.cache=new Map,this._cache=new Map}get(e,t){let n=this.cache.get(e);const r=t&&t.maxAge;let o;function i(){return o=o||Date.now(),o}if(n){if(n.expired&&i()>n.expired)n.expired=0,n.value=void 0;else if(void 0!==r){const e=r?i()+r:0;n.expired=e}return n.value}if(n=this._cache.get(e),n){if(n.expired&&i()>n.expired)n.expired=0,n.value=void 0;else if(this._update(e,n),void 0!==r){const e=r?i()+r:0;n.expired=e}return n.value}}set(e,t,n){const r=n&&n.maxAge,o=r?Date.now()+r:0;let i=this.cache.get(e);i?(i.expired=o,i.value=t):(i={value:t,expired:o},this._update(e,i))}keys(){const e=new Set,t=Date.now();for(const e of this.cache.entries())n(e);for(const e of this._cache.entries())n(e);function n(n){const r=n[0],o=n[1];(n[1].value&&!n[1].expired||o.expired>=t)&&e.add(r)}return Array.from(e.keys())}reset(){this.size=0,this.cache.clear(),this._cache.clear()}_update(e,t){this.cache.set(e,t),this.size++,this.size>=this.max&&(this.size=0,this._cache=this.cache,this.cache=new Map)}}},4883:t=>{"use strict";t.exports=e},1845:e=>{"use strict";e.exports=t},1733:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},6501:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},8391:(e,t,n)=>{var r=n(1733);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},2509:e=>{e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},1009:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},6153:(e,t,n)=>{var r=n(5622);function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,r(o.key),o)}}e.exports=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},3006:(e,t,n)=>{var r=n(7230),o=n(140),i=n(3778);e.exports=function(e){var t=o();return function(){var n,o=r(e);if(t){var a=r(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return i(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports},9599:(e,t,n)=>{var r=n(5622);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},1316:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},7230:e=>{function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},9489:(e,t,n)=>{var r=n(6210);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},1012:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},5743:(e,t,n)=>{var r=n(1048).default;function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}e.exports=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var u=a?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(i,l,u):i[l]=e[l]}return i.default=e,n&&n.set(e,i),i},e.exports.__esModule=!0,e.exports.default=e.exports},140:e=>{function t(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(n){}return(e.exports=t=function(){return!!n},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},2265:e=>{e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},9870:e=>{e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}},e.exports.__esModule=!0,e.exports.default=e.exports},2430:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},4755:e=>{e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},2335:(e,t,n)=>{var r=n(9599);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},9297:(e,t,n)=>{var r=n(6327);e.exports=function(e,t){if(null==e)return{};var n,o,i=r(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i},e.exports.__esModule=!0,e.exports.default=e.exports},6327:e=>{e.exports=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n},e.exports.__esModule=!0,e.exports.default=e.exports},3778:(e,t,n)=>{var r=n(1048).default,o=n(2509);e.exports=function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return o(e)},e.exports.__esModule=!0,e.exports.default=e.exports},6783:(e,t,n)=>{var r=n(1048).default;function o(){"use strict";e.exports=o=function(){return n},e.exports.__esModule=!0,e.exports.default=e.exports;var t,n={},i=Object.prototype,a=i.hasOwnProperty,l=Object.defineProperty||function(e,t,n){e[t]=n.value},u="function"==typeof Symbol?Symbol:{},c=u.iterator||"@@iterator",s=u.asyncIterator||"@@asyncIterator",d=u.toStringTag||"@@toStringTag";function f(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(t){f=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),a=new T(r||[]);return l(i,"_invoke",{value:D(e,n,a)}),i}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=h;var v="suspendedStart",m="suspendedYield",g="executing",b="completed",y={};function w(){}function A(){}function k(){}var _={};f(_,c,(function(){return this}));var C=Object.getPrototypeOf,N=C&&C(C(j([])));N&&N!==i&&a.call(N,c)&&(_=N);var O=k.prototype=w.prototype=Object.create(_);function x(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(o,i,l,u){var c=p(e[o],e,i);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==r(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,l,u)}),(function(e){n("throw",e,l,u)})):t.resolve(d).then((function(e){s.value=e,l(s)}),(function(e){return n("throw",e,l,u)}))}u(c.arg)}var o;l(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}})}function D(e,n,r){var o=v;return function(i,a){if(o===g)throw Error("Generator is already running");if(o===b){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var l=r.delegate;if(l){var u=P(l,r);if(u){if(u===y)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===v)throw o=b,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=g;var c=p(e,n,r);if("normal"===c.type){if(o=r.done?b:m,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=b,r.method="throw",r.arg=c.arg)}}}function P(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,P(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=p(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function j(e){if(e||""===e){var n=e[c];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(a.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(r(e)+" is not iterable")}return A.prototype=k,l(O,"constructor",{value:k,configurable:!0}),l(k,"constructor",{value:A,configurable:!0}),A.displayName=f(k,d,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===A||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,k):(e.__proto__=k,f(e,d,"GeneratorFunction")),e.prototype=Object.create(O),e},n.awrap=function(e){return{__await:e}},x(E.prototype),f(E.prototype,s,(function(){return this})),n.AsyncIterator=E,n.async=function(e,t,r,o,i){void 0===i&&(i=Promise);var a=new E(h(e,t,r,o),i);return n.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(O),f(O,d,"Generator"),f(O,c,(function(){return this})),f(O,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=j,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,o){return l.type="throw",l.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=a.call(i,"catchLoc"),c=a.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:j(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},n}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},6210:e=>{function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},313:(e,t,n)=>{var r=n(6501),o=n(9870),i=n(44),a=n(2430);e.exports=function(e,t){return r(e)||o(e,t)||i(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},9174:(e,t,n)=>{var r=n(8391),o=n(2265),i=n(44),a=n(4755);e.exports=function(e){return r(e)||o(e)||i(e)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},1643:(e,t,n)=>{var r=n(1048).default;e.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},5622:(e,t,n)=>{var r=n(1048).default,o=n(1643);e.exports=function(e){var t=o(e,"string");return"symbol"==r(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},1048:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},44:(e,t,n)=>{var r=n(1733);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},6450:(e,t,n)=>{var r=n(6783)();e.exports=r;try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},5399:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=a(e,i(n)))}return e}function i(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return o.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=a(t,n));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},4143:(e,t,n)=>{"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{A:()=>r})},9851:(e,t,n)=>{"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{A:()=>r})},7211:(e,t,n)=>{"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{A:()=>r})},957:(e,t,n)=>{"use strict";function r(e,t,n,r,o,i,a){try{var l=e[i](a),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function l(e){r(a,o,i,l,u,"next",e)}function u(e){r(a,o,i,l,u,"throw",e)}l(void 0)}))}}n.d(t,{A:()=>o})},8599:(e,t,n)=>{"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{A:()=>r})},3075:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(7654);function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(0,r.A)(o.key),o)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}},8636:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(2720),o=n(1806),i=n(1444);function a(e){var t=(0,o.A)();return function(){var n,o=(0,r.A)(e);if(t){var a=(0,r.A)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return(0,i.A)(this,n)}}},7373:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(7654);function o(e,t,n){return(t=(0,r.A)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},3082:(e,t,n)=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(null,arguments)}n.d(t,{A:()=>r})},2720:(e,t,n)=>{"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}n.d(t,{A:()=>r})},9239:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(8596);function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,r.A)(e,t)}},1806:(e,t,n)=>{"use strict";function r(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(r=function(){return!!e})()}n.d(t,{A:()=>r})},1611:(e,t,n)=>{"use strict";function r(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{A:()=>r})},6984:(e,t,n)=>{"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{A:()=>r})},6001:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(7373);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},4632:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}n.d(t,{A:()=>r})},1444:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(7786),o=n(7211);function i(e,t){if(t&&("object"==(0,r.A)(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,o.A)(e)}},8596:(e,t,n)=>{"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{A:()=>r})},7510:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(9851),o=n(8194),i=n(6984);function a(e,t){return(0,r.A)(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||(0,o.A)(e,t)||(0,i.A)()}},7413:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(9851),o=n(1611),i=n(8194),a=n(6984);function l(e){return(0,r.A)(e)||(0,o.A)(e)||(0,i.A)(e)||(0,a.A)()}},4522:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(4143),o=n(1611),i=n(8194);function a(e){return function(e){if(Array.isArray(e))return(0,r.A)(e)}(e)||(0,o.A)(e)||(0,i.A)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},7654:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(7786);function o(e){var t=function(e,t){if("object"!=(0,r.A)(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=(0,r.A)(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==(0,r.A)(t)?t:t+""}},7786:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{A:()=>r})},8194:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(4143);function o(e,t){if(e){if("string"==typeof e)return(0,r.A)(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.A)(e,t):void 0}}},9749:e=>{"use strict";e.exports=JSON.parse('{"0":65533,"128":8364,"130":8218,"131":402,"132":8222,"133":8230,"134":8224,"135":8225,"136":710,"137":8240,"138":352,"139":8249,"140":338,"142":381,"145":8216,"146":8217,"147":8220,"148":8221,"149":8226,"150":8211,"151":8212,"152":732,"153":8482,"154":353,"155":8250,"156":339,"158":382,"159":376}')},620:e=>{"use strict";e.exports=JSON.parse('{"Aacute":"Á","aacute":"á","Abreve":"Ă","abreve":"ă","ac":"∾","acd":"∿","acE":"∾̳","Acirc":"Â","acirc":"â","acute":"´","Acy":"А","acy":"а","AElig":"Æ","aelig":"æ","af":"⁡","Afr":"𝔄","afr":"𝔞","Agrave":"À","agrave":"à","alefsym":"ℵ","aleph":"ℵ","Alpha":"Α","alpha":"α","Amacr":"Ā","amacr":"ā","amalg":"⨿","amp":"&","AMP":"&","andand":"⩕","And":"⩓","and":"∧","andd":"⩜","andslope":"⩘","andv":"⩚","ang":"∠","ange":"⦤","angle":"∠","angmsdaa":"⦨","angmsdab":"⦩","angmsdac":"⦪","angmsdad":"⦫","angmsdae":"⦬","angmsdaf":"⦭","angmsdag":"⦮","angmsdah":"⦯","angmsd":"∡","angrt":"∟","angrtvb":"⊾","angrtvbd":"⦝","angsph":"∢","angst":"Å","angzarr":"⍼","Aogon":"Ą","aogon":"ą","Aopf":"𝔸","aopf":"𝕒","apacir":"⩯","ap":"≈","apE":"⩰","ape":"≊","apid":"≋","apos":"\'","ApplyFunction":"⁡","approx":"≈","approxeq":"≊","Aring":"Å","aring":"å","Ascr":"𝒜","ascr":"𝒶","Assign":"≔","ast":"*","asymp":"≈","asympeq":"≍","Atilde":"Ã","atilde":"ã","Auml":"Ä","auml":"ä","awconint":"∳","awint":"⨑","backcong":"≌","backepsilon":"϶","backprime":"‵","backsim":"∽","backsimeq":"⋍","Backslash":"∖","Barv":"⫧","barvee":"⊽","barwed":"⌅","Barwed":"⌆","barwedge":"⌅","bbrk":"⎵","bbrktbrk":"⎶","bcong":"≌","Bcy":"Б","bcy":"б","bdquo":"„","becaus":"∵","because":"∵","Because":"∵","bemptyv":"⦰","bepsi":"϶","bernou":"ℬ","Bernoullis":"ℬ","Beta":"Β","beta":"β","beth":"ℶ","between":"≬","Bfr":"𝔅","bfr":"𝔟","bigcap":"⋂","bigcirc":"◯","bigcup":"⋃","bigodot":"⨀","bigoplus":"⨁","bigotimes":"⨂","bigsqcup":"⨆","bigstar":"★","bigtriangledown":"▽","bigtriangleup":"△","biguplus":"⨄","bigvee":"⋁","bigwedge":"⋀","bkarow":"⤍","blacklozenge":"⧫","blacksquare":"▪","blacktriangle":"▴","blacktriangledown":"▾","blacktriangleleft":"◂","blacktriangleright":"▸","blank":"␣","blk12":"▒","blk14":"░","blk34":"▓","block":"█","bne":"=⃥","bnequiv":"≡⃥","bNot":"⫭","bnot":"⌐","Bopf":"𝔹","bopf":"𝕓","bot":"⊥","bottom":"⊥","bowtie":"⋈","boxbox":"⧉","boxdl":"┐","boxdL":"╕","boxDl":"╖","boxDL":"╗","boxdr":"┌","boxdR":"╒","boxDr":"╓","boxDR":"╔","boxh":"─","boxH":"═","boxhd":"┬","boxHd":"╤","boxhD":"╥","boxHD":"╦","boxhu":"┴","boxHu":"╧","boxhU":"╨","boxHU":"╩","boxminus":"⊟","boxplus":"⊞","boxtimes":"⊠","boxul":"┘","boxuL":"╛","boxUl":"╜","boxUL":"╝","boxur":"└","boxuR":"╘","boxUr":"╙","boxUR":"╚","boxv":"│","boxV":"║","boxvh":"┼","boxvH":"╪","boxVh":"╫","boxVH":"╬","boxvl":"┤","boxvL":"╡","boxVl":"╢","boxVL":"╣","boxvr":"├","boxvR":"╞","boxVr":"╟","boxVR":"╠","bprime":"‵","breve":"˘","Breve":"˘","brvbar":"¦","bscr":"𝒷","Bscr":"ℬ","bsemi":"⁏","bsim":"∽","bsime":"⋍","bsolb":"⧅","bsol":"\\\\","bsolhsub":"⟈","bull":"•","bullet":"•","bump":"≎","bumpE":"⪮","bumpe":"≏","Bumpeq":"≎","bumpeq":"≏","Cacute":"Ć","cacute":"ć","capand":"⩄","capbrcup":"⩉","capcap":"⩋","cap":"∩","Cap":"⋒","capcup":"⩇","capdot":"⩀","CapitalDifferentialD":"ⅅ","caps":"∩︀","caret":"⁁","caron":"ˇ","Cayleys":"ℭ","ccaps":"⩍","Ccaron":"Č","ccaron":"č","Ccedil":"Ç","ccedil":"ç","Ccirc":"Ĉ","ccirc":"ĉ","Cconint":"∰","ccups":"⩌","ccupssm":"⩐","Cdot":"Ċ","cdot":"ċ","cedil":"¸","Cedilla":"¸","cemptyv":"⦲","cent":"¢","centerdot":"·","CenterDot":"·","cfr":"𝔠","Cfr":"ℭ","CHcy":"Ч","chcy":"ч","check":"✓","checkmark":"✓","Chi":"Χ","chi":"χ","circ":"ˆ","circeq":"≗","circlearrowleft":"↺","circlearrowright":"↻","circledast":"⊛","circledcirc":"⊚","circleddash":"⊝","CircleDot":"⊙","circledR":"®","circledS":"Ⓢ","CircleMinus":"⊖","CirclePlus":"⊕","CircleTimes":"⊗","cir":"○","cirE":"⧃","cire":"≗","cirfnint":"⨐","cirmid":"⫯","cirscir":"⧂","ClockwiseContourIntegral":"∲","CloseCurlyDoubleQuote":"”","CloseCurlyQuote":"’","clubs":"♣","clubsuit":"♣","colon":":","Colon":"∷","Colone":"⩴","colone":"≔","coloneq":"≔","comma":",","commat":"@","comp":"∁","compfn":"∘","complement":"∁","complexes":"ℂ","cong":"≅","congdot":"⩭","Congruent":"≡","conint":"∮","Conint":"∯","ContourIntegral":"∮","copf":"𝕔","Copf":"ℂ","coprod":"∐","Coproduct":"∐","copy":"©","COPY":"©","copysr":"℗","CounterClockwiseContourIntegral":"∳","crarr":"↵","cross":"✗","Cross":"⨯","Cscr":"𝒞","cscr":"𝒸","csub":"⫏","csube":"⫑","csup":"⫐","csupe":"⫒","ctdot":"⋯","cudarrl":"⤸","cudarrr":"⤵","cuepr":"⋞","cuesc":"⋟","cularr":"↶","cularrp":"⤽","cupbrcap":"⩈","cupcap":"⩆","CupCap":"≍","cup":"∪","Cup":"⋓","cupcup":"⩊","cupdot":"⊍","cupor":"⩅","cups":"∪︀","curarr":"↷","curarrm":"⤼","curlyeqprec":"⋞","curlyeqsucc":"⋟","curlyvee":"⋎","curlywedge":"⋏","curren":"¤","curvearrowleft":"↶","curvearrowright":"↷","cuvee":"⋎","cuwed":"⋏","cwconint":"∲","cwint":"∱","cylcty":"⌭","dagger":"†","Dagger":"‡","daleth":"ℸ","darr":"↓","Darr":"↡","dArr":"⇓","dash":"‐","Dashv":"⫤","dashv":"⊣","dbkarow":"⤏","dblac":"˝","Dcaron":"Ď","dcaron":"ď","Dcy":"Д","dcy":"д","ddagger":"‡","ddarr":"⇊","DD":"ⅅ","dd":"ⅆ","DDotrahd":"⤑","ddotseq":"⩷","deg":"°","Del":"∇","Delta":"Δ","delta":"δ","demptyv":"⦱","dfisht":"⥿","Dfr":"𝔇","dfr":"𝔡","dHar":"⥥","dharl":"⇃","dharr":"⇂","DiacriticalAcute":"´","DiacriticalDot":"˙","DiacriticalDoubleAcute":"˝","DiacriticalGrave":"`","DiacriticalTilde":"˜","diam":"⋄","diamond":"⋄","Diamond":"⋄","diamondsuit":"♦","diams":"♦","die":"¨","DifferentialD":"ⅆ","digamma":"ϝ","disin":"⋲","div":"÷","divide":"÷","divideontimes":"⋇","divonx":"⋇","DJcy":"Ђ","djcy":"ђ","dlcorn":"⌞","dlcrop":"⌍","dollar":"$","Dopf":"𝔻","dopf":"𝕕","Dot":"¨","dot":"˙","DotDot":"⃜","doteq":"≐","doteqdot":"≑","DotEqual":"≐","dotminus":"∸","dotplus":"∔","dotsquare":"⊡","doublebarwedge":"⌆","DoubleContourIntegral":"∯","DoubleDot":"¨","DoubleDownArrow":"⇓","DoubleLeftArrow":"⇐","DoubleLeftRightArrow":"⇔","DoubleLeftTee":"⫤","DoubleLongLeftArrow":"⟸","DoubleLongLeftRightArrow":"⟺","DoubleLongRightArrow":"⟹","DoubleRightArrow":"⇒","DoubleRightTee":"⊨","DoubleUpArrow":"⇑","DoubleUpDownArrow":"⇕","DoubleVerticalBar":"∥","DownArrowBar":"⤓","downarrow":"↓","DownArrow":"↓","Downarrow":"⇓","DownArrowUpArrow":"⇵","DownBreve":"̑","downdownarrows":"⇊","downharpoonleft":"⇃","downharpoonright":"⇂","DownLeftRightVector":"⥐","DownLeftTeeVector":"⥞","DownLeftVectorBar":"⥖","DownLeftVector":"↽","DownRightTeeVector":"⥟","DownRightVectorBar":"⥗","DownRightVector":"⇁","DownTeeArrow":"↧","DownTee":"⊤","drbkarow":"⤐","drcorn":"⌟","drcrop":"⌌","Dscr":"𝒟","dscr":"𝒹","DScy":"Ѕ","dscy":"ѕ","dsol":"⧶","Dstrok":"Đ","dstrok":"đ","dtdot":"⋱","dtri":"▿","dtrif":"▾","duarr":"⇵","duhar":"⥯","dwangle":"⦦","DZcy":"Џ","dzcy":"џ","dzigrarr":"⟿","Eacute":"É","eacute":"é","easter":"⩮","Ecaron":"Ě","ecaron":"ě","Ecirc":"Ê","ecirc":"ê","ecir":"≖","ecolon":"≕","Ecy":"Э","ecy":"э","eDDot":"⩷","Edot":"Ė","edot":"ė","eDot":"≑","ee":"ⅇ","efDot":"≒","Efr":"𝔈","efr":"𝔢","eg":"⪚","Egrave":"È","egrave":"è","egs":"⪖","egsdot":"⪘","el":"⪙","Element":"∈","elinters":"⏧","ell":"ℓ","els":"⪕","elsdot":"⪗","Emacr":"Ē","emacr":"ē","empty":"∅","emptyset":"∅","EmptySmallSquare":"◻","emptyv":"∅","EmptyVerySmallSquare":"▫","emsp13":" ","emsp14":" ","emsp":" ","ENG":"Ŋ","eng":"ŋ","ensp":" ","Eogon":"Ę","eogon":"ę","Eopf":"𝔼","eopf":"𝕖","epar":"⋕","eparsl":"⧣","eplus":"⩱","epsi":"ε","Epsilon":"Ε","epsilon":"ε","epsiv":"ϵ","eqcirc":"≖","eqcolon":"≕","eqsim":"≂","eqslantgtr":"⪖","eqslantless":"⪕","Equal":"⩵","equals":"=","EqualTilde":"≂","equest":"≟","Equilibrium":"⇌","equiv":"≡","equivDD":"⩸","eqvparsl":"⧥","erarr":"⥱","erDot":"≓","escr":"ℯ","Escr":"ℰ","esdot":"≐","Esim":"⩳","esim":"≂","Eta":"Η","eta":"η","ETH":"Ð","eth":"ð","Euml":"Ë","euml":"ë","euro":"€","excl":"!","exist":"∃","Exists":"∃","expectation":"ℰ","exponentiale":"ⅇ","ExponentialE":"ⅇ","fallingdotseq":"≒","Fcy":"Ф","fcy":"ф","female":"♀","ffilig":"ﬃ","fflig":"ﬀ","ffllig":"ﬄ","Ffr":"𝔉","ffr":"𝔣","filig":"ﬁ","FilledSmallSquare":"◼","FilledVerySmallSquare":"▪","fjlig":"fj","flat":"♭","fllig":"ﬂ","fltns":"▱","fnof":"ƒ","Fopf":"𝔽","fopf":"𝕗","forall":"∀","ForAll":"∀","fork":"⋔","forkv":"⫙","Fouriertrf":"ℱ","fpartint":"⨍","frac12":"½","frac13":"⅓","frac14":"¼","frac15":"⅕","frac16":"⅙","frac18":"⅛","frac23":"⅔","frac25":"⅖","frac34":"¾","frac35":"⅗","frac38":"⅜","frac45":"⅘","frac56":"⅚","frac58":"⅝","frac78":"⅞","frasl":"⁄","frown":"⌢","fscr":"𝒻","Fscr":"ℱ","gacute":"ǵ","Gamma":"Γ","gamma":"γ","Gammad":"Ϝ","gammad":"ϝ","gap":"⪆","Gbreve":"Ğ","gbreve":"ğ","Gcedil":"Ģ","Gcirc":"Ĝ","gcirc":"ĝ","Gcy":"Г","gcy":"г","Gdot":"Ġ","gdot":"ġ","ge":"≥","gE":"≧","gEl":"⪌","gel":"⋛","geq":"≥","geqq":"≧","geqslant":"⩾","gescc":"⪩","ges":"⩾","gesdot":"⪀","gesdoto":"⪂","gesdotol":"⪄","gesl":"⋛︀","gesles":"⪔","Gfr":"𝔊","gfr":"𝔤","gg":"≫","Gg":"⋙","ggg":"⋙","gimel":"ℷ","GJcy":"Ѓ","gjcy":"ѓ","gla":"⪥","gl":"≷","glE":"⪒","glj":"⪤","gnap":"⪊","gnapprox":"⪊","gne":"⪈","gnE":"≩","gneq":"⪈","gneqq":"≩","gnsim":"⋧","Gopf":"𝔾","gopf":"𝕘","grave":"`","GreaterEqual":"≥","GreaterEqualLess":"⋛","GreaterFullEqual":"≧","GreaterGreater":"⪢","GreaterLess":"≷","GreaterSlantEqual":"⩾","GreaterTilde":"≳","Gscr":"𝒢","gscr":"ℊ","gsim":"≳","gsime":"⪎","gsiml":"⪐","gtcc":"⪧","gtcir":"⩺","gt":">","GT":">","Gt":"≫","gtdot":"⋗","gtlPar":"⦕","gtquest":"⩼","gtrapprox":"⪆","gtrarr":"⥸","gtrdot":"⋗","gtreqless":"⋛","gtreqqless":"⪌","gtrless":"≷","gtrsim":"≳","gvertneqq":"≩︀","gvnE":"≩︀","Hacek":"ˇ","hairsp":" ","half":"½","hamilt":"ℋ","HARDcy":"Ъ","hardcy":"ъ","harrcir":"⥈","harr":"↔","hArr":"⇔","harrw":"↭","Hat":"^","hbar":"ℏ","Hcirc":"Ĥ","hcirc":"ĥ","hearts":"♥","heartsuit":"♥","hellip":"…","hercon":"⊹","hfr":"𝔥","Hfr":"ℌ","HilbertSpace":"ℋ","hksearow":"⤥","hkswarow":"⤦","hoarr":"⇿","homtht":"∻","hookleftarrow":"↩","hookrightarrow":"↪","hopf":"𝕙","Hopf":"ℍ","horbar":"―","HorizontalLine":"─","hscr":"𝒽","Hscr":"ℋ","hslash":"ℏ","Hstrok":"Ħ","hstrok":"ħ","HumpDownHump":"≎","HumpEqual":"≏","hybull":"⁃","hyphen":"‐","Iacute":"Í","iacute":"í","ic":"⁣","Icirc":"Î","icirc":"î","Icy":"И","icy":"и","Idot":"İ","IEcy":"Е","iecy":"е","iexcl":"¡","iff":"⇔","ifr":"𝔦","Ifr":"ℑ","Igrave":"Ì","igrave":"ì","ii":"ⅈ","iiiint":"⨌","iiint":"∭","iinfin":"⧜","iiota":"℩","IJlig":"Ĳ","ijlig":"ĳ","Imacr":"Ī","imacr":"ī","image":"ℑ","ImaginaryI":"ⅈ","imagline":"ℐ","imagpart":"ℑ","imath":"ı","Im":"ℑ","imof":"⊷","imped":"Ƶ","Implies":"⇒","incare":"℅","in":"∈","infin":"∞","infintie":"⧝","inodot":"ı","intcal":"⊺","int":"∫","Int":"∬","integers":"ℤ","Integral":"∫","intercal":"⊺","Intersection":"⋂","intlarhk":"⨗","intprod":"⨼","InvisibleComma":"⁣","InvisibleTimes":"⁢","IOcy":"Ё","iocy":"ё","Iogon":"Į","iogon":"į","Iopf":"𝕀","iopf":"𝕚","Iota":"Ι","iota":"ι","iprod":"⨼","iquest":"¿","iscr":"𝒾","Iscr":"ℐ","isin":"∈","isindot":"⋵","isinE":"⋹","isins":"⋴","isinsv":"⋳","isinv":"∈","it":"⁢","Itilde":"Ĩ","itilde":"ĩ","Iukcy":"І","iukcy":"і","Iuml":"Ï","iuml":"ï","Jcirc":"Ĵ","jcirc":"ĵ","Jcy":"Й","jcy":"й","Jfr":"𝔍","jfr":"𝔧","jmath":"ȷ","Jopf":"𝕁","jopf":"𝕛","Jscr":"𝒥","jscr":"𝒿","Jsercy":"Ј","jsercy":"ј","Jukcy":"Є","jukcy":"є","Kappa":"Κ","kappa":"κ","kappav":"ϰ","Kcedil":"Ķ","kcedil":"ķ","Kcy":"К","kcy":"к","Kfr":"𝔎","kfr":"𝔨","kgreen":"ĸ","KHcy":"Х","khcy":"х","KJcy":"Ќ","kjcy":"ќ","Kopf":"𝕂","kopf":"𝕜","Kscr":"𝒦","kscr":"𝓀","lAarr":"⇚","Lacute":"Ĺ","lacute":"ĺ","laemptyv":"⦴","lagran":"ℒ","Lambda":"Λ","lambda":"λ","lang":"⟨","Lang":"⟪","langd":"⦑","langle":"⟨","lap":"⪅","Laplacetrf":"ℒ","laquo":"«","larrb":"⇤","larrbfs":"⤟","larr":"←","Larr":"↞","lArr":"⇐","larrfs":"⤝","larrhk":"↩","larrlp":"↫","larrpl":"⤹","larrsim":"⥳","larrtl":"↢","latail":"⤙","lAtail":"⤛","lat":"⪫","late":"⪭","lates":"⪭︀","lbarr":"⤌","lBarr":"⤎","lbbrk":"❲","lbrace":"{","lbrack":"[","lbrke":"⦋","lbrksld":"⦏","lbrkslu":"⦍","Lcaron":"Ľ","lcaron":"ľ","Lcedil":"Ļ","lcedil":"ļ","lceil":"⌈","lcub":"{","Lcy":"Л","lcy":"л","ldca":"⤶","ldquo":"“","ldquor":"„","ldrdhar":"⥧","ldrushar":"⥋","ldsh":"↲","le":"≤","lE":"≦","LeftAngleBracket":"⟨","LeftArrowBar":"⇤","leftarrow":"←","LeftArrow":"←","Leftarrow":"⇐","LeftArrowRightArrow":"⇆","leftarrowtail":"↢","LeftCeiling":"⌈","LeftDoubleBracket":"⟦","LeftDownTeeVector":"⥡","LeftDownVectorBar":"⥙","LeftDownVector":"⇃","LeftFloor":"⌊","leftharpoondown":"↽","leftharpoonup":"↼","leftleftarrows":"⇇","leftrightarrow":"↔","LeftRightArrow":"↔","Leftrightarrow":"⇔","leftrightarrows":"⇆","leftrightharpoons":"⇋","leftrightsquigarrow":"↭","LeftRightVector":"⥎","LeftTeeArrow":"↤","LeftTee":"⊣","LeftTeeVector":"⥚","leftthreetimes":"⋋","LeftTriangleBar":"⧏","LeftTriangle":"⊲","LeftTriangleEqual":"⊴","LeftUpDownVector":"⥑","LeftUpTeeVector":"⥠","LeftUpVectorBar":"⥘","LeftUpVector":"↿","LeftVectorBar":"⥒","LeftVector":"↼","lEg":"⪋","leg":"⋚","leq":"≤","leqq":"≦","leqslant":"⩽","lescc":"⪨","les":"⩽","lesdot":"⩿","lesdoto":"⪁","lesdotor":"⪃","lesg":"⋚︀","lesges":"⪓","lessapprox":"⪅","lessdot":"⋖","lesseqgtr":"⋚","lesseqqgtr":"⪋","LessEqualGreater":"⋚","LessFullEqual":"≦","LessGreater":"≶","lessgtr":"≶","LessLess":"⪡","lesssim":"≲","LessSlantEqual":"⩽","LessTilde":"≲","lfisht":"⥼","lfloor":"⌊","Lfr":"𝔏","lfr":"𝔩","lg":"≶","lgE":"⪑","lHar":"⥢","lhard":"↽","lharu":"↼","lharul":"⥪","lhblk":"▄","LJcy":"Љ","ljcy":"љ","llarr":"⇇","ll":"≪","Ll":"⋘","llcorner":"⌞","Lleftarrow":"⇚","llhard":"⥫","lltri":"◺","Lmidot":"Ŀ","lmidot":"ŀ","lmoustache":"⎰","lmoust":"⎰","lnap":"⪉","lnapprox":"⪉","lne":"⪇","lnE":"≨","lneq":"⪇","lneqq":"≨","lnsim":"⋦","loang":"⟬","loarr":"⇽","lobrk":"⟦","longleftarrow":"⟵","LongLeftArrow":"⟵","Longleftarrow":"⟸","longleftrightarrow":"⟷","LongLeftRightArrow":"⟷","Longleftrightarrow":"⟺","longmapsto":"⟼","longrightarrow":"⟶","LongRightArrow":"⟶","Longrightarrow":"⟹","looparrowleft":"↫","looparrowright":"↬","lopar":"⦅","Lopf":"𝕃","lopf":"𝕝","loplus":"⨭","lotimes":"⨴","lowast":"∗","lowbar":"_","LowerLeftArrow":"↙","LowerRightArrow":"↘","loz":"◊","lozenge":"◊","lozf":"⧫","lpar":"(","lparlt":"⦓","lrarr":"⇆","lrcorner":"⌟","lrhar":"⇋","lrhard":"⥭","lrm":"‎","lrtri":"⊿","lsaquo":"‹","lscr":"𝓁","Lscr":"ℒ","lsh":"↰","Lsh":"↰","lsim":"≲","lsime":"⪍","lsimg":"⪏","lsqb":"[","lsquo":"‘","lsquor":"‚","Lstrok":"Ł","lstrok":"ł","ltcc":"⪦","ltcir":"⩹","lt":"<","LT":"<","Lt":"≪","ltdot":"⋖","lthree":"⋋","ltimes":"⋉","ltlarr":"⥶","ltquest":"⩻","ltri":"◃","ltrie":"⊴","ltrif":"◂","ltrPar":"⦖","lurdshar":"⥊","luruhar":"⥦","lvertneqq":"≨︀","lvnE":"≨︀","macr":"¯","male":"♂","malt":"✠","maltese":"✠","Map":"⤅","map":"↦","mapsto":"↦","mapstodown":"↧","mapstoleft":"↤","mapstoup":"↥","marker":"▮","mcomma":"⨩","Mcy":"М","mcy":"м","mdash":"—","mDDot":"∺","measuredangle":"∡","MediumSpace":" ","Mellintrf":"ℳ","Mfr":"𝔐","mfr":"𝔪","mho":"℧","micro":"µ","midast":"*","midcir":"⫰","mid":"∣","middot":"·","minusb":"⊟","minus":"−","minusd":"∸","minusdu":"⨪","MinusPlus":"∓","mlcp":"⫛","mldr":"…","mnplus":"∓","models":"⊧","Mopf":"𝕄","mopf":"𝕞","mp":"∓","mscr":"𝓂","Mscr":"ℳ","mstpos":"∾","Mu":"Μ","mu":"μ","multimap":"⊸","mumap":"⊸","nabla":"∇","Nacute":"Ń","nacute":"ń","nang":"∠⃒","nap":"≉","napE":"⩰̸","napid":"≋̸","napos":"ŉ","napprox":"≉","natural":"♮","naturals":"ℕ","natur":"♮","nbsp":" ","nbump":"≎̸","nbumpe":"≏̸","ncap":"⩃","Ncaron":"Ň","ncaron":"ň","Ncedil":"Ņ","ncedil":"ņ","ncong":"≇","ncongdot":"⩭̸","ncup":"⩂","Ncy":"Н","ncy":"н","ndash":"–","nearhk":"⤤","nearr":"↗","neArr":"⇗","nearrow":"↗","ne":"≠","nedot":"≐̸","NegativeMediumSpace":"​","NegativeThickSpace":"​","NegativeThinSpace":"​","NegativeVeryThinSpace":"​","nequiv":"≢","nesear":"⤨","nesim":"≂̸","NestedGreaterGreater":"≫","NestedLessLess":"≪","NewLine":"\\n","nexist":"∄","nexists":"∄","Nfr":"𝔑","nfr":"𝔫","ngE":"≧̸","nge":"≱","ngeq":"≱","ngeqq":"≧̸","ngeqslant":"⩾̸","nges":"⩾̸","nGg":"⋙̸","ngsim":"≵","nGt":"≫⃒","ngt":"≯","ngtr":"≯","nGtv":"≫̸","nharr":"↮","nhArr":"⇎","nhpar":"⫲","ni":"∋","nis":"⋼","nisd":"⋺","niv":"∋","NJcy":"Њ","njcy":"њ","nlarr":"↚","nlArr":"⇍","nldr":"‥","nlE":"≦̸","nle":"≰","nleftarrow":"↚","nLeftarrow":"⇍","nleftrightarrow":"↮","nLeftrightarrow":"⇎","nleq":"≰","nleqq":"≦̸","nleqslant":"⩽̸","nles":"⩽̸","nless":"≮","nLl":"⋘̸","nlsim":"≴","nLt":"≪⃒","nlt":"≮","nltri":"⋪","nltrie":"⋬","nLtv":"≪̸","nmid":"∤","NoBreak":"⁠","NonBreakingSpace":" ","nopf":"𝕟","Nopf":"ℕ","Not":"⫬","not":"¬","NotCongruent":"≢","NotCupCap":"≭","NotDoubleVerticalBar":"∦","NotElement":"∉","NotEqual":"≠","NotEqualTilde":"≂̸","NotExists":"∄","NotGreater":"≯","NotGreaterEqual":"≱","NotGreaterFullEqual":"≧̸","NotGreaterGreater":"≫̸","NotGreaterLess":"≹","NotGreaterSlantEqual":"⩾̸","NotGreaterTilde":"≵","NotHumpDownHump":"≎̸","NotHumpEqual":"≏̸","notin":"∉","notindot":"⋵̸","notinE":"⋹̸","notinva":"∉","notinvb":"⋷","notinvc":"⋶","NotLeftTriangleBar":"⧏̸","NotLeftTriangle":"⋪","NotLeftTriangleEqual":"⋬","NotLess":"≮","NotLessEqual":"≰","NotLessGreater":"≸","NotLessLess":"≪̸","NotLessSlantEqual":"⩽̸","NotLessTilde":"≴","NotNestedGreaterGreater":"⪢̸","NotNestedLessLess":"⪡̸","notni":"∌","notniva":"∌","notnivb":"⋾","notnivc":"⋽","NotPrecedes":"⊀","NotPrecedesEqual":"⪯̸","NotPrecedesSlantEqual":"⋠","NotReverseElement":"∌","NotRightTriangleBar":"⧐̸","NotRightTriangle":"⋫","NotRightTriangleEqual":"⋭","NotSquareSubset":"⊏̸","NotSquareSubsetEqual":"⋢","NotSquareSuperset":"⊐̸","NotSquareSupersetEqual":"⋣","NotSubset":"⊂⃒","NotSubsetEqual":"⊈","NotSucceeds":"⊁","NotSucceedsEqual":"⪰̸","NotSucceedsSlantEqual":"⋡","NotSucceedsTilde":"≿̸","NotSuperset":"⊃⃒","NotSupersetEqual":"⊉","NotTilde":"≁","NotTildeEqual":"≄","NotTildeFullEqual":"≇","NotTildeTilde":"≉","NotVerticalBar":"∤","nparallel":"∦","npar":"∦","nparsl":"⫽⃥","npart":"∂̸","npolint":"⨔","npr":"⊀","nprcue":"⋠","nprec":"⊀","npreceq":"⪯̸","npre":"⪯̸","nrarrc":"⤳̸","nrarr":"↛","nrArr":"⇏","nrarrw":"↝̸","nrightarrow":"↛","nRightarrow":"⇏","nrtri":"⋫","nrtrie":"⋭","nsc":"⊁","nsccue":"⋡","nsce":"⪰̸","Nscr":"𝒩","nscr":"𝓃","nshortmid":"∤","nshortparallel":"∦","nsim":"≁","nsime":"≄","nsimeq":"≄","nsmid":"∤","nspar":"∦","nsqsube":"⋢","nsqsupe":"⋣","nsub":"⊄","nsubE":"⫅̸","nsube":"⊈","nsubset":"⊂⃒","nsubseteq":"⊈","nsubseteqq":"⫅̸","nsucc":"⊁","nsucceq":"⪰̸","nsup":"⊅","nsupE":"⫆̸","nsupe":"⊉","nsupset":"⊃⃒","nsupseteq":"⊉","nsupseteqq":"⫆̸","ntgl":"≹","Ntilde":"Ñ","ntilde":"ñ","ntlg":"≸","ntriangleleft":"⋪","ntrianglelefteq":"⋬","ntriangleright":"⋫","ntrianglerighteq":"⋭","Nu":"Ν","nu":"ν","num":"#","numero":"№","numsp":" ","nvap":"≍⃒","nvdash":"⊬","nvDash":"⊭","nVdash":"⊮","nVDash":"⊯","nvge":"≥⃒","nvgt":">⃒","nvHarr":"⤄","nvinfin":"⧞","nvlArr":"⤂","nvle":"≤⃒","nvlt":"<⃒","nvltrie":"⊴⃒","nvrArr":"⤃","nvrtrie":"⊵⃒","nvsim":"∼⃒","nwarhk":"⤣","nwarr":"↖","nwArr":"⇖","nwarrow":"↖","nwnear":"⤧","Oacute":"Ó","oacute":"ó","oast":"⊛","Ocirc":"Ô","ocirc":"ô","ocir":"⊚","Ocy":"О","ocy":"о","odash":"⊝","Odblac":"Ő","odblac":"ő","odiv":"⨸","odot":"⊙","odsold":"⦼","OElig":"Œ","oelig":"œ","ofcir":"⦿","Ofr":"𝔒","ofr":"𝔬","ogon":"˛","Ograve":"Ò","ograve":"ò","ogt":"⧁","ohbar":"⦵","ohm":"Ω","oint":"∮","olarr":"↺","olcir":"⦾","olcross":"⦻","oline":"‾","olt":"⧀","Omacr":"Ō","omacr":"ō","Omega":"Ω","omega":"ω","Omicron":"Ο","omicron":"ο","omid":"⦶","ominus":"⊖","Oopf":"𝕆","oopf":"𝕠","opar":"⦷","OpenCurlyDoubleQuote":"“","OpenCurlyQuote":"‘","operp":"⦹","oplus":"⊕","orarr":"↻","Or":"⩔","or":"∨","ord":"⩝","order":"ℴ","orderof":"ℴ","ordf":"ª","ordm":"º","origof":"⊶","oror":"⩖","orslope":"⩗","orv":"⩛","oS":"Ⓢ","Oscr":"𝒪","oscr":"ℴ","Oslash":"Ø","oslash":"ø","osol":"⊘","Otilde":"Õ","otilde":"õ","otimesas":"⨶","Otimes":"⨷","otimes":"⊗","Ouml":"Ö","ouml":"ö","ovbar":"⌽","OverBar":"‾","OverBrace":"⏞","OverBracket":"⎴","OverParenthesis":"⏜","para":"¶","parallel":"∥","par":"∥","parsim":"⫳","parsl":"⫽","part":"∂","PartialD":"∂","Pcy":"П","pcy":"п","percnt":"%","period":".","permil":"‰","perp":"⊥","pertenk":"‱","Pfr":"𝔓","pfr":"𝔭","Phi":"Φ","phi":"φ","phiv":"ϕ","phmmat":"ℳ","phone":"☎","Pi":"Π","pi":"π","pitchfork":"⋔","piv":"ϖ","planck":"ℏ","planckh":"ℎ","plankv":"ℏ","plusacir":"⨣","plusb":"⊞","pluscir":"⨢","plus":"+","plusdo":"∔","plusdu":"⨥","pluse":"⩲","PlusMinus":"±","plusmn":"±","plussim":"⨦","plustwo":"⨧","pm":"±","Poincareplane":"ℌ","pointint":"⨕","popf":"𝕡","Popf":"ℙ","pound":"£","prap":"⪷","Pr":"⪻","pr":"≺","prcue":"≼","precapprox":"⪷","prec":"≺","preccurlyeq":"≼","Precedes":"≺","PrecedesEqual":"⪯","PrecedesSlantEqual":"≼","PrecedesTilde":"≾","preceq":"⪯","precnapprox":"⪹","precneqq":"⪵","precnsim":"⋨","pre":"⪯","prE":"⪳","precsim":"≾","prime":"′","Prime":"″","primes":"ℙ","prnap":"⪹","prnE":"⪵","prnsim":"⋨","prod":"∏","Product":"∏","profalar":"⌮","profline":"⌒","profsurf":"⌓","prop":"∝","Proportional":"∝","Proportion":"∷","propto":"∝","prsim":"≾","prurel":"⊰","Pscr":"𝒫","pscr":"𝓅","Psi":"Ψ","psi":"ψ","puncsp":" ","Qfr":"𝔔","qfr":"𝔮","qint":"⨌","qopf":"𝕢","Qopf":"ℚ","qprime":"⁗","Qscr":"𝒬","qscr":"𝓆","quaternions":"ℍ","quatint":"⨖","quest":"?","questeq":"≟","quot":"\\"","QUOT":"\\"","rAarr":"⇛","race":"∽̱","Racute":"Ŕ","racute":"ŕ","radic":"√","raemptyv":"⦳","rang":"⟩","Rang":"⟫","rangd":"⦒","range":"⦥","rangle":"⟩","raquo":"»","rarrap":"⥵","rarrb":"⇥","rarrbfs":"⤠","rarrc":"⤳","rarr":"→","Rarr":"↠","rArr":"⇒","rarrfs":"⤞","rarrhk":"↪","rarrlp":"↬","rarrpl":"⥅","rarrsim":"⥴","Rarrtl":"⤖","rarrtl":"↣","rarrw":"↝","ratail":"⤚","rAtail":"⤜","ratio":"∶","rationals":"ℚ","rbarr":"⤍","rBarr":"⤏","RBarr":"⤐","rbbrk":"❳","rbrace":"}","rbrack":"]","rbrke":"⦌","rbrksld":"⦎","rbrkslu":"⦐","Rcaron":"Ř","rcaron":"ř","Rcedil":"Ŗ","rcedil":"ŗ","rceil":"⌉","rcub":"}","Rcy":"Р","rcy":"р","rdca":"⤷","rdldhar":"⥩","rdquo":"”","rdquor":"”","rdsh":"↳","real":"ℜ","realine":"ℛ","realpart":"ℜ","reals":"ℝ","Re":"ℜ","rect":"▭","reg":"®","REG":"®","ReverseElement":"∋","ReverseEquilibrium":"⇋","ReverseUpEquilibrium":"⥯","rfisht":"⥽","rfloor":"⌋","rfr":"𝔯","Rfr":"ℜ","rHar":"⥤","rhard":"⇁","rharu":"⇀","rharul":"⥬","Rho":"Ρ","rho":"ρ","rhov":"ϱ","RightAngleBracket":"⟩","RightArrowBar":"⇥","rightarrow":"→","RightArrow":"→","Rightarrow":"⇒","RightArrowLeftArrow":"⇄","rightarrowtail":"↣","RightCeiling":"⌉","RightDoubleBracket":"⟧","RightDownTeeVector":"⥝","RightDownVectorBar":"⥕","RightDownVector":"⇂","RightFloor":"⌋","rightharpoondown":"⇁","rightharpoonup":"⇀","rightleftarrows":"⇄","rightleftharpoons":"⇌","rightrightarrows":"⇉","rightsquigarrow":"↝","RightTeeArrow":"↦","RightTee":"⊢","RightTeeVector":"⥛","rightthreetimes":"⋌","RightTriangleBar":"⧐","RightTriangle":"⊳","RightTriangleEqual":"⊵","RightUpDownVector":"⥏","RightUpTeeVector":"⥜","RightUpVectorBar":"⥔","RightUpVector":"↾","RightVectorBar":"⥓","RightVector":"⇀","ring":"˚","risingdotseq":"≓","rlarr":"⇄","rlhar":"⇌","rlm":"‏","rmoustache":"⎱","rmoust":"⎱","rnmid":"⫮","roang":"⟭","roarr":"⇾","robrk":"⟧","ropar":"⦆","ropf":"𝕣","Ropf":"ℝ","roplus":"⨮","rotimes":"⨵","RoundImplies":"⥰","rpar":")","rpargt":"⦔","rppolint":"⨒","rrarr":"⇉","Rrightarrow":"⇛","rsaquo":"›","rscr":"𝓇","Rscr":"ℛ","rsh":"↱","Rsh":"↱","rsqb":"]","rsquo":"’","rsquor":"’","rthree":"⋌","rtimes":"⋊","rtri":"▹","rtrie":"⊵","rtrif":"▸","rtriltri":"⧎","RuleDelayed":"⧴","ruluhar":"⥨","rx":"℞","Sacute":"Ś","sacute":"ś","sbquo":"‚","scap":"⪸","Scaron":"Š","scaron":"š","Sc":"⪼","sc":"≻","sccue":"≽","sce":"⪰","scE":"⪴","Scedil":"Ş","scedil":"ş","Scirc":"Ŝ","scirc":"ŝ","scnap":"⪺","scnE":"⪶","scnsim":"⋩","scpolint":"⨓","scsim":"≿","Scy":"С","scy":"с","sdotb":"⊡","sdot":"⋅","sdote":"⩦","searhk":"⤥","searr":"↘","seArr":"⇘","searrow":"↘","sect":"§","semi":";","seswar":"⤩","setminus":"∖","setmn":"∖","sext":"✶","Sfr":"𝔖","sfr":"𝔰","sfrown":"⌢","sharp":"♯","SHCHcy":"Щ","shchcy":"щ","SHcy":"Ш","shcy":"ш","ShortDownArrow":"↓","ShortLeftArrow":"←","shortmid":"∣","shortparallel":"∥","ShortRightArrow":"→","ShortUpArrow":"↑","shy":"­","Sigma":"Σ","sigma":"σ","sigmaf":"ς","sigmav":"ς","sim":"∼","simdot":"⩪","sime":"≃","simeq":"≃","simg":"⪞","simgE":"⪠","siml":"⪝","simlE":"⪟","simne":"≆","simplus":"⨤","simrarr":"⥲","slarr":"←","SmallCircle":"∘","smallsetminus":"∖","smashp":"⨳","smeparsl":"⧤","smid":"∣","smile":"⌣","smt":"⪪","smte":"⪬","smtes":"⪬︀","SOFTcy":"Ь","softcy":"ь","solbar":"⌿","solb":"⧄","sol":"/","Sopf":"𝕊","sopf":"𝕤","spades":"♠","spadesuit":"♠","spar":"∥","sqcap":"⊓","sqcaps":"⊓︀","sqcup":"⊔","sqcups":"⊔︀","Sqrt":"√","sqsub":"⊏","sqsube":"⊑","sqsubset":"⊏","sqsubseteq":"⊑","sqsup":"⊐","sqsupe":"⊒","sqsupset":"⊐","sqsupseteq":"⊒","square":"□","Square":"□","SquareIntersection":"⊓","SquareSubset":"⊏","SquareSubsetEqual":"⊑","SquareSuperset":"⊐","SquareSupersetEqual":"⊒","SquareUnion":"⊔","squarf":"▪","squ":"□","squf":"▪","srarr":"→","Sscr":"𝒮","sscr":"𝓈","ssetmn":"∖","ssmile":"⌣","sstarf":"⋆","Star":"⋆","star":"☆","starf":"★","straightepsilon":"ϵ","straightphi":"ϕ","strns":"¯","sub":"⊂","Sub":"⋐","subdot":"⪽","subE":"⫅","sube":"⊆","subedot":"⫃","submult":"⫁","subnE":"⫋","subne":"⊊","subplus":"⪿","subrarr":"⥹","subset":"⊂","Subset":"⋐","subseteq":"⊆","subseteqq":"⫅","SubsetEqual":"⊆","subsetneq":"⊊","subsetneqq":"⫋","subsim":"⫇","subsub":"⫕","subsup":"⫓","succapprox":"⪸","succ":"≻","succcurlyeq":"≽","Succeeds":"≻","SucceedsEqual":"⪰","SucceedsSlantEqual":"≽","SucceedsTilde":"≿","succeq":"⪰","succnapprox":"⪺","succneqq":"⪶","succnsim":"⋩","succsim":"≿","SuchThat":"∋","sum":"∑","Sum":"∑","sung":"♪","sup1":"¹","sup2":"²","sup3":"³","sup":"⊃","Sup":"⋑","supdot":"⪾","supdsub":"⫘","supE":"⫆","supe":"⊇","supedot":"⫄","Superset":"⊃","SupersetEqual":"⊇","suphsol":"⟉","suphsub":"⫗","suplarr":"⥻","supmult":"⫂","supnE":"⫌","supne":"⊋","supplus":"⫀","supset":"⊃","Supset":"⋑","supseteq":"⊇","supseteqq":"⫆","supsetneq":"⊋","supsetneqq":"⫌","supsim":"⫈","supsub":"⫔","supsup":"⫖","swarhk":"⤦","swarr":"↙","swArr":"⇙","swarrow":"↙","swnwar":"⤪","szlig":"ß","Tab":"\\t","target":"⌖","Tau":"Τ","tau":"τ","tbrk":"⎴","Tcaron":"Ť","tcaron":"ť","Tcedil":"Ţ","tcedil":"ţ","Tcy":"Т","tcy":"т","tdot":"⃛","telrec":"⌕","Tfr":"𝔗","tfr":"𝔱","there4":"∴","therefore":"∴","Therefore":"∴","Theta":"Θ","theta":"θ","thetasym":"ϑ","thetav":"ϑ","thickapprox":"≈","thicksim":"∼","ThickSpace":"  ","ThinSpace":" ","thinsp":" ","thkap":"≈","thksim":"∼","THORN":"Þ","thorn":"þ","tilde":"˜","Tilde":"∼","TildeEqual":"≃","TildeFullEqual":"≅","TildeTilde":"≈","timesbar":"⨱","timesb":"⊠","times":"×","timesd":"⨰","tint":"∭","toea":"⤨","topbot":"⌶","topcir":"⫱","top":"⊤","Topf":"𝕋","topf":"𝕥","topfork":"⫚","tosa":"⤩","tprime":"‴","trade":"™","TRADE":"™","triangle":"▵","triangledown":"▿","triangleleft":"◃","trianglelefteq":"⊴","triangleq":"≜","triangleright":"▹","trianglerighteq":"⊵","tridot":"◬","trie":"≜","triminus":"⨺","TripleDot":"⃛","triplus":"⨹","trisb":"⧍","tritime":"⨻","trpezium":"⏢","Tscr":"𝒯","tscr":"𝓉","TScy":"Ц","tscy":"ц","TSHcy":"Ћ","tshcy":"ћ","Tstrok":"Ŧ","tstrok":"ŧ","twixt":"≬","twoheadleftarrow":"↞","twoheadrightarrow":"↠","Uacute":"Ú","uacute":"ú","uarr":"↑","Uarr":"↟","uArr":"⇑","Uarrocir":"⥉","Ubrcy":"Ў","ubrcy":"ў","Ubreve":"Ŭ","ubreve":"ŭ","Ucirc":"Û","ucirc":"û","Ucy":"У","ucy":"у","udarr":"⇅","Udblac":"Ű","udblac":"ű","udhar":"⥮","ufisht":"⥾","Ufr":"𝔘","ufr":"𝔲","Ugrave":"Ù","ugrave":"ù","uHar":"⥣","uharl":"↿","uharr":"↾","uhblk":"▀","ulcorn":"⌜","ulcorner":"⌜","ulcrop":"⌏","ultri":"◸","Umacr":"Ū","umacr":"ū","uml":"¨","UnderBar":"_","UnderBrace":"⏟","UnderBracket":"⎵","UnderParenthesis":"⏝","Union":"⋃","UnionPlus":"⊎","Uogon":"Ų","uogon":"ų","Uopf":"𝕌","uopf":"𝕦","UpArrowBar":"⤒","uparrow":"↑","UpArrow":"↑","Uparrow":"⇑","UpArrowDownArrow":"⇅","updownarrow":"↕","UpDownArrow":"↕","Updownarrow":"⇕","UpEquilibrium":"⥮","upharpoonleft":"↿","upharpoonright":"↾","uplus":"⊎","UpperLeftArrow":"↖","UpperRightArrow":"↗","upsi":"υ","Upsi":"ϒ","upsih":"ϒ","Upsilon":"Υ","upsilon":"υ","UpTeeArrow":"↥","UpTee":"⊥","upuparrows":"⇈","urcorn":"⌝","urcorner":"⌝","urcrop":"⌎","Uring":"Ů","uring":"ů","urtri":"◹","Uscr":"𝒰","uscr":"𝓊","utdot":"⋰","Utilde":"Ũ","utilde":"ũ","utri":"▵","utrif":"▴","uuarr":"⇈","Uuml":"Ü","uuml":"ü","uwangle":"⦧","vangrt":"⦜","varepsilon":"ϵ","varkappa":"ϰ","varnothing":"∅","varphi":"ϕ","varpi":"ϖ","varpropto":"∝","varr":"↕","vArr":"⇕","varrho":"ϱ","varsigma":"ς","varsubsetneq":"⊊︀","varsubsetneqq":"⫋︀","varsupsetneq":"⊋︀","varsupsetneqq":"⫌︀","vartheta":"ϑ","vartriangleleft":"⊲","vartriangleright":"⊳","vBar":"⫨","Vbar":"⫫","vBarv":"⫩","Vcy":"В","vcy":"в","vdash":"⊢","vDash":"⊨","Vdash":"⊩","VDash":"⊫","Vdashl":"⫦","veebar":"⊻","vee":"∨","Vee":"⋁","veeeq":"≚","vellip":"⋮","verbar":"|","Verbar":"‖","vert":"|","Vert":"‖","VerticalBar":"∣","VerticalLine":"|","VerticalSeparator":"❘","VerticalTilde":"≀","VeryThinSpace":" ","Vfr":"𝔙","vfr":"𝔳","vltri":"⊲","vnsub":"⊂⃒","vnsup":"⊃⃒","Vopf":"𝕍","vopf":"𝕧","vprop":"∝","vrtri":"⊳","Vscr":"𝒱","vscr":"𝓋","vsubnE":"⫋︀","vsubne":"⊊︀","vsupnE":"⫌︀","vsupne":"⊋︀","Vvdash":"⊪","vzigzag":"⦚","Wcirc":"Ŵ","wcirc":"ŵ","wedbar":"⩟","wedge":"∧","Wedge":"⋀","wedgeq":"≙","weierp":"℘","Wfr":"𝔚","wfr":"𝔴","Wopf":"𝕎","wopf":"𝕨","wp":"℘","wr":"≀","wreath":"≀","Wscr":"𝒲","wscr":"𝓌","xcap":"⋂","xcirc":"◯","xcup":"⋃","xdtri":"▽","Xfr":"𝔛","xfr":"𝔵","xharr":"⟷","xhArr":"⟺","Xi":"Ξ","xi":"ξ","xlarr":"⟵","xlArr":"⟸","xmap":"⟼","xnis":"⋻","xodot":"⨀","Xopf":"𝕏","xopf":"𝕩","xoplus":"⨁","xotime":"⨂","xrarr":"⟶","xrArr":"⟹","Xscr":"𝒳","xscr":"𝓍","xsqcup":"⨆","xuplus":"⨄","xutri":"△","xvee":"⋁","xwedge":"⋀","Yacute":"Ý","yacute":"ý","YAcy":"Я","yacy":"я","Ycirc":"Ŷ","ycirc":"ŷ","Ycy":"Ы","ycy":"ы","yen":"¥","Yfr":"𝔜","yfr":"𝔶","YIcy":"Ї","yicy":"ї","Yopf":"𝕐","yopf":"𝕪","Yscr":"𝒴","yscr":"𝓎","YUcy":"Ю","yucy":"ю","yuml":"ÿ","Yuml":"Ÿ","Zacute":"Ź","zacute":"ź","Zcaron":"Ž","zcaron":"ž","Zcy":"З","zcy":"з","Zdot":"Ż","zdot":"ż","zeetrf":"ℨ","ZeroWidthSpace":"​","Zeta":"Ζ","zeta":"ζ","zfr":"𝔷","Zfr":"ℨ","ZHcy":"Ж","zhcy":"ж","zigrarr":"⇝","zopf":"𝕫","Zopf":"ℤ","Zscr":"𝒵","zscr":"𝓏","zwj":"‍","zwnj":"‌"}')},9584:e=>{"use strict";e.exports=JSON.parse('{"Aacute":"Á","aacute":"á","Acirc":"Â","acirc":"â","acute":"´","AElig":"Æ","aelig":"æ","Agrave":"À","agrave":"à","amp":"&","AMP":"&","Aring":"Å","aring":"å","Atilde":"Ã","atilde":"ã","Auml":"Ä","auml":"ä","brvbar":"¦","Ccedil":"Ç","ccedil":"ç","cedil":"¸","cent":"¢","copy":"©","COPY":"©","curren":"¤","deg":"°","divide":"÷","Eacute":"É","eacute":"é","Ecirc":"Ê","ecirc":"ê","Egrave":"È","egrave":"è","ETH":"Ð","eth":"ð","Euml":"Ë","euml":"ë","frac12":"½","frac14":"¼","frac34":"¾","gt":">","GT":">","Iacute":"Í","iacute":"í","Icirc":"Î","icirc":"î","iexcl":"¡","Igrave":"Ì","igrave":"ì","iquest":"¿","Iuml":"Ï","iuml":"ï","laquo":"«","lt":"<","LT":"<","macr":"¯","micro":"µ","middot":"·","nbsp":" ","not":"¬","Ntilde":"Ñ","ntilde":"ñ","Oacute":"Ó","oacute":"ó","Ocirc":"Ô","ocirc":"ô","Ograve":"Ò","ograve":"ò","ordf":"ª","ordm":"º","Oslash":"Ø","oslash":"ø","Otilde":"Õ","otilde":"õ","Ouml":"Ö","ouml":"ö","para":"¶","plusmn":"±","pound":"£","quot":"\\"","QUOT":"\\"","raquo":"»","reg":"®","REG":"®","sect":"§","shy":"­","sup1":"¹","sup2":"²","sup3":"³","szlig":"ß","THORN":"Þ","thorn":"þ","times":"×","Uacute":"Ú","uacute":"ú","Ucirc":"Û","ucirc":"û","Ugrave":"Ù","ugrave":"ù","uml":"¨","Uuml":"Ü","uuml":"ü","Yacute":"Ý","yacute":"ý","yen":"¥","yuml":"ÿ"}')},7084:e=>{"use strict";e.exports=JSON.parse('{"amp":"&","apos":"\'","gt":">","lt":"<","quot":"\\""}')}},r={};function o(e){var t=r[e];if(void 0!==t)return t.exports;var i=r[e]={id:e,loaded:!1,exports:{}};return n[e].call(i.exports,i,i.exports,o),i.loaded=!0,i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var i={};return(()=>{"use strict";o.r(i),o.d(i,{AddAttrOperation:()=>ia,AnchorType:()=>Hr,AttributeHelper:()=>wl,BLOCK_CARD_SCHEMA:()=>$a,BlockCardNode:()=>Fy,BlockNodeAttributeCommand:()=>Cl,BoxNode:()=>Sy,BoxNodeHelper:()=>Ly,CARD_ATTRS_SCHEMA:()=>Ya,CHANGE_ADD_ATTR:()=>ib,CHANGE_ADD_NODE:()=>ub,CHANGE_MOVE_NODE:()=>sb,CHANGE_REMOVE_ATTR:()=>ab,CHANGE_REMOVE_NODE:()=>cb,CHANGE_UPDATE_ATTR:()=>lb,CHANGE_UPDATE_TEXT:()=>db,CardData:()=>Sl,CardHelper:()=>rr,CardNode:()=>By,CardNodeName:()=>ji,CardType:()=>Ei,CardUtil:()=>Ai,Category:()=>qe,ChangeObserver:()=>vb,Command:()=>pt,CommandManager:()=>Xa,DataSource:()=>Ht,DataSourceManager:()=>zt,DefaultSchema:()=>Qa,DisplayContext:()=>Dm,EditCardUI:()=>Hh,Editing:()=>Va,Editor:()=>Ih,EditorAbstractCommand:()=>Oy,EditorAbstractService:()=>Dy,EditorFactory:()=>_y,EditorPlugin:()=>Fh,Element:()=>Br,Engine:()=>gy,EngineOption:()=>py,EnvAdapter:()=>_u,FillerManager:()=>_b,FocusManager:()=>Pp,FrameworkEditor:()=>r,FrameworkEngine:()=>a,FrameworkInfra:()=>h,FrameworkKernel:()=>e,FrameworkPublic:()=>c,FrameworkUiLib:()=>p,FrameworkUtils:()=>t,FrameworkViewer:()=>l,GeneralCommand:()=>Ml,GeneralCommandV2:()=>Bl,GeneralRenderController:()=>xm,GeneralRenderHelper:()=>um,Hole:()=>Di,INLINE_CARD_ATTRS:()=>Zo,INLINE_CARD_SCHEMA:()=>Ka,INodeHelper:()=>ar,INodeUtil:()=>_i,InlineCardNode:()=>My,InlineNodeCommand:()=>Ul,InsertOperation:()=>na,Job:()=>ja,JobMode:()=>We,JsonDataSource:()=>il,KNodeType:()=>yt,Kernel:()=>fl,KernelAbstractCommand:()=>gt,KernelAbstractService:()=>rt,KernelFactory:()=>ml,KernelOption:()=>ut,KernelPlugin:()=>ct,LEFT_PLACEHOLDER_NAME:()=>Eb,Layer:()=>pp,MetaFilter:()=>Ye,Model:()=>nl,ModelCardNode:()=>Si,ModelDocument:()=>ea,ModelNode:()=>Sr,ModelNodeHelper:()=>wa,MoveOperation:()=>ra,NODE_CHANGE_ATTR_ADD:()=>da,NODE_CHANGE_ATTR_CHANGE:()=>ha,NODE_CHANGE_ATTR_REMOVE:()=>fa,NODE_CHANGE_INSERT:()=>sa,NODE_CHANGE_REMOVE:()=>ca,NODE_CHANGE_TEXT_CHANGE:()=>pa,NativeDocument:()=>Kg,NodeConverter:()=>qt,NodeType:()=>wt,NodeUtil:()=>Ut,OpenEditorFactory:()=>fet,OpenViewerFactory:()=>tlt,OperationDataMapKey:()=>va,OperationType:()=>Zi,Plugins:()=>ze,Position:()=>At,PositionUtil:()=>wr,Printer:()=>rm,RIGHT_PLACEHOLDER_NAME:()=>Db,Range:()=>Vt,RangeUtil:()=>Go,ReaderManager:()=>Ci,RemoveAttrOperation:()=>aa,RemoveOperation:()=>oa,RenderAbstractCommand:()=>qy,RenderAbstractService:()=>Yy,RenderController:()=>Og,RenderDrawer:()=>ev,RenderPlugin:()=>Jg,RenderUnit:()=>Lg,RenderUnitManager:()=>Vg,RootChildCard:()=>nr,RootNode:()=>Fi,RootNodeName:()=>Ti,Schema:()=>Ga,ScrollRenderTask:()=>jm,Selection:()=>Wr,SelectionUtil:()=>wi,SnapshotUtil:()=>Ja,TableSelectionUtil:()=>Oa,TextConverter:()=>Wt,TextNode:()=>Vi,TextNodeName:()=>Ii,TileProcessor:()=>Fm,TileRenderController:()=>Vm,ToggleAttributeCommand:()=>zl,ToolbarOptionHelper:()=>vet,Transaction:()=>ta,TreeHelper:()=>Cb,UpdateAttrOperation:()=>la,UpdateTextOperation:()=>ua,VBlockCardNode:()=>Mw,VBoxNode:()=>Qw,VBoxNodeHelper:()=>ZA,VInlineCardNode:()=>Bw,ValuedAttributeCommand:()=>$l,View:()=>sy,ViewBlockCardNode:()=>zb,ViewBlockFillerNode:()=>$b,ViewDocument:()=>ly,ViewElement:()=>jb,ViewInlineCardNode:()=>Gb,ViewInlineFillerNode:()=>Qb,ViewModelMapper:()=>xb,ViewNode:()=>Rb,ViewNodeHelper:()=>n,ViewPosition:()=>Hm,ViewRange:()=>zm,ViewRootNode:()=>Lb,ViewSelection:()=>nb,ViewTextFillerNode:()=>ty,ViewTextNode:()=>oy,ViewTree:()=>Ub,Viewer:()=>gS,ViewerPlugin:()=>Sw,Viewport:()=>$g,VirtualBlockCardNode:()=>Ov,VirtualBlockFillerNode:()=>Dv,VirtualBoxNode:()=>Lv,VirtualCardNode:()=>_v,VirtualContainerNode:()=>Bv,VirtualElement:()=>Hv,VirtualInlineCardNode:()=>qv,VirtualInlineFillerNode:()=>Yv,VirtualNode:()=>wv,VirtualRootNode:()=>qg,VirtualTextFillerNode:()=>Xv,VirtualTextNode:()=>em,WriterManager:()=>Ni,addOperation:()=>ma,applyChanges:()=>Em,closestViewNode:()=>Uy,commitJob:()=>Ra,createByViewNode:()=>tm,createOpenEditor:()=>het,createOpenViewer:()=>nlt,destroyTreeByRootNode:()=>tv,enhancedBoxUIBase:()=>Lh,enhancedCardUIBase:()=>zh,enhancedViewerCardUIBase:()=>QA,flushJob:()=>Ta,fullRender:()=>dm,getAttrValue:()=>gl,getDrawNodes:()=>Lp,getFirstRenderRootNodeByViewNode:()=>Dg,getFirstVisibleViewNode:()=>Rm,getLastRenderRootNodeByViewNode:()=>Sg,getModelPositionInfo:()=>Pb,getNextRenderUnitNode:()=>jg,getPrevRenderUnitNode:()=>Bg,getRectByViewRange:()=>Mp,getRenderUnitWithAncestor:()=>Fg,getRenderUnitsByViewRanges:()=>Lm,getRenderUnitsByViewSelection:()=>Um,getShrinkViewRange:()=>Fp,getViewNode:()=>Vy,getVirtualNode:()=>Hy,insertByViewNode:()=>Pv,isBlockDrawNode:()=>Kp,isCardRange:()=>Jp,isCommitted:()=>Sa,isFillerNode:()=>Xp,isLikeEmpty:()=>Gy,isRenderUnitNode:()=>xg,isTdRange:()=>Gp,maskAddon:()=>$h,maximizeAddon:()=>Yh,parseTableLayout:()=>Qo,parseToRowLayout:()=>Jo,printMissing:()=>im,printUnit:()=>am,renderCursor:()=>Pm,repairByViewNode:()=>cv,reprintUnit:()=>sm,resizerAddon:()=>ep,scrollRender:()=>Im,scrollToViewSelection:()=>Nm,setINode:()=>Za,sortViewNode:()=>nm,spacingAddon:()=>np,toDOMRange:()=>mm,toViewRange:()=>yg,toolbarItems:()=>pde,uIEventAddon:()=>ap,version:()=>ll,widthModeAddon:()=>op});var e={};o.r(e),o.d(e,{AddAttrOperation:()=>ia,AnchorType:()=>Hr,AttributeHelper:()=>wl,BLOCK_CARD_SCHEMA:()=>$a,BlockNodeAttributeCommand:()=>Cl,CARD_ATTRS_SCHEMA:()=>Ya,CardData:()=>Sl,CardHelper:()=>rr,CardNodeName:()=>ji,CardType:()=>Ei,CardUtil:()=>Ai,Category:()=>qe,Command:()=>pt,CommandManager:()=>Xa,DataSource:()=>Ht,DataSourceManager:()=>zt,DefaultSchema:()=>Qa,Editing:()=>Va,Element:()=>Br,GeneralCommand:()=>Ml,GeneralCommandV2:()=>Bl,Hole:()=>Di,INLINE_CARD_ATTRS:()=>Zo,INLINE_CARD_SCHEMA:()=>Ka,INodeHelper:()=>ar,INodeUtil:()=>_i,InlineNodeCommand:()=>Ul,InsertOperation:()=>na,Job:()=>ja,JobMode:()=>We,JsonDataSource:()=>il,KNodeType:()=>yt,Kernel:()=>fl,KernelAbstractCommand:()=>gt,KernelAbstractService:()=>rt,KernelFactory:()=>ml,KernelOption:()=>ut,KernelPlugin:()=>ct,MetaFilter:()=>Ye,Model:()=>nl,ModelCardNode:()=>Si,ModelDocument:()=>ea,ModelNode:()=>Sr,ModelNodeHelper:()=>wa,MoveOperation:()=>ra,NODE_CHANGE_ATTR_ADD:()=>da,NODE_CHANGE_ATTR_CHANGE:()=>ha,NODE_CHANGE_ATTR_REMOVE:()=>fa,NODE_CHANGE_INSERT:()=>sa,NODE_CHANGE_REMOVE:()=>ca,NODE_CHANGE_TEXT_CHANGE:()=>pa,NodeConverter:()=>qt,NodeType:()=>wt,NodeUtil:()=>Ut,OperationDataMapKey:()=>va,OperationType:()=>Zi,Position:()=>At,PositionUtil:()=>wr,Range:()=>Vt,RangeUtil:()=>Go,ReaderManager:()=>Ci,RemoveAttrOperation:()=>aa,RemoveOperation:()=>oa,RootChildCard:()=>nr,RootNode:()=>Fi,RootNodeName:()=>Ti,Schema:()=>Ga,Selection:()=>Wr,SelectionUtil:()=>wi,SnapshotUtil:()=>Ja,TableSelectionUtil:()=>Oa,TextConverter:()=>Wt,TextNode:()=>Vi,TextNodeName:()=>Ii,ToggleAttributeCommand:()=>zl,Transaction:()=>ta,UpdateAttrOperation:()=>la,UpdateTextOperation:()=>ua,ValuedAttributeCommand:()=>$l,WriterManager:()=>Ni,addOperation:()=>ma,commitJob:()=>Ra,default:()=>Kl,flushJob:()=>Ta,getAttrValue:()=>gl,isCommitted:()=>Sa,parseTableLayout:()=>Qo,parseToRowLayout:()=>Jo,setINode:()=>Za});var t={};o.r(t),o.d(t,{ArithmeticUtil:()=>kc,AsyncCoordinator:()=>Oc,AutoScroll:()=>Bd,Color:()=>ru,ColorParse:()=>au,DOMEventListener:()=>hd,DOMSelectionHelper:()=>Od,HOT_KEY_MAP:()=>rf,HSLAColor:()=>nu,HTMLBlockTags:()=>hf,HTMLExcludeTags:()=>vf,HTMLHeadingTags:()=>mf,HTMLInlineTags:()=>pf,HTMLNodeHelper:()=>gd,HTMLStringUtil:()=>vd,HotKeyMatcher:()=>cf,INJECTOR_EMBED_TOOLTIP:()=>vh,INJECTOR_TRANSLATE_CONTENT:()=>mh,INJECTOR_VIDEO_REMARK:()=>fh,INJECTOR_VIP_ICON:()=>ph,INJECTOR_VIP_TOOLTIP:()=>hh,Keyboard:()=>Ks,LibLoader:()=>Af,MouseToDrag:()=>Ud,MutationObserve:()=>Js,RGBAColor:()=>tu,RGBColor:()=>eu,Strings:()=>gn,Svg:()=>dh,UIInjector:()=>gh,URLUtil:()=>yh,Visibility:()=>Ch,addUrlParam:()=>_h,ajax:()=>ns,android:()=>Ts,app:()=>Ms,assert:()=>bt,bindDOMEvent:()=>pc,bindDOMEventForReactComponent:()=>ud,bindDOMLongPress:()=>cd,bindEvent:()=>xc,bindEventForReactComponent:()=>sd,buildParams:()=>Dc,checkOwnership:()=>fd,chrome:()=>Os,clearProxy:()=>os,cloneObject:()=>Jn,closest:()=>gc,convertSvgContent:()=>td,convertSvgImg:()=>nd,copyText:()=>us,createDOMElement:()=>ld,createElement:()=>ad,dataURIToFile:()=>rd,delayTask:()=>od,desktop:()=>Rs,dingtalk:()=>Ds,docDayjs:()=>oh,edge:()=>Ns,errorHandler:()=>ts,eventNeedIgnore:()=>Ac,filesize:()=>Zd,firefox:()=>xs,formatNodeName:()=>tf,genIntersectionObserver:()=>As,generateHashID:()=>qa,generateNodeId:()=>Pr,getCardNodeOffset:()=>Vd,getClassName:()=>Xs,getCommonAncestor:()=>pd,getDevicePixelRatio:()=>id,getFileSize:()=>Dh,getNodeHeight:()=>Hd,getPoint:()=>Md,hasOwnProperty:()=>ir,ios:()=>Ss,ipad:()=>Bs,isAFormData:()=>Sc,isDOMHTMLElement:()=>Td,isDOMTextNode:()=>Sd,isEventBoundaryCardNode:()=>wc,isEventBoundaryNode:()=>yc,isInputEvent:()=>jd,isStateChange:()=>gf,isSupport:()=>Gd,isSupportWebp:()=>zs,isSvgDataUrl:()=>ed,isValidId:()=>bf,loadImage:()=>Zs,loadJS:()=>_f,macos:()=>js,match:()=>Lf,matchAll:()=>Ff,matchType:()=>Mf,measure:()=>gs,measureAndModify:()=>ys,mergeClass:()=>Vf,mergeClassName:()=>Uf,mergeOptions:()=>Wf,mimeMap:()=>qf,mixedClass:()=>Kf,mixin:()=>Gf,mixinDecorator:()=>Yf,mobile:()=>Ps,modify:()=>bs,node:()=>Cs,nodeOffset:()=>Ad,observe:()=>ih,observeViewModel:()=>ah,ownerIDByHTMLElement:()=>dd,parseKeys:()=>uf,protocols:()=>wh,queueMicrotask:()=>ch,rangeContainsNode:()=>xd,reqwest:()=>Qc,runAtThisOrScheduleAtNextAnimationFrame:()=>cs,safari:()=>Es,sanitizeUrl:()=>kh,scheduleAtNextAnimationFrame:()=>ss,scrollbarIsVisible:()=>hc,setErrorHandler:()=>is,setProxy:()=>rs,startDrag:()=>$d,storage:()=>Nf,strToArray:()=>cn,svgToPNG:()=>Pd,template:()=>fc,toCSV:()=>Yd,toFilterFunction:()=>Id,toHotKeyText:()=>of,toQueryString:()=>Rc,urlAppend:()=>Pc,uuid:()=>Dr,validUrl:()=>Ah,windows:()=>Is,wordCount:()=>Eh,wrapHandle:()=>Wd,yuquePad:()=>Ls,yuquePhone:()=>Fs});var n={};o.r(n),o.d(n,{getModelNodeByViewNode:()=>_p,getOwnViewNodeByDOM:()=>Ap,getValueByDOM:()=>mp,getValueByViewNode:()=>yp,getViewNodeByDOM:()=>wp,getVirtualNodeByDOM:()=>xp,getVirtualNodeByViewNode:()=>Cp,isRenderRootViewNode:()=>kp,removeVirtualNodeByViewNode:()=>Np,setValueOnDOM:()=>vp,setValueOnViewNode:()=>gp,setViewNodeOnDOM:()=>bp,setVirtualNodeOnViewNode:()=>Op});var r={};o.r(r),o.d(r,{EditCardUI:()=>Hh,Editor:()=>Ih,EditorAbstractCommand:()=>Oy,EditorAbstractService:()=>Dy,EditorFactory:()=>_y,EditorPlugin:()=>Fh,EnvAdapter:()=>_u,enhancedBoxUIBase:()=>Lh,enhancedCardUIBase:()=>zh,maskAddon:()=>$h,maximizeAddon:()=>Yh,resizerAddon:()=>ep,spacingAddon:()=>np,uIEventAddon:()=>ap,widthModeAddon:()=>op});var a={};o.r(a),o.d(a,{BlockCardNode:()=>Fy,BoxNode:()=>Sy,BoxNodeHelper:()=>Ly,CHANGE_ADD_ATTR:()=>ib,CHANGE_ADD_NODE:()=>ub,CHANGE_MOVE_NODE:()=>sb,CHANGE_REMOVE_ATTR:()=>ab,CHANGE_REMOVE_NODE:()=>cb,CHANGE_UPDATE_ATTR:()=>lb,CHANGE_UPDATE_TEXT:()=>db,CardNode:()=>By,ChangeObserver:()=>vb,DisplayContext:()=>Dm,Engine:()=>gy,EngineOption:()=>py,FillerManager:()=>_b,FocusManager:()=>Pp,GeneralRenderController:()=>xm,GeneralRenderHelper:()=>um,InlineCardNode:()=>My,LEFT_PLACEHOLDER_NAME:()=>Eb,Layer:()=>pp,NativeDocument:()=>Kg,Printer:()=>rm,RIGHT_PLACEHOLDER_NAME:()=>Db,RenderAbstractCommand:()=>qy,RenderAbstractService:()=>Yy,RenderController:()=>Og,RenderDrawer:()=>ev,RenderPlugin:()=>Jg,RenderUnit:()=>Lg,RenderUnitManager:()=>Vg,ScrollRenderTask:()=>jm,TileProcessor:()=>Fm,TileRenderController:()=>Vm,TreeHelper:()=>Cb,View:()=>sy,ViewBlockCardNode:()=>zb,ViewBlockFillerNode:()=>$b,ViewDocument:()=>ly,ViewElement:()=>jb,ViewInlineCardNode:()=>Gb,ViewInlineFillerNode:()=>Qb,ViewModelMapper:()=>xb,ViewNode:()=>Rb,ViewNodeHelper:()=>n,ViewPosition:()=>Hm,ViewRange:()=>zm,ViewRootNode:()=>Lb,ViewSelection:()=>nb,ViewTextFillerNode:()=>ty,ViewTextNode:()=>oy,ViewTree:()=>Ub,Viewport:()=>$g,VirtualBlockCardNode:()=>Ov,VirtualBlockFillerNode:()=>Dv,VirtualBoxNode:()=>Lv,VirtualCardNode:()=>_v,VirtualContainerNode:()=>Bv,VirtualElement:()=>Hv,VirtualInlineCardNode:()=>qv,VirtualInlineFillerNode:()=>Yv,VirtualNode:()=>wv,VirtualRootNode:()=>qg,VirtualTextFillerNode:()=>Xv,VirtualTextNode:()=>em,applyChanges:()=>Em,closestViewNode:()=>Uy,createByViewNode:()=>tm,default:()=>Jy,destroyTreeByRootNode:()=>tv,fullRender:()=>dm,getDrawNodes:()=>Lp,getFirstRenderRootNodeByViewNode:()=>Dg,getFirstVisibleViewNode:()=>Rm,getLastRenderRootNodeByViewNode:()=>Sg,getModelPositionInfo:()=>Pb,getNextRenderUnitNode:()=>jg,getPrevRenderUnitNode:()=>Bg,getRectByViewRange:()=>Mp,getRenderUnitWithAncestor:()=>Fg,getRenderUnitsByViewRanges:()=>Lm,getRenderUnitsByViewSelection:()=>Um,getShrinkViewRange:()=>Fp,getViewNode:()=>Vy,getVirtualNode:()=>Hy,insertByViewNode:()=>Pv,isBlockDrawNode:()=>Kp,isCardRange:()=>Jp,isFillerNode:()=>Xp,isLikeEmpty:()=>Gy,isRenderUnitNode:()=>xg,isTdRange:()=>Gp,printMissing:()=>im,printUnit:()=>am,renderCursor:()=>Pm,repairByViewNode:()=>cv,reprintUnit:()=>sm,scrollRender:()=>Im,scrollToViewSelection:()=>Nm,sortViewNode:()=>nm,toDOMRange:()=>mm,toViewRange:()=>yg});var l={};o.r(l),o.d(l,{CommonHandlers:()=>gC,EnvAdapter:()=>Zy,VBlockCardNode:()=>Mw,VBoxNode:()=>Qw,VBoxNodeHelper:()=>ZA,VCardNode:()=>Iw,VInlineCardNode:()=>Bw,VLayerManager:()=>Hw,VToolbar:()=>KR,Viewer:()=>XR,ViewerAbstractCommand:()=>Ow,ViewerAbstractService:()=>Dw,ViewerBaseRenderController:()=>RA,ViewerBlockCardNode:()=>iA,ViewerBlockFillerNode:()=>uA,ViewerBoxNode:()=>dA,ViewerCardNode:()=>nA,ViewerCardUI:()=>XA,ViewerChangeObserver:()=>NA,ViewerDocument:()=>EA,ViewerDrawer:()=>pw,ViewerElement:()=>yw,ViewerFactory:()=>mS,ViewerGeneralRenderController:()=>BA,ViewerInlineCardNode:()=>pA,ViewerNode:()=>vw,ViewerOption:()=>Xw,ViewerPlugin:()=>Sw,ViewerRenderer:()=>HA,ViewerRootNode:()=>_w,ViewerTextNode:()=>gA,ViewerTileRenderControl:()=>LA,ViewerTree:()=>CA,ViewerTreeHelper:()=>yA,ViewerTreeModelMapper:()=>wA,assertIsViewerElement:()=>hS,assertIsViewerNode:()=>mw,closetModelNode:()=>tw,createViewerNode:()=>Zw,createViewerOption:()=>Qy,default:()=>gS,enhancedViewerCardUIBase:()=>QA,filterViewerNode:()=>AA,focusAddon:()=>QR,generateViewerTree:()=>kA,getBlockNodeLikeViewRanges:()=>WA,getBlockNodeViewRanges:()=>zA,getDrawNodes:()=>aw,getRectByViewRange:()=>iw,getViewerNode:()=>ew,isBlockDrawNode:()=>dw,isCardRange:()=>cw,isFillerNode:()=>sw,isTdRange:()=>uw,maskAddon:()=>eS,maximizeAddon:()=>nS,renderSubTree:()=>SA,resizerAddon:()=>oS,spacingAddon:()=>aS,toolbarAddon:()=>uS,transformDOMRangeToViewRange:()=>qA,widthModeAddon:()=>sS,wordingAddon:()=>fS});var u={};o.r(u),o.d(u,{ILakeKernelService:()=>_S,LakeAttrReader:()=>oI,LakeCardPreReader:()=>iI,LakeCardReader:()=>Lj,LakeCardWriter:()=>$j,LakeNodePreReader:()=>aI,LakeNodeReader:()=>lI,LakeNodeWriter:()=>vT,LakePlugin:()=>BI,LakeStyleReader:()=>uI,pluginRegister:()=>cI});var c={};o.r(c),o.d(c,{ANCHOR_TYPE_BOTTOM_LEFT:()=>vm,ANCHOR_TYPE_END:()=>hm,ANCHOR_TYPE_START:()=>fm,ANCHOR_TYPE_TOP_RIGHT:()=>pm,AbstractService:()=>Qe,AttrTranslator:()=>fp,AttributeSynchronizer:()=>mv,CARD:()=>eM,CARD_SPACING:()=>_l,CARD_SPACING_BOTH:()=>Nl,CARD_SPACING_BOTTOM:()=>xl,CARD_SPACING_TOP:()=>Ol,COLLAPSE:()=>Rt,COLUMN:()=>Fr,COLUMNS:()=>Mr,COMMAND_EXECUTED:()=>ft,COMMAND_NOT_EXECUTED:()=>dt,COMMAND_UNAVAILABLE:()=>st,COMMAND_UNKNOWN:()=>ht,COMMENT_LEFT_GAP:()=>VR,CommandInterceptor:()=>wu,CommandState:()=>at,DEFAULT_LINK:()=>nM,DEFAULT_TOOLBAR:()=>CM,DONT_SHOW:()=>ZB,Drawer:()=>Sp,ENV_LARK:()=>rM,ENV_YUQUE:()=>oM,EVENT_AFTER_CONTENT_CHANGE:()=>Ki,EVENT_BEFORE_CONTENT_CHANGE:()=>$i,EVENT_BOUNDARY_ATTR_NAME:()=>vc,EVENT_BOUNDARY_CLASS_NAME:()=>mc,EVENT_CONTENT_CHANGE:()=>qi,EVENT_JOB_CREATED:()=>Wi,EVENT_NODE_WILL_CHANGE:()=>Hi,EVENT_OPERATION_ROLLBACK:()=>Gi,EVENT_OPERATION_SUBMITTED:()=>zi,EVENT_SELECTION_CHANGE:()=>Yi,FOCUS_CARD:()=>iM,FOCUS_CARD_AFTER:()=>lM,FOCUS_CARD_BEFORE:()=>aM,HIGH_PRIORITY:()=>dM,HTML_WRITER_MODE:()=>tM,HTML_WRITER_MODE_CLEAN:()=>cM,HTML_WRITER_MODE_INLINE:()=>uM,Hub:()=>Ma,INHERIT_INLINE_CARD:()=>En,INHERIT_TEXT:()=>Dn,INHERIT_TYPES:()=>Pn,INLINE_INHERIT_ATTRS:()=>Rn,KEY_IN_COMPOSITION:()=>Ws,LOW_PRIORITY:()=>hM,MAX_COLS:()=>Lr,MEDIUM_PRIORITY:()=>fM,MIN_WIDTH:()=>Ur,MOBILE_TOOLBAR:()=>NM,NOT_SELECTED:()=>XB,OVERLAY_PLACEMENT_BOTTOM:()=>AC,OVERLAY_PLACEMENT_BOTTOM_LEFT:()=>kC,OVERLAY_PLACEMENT_BOTTOM_RIGHT:()=>_C,OVERLAY_PLACEMENT_LEFT:()=>CC,OVERLAY_PLACEMENT_LEFT_BOTTOM:()=>OC,OVERLAY_PLACEMENT_LEFT_TOP:()=>NC,OVERLAY_PLACEMENT_RIGHT:()=>xC,OVERLAY_PLACEMENT_RIGHT_BOTTOM:()=>DC,OVERLAY_PLACEMENT_RIGHT_TOP:()=>EC,OVERLAY_PLACEMENT_TOP:()=>bC,OVERLAY_PLACEMENT_TOP_LEFT:()=>yC,OVERLAY_PLACEMENT_TOP_RIGHT:()=>wC,PureCommand:()=>gu,Registry:()=>hp,SCENE_MOBILE_APP:()=>pM,SELECTED:()=>QB,SOURCE_FROM_DROP:()=>FT,SOURCE_FROM_INIT:()=>BT,SOURCE_FROM_MATERIAL_LIBRARY:()=>UT,SOURCE_FROM_PASTE:()=>MT,SOURCE_FROM_UI:()=>LT,SUMMARY:()=>St,SidebarUIDescriptor:()=>_M,TABLE_BOX_NODE_NAME:()=>ow,TABLE_INNER_WRAP_NODE_NAME:()=>rw,TABLE_TOOLBAR:()=>OM,TABLE_WRAP_NODE_NAME:()=>nw,THEME_DARK:()=>up,THEME_LIGHT:()=>lp,THROUTH_INHERIT_ATTRS:()=>Sn,TYPE_ATTR_NAME:()=>sp,TYPE_DEFAULT:()=>vM,TYPE_NOTE:()=>gM,TYPE_SIMPLE:()=>mM,TYPE_SMALL:()=>bM,TYPE_STYLE_NAME:()=>cp,Theme:()=>kM,TinyCanvas:()=>Rp,UI_TYPE:()=>yM,VIEWER_BODY_SELECTOR:()=>$w,VIEWER_MODE:()=>Vw,VIEWER_ROOT_SELECTOR:()=>qw,WIDTH_MODE_CONTAIN:()=>Dl,WIDTH_MODE_NORMAL:()=>El,createPluginRegister:()=>HR,fileTypeEnum:()=>sM,getRectsByRange:()=>Bp,getRectsByTextNode:()=>Tp,sliceTextNodeByLine:()=>jp,unwrapID:()=>et,wrapID:()=>Ze});var s={};o.r(s),o.d(s,{IMarkdownService:()=>tI,MarkdownDataSourcePlugin:()=>_U,pluginRegister:()=>CL});var d={};o.r(d),o.d(d,{ITextDataSourceKernelService:()=>EG,TextDataSourcePlugin:()=>KG,TextWriter:()=>YG,pluginRegister:()=>NG});var f={};o.r(f),o.d(f,{AttributeHTMLWriter:()=>vB,HTMLDataSourcePlugin:()=>qK,HtmlAttributeReader:()=>WZ,HtmlNodePreReader:()=>h0,HtmlNodeReader:()=>Ej,HtmlStyleReader:()=>sB,HtmlTextNodePreWriter:()=>S9,IHTMLKernelService:()=>wS,NodeHTMLWriter:()=>lT,parseToNodeTree:()=>IK,pluginRegister:()=>wK});var h={};o.r(h),o.d(h,{BaseTask:()=>kte,ColorRegistry:()=>su,ColorScheme:()=>ou,DefaultThemeSchema:()=>hu,LANG_EVENT_MAP:()=>ic,Locale:()=>cc,TaskManager:()=>Dte,TaskObserver:()=>Tte,TaskThread:()=>Ote,Theme:()=>mu,VirtualTask:()=>Ste,colorRegistry:()=>fu,i18n:()=>sc,langEvent:()=>ac});var p={};o.r(p),o.d(p,{ALL_TYPE:()=>awe,AsyncView:()=>kye,Avatar:()=>Nye,BoundaryPopover:()=>nR,Breadcrumb:()=>Bye,Button:()=>Mye,CONTAINER_TYPE_BORDER_ICON:()=>rwe,CONTAINER_TYPE_ICON:()=>ewe,CONTAINER_TYPE_LABEL:()=>owe,CONTAINER_TYPE_NORMAL:()=>twe,CONTAINER_TYPE_SUBMENU:()=>iwe,CONTAINER_TYPE_TWO_COLUMN:()=>nwe,CardDataViewHelper:()=>Vye,CardResizer:()=>Xh,CardToolbar:()=>lR,CardToolbarView:()=>iR,CardView:()=>qCe,Checkbox:()=>RAe,CommandMenu:()=>zAe,CommandMenuItem:()=>jAe,ContainerRightToolbar:()=>hR,ContainerRightToolbarView:()=>sR,ContainerToolbar:()=>PR,ContainerToolbarView:()=>xR,DatePicker:()=>q_e,Divider:()=>$_e,DragDrop:()=>CR,Dropdown:()=>Ex,DropdownItem:()=>eE,EmbedIcon:()=>sye,EmbedNav:()=>K_e,EmbedView:()=>GCe,ErrorTips:()=>J_e,FileItem:()=>Zye,Form:()=>VCe,HOCTooltip:()=>Qx,ICON_CDN:()=>HCe,Icon:()=>SC,Input:()=>KP,ItemContainer:()=>Xye,ItemGroup:()=>uwe,MaskHelper:()=>Wh,Menu:()=>cP,MiniToolbar:()=>UR,Modal:()=>BNe,ModeMenu:()=>LNe,ModeSelect:()=>GOe,Option:()=>JOe,OverlayBar:()=>axe,OverlayBarButton:()=>exe,OverlayBarDivider:()=>rxe,OverlayManager:()=>aR,Popconfirm:()=>cxe,Popover:()=>bR,Radio:()=>Axe,RangeHighlighter:()=>sEe,ReactProxyComponent:()=>Uye,Record:()=>lc,ResizerHelper:()=>Qh,SearchBox:()=>fAe,SearchCardMenu:()=>wAe,SearchText:()=>uEe,Select:()=>Cxe,SelectItem:()=>sP,SidebarView:()=>Pxe,Spin:()=>jxe,SubMenu:()=>swe,Switch:()=>kR,TableItem:()=>gwe,TableSelector:()=>hwe,Tabs:()=>aEe,TextItem:()=>ywe,TitleView:()=>QCe,ToolbarButton:()=>hye,anchorProxy:()=>lEe,bgColorIcon:()=>iye,calcGrid:()=>IAe,calcPositionByNode:()=>GP,calcPositionByPoint:()=>QP,cellBgColorIcon:()=>aye,filterToolbarItems:()=>RR,fontColorIcon:()=>lye,getIcon:()=>$ye,getIconByItemConfig:()=>TC,getNextPos:()=>MAe,getRemark:()=>qye,getTextByItemConfig:()=>jC,getViewPortRect:()=>YP,isEqualPos:()=>BAe,itemConfig:()=>TR,message:()=>mC,normalizePos:()=>FAe,notification:()=>XOe,pickAttribute:()=>Kye,wrapTooltip:()=>Zx});var v={};o.r(v),o.d(v,{IToolbarEditorService:()=>jEe,MINI_TOOLBAR_TRIGGER:()=>lde,TOOLBAR_AGENT:()=>hde,TYPE_DEFAULT:()=>cde,TYPE_NOTE:()=>fde,TYPE_SIMPLE:()=>dde,TYPE_TABLE:()=>sde,ToolbarEditorPlugin:()=>eIe,ToolbarUIDescriptor:()=>MEe,WIDGET_TYPES:()=>ITe,pluginRegister:()=>Hse});var m={};o.r(m),o.d(m,{IUiSwitchEditorService:()=>jLe,UISwitchEditorPlugin:()=>ULe,UISwitchViewerPlugin:()=>MVe,pluginRegister:()=>Wse});var g={};o.r(g),o.d(g,{ALL_TYPES:()=>uFe,ISlashService:()=>xEe,SlashEditorPlugin:()=>VFe,SlashPlugin:()=>q2,SlashRenderPlugin:()=>pqe,TYPE_COLLAPSE:()=>iFe,TYPE_GENERAL:()=>rFe,TYPE_NOTE:()=>lFe,TYPE_SIMPLE:()=>aFe,TYPE_TABLE:()=>oFe,isValidType:()=>cFe,pluginRegister:()=>B2});var b={};o.r(b),o.d(b,{CustomCardEditorPlugin:()=>gqe,CustomCardPlugin:()=>jie,CustomCardViewerPlugin:()=>Oqe,pluginRegister:()=>pie});var y={};o.r(y),o.d(y,{ColorPickerSupportEditorPlugin:()=>o$e,pluginRegister:()=>Ise});var w={};o.r(w),o.d(w,{AllowDownloadCheck:()=>BGe,AudioCardEditorPlugin:()=>CGe,AudioCardPlugin:()=>Oce,AudioCardViewerPlugin:()=>IGe,TYPE_COPYRIGHT:()=>ace,TYPE_ERROR:()=>ece,TYPE_PENDING:()=>tce,TYPE_TRANSCODED:()=>ice,TYPE_TRANSCODING:()=>oce,TYPE_UPLOADED:()=>rce,TYPE_UPLOADING:()=>nce,editAudioUIAddon:()=>iGe,pluginRegister:()=>ede,viewerAudioUIAddon:()=>DGe});var A={};o.r(A),o.d(A,{HotKeyRenderPlugin:()=>zZe,IHotKeyRendererService:()=>kRe,hotKeyCardUIAddon:()=>C2e,pluginRegister:()=>Mse});var k={};o.r(k),o.d(k,{AutoScrollRenderPlugin:()=>D8e,pluginRegister:()=>jse});var _={};o.r(_),o.d(_,{INPUT_LATENCY_TIMEOUT:()=>Kie,LogType:()=>G8e,MAX_TIME_EXPR:()=>$ie,MonitorEditorPlugin:()=>e$e,MonitorPlugin:()=>uae,MonitorPluginOption:()=>Gie,MonitorRenderPlugin:()=>F9e,MonitorViewerPlugin:()=>l9e,pluginRegister:()=>qie});var C={};o.r(C),o.d(C,{FileCardEditorPlugin:()=>rTe,FileCardPlugin:()=>jz,FileCardViewerPlugin:()=>v7e,FileUploadTask:()=>PSe,eFileBlockUIBase:()=>wSe,eFileInlineUIBase:()=>USe,editFileBlockUIAddon:()=>ASe,editFileInlineUIAddon:()=>VSe,pluginRegister:()=>ez,vFileBlockUIBase:()=>i7e,vFileInlineUIBase:()=>Z9e,viewerFileBlockUIAddon:()=>a7e,viewerFileInlineUIAddon:()=>e7e});var N={};o.r(N),o.d(N,{EditorWidgets:()=>_Pe,IImageEditorService:()=>sDe,IMAGE_FROM_ENUM:()=>jT,IMAGE_ORIGINAL_TYPE_ENUM:()=>TT,IMAGE_STATUS_DONE:()=>zT,IMAGE_STATUS_ENUM:()=>ST,IMAGE_STATUS_ERROR:()=>WT,IMAGE_STATUS_PENDING:()=>VT,IMAGE_STATUS_UPLOADING:()=>HT,IMAGE_UPLOAD_TYPE_BASE64:()=>cDe,IMAGE_UPLOAD_TYPE_FILE:()=>lDe,IMAGE_UPLOAD_TYPE_URL:()=>uDe,ImageCardEditorPlugin:()=>iRe,ImageCardViewerPlugin:()=>X7e,ImagePlugin:()=>qI,ImageRenderPlugin:()=>UJe,ImageUploadTask:()=>gPe,ViewerWidgets:()=>CPe,editImageUIAddon:()=>uPe,editableImageUIBase:()=>lPe,pluginRegister:()=>QT,viewerImageUIAddon:()=>q7e,viewerImageUIBase:()=>W7e});var O={};o.r(O),o.d(O,{HeadingEditorPlugin:()=>bIe,HeadingPlugin:()=>h$,HeadingRenderPlugin:()=>EZe,HeadingViewerPlugin:()=>Stt,IHeadingKernelService:()=>wq,IHeadingRenderService:()=>gZe,IHeadingViewerService:()=>mtt,pluginRegister:()=>qq});var x={};o.r(x),o.d(x,{TextDiagramCardEditorPlugin:()=>GYe,TextDiagramCardPlugin:()=>Xue,TextDiagramCardViewerPlugin:()=>Fat,editTextDiagramUIAddon:()=>MYe,pluginRegister:()=>Zse,viewerTextDiagramUIAddon:()=>Sat});var E={};o.r(E),o.d(E,{ALERT:()=>PS,ALERT_TYPE:()=>VS,ALERT_TYPE_COLOR1:()=>BS,ALERT_TYPE_COLOR2:()=>MS,ALERT_TYPE_COLOR3:()=>FS,ALERT_TYPE_COLOR4:()=>LS,ALERT_TYPE_COLOR5:()=>US,ALERT_TYPE_DANGER:()=>TS,ALERT_TYPE_INFO:()=>RS,ALERT_TYPE_SORT:()=>HS,ALERT_TYPE_SUCCESS:()=>jS,ALERT_TYPE_TIPS:()=>IS,ALERT_TYPE_WARNING:()=>SS,AlertEditorPlugin:()=>REe,AlertPlugin:()=>NT,AlertRenderPlugin:()=>jJe,AlertViewerPlugin:()=>_et,ColorSelector:()=>dEe,pluginRegister:()=>Kse});var D={};o.r(D),o.d(D,{ALIGNMENT_CENTER:()=>KI,ALIGNMENT_DISTRIBUTED:()=>JI,ALIGNMENT_JUSTIFY:()=>GI,ALIGNMENT_LEFT:()=>$I,ALIGNMENT_RIGHT:()=>YI,AlignmentEditorPlugin:()=>hRe,AlignmentPlugin:()=>kB,AlignmentRenderPlugin:()=>$Je,AlignmentValues:()=>XI,AlignmentViewerPlugin:()=>Oet,HtmlAttrName:()=>tB,HtmlNodeName:()=>eB,HtmlStyle:()=>QI,LakeStyle:()=>ZI,pluginRegister:()=>rB});var P={};o.r(P),o.d(P,{AoneDataSourcePlugin:()=>nie,pluginRegister:()=>Aoe,readCangJie:()=>rlt,readDingContent:()=>Noe});var R={};o.r(R),o.d(R,{BasicTextStyleEditorPlugin:()=>yRe,BasicTextStylePlugin:()=>BM,BasicTextStyleRenderPlugin:()=>QJe,BasicTextStyleViewerPlugin:()=>Det,pluginRegister:()=>OB});var S={};o.r(S),o.d(S,{BgColorEditorPlugin:()=>PRe,BgColorPlugin:()=>oF,BgColorRenderPlugin:()=>oXe,BgColorViewerPlugin:()=>Tet,pluginRegister:()=>FM});var T={};o.r(T),o.d(T,{BookmarkEditor:()=>V9e,BookmarkEditorPlugin:()=>eKe,BookmarkPlugin:()=>rle,BookmarkRenderPlugin:()=>W9e,BookmarkViewerPlugin:()=>Uit,editBookmarkBlockUIAddon:()=>j$e,editBookmarkInlineUIAddon:()=>K$e,pluginRegister:()=>X$e,viewerBookmarkUIAddon:()=>Rit});var j={};o.r(j),o.d(j,{BreakLinePlugin:()=>dF,BreakLineRenderPlugin:()=>lXe,pluginRegister:()=>iF});var I={};o.r(I),o.d(I,{CalendarCardEditorPlugin:()=>YKe,CalendarCardPlugin:()=>tue,CalendarCardViewerPlugin:()=>dat,editCalendarUIAddon:()=>MKe,pluginRegister:()=>Qse,viewerCalendarUIAddon:()=>iat});var B={};o.r(B),o.d(B,{CardPlugin:()=>LF,CardRenderPlugin:()=>EXe,pluginRegister:()=>dj});var M={};o.r(M),o.d(M,{ClearFormatEditorPlugin:()=>BRe,ClearFormatPlugin:()=>KF,ClearFormatRenderPlugin:()=>RXe,pluginRegister:()=>VF});var F={};o.r(F),o.d(F,{ClipboardPlugin:()=>uL,ClipboardRenderPlugin:()=>lQe,ClipboardViewerPlugin:()=>Het,IClipboardRenderService:()=>WXe,pluginRegister:()=>GF});var L={};o.r(L),o.d(L,{CodeEditorPlugin:()=>LRe,CodePlugin:()=>RU,CodeRenderPlugin:()=>pQe,CodeViewerPlugin:()=>Yet,pluginRegister:()=>hL});var U={};o.r(U),o.d(U,{CodeBlockCardPlugin:()=>T8,CodeblockCardEditorPlugin:()=>mVe,CodeblockCardViewerPlugin:()=>Yrt,editCodeblockUIAddon:()=>qUe,pluginRegister:()=>$se,viewerCodeblockUIAddon:()=>Frt});var V={};o.r(V),o.d(V,{CollapseEditorPlugin:()=>ize,CollapsePlugin:()=>Mee,CollapseRenderPlugin:()=>A8e,CollapseViewerPlugin:()=>Yot,pluginRegister:()=>V7});var H={};o.r(H),o.d(H,{ColorEditorPlugin:()=>$Re,ColorPlugin:()=>hV,ColorRenderPlugin:()=>wQe,ColorViewerPlugin:()=>Xet,pluginRegister:()=>jU});var z={};o.r(z),o.d(z,{ColumnsEditorPlugin:()=>nze,ColumnsPlugin:()=>F7,ColumnsRenderPlugin:()=>$6e,ColumnsViewerPlugin:()=>Eot,IColumnsKernelService:()=>$9,pluginRegister:()=>H9});var W={};o.r(W),o.d(W,{ContainerPlugin:()=>CV,pluginRegister:()=>vV});var q={};o.r(q),o.d(q,{ContentPlugin:()=>QV,IContentKernelService:()=>jV,pluginRegister:()=>NV});var $={};o.r($),o.d($,{CustomThemeEditorPlugin:()=>uJe,CustomThemePlugin:()=>Cse,CustomThemeViewerPlugin:()=>Zat,ICustomThemeKernelService:()=>kT,pluginRegister:()=>yT});var K={};o.r(K),o.d(K,{DarkModeEditorPlugin:()=>aKe,DarkModeViewerPlugin:()=>zit,pluginRegister:()=>nKe});var Y={};o.r(Y),o.d(Y,{DateCardEditorPlugin:()=>rJe,DateCardPlugin:()=>ase,DateCardRenderPlugin:()=>K9e,DateCardViewerPlugin:()=>Jat,VDateCardUIAddon:()=>Wat,editDateCardUIAddon:()=>$Ge,pluginRegister:()=>xce});var G={};o.r(G),o.d(G,{DeletePlugin:()=>dH,DeleteRenderPlugin:()=>DQe,IDeleteKernelService:()=>P5e,pluginRegister:()=>ZV});var J={};o.r(J),o.d(J,{DropFilePlugin:()=>wH,DropFileRenderPlugin:()=>SQe,pluginRegister:()=>fH});var X={};o.r(X),o.d(X,{FallbackCardEditorPlugin:()=>nSe,FallbackCardPlugin:()=>SH,FallbackCardViewerPlugin:()=>att,pluginRegister:()=>AH});var Q={};o.r(Q),o.d(Q,{FileReader:()=>Cj,FileReaderEditorPlugin:()=>aTe,FileReaderPlugin:()=>Gz,IFileReaderKernelService:()=>ET,PreFileReader:()=>UPe,pluginRegister:()=>$z});var Z={};o.r(Z),o.d(Z,{FocusEditorPlugin:()=>sTe,FocusPlugin:()=>nW,FocusRenderPlugin:()=>FQe,focusCardUIAddon:()=>olt,pluginRegister:()=>Jz});var ee={};o.r(ee),o.d(ee,{FontsizeEditorPlugin:()=>gTe,FontsizePlugin:()=>eq,FontsizeRenderPlugin:()=>WQe,FontsizeViewerPlugin:()=>ctt,IFontsizeService:()=>_W,pluginRegister:()=>lW});var te={};o.r(te),o.d(te,{FormatPainterEditorPlugin:()=>OTe,FormatPainterPlugin:()=>vq,FormatPainterRenderPlugin:()=>XQe,IFormatKernelService:()=>rq,IFormatRenderService:()=>wTe,pluginRegister:()=>cq});var ne={};o.r(ne),o.d(ne,{FullscreenEditorPlugin:()=>aIe,IFullscreenEditorService:()=>DTe,pluginRegister:()=>Bse});var re={};o.r(re),o.d(re,{HistoryEditorPlugin:()=>CIe,HistoryPlugin:()=>T$,HistoryRenderPlugin:()=>RZe,IHistoryService:()=>m$,pluginRegister:()=>A$});var oe={};o.r(oe),o.d(oe,{HrCardEditorPlugin:()=>MIe,HrCardPlugin:()=>hK,HrCardViewerPlugin:()=>Ftt,editHrUIAddon:()=>EIe,editableHrUIBase:()=>xIe,pluginRegister:()=>q$});var ie={};o.r(ie),o.d(ie,{INDENT_BLACKLIST:()=>KK,IndentEditorPlugin:()=>qIe,IndentPlugin:()=>RY,IndentRenderPlugin:()=>GZe,IndentViewerPlugin:()=>Vtt,MAX_INDENT:()=>$K,pluginRegister:()=>tY});var ae={};o.r(ae),o.d(ae,{IINodeReaderKernelService:()=>RT,INodeCardPreReader:()=>KPe,INodeCardReader:()=>Ij,INodeReaderPlugin:()=>BY,pluginRegister:()=>TY});var le={};o.r(le),o.d(le,{InputPlugin:()=>ZY,InputRenderPlugin:()=>p0e,pluginRegister:()=>MY});var ue={};o.r(ue),o.d(ue,{KernelAssistantPlugin:()=>doe,pluginRegister:()=>LX});var ce={};o.r(ce),o.d(ce,{LabelCardEditorPlugin:()=>gBe,LabelCardPlugin:()=>eJ,LabelCardViewerPlugin:()=>Ztt,LabelRenderPlugin:()=>b0e,editLabelUIAddon:()=>iBe,editableLabelUIBase:()=>oBe,pluginRegister:()=>Yse,vLabelCardUIBase:()=>$tt,viewerLabelUIAddon:()=>Ktt});var se={};o.r(se),o.d(se,{ILayoutService:()=>uJ,LayoutEditorPlugin:()=>kBe,LayoutPlugin:()=>kJ,LayoutViewerPlugin:()=>nnt,pluginRegister:()=>fJ});var de={};o.r(de),o.d(de,{LineHeightEditorPlugin:()=>PBe,LineHeightPlugin:()=>VJ,LineHeightRenderPlugin:()=>C0e,LineHeightViewerPlugin:()=>int,pluginRegister:()=>CJ});var fe={};o.r(fe),o.d(fe,{ILinkKernelService:()=>KJ,ILinkRenderService:()=>TBe,LinkEditorPlugin:()=>LBe,LinkElement:()=>j0e,LinkPlugin:()=>qX,LinkRenderPlugin:()=>V0e,LinkViewerPlugin:()=>fnt,pluginRegister:()=>QJ});var he={};o.r(he),o.d(he,{IListDataProcessService:()=>aQ,INDEX_TYPE_CHANGE_EVENT:()=>JX,ITaskListModel:()=>ilt,ITaskListRenderDataService:()=>t1e,ITaskListViewerDataService:()=>vnt,LIST_ICONS:()=>ZX,LIST_INDEX_ATTR_NAMES:()=>GX,LIST_LABEL:()=>eQ,LIST_NAMES:()=>XX,ListEditorPlugin:()=>iMe,ListPlugin:()=>C0,ListRenderPlugin:()=>g1e,ListViewerPlugin:()=>Snt,MAX_LIST_LEVEL:()=>YX,NAME_MAP:()=>QX,getLastHeadingIndexType:()=>vQ,getLastIndexType:()=>hQ,pluginRegister:()=>$X,setLastHeadingIndexType:()=>mQ,setLastIndexType:()=>pQ});var pe={};o.r(pe),o.d(pe,{MarkPlugin:()=>F0,MarkRenderPlugin:()=>_1e,MarkViewerPlugin:()=>Fnt,pluginRegister:()=>N0});var ve={};o.r(ve),o.d(ve,{HeadMarkdownMatcher:()=>NS,IMarkdownKernelService:()=>DS,MarkdownPlugin:()=>W0,MarkdownRenderPlugin:()=>O1e,PairMarkdownMatcher:()=>_B,PatternMarkdownMatcher:()=>IT,TriggerType:()=>CS,pluginRegister:()=>OS});var me={};o.r(me),o.d(me,{INotificationManager:()=>P1e,MarkdownPasteParsePlugin:()=>X0,MarkdownPasteParseRenderPlugin:()=>L1e,pluginRegister:()=>q0});var ge={};o.r(ge),o.d(ge,{KaTeXUtil:()=>Cze,MathCardEditorPlugin:()=>oWe,MathCardPlugin:()=>fte,MathCardViewerPlugin:()=>ait,editMathUIAddon:()=>Hze,extendBBox:()=>pze,extendKaTeX:()=>vze,getKaTex:()=>yze,isTrust:()=>uze,pluginRegister:()=>Jse,registerTrust:()=>lze,viewerMathUIAddon:()=>eit});var be={};o.r(be),o.d(be,{MentionCardEditorPlugin:()=>sHe,MentionCardPlugin:()=>a9,MentionCardViewerPlugin:()=>aot,eMentionUIBase:()=>HVe,editMentionUIAddon:()=>zVe,pluginRegister:()=>Xse,vMentionCardUI:()=>Zrt,viewerMentionUIAddon:()=>eot});var ye={};o.r(ye),o.d(ye,{IMetaService:()=>OI,MetaDescriptor:()=>vW,MetaPlugin:()=>l1,pluginRegister:()=>_I});var we={};o.r(we),o.d(we,{IMiniToolbarService:()=>$R,MiniToolbarEditorPlugin:()=>yMe,MiniToolbarViewerPlugin:()=>Wnt,cardToolbarCardUIAddon:()=>y7e,containerRightToolbarCardUIAddon:()=>A7e,containerToolbarCardUIAddon:()=>_7e,editToolbarPresetAddon:()=>D7e,pluginRegister:()=>zR,toolbarBoxUIAddon:()=>llt,toolbarControllerCardUIAddon:()=>N7e});var Ae={};o.r(Ae),o.d(Ae,{MixedTextStyleEditorPlugin:()=>NMe,pluginRegister:()=>Fse});var ke={};o.r(ke),o.d(ke,{MobileEditorPlugin:()=>RMe,pluginRegister:()=>Lse});var _e={};o.r(_e),o.d(_e,{PARAGRAPH_SPACING_DEFAULT:()=>A6,PARAGRAPH_SPACING_RELAX:()=>w6,ParagraphEditorPlugin:()=>IMe,ParagraphPlugin:()=>x1,ParagraphRenderPlugin:()=>q1e,ParagraphViewerPlugin:()=>Knt,getOnlyImgCard:()=>ult,pluginRegister:()=>c1});var Ce={};o.r(Ce),o.d(Ce,{PlaceholderRenderPlugin:()=>X6e,pluginRegister:()=>Use});var Ne={};o.r(Ne),o.d(Ne,{IQuickInputKernelService:()=>j1,IQuickInputRendererService:()=>nFe,QuickInputPlugin:()=>U1,QuickInputRenderPlugin:()=>i2e,pluginRegister:()=>R1});var Oe={};o.r(Oe),o.d(Oe,{IQuoteEditingService:()=>q1,QuoteEditorPlugin:()=>qMe,QuotePlugin:()=>s2,QuoteRenderPlugin:()=>d2e,QuoteViewerPlugin:()=>Jnt,pluginRegister:()=>H1});var xe={};o.r(xe),o.d(xe,{IVisibilityRenderService:()=>p2e,RenderAssistantRenderPlugin:()=>D2e,pluginRegister:()=>Vse,visibilityAddon:()=>slt});var Ee={};o.r(Ee),o.d(Ee,{SaveEditorPlugin:()=>ZMe,SavePlugin:()=>g2,SaveRenderPlugin:()=>S2e,pluginRegister:()=>d2});var De={};o.r(De),o.d(De,{ISearchService:()=>fBe,SearchEditorPlugin:()=>qqe,SearchPlugin:()=>Wie,SearchRenderPlugin:()=>Y8e,pluginRegister:()=>Iie});var Pe={};o.r(Pe),o.d(Pe,{SelectAllPlugin:()=>E2,SelectAllRenderPlugin:()=>M2e,SelectAllViewerPlugin:()=>Znt,pluginRegister:()=>b2});var Re={};o.r(Re),o.d(Re,{ISelectionRenderService:()=>a4e,SelectionPlugin:()=>I2,SelectionRenderPlugin:()=>f4e,SelectionViewerPlugin:()=>ort,pluginRegister:()=>D2});var Se={};o.r(Se),o.d(Se,{SubscriptPlugin:()=>g3,SubscriptRenderPlugin:()=>b4e,SubscriptViewerPlugin:()=>lrt,pluginRegister:()=>J2});var Te={};o.r(Te),o.d(Te,{SummaryPlugin:()=>woe});var je={};o.r(je),o.d(je,{TableEditorPlugin:()=>fLe,TablePlugin:()=>y6,TableRenderPlugin:()=>o6e,TableViewerPlugin:()=>krt,editTableUIBase:()=>flt,pluginRegister:()=>w3});var Ie={};o.r(Ie),o.d(Ie,{ThirdpartyCardViewerPlugin:()=>bit,ThirdpartyEditorPlugin:()=>_We,ThirdpartyPlugin:()=>eoe,ThirdpartyServiceBase:()=>Ute,ThirdpartyUtil:()=>xre,editThirdpartyUIAddon:()=>gWe,editableThirdpartyUIBase:()=>mWe,pluginRegister:()=>hte,vThirdpartyCardUIBase:()=>dit,viewerThirdpartyUIAddon:()=>fit});var Be={};o.r(Be),o.d(Be,{ITOCEditorService:()=>OWe,ITOCKernelService:()=>cte,TOCEditorPlugin:()=>tqe,TOCPlugin:()=>hie,TOCViewerPlugin:()=>Oit});var Me={};o.r(Me),o.d(Me,{TypeWriterEditorPlugin:()=>gLe,pluginRegister:()=>zse});var Fe={};o.r(Fe),o.d(Fe,{ITypographyKernelService:()=>aW,TYPOGRAPHY_CLASSIC:()=>n$,TYPOGRAPHY_TRADITIONAL:()=>t$,TypographyEditorPlugin:()=>vlt,TypographyEnum:()=>e$,TypographyPlugin:()=>V6,TypographyRenderPlugin:()=>l6e,TypographyViewerPlugin:()=>Nrt,pluginRegister:()=>rW});var Le={};o.r(Le),o.d(Le,{ACCEPT_KEY_DESIGN:()=>BH,ACCEPT_KEY_LOCAL_DOC:()=>LH,ACCEPT_KEY_MAC_OFFICE:()=>jH,ACCEPT_KEY_MIND:()=>IH,ACCEPT_KEY_MS_OFFICE:()=>TH,ACCEPT_KEY_PDF:()=>MH,ACCEPT_KEY_UPLOAD:()=>FH,FileUploadTask:()=>PSe,IUploadEditorService:()=>oDe,LOCAL_DOC_ACCEPT_KEY_MAP:()=>UH,UploadEditorPlugin:()=>$Le,pluginRegister:()=>lse});var Ue={};o.r(Ue),o.d(Ue,{VideoCardEditorPlugin:()=>QHe,VideoCardViewerPlugin:()=>yot,VideoPlugin:()=>V9,VideoUploadTask:()=>RHe,eVideoUIBase:()=>CHe,editVideoUIAddon:()=>NHe,pluginRegister:()=>Gse,vVideoUIBase:()=>fot,viewerVideoUIAddon:()=>hot});var Ve={};o.r(Ve),o.d(Ve,{ViewResizeObserverEditorPlugin:()=>nUe,ViewResizeObserverViewerPlugin:()=>Ert,pluginRegister:()=>qse});var He={};o.r(He),o.d(He,{VoteCardEditorPlugin:()=>fYe,VoteCardPlugin:()=>Pue,VoteCardViewerPlugin:()=>Nat,eVoteUIBase:()=>eYe,editVoteUIAddon:()=>tYe,pluginRegister:()=>tde,vVoteUIBase:()=>gat,viewerVoteUIAddon:()=>bat});var ze={};o.r(ze),o.d(ze,{Alert:()=>E,Alignment:()=>D,AoneDataSource:()=>P,Audio:()=>w,AutoScroll:()=>k,BasicTextStyle:()=>R,BgColor:()=>S,Bookmark:()=>T,BreakLine:()=>j,Calendar:()=>I,Card:()=>B,ClearFormat:()=>M,Clipboard:()=>F,Code:()=>L,Codeblock:()=>U,Collapse:()=>V,Color:()=>H,ColorPickerSupport:()=>y,Columns:()=>z,Container:()=>W,Content:()=>q,CustomCard:()=>b,CustomTheme:()=>$,DarkMode:()=>K,DateCard:()=>Y,Delete:()=>G,DropFile:()=>J,FallbackCard:()=>X,File:()=>C,FileReader:()=>Q,Focus:()=>Z,Fontsize:()=>ee,FormatPainter:()=>te,Fullscreen:()=>ne,Heading:()=>O,History:()=>re,HotKey:()=>A,Hr:()=>oe,HtmlDataSource:()=>f,Image:()=>N,Indent:()=>ie,InodeDataSource:()=>ae,Input:()=>le,KernelAssistant:()=>ue,Label:()=>ce,LakeDataSource:()=>u,Layout:()=>se,LineHeight:()=>de,Link:()=>fe,List:()=>he,Mark:()=>pe,Markdown:()=>ve,MarkdownDataSource:()=>s,MarkdownPasteParse:()=>me,Math:()=>ge,Mention:()=>be,Meta:()=>ye,MiniToolbar:()=>we,MixedTextStyle:()=>Ae,Mobile:()=>ke,Monitor:()=>_,Paragraph:()=>_e,Placeholder:()=>Ce,QuickInput:()=>Ne,Quote:()=>Oe,RenderAssistant:()=>xe,Save:()=>Ee,Search:()=>De,Selectall:()=>Pe,Selection:()=>Re,Slash:()=>g,Subscript:()=>Se,Summary:()=>Te,Table:()=>je,TextDataSource:()=>d,TextDiagram:()=>x,Thirdparty:()=>Ie,Toc:()=>Be,Toolbar:()=>v,TypeWriter:()=>Me,Typography:()=>Fe,UiSwitch:()=>m,Upload:()=>Le,Video:()=>Ue,ViewResizeObserver:()=>Ve,Vote:()=>He});var We,qe={Root:"#root",LikeRoot:"~likeRoot",VirtualLikeRoot:"~virtualLikeRoot",TextContainer:"~textContainer",Level:"~level",Text:"#text",Block:"~block",Inline:"~inline",InlineBox:"$inlineBox",Card:"~card",InlineCard:"~inlineCard",BlockCard:"~blockCard",Sticky:"~sticky",DisallowEmpty:"~disallowEmpty",Clean:"~clean",Heading:"~heading",TableHole:"~tableHole",Table:"~table",TableRow:"~tableRow",TableCell:"~tableCell",Hole:"~hole",RootCardHole:"~rootChildHole",AttrContext:"~attrContext",AlertHole:"~AlertHole",ContainerHole:"~containerHole",WidthModeBox:"~widthModeBox",OnlyText:"~onlyText",Brick:"~brick"};!function(e){e.User="user",e.Init="init",e.History="history",e.Auto="auto",e.Silent="silent",e.OT="ot"}(We||(We={}));var $e=o(3075),Ke=o(8599),Ye=(0,$e.A)((function e(){(0,Ke.A)(this,e)})),Ge=o(1444),Je=o(2720),Xe=o(9239),Qe=(0,$e.A)((function e(){(0,Ke.A)(this,e)}));function Ze(e){return{kind:"ServiceID",value:e,_:1}}function et(e){return e.value}function tt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,nt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function nt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nt=function(){return!!e})()}var rt=function(e){function t(e,n,r){var o;return(0,Ke.A)(this,t),o=tt(this,t),Object.defineProperty(o,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(o,"editing",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(o,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:r}),o}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Qe),ot=o(2310);const it=ot;var at,lt={currentURL:"undefined"!=typeof location?location.href:"about:blank",disabledPlugins:[],eventEmitter:null,theme:"light"},ut=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Object.assign(Object.assign(Object.assign({},lt),t),{eventEmitter:(null==t?void 0:t.eventEmitter)||new it})}),[{key:"disabledPlugins",get:function(){return this._option.disabledPlugins.slice()}},{key:"eventEmitter",get:function(){return this._option.eventEmitter}},{key:"currentURL",get:function(){return this._option.currentURL}},{key:"theme",get:function(){return this._option.theme}},{key:"disableSameIdentifier",get:function(){return this._option.disableSameIdentifier}}])}(),ct=function(){return(0,$e.A)((function e(t,n,r){(0,Ke.A)(this,e),Object.defineProperty(this,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"editing",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"option",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"service",{enumerable:!0,configurable:!0,writable:!0,value:null})}),[{key:"setService",value:function(e){this.service=e}},{key:"afterInit",value:function(){}},{key:"destroy",value:function(){var e;null===(e=this.service)||void 0===e||e.destroy(),this.service=null}},{key:"sync",value:function(){return!0}}])}(),st=-1,dt=0,ft=1,ht=2;!function(e){e[e.Unavailable=-1]="Unavailable",e[e.NotExecuted=0]="NotExecuted",e[e.Executed=1]="Executed",e[e.Unknown=2]="Unknown"}(at||(at={}));var pt=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e),Object.defineProperty(this,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"editing",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}),[{key:"init",value:function(e,t){this.kernel=e,this.editing=t}},{key:"destroy",value:function(){}},{key:"getState",value:function(e){return at.Unavailable}},{key:"isEnabled",value:function(e){return this.getState(e)!==at.Unavailable}},{key:"execute",value:function(e){return!1}},{key:"getValue",value:function(e){return!1}}])}();function vt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,mt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function mt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mt=function(){return!!e})()}Object.defineProperty(pt,"UNAVAILABLE",{enumerable:!0,configurable:!0,writable:!0,value:at.Unavailable}),Object.defineProperty(pt,"EXECUTED",{enumerable:!0,configurable:!0,writable:!0,value:at.Executed}),Object.defineProperty(pt,"NOT_EXECUTED",{enumerable:!0,configurable:!0,writable:!0,value:at.NotExecuted}),Object.defineProperty(pt,"UNKNOWN",{enumerable:!0,configurable:!0,writable:!0,value:at.Unknown});var gt=function(e){function t(e,n,r){var o;return(0,Ke.A)(this,t),o=vt(this,t),Object.defineProperty(o,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(o,"editing",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(o,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:r}),o}return(0,Xe.A)(t,e),(0,$e.A)(t)}(pt),bt=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!t)throw e.globalLogger&&e.globalLogger("".concat(n||""),"".concat(r||n||""),o),new Error("lakex_editor_assert_error ".concat(n||""," ").concat(r||""))};bt.setGlobalLogger=function(e){return bt.globalLogger=e,function(){bt.globalLogger=void 0}},bt.fatal=function(){return bt(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2],0)},bt.error=function(){return bt(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2],1)},bt.warn=function(){return bt(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2],2)},bt.info=function(){return bt(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2],3)},bt.debug=function(){return bt(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2],4)};var yt,wt,At=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,Ke.A)(this,e),Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_offset",{enumerable:!0,configurable:!0,writable:!0,value:n})}return(0,$e.A)(e,[{key:"node",get:function(){return this._node}},{key:"offset",get:function(){return this._offset}},{key:"isAtStart",get:function(){return 0===this._offset}},{key:"isAtEnd",get:function(){return this._node.isElement()?this._node.childCount===this._offset:!!this._node.isCardNode()||(bt.fatal(this._node.isTextNode(),"framework/kernel/src/model/selection/position.ts:44"),this._node.dataLength===this._offset)}},{key:"clone",value:function(){return new e(this._node,this._offset)}}],[{key:"equal",value:function(e,t){return e===t||e._node===t._node&&e._offset===t._offset}}])}();function kt(e,t){var n={equal:!1,contains:!1,containedBy:!1,preceding:!1,following:!1};if(e===t)return n.equal=!0,n;if(e.isRootNode())return n.contains=!0,n;if(t.isRootNode())return n.containedBy=!0,n;for(var r=e.getPath(),o=t.getPath(),i=r.length,a=o.length,l=0,u=Math.min(i,a);l<u;l++){var c=r[l],s=o[l];if(c<s)return n.preceding=!0,n;if(c>s)return n.following=!0,n}return bt.fatal(i!==a,"invalid compare node, aPath=".concat(r,", bPath=").concat(o),"framework/kernel/src/model/utils/node/compare-node.ts:65"),r.length<o.length?n.contains=!0:n.containedBy=!0,n}function _t(e,t){var n=[];for("string"==typeof(t=t||[])&&(t=[t]);e&&(n.push(e),!t.length||!e.hasCategory(t));){if(e.isRootNode()){if(t.length)return null;break}e=e.parent}return n.reverse()}function Ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Nt(e){return e.isTextNode()?0===e.dataLength:!e.isCardNode()&&!e.hasCategory([qe.Table,qe.TableRow,qe.TableCell])&&(bt.fatal(e.isElement(),"framework/kernel/src/model/utils/node/is-like-empty-element.ts:25"),!!e.isEmpty()||e.children.every((function(e){return Nt(e)})))}function Ot(e,t){var n=t.enter,r=t.leave;(n||r)&&xt(e,n,r)}function xt(e,t,n){if(t&&!1===t(e))return!1;if(e.isElement())for(var r=e.children,o=0,i=r.length;o<i;o++)if(!1===xt(r[o],t,n))return!1;return(!n||!1!==n(e))&&void 0}function Et(e){var t=[],n=null;if(e.hasCategory([qe.TableHole,qe.Hole]))return new At(e,0);if(Ot(e,{leave:function(e){if(n)return!1;if(e.isTextNode()){if(t.push(e),!e.isEmpty())return n=new At(e,0),!1}else if(e.hasCategory(qe.Inline)){if(t.push(e),!Nt(e))return n=new At(e,0),!1}else{if(e.hasCategory(qe.Block))return bt.fatal(e.hasCategory(qe.TextContainer),"framework/kernel/src/model/utils/node/get-head-input-position.ts:38"),n=new At(e,0),!1;if(e.hasCategory([qe.Root,qe.LikeRoot])&&0===e.childCount)return n=new At(e,0),!1;if(e.hasCategory([qe.TableHole,qe.Hole]))return n=new At(e,0),!1}}}),n)return n;if(t.length){var r=t[0];if(r.isTextNode())return bt.fatal(0===r.dataLength,"framework/kernel/src/model/utils/node/get-head-input-position.ts:63"),new At(r,0);if(r.hasCategory([qe.TextContainer,qe.TableHole,qe.Hole,qe.Root,qe.LikeRoot]))return new At(r,0)}return null}function Dt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.enter,r=t.leave;(n||r)&&Pt(e,n,r)}function Pt(e,t,n){if(t&&!1===t(e))return!1;if(e.isElement())for(var r=e.children,o=r.length-1;o>=0;o--)if(!1===Pt(r[o],t,n))return!1;return!n||!1!==n(e)}!function(e){e.RootNode="RootNode",e.Element="Element",e.Card="Card",e.Hole="Hole",e.Text="Text"}(yt||(yt={})),function(e){e.Element="element",e.Card="card",e.Text="text"}(wt||(wt={}));var Rt="collapse",St="summary";function Tt(e){return e.hasCategory(qe.Heading)}function jt(e){return Tt(e)?parseInt(e.nodeName.slice(1),10):Number.MAX_VALUE}function It(e){return Tt(e)&&"true"===e.attrs.collapsed}function Bt(e){for(;e.parent;){if(e.parent.hasCategory(qe.Root))return e;e=e.parent}return null}function Mt(e,t){if(!(e&&e.isConnected&&t&&t.isConnected&&Tt(t)))return!1;if(e.closest(qe.Heading)===t)return!1;var n=Bt(e);if(!n)return!1;for(var r=jt(t),o=n.previousSibling;o;){if(Tt(o)){if(o===t)return!0;if(jt(o)<=r)return!1}o=o.previousSibling}return!1}function Ft(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=function(){var r=Bt(e);if(!r)return 1;for(var o=jt(e),i=r;i;){if(Tt(i)){var a=jt(i);if(a<o)n.push(i),o=a;else if(a<=1)break;if(t.length>0){var l=t.findIndex((function(e){return e.id===i.id}));i=t[l-1];continue}}i=i.previousSibling}};do{if(r())break}while(false);return n}function Lt(e,t){var n=t.attrs,r=e.getNodeSchema(t.name);return r?"element"===r.type?function(e,t){var n=t.name,r=t.attrs,o=t.children,i=e.createElement(n,r,t.id);return o&&o.forEach((function(t){var r=Lt(e,t);r&&e.acceptNode(n,r.nodeName)&&e.appendChild(i,r)})),i}(e,t):"text"===r.type?e.createTextNode(t.data,n,t.id):(bt.fatal("card"===r.type,"framework/kernel/src/model/utils/node/json-to-node.ts:38"),e.createCardNode(t.name,t.attrs,t.id)):null}var Ut=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"closest",value:function(e,t){for(;e;){if(e.hasCategory(t))return e;e=e.parent}return null}},{key:"jsonToNode",value:function(e,t){return function(e,t){return Lt(e,t)}(e,t)}},{key:"getAncestors",value:function(e,t){return _t(e,t)}},{key:"getAncestor",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(bt.fatal(t.length>0,"invalid getAncestor","framework/kernel/src/model/utils/node/index.ts:63");e;){if(e.hasCategory(t,n))return e;if(e.isRootNode())return null;e=e.parent}return null}},{key:"getCommonAncestor",value:function(e,t){return function(e,t){if(!e.length)return null;var n,r=[],o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ct(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ct(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(e);try{for(o.s();!(n=o.n()).done;){var i=_t(n.value,t);if(!(null==i?void 0:i.length))return null;r.push(i)}}catch(e){o.e(e)}finally{o.f()}if(1===r.length)return r[0][r[0].length-1];for(var a=0,l=null;r.every((function(e){return e[Math.min(a,e.length-1)]===r[0][Math.min(a,r[0].length-1)]}));)l=r[0][Math.min(a,r[0].length-1)],a++;return l}(e,t)}},{key:"compare",value:function(e,t){return kt(e,t)}},{key:"unwrapNode",value:function(e,t){return function(e,t){var n=t.parentNode;bt.fatal(t.isElement()&&n,"failed to execute unwrapNode","framework/kernel/src/model/utils/node/unwrap-node.ts:8"),t.children.forEach((function(r){e.insertBefore(n,r,t)})),e.removeChild(n,t)}(e,t)}},{key:"getHeadInputPosition",value:function(e){return Et(e)}},{key:"getTailInputPosition",value:function(e){return function(e){var t,n=[];if(Dt(e,{leave:function(r){if(r.isTextNode()){if(n.push(r),!r.isEmpty())return t=new At(r,r.dataLength),!1}else if(r.hasCategory(qe.TextContainer))n.push(r);else if(e.hasCategory(qe.TextContainer))return t=new At(e,e.childCount),!1;return!0}}),t)return t;if(n.length){var r=n[0];return r.isTextNode()?(bt.fatal(0===r.dataLength,"framework/kernel/src/model/utils/node/get-tail-input-position.ts:39"),new At(r,r.dataLength)):(bt.fatal(r.isElement()&&r.hasCategory(qe.TextContainer),"framework/kernel/src/model/utils/node/get-tail-input-position.ts:43"),new At(r,r.childCount))}return null}(e)}},{key:"isLikeEmptyElement",value:function(e){return Nt(e)}},{key:"walkNode",value:function(e,t){return Ot(e,t)}},{key:"reverseWalkNode",value:function(e,t){return Dt(e,t)}},{key:"getTopNode",value:function(e){return function(e){if(!e.parent)return null;for(var t=e.parent,n=e;t&&!t.isRootNode();)n=t,t=t.parent;return n}(e)}},{key:"isInCollapsed",value:function(e){return!!e.isConnected&&function(e){if(!e)return!1;var t=e.closest(Rt);if(t&&t!==e&&!e.closest(St)&&"false"===t.attrs.open)return t;var n=Bt(e);if(!n)return!1;for(var r=n.previousSibling,o=jt(n);r;){if(Tt(r)){var i=jt(r);if(i<o){if(It(r))return r;o=i}else if(i<=1)return!1}r=r.previousSibling}return!1}(e)}},{key:"isBelongsToHeadingNode",value:function(){return Mt.apply(void 0,arguments)}},{key:"getAncestorHeadingNodes",value:function(e){return Ft(e)}},{key:"getHeadingNodes",value:function(e){return function(e){for(var t=[],n=e.lastChild;n;)Tt(n)&&t.unshift(n),n=n.previousSibling;return t}(e)}},{key:"isInHeadingCollapsed",value:function(e,t){return function(e,t){if(!e||!t)return!1;var n=Bt(e);if(!n)return!1;for(var r=jt(n),o=t.length-1;o>=0;o--){var i=t[o];if(!(i.offset>=n.offset)){var a=jt(i);if(a<r){if("true"===i.attrs.collapsed)return i;r=a}if(a<=1)return!1}}return!1}(e,t)}},{key:"getRootCollapsedNode",value:function(e,t){return function(e,t){if(!e)return null;for(var n=Ft(e,t).reverse(),r=0;r<n.length;r++){var o=n[r];if(It(o))return o}var i=e.closest(Rt);return i&&i!==e&&e.nodeName!==St&&"false"===i.attrs.open?i:null}(e,t)}},{key:"getLastNodeBelongsToHeadingNode",value:function(e){return function(e){var t;bt.fatal((null===(t=e.parent)||void 0===t?void 0:t.isRootNode())&&Tt(e),"framework/kernel/src/model/utils/node/is-in-collapsed.ts:280");var n=jt(e),r=e,o=e.nextSibling;do{if(!o)return r;if(Tt(o)&&jt(o)<=n)return r;r=o,o=null==o?void 0:o.nextSibling}while(o);return r}(e)}},{key:"getAllBelongsToHeadingNode",value:function(e){return function(e){var t;bt.fatal((null===(t=e.parent)||void 0===t?void 0:t.isRootNode())&&Tt(e),"framework/kernel/src/model/utils/node/is-in-collapsed.ts:301");var n=jt(e),r=[e],o=e.nextSibling;do{if(!o)return r;if(Tt(o)&&jt(o)<=n)return r;r.push(o),o=null==o?void 0:o.nextSibling}while(o);return r}(e)}}])}(),Vt=function(){function e(t,n){(0,Ke.A)(this,e),Object.defineProperty(this,"_start",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_end",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_collapsed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._start=t,this._end=n||t,this._collapsed=At.equal(t,this._end)}return(0,$e.A)(e,[{key:"start",get:function(){return this._start}},{key:"end",get:function(){return this._end}},{key:"collapsed",get:function(){return this._collapsed}},{key:"commonAncestorContainer",get:function(){if(this._collapsed)return this._start.node;for(var e=Ut.getAncestors(this._start.node),t=Ut.getAncestors(this._end.node),n=Math.min(e.length,t.length),r=0;r<n;r++)if(e[r]!==t[r])return e[r].parentNode;return e[n-1]}},{key:"cloneRange",value:function(){return new e(this._start,this._end)}}],[{key:"createAt",value:function(t,n){return new e(t,n)}},{key:"selectNodeContents",value:function(t){if(t.isElement())return e.createAt(new At(t,0),new At(t,t.childCount));if(t.isTextNode())return e.createAt(new At(t,0),new At(t,t.dataLength));if(t.isCardNode())return e.createAt(new At(t,0));throw new Error("invalid range")}},{key:"selectNode",value:function(t){return bt.fatal(t.isConnected,"framework/kernel/src/model/selection/range.ts:44"),t.isRootNode()?e.createAt(new At(t,0),new At(t,t.childCount)):e.createAt(new At(t.parentNode,t.offset),new At(t.parentNode,t.offset+1))}},{key:"equal",value:function(e,t){return!(!e||!t)&&(e===t||At.equal(e.start,t.start)&&At.equal(e.end,t.end))}}])}(),Ht=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"destroy",value:function(){}}])}(),zt=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e),Object.defineProperty(this,"_dataSource",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_metaFilters",{enumerable:!0,configurable:!0,writable:!0,value:{}})}),[{key:"destroy",value:function(){delete this._dataSource,delete this._metaFilters}},{key:"register",value:function(e,t){bt.fatal(!this._dataSource[e],"framework/kernel/src/data-source-manager.ts:26"),bt.fatal(t instanceof Ht,"framework/kernel/src/data-source-manager.ts:27"),this._dataSource[e]=t}},{key:"registerMetaFilter",value:function(e,t){bt.fatal(t instanceof Ye,"framework/kernel/src/data-source-manager.ts:33"),this._metaFilters[e]=t}},{key:"matchType",value:function(e){return!!this._dataSource[e]}},{key:"read",value:function(e,t,n){var r,o=this._dataSource[e].read(t,n);return(null===(r=null==o?void 0:o.attrs)||void 0===r?void 0:r.meta)&&(o.attrs.meta=this._filterMeta(o.attrs.meta)),o}},{key:"write",value:function(e,t,n){return this._dataSource[e].write(t,n)}},{key:"_filterMeta",value:function(e){var t={},n=this._metaFilters;return Object.keys(e).forEach((function(r){if(n[r]){var o=n[r].filter(r,e[r]);o&&(t[r]=o)}})),t}}])}(),Wt=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"toText",value:function(e){return""}}])}(),qt=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"toText",value:function(e,t){return""}},{key:"toHTML",value:function(e,t,n){return""}},{key:"fromHTML",value:function(e){return null}}])}();function $t(e,t){for("string"==typeof(t=t||[])&&(t=[t]);e;){if(e.hasCategory(t))return e;e=e.parentNode}return null}function Kt(e,t,n,r){var o=t.node;if(o.isCardNode())return t;var i=$t(o,n);return i&&i!==o?"right"===r?function(e,t,n){var r=t.node,o=t.offset;if(r.isTextNode()){if(o!==r.dataLength)return t;o=r.offset+1,r=r.parentNode}for(bt.fatal(r.isElement(),"framework/kernel/src/model/utils/position/alignment-to-element.ts:80");r!==n&&o===r.parentNode.childCount;)o=r.offset+1,r=r.parentNode;return e.newPosition(r,o)}(e,t,i):(bt.fatal("left"===r,"framework/kernel/src/model/utils/position/alignment-to-element.ts:30"),function(e,t,n){var r=t.node,o=t.offset;if(r.isTextNode()){if(0!==o)return t;o=r.offset,r=r.parentNode}for(bt.fatal(r.isElement(),"framework/kernel/src/model/utils/position/alignment-to-element.ts:50");r!==n&&0===o;)o=r.offset,r=r.parentNode;return e.newPosition(r,o)}(e,t,i)):t}function Yt(e,t,n){var r={};return Object.keys(n).forEach((function(o){e.acceptAttr(t,o,n[o])&&(r[o]=n[o])})),r}function Gt(e){return Jt(e.node,e.offset)}function Jt(e,t){if(e.isTextNode())return e.cloneNode(!1);if(!e.childCount)return null;var n=e.getChildByOffset(t-1),r=!1;return n||(r=!0,n=e.getChildByOffset(t)),n.isTextNode()?n.cloneNode(!1):n.hasCategory(qe.Inline)?Jt(n,r?0:n.childCount):null}function Xt(e){var t=e.node,n=e.offset;if(Nt(t))return!0;if(t.isTextNode()){if(n<t.dataLength)return!1;n=t.offset+1,t=t.parentNode}return n===t.childCount}function Qt(e){var t=e.node,n=e.offset;if(t.isTextNode()){if(0!==n)return!1;n=t.offset}return 0===n}function Zt(e,t){var n=t.node,r=t.offset;if(!n.isElement())return t;if(bt.fatal(!n.isCardNode(),"framework/kernel/src/model/utils/position/helpers/split-element.ts:13"),Nt(n))return e.newPosition(n.parentNode,n.offset+1);if(0===r)return e.newPosition(n.parentNode,n.offset);if(r===n.childCount)return e.newPosition(n.parentNode,n.offset+1);var o=n.cloneNode(!1);return n.children.slice(r).forEach((function(t){e.appendChild(o,t)})),e.insertAfter(n.parentNode,o,n),e.newPosition(o.parentNode,o.offset)}function en(e,t){var n=t.node,r=t.offset;return n.hasCategory(qe.Inline)?0===r?e.newPosition(n.parentNode,n.offset):r===n.childCount?e.newPosition(n.parentNode,n.offset+1):function(e,t,n){var r=t.cloneNode(!1);return t.children.slice(n).forEach((function(t){e.appendChild(r,t)})),bt.fatal(r.childCount>0&&t.childCount>0,"framework/kernel/src/model/utils/position/helpers/split-inline-node.ts:32"),e.insertAfter(t.parentNode,r,t),e.newPosition(r.parentNode,r.offset)}(e,n,r):t}var tn=o(7510);function nn(e,t){var n,r=e.charCodeAt(t);if(!((n=r)>=55296&&n<56320&&t+1!==e.length))return r;var o=e.charCodeAt(t+1);return function(e){return e>=56320&&e<57344}(o)?o-56320+(r-55296<<10)+65536:r}function rn(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function on(e){return e<65536?1:2}var an,ln=o(4522),un=/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26D3\uFE0F?(?:\u200D\uD83D\uDCA5)?|\u26F9(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF43\uDF45-\uDF4A\uDF4C-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDF44(?:\u200D\uD83D\uDFEB)?|\uDF4B(?:\u200D\uD83D\uDFE9)?|\uDFC3(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4\uDEB5](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE41\uDE43\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC08(?:\u200D\u2B1B)?|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC26(?:\u200D(?:\u2B1B|\uD83D\uDD25))?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?|\uDE42(?:\u200D[\u2194\u2195]\uFE0F?)?|\uDEB6(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC2\uDECE-\uDEDB\uDEE0-\uDEE8]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDCE(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1|\uDDD1\u200D\uD83E\uDDD2(?:\u200D\uD83E\uDDD2)?|\uDDD2(?:\u200D\uD83E\uDDD2)?))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g;function cn(e){for(var t,n=[],r=0;t=un.exec(e);){var o=t[0];n.push.apply(n,(0,ln.A)(e.substring(r,t.index))),n.push(o),r=t.index+o.length}return n.length?(n.push.apply(n,(0,ln.A)(e.substring(r))),n):(0,ln.A)(e)}var sn="function"==typeof String.prototype.normalize?function(e){return e.normalize("NFC")}:function(e){return e},dn=function(){return(0,$e.A)((function e(t,n,r){(0,Ke.A)(this,e),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:{from:0,to:0}}),Object.defineProperty(this,"done",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"matches",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"buffer",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"bufferPos",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"normalize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"query",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,an,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.buffer=t||"",this.normalize=r?function(e){return r(sn(e))}:sn,this.query=this.normalize(n)}),[{key:"peek",value:function(){return this.bufferPos>=this.buffer.length?-1:nn(this.buffer,this.bufferPos)}},{key:"next",value:function(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}},{key:"nextOverlapping",value:function(){for(;;){var e=this.peek();if(e<0)return this.done=!0,this;var t=rn(e),n=this.normalize(t),r=this.bufferPos;this.bufferPos+=on(e);for(var o=0,i=r;;o++){var a=n.charCodeAt(o),l=this.match(a,i);if(o===n.length-1){if(l)return this.value=l,this;break}i===r&&o<t.length&&t.charCodeAt(o)===a&&i++}}}},{key:"match",value:function(e,t){for(var n=null,r=0;r<this.matches.length;r+=2){var o=this.matches[r],i=!1;this.query.charCodeAt(o)===e&&(o===this.query.length-1?n={from:this.matches[r+1],to:t+1}:(this.matches[r]++,i=!0)),i||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)===e&&(1===this.query.length?n={from:t,to:t+1}:this.matches.push(1,t)),n}}])}();an=Symbol.iterator,"undefined"!=typeof Symbol&&(dn.prototype[Symbol.iterator]=function(){return this});var fn=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"matchAll",value:function(e,t){for(var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e9,r=new dn(e,t,arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?void 0:function(e){return e.toLowerCase()}),o=[];!r.next().done;){if(o.length>=n)return null;o.push(r.value)}return o}},{key:"replaceRange",value:function(e,t,n){return bt(t.from>=0&&t.to<=e.length,"framework/utils/src/strings/helpers/string-query.ts:156"),e.substring(0,t.from)+n+e.substring(t.to)}},{key:"replaceAll",value:function(e,t,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e9;if(!e)return e;if(!t)return e;for(var o=new dn(e,t,arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?void 0:function(e){return e.toLowerCase()}),i=0,a="",l="",u=0;!(o.next().done||++i>r);)a+=e.slice(u,o.value.from)+n,u=o.value.to,l=e.slice(u);return a+l}}])}();function hn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var pn=/[\u0021-\u002F\u003A-\u0040\u005B-\u0060\u007B-\u007E\u00A1-\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65\uFFE5]/,vn=/[\u3400-\u9FBF]/,mn=/[A-z|0-9|\u00C0-\u00FF|\u0100-\u02AF|\u0370-\u03FF|\u1D00-\u1DBF|\u1E00-\u1FFF|\u2070-\u2079|\u2080-\u2089|\u2460-\u24FF|\u2776-\u2793|\u2100-\u218F|\u2200-\u22FF|\u2C60-\u2C7F|\uA720-\uA7FF]/,gn=function(){function e(){(0,Ke.A)(this,e)}return(0,$e.A)(e,null,[{key:"isChineseChar",value:function(e){return!!e&&vn.test(e)}},{key:"isEnAndNumber",value:function(e){return!!e&&mn.test(e)}},{key:"isPunc",value:function(e){return!!e&&pn.test(e)}},{key:"splitEmoji",value:function(e){return function(e){for(var t,n=[],r=0;t=un.exec(e);){var o=t[0];r===t.index?0===r?(n.push(""),n.push(o)):n[n.length-1]+=o:(n.push(e.substring(r,t.index)),n.push(o)),r=t.index+o.length}return n.length?(r<e.length&&n.push(e.substring(r)),n):[e]}(e)}},{key:"codePointAt",value:function(e,t){return nn(e,t)}},{key:"fromCodePoint",value:function(e){return rn(e)}},{key:"codePointSize",value:function(e){return on(e)}},{key:"splitString",value:function(e,t){if(0===t)return["",e];if(t>e.length)throw new Error("invalid");return[e.substring(0,t),e.substring(t)]}},{key:"insertString",value:function(t,n,r){if(0===n)return r+t;var o=e.splitString(t,n);return o[0]+r+o[1]}},{key:"deleteChar",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=t.substring(0,n),i=t.substring(n);if("forward"===e){var a=cn(o);return(a=a.slice(0,a.length-r)).join("")+i}return o+cn(i).slice(r).join("")}},{key:"deleteString",value:function(e,t,n){return e.substring(0,t)+e.substring(n)}},{key:"substring",value:function(e,t,n){return e.substring(t,n)}},{key:"replaceString",value:function(e,t,n,r){return bt(t>=0&&n<=e.length,"framework/utils/src/strings/index.ts:126"),e.substring(0,t)+r+e.substring(n)}},{key:"replaceSourceText",value:function(e,t,n,r){if(!e)return e;var o=e.split(t);return r>=o.length-1?e:o.reduce((function(e,o,i){return 0===i?o:i===r+1?e+n+o:e+t+o}),"")}},{key:"replaceAll",value:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return fn.replaceAll(e,t,n,r)}},{key:"search",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return fn.matchAll(e,t,n)}},{key:"splitByRanges",value:function(e,t){var n,r=0,o=[],i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return hn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hn(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;o.push(e.substring(r,a.from)),o.push(e.slice(a.from,a.to)),r=a.to}}catch(e){i.e(e)}finally{i.f()}return o.push(e.slice(r)),o}},{key:"replaceRange",value:function(e,t,n){return e.substring(0,t.from)+n+e.substring(t.to)}},{key:"size",value:function(e){return e.length}}])}(),bn="between",yn="front",wn="behind",An="empty_text";function kn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bn,r=t.node,o=t.offset;return r.isTextNode()?0===o?function(e,t,n){if(n===bn)return e.newPosition(t.parentNode,t.offset);if(n===yn||n===wn)return e.newPosition(t,0);bt.fatal(n===An,"framework/kernel/src/model/utils/position/helpers/split-text-node.ts:54");var r=t.cloneNode(!1);return e.setTextNodeData(r,""),e.insertBefore(t.parentNode,r,t),e.newPosition(r,0)}(e,r,n):o===gn.size(r.data)?function(e,t,n){if(n===bn)return e.newPosition(t.parentNode,t.offset+1);if(n===yn||n===wn)return e.newPosition(t,0);bt.fatal(n===An,"framework/kernel/src/model/utils/position/helpers/split-text-node.ts:77");var r=t.cloneNode(!1);return e.setTextNodeData(r,""),e.insertAfter(t.parentNode,r,t),e.newPosition(r,0)}(e,r,n):function(e,t,n,r){var o=gn.splitString(t.data,n),i=(0,tn.A)(o,2),a=i[0],l=i[1];bt.fatal(a&&l,"framework/kernel/src/model/utils/position/helpers/split-text-node.ts:95");var u=t.cloneNode(!1);e.setTextNodeData(t,a),e.setTextNodeData(u,l),e.insertAfter(t.parentNode,u,t);var c=e.editing.kernel.getExtend("text_helper");if(c&&c.afterSplitText(e,t,u),r===bn)return e.newPosition(t.parentNode,t.offset+1);if(r===yn)return e.newPosition(t,n);if(r===wn)return e.newPosition(u,0);bt.fatal(r===An,"framework/kernel/src/model/utils/position/helpers/split-text-node.ts:120");var s=t.cloneNode(!1);return e.setTextNodeData(s,""),e.insertAfter(t.parentNode,s,t),e.newPosition(s,0)}(e,r,o,n):t}var _n=1,Cn=2;function Nn(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];bt.fatal(e&&e.node.isConnected,"framework/kernel/src/model/utils/position/helpers/verify-position.ts:13");var n=t?3:0;e.node.isCardNode()?bt.fatal(0===e.offset,"framework/kernel/src/model/utils/position/helpers/verify-position.ts:18"):e.node.isTextNode()?bt.fatal(e.offset>=0&&e.offset<=e.node.data.length,"position.offset: ".concat(e.offset," is out of range, node.data.length: ").concat(e.node.data.length,", connected: ").concat(e.node.isConnected),"framework/kernel/src/model/utils/position/helpers/verify-position.ts:23"):(bt.fatal(e.node.isElement()&&e.offset>=0&&e.offset<=e.node.childCount,"framework/kernel/src/model/utils/position/helpers/verify-position.ts:28"),!0===t||(_n|Cn)&n?bt.fatal(e.node.hasCategory([qe.TextContainer,qe.Root,qe.LikeRoot,qe.TableHole,qe.Hole]),"framework/kernel/src/model/utils/position/helpers/verify-position.ts:36"):t&&(_n&n?bt.fatal(e.node.hasCategory(qe.TextContainer),"framework/kernel/src/model/utils/position/helpers/verify-position.ts:50"):Cn&t&&bt.fatal(e.node.hasCategory([qe.Root,qe.LikeRoot,qe.TableHole,qe.Hole]),"framework/kernel/src/model/utils/position/helpers/verify-position.ts:53")))}function On(e,t,n){var r=t.node;return r.hasCategory([qe.Root,qe.LikeRoot])?t=function(e,t){var n=e.createElement(e.defaultElementName);return t.node.isEmpty()&&(t=e.insertNodeByPosition(t,n.cloneNode(!1))),e.insertNodeByPosition(t,n),e.newPosition(n,0)}(e,t):r.hasCategory([qe.TableHole,qe.Hole])?t=function(e,t){var n=t.node,r=t.offset,o=e.createElement(e.defaultElementName);return 1===r?(e.insertAfter(n.parentNode,o,n),e.newPosition(o,0)):(bt.fatal(0===r,"framework/kernel/src/model/utils/position/break-line.ts:198"),e.insertBefore(n.parentNode,o,n),t)}(e,t):(bt.fatal(r.hasCategory([qe.TextContainer,qe.Text]),"framework/kernel/src/model/utils/position/break-line.ts:31"),t=Nt(r.closest(qe.Block))?function(e,t){var n=$t(t.node,qe.Block),r=n.attrs.level;if(r)return r>1?e.setAttribute(n,"level",r-1):e.removeAttribute(n,"level"),e.newPosition(n,0);var o=e.defaultElementName;if(n.nodeName===o&&Nt(n)&&"quote"===n.parentNode.nodeName)return Nt(n.parentNode)?(e.replaceChild(n.parentNode.parentNode,n,n.parentNode),e.newPosition(n,0)):(t=Zt(e,e.newPosition(n.parentNode,n.offset+1)),e.insertNodeByPosition(t,n),e.newPosition(n,0));var i=t.node.closest(qe.Text),a=n.hasCategory(qe.Clean),l=a?{}:Yt(e,o,n.attrs),u=e.createElement(o,l);return i&&!a&&e.acceptNode(u.nodeName,i.nodeName)&&e.appendChild(u,i.cloneNode(!1)),e.insertAfter(n.parentNode,u,n),n.hasCategory(qe.DisallowEmpty)&&e.removeChild(n.parentNode,n),e.newPosition(u,0)}(e,t):function(e,t,n){var r=Gt(t),o=t=en(e,kn(e,t)),i=o.node,a=o.offset;if(!i.isElement())return t;bt.fatal(i.hasCategory(qe.Block),"framework/kernel/src/model/utils/position/break-line.ts:62");var l=function(e,t,n){var r=$t(t.node,qe.Block);if(n||Xt(t)&&!r.hasCategory(qe.Sticky)){var o=r.hasCategory(qe.Clean)?{}:r.attrs,i=e.defaultElementName,a=Yt(e,i,o);return e.createElement(i,a)}return xn(e,r.cloneNode(!1))}(e,t,n),u=null;return Qt(t)?(e.insertBefore(i.parentNode,l,i),u=i,i.children.forEach((function(t){bt.fatal(t.hasCategory([qe.Inline,qe.InlineCard,qe.Text]),"framework/kernel/src/model/utils/position/break-line.ts:74"),Nt(t)&&e.removeChild(i,t)}))):(i.children.slice(a).forEach((function(t){bt.fatal(t.hasCategory([qe.Inline,qe.InlineCard,qe.Text]),"framework/kernel/src/model/utils/position/break-line.ts:89"),Nt(t)?e.removeChild(i,t):e.appendChild(l,t)})),i.children.slice(0,a).forEach((function(t){bt.fatal(t.hasCategory([qe.Inline,qe.InlineCard,qe.Text]),"framework/kernel/src/model/utils/position/break-line.ts:106"),Nt(t)&&e.removeChild(i,t)})),e.insertAfter(i.parentNode,l,i),u=l),!r||i.hasCategory(qe.Clean)||l.isEmpty()&&(e.setTextNodeData(r,""),e.appendChild(l,xn(e,r))),e.newPosition(u,0)}(e,t,n)),Nn(t,!0),t}function xn(e,t){return Object.keys(t.attrs).forEach((function(n){var r=e.getAttrSchema(n);(null==r?void 0:r.cleanByBreakLine)&&e.removeAttribute(t,n)})),t}var En="inlineCard",Dn="text",Pn=[Dn,En],Rn=["fontsize","color","bgColor","bold","italic","strikethrough","underline"],Sn=["fontsize"];function Tn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function jn(e,t){var n={};if("all"===t)return Object.assign(n,e.attrs);var r,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Tn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Tn(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(t);try{for(o.s();!(r=o.n()).done;){var i=r.value;void 0!==e.attrs[i]&&(n[i]=e.attrs[i])}}catch(e){o.e(e)}finally{o.f()}return n}function In(e){var t,n,r,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e)return e;for(;e&&(null===(t=e.children)||void 0===t?void 0:t.length);)if(o){if(!e.children[0])break;e=e.children[0]}else{if(!(null===(n=e.children)||void 0===n?void 0:n[(null===(r=e.children)||void 0===r?void 0:r.length)-1]))break;e=e.children[e.children.length-1]}return e}function Bn(e){for(;e&&!e.previousSibling;)e=e.parent;return(null==e?void 0:e.previousSibling)||null}function Mn(e,t,n){if(bt.fatal(t.node.hasCategory([qe.Root,qe.LikeRoot])||t.node.closest(qe.Block),"framework/kernel/src/model/utils/position/insert-inline-node.ts:13"),(t=kn(e,t)).node.hasCategory([qe.Root,qe.LikeRoot])){var r=e.createElement(e.defaultElementName);e.appendChild(r,n),e.insertNodeByPosition(t,r)}else bt.fatal(e.acceptNode(t.node.nodeName,n.nodeName),"framework/kernel/src/model/utils/position/insert-inline-node.ts:27"),e.insertNodeByPosition(t,n);bt.fatal(n.isConnected,"framework/kernel/src/model/utils/position/insert-inline-node.ts:31")}function Fn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ln(e,t,n){t=kn(e,t);var r,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Fn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fn(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(n);try{for(o.s();!(r=o.n()).done;)t=Un(e,t,r.value)}catch(e){o.e(e)}finally{o.f()}return Nn(t),t}function Un(e,t,n){var r=t,o=r.node,i=r.offset;if(!e.acceptNode(o.nodeName,n.nodeName)){if(o.hasCategory([qe.Root,qe.LikeRoot])){if(!e.acceptNode(e.defaultElementName,n.nodeName))return o.hasCategory(qe.VirtualLikeRoot)?Un(e,t=Zt(e,t),n):t;var a=e.createElement(e.defaultElementName);return e.insertNodeByPosition(t,a),t=e.newPosition(a,0),Un(e,t,n)}return Un(e,t=Zt(e,t),n)}return e.insertNodeByPosition(e.newPosition(o,i),n)}function Vn(e,t,n,r){bt.fatal("string"==typeof n,"framework/kernel/src/model/utils/position/insert-text.ts:22");var o=t,i=o.node,a=o.offset,l=e.editing.kernel.getExtend("text_helper");if(l)return l.insertText(e,i,a,n,r);if(i.isTextNode())return e.setTextNodeData(i,gn.insertString(i.data,a,n)),e.newPosition(i,a+gn.size(n));var u=e.createTextNode(n,r);return e.insertByOffset(i,a,u),Nn(t=e.newPosition(u,gn.size(n)),_n),t}function Hn(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.start,r=e.end,o=e.collapsed;if(Nn(n,t),!o)if(Nn(r,t),n.node===r.node)bt.fatal(r.offset>n.offset,"end.offset is less than start.offset. end: ".concat(r.node.nodeName,"_").concat(r.offset,"_").concat(r.node.isConnected,", start: ").concat(n.node.nodeName,"_").concat(n.offset,"_").concat(n.node.isConnected),"framework/kernel/src/model/utils/range/helpers/verify-range.ts:20");else{var i=kt(n.node,r.node);if(i.preceding)return;bt.fatal(!i.equal&&!i.following,"framework/kernel/src/model/utils/range/helpers/verify-range.ts:31"),i.contains?bt.fatal(function(e,t){var n=zn(t,e.node);return bt.fatal(n,"framework/kernel/src/model/utils/range/helpers/verify-range.ts:48"),n.offset>=e.offset}(n,r.node),"framework/kernel/src/model/utils/range/helpers/verify-range.ts:34"):(bt.fatal(i.containedBy,"framework/kernel/src/model/utils/range/helpers/verify-range.ts:36"),bt.fatal(function(e,t){var n=zn(t,e.node);return bt.fatal(n,"framework/kernel/src/model/utils/range/helpers/verify-range.ts:59"),n.offset<=e.offset}(r,n.node),"framework/kernel/src/model/utils/range/helpers/verify-range.ts:37"))}}function zn(e,t){for(;e;){if(e.parentNode===t)return e;e=e.parentNode}return null}function Wn(e,t){if(!t.collapsed&&(t=function(e,t){var n=t,r=n.start,o=n.end,i=n.collapsed;bt.fatal(!i,"framework/kernel/src/model/utils/range/helpers/format-inline-boundary.ts:28");var a=r.node,l=r.offset,u=o.node,c=o.offset;return a.isTextNode()&&0===l&&(l=a.offset,a=a.parentNode),u.isTextNode()&&c===u.dataLength&&(c=u.offset+1,u=u.parentNode),0===l&&a.hasCategory(qe.Inline)&&!a.hasCategory(qe.InlineBox)&&(bt.fatal(!a.parentNode.hasCategory(qe.Inline)||a.parentNode.hasCategory(qe.InlineBox),"framework/kernel/src/model/utils/range/helpers/format-inline-boundary.ts:54"),r=e.newPosition(a.parentNode,a.offset)),c===u.childCount&&u.hasCategory(qe.Inline)&&!u.hasCategory(qe.InlineBox)&&(bt.fatal(!u.parentNode.hasCategory(qe.Inline)||u.parentNode.hasCategory(qe.InlineBox),"framework/kernel/src/model/utils/range/helpers/format-inline-boundary.ts:66"),o=e.newPosition(u.parentNode,u.offset+1)),Hn(t=e.newRange(r,o)),t}(e,t),!t.collapsed))return t;var n=function(e,t){var n=t.node,r=t.offset;if(n.isTextNode())if(0===r)r=n.offset,n=n.parentNode;else{if(r!==n.dataLength)return t;r=n.offset+1,n=n.parentNode}return!n.hasCategory(qe.Inline)||n.hasCategory(qe.InlineBox)?t:0===r?(bt.fatal(!n.parentNode.hasCategory(qe.Inline)||n.parentNode.hasCategory(qe.InlineBox),"framework/kernel/src/model/utils/range/helpers/format-inline-boundary.ts:107"),e.newPosition(n.parentNode,n.offset)):r===n.childCount?(bt.fatal(!n.parentNode.hasCategory(qe.Inline)||n.parentNode.hasCategory(qe.InlineBox),"framework/kernel/src/model/utils/range/helpers/format-inline-boundary.ts:115"),e.newPosition(n.parentNode,n.offset+1)):t}(e,t.start);return e.newRange(n)}function qn(e,t){var n=Wn(e,e.newRange(function(e,t){var n=t,r=n.node,o=n.offset;if(r.isTextNode()){if(r.parentNode.hasCategory(qe.Inline)&&!r.parentNode.hasCategory(qe.InlineBox)){if(0===o&&0===r.offset)return qn(e,e.newPosition(r.parentNode.parentNode,r.parentNode.offset));if(o===r.dataLength&&r.offset===r.parentNode.childCount)return qn(e,e.newPosition(r.parentNode.parentNode,r.parentNode.offset+1))}return t}if(r.hasCategory(qe.TextContainer)){if(r.hasCategory(qe.Inline)&&!r.hasCategory(qe.InlineBox)){if(0===o)return e.newPosition(t.node.parentNode,t.node.offset);if(o===r.childCount)return e.newPosition(t.node.parentNode,t.node.offset+1)}var i=r.getChildByOffset(o-1);if(i&&i.isTextNode())return e.newPosition(i,i.dataLength);var a=r.getChildByOffset(o);return a&&a.isTextNode()?e.newPosition(a,0):t}if(r.hasCategory([qe.Root,qe.LikeRoot])){if(0===o&&r.firstChild&&r.firstChild.hasCategory(qe.TextContainer))return qn(e,e.newPosition(r.firstChild,0));if(o===r.childCount&&r.lastChild&&r.lastChild.hasCategory(qe.TextContainer))return qn(e,e.newPosition(r.lastChild,r.lastChild.childCount))}r.hasCategory([qe.TableHole,qe.Hole])&&(0===o?t=e.newPosition(r.parentNode,r.offset):(bt.fatal(1===o,"framework/kernel/src/model/utils/position/make-sure-at-input.ts:115"),t=e.newPosition(r.parentNode,r.offset+1)),r=t.node,o=t.offset),bt.fatal(r.hasCategory([qe.Root,qe.LikeRoot]),"framework/kernel/src/model/utils/position/make-sure-at-input.ts:123");var l=e.createElement(e.defaultElementName);return e.insertNodeByPosition(t,l),e.newPosition(l,0)}(e,t)));return bt.fatal(n.collapsed,"framework/kernel/src/model/utils/position/make-sure-at-input.ts:13"),n.start}function $n(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Nn(e=0===e.offset?Yn(e,t):Kn(e,t)),e}function Kn(e,t){var n=e,r=n.node,o=n.offset;if(r.isTextNode()||r.isCardNode()||o!==r.childCount)return e;bt.fatal(r.isElement(),"framework/kernel/src/model/utils/position/helpers/shrink-position.ts:32");var i=r.lastChild;if(!i||i.isCardNode())return e;if(i.hasCategory(qe.Inline)&&!t)return e;if(i.isElement())e=new At(i,i.childCount);else{if(!i.isTextNode())throw new Error("failed to execute shrinkPosition");e=new At(i,i.dataLength)}return Kn(e,t)}function Yn(e,t){var n=e.node;if(0!==e.offset||n.isCardNode()||n.isTextNode())return e;bt.fatal(n.isElement(),"framework/kernel/src/model/utils/position/helpers/shrink-position.ts:63");var r=n.firstChild;return!r||r.isCardNode()||r.hasCategory(qe.Inline)&&!t?e:Yn(new At(r,0),t)}var Gn=o(7786);function Jn(e){var t=(0,Gn.A)(e);if(null===e||"string"===t||"number"===t||"undefined"===t||"boolean"===t||"function"===t)return e;if(bt("object"===t,"framework/utils/src/clone-object.ts:17"),Array.isArray(e))return e.map((function(e){return Jn(e)}));bt("[object Object]"===Object.prototype.toString.call(e),"framework/utils/src/clone-object.ts:23");var n={};return Object.keys(e).forEach((function(t){n[t]=Jn(e[t])})),n}var Xn=-1,Qn=0,Zn=1,er=2;function tr(e,t,n,r){if(bt.fatal(n===Qn||n===Zn||n===Xn||n===er,"framework/kernel/src/model/utils/position/helpers/break-block-content.ts:38"),bt.fatal(!t.node.isCardNode(),"framework/kernel/src/model/utils/position/helpers/break-block-content.ts:45"),r&&bt.fatal(!At.equal(t,r.position),"framework/kernel/src/model/utils/position/helpers/break-block-content.ts:49"),t.node.hasCategory([qe.Root,qe.LikeRoot,qe.TableHole,qe.Table,qe.Hole,qe.Card]))return t;if(bt.fatal(t.node.isTextNode()||t.node.hasCategory(qe.Block),"framework/kernel/src/model/utils/position/helpers/break-block-content.ts:65"),t.node.isTextNode()&&(t=function(e,t,n){var r=t.node,o=t.offset;if(!r.isTextNode())return t;if(o===r.dataLength)return e.newPosition(r.parentNode,r.offset+1);if(0===o)return e.newPosition(r.parentNode,r.offset);var i=gn.splitString(r.data,o),a=(0,tn.A)(i,2),l=a[0],u=a[1],c=r.cloneNode(!1);return e.setTextNodeData(r,l),e.setTextNodeData(c,u),e.insertAfter(r.parentNode,c,r),n&&function(e,t,n){var r=e.node,o=e.offset,i=n.position,a=i.node,l=i.offset;if(a===r){if(l<=o)return;n.position=new At(t,l-o)}else if(a===r.parentNode){if(l<=r.offset)return;n.position=new At(a,l+1)}}(t,c,n),e.newPosition(c.parentNode,c.offset)}(e,t,r)),bt.fatal(!t.node.isTextNode(),"framework/kernel/src/model/utils/position/helpers/break-block-content.ts:73"),t.node.hasCategory(qe.Inline))t=en(e,t);else{if(t.node.isEmpty())return t;bt.fatal(t.node.firstChild.isTextNode()||t.node.firstChild.hasCategory(qe.Inline)||t.node.firstChild.isCardNode(),"framework/kernel/src/model/utils/position/helpers/break-block-content.ts:82")}return bt.fatal(t.node.hasCategory(qe.Block),"framework/kernel/src/model/utils/position/helpers/break-block-content.ts:89"),n===er?(bt.fatal(t.node.hasCategory(qe.Block),"framework/kernel/src/model/utils/position/helpers/break-block-content.ts:92"),t):n===Xn?(bt.fatal(!r,"framework/kernel/src/model/utils/position/helpers/break-block-content.ts:99"),function(e,t){var n=t.node,r=t.offset,o=n.getChildByOffset(r-1);if(o)return o.isCardNode()&&bt.fatal(!1,"framework/kernel/src/model/utils/position/helpers/break-block-content.ts:158"),e.newPosition(o,o.dataLength);if(o=n.getChildByOffset(r),bt.fatal(o,"framework/kernel/src/model/utils/position/helpers/break-block-content.ts:166"),o.isCardNode()&&bt.fatal(!1,"framework/kernel/src/model/utils/position/helpers/break-block-content.ts:169"),o.isEmpty())return e.newPosition(o,0);var i=o.cloneNode(!1);return e.setTextNodeData(i,""),e.insertBefore(o.parentNode,i,o),e.newPosition(i,0)}(e,t)):n===Zn?(bt.fatal(!r,"framework/kernel/src/model/utils/position/helpers/break-block-content.ts:105"),function(e,t){var n=t.node,r=t.offset,o=n.getChildByOffset(r);if(o&&!o.isCardNode())return e.newPosition(o,0);if(!(o=n.getChildByOffset(r-1)))return t;if(bt.fatal(o,"framework/kernel/src/model/utils/position/helpers/break-block-content.ts:201"),o.isCardNode())return t;if(o.isEmpty())return e.newPosition(o,0);var i=o.cloneNode(!1);return e.setTextNodeData(i,""),e.insertAfter(o.parentNode,i,o),e.newPosition(i,0)}(e,t)):(bt.fatal(n===Qn,"framework/kernel/src/model/utils/position/helpers/break-block-content.ts:109"),t=function(e,t,n){var r=t.node,o=t.offset,i=r.getChildByOffset(o)||r.getChildByOffset(o-1);return bt.fatal(i,"framework/kernel/src/model/utils/position/helpers/break-block-content.ts:228"),i.isEmpty()||(i=i.cloneNode(!1),e.setTextNodeData(i,""),e.insertByOffset(r,o,i),n&&n.node===r&&n.offset>o&&(n.position=e.newPosition(r,n.offset+1))),e.newPosition(i,0)}(e,t,r),Nn(t),t)}const nr=["dataTable"];var rr=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"createCardNode",value:function(e,t,n,r){var o=e.createCardNode(t,n,r);if(e.hasCategory(t,qe.BlockCard)){var i=e.createHole(nr.includes(t)?"rootCardHole":"hole",(null==n?void 0:n.hindent)?{indent:n.hindent}:{});return e.appendChild(i,o),i}return bt.fatal(e.hasCategory(t,qe.InlineCard),"framework/kernel/src/model/utils/card/card-helper.ts:30"),o}}])}(),or=Object.prototype.hasOwnProperty;function ir(e,t){return!!e&&or.call(e,t)}var ar=function(){function e(){(0,Ke.A)(this,e)}return(0,$e.A)(e,null,[{key:"createFragment",value:function(e,t){return{type:"fragment",name:"#fragment",children:(0,ln.A)(e||[]),attrs:Object.assign({},t)}}},{key:"isEmptyNode",value:function(e){return e.type===wt.Element||"fragment"===e.type?!e.children||0===e.children.length:(bt.fatal(e.type===wt.Text,"framework/kernel/src/public/inode-helper.ts:26"),!e.data)}},{key:"isElementNode",value:function(e){return e.type===wt.Element}},{key:"isTextNode",value:function(e){return e.type===wt.Text}},{key:"isCardNode",value:function(e){return e.type===wt.Card}},{key:"isFragmentNode",value:function(e){return"fragment"===e.type}},{key:"createElement",value:function(e,t,n){return{id:n||"",type:wt.Element,name:e,attrs:Object.assign({},t)}}},{key:"createCard",value:function(e,t,n){var r={type:wt.Card,name:e};return t&&(r.attrs={value:t}),n&&(r.id=n),r}},{key:"isLikeEmpty",value:function(t){return t.type===wt.Text?0===t.data.length:t.type===wt.Element&&(0===t.children.length||t.children.every((function(t){return e.isLikeEmpty(t)})))}},{key:"createTextNode",value:function(e,t,n){var r={type:wt.Text,name:"#text",data:"string"!=typeof e?"":e};return t&&(r.attrs=Object.assign({},t)),n&&(r.id=n),r}},{key:"appendChild",value:function(e,t){e.children?e.children.push(t):e.children=[t]}},{key:"prependChild",value:function(e,t){e.children?e.children.unshift(t):e.children=[t]}},{key:"setChildByOffset",value:function(e,t,n){e.children||(e.children=[]),e.children[t]=n}},{key:"setChildren",value:function(e,t){e.children=(0,ln.A)(t)}},{key:"removeChild",value:function(e,t){var n=e.children.indexOf(t);bt.fatal(-1!==n,"framework/kernel/src/public/inode-helper.ts:173"),e.children.splice(n,1)}},{key:"unwrapNode",value:function(e,t){var n,r=e.children.indexOf(t);bt.fatal(-1!==r,"framework/kernel/src/public/inode-helper.ts:183"),(n=e.children).splice.apply(n,[r,1].concat((0,ln.A)(t.children||[])))}},{key:"cloneNode",value:function(e){var t={type:e.type,id:e.id,name:e.name};return ir(e,"data")&&(t.data=e.data),e.attrs&&(t.attrs=Object.assign({},e.attrs)),t}},{key:"setAttribute",value:function(e,t,n){var r={};"string"==typeof t?r[t]=n:r=Object.assign({},t),e.attrs=Object.assign(Object.assign({},e.attrs),r)}},{key:"removeAttribute",value:function(e,t){e.attrs&&delete e.attrs[t]}}])}();function lr(e,t,n){var r=function(e,t){var n=new Set,r={recordCheckNode:function(e){n.add(e)}};return ar.isFragmentNode(t)?cr(e,sr(r,e,null,ur(e,t.children||[])),Array.from(n)):null}(e,n);return r?function(e,t,n){var r={isTopProcessContext:!0,needBreak:!1,allowMergeFirstLine:!0,textAttrs:t.node.isTextNode()&&Jn(t.node.attrs)||{}};return 1!==n.length||n[0].nodeName!==e.defaultElementName||e.acceptNode(t.node.nodeName,e.defaultElementName)||(n=n[0].children),t=n.some((function(e){return!e.hasCategory([qe.Text,qe.Inline])}))?tr(e,t,er):kn(e,t),t=function(e,t){if(!t.node.isElement())return t;for(var n=t.node,r=n.children,o=t.offset,i=o,a=r.length;i<a;i++){var l=r[i];if(!l.isTextNode()||0!==l.dataLength)break;e.removeChild(n,l)}for(var u=o-1;u>=0;u--){var c=r[u];if(!c.isTextNode()||0!==c.dataLength)break;e.removeChild(n,c),o--}return e.newPosition(n,o)}(e,t),t=pr(r,e,t,n)}(e,t,r):t}function ur(e,t){var n=[];return t.forEach((function(t){var r;if(null===(r=t.children)||void 0===r?void 0:r.length){var o=ur(e,t.children);if(e.hasCategory(t.name,[qe.VirtualLikeRoot,qe.LikeRoot,qe.Root],!1))return ar.setChildren(t,o),void n.push(t);if(ar.setChildren(t,[]),o.length>0&&o[0].name===e.defaultElementName&&(o[0].children||[]).every((function(n){return e.acceptNode(t.name,n.name)}))&&o.every((function(t){return e.hasCategory(t.name,[qe.Block,qe.BlockCard,qe.Hole,qe.AlertHole,qe.Table,qe.TableHole])}))){var i=o[0],a=i.children||[];o=[].concat((0,ln.A)(a),(0,ln.A)(o.slice(1))),ar.setAttribute(t,Object.assign(Object.assign({},t.attrs),fr(e,t.name,i.attrs)))}var l=null,u=!1;o.forEach((function(r){e.acceptNode(t.name,r.name)?(l?u&&(l=ar.cloneNode(t),n.push(l)):(l=t,n.push(l)),u=!1,ar.appendChild(l,r)):(u=!0,n.push(r))}))}else n.push(t)})),n}function cr(e,t,n){return n.forEach((function(n){if(Ut.isLikeEmptyElement(n))if(n.parentNode){var r=[n.parentNode];e.removeChild(n.parentNode,n),cr(e,t,r)}else{var o=t.indexOf(n);-1!==o&&t.splice(o,1)}})),t}function sr(e,t,n,r){var o=[];return r?(r&&r.forEach((function(r){var i=function(e,t,n,r){var o,i,a=t.getNodeSchema(r.name);return a?a.category.includes(qe.Table)?function(e,t,n,r){if(!(null==n?void 0:n.hasCategory(qe.TableHole))){var o=t.createHole("tableHole");return dr(e,t,o,r),bt.fatal(o.firstChild.hasCategory(qe.Table),"framework/kernel/src/model/utils/position/helpers/insert-inode-by-position.ts:457"),gr(t,r,o),n?hr(e,t,n,o,r):[o]}return gr(t,r,n),dr(e,t,n,r)}(e,t,n,r):(null===(o=a.parents)||void 0===o?void 0:o.includes(qe.ContainerHole))?function(e,t,n,r){if(!(null==n?void 0:n.hasCategory(qe.ContainerHole))){var o=t.createHole("containerHole");return dr(e,t,o,r),gr(t,r,o),n?hr(e,t,n,o,r):[o]}return gr(t,r,n),dr(e,t,n,r)}(e,t,n,r):(null===(i=a.parents)||void 0===i?void 0:i.includes(qe.AlertHole))?function(e,t,n,r){if(!(null==n?void 0:n.hasCategory(qe.AlertHole))){var o=t.createHole("alertHole");return dr(e,t,o,r),bt.fatal(o.firstChild.hasCategory("alert"),"framework/kernel/src/model/utils/position/helpers/insert-inode-by-position.ts:427"),gr(t,r,o),n?hr(e,t,n,o,r):[o]}return gr(t,r,n),dr(e,t,n,r)}(e,t,n,r):a.type===wt.Element?dr(e,t,n,r):a.type===wt.Text?function(e,t,n,r){var o=fr(t,r.name,r.attrs),i=t.editing.kernel.getExtend("text_helper");if(i){var a=i.createTextNode(t,r,o);if(!n)return a;var l=[];return a.forEach((function(o){l=l.concat(hr(e,t,n,o,r))})),l}var u=t.createTextNode(r.data,o,r.id);return n?hr(e,t,n,u,r):[u]}(e,t,n,r):(bt.fatal(a.type===wt.Card,"framework/kernel/src/model/utils/position/helpers/insert-inode-by-position.ts:255"),function(e,t,n,r){var o=rr.createCardNode(t,r.name,fr(t,r.name,r.attrs),r.id);return(null==n?void 0:n.hasCategory(qe.Hole))?(gr(t,r,n),hr(e,t,n,o.firstChild,r)):(gr(t,r,o),hr(e,t,n,o,r))}(e,t,n,r)):r.children?sr(e,t,n,r.children):[]}(e,t,n,r);i.forEach((function(e){o.push(e)}))})),o):o}function dr(e,t,n,r){var o,i;i=(null===(o=t.getNodeSchema(r.name))||void 0===o?void 0:o.category.includes(qe.Hole))?t.createHole(r.name,fr(t,r.name,r.attrs),r.id):t.createElement(r.name,fr(t,r.name,r.attrs),r.id);var a=hr(e,t,n,i,r),l=[];return i.parentNode||a.includes(i)?l=sr(e,t,i,r.children):n?l=sr(e,t,n,r.children):(a.push(i),l=sr(e,t,i,r.children)),l.forEach((function(e){a.push(e)})),a}function fr(e,t,n){var r={};return n?(Object.keys(n).forEach((function(o){var i=n[o];e.acceptAttr(t,o,i)&&(r[o]=i)})),r):r}function hr(e,t,n,r){var o,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(n&&t.acceptNode(n.nodeName,r.nodeName))return e.wrapNode=null,t.appendChild(n,r),[];if(e.wrapNode){if(t.acceptNode(e.wrapNode.nodeName,r.nodeName))return t.appendChild(e.wrapNode,r),[];e.wrapNode=null}if(!n)return[r];var a=t.defaultElementName;if(t.acceptNode(a,r.nodeName)&&t.acceptNode(n.nodeName,a)){var l=i?fr(t,a,i.attrs):{},u=t.createElement(a,l);return e.wrapNode=u,t.appendChild(u,r),t.appendChild(n,u),[]}if(r.nodeName===t.defaultElementName&&n.nodeName!==r.nodeName&&n.hasCategory(qe.Block)){var c=[];return null===(o=r.children)||void 0===o||o.forEach((function(r){hr(e,t,n,r,null).forEach((function(e){c.push(e)}))})),c}return e.recordCheckNode(n),n.parentNode?hr(e,t,n.parentNode,r,i):[r]}function pr(e,t,n,r){var o=e.isTopProcessContext&&function(e){var t=e.node,n=e.offset;if(t.isTextNode()&&n!==t.dataLength)return!0;var r=Ut.closest(t,qe.Block);if(!r)return!1;for(;t!==r;){if(n!==t.childCount)return!0;n=(t=t.parentNode).offset+1}return bt.fatal(t===r,"framework/kernel/src/model/utils/position/helpers/insert-inode-by-position.ts:898"),n<r.childCount}(n);return e.isTopProcessContext=!1,r.forEach((function(r){e.needBreak&&(bt.fatal(n.node.isElement(),"framework/kernel/src/model/utils/position/helpers/insert-inode-by-position.ts:639"),n=function(e,t){bt.fatal(!t.node.isRootNode(),"framework/kernel/src/model/utils/position/helpers/insert-inode-by-position.ts:817"),t.node.isTextNode()&&(t=tr(e,t,er));var n=t,r=n.node,o=n.offset;if(Ut.isLikeEmptyElement(r))return r.parentNode.hasCategory(qe.Hole)?(t=e.newPosition(r.parentNode.parentNode,r.parentNode.offset),e.removeChild(r.parentNode.parentNode,r.parentNode)):(t=e.newPosition(r.parentNode,r.offset),e.removeChild(r.parentNode,r)),t;if(0===o)return e.newPosition(r.parentNode,r.offset);if(o===r.childCount)return e.newPosition(r.parentNode,r.offset+1);var i=r.cloneNode(!1);if(r.children.slice(o).forEach((function(t){e.appendChild(i,t)})),bt.fatal(r.childCount>0,"framework/kernel/src/model/utils/position/helpers/insert-inode-by-position.ts:854"),bt.fatal(i.childCount>0,"framework/kernel/src/model/utils/position/helpers/insert-inode-by-position.ts:855"),r.parentNode.hasCategory([qe.AlertHole,qe.ContainerHole])){var a=r.parentNode,l=e.createElement(a.nodeName);return e.appendChild(l,i),e.insertAfter(a.parentNode,l,a),e.newPosition(l.parentNode,l.offset)}return e.insertAfter(r.parentNode,i,r),e.newPosition(i.parentNode,i.offset)}(t,n),e.needBreak=!1),bt.fatal(n.node.isElement(),"framework/kernel/src/model/utils/position/helpers/insert-inode-by-position.ts:646"),n=vr(e,t,n,r),e.allowMergeFirstLine=!1})),o?mr(t,n):n}function vr(e,t,n,r){var o,i=n.node;if(bt.fatal(i.isElement(),"framework/kernel/src/model/utils/position/helpers/insert-inode-by-position.ts:669"),i.hasCategory([qe.Hole,qe.TableHole])&&(r.hasCategory([qe.Hole,qe.TableHole])||i.childCount>0)){var a=t.newPosition(i.parentNode,0===n.offset?i.offset:i.offset+1);return vr(e,t,a,r)}if(t.acceptNode(i.nodeName,r.nodeName))return br(r,(function(n){!function(e,t,n){var r;if(!n.isTextNode())return n;if(n.isTextNode()&&(!n.attrs||0===Object.keys(n.attrs).length)){try{var o=e.editing.kernel;o.hasExtendMethod("beforeInsertTextInheritAttrs")&&(t=null===(r=o.getExtendMethod("beforeInsertTextInheritAttrs"))||void 0===r?void 0:r(e,n,t))}catch(e){}Object.keys(t).forEach((function(r){e.document.schema.allowCloneAttr(r)&&e.setAttribute(n,r,t[r])}))}}(t,e.textAttrs,n)})),t.insertNodeByPosition(n,r);if(i.hasCategory([qe.Root,qe.LikeRoot])){var l=function(e,t,n){var r=e.defaultElementName;return e.acceptNode(r,n.nodeName)?e.createElement(r):null}(t,0,r);if(l)return t.insertNodeByPosition(n,l),vr(e,t,t.newPosition(l,0),r);if(!i.hasCategory(qe.VirtualLikeRoot))return r.isElement()&&!r.isEmpty()?pr(e,t,n,r.children):n}if(e.allowMergeFirstLine&&(i.nodeName===r.nodeName||r.hasCategory([qe.ContainerHole,qe.AlertHole])&&(null===(o=r.firstChild)||void 0===o?void 0:o.nodeName)===i.nodeName||r.nodeName===t.defaultElementName&&i.hasCategory(qe.TextContainer))){var u=r.hasCategory([qe.ContainerHole,qe.AlertHole])?r.firstChild:r;return u.children.forEach((function(e){n=t.insertNodeByPosition(n,e)})),function(e,t,n){var r=n.attrs,o=t.nodeName;Object.keys(r).forEach((function(n){var i=r[n];!e.isStandardAttr(o,n)&&e.acceptAttr(o,n,i)&&e.setAttribute(t,n,i)}))}(t,i,u),e.needBreak=!0,n}return e.needBreak=!0,pr(e,t,n,[r])}function mr(e,t){var n=t,r=n.node,o=n.offset;if(!r.isElement())return t;if(r.hasCategory(qe.Block)&&o===r.childCount)return mr(e,e.newPosition(r.parentNode,r.offset+1));var i=r.getChildByOffset(o-1),a=r.getChildByOffset(o);if(!i||!a)return t;if(i.nodeName!==a.nodeName||!i.isElement())return t;var l=e.newPosition(i,i.childCount);return t=l.clone(),a.children.forEach((function(n){t=e.insertNodeByPosition(t,n)})),e.removeChild(a.parentNode,a),l}function gr(e,t,n){var r;(null===(r=null==t?void 0:t.attrs)||void 0===r?void 0:r.hindent)&&n&&e.acceptAttr(n.nodeName,"indent",t.attrs.hindent)&&e.setAttribute(n,"indent",t.attrs.hindent)}function br(e,t){var n;e.isTextNode()?t(e):e.isElement()&&(null===(n=e.children)||void 0===n||n.forEach((function(e){br(e,t)})))}var yr,wr=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"breakLine",value:function(){return On.apply(void 0,arguments)}},{key:"insertNodes",value:function(){return Ln.apply(void 0,arguments)}},{key:"insertINodeByPosition",value:function(){return lr.apply(void 0,arguments)}},{key:"makeSureAtInput",value:function(){return qn.apply(void 0,arguments)}},{key:"insertText",value:function(){return Vn.apply(void 0,arguments)}},{key:"getPreviousText",value:function(e){return function(e){var t=e.node,n=e.offset;if(!t.hasCategory([qe.TextContainer,qe.Text]))return null;var r=t.isTextNode(),o=r?gn.substring(t.data,0,n):"",i=null;if(r)i=t.previousSibling;else{if(!t.hasCategory(qe.Block))return null;i=t.children[n-1]}if(!i||!i.isTextNode())return o||null;for(var a=[],l=!1;i&&i.isTextNode();){if(a.push(i.data),!i.previousSibling){l=!0;break}i=i.previousSibling}return{text:a.reverse().join("")+o,atStart:l}}(e)}},{key:"insertInlineNode",value:function(){return Mn.apply(void 0,arguments)}},{key:"alignmentToElement",value:function(){return Kt.apply(void 0,arguments)}},{key:"shrinkPosition",value:function(e){return $n(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}},{key:"closestInlineAttrs",value:function(e,t,n){return function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Dn,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[qe.Heading,qe.TableHole,qe.Table,qe.ContainerHole,qe.AlertHole];bt.fatal(Pn.includes(n),"framework/kernel/src/model/utils/position/closest-inline-attrs.ts:72");var o,i=e.node,a=e.offset;if(i.isTextNode())return jn(i,Rn);if(i.hasCategory(qe.InlineCard)){if(n===En)return jn(i,Rn);o=jn(i,Rn)}var l=!1,u=[In(null===(t=i.children)||void 0===t?void 0:t[Math.max(a-1,0)])||i];for(i.hasCategory([qe.Hole,qe.TableHole,qe.ContainerHole,qe.AlertHole])&&(l=!0,u.pop(),u.push(In(i.previousSibling,!1)||i.previousSibling));u.length;){var c=u.pop();if(!c)break;if(c.isTextNode())return Object.assign(Object.assign({},jn(c,l?Sn:Rn)),o);if(c.hasCategory(qe.InlineCard)){if(l||n===En)return jn(c,Sn);o||(o=jn(c,Rn))}for(var s=Bn(c);null==s?void 0:s.hasCategory(r);)s=Bn(s);if(!s)break;if(s.hasCategory([qe.TableCell,qe.TableRow]))break;if(!l&&s.hasCategory([qe.Block,qe.LikeRoot])){if(n===Dn&&o)return o;l=!0}var d=In(s,!1);d&&u.push(d)}return{}}(e,t,n)}},{key:"isInEmptyLine",value:function(e){return function(e){var t=e.node;if(0!==e.offset)return!1;for(var n=t;n.childCount;){if(n.childCount>1)return!1;n=n.children[0]}if(n.isTextNode()&&n.dataLength>0)return!1;if(n.isCardNode())return!1;for(;!n.hasCategory(qe.Block);){if(n.childCount>1)return!1;n=n.parentNode}return n.childCount<=1}(e)}}])}(),Ar=new Uint8Array(16);function kr(){if(!yr&&!(yr="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return yr(Ar)}const _r=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var Cr=[],Nr=0;Nr<256;++Nr)Cr.push((Nr+256).toString(16).substr(1));const Or=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(Cr[e[t+0]]+Cr[e[t+1]]+Cr[e[t+2]]+Cr[e[t+3]]+"-"+Cr[e[t+4]]+Cr[e[t+5]]+"-"+Cr[e[t+6]]+Cr[e[t+7]]+"-"+Cr[e[t+8]]+Cr[e[t+9]]+"-"+Cr[e[t+10]]+Cr[e[t+11]]+Cr[e[t+12]]+Cr[e[t+13]]+Cr[e[t+14]]+Cr[e[t+15]]).toLowerCase();if(!function(e){return"string"==typeof e&&_r.test(e)}(n))throw TypeError("Stringified UUID is invalid");return n},xr=function(e,t,n){var r=(e=e||{}).random||(e.rng||kr)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return Or(r)};var Er={};function Dr(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36;do{e="u"+xr().substring(0,t-1)}while(!e||Er[e]);return Er[e]=!0,e}function Pr(){return Dr(9)}function Rr(e,t,n,r){var o,i=e.schema.getNodeSchema(t);r?(o=r,null==n||delete n.id):(null==n?void 0:n.id)?(o=n.id+"",delete n.id):o=(null==i?void 0:i.id)?i.id():Pr();var a=e.getNodeById(o);return a?e.disableSameIdentifier?Rr(e,t):!a.isConnected&&a.hasCategory(qe.Heading)&&(null==i?void 0:i.category.includes(qe.Heading))?o:Rr(e,t):o}var Sr=function(){return(0,$e.A)((function e(t,n,r,o){(0,Ke.A)(this,e),Object.defineProperty(this,"_document",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_nodeName",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"_category",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_docVersion",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"_attrs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_parent",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_offset",{enumerable:!0,configurable:!0,writable:!0,value:-1}),r=Jn(r),this._id=Rr(t,n,r,o),this._docVersion=t.version,this._category=t.schema.getCategoryByNodeName(n),this._attrs=r||{},this._document.indexNode(this)}),[{key:"destroy",value:function(){this._document.unIndexNode(this)}},{key:"id",get:function(){return this._id}},{key:"document",get:function(){return this._document}},{key:"rootNode",get:function(){return this._document.rootNode}},{key:"attrs",get:function(){return Object.assign({},this._attrs)}},{key:"isConnected",get:function(){for(var e=this;e;){if(e.isRootNode())return!0;e=e.parent}return!1}},{key:"parent",get:function(){return this._parent}},{key:"parentNode",get:function(){return this._parent}},{key:"nodeName",get:function(){return this._nodeName}},{key:"nodeValue",get:function(){return null}},{key:"offset",get:function(){return this._offset}},{key:"previousSibling",get:function(){return this._parent?this._parent.getChildByOffset(this._offset-1):null}},{key:"nextSibling",get:function(){return this._parent?this._parent.getChildByOffset(this._offset+1):null}},{key:"category",get:function(){return this._category}},{key:"childCount",get:function(){return 0}},{key:"children",get:function(){return[]}},{key:"firstChild",get:function(){return null}},{key:"lastChild",get:function(){return null}},{key:"compare",value:function(e){var t={equal:!1,contains:!1,containedBy:!1,preceding:!1,following:!1};if(this===e)return t.equal=!0,t;if(this.isRootNode())return t.contains=!0,t;if(e.isRootNode())return t.containedBy=!0,t;for(var n=this.getPath(),r=e.getPath(),o=n.length,i=r.length,a=0,l=Math.min(o,i);a<l;a++){var u=n[a],c=r[a];if(u<c)return t.preceding=!0,t;if(u>c)return t.following=!0,t}return bt(o!==i,"invalid compare node","framework/kernel/src/model/node/node.ts:241"),n.length<r.length?t.contains=!0:t.containedBy=!0,t}},{key:"getChildByOffset",value:function(e){return null}},{key:"getPath",value:function(){if(this.isRootNode())return[];for(var e=[this.offset],t=this;(t=null==t?void 0:t.parent)&&!t.isRootNode();)e.push(t.offset);return e.reverse()}},{key:"getSchema",value:function(){return this._document.schema.getNodeSchema(this._nodeName)}},{key:"hasAttribute",value:function(e){return ir(this._attrs,e)}},{key:"getAttribute",value:function(e){var t=this._attrs[e];return void 0===t?null:t}},{key:"hasCategory",value:function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this._category,o=0,i=(t="string"==typeof e?[e]:e).length;o<i;o++)if(r[t[o]]){if(!n)return!0}else if(n)return!1;return n}},{key:"closest",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;n;){if(n.hasCategory(e,t))return n;n=n.parentNode}return null}},{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.toData(e)}},{key:"toData",value:function(e){var t={type:this.nodeType,id:this._id,name:this._nodeName,attrs:{}};return Object.keys(this._attrs).length&&(t.attrs=Jn(this._attrs)),t}}])}();function Tr(){return Tr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=(0,Je.A)(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Tr.apply(null,arguments)}function jr(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Ir()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Ir(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ir=function(){return!!e})()}var Br=function(e){function t(){var e;return(0,Ke.A)(this,t),e=jr(this,t,arguments),Object.defineProperty(e,"nodeType",{enumerable:!0,configurable:!0,writable:!0,value:wt.Element}),Object.defineProperty(e,"_children",{enumerable:!0,configurable:!0,writable:!0,value:[]}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"children",get:function(){return this._children.slice()}},{key:"childCount",get:function(){return this._children.length}},{key:"firstChild",get:function(){return this._children[0]||null}},{key:"lastChild",get:function(){return this._children[this._children.length-1]||null}},{key:"isEmpty",value:function(){return 0===this._children.length}},{key:"getChildByOffset",value:function(e){return this._children[e]||null}},{key:"toData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=Tr((0,Je.A)(t.prototype),"toData",this).call(this,e);return e&&this._children.length?n.children=this._children.map((function(t){return t.toJSON(e)})):n.children=[],n}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.nodeName,n=this.attrs,r=[];Object.keys(n).forEach((function(e){var t=n[e];"object"===(0,Gn.A)(t)?t=JSON.stringify(t):t+="",r.push("".concat(e,'="').concat(t,'"'))}));var o="";return e&&(o=this._children.map((function(t){return t.toString(e)})).join("")),"<".concat(t).concat(r.length?" "+r.join(" "):"",">").concat(o,"</").concat(t,">")}},{key:"cloneNode",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=Jn(this._attrs);Object.keys(r).forEach((function(t){e._document.schema.allowCloneAttr(t)||delete r[t]}));var o=new t(this._document,this._nodeName,r);return n&&(o._children=this._children.map((function(e){return e.cloneNode(!0)}))),o}},{key:"isHole",value:function(){return!1}},{key:"isElement",value:function(){return!0}},{key:"isTextNode",value:function(){return!1}},{key:"isCardNode",value:function(){return!1}},{key:"isRootNode",value:function(){return!1}}])}(Sr),Mr="columns",Fr="column",Lr=6,Ur=.08;function Vr(e,t){if(0===t.length)return e.rootNode;for(var n=e.rootNode,r=0,o=t.length;r<o;r++){var i=t[r];if(n.isElement()){var a=n.getChildByOffset(i);if(a){n=a;continue}}return n}return n}var Hr;function zr(e){return e.map((function(e){return e.cloneRange()}))}!function(e){e.start="start",e.end="end",e.topRight="topRight",e.bottomLeft="bottomLeft"}(Hr||(Hr={}));var Wr=function(){function e(t,n,r,o){(0,Ke.A)(this,e),Object.defineProperty(this,"_document",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_anchor",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"_focus",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"_ranges",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),bt.fatal(n.length,"framework/kernel/src/model/selection/selection.ts:184"),r!==Hr.topRight&&r!==Hr.bottomLeft&&o!==Hr.topRight&&o!==Hr.bottomLeft||bt.fatal(n.length>1,"framework/kernel/src/model/selection/selection.ts:192"),this._ranges=function(e){if(1===e.length)return(0,ln.A)(e);var t=e.map((function(e,t){var n=e.start;return{start:[].concat((0,ln.A)(n.node.getPath()),[n.offset]),index:t}})).sort((function(e,t){var n=function(e,t){for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;o++){var a=e[o],l=t[o];if(a<l)return-1;if(a>l)return 1}return n<r?-1:n>r?1:0}(e.start,t.start);return-1===n?-1:1===n?1:0}));return t.map((function(t){var n=t.index;return e[n]}))}(n.slice())}return(0,$e.A)(e,[{key:"destroy",value:function(){delete this._document,delete this._ranges,delete this._anchor,delete this._focus}},{key:"document",get:function(){return this._document}},{key:"rangeCount",get:function(){return this._ranges.length}},{key:"firstRange",get:function(){return this._ranges[0]}},{key:"lastRange",get:function(){return this._ranges[this._ranges.length-1]}},{key:"isTableSelection",get:function(){return this.rangeCount>1&&this._ranges[0].start.node.hasCategory(qe.TableCell)}},{key:"isColumnsSelection",get:function(){return this.rangeCount>1&&this._ranges[0].start.node.hasCategory(Fr)}},{key:"isTextSelection",get:function(){return 1===this.rangeCount&&this.firstRange.start.node.isTextNode()&&this.firstRange.end.node.isTextNode()}},{key:"isCardSelection",get:function(){var e=this._ranges[0];return 1===this.rangeCount&&e.collapsed&&e.start.node.isCardNode()}},{key:"ranges",get:function(){return this._ranges.slice()}},{key:"collapsed",get:function(){return 1===this._ranges.length&&this._ranges[0].collapsed}},{key:"isCollapsed",get:function(){return this.collapsed}},{key:"focus",get:function(){return this._focus}},{key:"anchor",get:function(){return this._anchor}},{key:"cloneSelection",value:function(){return new e(this._document,zr(this._ranges),this._anchor,this._focus)}},{key:"cloneByRange",value:function(t){var n;return n=Array.isArray(t)?t:[t],e.createBy(this._document,zr(n),this._anchor,this._focus)}},{key:"toJSON",value:function(){var e=this.ranges,t=this.anchor,n=this.focus;return e?{ranges:e.map((function(e){var t=e.start,n=e.end,r=e.collapsed;return{start:{nodePath:t.node.getPath(),offset:t.offset,isText:t.node.isTextNode()},end:{nodePath:n.node.getPath(),offset:n.offset,isText:n.node.isTextNode()},collapsed:r}})),anchor:t,focus:n}:null}}],[{key:"createBy",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Hr.start,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Hr.end;return new e(t,Array.isArray(n)?n:[n],r,o)}},{key:"fromJson",value:function(t,n){var r=n.ranges,o=n.anchor,i=n.focus;bt.fatal(r.length,"framework/kernel/src/model/selection/selection.ts:95");var a=r.map((function(e){var n,r,o=e.start,i=e.end,a=0,l=0;return n=o.nodePath?Vr(t,o.nodePath):o.node,r=i.nodePath?Vr(t,i.nodePath):i.node,bt.fatal(n&&r,"framework/kernel/src/model/selection/selection.ts:117"),n.isTextNode()?a=Math.min(n.dataLength,o.offset):n.isCardNode()?a=0:(bt.fatal(n.isElement(),"framework/kernel/src/model/selection/selection.ts:124"),a=Math.min(n.childCount||0,o.offset)),r.isTextNode()?l=Math.min(r.dataLength,i.offset):r.isCardNode()?l=0:(bt.fatal(r.isElement(),"framework/kernel/src/model/selection/selection.ts:137"),l=Math.min(r.childCount||0,i.offset)),Vt.createAt(new At(n,a),new At(r,l))})),l=o,u=i;return 1===a.length&&a[0].collapsed&&(l=Hr.start,u=Hr.start),new e(t,a,l,u)}},{key:"equal",value:function(e,t){return!(!e||!t)&&e.rangeCount===t.rangeCount&&e._ranges.every((function(e,n){return Vt.equal(e,t._ranges[n])}))}}])}();function qr(e,t){Hn(t);var n=t.start,r=t.end;if(t.collapsed)return n.node.isTextNode()?(n=$r(e,n,!1).position,e.newRange(n)):t.cloneRange();if(r.node.isTextNode()&&(r=$r(e,r,!0).position),n.node.isTextNode()){var o=$r(e,n,!1);n=o.position,o.childrenChanged&&n.node===r.node&&(r=e.newPosition(r.node,r.offset+1))}var i=e.newRange(n,r);return bt.fatal(!i.collapsed,"framework/kernel/src/model/utils/range/split-text-content.ts:39"),Hn(i),i}function $r(e,t,n){var r=t.node,o=t.offset;if(!r.isTextNode())return{position:t,childrenChanged:!1};if(0===o)return n&&Nt(r)?{position:e.newPosition(r.parentNode,r.offset+1),childrenChanged:!1}:{position:e.newPosition(r.parentNode,r.offset),childrenChanged:!1};if(o===r.dataLength)return{position:e.newPosition(r.parentNode,r.offset+1),childrenChanged:!1};var i=gn.splitString(r.data,o),a=(0,tn.A)(i,2),l=a[0],u=a[1],c=r.cloneNode(!1);return e.setTextNodeData(c,u),e.setTextNodeData(r,l),e.insertAfter(r.parentNode,c,r),{position:e.newPosition(r.parentNode,r.offset+1),childrenChanged:!0}}function Kr(e,t){bt.fatal(!e.collapsed,"walkRange error","framework/kernel/src/model/utils/range/walk-range.ts:20");var n,r=e.start,o=r.node,i=r.offset,a=function(e){var t=e.node,n=e.offset;if(t.isElement()){if(n<t.childCount)return t.getChildByOffset(n)}else bt.fatal(t.isTextNode(),"invalid node type","framework/kernel/src/model/utils/range/walk-range.ts:186");for(var r=t;r&&!r.isRootNode();){if(r.nextSibling)return r.nextSibling;r=r.parent}return null}(e.end);n=o.isTextNode()?o:o.getChildByOffset(i)||Gr(o),bt.fatal(n,"framework/kernel/src/model/utils/range/walk-range.ts:32");var l=Yr(),u=(0,tn.A)(l,2),c=u[0];if(t(n,u[1]),!c.stopped){if(c.skipped){if(!(n=Gr(n)))return;if(a){var s=Ut.compare(n,a);if(bt.fatal(!s.containedBy,"invalid stopNode","framework/kernel/src/model/utils/range/walk-range.ts:54"),s.equal||s.following)return}}else n=Jr(n);for(var d=new Map;n&&n!==a;){var f=Yr(),h=(0,tn.A)(f,2),p=h[0],v=h[1];if(bt.fatal(!d.has(n),"framework/kernel/src/model/utils/range/walk-range.ts:70"),d.set(n,1),t(n,v),p.stopped)return;if(p.skipped){if(!(n=Gr(n)))return;if(a){var m=Ut.compare(n,a);if(bt.fatal(!m.containedBy,"invalid stopNode","framework/kernel/src/model/utils/range/walk-range.ts:90"),m.equal||m.following)return}}else n=Jr(n)}}}function Yr(){var e={stopped:!1,skipped:!1};return[e,{stop:function(){e.stopped=!0},skip:function(){e.skipped=!0}}]}function Gr(e){for(;e&&!e.isRootNode();){if(e.nextSibling)return e.nextSibling;e=e.parent}return null}function Jr(e){var t;if(!e)return null;if(e.isTextNode()){for(t=e;t&&!t.isRootNode();){if(t.nextSibling)return t.nextSibling;t=t.parent}return null}if(e.childCount)return e.firstChild;for(t=e;t&&!t.isRootNode();){if(t.nextSibling)return t.nextSibling;t=t.parent}return null}function Xr(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.node.closest(qe.Inline);return r&&Nt(r)?(r.hasCategory(qe.InlineBox)&&!n||(t=e.newPosition(r.parentNode,r.offset),e.removeChild(r.parentNode,r)),t):t}function Qr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Zr(e,t){return function(e,t,n,r){Nn(t,!0);var o=t.node;return t=o.isTextNode()?eo(e,t,r):o.hasCategory([qe.TableHole,qe.Hole])?function(e,t,n){return n?function(e,t){var n=t.node,r=t.offset;if(1===r){var o=e.createElement(e.defaultElementName);return e.insertBefore(n.parentNode,o,n),e.removeChild(n.parentNode,n),e.newPosition(o,0)}bt.fatal(0===r,"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:123");var i=Number(n.attrs.indent)||0;if(i>0){if(1===i)e.removeAttribute(n,"indent"),n.firstChild&&e.removeAttribute(n.firstChild,"hindent");else{var a=i-1;e.setAttribute(n,"indent",a),n.firstChild&&e.acceptAttr(n.firstChild.nodeName,"hindent",a)&&e.setAttribute(n.firstChild,"hindent",a)}return t}var l=n.previousSibling;return l?Nt(l)||l.hasCategory(qe.Hole)?(e.removeChild(n.parentNode,l),t):e.newPosition(l,l.childCount):t}(e,t):function(e,t){var n=t.node,r=t.offset;if(0===r){var o=e.createElement(e.defaultElementName);return e.insertBefore(n.parentNode,o,n),e.removeChild(n.parentNode,n),e.newPosition(o,0)}bt.fatal(1===r,"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:178");var i=n.nextSibling;return i?Nt(i)||i.hasCategory(qe.Hole)?(e.removeChild(n.parentNode,i),t):e.newPosition(i,0):t}(e,t)}(e,t,r):to(e,t,r),n&&(t=Xr(e,t)),Nn(t,!0),t}(e,t,!(arguments.length>2&&void 0!==arguments[2])||arguments[2],!(arguments.length>3&&void 0!==arguments[3])||arguments[3])}function eo(e,t,n){var r=t,o=r.node,i=r.offset;if(!o.isTextNode())return t;if(0===o.dataLength)return t=e.newPosition(o.parentNode,o.offset),e.removeChild(o.parentNode,o),to(e,t,n);if(n){if(0===i)return to(e,e.newPosition(o.parentNode,o.offset),n);var a=gn.deleteChar("forward",o.data,i),l=o.data.length-a.length;return e.setTextNodeData(o,a),e.newPosition(o,i-l)}return i===o.dataLength?to(e,e.newPosition(o.parentNode,o.offset+1),n):(e.setTextNodeData(o,gn.deleteChar("backward",o.data,i)),e.newPosition(o,i))}function to(e,t,n){return n?no(e,t):ro(e,t)}function no(e,t){var n,r,o,i=t,a=i.node,l=i.offset;if(bt.fatal(a.hasCategory([qe.Block,qe.Inline,qe.Root,qe.LikeRoot]),"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:210"),a.hasCategory([qe.Root,qe.LikeRoot])&&!a.hasCategory(qe.VirtualLikeRoot))return t.clone();if(a.hasCategory(qe.Inline)&&Nt(a))return t=e.newPosition(a.parentNode,a.offset),e.removeChild(a.parentNode,a),t;if(0===l){if(a.hasCategory(qe.Level)){if(bt.fatal(a.hasCategory(qe.Block),"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:236"),null===(n=a.attrs)||void 0===n?void 0:n.level){var u=a.attrs.level-1;return u>0?e.setAttribute(a,"level",u):e.removeAttribute(a,"level"),t}var c=e.createElement(e.defaultElementName);return a.children.forEach((function(t){bt.fatal(e.acceptNode(c.nodeName,t.nodeName),"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:253"),e.appendChild(c,t)})),e.insertBefore(a.parentNode,c,a),e.removeChild(a.parentNode,a),e.newPosition(c,0)}if(a.attrs.textIndent>0)return e.removeAttribute(a,"textIndent"),t;if(a.attrs.indent>0)return 1===a.attrs.indent?e.removeAttribute(a,"indent"):e.setAttribute(a,"indent",a.attrs.indent-1),t;if("center"===a.attrs.alignment||"right"===a.attrs.alignment)return e.removeAttribute(a,"alignment"),e.newPosition(a,0);if(a.hasCategory(qe.Heading)){if(bt.fatal(a.hasCategory(qe.Block),"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:288"),void 0!==(null===(r=a.attrs)||void 0===r?void 0:r.indexType)&&(null===(o=a.parentNode)||void 0===o?void 0:o.isRootNode())&&a.attrs.indexType>=0)return e.removeAttribute(a,"indexType"),t;var s=a.previousSibling;if(((null==s?void 0:s.hasCategory(e.defaultElementName))||(null==s?void 0:s.hasCategory(qe.Heading)))&&Nt(s))return e.removeChild(a.parentNode,s),t.clone();var d=e.createElement(e.defaultElementName);return a.children.forEach((function(t){bt.fatal(e.acceptNode(d.nodeName,t.nodeName),"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:318"),e.appendChild(d,t)})),e.insertBefore(a.parentNode,d,a),e.removeChild(a.parentNode,a),e.newPosition(d,0)}var f=a.parentNode,h=f.parentNode,p=a.previousSibling,v=a.nextSibling,m=Nt(a);if(m&&f.hasCategory(qe.VirtualLikeRoot)){if(1===f.childCount){var g=e.createElement(e.defaultElementName);return(null==h?void 0:h.hasCategory([qe.ContainerHole,qe.AlertHole]))?e.replaceChild(h.parentNode,g,h):e.replaceChild(f.parentNode,g,f),e.newPosition(g,0)}if(e.removeChild(f,a),!v&&!(null==h?void 0:h.hasCategory([qe.ContainerHole,qe.AlertHole]))){var b=e.createElement(e.defaultElementName);return e.insertAfter(f.parentNode,b,f),e.newPosition(b,0)}if(!p){var y=e.createElement(e.defaultElementName);return(null==h?void 0:h.hasCategory([qe.ContainerHole,qe.AlertHole]))?e.insertBefore(h.parentNode,y,h):e.insertBefore(f.parentNode,y,f),e.newPosition(y,0)}return e.newPosition(p,p.childCount)}if(a.hasCategory(qe.Inline)&&!p)return t=e.newPosition(a.parentNode,a.offset),Nt(a)&&e.removeChild(a.parentNode,a),no(e,t);if(!p){var w=a.parentNode;if(!w.hasCategory(qe.VirtualLikeRoot)){if(m&&a.hasCategory(qe.Block)&&a.nodeName!==e.defaultElementName){var A=e.createElement(e.defaultElementName);return e.replaceChild(w,A,a),e.newPosition(A,0)}return t.clone()}if(!(p=w.previousSibling))return Nt(w)?(t=e.newPosition(w.parentNode,w.offset),e.removeChild(w.parentNode,w),t):t.clone()}if(p.hasCategory(qe.VirtualLikeRoot)){if(!p.lastChild||1===p.childCount&&Nt(p.lastChild))return e.removeChild(p.parentNode,p),t.clone();p=p.lastChild}if(p.isTextNode()||p.hasCategory(qe.Inline))return bt.fatal(a.hasCategory(qe.Inline),"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:452"),Nt(a)&&e.removeChild(a.parentNode,a),p.isTextNode()?eo(e,e.newPosition(p,p.dataLength),!0):no(e,e.newPosition(p,p.childCount));if(p.hasCategory([qe.TableHole,qe.Hole]))return bt.fatal(1===p.childCount,"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:476"),Nt(a)?(e.removeChild(a.parentNode,a),e.newPosition(p,1)):(e.replaceChild(p.parentNode,a,p),t.clone());if(!p.hasCategory(qe.Block))return t.clone();if(Nt(p)&&!p.hasCategory([qe.Level]))return e.removeChild(p.parentNode,p),t.clone();if(p.hasCategory(qe.OnlyText)){var k,_=e.newPosition(p,p.childCount),C=_.clone(),N=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Qr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qr(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(a.children);try{for(N.s();!(k=N.n()).done;){var O=k.value;if(!O.isTextNode())return _;C=e.insertNodeByPosition(C,O)}}catch(e){N.e(e)}finally{N.f()}return a.parentNode.hasCategory(qe.VirtualLikeRoot)&&Nt(a.parentNode)?e.removeChild(a.parentNode.parentNode,a.parentNode):e.removeChild(a.parentNode,a),_}var x=e.newPosition(p,p.childCount),E=x.clone();return a.children.forEach((function(t){bt.fatal(e.acceptNode(p.nodeName,t.nodeName),"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:541"),E=e.insertNodeByPosition(E,t)})),a.parentNode.hasCategory(qe.VirtualLikeRoot)&&Nt(a.parentNode)?e.removeChild(a.parentNode.parentNode,a.parentNode):e.removeChild(a.parentNode,a),x}var D=a.getChildByOffset(l-1);if(bt.fatal(D,"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:563"),D.isTextNode())return eo(e,e.newPosition(D,D.dataLength),!0);if(D.hasCategory(qe.Inline)){if(Nt(D)){if(t=e.newPosition(D.parentNode,D.offset),e.removeChild(a,D),D.hasCategory(qe.InlineBox))return t}else t=e.newPosition(D,D.childCount);return no(e,t)}return bt.fatal(D.isCardNode(),"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:588"),e.removeChild(a,D),e.newPosition(a,l-1)}function ro(e,t){var n=t,r=n.node,o=n.offset;if(bt.fatal(r.hasCategory([qe.Block,qe.Inline,qe.Root,qe.LikeRoot]),"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:598"),r.hasCategory([qe.Root,qe.LikeRoot])&&!r.hasCategory(qe.VirtualLikeRoot))return t.clone();if(Nt(r)){if(bt.fatal(r.parentNode,"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:619"),1===r.parentNode.childCount&&r.parentNode.hasCategory(qe.VirtualLikeRoot)){var i=r.parentNode.parentNode;if(null==i?void 0:i.hasCategory([qe.AlertHole])){var a=e.createElement(e.defaultElementName);return e.replaceChild(i.parentNode,a,i),e.newPosition(a,0)}t=e.newPosition(r.parentNode.parentNode,r.parentNode.offset);var l=r.parentNode.nextSibling;return e.removeChild(r.parentNode.parentNode,r.parentNode),l?Et(l):ro(e,t)}var u=r.nextSibling;return r.hasCategory(qe.Block)?u?(e.removeChild(r.parentNode,r),Et(u)):t.clone():(bt.fatal(r.hasCategory(qe.Inline),"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:661"),r.hasCategory(qe.InlineBox)?(t=e.newPosition(r.parentNode,r.offset),e.removeChild(r.parentNode,r),t):u?(e.removeChild(r.parentNode,r),u.isTextNode()?eo(e,e.newPosition(u,0),!1):(bt.fatal(u.hasCategory(qe.Inline),"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:687"),ro(e,e.newPosition(u,0)))):(t=e.newPosition(r.parentNode,r.offset),e.removeChild(r.parentNode,r),ro(e,t)))}if(o===r.childCount){var c=r.nextSibling;return c&&c.hasCategory(qe.VirtualLikeRoot)&&(bt.fatal(c.firstChild,"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:698"),c=c.firstChild),r.hasCategory(qe.Inline)?c?c.isTextNode()?eo(e,e.newPosition(c,0),!1):(bt.fatal(c.hasCategory(qe.Inline),"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:714"),ro(e,e.newPosition(c,0))):ro(e,e.newPosition(r.parentNode,r.offset+1)):(bt.fatal(r.hasCategory(qe.Block),"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:719"),c&&c.hasCategory(qe.TextContainer)?(bt.fatal(c.hasCategory(qe.Block),"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:726"),c.children.forEach((function(t){e.appendChild(r,t)})),1===c.parentNode.childCount&&c.parentNode.hasCategory(qe.VirtualLikeRoot)?e.removeChild(c.parentNode.parentNode,c.parentNode):e.removeChild(c.parentNode,c),t.clone()):t.clone())}var s=r.getChildByOffset(o);return s.isCardNode()?(bt.fatal(s.hasCategory(qe.InlineCard),"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:751"),e.removeChild(r,s),t.clone()):s.isTextNode()?eo(e,e.newPosition(s,0),!1):(bt.fatal(s.hasCategory(qe.Inline),"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:762"),ro(e,e.newPosition(s,0)))}var oo=o(1563),io=o.n(oo),ao=function(){function e(){(0,Ke.A)(this,e)}return(0,$e.A)(e,null,[{key:"insertNodeToOffset",value:function(t,n,r){bt.fatal("*"===r.nodeName&&t.isElement()&&n>=0&&n<=t.childCount,"failed to execute insertNodeToOffset","framework/kernel/src/model/utils/node/dangerous-node-helper.ts:34"),r._parent&&e.removeChild(r);var o=t._children;o.splice(n,0,r),r._parent=t,r._dirty=!0;for(var i=0,a=o.length;i<a;i++)o[i]._offset=i}},{key:"appendChild",value:function(t,n){return e.insertNodeToOffset(t,t.childCount,n)}},{key:"removeChild",value:function(e){bt.fatal("*"===e.nodeName,"framework/kernel/src/model/utils/node/dangerous-node-helper.ts:66");var t=e._parent;bt.fatal(t&&e._dirty,"failed to execute removeChild","framework/kernel/src/model/utils/node/dangerous-node-helper.ts:70"),e._parent=null,e._offset=-1;var n=t._children,r=n.indexOf(e);n.splice(r,1);for(var o=r,i=n.length;o<i;o++)n[o]._offset=o}},{key:"markRange",value:function(e,t){var n=t.start,r=t.end,o={needMerge:n.node.isTextNode()&&0!==n.offset&&n.offset!==n.node.dataLength,node:e.createElement("*")},i=t.collapsed?null:{needMerge:r.node.isTextNode()&&0!==r.offset&&r.offset!==r.node.dataLength,node:e.createElement("*")};return n.node.isCardNode()&&(n=e.newPosition(n.node.parentNode,n.node.offset)),t.collapsed?r=n:r.node.isCardNode()&&(r=e.newPosition(r.node.parentNode,r.node.offset+1)),i&&(r=kn(e,r),e.insertNodeByPosition(r,i.node)),o&&(n=kn(e,n)),e.insertNodeByPosition(n,o.node),n=e.newPosition(o.node.parentNode,o.node.offset),r=i?e.newPosition(i.node.parentNode,i.node.offset):n,{range:e.newRange(n,r),startSentry:o,endSentry:i}}},{key:"recoverRange",value:function(e,t){var n=t.startSentry,r=t.endSentry,o=e.newPosition(n.node.parentNode,n.node.offset);e.removeChild(n.node.parentNode,n.node),n.needMerge&&(o=lo(e,o));var i=o;r&&(i=e.newPosition(r.node.parentNode,r.node.offset),e.removeChild(r.node.parentNode,r.node),r.needMerge&&(i=lo(e,i)));var a=e.newRange(o,i);return Hn(a),a}}])}();function lo(e,t){var n=t.node,r=t.offset;bt.fatal(!n.isTextNode(),"framework/kernel/src/model/utils/node/dangerous-node-helper.ts:184");var o=n.getChildByOffset(r-1),i=n.getChildByOffset(r);bt.fatal(o&&i&&o.isTextNode()&&i.isTextNode(),"framework/kernel/src/model/utils/node/dangerous-node-helper.ts:189"),bt.fatal(io()(o.attrs,i.attrs),"framework/kernel/src/model/utils/node/dangerous-node-helper.ts:190");var a=o,l=o.dataLength;return e.setTextNodeData(o,o.data+i.data),e.removeChild(i.parentNode,i),e.newPosition(a,l)}function uo(e){var t=Ut.closest(e,[qe.Root,qe.LikeRoot]);return bt.fatal(t,"framework/kernel/src/model/utils/range/delete-content-by-range.ts:172"),t.hasCategory(qe.VirtualLikeRoot)?uo(t.parentNode):t}function co(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.start,o=t.end;return o=so(e,o,n,!1),t.collapsed?e.newRange(o):(r=so(e,r,n,!0),Vt.createAt(r,o))}function so(e,t,n){for(var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];t.node.isElement();){var o=t,i=o.node,a=o.offset;if(i.hasCategory([qe.TableHole,qe.Hole]))return t;if(r){var l=i.children[a];if(!l||l.isCardNode())return t;if(l.hasCategory(qe.Inline)&&!n)return t;t=e.newPosition(l,0)}else{var u=i.children[a-1];if(!u||u.isCardNode())return t;if(u.hasCategory(qe.Inline)&&!n)return t;if(u.isTextNode())return e.newPosition(u,u.dataLength);bt.fatal(u.isElement(),"framework/kernel/src/model/utils/range/shrink-range.ts:74"),t=e.newPosition(u,u.childCount)}}return t}function fo(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t.collapsed&&t.start.node.isCardNode()){bt.fatal(0===t.start.offset,"framework/kernel/src/model/utils/range/delete-content.ts:17");var o=t.start.node;t=e.newRange(e.newPosition(o.parentNode,r?o.offset+1:o.offset))}if(Hn(t,!0),t.collapsed){var i=Zr(e,t.start,n,r);t=i instanceof Vt?i:e.newRange(i)}else t=function(e,t,n){if(Hn(t,!0),function(e){var t=e.start,n=e.end;return t.node===n.node&&t.node.isTextNode()}(t))return function(e,t){var n=t,r=n.start,o=n.end;if(!r.node.isTextNode())return t;var i=r.node.data,a=i.substr(0,r.offset)+i.substr(o.offset);return e.setTextNodeData(r.node,a),e.newRange(e.newPosition(r.node,r.offset))}(e,t);if(t=qr(e,t),t=function(e,t){if(t.collapsed)return t;var n=t,r=n.start,o=n.end;return r.node.hasCategory([qe.TableHole,qe.Hole])&&(0===r.offset?r=e.newPosition(r.node.parentNode,r.node.offset):(bt.fatal(1===r.offset,"framework/kernel/src/model/utils/range/delete-content-by-range.ts:213"),r=e.newPosition(r.node.parentNode,r.node.offset+1))),o.node.hasCategory([qe.TableHole,qe.Hole])&&(1===o.offset?o=e.newPosition(o.node.parentNode,o.node.offset+1):(bt.fatal(0===o.offset,"framework/kernel/src/model/utils/range/delete-content-by-range.ts:222"),o=e.newPosition(o.node.parentNode,o.node.offset))),Hn(t=e.newRange(r,o)),t}(e,t),t.collapsed){var r=Zr(e,t.start,n,!0);if(r instanceof At)return e.newRange(r)}var o=t,i=o.start,a=o.end;bt.fatal(i.node.isElement()&&a.node.isElement(),"framework/kernel/src/model/utils/range/delete-content-by-range.ts:45");var l=e.createElement("*");ao.insertNodeToOffset(a.node,a.offset,l);var u=[],c=[];Kr(t,(function(e,t){var n=Ut.compare(e,l);n.equal?t.stop():n.preceding?e.hasCategory([qe.TableRow,qe.TableCell])?c.push(e):(u.push(e),t.skip()):e.hasCategory(qe.Inline)||(bt.fatal(n.contains,"framework/kernel/src/model/utils/range/delete-content-by-range.ts:76"),c.push(e))})),ao.removeChild(l),u.length&&u.forEach((function(t){var n=t.parentNode;e.removeChild(n,t)})),Nn(i,!0);var s=!i.node.hasCategory([qe.Root,qe.LikeRoot]);return c.length&&(s?function(e,t,n){n.isElement()&&(bt.fatal(t.node.isElement(),"framework/kernel/src/model/utils/range/delete-content-by-range.ts:133"),Nn(t,!0),function(e,t,n){return uo(t.node)===uo(n)}(0,t,n)?(t.node.hasCategory(qe.Inline)&&(bt.fatal(t.offset===t.node.childCount,"framework/kernel/src/model/utils/range/delete-content-by-range.ts:143"),t=e.newPosition(t.node.parentNode,t.node.offset+1)),bt.fatal(!n.hasCategory(qe.Inline),"framework/kernel/src/model/utils/range/delete-content-by-range.ts:150"),n.children.forEach((function(n){bt.fatal(e.acceptNode(t.node.nodeName,n.nodeName),"framework/kernel/src/model/utils/range/delete-content-by-range.ts:152"),t=e.insertNodeByPosition(t,n)})),e.removeChild(n.parentNode,n)):bt.fatal(!1,"framework/kernel/src/model/utils/range/delete-content-by-range.ts:138"))}(e,i,c.pop()):i=e.newPosition(c.pop(),0)),s?n&&(i=Xr(e,i,!0)):e.acceptNode(i.node.nodeName,e.defaultElementName)&&(i=e.insertNodeByPosition(i,e.createElement(e.defaultElementName))),Nn(i,_n),Hn(t=e.newRange(i),!0),t}(e,t,n),bt.fatal(t.collapsed,"framework/kernel/src/model/utils/range/delete-content.ts:45");return co(e,t)}function ho(e,t){var n=vo(e,t.node,t.offset),r=n.node,o=n.offset;return e.newPosition(r,o)}function po(e,t){var n=mo(e,t.node,t.offset),r=n.node,o=n.offset;return e.newPosition(r,o)}function vo(e,t,n){var r={node:t,offset:n};return 0!==n||t.isCardNode()?r:t.hasCategory(qe.Block)?{node:t.parentNode,offset:t.offset}:vo(e,t.parentNode,t.offset)}function mo(e,t,n){var r={node:t,offset:n};return t.isCardNode()?r:t.isTextNode()?n!==t.dataLength?r:mo(e,t.parentNode,t.offset+1):(bt.fatal(t.isElement(),"framework/kernel/src/model/utils/range/enlarge-range-contains-block-node.ts:140"),t.hasCategory(qe.Block)?n!==t.childCount?r:{node:t.parentNode,offset:t.offset+1}:vo(e,t.parentNode,t.offset+1))}var go=-1,bo=0,yo=1;function wo(e){var t=e.start,n=e.end,r=e.collapsed;return!!Ao(t)&&(!!r||!!Ao(n)&&function(e,t){for(var n=[].concat((0,ln.A)(e.node.getPath()),[e.offset]),r=[].concat((0,ln.A)(t.node.getPath()),[t.offset]),o=0,i=n.length;o<i;o++){var a=n[o],l=r[o];if(void 0===l)return yo;if(a<l)return go;if(a>l)return yo}return n.length===r.length?bo:go}(t,n)===go)}function Ao(e){var t=e.node,n=e.offset;return!(!t.isConnected||n<0||0!==n&&!(t.isTextNode()?n<=t.dataLength:t.isElement()?n<=t.childCount:(bt.fatal(t.isCardNode(),"framework/kernel/src/model/utils/range/is-valid-range.ts:46"),!1)))}function ko(e,t){if(t.collapsed)return t;var n=t,r=n.start,o=n.end,i=Ut.closest(r.node,qe.Block),a=Ut.closest(o.node,qe.Block);return i||a?(i&&(r=function(e,t){var n=_o(e,t.node,t.offset),r=n.node,o=n.offset;return e.newPosition(r,o)}(e,r)),a&&(o=function(e,t){var n=Co(e,t.node,t.offset),r=n.node,o=n.offset;return e.newPosition(r,o)}(e,o)),t=e.newRange(r,o),bt.fatal(!t.collapsed,"framework/kernel/src/model/utils/range/enlarge-range-in-block-node.ts:37"),wo(t),t):t}function _o(e,t,n){var r={node:t,offset:n};return 0!==n||t.isCardNode()||t.hasCategory(qe.Block)?r:_o(e,t.parentNode,t.offset)}function Co(e,t,n){var r={node:t,offset:n};return t.isCardNode()?r:t.isTextNode()?n!==t.dataLength?r:Co(e,t.parentNode,t.offset+1):(bt.fatal(t.isElement(),"framework/kernel/src/model/utils/range/enlarge-range-in-block-node.ts:104"),t.hasCategory(qe.Block)?r:_o(e,t.parentNode,t.offset+1))}function No(e,t){var n=t||{},r=n.enter,o=n.leave;(r||o)&&(r=r||function(){},o=o||function(){},e.collapsed?function(e,t,n){for(var r=_t(e.node,[qe.Root,qe.LikeRoot]),o=[],i=0,a=r.length;i<a;i++){var l=r[i];if(o.push(l),!1===t(l))break}o.reverse().forEach((function(e){n(e)}))}(e.start,r,o):function(e,t,n){var r=e.commonAncestorContainer,o=function(e,t){if(e===t)return[e];for(var n=[];e!==t;)n.push(e),e=e.parentNode;return n.push(t),n.reverse()}(r,$t(r,[qe.Root,qe.LikeRoot]));bt.fatal(o[o.length-1]===r,"framework/kernel/src/model/utils/range/full-walk-range.ts:60"),function(e,t,n,r){var o=new Set,i=new Set,a=e.pop(),l=t.start.node.getPath(),u=t.end.node.getPath(),c=n,s=r;n=function(e){return bt.fatal(!o.has(e),"framework/kernel/src/model/utils/range/full-walk-range.ts:83"),o.add(e),c(e)},r=function(e){return bt.fatal(!i.has(e)&&o.has(e),"framework/kernel/src/model/utils/range/full-walk-range.ts:91"),i.add(e),s(e)},t.start.node.isElement()?l.push(t.start.offset):l.push(t.start.node.offset),t.end.node.isElement()?u.push(t.end.offset):u.push(t.end.node.offset+1);for(var d=[],f=!0,h=0,p=e.length;h<p;h++){var v=e[h];if(d.push(v),!1===n(v)){f=!1;break}}f&&function(e,t,n,r,o){for(var i=[e],a=e;a;){if(!1!==r(a)){var l=xo(a,t,n);if(l){a=l,i.push(l);continue}}for(a=null;i.length;){var u=i.pop();o(u);var c=Oo(u,t,n);if(c){a=c,i.push(c);break}}}bt.fatal(0===i.length,"framework/kernel/src/model/utils/range/full-walk-range.ts:172")}(a,l,u,n,r);for(var m=d.length-1;m>=0;m--)r(d[m]);bt.fatal(o.size===i.size,"framework/kernel/src/model/utils/range/full-walk-range.ts:132")}(o,e,t,n)}(e,r,o))}function Oo(e,t,n){var r=e.nextSibling;return r&&Eo(r,t,n)?r:null}function xo(e,t,n){if(!e.isElement())return null;for(var r=e.firstChild;r;){if(Eo(r,t,n))return r;r=r.nextSibling}return r}function Eo(e,t,n){for(var r=e.getPath(),o=0,i=Math.min(r.length,t.length);o<i;o++){if(r[o]<t[o])return!1;if(r[o]>t[o])break}for(var a=n[n.length-1],l=n.slice(0,-1),u=0,c=Math.min(r.length,l.length);u<c;u++){if(r[u]<l[u])return!0;if(r[u]!==l[u])return!1}var s=r[n.length-1];return void 0===s||s<a}var Do=0,Po=-1,Ro=1;function So(e,t,n){var r=-1;for(bt.fatal(n!==e,"framework/kernel/src/model/utils/position/compare-position.ts:64");n!==e;)r=n.offset,n=n.parentNode;return r>=t}var To=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e),Object.defineProperty(this,"_sections",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_section",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_textFragment",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_stopped",{enumerable:!0,configurable:!0,writable:!0,value:!1})}),[{key:"isStopped",get:function(){return this._stopped}},{key:"stop",value:function(){this._stopped=!0}},{key:"nextSection",value:function(){this._section?bt.fatal(this._sections[this._sections.length-1]===this._section,"framework/kernel/src/model/utils/range/get-text-sections.ts:45"):bt.fatal(0===this._sections.length,"framework/kernel/src/model/utils/range/get-text-sections.ts:43"),this._section=[],this._textFragment=null,this._sections.push(this._section)}},{key:"break",value:function(){this._section||this.nextSection(),this._section.push(null),this.nextText()}},{key:"nextText",value:function(){this._textFragment=null}},{key:"pushText",value:function(e,t,n){this._section||this.nextSection(),this._textFragment||(this._textFragment={text:"",fragments:[]},this._section.push(this._textFragment)),this._textFragment.text=this._textFragment.text+e,this._textFragment.fragments.push({text:e,start:t,end:n})}},{key:"getResult",value:function(){return this._sections}}])}();function jo(e,t){if(Hn(t),t.collapsed)return[];var n=t.start,r=t.end,o=new To;return function(e,t,n,r){for(;!e.isStopped;)n=Io(e,t,n,r)}(o,e,n,r),o.getResult()}function Io(e,t,n,r){var o=n.node,i=n.offset;if(o.isTextNode())return function(e,t,n,r){var o=n.node,i=n.offset,a=r.node,l=r.offset;return o.isTextNode()?o===a?(bt.fatal(i<=l,"framework/kernel/src/model/utils/range/get-text-sections.ts:210"),e.pushText(gn.substring(o.data,i,l),{node:o,offset:i},{node:o,offset:l}),e.stop(),null):(e.pushText(gn.substring(o.data,i),{node:o,offset:i},{node:o,offset:o.dataLength}),t.newPosition(o.parentNode,o.offset+1)):null}(e,t,n,r);bt.fatal(o.isElement(),"framework/kernel/src/model/utils/range/get-text-sections.ts:135");var a,l=o.getChildByOffset(i);if(l)l.hasCategory(qe.BlockCard)?(e.nextSection(),a=t.newPosition(o,i+1)):l.isTextNode()?(e.nextText(),a=t.newPosition(l,0)):l.hasCategory(qe.InlineCard)?(e.break(),a=t.newPosition(o,i+1)):(bt.fatal(l.isElement(),"framework/kernel/src/model/utils/range/get-text-sections.ts:171"),l.hasCategory(qe.Block)?(e.nextSection(),a=t.newPosition(l,0)):a=t.newPosition(l,0));else{if(o.isRootNode())return e.stop(),null;a=t.newPosition(o.parentNode,o.offset+1)}return function(e,t){if(At.equal(e,t))return Do;var n=e.node,r=e.offset,o=t.node,i=t.offset;if(n===o)return r<i?Po:(bt.fatal(r>i,"framework/kernel/src/model/utils/position/compare-position.ts:27"),Ro);var a=kt(n,o);return a.preceding?Po:a.following?Ro:a.contains?So(n,r,o)?Po:Ro:(bt.fatal(a.containedBy,"framework/kernel/src/model/utils/position/compare-position.ts:51"),So(o,i,n)?Ro:Po)}(a,r)!==Po?(e.stop(),null):a}function Bo(e,t){var n=[t.start];t.collapsed||n.push(t.end);var r=function(e,t){var n=[];return t.forEach((function(e){var t=e.node,r=e.offset,o=t;if(!t.hasCategory([qe.Root,qe.LikeRoot,qe.TableHole,qe.Hole])){t.isElement()&&(o=t.getChildByOffset(r)||t);var i=Ut.getAncestors(o,qe.Block)[0];bt.fatal(i,"framework/kernel/src/model/utils/range/optimize-range.ts:295"),-1===n.indexOf(i)&&n.push(i)}})),n}(0,n);return r.forEach((function(t){n=function(e,t,n){return Ot(t,{leave:function(r){if(r!==t&&"*"!==r.nodeName){if(r.isTextNode()){if(""!==r.data||function(e,t){return e.some((function(e){return e.node===t}))}(n,r))return}else{if(!r.isElement())return;if(r.childCount>0)return}(function(e,t){for(var n=t.parentNode;n;){if(n.childCount>1)return!1;if(n===e)return!0;n=n.parentNode}return!0})(t,r)||r.hasCategory(qe.InlineBox)||(n=n.map((function(t){var n=t.node,o=t.offset;return r===n?e.newPosition(n.parentNode,n.offset):r.parentNode!==n?t:o>r.offset?(bt.fatal(o-1>=0,"framework/kernel/src/model/utils/range/optimize-range.ts:95"),e.newPosition(n,o-1)):t})),e.removeChild(r.parentNode,r))}}}),n}(e,t,n)})),r.forEach((function(t){n=Mo(e,t,n)})),Hn(t=e.newRange(n[0],n[1])),t}function Mo(e,t,n){if(!t.isElement())return n;for(var r=t.firstChild;r&&r.nextSibling;){var o=r.nextSibling;a=o,(i=r).isTextNode()&&a.isTextNode()&&Uo(i.attrs,a.attrs)&&o.isTextNode()?(n=Fo(e,r,o,n),bt.fatal(!o.isConnected,"framework/kernel/src/model/utils/range/optimize-range.ts:138"),bt.fatal(r.isConnected,"framework/kernel/src/model/utils/range/optimize-range.ts:139")):r=o}var i,a;return t.children.forEach((function(t){n=Mo(e,t,n)})),n}function Fo(e,t,n,r){return t.isTextNode()?n.isTextNode()?function(e,t,n,r){bt.fatal(t.parentNode===n.parentNode,"framework/kernel/src/model/utils/range/optimize-range.ts:185");var o=t.data,i=n.data;return e.setTextNodeData(t,o+i),r=r.map((function(r){var a=r.node,l=r.offset;if(a===n)return e.newPosition(t,gn.size(o)+l);if(n.parentNode===a){if(n.offset<l)return bt.fatal(l-1>=0,"framework/kernel/src/model/utils/range/optimize-range.ts:201"),e.newPosition(a,l-1);if((t.offset+1===l||n.offset===l)&&i)return e.newPosition(t,gn.size(o))}return r})),e.removeChild(n.parentNode,n),r.forEach((function(e){return Nn(e)})),r}(e,t,n,r):r:t.isElement()&&n.isElement()?function(e,t,n,r){bt.fatal(t.nextSibling===n,"framework/kernel/src/model/utils/range/optimize-range.ts:228");var o=t.childCount,i=n.childCount;return n.children.forEach((function(n){e.appendChild(t,n)})),r=r.map((function(r){var a=r.node,l=r.offset;if(a===n)return e.newPosition(t,o+l);if(n.parent===a){if(bt.fatal(t.parent===a,"framework/kernel/src/model/utils/range/optimize-range.ts:245"),n.offset<l)return bt.fatal(l-1>=0,"framework/kernel/src/model/utils/range/optimize-range.ts:248"),e.newPosition(a,l-1);if((t.offset+1===l||n.offset===l)&&i>0)return e.newPosition(t,o)}return r})),e.removeChild(n.parentNode,n),r.forEach((function(e){return Nn(e)})),r}(e,t,n,r):r}function Lo(e){return"[object Object]"===Object.prototype.toString.call(e)}function Uo(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((function(e,n){return Uo(e,t[n])}));if("object"!==(0,Gn.A)(e)&&"object"!==(0,Gn.A)(t))return!1;if(e&&t){bt.fatal(Lo(e)&&Lo(t),"framework/kernel/src/model/utils/range/optimize-range.ts:357");var n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&n.every((function(n){return Uo(e[n],t[n])}))}return!1}function Vo(e,t,n){var r=t.node,o=t.offset;if(!r.isTextNode())return{position:t,hasNewNode:!1};if(0===o)return n&&Nt(r)?{position:e.newPosition(r.parentNode,r.offset+1),hasNewNode:!1}:{position:e.newPosition(r.parentNode,r.offset),hasNewNode:!1};if(o===gn.size(r.data))return{position:e.newPosition(r.parentNode,r.offset+1),hasNewNode:!1};var i=gn.splitString(r.data,o),a=(0,tn.A)(i,2),l=a[0],u=a[1];bt.fatal(l&&u,"framework/kernel/src/model/utils/range/split-text-node-by-range.ts:84");var c=r.cloneNode(!1);return e.setTextNodeData(r,l),e.setTextNodeData(c,u),e.insertAfter(r.parentNode,c,r),{position:e.newPosition(r.parentNode,r.offset+1),hasNewNode:!0}}function Ho(e,t,n,r){for(var o=null,i=null,a=-1,l=-1,u=0,c=0,s=r.length;c<s;c++){var d=r[c];if(bt.fatal(d.start.node.isTextNode(),"framework/kernel/src/model/utils/range/search-text.ts:144"),d.offset===t||d.offset<t&&d.offset+d.count>t){var f=d.start.node;l=c,a=t-u,o=e.newPosition(f,a)}else u+=d.count}var h=n;if(a+h<=r[l].count)i=e.newPosition(r[l].end.node,a+h);else{h-=r[l].count-a;for(var p=l+1,v=r.length;p<v;p++){var m=r[p];if(bt.fatal(h>0,"framework/kernel/src/model/utils/range/search-text.ts:173"),m.count>=h){i=e.newPosition(m.end.node,h);break}h-=m.count}}bt.fatal(o&&i,"framework/kernel/src/model/utils/range/search-text.ts:185");var g=e.newRange(o,i);return Hn(g),g}function zo(e,t,n,r){var o=t.collapsed;if(t.collapsed){var i=function(e,t,n,r){if(r){var o=Ut.closest(t.node,qe.Block);if(o&&o.hasCategory(r))return t}var i=_t((t=kn(e,t,An)).node),a=e.textAttrs,l=n.some((function(e){var t=e.name;return a.includes(t)}));return i.forEach((function(t){n.forEach((function(n){var r=n.name,o=n.value;e.acceptAttrName(t.nodeName,r)&&(null==o?e.removeAttribute(t,r):e.setAttribute(t,r,o))}))})),Wo(e,t.node,n,l)||t}(e,t.start,n,r);t=e.newRange(i)}else t=function(e,t,n,r){var o=[],i=[];return n.forEach((function(e){null!==e.value&&void 0!==e.value?o.push(e):i.push(e)})),function(e,t,n,r){No(t,{enter:function(t){if(r&&t.hasCategory(qe.Block)&&t.hasCategory(r))return!1;n.forEach((function(n){var r=n.name;e.removeAttribute(t,r)}))}})}(e,t=qr(e,t),i,r),function(e,t,n,r){var o=e.textAttrs,i=n.some((function(e){var t=e.name;return o.includes(t)}));No(t,{enter:function(t){if(r&&t.hasCategory(qe.Block)&&t.hasCategory(r))return!1;n.forEach((function(n){var r=n.name,o=n.value;e.acceptAttrName(t.nodeName,r)&&e.setAttribute(t,r,o)}))},leave:function(t){Wo(e,t,n,i)}})}(e,t,o,r),t}(e,t,n,r);return bt.fatal(o===t.collapsed,"framework/kernel/src/model/utils/range/update-attribute.ts:47"),Hn(t),Bo(e,t)}function Wo(e,t,n,r){var o=e.defaultElementName;if(t.isEmpty()&&t.hasCategory([qe.Root,qe.LikeRoot])){var i,a=e.createElement(o);return e.appendChild(t,a),r&&(i=e.createTextNode(""),e.appendChild(a,i)),n.forEach((function(t){var n=t.name,r=t.value;e.acceptAttr(a.nodeName,n,r)&&e.setAttribute(a,n,r),i&&e.acceptAttr(i.nodeName,n,r)&&e.setAttribute(i,n,r)})),i?e.newPosition(i,0):e.newPosition(a,0)}if(r&&t.isEmpty()&&t.hasCategory(qe.TextContainer)){var l=e.createTextNode("");return e.appendChild(t,l),n.forEach((function(t){var n=t.name,r=t.value;l&&e.acceptAttr(l.nodeName,n,r)&&e.setAttribute(l,n,r)})),e.newPosition(l,0)}return null}function qo(e,t){var n=$t(e,qe.Block);if(!n)return null;if(e.isTextNode()&&(0===t?(t=e.offset,e=e.parentNode):t===e.dataLength?(t=e.offset+1,e=e.parentNode):t=-1),-1===t)return{blockNode:n,offset:t};for(;e!==n;){var r=e.parentNode,o=r.childCount;if(0===t)t=e.offset,e=r;else{if(t!==o){t=-1;break}t=e.offset+1,e=r}}return{blockNode:n,offset:t}}function $o(e,t){t.collapsed||(t=fo(e,t)),bt.fatal(t.collapsed,"framework/kernel/src/model/utils/range/split-block-content.ts:15");var n=tr(e,t.start,er);return e.newRange(n)}function Ko(e,t,n){var r=e.createElement("*"),o=r.cloneNode(!1),i=!t.start.node.isTextNode(),a=!t.end.node.isTextNode(),l=t.start,u=t.end;a&&ao.insertNodeToOffset(u.node,u.offset,o),i&&ao.insertNodeToOffset(l.node,l.offset,r),a&&(u=e.newPosition(o.parentNode,o.offset+1)),i&&(l=e.newPosition(r.parentNode,r.offset));var c=[];return No(e.newRange(l,u),{enter:function(e){e.nodeName===n&&c.push(e)}}),c.forEach((function(t){!function(e,t){var n=t.parentNode,r=t.children,o=t.offset;r.reverse().forEach((function(t){e.insertByOffset(n,o,t)})),e.removeChild(n,t)}(e,t)})),l=t.start,u=t.end,i&&(l=e.newPosition(r.parentNode,r.offset),ao.removeChild(r)),a&&(u=e.newPosition(o.parentNode,o.offset),ao.removeChild(o)),Hn(t=e.newRange(l,u)),t}var Yo={isValidRange:wo,isEqualRange:function(e,t){return e.start.node===t.start.node&&e.start.offset===t.start.offset&&e.end.node===t.end.node&&e.end.offset===t.end.offset},deleteContent:fo,walkRange:Kr,fullWalkRange:No,shrinkRange:co,shrinkBlockNodeBoundary:function(e,t){var n,r;if(t.collapsed)return t;var o=qo(t.start.node,t.start.offset);if(!o)return t;var i=qo(t.end.node,t.end.offset);if(!i)return t;if(o.blockNode===i.blockNode)return t;var a={node:t.start.node,offset:t.start.offset};o.offset===o.blockNode.childCount&&(null===(n=o.blockNode.nextSibling)||void 0===n?void 0:n.hasCategory(qe.Block))&&(a.node=o.blockNode.nextSibling,a.offset=0);var l={node:t.end.node,offset:t.end.offset};0===i.offset&&(null===(r=i.blockNode.previousSibling)||void 0===r?void 0:r.hasCategory(qe.Block))&&(l.node=i.blockNode.previousSibling,l.offset=l.node.childCount);var u=e.newRange(e.newPosition(a.node,a.offset),e.newPosition(l.node,l.offset));return wo(u)?u:t},setAttribute:function(e,t,n,r){return zo(e,t,[{name:n,value:r}])},removeAttribute:function(e,t,n){var r=Array.isArray(n)?n:[n];if(t.collapsed){var o=function(e,t,n){return _t((t=kn(e,t,An)).node).forEach((function(t){n.forEach((function(n){e.removeAttribute(t,n)}))})),t}(e,t.start,r);t=e.newRange(o)}else t=function(e,t,n){return t=function(e,t){bt.fatal(!t.collapsed,"framework/kernel/src/model/utils/range/split-text-node-by-range.ts:14");var n=Vo(e,t.end,!0);Nn(t.start);var r=Vo(e,t.start,!1);r.position.node===n.position.node&&r.hasNewNode&&(n.position=e.newPosition(n.position.node,n.position.offset+1));var o=e.newRange(r.position,n.position);return Hn(o),bt.fatal(!o.collapsed&&!o.start.node.isTextNode()&&!o.end.node.isTextNode(),"framework/kernel/src/model/utils/range/split-text-node-by-range.ts:37"),o}(e,t),Hn(t),No(t,{enter:function(t){n.forEach((function(n){e.removeAttribute(t,n)}))}}),t}(e,t,r);return Hn(t),Bo(e,t)},updateAttribute:zo,enlargeRangeContainsBlockNode:function(e,t){if(t.collapsed)return t;var n=t,r=n.start,o=n.end,i=Ut.closest(r.node,qe.Block),a=Ut.closest(o.node,qe.Block);return i||a?i===a?function(e,t,n){var r=n.parentNode;if(!r)return t;var o=t,i=o.start,a=o.end;return i=ho(e,i),a=po(e,a),i.node!==r||a.node!==r||Hn(t=e.newRange(i,a)),t}(e,t,i):(i&&(r=ho(e,r)),a&&(o=po(e,o)),t=e.newRange(r,o),bt.fatal(!t.collapsed,"framework/kernel/src/model/utils/range/enlarge-range-contains-block-node.ts:47"),Hn(t),t):t},enlargeRangeInBlockNode:ko,enlargeRangeToCommonAncestor:function(e,t){bt.fatal(!t.collapsed,"framework/kernel/src/model/utils/range/enlarge-range-to-common-ancestor.ts:12");for(var n=t.commonAncestorContainer,r=t.start.node,o=t.start.offset;r!==n;)o=r.offset,r=r.parentNode;for(var i=t.end.node,a=t.end.offset;i!==n;)a=i.offset+1,i=i.parentNode;return bt.fatal(r===i&&o<a,"framework/kernel/src/model/utils/range/enlarge-range-to-common-ancestor.ts:32"),Hn(t=e.newRange(e.newPosition(r,o),e.newPosition(i,a))),t},splitTextContent:qr,splitBlock:function(e,t){t.collapsed||(t=fo(e,t)),bt.fatal(t.collapsed,"framework/kernel/src/model/utils/range/split-block.ts:14");var n=function(e,t){var n=t.node;return bt.fatal($t(t.node,qe.Block),"framework/kernel/src/model/utils/position/helpers/split-block-by-position.ts:21"),t=Nt(n)?function(e,t){var n=$t(t.node,qe.Block),r=n.firstChild,o=n.hasCategory(qe.Clean);r&&bt.fatal(1===n.childCount,"framework/kernel/src/model/utils/position/helpers/split-block-by-position.ts:40");var i=e.defaultElementName,a=o?{}:Yt(e,i,n.attrs),l=e.createElement(i,a);return r&&!o&&e.acceptNode(l.nodeName,r.nodeName)&&e.appendChild(l,r.cloneNode(!1)),e.insertAfter(n.parentNode,l,n),e.removeChild(n.parentNode,n),e.newPosition(l,0)}(e,t):function(e,t){var n=t=tr(e,t,Zn),r=n.node,o=n.offset;r.isTextNode()&&(o=r.offset,r=r.parentNode);var i=$t(t.node,qe.Block),a=function(e,t){var n=$t(t.node,qe.Block);if(Xt(t)&&!n.hasCategory(qe.Sticky)){var r=n.hasCategory(qe.Clean)?{}:t.node.attrs,o=e.defaultElementName,i=Yt(e,o,r);return e.createElement(o,i)}return t.node.isTextNode()?t.node.parentNode.cloneNode(!1):t.node.cloneNode(!1)}(e,t),l=null,u=null;if(Qt(t)?(r.children.slice(0,o).forEach((function(t){e.appendChild(a,t)})),e.insertBefore(r.parentNode,a,r),l=a,u=r):(r.children.slice(o).forEach((function(t){e.appendChild(a,t)})),e.insertAfter(r.parentNode,a,r),l=r,u=a,Nt(a)&&i.hasCategory(qe.Clean)&&a.children.reverse().forEach((function(t){e.removeChild(a,t)}))),u.isEmpty())return e.newPosition(u,0);if(u.firstChild.isCardNode())return e.newPosition(u,0);if(bt.fatal(u.firstChild.isTextNode(),"framework/kernel/src/model/utils/position/helpers/split-block-by-position.ts:114"),l.isEmpty()){var c=u.firstChild.cloneNode(!1);e.setTextNodeData(c,""),e.appendChild(l,c)}return e.newPosition(u.firstChild,0)}(e,t),Nn(t,!0),t}(e,t.start);return Nn(n,!0),e.newRange(n)},splitBlockContent:$o,wrapInlineNode:function(e,t,n){bt.fatal(e.hasCategory(n.nodeName,[qe.Inline,qe.TextContainer],!0),"framework/kernel/src/model/utils/range/wrap-inline-node.ts:17"),bt.fatal($t(t.commonAncestorContainer,qe.Block),"framework/kernel/src/model/utils/range/wrap-inline-node.ts:24"),t=qr(e,t),t=Ko(e,t,n.nodeName),bt.fatal(t.start.node.isElement()&&t.end.node.isElement(),"framework/kernel/src/model/utils/range/wrap-inline-node.ts:31"),bt.fatal(t.start.node===t.end.node,"framework/kernel/src/model/utils/range/wrap-inline-node.ts:33");var r=[];return Kr(t,(function(e,t){r.push(e),t.skip()})),bt.fatal(r.length>0,"framework/kernel/src/model/utils/range/wrap-inline-node.ts:42"),e.insertNodeByPosition(t.start,n),r.forEach((function(t){e.appendChild(n,t)})),Hn(t=Vt.selectNodeContents(n)),t},unwrapInlineNode:function(e,t,n){bt.fatal(e.hasCategory(n.nodeName,qe.Inline),"framework/kernel/src/model/utils/range/unwrap-inline-node.ts:14");var r=ao.markRange(e,t);return n.children.forEach((function(t){e.insertBefore(n.parentNode,t,n)})),e.removeChild(n.parentNode,n),Hn(t=ao.recoverRange(e,r)),t},getTextSections:jo,searchText:function(e,t,n,r){return n?function(e,t,n){var r=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).isIgnoreCase,o=void 0===r||r,i=n.map((function(e){var t=[],n=null;return e.forEach((function(e){e?(bt.fatal(1===e.fragments.length,"framework/kernel/src/model/utils/range/search-text.ts:68"),n?(n.positions.push({offset:gn.size(n.text),count:gn.size(e.text),start:e.fragments[0].start,end:e.fragments[0].end}),n.text+=e.text):(n={positions:[],text:""},t.push(n),n.text=e.text,n.positions.push({offset:0,count:gn.size(e.text),start:e.fragments[0].start,end:e.fragments[0].end}))):n=null})),t})),a=[],l=gn.size(t);return o&&(t=t.toLowerCase()),i.forEach((function(n){n.forEach((function(n){var r=n.text,i=n.positions,u=0;o&&(r=r.toLowerCase());do{if(-1===(u=r.indexOf(t,u)))return;a.push(Ho(e,u,l,i)),u+=l}while(u>0)}))})),a}(e,n,jo(e,t),r):[]},getTextContent:function(e,t){return jo(e,t).map((function(e){return e.map((function(e){return e?e.text:""})).join("")})).join("\n")},wrapRootNode:function(e,t,n){bt.fatal(n.hasCategory(qe.LikeRoot)&&!n.isConnected,"framework/kernel/src/model/utils/range/wrap-root-node.ts:16"),t=Ko(e,t,n.nodeName);var r=e.createElement("*"),o=r.cloneNode(!1),i=!t.start.node.isTextNode(),a=!t.end.node.isTextNode(),l=t,u=l.start,c=l.end;a&&e.insertNodeByPosition(t.end,o),i&&e.insertNodeByPosition(t.start,r),a&&(c=e.newPosition(t.end.node,o.offset+1));var s=[];return No(e.newRange(u,c),{enter:function(e){if(e.parentNode&&e.parentNode.hasCategory([qe.Root,qe.LikeRoot]))return s.push(e),!1}}),bt.fatal(s.length>0,"framework/kernel/src/model/utils/range/wrap-root-node.ts:56"),wr.insertNodes(e,e.newPosition(s[0].parentNode,s[0].offset),[n]),s.forEach((function(t){e.appendChild(n,t)})),i&&(bt.fatal(r.isConnected,"framework/kernel/src/model/utils/range/wrap-root-node.ts:70"),u=e.newPosition(r.parentNode,r.offset),e.removeChild(r.parentNode,r)),a&&(bt.fatal(o.isConnected,"framework/kernel/src/model/utils/range/wrap-root-node.ts:79"),c=e.newPosition(o.parentNode,o.offset),e.removeChild(o.parentNode,o)),Hn(t=e.newRange(u,c)),t},unwrapNode:Ko,deleteNode:function(e,t){var n=e.getSelection();bt.fatal(1===n.rangeCount&&t.isConnected,"framework/kernel/src/model/utils/range/delete-node.ts:10");var r=n.firstRange,o=ao.markRange(e,r);return e.removeChild(t.parentNode,t),Hn(r=ao.recoverRange(e,o)),r},replaceText:function(e,t,n){for(var r,o=t.length-1;o>=0;o--){var i=fo(e,t[o]);bt.fatal(i.collapsed,"framework/kernel/src/model/utils/range/replace-text.ts:15"),r=n?Vn(e,i.start,n):i.start}return bt.fatal(r,"framework/kernel/src/model/utils/range/replace-text.ts:24"),e.newRange(r)},replaceMultiText:function(e,t){for(var n,r=t.length-1;r>=0;r--){var o=fo(e,t[r].range);bt.fatal(o.collapsed,"framework/kernel/src/model/utils/range/replace-multi-text.ts:21"),n=t[r].text?Vn(e,o.start,t[r].text):o.start}return bt.fatal(n,"framework/kernel/src/model/utils/range/replace-multi-text.ts:30"),e.newRange(n)},replaceBlockNodeAndContentTextAttr:function(e,t,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];n&&bt.fatal(e.hasCategory(n,qe.Block),"framework/kernel/src/model/utils/range/replace-block-node-and-content-text-attr.ts:26");var a=new Set,l=e.defaultElementName,u=!(!n||n===l&&!r);if(No(t,{enter:function(e){if(e.hasCategory(qe.Block))return a.add(e),!1},leave:function(t){if(u&&t.isEmpty()&&t.hasCategory([qe.Root,qe.LikeRoot])){var n=e.createElement(l);e.appendChild(t,n),a.add(n)}}}),!a.size)return t;var c=ao.markRange(e,t);return a.forEach((function(t){!function(e,t,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],a=!!o,l=t;if(n)if(bt.fatal(e.acceptNode(t.parentNode.nodeName,n),"framework/kernel/src/model/utils/range/replace-block-node-and-content-text-attr.ts:92"),t.nodeName!==n){var u=e.createElement(n,r);l=u,e.replaceChild(t.parentNode,u,t),t.children.forEach((function(t){e.appendChild(u,t)}))}else{var c=t.attrs;Object.keys(c).forEach((function(n){i.includes(n)||e.removeAttribute(t,n)})),r&&Object.keys(r).forEach((function(n){i.includes(n)||e.setAttribute(t,n,r[n])}))}a&&function(e){var t=e.childCount;return 0===t||1===t&&"*"===e.firstChild.nodeName}(l)&&e.appendChild(l,e.createTextNode("")),l.children.forEach((function(t){if(t.isTextNode()){var n=t.attrs;Object.keys(n).forEach((function(n){e.removeAttribute(t,n)})),o&&Object.keys(o).forEach((function(n){e.setAttribute(t,n,o[n])}))}}))}(e,t,n,r,o,i)})),Hn(t=ao.recoverRange(e,c)),t}};const Go=Yo;function Jo(e){bt.fatal(e.length>1,"framework/kernel/src/model/utils/table/parse-to-row-layout.ts:23");var t={},n=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,a=e[0].start.node.parentNode.parentNode;e.forEach((function(e){var a=e.start.node;bt.fatal(a.hasCategory(qe.TableCell),"framework/kernel/src/model/utils/table/parse-to-row-layout.ts:36");var l=a.parentNode.offset,u=a.attrs.col,c=a.attrs.rowSpan||1,s=a.attrs.colSpan||1;t[l]||(t[l]={}),bt.fatal(!t[l][u],"framework/kernel/src/model/utils/table/parse-to-row-layout.ts:47"),t[l][u]=e,n=Math.min(n,l),r=Math.max(r,l+c-1),o=Math.min(o,u),i=Math.max(i,u+s-1)})),bt.fatal(n>=0&&o>=0,"framework/kernel/src/model/utils/table/parse-to-row-layout.ts:57"),bt.fatal(r<a.attrs.rowCount&&i<a.attrs.colCount,"framework/kernel/src/model/utils/table/parse-to-row-layout.ts:58");for(var l=[],u=n;u<=r;u++){for(var c=[],s=Jn(a.children[u].attrs),d=o;d<=i;d++){var f=(t[u]||{})[d];f&&c.push({range:f,colIndex:d-o})}l.push({attrs:s,cells:c})}return bt.fatal(l.length,"framework/kernel/src/model/utils/table/parse-to-row-layout.ts:87"),{minCol:o,maxCol:i,minRow:n,maxRow:r,rowLayout:l,colWidths:a.attrs.colWidths.slice(o,i+1)}}var Xo=function(){function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_layout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),bt.fatal(t&&"table"===t.nodeName,"framework/kernel/src/model/utils/table/parse-table-layout.ts:18"),this._layout=this._analyzeLayout(t)}return(0,$e.A)(e,[{key:"layout",get:function(){return this._layout}},{key:"_analyzeLayout",value:function(t){for(var n=[],r=0,o=t.childCount;r<o;r++)n.push([]);return t.children.forEach((function(t){var r=t.offset;t.children.forEach((function(t){for(var o=t.attrs,i=o.col,a=o.rowSpan,l=void 0===a?1:a,u=o.colSpan,c=void 0===u?1:u,s=0;s<l;s++)for(var d=0;d<c;d++)n[r+s][i+d]={node:t,row:r,col:i,type:0===s&&0===d?e.TYPE_NODE:e.TYPE_REF}}))})),n}}])}();function Qo(e){return new Xo(e)._layout}Object.defineProperty(Xo,"TYPE_REF",{enumerable:!0,configurable:!0,writable:!0,value:"#ref"}),Object.defineProperty(Xo,"TYPE_NODE",{enumerable:!0,configurable:!0,writable:!0,value:"#node"});var Zo=["cardType","value"];function ei(e,t){e.ranges.forEach((function(e){No(e,t)}))}function ti(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(bt.fatal(t.ranges.length,"framework/kernel/src/model/utils/selection/delete-content.ts:17"),t.isTableSelection){var a=t.firstRange.start.node.parentNode.parentNode;if(bt.fatal(a.hasCategory(qe.Table),"framework/kernel/src/model/utils/selection/delete-content.ts:21"),t.firstRange.start.node===a.firstChild.firstChild&&t.lastRange.end.node===a.lastChild.lastChild)return function(e,t,n,r){if(!n){var o=!0;if(t.children.forEach((function(t){t.children.forEach((function(t){Ut.isLikeEmptyElement(t)||(o=!1,t.children.forEach((function(n){e.removeChild(t,n)})))}))})),!o)return null}if(!r)return null;var i=t.parentNode;bt.fatal(i.hasCategory(qe.TableHole),"framework/kernel/src/model/utils/selection/delete-content.ts:74");var a=e.createElement(e.defaultElementName);return e.insertBefore(i.parentNode,a,i),e.removeChild(i.parentNode,i),e.newSelection(e.newRange(e.newPosition(a,0)))}(e,a,o,i)||t}var l=t.ranges.map((function(t){return Go.deleteContent(e,t,n,r)}));return e.newSelection([l[0]])}function ni(e,t,n){var r=t[0];bt.fatal(r&&r.collapsed,"framework/kernel/src/model/utils/range/insert-inode-to-columns.ts:34");var o=lr(e,r.start,n);return[e.newRange(o)]}var ri=["cellBgColor","verticalAlign"];function oi(e,t,n,r){bt.fatal("td"===t.name,"framework/kernel/src/model/utils/range/helpers/sync-cell-node-attrs.ts:17");var o=t.attrs||{};ri.concat(null!=r?r:[]).forEach((function(t){ir(o,t)&&e.setAttribute(n,t,o[t])}))}function ii(e,t,n){var r,o,i=Jo(t),a=i.rowLayout,l=i.minCol,u=i.maxCol,c=i.minRow,s=i.maxRow;if((null===(r=n.attrs)||void 0===r?void 0:r.rowCount)===s-c+1&&(null===(o=n.attrs)||void 0===o?void 0:o.colCount)===u-l+1)return function(e,t,n,r){bt.fatal(n.rowLayout.length===r.attrs.rowCount,"framework/kernel/src/model/utils/range/insert-inode-to-table.ts:231"),bt.fatal(r.children.length===n.maxRow-n.minRow+1,"framework/kernel/src/model/utils/range/insert-inode-to-table.ts:232");var o=[],i=t[0].start.node.parentNode.parentNode,a=n.minRow,l=n.minCol;t.forEach((function(t){e.removeChild(t.start.node.parentNode,t.start.node)}));var u=[];return r.children.forEach((function(t,n){var r,i,a=[];if(u.push(a),null===(r=t.children)||void 0===r?void 0:r.length)for(var c=0,s=t.children.length;c<s;c++){var d=t.children[c],f=e.createElement("td",{col:l+d.attrs.col});a.push(f),lr(e,e.newPosition(f,0),ar.createFragment(null!==(i=d.children)&&void 0!==i?i:[])),oi(e,t.children[c],f,["colSpan","rowSpan"]),o.push(e.newRange(e.newPosition(f,0),e.newPosition(f,f.childCount)))}})),u.forEach((function(t,n){if(t.length){var r=i.children[a+n],o=t[0],l=r.children.findIndex((function(e){return e.attrs.col>o.attrs.col}));-1===l?e.appendChild(r,o):e.insertByOffset(r,l,o);for(var u=1,c=t.length;u<c;u++)e.insertAfter(r,t[u],o),o=t[u]}})),o}(e,t,i,n);var d=function(e,t,n,r){bt.fatal("table"===t.name,"framework/kernel/src/model/utils/range/insert-inode-to-table.ts:145");var o=t.children.filter((function(e){return e.children&&e.children.length>0}));if(!o.length)return null;for(var i=[],a=0;a<n;a++){for(var l=o[a%o.length],u=l.children.length,c=[],s=0;s<r;s++)c.push(l.children[s%u]);i.push(c)}return i}(0,n,s-c+1,u-l+1);if(!d)return t;var f=[];return a.forEach((function(t,n){var r=t.cells;bt.fatal(d[n],"framework/kernel/src/model/utils/range/insert-inode-to-table.ts:106"),r.forEach((function(t,r){bt.fatal(t.range.collapsed,"framework/kernel/src/model/utils/range/insert-inode-to-table.ts:109"),bt.fatal(d[n][r],"framework/kernel/src/model/utils/range/insert-inode-to-table.ts:110"),lr(e,t.range.start,ar.createFragment([d[n][r]])),oi(e,d[n][r],t.range.start.node);var o=t.range.start.node;f.push(e.newRange(e.newPosition(o,0),e.newPosition(o,o.childCount)))}))})),f}var ai=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"parseTableLayout",value:function(e){return Qo(e)}}])}();function li(e,t){var n=[];return e.children&&e.children.forEach((function(e){n=n.concat(li(e,t))})),t(e,n)}function ui(e,t){bt.fatal(ar.isFragmentNode(t),"framework/kernel/src/model/utils/range/helpers/normalize-inode-tree.ts:34");try{var n=li(t,(function(t,n){var r;if("ol"===t.name||"ul"===t.name)return n;if(!(null===(r=t.children)||void 0===r?void 0:r.length)&&e.hasCategory(t.name,[qe.TableHole,qe.Hole]))return[];var o=ar.cloneNode(t),i=[o],a=o;return n.forEach((function(t){!e.hasCategory(t.name,[qe.BlockCard,qe.LikeRoot])||e.acceptNode(a.name,t.name)||e.hasCategory(a.name,qe.LikeRoot)?ar.appendChild(a,t):(ar.isEmptyNode(a)&&i.pop(),i.push(t),a=function(e){return"oli"===e.name||"uli"===e.name?ar.createElement("p"):ar.cloneNode(e)}(a),i.push(a))})),i.length>1&&ar.isEmptyNode(a)&&i.pop(),i}));return bt.fatal(1===n.length,"framework/kernel/src/model/utils/range/helpers/normalize-inode-tree.ts:84"),bt.fatal(ar.isFragmentNode(n[0]),"framework/kernel/src/model/utils/range/helpers/normalize-inode-tree.ts:85"),n[0]}catch(e){return console.error(e),t}}function ci(e,t,n){var r,o,i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.editing.kernel;if(n=(null==a?void 0:a.hasExtendMethod("normalizeINodeTree"))?null===(r=a.getExtendMethod("normalizeINodeTree"))||void 0===r?void 0:r(e,n):ui(e,n),!t.isCardSelection&&(t.isTableSelection||t.isColumnsSelection||t.isCollapsed)||(t=ti(e,t)),1===t.rangeCount){bt.fatal(t.firstRange.collapsed,"framework/kernel/src/model/utils/selection/insert-inode.ts:43");var l=t.firstRange.start,u=Ut.closest(l.node,qe.TableCell);if(1===(null===(o=n.children)||void 0===o?void 0:o.length)&&"table"===(null===(i=n.children[0])||void 0===i?void 0:i.name)&&u){var c=function(e,t,n){var r=t.attrs.col,o=t.parentNode.offset,i=t.parentNode.parentNode;return n.children.forEach((function(t,n){var a,l=i.children[o+n];!l&&t&&(l=function(e,t,n,r){var o,i={};(null===(o=n.attrs)||void 0===o?void 0:o.height)&&(i.height=n.attrs.height);var a=e.createElement("tr",i);e.appendChild(t,a);for(var l=0,u=r;l<u;l++)e.appendChild(a,e.createElement("td",{col:l}));return a}(e,i,t,r+1)),null===(a=t.children)||void 0===a||a.forEach((function(t,n){var o=function(e,t,n){var r=t.children,o=r[r.length-1];if(o&&o.attrs.col<n){bt.fatal(o.attrs.col+(o.attrs.colSpan||1)===n,"framework/kernel/src/model/utils/range/insert-inode-to-table-cell.ts:167");var i=e.createElement("td",{col:n});return e.appendChild(t,i),i}for(var a=0,l=r.length;a<l;a++){var u=r[a];if(u.attrs.col>=n)return u}bt.fatal(!1,"framework/kernel/src/model/utils/range/insert-inode-to-table-cell.ts:190")}(e,l,r+n);return function(e,t,n){Array.from(t.children).reverse().forEach((function(n){e.removeChild(t,n)})),oi(e,n,t),lr(e,e.newPosition(t,0),ar.createFragment(n.children))}(e,o,t),o}))})),function(e,t,n){var r=t.attrs.colCount,o=t.attrs,i=o.colWidths,a=o.rowCount,l=o.colCount;if(t.children.forEach((function(e){if(e.lastChild){var t=e.lastChild.attrs,n=t.col,o=t.colSpan,i=void 0===o?1:o;r=Math.max(r,n+i)}})),ai.parseTableLayout(t).forEach((function(n,o){for(var i=n.length;i<r;i++)e.appendChild(t.children[o],e.createElement("td",{col:i}))})),a!==t.children.length&&e.setAttribute(t,"rowCount",t.children.length),l!==r){bt.fatal(r>l,"framework/kernel/src/model/utils/range/insert-inode-to-table-cell.ts:95"),e.setAttribute(t,"colCount",r);var u=n.attrs.colWidths.slice(l-r);bt.fatal(u.length===r-l,"framework/kernel/src/model/utils/range/insert-inode-to-table-cell.ts:102"),e.setAttribute(t,"colWidths",i.concat(u))}}(e,i,n),Vt.selectNodeContents(t)}(e,u,n.children[0]);return e.newSelection([c])}var s=lr(e,l,n);return e.newSelection([e.newRange(s)])}if(t.isColumnsSelection){var d=function(e,t,n){return t=function(e,t){return t.map((function(t){bt.fatal(t.start.node.hasCategory(Fr),"framework/kernel/src/model/utils/range/insert-inode-to-columns.ts:15"),bt.fatal(t.start.node===t.end.node,"framework/kernel/src/model/utils/range/insert-inode-to-columns.ts:16");var n=t.start.node;return n.children.forEach((function(t){e.removeChild(n,t)})),e.newRange(e.newPosition(n,0))}))}(e,t),1===n.children.length&&"columns"===n.children[0].name?function(e,t,n){return n.children.length<=t.length?t.map((function(t,r){bt.fatal(t&&t.collapsed,"framework/kernel/src/model/utils/range/insert-inode-to-columns.ts:49");var o=t.start.node,i=n.children[r];return i&&lr(e,t.start,ar.createFragment([i])),e.newRange(e.newPosition(o,0),e.newPosition(o,o.childCount))})):ni(e,t,ar.createFragment([n]))}(e,t,n.children[0]):ni(e,t,n)}(e,t.ranges,n);return e.newSelection(d)}var f=function(e,t,n){var r,o;if(t=function(e,t){return t.map((function(t){bt.fatal(t.start.node.hasCategory(qe.TableCell),"framework/kernel/src/model/utils/range/insert-inode-to-table.ts:212"),bt.fatal(t.start.node===t.end.node,"framework/kernel/src/model/utils/range/insert-inode-to-table.ts:213");var n=t.start.node;return n.children.forEach((function(t){e.removeChild(n,t)})),e.newRange(e.newPosition(n,0))}))}(e,t),1===(null===(r=n.children)||void 0===r?void 0:r.length)){if("table"===n.children[0].name)return ii(e,t,n.children[0]);if(1===(null===(o=n.children[0].children)||void 0===o?void 0:o.length)&&"table"===n.children[0].children[0].name)return ii(e,t,n.children[0].children[0])}return function(e,t,n){var r=function(e,t,n){var r=[],o=null;return t.children.forEach((function(t){e.hasCategory(t.name,[qe.Text,qe.InlineCard])?(o||(o=ar.createElement(n)),ar.appendChild(o,t)):(o&&(r.push(o),o=null),r.push(t))})),o&&(r.push(o),o=null),r}(e,n,e.defaultElementName),o=Jo(t).rowLayout,i=[];return o.forEach((function(t,n){var o=t.cells,a=r[n%r.length];bt.fatal(a,"framework/kernel/src/model/utils/range/insert-inode-to-table.ts:51"),o.forEach((function(t){bt.fatal(t.range.collapsed,"framework/kernel/src/model/utils/range/insert-inode-to-table.ts:54"),lr(e,t.range.start,ar.createFragment([a]));var n=t.range.start.node;i.push(e.newRange(e.newPosition(n,0),e.newPosition(n,n.childCount)))}))})),i}(e,t,n)}(e,t.ranges,n);return e.newSelection(f)}function si(e){for(var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=n?function(e){return e.firstChild}:function(e){return e.lastChild},o=e.document.rootNode;o.childCount;){var i=r(o);if(i.isTextNode()){o=i;break}if(i.isCardNode()){i.hasCategory(qe.BlockCard)?bt.fatal(o.hasCategory(qe.Hole),"framework/kernel/src/model/utils/selection/move-to.ts:26"):bt.fatal(o.hasCategory(qe.TextContainer),"framework/kernel/src/model/utils/selection/move-to.ts:28");break}if(bt.fatal(o.isElement(),"framework/kernel/src/model/utils/selection/move-to.ts:33"),o.hasCategory([qe.AlertHole,qe.ContainerHole]))break;if(i.hasCategory(qe.Table)){bt.fatal(o.hasCategory(qe.TableHole),"framework/kernel/src/model/utils/selection/move-to.ts:40");break}if(i.hasCategory(qe.InlineBox))break;o=i}return o.isTextNode()?t=Vt.createAt(new At(o,n?0:o.dataLength)):(bt.fatal(o.isElement(),"framework/kernel/src/model/utils/selection/move-to.ts:58"),t=Vt.createAt(new At(o,n?0:o.childCount))),Hn(t,!0),e.cloneByRange(t)}function di(e,t,n){t.forEach((function(t){if(t.isElement())di(e,t.children,n);else if(t.isTextNode()||t.hasCategory(qe.InlineCard)){var r=t.hasCategory(qe.InlineCard);Object.keys(t.attrs).forEach((function(o){r&&Zo.includes(o)||(n?Array.isArray(n)?n.includes(o)||e.removeAttribute(t,o):"boolean"==typeof n&&(n||e.removeAttribute(t,o)):e.removeAttribute(t,o))}))}}))}function fi(e){var t=e.node,n=e.offset;return t.isTextNode()?0===n?new At(t.parentNode,t.offset):n===t.dataLength?new At(t.parentNode,t.offset+1):e:e}function hi(e,t){for(var n=t.node,r=Ut.isInCollapsed(n),o=null;r&&(e.acceptAttr(r.nodeName,"open","true")&&e.setAttribute(r,"open","true"),e.acceptAttr(r.nodeName,"collapsed","false")&&e.setAttribute(r,"collapsed","false"),o!==(r=Ut.isInCollapsed(n)));)o=r}function pi(e,t){var n=Array.isArray(t)?t:t.ranges;if(n.length>1){var r=Ut.closest(n[0].start.node,qe.TableCell),o=Ut.closest(n[n.length-1].end.node,qe.TableCell);if(!(r&&o&&r.parentNode&&o.parentNode))return!1;var i=r.parentNode.parentNode;return!!i&&0===r.parentNode.offset&&o.parentNode.offset+(o.attrs.rowSpan||1)===i.childCount&&o.attrs.col+(o.attrs.colSpan||1)-r.attrs.col===i.attrs.colCount}return 1===e.attrs.rowCount&&1===e.attrs.colCount}function vi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function mi(e,t){if(1===t.length&&t[0].collapsed)return t[0].start.node.isCardNode()?ar.createFragment([t[0].start.node.toJSON(!1)]):null;var n=ar.createFragment();if(n.children=[],1===t.length){var r=gi(e,t[0],!0);ar.setChildren(n,r)}else if(t[0].start.node.hasCategory(Fr)){var o=function(e,t){var n,r=ar.createElement("columns"),o=[],i=0,a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return vi(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vi(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(t);try{for(a.s();!(n=a.n()).done;){var l=n.value,u=void 0;u=l.collapsed?l.start.node.toJSON(!1):null==(u=gi(e,l))?void 0:u[0],bt.fatal("column"===u.name,"framework/kernel/src/model/utils/range/extract-inode.ts:156"),i+=u.attrs.width,o.push(u),ar.appendChild(r,u)}}catch(e){a.e(e)}finally{a.f()}for(var c=0,s=o;c<s.length;c++){var d=s[c];ar.setAttribute(d,"width",d.attrs.width/i)}return r}(e,t);bt.fatal("columns"===o.name,"framework/kernel/src/model/utils/range/extract-inode.ts:43"),n.children.push(o)}else{var i=function(e,t){var n=Jo(t),r=n.rowLayout,o=n.colWidths,i=n.minCol,a=n.maxCol,l=function(e){var t=e[0].start.node.closest(qe.Table);return(null==t?void 0:t.isElement())&&e.every((function(e){return e.start.node.closest(qe.Table)===t&&e.end.node.closest(qe.Table)===t}))&&pi(t,e)?{rowHead:t.attrs.rowHead,colHead:t.attrs.colHead}:{}}(t),u=l.rowHead,c=l.colHead,s=r.length,d=ar.createElement("table",{rowCount:s,colCount:a-i+1,colWidths:o,rowHead:u,colHead:c});return r.forEach((function(t){var n=ar.createElement("tr",t.attrs);return ar.appendChild(d,n),t.cells.forEach((function(t){var r,o=t.range,i=t.colIndex;r=o.collapsed?o.start.node.toJSON(!1):null==(r=gi(e,o))?void 0:r[0],bt.fatal("td"===r.name,"framework/kernel/src/model/utils/range/extract-inode.ts:204"),ar.setAttribute(r,"col",i),ar.appendChild(n,r)})),n})),d}(e,t);bt.fatal("table"===i.name,"framework/kernel/src/model/utils/range/extract-inode.ts:47"),n.children.push(i)}return n}function gi(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];bt.fatal(!t.collapsed,"framework/kernel/src/model/utils/range/extract-inode.ts:65");var o=function(e){var t=e.node,n=e.offset;return bt.fatal(!t.isCardNode(),"framework/kernel/src/model/utils/range/extract-inode.ts:218"),t.isTextNode()?t:t.getChildByOffset(n)||t}(t.start),i=function(e){var t=e.node,n=e.offset;return bt.fatal(!t.isCardNode(),"framework/kernel/src/model/utils/range/extract-inode.ts:228"),t.isTextNode()?t:t.getChildByOffset(n-1)||t}(t.end),a=function(e){var t=e.commonAncestorContainer;return t.isTextNode()||bt.fatal(t.isElement(),"framework/kernel/src/model/utils/range/extract-inode.ts:244"),t}(t),l={nodes:[],map:new Map},u=!1;Kr(t,(function(t){u?t!==i?bi(e,l,a,t):(bt.fatal(t!==o,"framework/kernel/src/model/utils/range/extract-inode.ts:89"),function(e,t,n,r){bt.fatal(!t.map.has(r),"framework/kernel/src/model/utils/range/extract-inode.ts:319");var o=_t(r),i=!1;o.forEach((function(r){i||r===n&&(i=!0),i&&!t.map.has(r)&&bi(e,t,n,r)})),bt.fatal(i,"framework/kernel/src/model/utils/range/extract-inode.ts:336")}(e,l,a,t)):(bt.fatal(0===l.nodes.length,"framework/kernel/src/model/utils/range/extract-inode.ts:81"),u=!0,function(e,t,n,r){var o=_t(r),i=!1;o.forEach((function(r){i||r===n&&(i=!0),i&&bi(e,t,n,r)})),bt.fatal(i,"framework/kernel/src/model/utils/range/extract-inode.ts:310")}(e,l,a,t))})),bt.fatal(1===l.nodes.length,"framework/kernel/src/model/utils/range/extract-inode.ts:95"),function(e,t,n,r){if(n!==r)n.isTextNode()&&(t.start.node===n?yi(e,n,t.start.offset,n.dataLength):bt.fatal(t.start.node.getChildByOffset(t.start.offset)===n,"framework/kernel/src/model/utils/range/extract-inode.ts:377")),r.isTextNode()&&(t.end.node===r?yi(e,r,0,t.end.offset):bt.fatal(t.end.node.getChildByOffset(t.end.offset-1)===r,"framework/kernel/src/model/utils/range/extract-inode.ts:387"));else if(n.isTextNode()){var o=t.start.offset,i=t.end.offset;if(t.start.node!==n&&(o=0),t.end.node!==r&&(i=r.dataLength),0===o&&i===r.dataLength)return;yi(e,n,o,i)}}(l,t,o,i),null===(n=l.map)||void 0===n||n.clear(),bt.fatal(1===l.nodes.length,"framework/kernel/src/model/utils/range/extract-inode.ts:101");var c=l.nodes[0];if("#root"===c.name)return c.children||[];if(r&&a.hasCategory([qe.LikeRoot,qe.VirtualLikeRoot])&&c.id===a.id)return c.children||[];if(!a.hasCategory(qe.Block)||c.id!==a.id)return[c];var s=ko(e,t);return s.start.node===a&&0===s.start.offset&&s.end.node===a&&s.end.offset===a.childCount?[c]:c.children||[]}function bi(e,t,n,r){var o=t.nodes,i=t.map,a=r.parentNode,l=r.toJSON(!1),u=l.attrs;if(u)for(var c=0,s=Object.keys(u);c<s.length;c++){var d=s[c];e.getAttrSchema(d)&&!e.document.schema.allowExtractAttr(d)&&delete u[d]}if(i.set(r,l),r!==n){bt.fatal(i.has(a),"framework/kernel/src/model/utils/range/extract-inode.ts:278");var f=i.get(a);f.children||(f.children=[]),f.children.push(l)}else o.push(l)}function yi(e,t,n,r){bt.fatal(t.isTextNode(),"framework/kernel/src/model/utils/range/extract-inode.ts:400");var o=e.map.get(t);bt.fatal(o,"framework/kernel/src/model/utils/range/extract-inode.ts:404"),o.data=o.data.substring(n,r)}var wi=function(){function e(){(0,Ke.A)(this,e)}return(0,$e.A)(e,null,[{key:"toStart",value:function(e){return si(e,!0)}},{key:"toEnd",value:function(e){return si(e,!1)}},{key:"moveToNodeById",value:function(e,t){var n=e.getNodeById(t);return n?(bt.fatal(n.hasCategory(qe.TextContainer),"framework/kernel/src/model/utils/selection/index.ts:36"),e.newSelection(e.newRange(e.newPosition(n,0)))):null}},{key:"shrinkToElement",value:function(e){return function(e){var t=e.ranges.map((function(e){return function(e){return Hn(e=e.collapsed?Vt.createAt(fi(e.start)):Vt.createAt(fi(e.start),fi(e.end)),!0),e}(e)}));return e.cloneByRange(t)}(e)}},{key:"setAttribute",value:function(t,n,r,o,i){return e.updateAttribute(t,n,[{name:r,value:o}],i)}},{key:"removeAttribute",value:function(t,n,r,o){return e.updateAttribute(t,n,[{name:r,value:null}],o)}},{key:"updateAttribute",value:function(e,t,n,r){var o=t.ranges.map((function(t){return zo(e,t,n,r)}));return e.newSelection(o)}},{key:"fullWalkSelection",value:function(){return ei.apply(void 0,arguments)}},{key:"allBlockNodeHasCategory",value:function(e,t){return function(e,t){var n=[];return ei(e,{enter:function(e){if(e.hasCategory(qe.Block))return n.push(e),!1}}),!!n.length&&n.every((function(e){return e.hasCategory(t)}))}(e,t)}},{key:"deleteContent",value:function(e,t){return ti(e,t,!(arguments.length>2&&void 0!==arguments[2])||arguments[2],!(arguments.length>3&&void 0!==arguments[3])||arguments[3],!(arguments.length>4&&void 0!==arguments[4])||arguments[4],!(arguments.length>5&&void 0!==arguments[5])||arguments[5])}},{key:"extractINode",value:function(e,t){return mi(e,t.ranges)}},{key:"insertINode",value:function(e,t,n){return ci(e,t,n)}},{key:"replaceBlockNode",value:function(e,t,n){return function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;n&&"function"!=typeof n&&bt.fatal(e.hasCategory(n.nodeName,[qe.Block,qe.TextContainer],!0),"framework/kernel/src/model/utils/selection/replace-block-node.ts:17");var i=t.ranges.map((function(t){return function(e,t,n){var r,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(n&&t.collapsed&&t.start.node.isRootNode()&&t.start.isAtEnd)return r="function"==typeof n?n(e,null,null):n,e.appendChild(t.start.node,r),e.newRange(e.newPosition(r,0));var a=new Set;if(No(t,{enter:function(e){if(e.hasCategory(qe.Block))return a.add(e),!1},leave:function(t){if(t.isEmpty()&&t.hasCategory([qe.Root,qe.LikeRoot])){var n=e.createElement(e.defaultElementName);e.appendChild(t,n),a.add(n)}}}),!a.size)return t;var l=ao.markRange(e,t);return a.forEach((function(t){!function(e,t,n,r,o){if(t){var i=e.replaceChild(n.parentNode,"cloneNode"in t?t.cloneNode(!1):t,n);r&&("function"==typeof r?r(e,i,n):Object.keys(n.attrs||{}).forEach((function(t){var r=n.attrs[t];e.acceptAttr(i.nodeName,t,r)&&!i.hasAttribute(t)&&e.setAttribute(i,t,r)}))),n.children.forEach((function(t){e.appendChild(i,t)})),di(e,i.children,o)}else{var a=n.nodeName;Object.keys(n.attrs||{}).forEach((function(t){e.isStandardAttr(a,t)||e.removeAttribute(n,t)})),di(e,n.children,o)}}(e,n,t,o,i)})),Hn(t=ao.recoverRange(e,l)),t}(e,t,n,r,o)}));return t.cloneByRange(i)}(e,t,n,!(arguments.length>3&&void 0!==arguments[3])||arguments[3],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null)}},{key:"isInCard",value:function(e){return e.isCardSelection}},{key:"isInHole",value:function(e){return!!e.isCollapsed&&!!e.firstRange.start.node.hasCategory(qe.Hole)}},{key:"isUnbreakable",value:function(e){return e.isCardSelection||e.isTableSelection||e.isColumnsSelection}},{key:"unCollapseAll",value:function(e,t){!function(e,t){hi(e,t.firstRange.start),t.collapsed||hi(e,t.firstRange.end)}(e,t)}},{key:"getSelectionIndent",value:function(e){return function(e){if(e.isCollapsed&&!(e.rangeCount>1)){var t=e.firstRange.start.node;if("number"==typeof t.attrs.indent)return t.attrs.indent;var n=t.closest(qe.Level);return n&&"number"==typeof n.attrs.level?n.attrs.level:void 0}}(e)}}])}(),Ai=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"insertCardNode",value:function(e,t,n,r){bt.fatal(1===t.rangeCount,"framework/kernel/src/model/utils/card/index.ts:34");var o=t.firstRange;if(t.isCollapsed&&!t.isCardSelection||(o=fo(e,o)),bt.fatal(o.collapsed,"framework/kernel/src/model/utils/card/index.ts:42"),o.start.node.hasCategory([qe.Hole,qe.TableHole])){var i=o.start.node;o=0===o.start.offset?e.newRange(e.newPosition(i.parentNode,i.offset)):e.newRange(e.newPosition(i.parentNode,i.offset+1))}var a=e.hasCategory(n,qe.InlineCard),l=a?function(e,t,n){var r=wr.closestInlineAttrs(t,En);return Object.keys(r).reduce((function(t,o){return"value"===o||e.acceptAttr(n,o,r[o])&&(t[o]=r[o]),t}),{})}(e,o.start,n):void 0;if(r&&(l=Object.assign(Object.assign({},l),{value:r})),!a&&l){var u=wi.getSelectionIndent(t);u&&(l.hindent=u)}var c,s=rr.createCardNode(e,n,l);return a?c=function(e,t,n){bt.fatal(n.hasCategory(qe.InlineCard),"framework/kernel/src/model/utils/card/index.ts:99");var r=$o(e,e.newRange(t));if(r.start.node.hasCategory([qe.Root,qe.LikeRoot])){var o=e.createElement(e.defaultElementName);e.insertNodeByPosition(r.start,o),r=e.newRange(e.newPosition(o,0))}return bt.fatal(r.collapsed,"framework/kernel/src/model/utils/card/index.ts:111"),e.insertNodeByPosition(r.start,n)}(e,o.start,s):(bt.fatal(e.hasCategory(n,qe.BlockCard),"framework/kernel/src/model/utils/card/index.ts:85"),c=function(e,t,n){var r;bt.fatal(n.hasCategory(qe.Hole),"framework/kernel/src/model/utils/card/index.ts:117");var o=$t(t.node,qe.Block);if(o){if(null===(r=o.parentNode)||void 0===r?void 0:r.hasCategory(qe.VirtualLikeRoot))return t=ki(e,t),bt.fatal(t.node.hasCategory(qe.VirtualLikeRoot),"framework/kernel/src/model/utils/card/index.ts:132"),t=ki(e,t),bt.fatal(t.node.hasCategory([qe.Root,qe.LikeRoot]),"framework/kernel/src/model/utils/card/index.ts:135"),e.insertNodeByPosition(t,n),e.newPosition(n,n.childCount);bt.fatal(e.acceptNode(o.parentNode.nodeName,n.nodeName),"framework/kernel/src/model/utils/card/index.ts:144")}else bt.fatal(t.node.hasCategory([qe.Root,qe.LikeRoot]),"framework/kernel/src/model/utils/card/index.ts:122"),t.node.hasCategory(qe.VirtualLikeRoot)&&(t=ki(e,t),bt.fatal(t.node.hasCategory(qe.Root),"framework/kernel/src/model/utils/card/index.ts:127"));return o?Nt(o)?(e.replaceChild(o.parentNode,n,o),e.newPosition(n,n.childCount)):(t=ki(e,t),bt.fatal(e.acceptNode(t.node.nodeName,n.nodeName),"framework/kernel/src/model/utils/card/index.ts:161"),e.insertNodeByPosition(t,n),e.newPosition(n,n.childCount)):(e.insertNodeByPosition(t,n),e.newPosition(n,n.childCount))}(e,o.start,s)),{selection:e.newSelection(e.newRange(c)),cardNode:s.hasCategory(qe.Hole)?s.firstChild:s}}}])}();function ki(e,t){return function(e,t){var n,r=t.node;if(null===(n=r.parentNode)||void 0===n?void 0:n.hasCategory([qe.ContainerHole,qe.AlertHole])){if(Zt(e,en(e,kn(e,t))),r.parentNode.childCount>1){var o=e.createElement(r.parentNode.nodeName),i=r.parentNode.children[1];return e.removeChild(r.parentNode,i),e.appendChild(o,i),e.insertAfter(r.parentNode.parentNode,o,r.parentNode),e.newPosition(o.parentNode,o.offset)}return e.newPosition(r.parentNode.parentNode,r.parentNode.offset+1)}return Zt(e,en(e,kn(e,t)))}(e,en(e,kn(e,t)))}var _i=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"createFragment",value:function(){return{type:"fragment",name:"#fragment",children:[]}}},{key:"createElement",value:function(e,t){return{type:wt.Element,name:e,attrs:t}}},{key:"createTextNode",value:function(e,t){return{type:wt.Text,name:"#text",attrs:t,data:e}}},{key:"appendChild",value:function(e,t){return bt.fatal("#text"!==e.name,"framework/kernel/src/model/utils/inode/index.ts:38"),e.children||(e.children=[]),e.children.push(t),t}}])}(),Ci=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_readers",{enumerable:!0,configurable:!0,writable:!0,value:{}})}),[{key:"destroy",value:function(){delete this._kernel,delete this._readers}},{key:"register",value:function(e,t){this._readers[e]=t}},{key:"types",get:function(){return Object.keys(this._readers)}},{key:"getINode",value:function(e,t,n){var r=this._readers[e];return r?r.read(this._kernel,t,n):null}}])}(),Ni=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_writers",{enumerable:!0,configurable:!0,writable:!0,value:{}})}),[{key:"types",get:function(){return Object.keys(this._writers)}},{key:"destroy",value:function(){delete this._kernel,delete this._writers}},{key:"register",value:function(e,t){this._writers[e]=t}},{key:"matchType",value:function(e){return!!this._writers[e]}},{key:"getData",value:function(e,t,n){var r=this._writers[e];return r?r.write(this._kernel,t,n):null}}])}();function Oi(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,xi()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function xi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xi=function(){return!!e})()}var Ei,Di=function(e){function t(){return(0,Ke.A)(this,t),Oi(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"cloneNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Tr((0,Je.A)(t.prototype),"cloneNode",this).call(this,e)}},{key:"isRootNode",value:function(){return!1}},{key:"isHole",value:function(){return!0}}])}(Br);function Pi(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Ri()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Ri(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ri=function(){return!!e})()}!function(e){e.Block="block",e.Inline="inline"}(Ei||(Ei={}));var Si=function(e){function t(e,n,r,o){var i;return(0,Ke.A)(this,t),i=Pi(this,t,[e,n,r,o]),Object.defineProperty(i,"nodeType",{enumerable:!0,configurable:!0,writable:!0,value:wt.Card}),Object.defineProperty(i,"cardType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),i.cardType=e.schema.hasCategory(n,qe.BlockCard)?Ei.Block:Ei.Inline,i._attrs.cardType=i.cardType,i}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"cardValue",get:function(){var e=this._attrs.value;return e&&"object"===(0,Gn.A)(e)?Object.assign({},e):{}}},{key:"toString",value:function(){var e=this.nodeName,t=this.attrs,n=[];return Object.keys(t).forEach((function(e){if("cardType"!==e){var r=t[e];r?"object"===(0,Gn.A)(r)?r=JSON.stringify(r):r+="":r="",n.push("".concat(e,'="').concat(r,'"'))}})),"<".concat(e).concat(n.length?" "+n.join(" "):"","></").concat(e,">")}},{key:"cloneNode",value:function(){var e=this,n=Jn(this._attrs);return Object.keys(n).forEach((function(t){e._document.schema.allowCloneAttr(t)||delete n[t]})),new t(this._document,this._nodeName,n)}},{key:"isCardNode",value:function(){return!0}},{key:"toData",value:function(e){var n=Tr((0,Je.A)(t.prototype),"toData",this).call(this,e);return n.cardType=this.cardType,n}},{key:"isEmpty",value:function(){return!0}},{key:"isHole",value:function(){return!1}},{key:"isRootNode",value:function(){return!1}},{key:"isElement",value:function(){return!1}},{key:"isTextNode",value:function(){return!1}}])}(Sr),Ti="#root",ji="#card",Ii="#text";function Bi(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Mi()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Mi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Mi=function(){return!!e})()}var Fi=function(e){function t(e,n,r){return(0,Ke.A)(this,t),Bi(this,t,[e,Ti,n,r])}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"isRootNode",value:function(){return!0}},{key:"isCardNode",value:function(){return!1}},{key:"isHole",value:function(){return!1}},{key:"cloneNode",value:function(){throw new Error("can not clone rootNode")}}])}(Br);function Li(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Ui()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Ui(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ui=function(){return!!e})()}var Vi=function(e){function t(e,n,r,o){var i;return(0,Ke.A)(this,t),i=Li(this,t,[e,Ii,r,o]),Object.defineProperty(i,"nodeType",{enumerable:!0,configurable:!0,writable:!0,value:wt.Text}),Object.defineProperty(i,"_data",{enumerable:!0,configurable:!0,writable:!0,value:""}),i._data=n||"",i}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"data",get:function(){return this._data}},{key:"dataLength",get:function(){return gn.size(this._data)}},{key:"isEmpty",value:function(){return!this._data}},{key:"cloneNode",value:function(){var e=this,n=Jn(this._attrs);return Object.keys(n).forEach((function(t){e._document.schema.allowCloneAttr(t)||delete n[t]})),new t(this._document,this._data,n)}},{key:"isElement",value:function(){return!1}},{key:"isRootNode",value:function(){return!1}},{key:"isHole",value:function(){return!1}},{key:"isCardNode",value:function(){return!1}},{key:"isTextNode",value:function(){return!0}},{key:"toString",value:function(){var e=this.attrs,t=[];return Object.keys(e).forEach((function(n){var r=e[n];r?"object"===(0,Gn.A)(r)?r=JSON.stringify(r):r+="":r="",t.push("".concat(n,'="').concat(r,'"'))})),"<#text".concat(t.length?" "+t.join(" "):"",">").concat(this._data,"</#text>")}},{key:"toData",value:function(){var e=Tr((0,Je.A)(t.prototype),"toData",this).call(this,!1);return e.data=this._data,e}}])}(Sr),Hi="node.will.change",zi="operation.submitted",Wi="job.created",qi="contentchange",$i="beforecontentchange",Ki="aftercontentchange",Yi="selectionchange",Gi="operationRollback";function Ji(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Xi(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Qi()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Qi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Qi=function(){return!!e})()}var Zi,ea=function(e){function t(e,n,r){var o;return(0,Ke.A)(this,t),o=Xi(this,t),Object.defineProperty(o,"_model",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(o,"_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_selection",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_entryPoint",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(o,"_allNodes",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(o,"_nameNodes",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(o,"_version",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(o,"_ready",{enumerable:!0,configurable:!0,writable:!0,value:!1}),o._id=Dr(12),o._rootNode=new Fi(o,n),o._selection=Wr.createBy(o,Vt.createAt(new At(o._rootNode,0))),r&&(o._entryPoint=r.replace(/^#/,"")),o}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"disableSameIdentifier",get:function(){var e;return!!(null===(e=this._model)||void 0===e?void 0:e.disableSameIdentifier)}},{key:"destroy",value:function(){this._selection.destroy(),this._allNodes.clear(),this.removeAllListeners(),delete this._nameNodes,delete this._selection,delete this._rootNode}},{key:"id",get:function(){return this._id}},{key:"model",get:function(){return this._model}},{key:"schema",get:function(){return this._model.schema}},{key:"version",get:function(){return this._version}},{key:"rootNode",get:function(){return this._rootNode}},{key:"selection",get:function(){return this._selection},set:function(e){this._selection=e.cloneSelection()}},{key:"entryPoint",get:function(){return this._entryPoint}},{key:"ready",value:function(){this._ready||(this._ready=!0,this.emit("ready"))}},{key:"isReady",value:function(){return this._ready}},{key:"getData",value:function(){return this._rootNode.toData(!0)}},{key:"getINode",value:function(e){if(e&&e.beforeIndex)return this.getINodeBefore(e.beforeIndex);if(e&&e.beforePath)return this.getINodeBeforePath(e.beforePath);var t=this._rootNode.toJSON(!0);return ar.createFragment(t.children)}},{key:"getINodeBefore",value:function(e){var t,n=this._rootNode.toJSON(!0);return ar.createFragment(null===(t=n.children)||void 0===t?void 0:t.slice(0,e))}},{key:"getINodeBeforePath",value:function(e){var t=this._rootNode.toJSON(!0),n=t;return e.forEach((function(e){n.children?(n.children.splice(e+1,n.children.length),n=n.children[e]):n.data&&(n.data=n.data.substr(0,e))})),ar.createFragment(t.children)}},{key:"getNodeById",value:function(e){return e?this._allNodes.get(e):null}},{key:"getNodesByName",value:function(e){return this._nameNodes[e]?Array.from(this._nameNodes[e]):[]}},{key:"getNodesByCategory",value:function(e){var t,n,r=[],o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ji(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ji(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(this._allNodes.values());try{for(o.s();!(n=o.n()).done;){var i=n.value;(null===(t=null==i?void 0:i.hasCategory)||void 0===t?void 0:t.call(i,e))&&r.push(i)}}catch(e){o.e(e)}finally{o.f()}return r}},{key:"getNodeByPath",value:function(e){if(0===e.length)return this._rootNode;for(var t=this._rootNode,n=0,r=e.length;n<r;n++){var o=e[n];if(!t.children||!t.children[o])return null;t=t.children[o]}return t}},{key:"indexNode",value:function(e){var t=e.id,n=e.nodeName;this._allNodes.set(t,e),this._nameNodes[n]||(this._nameNodes[n]=new Set),this._nameNodes[n].add(e)}},{key:"unIndexNode",value:function(e){var t=e.id,n=e.nodeName;this._allNodes.delete(t),this._nameNodes[n]&&this._nameNodes[n].delete(e)}},{key:"submitOperations",value:function(e,t,n){this._version++,this.emit(qi,{mode:n,operations:e,selection:t})}},{key:"selectionChange",value:function(e){this.emit(Yi,e)}},{key:"createElement",value:function(e,t,n){return new Br(this,e,t,n)}},{key:"createHole",value:function(e,t,n){return new Di(this,e||"hole",t,n)}},{key:"createTextNode",value:function(e,t,n){return new Vi(this,e,t,n)}},{key:"createCardNode",value:function(e,t,n){return new Si(this,e,t,n)}}])}(it),ta=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_commitCb",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rollbackCb",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),bt.fatal("function"==typeof t.commit,"framework/kernel/src/model/editing/transaction.ts:14"),bt.fatal("function"==typeof t.rollback,"framework/kernel/src/model/editing/transaction.ts:15"),this._commitCb=t.commit,this._rollbackCb=t.rollback}),[{key:"destroy",value:function(){delete this._commitCb,delete this._rollbackCb}},{key:"commit",value:function(){this._commitCb()}},{key:"rollback",value:function(){this._rollbackCb()}}])}();!function(e){e.Insert="insert",e.Remove="remove",e.Move="move",e.UpdateText="update_text",e.AddAttr="add_attr",e.RemoveAttr="remove_attr",e.UpdateAttr="update_attr"}(Zi||(Zi={}));var na=function(){return(0,$e.A)((function e(t,n,r,o){(0,Ke.A)(this,e),Object.defineProperty(this,"jobMode",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"parentNode",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"childNode",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"offset",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:Zi.Insert}),bt.fatal(n.childCount>=o,"framework/kernel/src/model/editing/job/operations/insert.ts:24")}),[{key:"destroy",value:function(){delete this.type,delete this.jobMode,delete this.parentNode,delete this.childNode,delete this.offset}},{key:"apply",value:function(e){bt.fatal(this.parentNode.childCount>=this.offset&&!this.childNode.parentNode,"framework/kernel/src/model/editing/job/operations/insert.ts:36"),e.insertByOffset(this.parentNode,this.offset,this.childNode),bt.fatal(this.childNode.offset===this.offset&&this.childNode.parentNode===this.parentNode,"framework/kernel/src/model/editing/job/operations/insert.ts:40")}},{key:"reverse",value:function(e){bt.fatal(this.parentNode.getChildByOffset(this.offset)===this.childNode,"framework/kernel/src/model/editing/job/operations/insert.ts:47"),e.removeChild(this.parentNode,this.childNode)}}])}(),ra=function(){return(0,$e.A)((function e(t,n,r,o,i,a,l){(0,Ke.A)(this,e),Object.defineProperty(this,"jobMode",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"parentNode",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"oldParentNode",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"childNode",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"offset",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"oldOffset",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"realOffset",{enumerable:!0,configurable:!0,writable:!0,value:l}),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:Zi.Move}),bt.fatal(n.childCount>l,"framework/kernel/src/model/editing/job/operations/move.ts:42")}),[{key:"destroy",value:function(){delete this.type,delete this.jobMode,delete this.parentNode,delete this.oldParentNode,delete this.childNode,delete this.offset,delete this.oldOffset,delete this.realOffset}},{key:"apply",value:function(e){bt.fatal(this.oldParentNode.getChildByOffset(this.oldOffset)===this.childNode,"framework/kernel/src/model/editing/job/operations/move.ts:57"),e.insertByOffset(this.parentNode,this.offset,this.childNode),bt.fatal(this.parentNode.getChildByOffset(this.realOffset)===this.childNode,"framework/kernel/src/model/editing/job/operations/move.ts:61")}},{key:"reverse",value:function(e){var t=this.oldOffset;this.oldParentNode===this.parentNode&&this.realOffset<this.oldOffset&&(t=this.oldOffset+1),e.insertByOffset(this.oldParentNode,t,this.childNode),bt.fatal(this.oldParentNode.getChildByOffset(this.oldOffset)===this.childNode,"framework/kernel/src/model/editing/job/operations/move.ts:79")}}])}(),oa=function(){return(0,$e.A)((function e(t,n,r,o){(0,Ke.A)(this,e),Object.defineProperty(this,"jobMode",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"parentNode",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"childNode",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"offset",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:Zi.Remove}),bt.fatal(n.childCount+1>=o,"framework/kernel/src/model/editing/job/operations/remove.ts:24")}),[{key:"destroy",value:function(){delete this.type,delete this.jobMode,delete this.parentNode,delete this.childNode,delete this.offset}},{key:"apply",value:function(e){bt.fatal(this.parentNode.getChildByOffset(this.offset)===this.childNode,"framework/kernel/src/model/editing/job/operations/remove.ts:36"),e.removeChild(this.parentNode,this.childNode)}},{key:"reverse",value:function(e){bt.fatal(this.parentNode.childCount>=this.offset&&!this.childNode.parentNode,"framework/kernel/src/model/editing/job/operations/remove.ts:43"),e.insertByOffset(this.parentNode,this.offset,this.childNode),bt.fatal(this.childNode.offset===this.offset&&this.childNode.parentNode===this.parentNode,"framework/kernel/src/model/editing/job/operations/remove.ts:47")}}])}(),ia=function(){return(0,$e.A)((function e(t,n,r,o){(0,Ke.A)(this,e),Object.defineProperty(this,"jobMode",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"node",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"attrName",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"attrValue",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:Zi.AddAttr})}),[{key:"destroy",value:function(){delete this.type,delete this.jobMode,delete this.node,delete this.attrName,delete this.attrValue}},{key:"apply",value:function(e){e.setAttribute(this.node,this.attrName,this.attrValue)}},{key:"reverse",value:function(e){e.removeAttribute(this.node,this.attrName)}}])}(),aa=function(){return(0,$e.A)((function e(t,n,r,o){(0,Ke.A)(this,e),Object.defineProperty(this,"jobMode",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"node",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"attrName",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"oldAttrValue",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:Zi.RemoveAttr})}),[{key:"destroy",value:function(){delete this.type,delete this.jobMode,delete this.node,delete this.attrName,delete this.oldAttrValue}},{key:"apply",value:function(e){e.removeAttribute(this.node,this.attrName)}},{key:"reverse",value:function(e){e.setAttribute(this.node,this.attrName,this.oldAttrValue)}}])}(),la=function(){return(0,$e.A)((function e(t,n,r,o,i){(0,Ke.A)(this,e),Object.defineProperty(this,"jobMode",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"node",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"attrName",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"attrValue",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"oldAttrValue",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:Zi.UpdateAttr})}),[{key:"destroy",value:function(){delete this.type,delete this.jobMode,delete this.node,delete this.attrName,delete this.attrValue,delete this.oldAttrValue}},{key:"apply",value:function(e){e.setAttribute(this.node,this.attrName,this.attrValue)}},{key:"reverse",value:function(e){e.setAttribute(this.node,this.attrName,this.oldAttrValue)}}])}(),ua=function(){return(0,$e.A)((function e(t,n,r,o){(0,Ke.A)(this,e),Object.defineProperty(this,"jobMode",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"node",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"oldText",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:Zi.UpdateText})}),[{key:"destroy",value:function(){delete this.type,delete this.jobMode,delete this.node,delete this.text,delete this.oldText}},{key:"apply",value:function(e){e.setTextNodeData(this.node,this.text)}},{key:"reverse",value:function(e){e.setTextNodeData(this.node,this.oldText)}}])}(),ca="remove",sa="insert",da="addAttr",fa="removeAttr",ha="changeAttr",pa="changeText",va={Move:"document.node.move",Insert:"document.node.insert",Remove:"document.node.remove",UpdateText:"document.node.text.change",AddAttr:"document.node.attr.add",UpdateAttr:"document.node.attr.change",RemoveAttr:"document.node.attr.remove"};function ma(e,t){if(t){var n,r=t.type;if(r===va.Move){var o=t.data;n=new ra(e.mode,o.parentNode,o.oldParent,o.childNode,o.offset,o.oldOffset,o.realOffset)}else if(r===va.Insert){var i=t.data;n=new na(e.mode,i.parentNode,i.childNode,i.offset)}else if(r===va.Remove){var a=t.data;n=new oa(e.mode,a.parentNode,a.childNode,a.offset)}else if(r===va.UpdateText){var l=t.data;n=new ua(e.mode,l.node,l.text,l.oldText)}else if(r===va.AddAttr){var u=t.data;n=new ia(e.mode,u.node,u.name,u.value)}else if(r===va.UpdateAttr){var c=t.data;n=new la(e.mode,c.node,c.name,c.value,c.oldValue)}else{if(r!==va.RemoveAttr)throw new Error("invalid operation type");var s=t.data;n=new aa(e.mode,s.node,s.name,s.value)}e._unSyncOperations.push(n),function(e,t){var n=t.type;if(n===va.Move){var r=t.data;ya(e,r.childNode,"remove"),ga(e,r.oldParent),ya(e,r.childNode,"insert"),ga(e,r.parentNode)}else if(n===va.Insert){var o=t.data;ya(e,o.childNode,"insert"),ga(e,o.parentNode)}else if(n===va.Remove){var i=t.data;ya(e,i.childNode,"remove"),ga(e,i.parentNode)}else if(n===va.UpdateText)!function(e,t){e.editing.emit("nodechange",{type:"text",job:e,node:t})}(e,t.data.node);else if(n===va.AddAttr){var a=t.data;ba(e,{subType:"add",node:a.node,attrName:a.name,value:a.value})}else if(n===va.UpdateAttr){var l=t.data;ba(e,{subType:"update",node:l.node,attrName:l.name,oldValue:l.oldValue,value:l.value})}else{if(n!==va.RemoveAttr)throw new Error("invalid operation type");var u=t.data;ba(e,{subType:"remove",node:u.node,attrName:u.name,oldValue:u.value})}}(e,t)}}function ga(e,t){e.editing.emit("nodechange",{type:"children",job:e,node:t})}function ba(e,t){e.editing.emit("nodechange",Object.assign({type:"attribute",job:e},t))}function ya(e,t,n){e.editing.emit("nodechange",{type:n,job:e,node:t})}var wa=function(){function e(){(0,Ke.A)(this,e)}return(0,$e.A)(e,null,[{key:"assertAcceptNode",value:function(e,t,n){if(!e.acceptNode(t,n))throw new Error("invalid node insert: ".concat(t," can't contain ").concat(n))}},{key:"prependChild",value:function(t,n,r){return 0===n.childCount?e.appendChild(t,n,r):e.insertBefore(t,n,r,n.firstChild)}},{key:"appendChild",value:function(e,t,n){if(n.parent===t&&n._offset+1===t.childCount)return null;var r=n.parent,o=n._offset,i=t.children.length;return r&&Aa(e,r,n),ka(e,sa,{parentNode:t,childNode:n,offset:t.childCount}),n._offset=t.childCount,n._parent=t,_a(t).push(n),r?{type:va.Move,data:{oldParent:r,oldOffset:o,parentNode:t,offset:i,realOffset:n._offset,childNode:n}}:{type:va.Insert,data:{parentNode:t,childNode:n,offset:n._offset}}}},{key:"removeChild",value:function(e,t,n){var r=n._offset;return Aa(e,t,n),{type:va.Remove,data:{parentNode:t,childNode:n,offset:r}}}},{key:"insertBefore",value:function(e,t,n,r){if(bt.fatal(r.parent===t,"framework/kernel/src/model/editing/job/helper/node.ts:135"),n===r)return null;var o=n.parent,i=n._offset,a=r.offset;o&&Aa(e,o,n);var l=_a(t),u=l.indexOf(r);ka(e,sa,{parentNode:t,childNode:n,offset:u});for(var c=l.length-1;c>=u;c--)l[c]._offset++,l[c+1]=l[c];return n._offset=u,n._parent=t,l[u]=n,o?{type:va.Move,data:{oldParent:o,oldOffset:i,parentNode:t,offset:a,realOffset:n._offset,childNode:n}}:{type:va.Insert,data:{parentNode:t,childNode:n,offset:n._offset}}}},{key:"insertAfter",value:function(t,n,r,o){if(o.parent!==n)throw new Error("invalid referenceElement");if(r===o)return null;var i=o.nextSibling;return i?e.insertBefore(t,n,r,i):e.appendChild(t,n,r)}},{key:"insertByOffset",value:function(t,n,r,o){if(o.parent===n&&o.offset===r)return null;var i=_a(n);if(bt.fatal(r<=i.length,"framework/kernel/src/model/editing/job/helper/node.ts:226"),r===i.length)return e.appendChild(t,n,o);var a=i[r];return a?e.insertBefore(t,n,o,a):e.appendChild(t,n,o)}},{key:"setTextNodeData",value:function(e,t,n){if(n=n||"",t.data===n)return null;ka(e,pa,{node:t,text:n});var r=t.data;return function(e,t){e._data=t}(t,n),{type:va.UpdateText,data:{node:t,text:n,oldText:r}}}},{key:"removeAttribute",value:function(e,t,n){bt.fatal(t.hasAttribute(n),"framework/kernel/src/model/editing/job/helper/node.ts:276"),ka(e,fa,{node:t,attrName:n});var r=Ca(t),o=r[n];return delete r[n],{type:va.RemoveAttr,data:{node:t,name:n,value:o}}}},{key:"setAttribute",value:function(e,t,n,r){bt.fatal(e.acceptAttr(t.nodeName,n,r),"setAttribute ".concat(n," failed: ").concat(n," is not a valid attribute for ").concat(t.nodeName),"framework/kernel/src/model/editing/job/helper/node.ts:304");var o=Ca(t);if(t.hasAttribute(n)){var i=o[n];return i===r?null:(ka(e,ha,{node:t,attrName:n,attrValue:Jn(r)}),o[n]=r,{type:va.UpdateAttr,data:{node:t,name:n,value:r,oldValue:i}})}return ka(e,da,{node:t,attrName:n,attrValue:Jn(r)}),o[n]=r,{type:va.AddAttr,data:{node:t,name:n,value:r}}}}])}();function Aa(e,t,n){var r=_a(t),o=r.indexOf(n);if(-1===o)throw new Error("invalid child");ka(e,ca,{parentNode:t,childNode:n}),r.splice(o,1);for(var i=o,a=r.length;i<a;i++)r[i]._offset-=1;return n._parent=null,n._offset=-1,n}function ka(e,t,n){e.editing.emit(Hi,{jobMode:e.mode,type:t,data:n})}function _a(e){return e._children}function Ca(e){return e._attrs}function Na(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Oa=function(){function e(){(0,Ke.A)(this,e)}return(0,$e.A)(e,null,[{key:"isInTable",value:function(e){return!!Ut.closest(e.firstRange.commonAncestorContainer,qe.Table)}},{key:"isInvalidTablePosition",value:function(e){var t=e.node;return"table"===t.nodeName||"tr"===t.nodeName}},{key:"normalizeTdPosition",value:function(e,t){var n=t.node,r=t.offset;return"table"===n.nodeName&&(n=n.children[r]&&n.children[r].firstChild?n.children[r].firstChild:n.children[r-1]&&n.children[r-1].firstChild?n.children[r-1].firstChild:n.firstChild.firstChild,r=0),"tr"===n.nodeName&&(n=n.children[r]?n.children[r]:n.children[r-1]?n.children[r-1]:n.firstChild?n.firstChild:n.parent.firstChild.firstChild,r=0),e.newPosition(n,r)}},{key:"isSelectAllTable",value:function(e){var t=Ut.closest(e.firstRange.commonAncestorContainer,qe.TableCell),n=Ut.closest(e.lastRange.commonAncestorContainer,qe.TableCell),r=t.parentNode.parentNode,o=t.attrs.col,i=t.parentNode.offset,a=t.attrs.colSpan||1,l=n.attrs.col,u=n.parentNode.offset,c=n.attrs.colSpan||1;return i<=u?(bt.fatal("end"===e.focus||"bottomLeft"===e.focus,"framework/kernel/src/model/utils/table-selection/index.ts:83"),0===o&&0===i&&l+c===r.attrs.columnCount&&u===r.attrs.rowCount-1):(bt.fatal("start"===e.focus||"topRight"===e.focus,"framework/kernel/src/model/utils/table-selection/index.ts:94"),0===l&&0===u&&o+a===r.attrs.columnCount&&i===r.attrs.rowCount-1)}},{key:"isSelectColumn",value:function(e){var t=Ut.closest(e.firstRange.commonAncestorContainer,qe.Table);if(!t)return!1;var n=t.attrs.rowCount,r=[],o=[],i=-1,a=e.ranges.every((function(e){var t=Ut.closest(e.commonAncestorContainer,qe.TableCell),n=t.parentNode.offset,a=t.attrs,l=a.col,u=a.colSpan,c=void 0===u?1:u,s=a.rowSpan,d=void 0===s?1:s;i=-1===i?l:i;for(var f=0;f<d;f++)r[n+f]=r[n+f]||0,void 0!==o[n+f]?o[n+f]=Math.min(l,o[n+f]):o[n+f]=l,r[n+f]+=c;return!0}));if(!a)return!1;if(!r[0]||!r[n-1])return!1;var l=r[0],u=r.every((function(e){return e===l})),c=o.every((function(e){return e===i}));return u&&c}},{key:"isSelectRow",value:function(e){var t=Ut.closest(e.firstRange.commonAncestorContainer,qe.Table);if(!t)return!1;if(t!==Ut.closest(e.lastRange.commonAncestorContainer,qe.Table))return!1;var n={},r=new WeakSet;e.ranges.forEach((function(e){var t=Ut.closest(e.commonAncestorContainer,qe.TableCell),o=t.parentNode.offset;n[o]=!0,r.add(t)}));var o=Object.keys(n);return 0!==o.length&&o.every((function(e){return t.children[e].children.every((function(e){return r.has(e)}))}))}},{key:"selectTableCells",value:function(e,t){bt.fatal(t.hasCategory(qe.Table),"framework/kernel/src/model/utils/table-selection/index.ts:226");var n=[];return t.children.forEach((function(e){e.children.forEach((function(e){n.push(Vt.selectNodeContents(e))}))})),e.newSelection(n)}},{key:"isInTableHead",value:function(t){if(!e.isInTable(t))return!1;var n=t.ranges;if(0===n.length)return!1;var r,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Na(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Na(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(n);try{for(o.s();!(r=o.n()).done;){var i=r.value.commonAncestorContainer.closest(qe.TableCell);if(!i)return!1;var a=i.closest(qe.Table);if(!((null==a?void 0:a.attrs.colHead)&&0===i.attrs.col||(null==a?void 0:a.attrs.rowHead)&&a.firstChild===i.parent))return!1}}catch(e){o.e(e)}finally{o.f()}return!0}}])}();function xa(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t,o=r.start,i=r.end,a=r.collapsed;return o.node.isCardNode()?(bt.fatal(a,"framework/kernel/src/model/utils/range/normalize-range.ts:21"),t):(o=Da(e,o,a),i=Da(e,i,!0),Oa.isInvalidTablePosition(o)&&(o=Oa.normalizeTdPosition(e,o),i=Oa.normalizeTdPosition(e,i)),o.node.hasCategory([qe.TableHole,qe.Hole])||(o=Ea(e,o,a)),a?t=e.newRange(o):(i.node.hasCategory([qe.TableHole,qe.Hole])||(i=Ea(e,i,!0)),t=e.newRange(o,i)),t=Wn(e,t),n&&(t=Bo(e,t)),Hn(t,!0),t)}function Ea(e,t,n){var r=function(e,t,n){var r=t.node;return r.isTextNode()?t:(bt.fatal(r.isElement()&&r.hasCategory([qe.TextContainer,qe.Root,qe.LikeRoot]),"framework/kernel/src/model/utils/range/normalize-range.ts:132"),n?function(e,t){var n=t.node,r=t.offset;if(!n.isElement())return t;var o=n.getChildByOffset(r-1);if(o){if(o.isElement())return o.hasCategory([qe.Root,qe.LikeRoot,qe.TableHole,qe.Hole])||o.hasCategory(qe.InlineBox)?t:(bt.fatal(o.hasCategory([qe.TextContainer]),"framework/kernel/src/model/utils/range/normalize-range.ts:175"),Ut.getTailInputPosition(o)||t);if(o.isTextNode()){if(!o.isEmpty())return e.newPosition(o,o.dataLength)}else bt.fatal(o.isCardNode(),"framework/kernel/src/model/utils/range/normalize-range.ts:182")}var i=n.getChildByOffset(r);if(i){if(i.isElement())return i.hasCategory(qe.Table)?(bt.fatal(i.firstChild.firstChild.hasCategory(qe.TableCell),"framework/kernel/src/model/utils/range/normalize-range.ts:191"),Ut.getHeadInputPosition(i.firstChild.firstChild)||t):i.hasCategory(qe.InlineBox)?t:(bt.fatal(i.hasCategory([qe.TextContainer,qe.LikeRoot,qe.TableHole,qe.Hole]),"framework/kernel/src/model/utils/range/normalize-range.ts:205"),Ut.getHeadInputPosition(i)||t);if(i.isTextNode()){if(!i.isEmpty()||!o||o.isCardNode())return e.newPosition(i,0)}else if(!o)return bt.fatal(i.isCardNode(),"framework/kernel/src/model/utils/range/normalize-range.ts:219"),t}return o?(bt.fatal(!o.hasCategory(qe.InlineBox),"framework/kernel/src/model/utils/range/normalize-range.ts:226"),bt.fatal((!i||i.isEmpty())&&(o.isCardNode()||o.isEmpty()),"framework/kernel/src/model/utils/range/normalize-range.ts:227"),o.isCardNode()?t:e.newPosition(o,0)):(bt.fatal(n.isEmpty(),"framework/kernel/src/model/utils/range/normalize-range.ts:239"),t)}(e,t):function(e,t){var n=t.node,r=t.offset;if(!n.isElement())return t;var o=n.getChildByOffset(r);if(o){if(o.isElement())return o.hasCategory([qe.Root,qe.LikeRoot,qe.TableHole,qe.Hole])?t:(bt.fatal(o.hasCategory(qe.TextContainer),"framework/kernel/src/model/utils/range/normalize-range.ts:267"),Ut.getHeadInputPosition(o)||t);if(o.isTextNode()){if(!o.isEmpty())return e.newPosition(o,0)}else bt.fatal(o.isCardNode(),"framework/kernel/src/model/utils/range/normalize-range.ts:274")}var i=n.getChildByOffset(r-1);if(i){if(i.isElement())return i.hasCategory(qe.Table)?(bt.fatal(i.lastChild.lastChild.hasCategory(qe.TableCell),"framework/kernel/src/model/utils/range/normalize-range.ts:283"),Ut.getTailInputPosition(i.lastChild.lastChild)||t):(bt.fatal(i.hasCategory(qe.TextContainer),"framework/kernel/src/model/utils/range/normalize-range.ts:293"),Ut.getTailInputPosition(i)||t);if(i.isTextNode()){if(!i.isEmpty()||!o||o.isCardNode())return e.newPosition(i,i.dataLength)}else if(!o)return bt.fatal(i.isCardNode(),"framework/kernel/src/model/utils/range/normalize-range.ts:300"),t}return o?(bt.fatal((!i||i.isEmpty())&&(o.isCardNode()||o.isEmpty()),"framework/kernel/src/model/utils/range/normalize-range.ts:307"),o.isCardNode()?t:e.newPosition(o,0)):(bt.fatal(n.isEmpty(),"framework/kernel/src/model/utils/range/normalize-range.ts:319"),t)}(e,t))}(e,t,n),o=r.node,i=r.offset;return o.isTextNode(),e.newPosition(o,i)}function Da(e,t,n){var r=t.node,o=t.offset,i=[qe.TextContainer,qe.Root,qe.LikeRoot,qe.Text,qe.Hole,qe.TableHole];if(r.hasCategory(i))return t;bt.fatal(r.isElement(),"framework/kernel/src/model/utils/range/normalize-range.ts:95");var a=r;if(n){for(;0===o&&!a.hasCategory(i);)o=a.offset,a=a.parentNode;return e.newPosition(a,o)}for(;o===a.childCount&&!a.hasCategory(i);)o=a.offset+1,a=a.parentNode;return e.newPosition(a,o)}function Pa(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t.ranges.length>1;return e.newSelection(t.ranges.map((function(t){if(r){var o=Ut.closest(t.start.node,[qe.TableCell,Fr]);return bt.fatal(o,"framework/kernel/src/model/utils/selection/normalize-selection.ts:25"),Vt.selectNodeContents(o)}return xa(e,t,n)})),t.anchor,t.focus)}function Ra(e){e._committed=!0}function Sa(e){return e._committed}function Ta(e){return e._flush()}var ja=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.MODE_USER;(0,Ke.A)(this,e),Object.defineProperty(this,"_editing",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_model",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"_mode",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"_document",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_cachedSelection",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_syncedOperations",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_unSyncOperations",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_committed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this._document=n.document,this._cachedSelection=this._document.selection}return(0,$e.A)(e,[{key:"destroy",value:function(){delete this._editing,delete this._model,delete this._document,delete this._cachedSelection,delete this._syncedOperations,delete this._unSyncOperations}},{key:"editing",get:function(){return this._editing}},{key:"mode",get:function(){return this._mode}},{key:"document",get:function(){return this._document}},{key:"defaultElementName",get:function(){return this._model.schema.defaultElementName}},{key:"textAttrs",get:function(){return this._model.schema.textAttrs}},{key:"operations",get:function(){return this._syncedOperations.concat(this._unSyncOperations)}},{key:"cachedSelection",get:function(){return this._cachedSelection}},{key:"isUserMode",value:function(){return this._mode===e.MODE_USER}},{key:"isHistoryMode",value:function(){return this._mode===e.MODE_HISTORY}},{key:"isAutoMode",value:function(){return this._mode===e.MODE_AUTO}},{key:"isOTMode",value:function(){return this._mode===e.MODE_OT}},{key:"isSilentMode",value:function(){return this._mode===e.MODE_SILENT}},{key:"getNodeById",value:function(e){return this._document.getNodeById(e)}},{key:"getNodesByName",value:function(e){return this._document.getNodesByName(e)}},{key:"getNodeByPath",value:function(e){return this._document.getNodeByPath(e)}},{key:"applyOperation",value:function(e){e.apply(this)}},{key:"hasCategory",value:function(e,t,n){return this._model.hasCategory(e,t,n)}},{key:"getNodeSchema",value:function(e){return this._model.getNodeSchema(e)}},{key:"isStandardAttr",value:function(e,t){return this._model.isStandardAttr(e,t)}},{key:"getAttrSchema",value:function(e){return this._model.getAttrSchema(e)}},{key:"isEmpty",value:function(){return 0===this._unSyncOperations.length}},{key:"_flush",value:function(){if(0===this._unSyncOperations.length)return null;var e=this._unSyncOperations.slice();return this._syncedOperations=this._syncedOperations.concat(this._unSyncOperations),this._unSyncOperations=[],e}},{key:"setSelectionWithoutOptimize",value:function(e){var t;t=Array.isArray(e)?Wr.createBy(this._document,e):e,this._document.selection=Pa(this,t,!1)}},{key:"setSelection",value:function(e){var t;t=Array.isArray(e)?Wr.createBy(this._document,e):e,this._document.selection=Pa(this,t)}},{key:"execCommand",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(t=this._model).execCommand.apply(t,[e].concat(r))}},{key:"dangerDirectSetSelection",value:function(e){var t;t=Array.isArray(e)?Wr.createBy(this._document,e):e,this._document.selection=t}},{key:"getSelection",value:function(){return this._document.selection}},{key:"acceptNode",value:function(e,t){return this._model.acceptNode(e,t)}},{key:"acceptAttr",value:function(e,t,n){return this._model.schema.acceptAttr(e,t,n)}},{key:"acceptAttrName",value:function(e,t){return this._model.schema.acceptAttrName(e,t)}},{key:"isContextAttr",value:function(e){return this._model.schema.isContextAttr(e)}},{key:"supportContextAttr",value:function(e,t){return this._model.schema.supportContextAttr(e,t)}},{key:"processContextAttr",value:function(e,t,n){return this._model.schema.processContextAttr(e,t,n)}},{key:"newPosition",value:function(e,t){return new At(e,t)}},{key:"newRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return Vt.createAt(e,t)}},{key:"newSelection",value:function(e,t,n){return Wr.createBy(this._document,e,t,n)}},{key:"newSelectionFromJson",value:function(e){return Wr.fromJson(this._document,e)}},{key:"setSelectionFromJson",value:function(e){var t=Wr.fromJson(this._document,e);this.setSelection(t)}},{key:"selectNodeContents",value:function(e){return Wr.createBy(this._document,[Vt.selectNodeContents(e)])}},{key:"selectNode",value:function(e){return Wr.createBy(this._document,[Vt.selectNode(e)])}},{key:"createElement",value:function(e,t,n){var r=this;return t&&Object.keys(t).forEach((function(n){bt.fatal(r.acceptAttr(e,n,t[n]),"framework/kernel/src/model/editing/job/job.ts:298")})),this._document.createElement(e,t,n)}},{key:"createHole",value:function(e,t,n){return this._document.createHole(e,t,n)}},{key:"createTextNode",value:function(e,t,n){var r=this;return t&&Object.keys(t).forEach((function(e){bt.fatal(r.acceptAttr(qe.Text,e,t[e]),"framework/kernel/src/model/editing/job/job.ts:312")})),this._document.createTextNode(e,t,n)}},{key:"createInheritTextNode",value:function(e,t){var n=this,r=wr.closestInlineAttrs(t),o={};return Object.keys(r).forEach((function(e){n.acceptAttr(qe.Text,e,r[e])&&(o[e]=r[e])})),this.createTextNode(e,o)}},{key:"createCardNode",value:function(e,t,n){var r=this;return t&&Object.keys(t).forEach((function(n){bt.fatal(r.acceptAttr(e,n,t[n]),"framework/kernel/src/model/editing/job/job.ts:333")})),this._document.createCardNode(e,t,n)}},{key:"isValidAttr",value:function(e,t){return this._model.schema.isValidAttr(e,t)}},{key:"removeAttribute",value:function(e,t){e.hasAttribute(t)&&ma(this,wa.removeAttribute(this,e,t))}},{key:"setAttribute",value:function(e,t,n){if(e.attrs[t]!==n){var r=wa.setAttribute(this,e,t,n);r&&ma(this,r)}}},{key:"insertNodeByPosition",value:function(e,t){wa.assertAcceptNode(this._model,e.node.nodeName,t.nodeName);var n=wa.insertByOffset(this,e.node,e.offset,t);return n&&ma(this,n),bt.fatal(t.parentNode===e.node,"framework/kernel/src/model/editing/job/job.ts:381"),new At(e.node,t.offset+1)}},{key:"cloneNode",value:function(e){var t=this;if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1]))return e.cloneNode(!1);var n=e.cloneNode(!1);return e.isElement()&&e.children.forEach((function(e){e=t.cloneNode(e,!0),t.appendChild(n,e)})),n}},{key:"appendChild",value:function(e,t){wa.assertAcceptNode(this._model,e.nodeName,t.nodeName),ma(this,wa.appendChild(this,e,t))}},{key:"prependChild",value:function(e,t){wa.assertAcceptNode(this._model,e.nodeName,t.nodeName),ma(this,wa.prependChild(this,e,t))}},{key:"replaceChild",value:function(e,t,n){bt.fatal(t!==n,"framework/kernel/src/model/editing/job/job.ts:426");var r,o=n.offset;return ma(this,wa.removeChild(this,e,n)),r="function"==typeof t?t(this,n,e):t,wa.assertAcceptNode(this._model,e.nodeName,r.nodeName),ma(this,wa.insertByOffset(this,e,o,r)),r}},{key:"removeChild",value:function(e,t){ma(this,wa.removeChild(this,e,t))}},{key:"insertBefore",value:function(e,t,n){wa.assertAcceptNode(this._model,e.nodeName,t.nodeName),ma(this,wa.insertBefore(this,e,t,n))}},{key:"insertAfter",value:function(e,t,n){wa.assertAcceptNode(this._model,e.nodeName,t.nodeName),ma(this,wa.insertAfter(this,e,t,n))}},{key:"insertByOffset",value:function(e,t,n){wa.assertAcceptNode(this._model,e.nodeName,n.nodeName);var r=wa.insertByOffset(this,e,t,n);r&&ma(this,r)}},{key:"setTextNodeData",value:function(e,t){ma(this,wa.setTextNodeData(this,e,t))}}])}();function Ia(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Ba()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Ba(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ba=function(){return!!e})()}Object.defineProperty(ja,"MODE_USER",{enumerable:!0,configurable:!0,writable:!0,value:We.User}),Object.defineProperty(ja,"MODE_INIT",{enumerable:!0,configurable:!0,writable:!0,value:We.Init}),Object.defineProperty(ja,"MODE_AUTO",{enumerable:!0,configurable:!0,writable:!0,value:We.Auto}),Object.defineProperty(ja,"MODE_HISTORY",{enumerable:!0,configurable:!0,writable:!0,value:We.History}),Object.defineProperty(ja,"MODE_OT",{enumerable:!0,configurable:!0,writable:!0,value:We.OT}),Object.defineProperty(ja,"MODE_SILENT",{enumerable:!0,configurable:!0,writable:!0,value:We.Silent});var Ma=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Ia(this,t,arguments),Object.defineProperty(e,"_$extendMethods",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(e,"_$extends",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(e,"_$services",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(e,"_pluginEventEmitter",{enumerable:!0,configurable:!0,writable:!0,value:new it}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){this._pluginEventEmitter.removeAllListeners(),this.removeAllListeners(),delete this._pluginEventEmitter,delete this._$extendMethods,delete this._$extends,delete this._$services}},{key:"extendMethods",value:function(e){var t=this,n=this._$extendMethods;Object.keys(e).forEach((function(r){bt(!ir(n,r),"framework/public/src/hub.ts:34"),bt(!t[r],"framework/public/src/hub.ts:35"),t[r]=function(){return e[r].apply(e,arguments)},n[r]=e[r]}))}},{key:"hasExtendMethod",value:function(e){return ir(this._$extendMethods,e)}},{key:"getExtendMethod",value:function(e){return this._$extendMethods[e]}},{key:"getExtendInterface",value:function(){return this}},{key:"extend",value:function(e,t){var n=this._$extends;bt(void 0===this[e],"framework/public/src/hub.ts:71"),bt(!ir(n,e),"framework/public/src/hub.ts:72"),n[e]=t,this[e]=t}},{key:"hasExtend",value:function(e){return ir(this._$extends,e)}},{key:"getExtend",value:function(e){return this._$extends[e]}},{key:"emitPluginEvent",value:function(e,t){var n;null===(n=this._pluginEventEmitter)||void 0===n||n.emit(e,t)}},{key:"onPluginEvent",value:function(e,t){var n=this;return this._pluginEventEmitter.on(e,t),function(){n._pluginEventEmitter.off(e,t)}}},{key:"emitSafe",value:function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.emit.apply(this,[e].concat(n))}catch(e){}}},{key:"registerService",value:function(e){bt(!this._$services[e.id],"framework/public/src/hub.ts:111"),this._$services[e.id]=e}},{key:"getService",value:function(e){return this._$services[e.value]||null}},{key:"requireService",value:function(e){var t=this._$services[e.value];return bt(t,"Service is not found: ".concat(String(e.value)),"framework/public/src/hub.ts:122"),t}}])}(it),Fa=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"setSelection",value:function(e,t){e.selection=t}}])}();function La(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Ua()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Ua(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ua=function(){return!!e})()}var Va=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=La(this,t),Object.defineProperty(r,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(r,"model",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(r,"_transaction",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(r,"_isFlushing",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(r,"_flushAgain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(r,"_jobs",{enumerable:!0,configurable:!0,writable:!0,value:[]}),r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){delete this.kernel,delete this.model,delete this._transaction,Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}},{key:"startTransaction",value:function(){var e=this;return bt.fatal(!this._transaction,"framework/kernel/src/model/editing/index.ts:42"),this._transaction=new ta({commit:function(){var t;null===(t=e._transaction)||void 0===t||t.destroy(),e._transaction=null,e._flush()},rollback:function(){var t;null===(t=e._transaction)||void 0===t||t.destroy(),e._transaction=null,e._rollback()}}),this._transaction}},{key:"requestFlush",value:function(){this._transaction||this._flush()}},{key:"job",get:function(){0===this._jobs.length&&this._jobs.push(new ja(this,this.model));var e=this._jobs[this._jobs.length-1];return Sa(e)&&(e=new ja(this,this.model),this._jobs.push(e)),e}},{key:"newJob",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ja.MODE_USER,t=this._jobs[this._jobs.length-1];return t&&(t.isEmpty()?(this._jobs.pop(),t=this._jobs[this._jobs.length-1],bt.fatal(!t||!t.isEmpty(),"framework/kernel/src/model/editing/index.ts:91")):Sa(t)||this._commitJob(t)),t=new ja(this,this.model,e),this.emit(Wi,{job:t}),this._jobs.push(t),t}},{key:"commitJob",value:function(e){this._commitJob(e),this.requestFlush()}},{key:"cancelJob",value:function(e){}},{key:"_flush",value:function(){if(this._isFlushing)this._flushAgain=!0;else{this._isFlushing=!0,this._flushAgain=!1;var e=2;try{for(this._doFlush();this._flushAgain;){if(this._flushAgain=!1,--e<0)throw new Error("failed to execute flush");this._doFlush()}}finally{this._isFlushing=!1}}}},{key:"_rollback",value:function(){var e=this._jobs,t=[];if(0!==e.length){var n=e[0].cachedSelection;e.forEach((function(e){var n=Ta(e);(null==n?void 0:n.length)&&n.forEach((function(e){t.push(e)}))}));var r=this.newJob(We.Auto);t.reverse().forEach((function(e){e.reverse(r)})),this._cleanJobs(!0),Fa.setSelection(this.model.document,n.cloneSelection()),this.emit(Gi)}else this.emit(Gi)}},{key:"_doFlush",value:function(){var e=this;this._hasContentChange()&&this.emit($i);var t=this._jobs,n=[],r=[],o=null,i=null,a=null;t.forEach((function(e,l){if(!e.isEmpty()){var u;o?e.mode!==We.Auto&&bt.fatal(o===e.mode,"framework/kernel/src/model/editing/index.ts:203"):o=e.mode,Sa(e)?(u=n,i||(i=e.cachedSelection)):(bt.fatal(t.length===l+1,"framework/kernel/src/model/editing/index.ts:210"),u=r,a||(a=e.cachedSelection));var c=Ta(e);c&&c.length&&c.forEach((function(e){u.push(e)}))}})),this._cleanJobs();var l=n.concat(r);if(l.length){bt.fatal(t.length>0,"framework/kernel/src/model/editing/index.ts:238"),bt.fatal(0===n.length||0===r.length,"framework/kernel/src/model/editing/index.ts:240");var u=this.model.document.selection,c={selection:u.cloneSelection(),mode:o,isCommitted:n.length>0};n.length?(bt.fatal(i,"framework/kernel/src/model/editing/index.ts:256"),c.operations=n,c.previousSelection=i):(bt.fatal(0===n.length&&a,"framework/kernel/src/model/editing/index.ts:261"),c.operations=r,c.previousSelection=a),this.emit(qi,c),c.mode!==We.Init&&c.mode!==We.OT&&Promise.resolve().then((function(){e.kernel&&e.emit(zi,{operations:l,selection:u.cloneSelection()})}));try{this.model.document.submitOperations(l,u.cloneSelection(),c.mode)}finally{this.emit(Ki)}}else{var s;n.length?(bt.fatal(i,"framework/kernel/src/model/editing/index.ts:295"),s=i):s=a;var d=this.model.document.selection;0!==l.length||Wr.equal(d,s)||(this.emit(Yi,{selection:d.cloneSelection()}),this.model.document.selectionChange({selection:d.cloneSelection()}))}}},{key:"_hasContentChange",value:function(){return this._jobs.some((function(e){return!e.isEmpty()}))}},{key:"_cleanJobs",value:function(){var e=[];if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return this._jobs.forEach((function(e){e.destroy()})),void(this._jobs=[]);this._jobs.forEach((function(t){Sa(t)||t.isEmpty()?t.destroy():e.push(t)})),bt.fatal(e.length<=1,"framework/kernel/src/model/editing/index.ts:354"),this._jobs=e}},{key:"_commitJob",value:function(e){e._committed=!0}}])}(Ma),Ha=o(7373),za="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",Wa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function qa(){for(var e="",t=za.charAt(Math.floor(Math.random()*za.length)),n=1;n<5;n++)e+=Wa.charAt(Math.floor(Math.random()*Wa.length));return t+e}var $a={type:wt.Card,id:qa,category:[qe.Card,qe.BlockCard,qe.Brick],parents:[qe.Hole]},Ka={type:wt.Card,id:qa,category:[qe.Card,qe.InlineCard],parents:[qe.TextContainer]},Ya={value:{targets:[qe.Card]},cardType:{targets:[qe.Card]}},Ga=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e),Object.defineProperty(this,"_rawSchemas",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_elementSchemas",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_attrSchemas",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_textAttrNames",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"_contextAttrs",{enumerable:!0,configurable:!0,writable:!0,value:[]})}),[{key:"destroy",value:function(){this._textAttrNames.clear(),delete this._rawSchemas,delete this._elementSchemas,delete this._attrSchemas,delete this._textAttrNames,delete this._contextAttrs}},{key:"defaultElementName",get:function(){return this._rawSchemas[qe.Root].defaultElementName}},{key:"textAttrs",get:function(){return Array.from(this._textAttrNames)}},{key:"registerElement",value:function(e){var t=this,n=this._elementSchemas;this._rawSchemas=Object.assign(Object.assign({},e),this._rawSchemas),Object.keys(e).forEach((function(r){var o=e[r],i={type:wt.Element,parents:{},category:{},standardAttrs:[]};if(o.parents&&o.parents.forEach((function(e){i.parents[e]=!0})),o.category&&o.category.forEach((function(e){i.category[e]=!0})),o.excludes&&(i.excludes=o.excludes.slice()),o.children){var a={};o.children.forEach((function(e){a[e]=!0})),i.children=a}o.contextAttr&&Object.keys(o.contextAttr).forEach((function(e){t._contextAttrs.push(e)})),o.standardAttrs&&(i.standardAttrs=(0,ln.A)(o.standardAttrs)),i.category[r]=!0,n[r]=i}))}},{key:"registerAttr",value:function(e,t){var n=this,r={};"string"==typeof e?(bt.fatal(t,"framework/kernel/src/model/schema.ts:119"),r[e]=t):r=Object.assign({},e);var o=this._attrSchemas;Object.keys(r).forEach((function(e){var t=r[e];o[e]=t,t.targets.includes(qe.Text)&&n._textAttrNames.add(e)}))}},{key:"registerInlineCard",value:function(e){var t=Jn(Ka);this.registerElement((0,Ha.A)({},e,t)),this.registerAttr(Jn(Ya))}},{key:"registerBlockCard",value:function(e){var t=Jn($a);this.registerElement((0,Ha.A)({},e,t)),this.registerAttr(Jn(Ya))}},{key:"getNodeSchema",value:function(e){return this._rawSchemas[e]||null}},{key:"isStandardAttr",value:function(e,t){var n=this._rawSchemas[e];return!!(null==n?void 0:n.standardAttrs)&&n.standardAttrs.includes(t)}},{key:"getAttrSchema",value:function(e){return this._attrSchemas[e]||null}},{key:"allowCloneAttr",value:function(e){var t=this._attrSchemas[e];return!!t&&!1!==t.allowClone}},{key:"allowExtractAttr",value:function(e){var t=this._attrSchemas[e];return!!t&&!1!==t.allowExtract}},{key:"acceptNode",value:function(e,t){if("*"===t&&"*"!==e)return!0;if("#fragment"===e)return!0;var n=this._elementSchemas[t],r=this._elementSchemas[e];return!(!n||!r)&&((!n.excludes||!n.excludes.some((function(e){return r.category[e]})))&&(!(r.children&&!Object.keys(n.category).some((function(e){return r.children[e]})))&&(Object.keys(n.parents).some((function(t){return t.startsWith("~")?!!r.category[t]:e===t}))||!1)))}},{key:"isValidAttr",value:function(e,t){if("id"===e&&"string"==typeof t)return!0;var n=this._attrSchemas[e];if(!n||void 0===t)return!1;if(n.values)if("function"==typeof n.values){if(!n.values(t))return!1}else if(-1===n.values.indexOf(t))return!1;return!0}},{key:"acceptAttr",value:function(e,t,n){return"id"===t&&"string"==typeof n||!!this.isValidAttr(t,n)&&this.acceptAttrName(e,t)}},{key:"acceptAttrName",value:function(e,t){if("id"===t)return!0;if(!this._elementSchemas[e])return!1;var n=this._attrSchemas[t];return bt.fatal(n&&n.targets,"framework/kernel/src/model/schema.ts:300"),(!n.excludes||!this.hasCategory(e,n.excludes,!1))&&this.hasCategory(e,n.targets,!1)}},{key:"hasCategory",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];"string"==typeof t&&(t=[t]);var r=this._elementSchemas[e];if(!r)return!1;var o=r.category;if(n){for(var i=0,a=t.length;i<a;i++)if(!o[t[i]])return!1;return!0}for(var l=0,u=t.length;l<u;l++)if(o[t[l]])return!0;return!1}},{key:"isContextAttr",value:function(e){return this._contextAttrs.includes(e)}},{key:"supportContextAttr",value:function(e,t){return!!this._contextAttrs.includes(t)&&ir(this._rawSchemas[e].contextAttr,t)}},{key:"processContextAttr",value:function(e,t,n){var r=this._rawSchemas[e];return bt.fatal(r.contextAttr&&r.contextAttr[t],"framework/kernel/src/model/schema.ts:368"),r.contextAttr[t](n,t,e)}},{key:"getCategoryByNodeName",value:function(e){var t=this._elementSchemas[e];return bt.fatal(t&&t.category,"framework/kernel/src/model/schema.ts:376"),t.category}},{key:"getNodeTypeByNodeName",value:function(e){var t=this._elementSchemas[e];return t?t.type:null}}])}(),Ja=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"getSnapshot",value:function(e){var t=e.selection,n=e.rootNode;return{selection:{anchor:t.anchor,focus:t.focus,ranges:t.ranges.map((function(e){return{collapsed:e.collapsed,start:{node:e.start.node.id,offset:e.start.offset},end:{node:e.end.node.id,offset:e.end.offset}}}))},content:[n.toData(!0)]}}}])}(),Xa=function(){return(0,$e.A)((function e(t,n){(0,Ke.A)(this,e),Object.defineProperty(this,"_model",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"_commands",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_destroyed",{enumerable:!0,configurable:!0,writable:!0,value:!1})}),[{key:"destroy",value:function(){var e=this;this._destroyed=!0,Object.keys(this._commands).forEach((function(t){e._commands[t].destroy()})),delete this._model,delete this._kernel,delete this._commands}},{key:"registerCommand",value:function(e,t){var n=this;if(!this._destroyed){var r={};"string"==typeof e?(bt.fatal(t,"framework/kernel/src/model/command/command-manager.ts:39"),r[e]=t):r=e,Object.keys(r).forEach((function(e){var t=r[e];["undo","redo"].includes(e)||bt.fatal(!n._commands[e],"duplicate command name ".concat(e),"framework/kernel/src/model/command/command-manager.ts:48"),t.init(n._model.kernel,n._model.editing),n._commands[e]=t}))}}},{key:"hasCommand",value:function(e){return!!this._commands&&Object.prototype.hasOwnProperty.call(this._commands,e)}},{key:"getCommandState",value:function(e){if(this._destroyed)return st;var t=this._commands[e];return t&&this._model.document?t.getState(this._getJob()):st}},{key:"queryCommandEnabled",value:function(e){if(this._destroyed)return!1;var t=this._commands[e];return!(!t||!this._model.document)&&t.isEnabled(this._getJob())}},{key:"execute",value:function(e){if(this._destroyed)return!1;var t=this._commands[e];if(!t||!this._model.document)return!1;for(var n,r=+new Date,o=this._model.editing.startTransaction(),i=arguments.length,a=new Array(i>1?i-1:0),l=1;l<i;l++)a[l-1]=arguments[l];try{this._model.editing.emit("beforeExecCommand",{commandName:e,args:a}),n=t.execute.apply(t,[this._model.editing].concat(a))}catch(t){o.rollback();var u=a.map((function(e){try{return JSON.stringify(e)}catch(e){return"#error"}})),c=Ja.getSnapshot(this._model.document),s={error:t,detail:{commandName:e,args:u,selection:c.selection,content:c.content}};throw this._kernel.emitEvent("commandExecuteError",s),this._kernel.emit("commandExecuteError",s),t}return o.commit(),this._model.editing.emit("afterExecCommand",{commandName:e,args:a,result:n}),this._kernel.emitEvent("commandEnd",{commandName:e,useTime:+new Date-r}),n}},{key:"getCommandValue",value:function(e){if(this._destroyed)return!1;var t=this._commands[e];if(!t||!this._model.document)return!1;for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return t.getValue.apply(t,[this._getJob()].concat(r))}},{key:"_getJob",value:function(){return this._model.editing.job}}])}();const Qa={"#root":{type:wt.Element,category:[qe.Root],defaultElementName:"p",parents:[]},"#text":{type:wt.Text,category:[qe.Text],parents:[qe.TextContainer]},hole:{type:wt.Element,category:[qe.Hole],parents:[qe.Root,qe.LikeRoot],excludes:[qe.VirtualLikeRoot]},tableHole:{type:wt.Element,category:[qe.TableHole],parents:[qe.Root]},rootCardHole:{type:wt.Element,category:[qe.RootCardHole,qe.Hole],parents:[qe.Root]},alertHole:{type:wt.Element,category:[qe.AlertHole,qe.Hole],parents:[qe.Root,qe.LikeRoot],excludes:["alert"],children:["alert"]},containerHole:{type:wt.Element,category:[qe.ContainerHole,qe.Hole],parents:[qe.Root]},"*":{type:wt.Element,category:[],parents:[]}};function Za(e,t,n){bt.fatal(ar.isFragmentNode(t),"framework/kernel/src/model/utils/inode/set-inode.ts:13");var r=e.document.rootNode,o=t.attrs;o&&Object.keys(o).forEach((function(t){"id"!==t&&e.setAttribute(r,t,o[t])})),r.children.forEach((function(t){e.removeChild(r,t)}));var i=e.newSelection(e.newRange(e.newPosition(r,0)));ci(e,i,t,n)}function el(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,tl()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function tl(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(tl=function(){return!!e})()}var nl=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=el(this,t),Object.defineProperty(n,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(n,"_document",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"_schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_editing",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_commandManager",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_disabled",{enumerable:!0,configurable:!0,writable:!0,value:!0}),n._schema=new Ga,n._schema.registerElement(Qa),n._editing=new Va(e,n),n._commandManager=new Xa(n,e),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"disableSameIdentifier",get:function(){var e,t;return!!(null===(t=null===(e=this.kernel)||void 0===e?void 0:e.option)||void 0===t?void 0:t.disableSameIdentifier)}},{key:"destroy",value:function(){var e;null===(e=this._document)||void 0===e||e.destroy(),this._commandManager.destroy(),this._editing.destroy(),this._schema.destroy(),this.removeAllListeners(),delete this._document,delete this._commandManager,delete this._editing,delete this._schema}},{key:"document",get:function(){return this._document}},{key:"editing",get:function(){return this._editing}},{key:"disabled",get:function(){return this._disabled}},{key:"enabled",get:function(){return!this._disabled}},{key:"schema",get:function(){return this._schema}},{key:"enable",value:function(){this._disabled&&(this._disabled=!1,this.emit("disable.state.change",!1))}},{key:"disable",value:function(){this._disabled||(this._disabled=!0,this.emit("disable.state.change",!0))}},{key:"reset",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._document&&(this.emit("document.destroy",this._document),this._document.destroy());var n=new ea(this,null==e?void 0:e.attrs,null==t?void 0:t.entryPoint);this._document=n,this.emit("document.create",this._document,t);var r,o=this._editing,i=o.newJob(ja.MODE_INIT);return e&&Za(i,e,this.kernel),n.entryPoint&&(r=wi.moveToNodeById(i,n.entryPoint)),r||(r=wi.toStart(i.getSelection())),i.setSelection(r),o.commitJob(i),n.ready(),this.emit("document.ready",n),this._document}},{key:"registerElement",value:function(e,t){var n={};"string"==typeof e?n[e]=t:n=e;var r={};Object.keys(n).forEach((function(e){r[e]=Object.assign(Object.assign({},n[e]),{type:wt.Element})})),this._schema.registerElement(r)}},{key:"registerAttr",value:function(e,t){this._schema.registerAttr(e,t)}},{key:"registerInlineCard",value:function(e){this._schema.registerInlineCard(e)}},{key:"registerBlockCard",value:function(e){this._schema.registerBlockCard(e)}},{key:"registerCommand",value:function(e,t){this._commandManager.registerCommand(e,t)}},{key:"acceptNode",value:function(e,t){return this._schema.acceptNode(e,t)}},{key:"acceptAttr",value:function(e,t,n){return this._schema.acceptAttr(e,t,n)}},{key:"hasCategory",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._schema.hasCategory(e,t,n)}},{key:"getNodeSchema",value:function(e){return this._schema.getNodeSchema(e)}},{key:"isStandardAttr",value:function(e,t){return this._schema.isStandardAttr(e,t)}},{key:"getAttrSchema",value:function(e){return this._schema.getAttrSchema(e)}},{key:"connectDocument",value:function(){throw new Error("can't support connect document")}},{key:"execCommand",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(t=this._commandManager).execute.apply(t,[e].concat(r))}},{key:"queryCommandState",value:function(e){return this._commandManager.getCommandState(e)}},{key:"queryCommandSupported",value:function(e){return this._commandManager.hasCommand(e)}},{key:"queryCommandEnabled",value:function(e){return this._commandManager.queryCommandEnabled(e)}},{key:"queryCommandValue",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(t=this._commandManager).getCommandValue.apply(t,[e].concat(r))}}])}(it);function rl(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,ol()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function ol(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ol=function(){return!!e})()}var il=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=rl(this,t),Object.defineProperty(n,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e){var t=this._kernel.readData("text/ne-inode",e);bt.fatal("#root"===t.name,"framework/kernel/src/public/json-data-source.ts:16");var n=al(this._kernel,[t]),r=(0,tn.A)(n,1)[0];return ar.createFragment(r.children,r.attrs)}},{key:"write",value:function(e){return e.document.getData()}}])}(Ht);function al(e,t){var n=[];return t.forEach((function(t){var r,o=e.getNodeSchema(t.name);if(!o)return t.children&&al(e,t.children).forEach((function(e){n.push(e)})),n;switch(o.type){case"element":r=ar.createElement(t.name,t.attrs,t.id);break;case"card":(r=ar.createCard(t.name,(t.attrs||{}).value,t.id)).attrs=t.attrs||r.attrs;break;case"text":r=ar.createTextNode(t.data,t.attrs,t.id);break;default:throw new Error("invalid data")}t.children&&ar.setChildren(r,al(e,t.children)),n.push(r)})),n}var ll="1.40.0";function ul(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return cl(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cl(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function cl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function sl(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,dl()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function dl(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(dl=function(){return!!e})()}var fl=function(e){function t(e,n){var r,o;(0,Ke.A)(this,t),r=sl(this,t),Object.defineProperty(r,"version",{enumerable:!0,configurable:!0,writable:!0,value:ll}),Object.defineProperty(r,"_id",{enumerable:!0,configurable:!0,writable:!0,value:Dr(16)}),Object.defineProperty(r,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_model",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_writerManager",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_readerManager",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_dataSourceManager",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_plugins",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(r,"_richContent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"setDocument",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t,n){var o,i,a;try{if(e&&("string"==typeof e?(bt.fatal(void 0!==t,"lack of second parameter","framework/kernel/src/kernel.ts:295"),o=e,i=t,a=n):(o=e.type,i=e.value,a=t)),"lake"===o&&(o="text/lake"),o&&!r._dataSourceManager.matchType(o))throw new Error("illegal data type");var l,u=r._model;o&&(r.emit("beforeSetDocument",o,i,a),l=r._dataSourceManager.read(o,i,a)),u.reset(l,a),r.emit("afterSetDocument")}catch(t){throw r.emit("setDocumentError",{error:t,detail:{dataType:o,content:i||e}}),t}}}),Object.defineProperty(r,"getDocument",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"json",n=arguments.length>1?arguments[1]:void 0;if(!(null===(e=r._model)||void 0===e?void 0:e.document))return null;if("lake"===t&&(t="text/lake"),!r._dataSourceManager.matchType(t))throw new Error("illegal data type");var o=r._model.editing.newJob(ja.MODE_SILENT);return r._dataSourceManager.write(t,o,n)}}),Object.defineProperty(r,"execCommand",{enumerable:!0,configurable:!0,writable:!0,value:function(e){for(var t,n,o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];return null===(n=r._model)||void 0===n?void 0:(t=n).execCommand.apply(t,[e].concat(i))}}),Object.defineProperty(r,"queryCommandState",{enumerable:!0,configurable:!0,writable:!0,value:function(e){for(var t,n,o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];return null===(n=r._model)||void 0===n?void 0:(t=n).queryCommandState.apply(t,[e].concat(i))}}),Object.defineProperty(r,"queryCommandEnabled",{enumerable:!0,configurable:!0,writable:!0,value:function(e){for(var t,n,o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];return null===(n=r._model)||void 0===n?void 0:(t=n).queryCommandEnabled.apply(t,[e].concat(i))}}),Object.defineProperty(r,"queryCommandValue",{enumerable:!0,configurable:!0,writable:!0,value:function(e){for(var t,n,o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];return null===(n=r._model)||void 0===n?void 0:(t=n).queryCommandValue.apply(t,[e].concat(i))}}),n=n||{eventEmitter:r},r._option=new ut(n),r._model=new nl(r),r._dataSourceManager=new zt,r._writerManager=new Ni(r),r._readerManager=new Ci(r);var i=r._model.editing;r._dataSourceManager.register("json",new il(r)),r._model.on("document.create",(function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];(e=r).emit.apply(e,["document.create"].concat(n))})),r._model.on("document.beforeReady",(function(){r.emit("document.beforeReady")})),r._model.on("document.ready",(function(){r.emit("document.ready"),r.emitEvent("document.ready")})),r._model.on("document.destroy",(function(){r.emit("document.destroy")}));var a,l=r._option.disabledPlugins,u=ul(e.kernelPlugins);try{for(u.s();!(a=u.n()).done;){var c=a.value,s=c.PluginOption,d=c.PluginName,f=c.Service,h=c.Commands;if(!l.includes(d)){var p=null;if(s){if(!s.OptionName)throw new Error("missing OptionName");p=new s(n[s.OptionName])}p&&(p.kernelOption=r._option);var v=new c(r,i,p);if(f){var m=new f(r,i,v);r.registerService(m),v.setService(m)}r._createCommand(h,v),r._plugins.push(v),bt.fatal(void 0===r._plugins[d],"framework/kernel/src/kernel.ts:140"),r._plugins[d]=v}}}catch(e){u.e(e)}finally{u.f()}var g,b=ul(r._plugins);try{for(b.s();!(g=b.n()).done;)g.value.init(r,i)}catch(e){b.e(e)}finally{b.f()}var y,w=ul(r._plugins);try{for(w.s();!(y=w.n()).done;){var A=y.value;null===(o=A.afterInit)||void 0===o||o.call(A)}}catch(e){w.e(e)}finally{w.f()}return r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"_createCommand",value:function(e,t){var n=this;if(e){var r={};Array.isArray(e)?(e.forEach((function(e){var o=e.ID;bt.fatal(o,"framework/kernel/src/kernel.ts:165"),bt.fatal(!r[o],"duplicate command ID ".concat(o),"framework/kernel/src/kernel.ts:166"),r[o]=new e(n,n._model.editing,t)})),this.registerCommand(r)):"object"===(0,Gn.A)(e)&&(Object.keys(e).forEach((function(o){var i=e[o];bt.fatal(o,"framework/kernel/src/kernel.ts:180"),bt.fatal(!r[o],"duplicate command ID ".concat(o),"framework/kernel/src/kernel.ts:181"),r[o]=new i(n,n._model.editing,t)})),this.registerCommand(r))}}},{key:"destroy",value:function(){this.emit("beforedestroy"),this.removeAllListeners(),this._plugins.forEach((function(e){e.destroy()})),this._readerManager.destroy(),this._writerManager.destroy(),this._dataSourceManager.destroy(),this._model.destroy(),delete this._readerManager,delete this._writerManager,delete this._dataSourceManager,delete this._model,delete this._option,delete this._plugins,Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}},{key:"id",get:function(){return this._id}},{key:"document",get:function(){var e;return(null===(e=this._model)||void 0===e?void 0:e.document)||null}},{key:"defaultElementName",get:function(){return this._model.schema.defaultElementName}},{key:"model",get:function(){return this._model}},{key:"option",get:function(){return this._option}},{key:"editing",get:function(){return this._model.editing}},{key:"theme",get:function(){return this.option.theme}},{key:"dataSourceManager",get:function(){return this._dataSourceManager}},{key:"plugins",get:function(){return this._plugins}},{key:"disabled",get:function(){return this._model.disabled}},{key:"emitEvent",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(t=this._option.eventEmitter||this).emit.apply(t,[e].concat(r))}},{key:"sendMessage",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=this._option.eventEmitter||this).emit.apply(e,["message"].concat(n))}},{key:"onMessage",value:function(e){(this._option.eventEmitter||this).on("message",e)}},{key:"enable",value:function(){this._model.enable()}},{key:"disable",value:function(){this._model.disable()}},{key:"canGetDocument",value:function(){var e=!1;return this._plugins.forEach((function(t){t.sync()||(e=!0)})),!e}},{key:"registerDataSource",value:function(e,t){return this._dataSourceManager.register(e,t)}},{key:"registerMetaFilter",value:function(e,t){this._dataSourceManager.registerMetaFilter(e,t)}},{key:"registerWriter",value:function(e,t){this._writerManager.register(e,t)}},{key:"registerReader",value:function(e,t){this._readerManager.register(e,t)}},{key:"getSupportedWriterTypes",value:function(){return this._writerManager.types}},{key:"getSupportedReaderTypes",value:function(){return this._readerManager.types}},{key:"writeData",value:function(e,t,n){return this._writerManager.getData(e,t,n)}},{key:"readData",value:function(e,t,n){return this._readerManager.getINode(e,t,n)}},{key:"registerElement",value:function(e,t){this._model.registerElement(e,t)}},{key:"registerAttr",value:function(e,t){this._model.registerAttr(e,t)}},{key:"registerInlineCard",value:function(e){this._model.registerInlineCard(e)}},{key:"registerBlockCard",value:function(e){this._model.registerBlockCard(e)}},{key:"createModelRange",value:function(e,t){var n=e?new At(e.node,e.offset):void 0,r=t?new At(t.node,t.offset):void 0;if(!(n=n||r))throw new Error("failed to call createModelRange()");return Vt.createAt(n,r)}},{key:"getNodeSchema",value:function(e){return this._model.getNodeSchema(e)}},{key:"hasCategory",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._model.hasCategory(e,t,n)}},{key:"setDocExtraContent",value:function(e){this._richContent=Object.assign(Object.assign({},this._richContent),e)}},{key:"getDocExtraContent",value:function(){return this._richContent}},{key:"registerCommand",value:function(e,t){this._model.registerCommand(e,t)}},{key:"queryCommandSupported",value:function(e){for(var t,n,r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return null===(n=this._model)||void 0===n?void 0:(t=n).queryCommandSupported.apply(t,[e].concat(o))}}])}(Ma),hl=o(1806),pl=o(8596);function vl(e,t,n){if((0,hl.A)())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var o=new(e.bind.apply(e,r));return n&&(0,pl.A)(o,n.prototype),o}var ml=function(){function e(){(0,Ke.A)(this,e),Object.defineProperty(this,"kernelPlugins",{enumerable:!0,configurable:!0,writable:!0,value:[]})}return(0,$e.A)(e,[{key:"registerKernelPlugin",value:function(t){return e.addPluginToPool(t,this.kernelPlugins),this}},{key:"createKernel",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return vl(fl,[this].concat(t))}}],[{key:"addPluginToPool",value:function(e,t){e.forEach((function(e){var n=e.PluginName;bt.fatal(n,"missing PluginName","framework/kernel/src/kernel-factory.ts:26"),bt.fatal(!t.includes(e),"Plugin duplicate registration: ".concat(n),"framework/kernel/src/kernel-factory.ts:27"),t[n]=e,t.push(e)}))}}])}();function gl(e,t,n){for(var r,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4?arguments[4]:void 0,a=t.ranges,l=new Set,u=!t.collapsed,c=function(){var t=a[s],r=t.start.node,c=t.end.node;return bl(u,e,t.start,n,o,i).forEach((function(e){l.add(e)})),l.size>1?{v:Array.from(l)}:t.collapsed?0:(r!==c&&bl(u,e,t.end,n,o,i).forEach((function(e){l.add(e)})),l.size>1?{v:Array.from(l)}:(Go.walkRange(t,(function(t,a){if(t===r||t===c)return a.skip();if(i){var s=Ut.closest(t,qe.Block);if(s&&s.hasCategory(i))return a.skip()}yl(u,l,e,t,n,o),l.size>1&&a.stop()})),l.size>1?{v:Array.from(l)}:void 0))},s=0,d=a.length;s<d;s++)if(0!==(r=c())&&r)return r.v;return Array.from(l)}function bl(e,t,n,r,o,i){if(n.node.hasCategory([qe.Root,qe.LikeRoot,qe.TableHole,qe.Hole]))return[];if(i){var a=Ut.closest(n.node,qe.Block);if(a&&a.hasCategory(i))return[]}var l=new Set,u=Ut.getAncestors(n.node,qe.Block);if(!u)return[];for(var c=u.length-1;c>=0;c--)yl(e,l,t,u[c],r,o);return Array.from(l)}function yl(e,t,n,r,o,i){if(n.acceptAttrName(r.nodeName,o)&&!(e&&r.isTextNode()&&r.isEmpty())){if(!i&&n.isContextAttr(o)){var a=Ut.closest(r,qe.AttrContext);if(a&&n.supportContextAttr(a.nodeName,o)){var l=n.processContextAttr(a.nodeName,o,r.getAttribute(o));return void t.add(l)}}r.hasAttribute(o)?t.add(r.attrs[o]):r.isTextNode()&&t.add(null)}}var wl=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"getAttrValue",value:function(e,t,n){return gl(e,t,n,!(arguments.length>3&&void 0!==arguments[3])||arguments[3],arguments.length>4?arguments[4]:void 0)}}])}();function Al(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,kl()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function kl(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(kl=function(){return!!e})()}var _l,Cl=function(e){function t(){return(0,Ke.A)(this,t),Al(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){var t=e.getSelection();if(wi.isInCard(t))return t.firstRange.start.node.hasCategory(qe.InlineCard)?pt.NOT_EXECUTED:st;var n=t.firstRange,r=n.start,o=n.end;if(r.node.closest(qe.OnlyText)||o.node.closest(qe.OnlyText))return st;if(t.isCollapsed&&t.firstRange.start.node.hasCategory([qe.TableHole,qe.Hole]))return st;var i=wl.getAttrValue(e,this._formatSelection(t),this.attrName,!1);return i.length>1?pt.UNKNOWN:1===i.length&&i[0]?pt.EXECUTED:pt.NOT_EXECUTED}},{key:"getValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.getSelection();if(wi.isInCard(t)&&!t.firstRange.start.node.hasCategory(qe.InlineCard))return null;var n=wl.getAttrValue(e,this._formatSelection(t),this.attrName,!1);return Array.from(n)}},{key:"execute",value:function(e,t,n){var r=e.newJob();if(this.getState(r)===pt.UNAVAILABLE)return e.cancelJob(r),!1;var o=null;if(n){if(!(o=this._createSelectionById(r,n)))return!1}else if((o=r.getSelection()).collapsed&&o.firstRange.start.node.isRootNode()&&o.firstRange.start.isAtEnd){var i=r.createElement(r.defaultElementName);r.appendChild(o.firstRange.start.node,i),o=r.newSelection([r.newRange(r.newPosition(i,0))])}return(o=t?wi.setAttribute(r,this._formatSelection(o),this.attrName,t):wi.removeAttribute(r,this._formatSelection(o),this.attrName))&&r.setSelection(o),e.commitJob(r),!0}},{key:"_createSelectionById",value:function(e,t){var n=e.getNodeById(t);return(null==n?void 0:n.isConnected)?e.newSelection(e.newRange(e.newPosition(n,0))):null}},{key:"_formatSelection",value:function(e){return e.isCollapsed?e:wi.shrinkToElement(e)}}])}(gt),Nl="both",Ol="top",xl="bottom";!function(e){e.BOTH="both",e.TOP="top",e.BOTTOM="bottom"}(_l||(_l={}));var El="normal",Dl="contain";function Pl(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Rl()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Rl(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Rl=function(){return!!e})()}var Sl=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=Pl(this,t),Object.defineProperty(r,"_cardValue",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(r,"_pluginOption",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r._resetCardValue(e),r._pluginOption=n||null,r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){}},{key:"destroy",value:function(){this.removeAllListeners()}},{key:"cardAlias",get:function(){return null}},{key:"pluginOption",get:function(){return this._pluginOption}},{key:"resetCardValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];bt.fatal("boolean"==typeof t,"framework/kernel/src/public/card-data.ts:80"),this._resetCardValue(e,t),this.afterChange(t)}},{key:"formatCardValue",value:function(e){var t=this.constructor.DefaultCardValue;return Object.assign(Object.assign({},Jn(t)),e)}},{key:"getCardValue",value:function(){return Object.assign({},this._cardValue)}},{key:"afterChange",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.emit("change",e)}},{key:"setCardSpacing",value:function(e){e!==this._cardValue.__spacing&&(e?this._cardValue.__spacing=e:delete this._cardValue.__spacing,this.emit("spacingChange"))}},{key:"addCardTopSpacing",value:function(){var e=this._cardValue.__spacing;e?e===_l.BOTTOM&&(this._cardValue.__spacing=_l.BOTH,this.emit("spacingChange")):(this._cardValue.__spacing=_l.TOP,this.emit("spacingChange"))}},{key:"removeCardTopSpacing",value:function(){var e=this._cardValue.__spacing;e===_l.BOTH?(this._cardValue.__spacing=_l.BOTTOM,this.emit("spacingChange")):e===_l.TOP&&(delete this._cardValue.__spacing,this.emit("spacingChange"))}},{key:"addCardBottomSpacing",value:function(){var e=this._cardValue.__spacing;e?e===_l.TOP&&(this._cardValue.__spacing=_l.BOTH,this.emit("spacingChange")):(this._cardValue.__spacing=_l.BOTTOM,this.emit("spacingChange"))}},{key:"removeCardBottomSpacing",value:function(){var e=this._cardValue.__spacing;e===_l.BOTH?(this._cardValue.__spacing=_l.TOP,this.emit("spacingChange")):e===_l.BOTTOM&&(delete this._cardValue.__spacing,this.emit("spacingChange"))}},{key:"toggleCardSpacing",value:function(){this._cardValue.__spacing?delete this._cardValue.__spacing:this._cardValue.__spacing=_l.BOTH,this.emit("spacingChange")}},{key:"getWidthMode",value:function(){var e;return(null===(e=this._cardValue)||void 0===e?void 0:e.__widthMode)===Dl?Dl:El}},{key:"toggleWidthMode",value:function(){var e,t=(null===(e=this._cardValue)||void 0===e?void 0:e.__widthMode)===Dl?El:Dl;this._cardValue.__widthMode=t,this.emit("widthModeChange",t)}},{key:"removeCardSpacing",value:function(){delete this._cardValue.__spacing,this.emit("spacingChange")}},{key:"getCardSpacing",value:function(){return this._cardValue.__spacing}},{key:"hasCardSpacing",value:function(){return this._cardValue.__spacing===_l.BOTH}},{key:"hasCardTopSpacing",value:function(){var e=this._cardValue.__spacing;return e===_l.BOTH||e===_l.TOP}},{key:"hasCardBottomSpacing",value:function(){var e=this._cardValue.__spacing;return e===_l.BOTH||e===_l.BOTTOM}},{key:"__getCardValueWithNewHeight",value:function(e){return Object.assign(Object.assign({},this._cardValue),{__height:e})}},{key:"recoverCardHeight",value:function(){delete this._cardValue.__height,this.emit("cardHeightReset")}},{key:"getCardHeight",value:function(){return this._cardValue.__height}},{key:"sync",value:function(e,t){return!!e}},{key:"_resetCardValue",value:function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=!!this._cardValue,i=Tl(r.__height),a=Tl(null===(e=this._cardValue)||void 0===e?void 0:e.__height),l=r.__spacing,u=null===(t=this._cardValue)||void 0===t?void 0:t.__spacing,c=r.__widthMode,s=null===(n=this._cardValue)||void 0===n?void 0:n.__widthMode;this._cardValue=this.formatCardValue(r),bt.fatal(this._cardValue&&"object"===(0,Gn.A)(this._cardValue),"framework/kernel/src/public/card-data.ts:275"),o&&i!==a&&this.emit("heightChange",{newHeight:i,oldHeight:a}),o&&u!==l&&this.emit("spacingChange"),o&&c!==s&&this.emit("widthModeChange",c)}}],[{key:"setCardSpacingToValue",value:function(e,t){return bt.fatal(t,"framework/kernel/src/public/card-data.ts:34"),Object.assign(Object.assign({},t),{__spacing:e})}}])}(it);function Tl(e){if(null!==e)return e}function jl(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Il()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Il(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Il=function(){return!!e})()}var Bl=function(e){function t(){return(0,Ke.A)(this,t),jl(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){var t=e.getSelection();return t.rangeCount>1||wi.isInCard(t)||wi.isInHole(t)?st:dt}}])}(gt),Ml=function(e){function t(){return(0,Ke.A)(this,t),jl(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){var t=e.getSelection();return t.rangeCount>1||wi.isInCard(t)||wi.isInHole(t)?st:dt}}])}(pt);function Fl(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Ll()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Ll(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ll=function(){return!!e})()}var Ul=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Fl(this,t,arguments),Object.defineProperty(e,"_nodeName",{enumerable:!0,configurable:!0,writable:!0,value:""}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){var t=e.getSelection();if(t.isTableSelection)return st;var n=t.firstRange;if(n.collapsed)return st;var r=t.firstRange,o=r.start,i=r.end;if(o.node.closest(qe.OnlyText)||i.node.closest(qe.OnlyText))return st;var a=n.start.node.closest(qe.Block),l=n.end.node.closest(qe.Block);if(!a||a!==l)return st;var u=this._nodeName,c=n.start.node.closest(qe.Inline);if(c&&!e.acceptNode(c.nodeName,u))return st;var s=n.end.node.closest(qe.Inline);if(s&&!e.acceptNode(s.nodeName,u))return st;var d=(n=Go.enlargeRangeToCommonAncestor(e,n)).commonAncestorContainer;for(d.isTextNode()&&(d=d.parentNode);d!==a;){if(!e.acceptNode(d.nodeName,u))return st;d=d.parentNode}var f=!0;return Go.walkRange(n,(function(t){f&&(e.acceptNode(u,t.nodeName)||(f=!1))})),f?dt:st}}])}(gt);function Vl(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Hl()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Hl(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Hl=function(){return!!e})()}var zl=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Vl(this,t,arguments),Object.defineProperty(e,"attrName",{enumerable:!0,configurable:!0,writable:!0,value:""}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){var t=e.getSelection();if(wi.isInCard(t)||wi.isInHole(t))return pt.UNAVAILABLE;if(1===t.rangeCount&&t.isCollapsed&&wr.closestInlineAttrs(t.firstRange.start)[this.attrName])return pt.EXECUTED;var n=wl.getAttrValue(e,this._formatSelection(e,t),this.attrName,!1);return n.length>1?pt.UNKNOWN:1===n.length&&n[0]?pt.EXECUTED:pt.NOT_EXECUTED}},{key:"getValue",value:function(e,t){var n=e.getSelection();return!(1!==n.rangeCount||!n.isCollapsed||!wr.closestInlineAttrs(n.firstRange.start)[this.attrName])||wl.getAttrValue(e,this._formatSelection(e,e.getSelection()),this.attrName,!1,t)}},{key:"execute",value:function(e,t){var n=e.newJob(),r=n.getSelection();if(this.getState(n)===pt.UNAVAILABLE)return e.cancelJob(n),!1;if(r.collapsed&&r.firstRange.start.node.isRootNode()&&r.firstRange.start.isAtEnd){var o=n.createElement(n.defaultElementName);n.appendChild(r.firstRange.start.node,o),r=n.newSelection([n.newRange(n.newPosition(o,0))])}else r=this._formatSelection(n,r);return r=wl.getAttrValue(n,r,this.attrName,!0,t)[0]?wi.removeAttribute(n,r,this.attrName,t):wi.setAttribute(n,r,this.attrName,!0,t),n.setSelection(r),e.commitJob(n),!0}},{key:"_formatSelection",value:function(e,t){if(t.rangeCount>1)return t;var n=t.ranges.map((function(t){return Go.shrinkRange(e,t,!0)}));return t.cloneByRange(n)}}])}(gt);function Wl(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,ql()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function ql(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ql=function(){return!!e})()}var $l=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Wl(this,t,arguments),Object.defineProperty(e,"attrName",{enumerable:!0,configurable:!0,writable:!0,value:"none"}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){var t=e.getSelection();if(wi.isInCard(t)||wi.isInHole(t))return st;var n=wl.getAttrValue(e,this._formatSelection(t),this.attrName,!1);return n.length>1?pt.UNKNOWN:1===n.length&&n[0]?pt.EXECUTED:pt.NOT_EXECUTED}},{key:"getValue",value:function(e){var t,n,r=e.getSelection();if(wi.isInCard(r))return(null===(n=null===(t=r.firstRange.commonAncestorContainer)||void 0===t?void 0:t.attrs)||void 0===n?void 0:n[this.attrName])||null;r=this._formatSelection(r);var o=wl.getAttrValue(e,r,this.attrName,!1);if(1===o.length&&o[0])return o[0];if(o.length>1)return o[0];if(r.isCollapsed){var i=wr.closestInlineAttrs(r.firstRange.start);return(null==i?void 0:i[this.attrName])||null}return null}},{key:"execute",value:function(e,t,n){var r=e.newJob(),o=r.getSelection();if(this.getState(r)===pt.UNAVAILABLE)return e.cancelJob(r),!1;if(o.collapsed&&o.firstRange.start.node.isRootNode()&&o.firstRange.start.isAtEnd){var i=r.createElement(r.defaultElementName);r.appendChild(o.firstRange.start.node,i),o=r.newSelection([r.newRange(r.newPosition(i,0))])}var a;return a=t?wi.setAttribute(r,this._formatSelection(o),this.attrName,t,n):wi.removeAttribute(r,this._formatSelection(o),this.attrName,n),r.setSelection(a),e.commitJob(r),!0}},{key:"_formatSelection",value:function(e){return e.isCollapsed?e:wi.shrinkToElement(e)}}])}(gt);const Kl=fl;var Yl=o(1845),Gl=o.n(Yl);function Jl(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Xl()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Xl(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Xl=function(){return!!e})()}function Ql(e,t){return t=Math.pow(10,t),Math.round(e*t)/t}function Zl(e){return Ql(Math.max(0,Math.min(1,e)),3)}var eu=function(){function e(t,n,r){(0,Ke.A)(this,e),Object.defineProperty(this,"r",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"g",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"b",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rgbHEX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.r=t,this.g=n,this.b=r}return(0,$e.A)(e,[{key:"getRelativeLuminance",value:function(){return Ql(.2126*e._relativeLuminanceForComponent(this.r)+.7152*e._relativeLuminanceForComponent(this.g)+.0722*e._relativeLuminanceForComponent(this.b),4)}},{key:"_toTwoHex",value:function(e){var t=e.toString(16);return 2===t.length?t:"0"+t}},{key:"toRGBHex",value:function(){return this._rgbHEX||(this._rgbHEX="#".concat(this._toTwoHex(this.r)).concat(this._toTwoHex(this.g)).concat(this._toTwoHex(this.b))),this._rgbHEX}},{key:"toHEX",value:function(){return this.toRGBHex()}},{key:"toCSSValue",value:function(){return this.toRGBHex()}}],[{key:"_relativeLuminanceForComponent",value:function(e){var t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}}])}(),tu=function(e){function t(e,n,r){var o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,Ke.A)(this,t),o=Jl(this,t,[e,n,r]),Object.defineProperty(o,"a",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_cssValue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),o.a=i,o}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"toHEX",value:function(){return Tr((0,Je.A)(t.prototype),"toHEX",this).call(this)+this._toTwoHex(Math.round(255*this.a))}},{key:"toCSSValue",value:function(){return this._cssValue||(this.a+this.b+this.r+this.g===0&&(this._cssValue="transparent"),1===this.a?this._cssValue=Tr((0,Je.A)(t.prototype),"toCSSValue",this).call(this):this._cssValue="rgba(".concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.a,")")),this._cssValue}}])}(eu),nu=function(){function e(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,Ke.A)(this,e),Object.defineProperty(this,"h",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"s",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"l",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"a",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.h=0|Math.max(Math.min(360,t),0),this.s=Zl(n),this.l=Zl(r),this.a=Zl(o)}return(0,$e.A)(e,[{key:"toRGBA",value:function(){return e.toRGBA(this)}},{key:"invert",value:function(){return new e(this.h,this.s,1-this.l,this.a)}},{key:"toCSSValue",value:function(){return this.toRGBA().toCSSValue()}}],[{key:"equals",value:function(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}},{key:"fromRGB",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=t.r/255,o=t.g/255,i=t.b/255,a=Math.max(r,o,i),l=Math.min(r,o,i),u=0,c=0,s=(l+a)/2,d=a-l;if(d>0){switch(c=Math.min(s<=.5?d/(2*s):d/(2-2*s),1),a){case r:u=(o-i)/d+(o<i?6:0);break;case o:u=(i-r)/d+2;break;case i:u=(r-o)/d+4}u*=60,u=Math.round(u)}return new e(u,c,s,n)}},{key:"fromRGBA",value:function(e){return this.fromRGB(e,e.a)}},{key:"_hue2rgb",value:function(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}},{key:"toRGBA",value:function(t){var n,r,o,i=t.h/360,a=t.s,l=t.l,u=t.a;if(0===a)n=r=o=l;else{var c=l<.5?l*(1+a):l+a-l*a,s=2*l-c;n=e._hue2rgb(s,c,i+1/3),r=e._hue2rgb(s,c,i),o=e._hue2rgb(s,c,i-1/3)}return new tu(Math.round(255*n),Math.round(255*r),Math.round(255*o),u)}}])}(),ru=function(){function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_rgba",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_hsla",{enumerable:!0,configurable:!0,writable:!0,value:null}),t instanceof eu?this._rgba=t:this._hsla=t}return(0,$e.A)(e,[{key:"rgba",get:function(){return this._rgba||(bt(this._hsla,"framework/utils/src/color/color.ts:251"),this._rgba=this._hsla.toRGBA()),this._rgba}},{key:"hsla",get:function(){return this._hsla||(bt(this._rgba,"framework/utils/src/color/color.ts:259"),this._hsla=nu.fromRGBA(this._rgba)),this._hsla}},{key:"a",get:function(){var e,t;return(null===(e=this._hsla)||void 0===e?void 0:e.a)||(null===(t=this._rgba)||void 0===t?void 0:t.a)||1}},{key:"r",get:function(){return this.rgba.r}},{key:"g",get:function(){return this.rgba.g}},{key:"b",get:function(){return this.rgba.b}},{key:"h",get:function(){return this.hsla.h}},{key:"s",get:function(){return this.hsla.s}},{key:"l",get:function(){return this.hsla.l}},{key:"toCSSValue",value:function(){return this.rgba.toCSSValue()}},{key:"lighten",value:function(t){return new e(new nu(this.h,this.s,this.l+this.l*t,this.a))}},{key:"darken",value:function(t){return new e(new nu(this.h,this.s,this.l-this.l*t,this.a))}},{key:"transparent",value:function(t){var n=this.rgba,r=n.r,o=n.g,i=n.b,a=n.a;return new e(new tu(r,o,i,a*t))}},{key:"invert",value:function(){return new e(this.hsla.invert())}},{key:"isTransparent",value:function(){return 0===this.a}},{key:"isOpaque",value:function(){return 1===this.a}},{key:"blend",value:function(t){var n=t.rgba,r=this.rgba.a,o=n.a,i=r+o*(1-r);if(i<1e-6)return e.transparent;var a=this.rgba.r*r/i+n.r*o*(1-r)/i,l=this.rgba.g*r/i+n.g*o*(1-r)/i,u=this.rgba.b*r/i+n.b*o*(1-r)/i;return new e(new tu(a,l,u,i))}},{key:"getRelativeLuminance",value:function(){return this.rgba.getRelativeLuminance()}},{key:"isLighterThan",value:function(e){return this.getRelativeLuminance()>e.getRelativeLuminance()}},{key:"isDarkerThan",value:function(e){return this.getRelativeLuminance()<e.getRelativeLuminance()}}],[{key:"from",value:function(t){return t?new e(t):null}}])}();Object.defineProperty(ru,"transparent",{enumerable:!0,configurable:!0,writable:!0,value:new ru(new tu(0,0,0,0))}),Object.defineProperty(ru,"white",{enumerable:!0,configurable:!0,writable:!0,value:new ru(new tu(255,255,255,1))}),Object.defineProperty(ru,"colorMap",{enumerable:!0,configurable:!0,writable:!0,value:{transparent:ru.transparent,white:ru.white}});var ou,iu={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},au=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"fromHex",value:function(e){var t=e.length;if(![4,7,9].includes(t))return null;if(35!==e.charCodeAt(0))return null;if(4===t){var n=16*lu(e.charCodeAt(1))+lu(e.charCodeAt(1)),r=16*lu(e.charCodeAt(2))+lu(e.charCodeAt(2)),o=16*lu(e.charCodeAt(3))+lu(e.charCodeAt(3));return new tu(n,r,o)}if(7===t){var i=16*lu(e.charCodeAt(1))+lu(e.charCodeAt(2)),a=16*lu(e.charCodeAt(3))+lu(e.charCodeAt(4)),l=16*lu(e.charCodeAt(5))+lu(e.charCodeAt(6));return new tu(i,a,l)}if(9===t){var u=16*lu(e.charCodeAt(1))+lu(e.charCodeAt(2)),c=16*lu(e.charCodeAt(3))+lu(e.charCodeAt(4)),s=16*lu(e.charCodeAt(5))+lu(e.charCodeAt(6)),d=Number.parseInt(e.slice(-2),16)/255;return new tu(u,c,s,d)}return null}},{key:"fromRGBA",value:function(e){if(!(e=e.trim().toLowerCase()).startsWith("rgba(")&&!e.endsWith(")"))return null;var t=(e=e.replace(/^rgba\(|\)$/g,"")).split(/,/g);if(4!==t.length)return null;try{var n=parseInt(t[0].trim(),10),r=parseInt(t[1].trim(),10),o=parseInt(t[2].trim(),10),i=parseFloat(t[3].trim());return new tu(n,r,o,i)}catch(e){return null}}},{key:"fromRGB",value:function(e){if(!(e=e.trim().toLowerCase()).startsWith("rgb(")&&!e.endsWith(")"))return null;var t=(e=e.replace(/^rgb\(|\)$/g,"")).split(/,/g);if(3!==t.length)return null;try{var n=parseInt(t[0].trim(),10),r=parseInt(t[1].trim(),10),o=parseInt(t[2].trim(),10);return new tu(n,r,o)}catch(e){return null}}},{key:"fromHSL",value:function(e){if(!(e=e.trim().toLowerCase()).startsWith("hsl(")&&!e.endsWith(")"))return null;var t=(e=e.replace(/^hsl\(|\)$/g,"")).split(/,/g);if(3!==t.length)return null;try{var n=parseInt(t[0].trim(),10),r=parseInt(t[1].trim(),10),o=parseInt(t[2].trim(),10);return new nu(n%360,r/100,o/100,1)}catch(e){return null}}},{key:"fromHSLA",value:function(e){if(!(e=e.trim().toLowerCase()).startsWith("hsla(")&&!e.endsWith(")"))return null;var t=(e=e.replace(/^hsla\(|\)$/g,"")).split(/,/g);if(4!==t.length)return null;try{var n=parseInt(t[0].trim(),10),r=parseInt(t[1].trim(),10),o=parseInt(t[2].trim(),10),i=parseFloat(t[3].trim());return new nu(n%360,r/100,o/100,i)}catch(e){return null}}},{key:"parse",value:function(e){return e=e.toLowerCase(),iu[e]?ru.from(this.fromHex(iu[e])):ru.colorMap[e]?ru.colorMap[e]:e.startsWith("#")?ru.from(this.fromHex(e)):e.startsWith("rgba")?ru.from(this.fromRGBA(e)):e.startsWith("hsla")?ru.from(this.fromHSLA(e)):e.startsWith("rgb")?ru.from(this.fromRGB(e)):e.startsWith("hsl")?ru.from(this.fromHSL(e)):null}}])}();function lu(e){switch(e){case 48:default:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:case 65:return 10;case 98:case 66:return 11;case 99:case 67:return 12;case 100:case 68:return 13;case 101:case 69:return 14;case 102:case 70:return 15}}!function(e){e.DARK="dark",e.LIGHT="light"}(ou||(ou={}));var uu={"editor.background":{light:"#fff",dark:"#000"},"editor.background.primary":{light:"#fff",dark:"#141414"},"editor.background.primary.hover":{light:"#EFF0F0",dark:"rgba(255, 255, 255, 0.12)"},"editor.background.primary.hover.light":{light:"#E7E9E8",dark:"#333333"},"editor.background.secondary":{light:"#FAFAFA",dark:"#1F1F1F"},"editor.background.tertiary":{light:"#F4F5F5",dark:"rgba(255, 255, 255, 0.04)"},"editor.overlay.background.tertiary":{light:"#F4F5F5",dark:"#1F1F1F"},"editor.background.foreground":{light:"#fff",dark:"#1f1f1f"},"editor.border.primary":{light:"#E7E9E8",dark:"rgba(255, 255, 255, 0.12)"},"editor.border.secondary":{light:"#D8DAD9",dark:"#424242"},"editor.border.light":{light:"rgba(0, 0, 0, 0.04)",dark:"rgba(255, 255, 255, 0.08)"},"editor.code.background":{light:"#0000000f",dark:"#ffffff14"},"editor.table.scrollbar.thumb":{light:"#00000033",dark:"#FFFFFF33"},"editor.card.border.hover":{light:"#81BBF8",dark:"#253C56"},"editor.card.border.selected":{light:"#2F8EF4",dark:"#1D4672"},"editor.table.bar.active":{light:"#2F8EF4CC",dark:"#2B6BB1CC"},"editor.text.link":{light:"#117CEE",dark:"#3B82CE"},"editor.text.link.hover":{light:"#5FA8F6",dark:"#245A94"},"editor.column.background.highlight":{light:"#D9EAFC7F",dark:"#1930487F"},"editor.card.background.hover":{light:"#5FA8F633",dark:"#245A9433"},"editor.background.focus":{light:"#D9EAFC",dark:"#193048"},"editor.text.color":{light:"#262626",dark:"#E2E2E2"},"editor.text.body":{light:"#585A5A",dark:"#B3B3B3"},"editor.text.caption":{light:"#8A8F8D",dark:"#848484"},"editor.icon.primary":{light:"#000",dark:"#fff"},"editor.icon.secondary":{light:"#585A5A",dark:"#B3B3B3"},"editor.text.disable":{light:"#BEC0BF",dark:"#505050"},"editor.table.bar.danger":{light:"#E4495B5A",dark:"#B625365A"},"editor.text.danger.light":{light:"#EA7583",dark:"#981F2D"},"editor.text.danger":{light:"#DF2A3F",dark:"#CA3F4F"},"editor.color.theme":{light:"#00B96B",dark:"#2ED790"},"editor.color.theme.light":{light:"#0BD07D",dark:"#29AD76"},"editor.cursor":{light:"#009456",dark:"#6BD1A6"},"editor.selection":{light:"rgba(27, 162, 227, 0.2)",dark:"rgba(27, 162, 227, 0.2)"},"editor.color.black":{light:"#000",dark:"#fff"},"editor.color.black.f05":{light:"rgba(0,0,0,0.05)",dark:"rgba(255,255,255,0.05)"},"editor.color.black.f08":{light:"rgba(0,0,0,0.08)",dark:"rgba(255,255,255,0.08)"},"editor.color.black.f12":{light:"rgba(0,0,0,0.12)",dark:"rgba(255,255,255,0.12)"},"editor.color.black.f30":{light:"rgba(0,0,0,0.30)",dark:"rgba(255,255,255,0.30)"},"editor.color.black.f65":{light:"rgba(0,0,0,0.65)",dark:"rgba(255,255,255,0.65)"},"editor.color.blue1":{light:"#D9EAFC",dark:"#193048"},"editor.color.blue8":{light:"#074A92",dark:"#8DB5E2"},"editor.color.blue9":{light:"#00346B",dark:"#B5D0ED"},"editor.color.peaGreen1":{light:"#E8F7CF",dark:"#242F14"},"editor.color.peaGreen8":{light:"#406105",dark:"#C2DF90"},"editor.color.peaGreen9":{light:"#2A4200",dark:"#D5E1C1"},"editor.color.red1":{light:"#FBE4E7",dark:"#402125"},"editor.color.red9":{light:"#70000D",dark:"#E6BCC1"},"editor.color.white":{light:"#fff",dark:"#000"},"editor.color.white.f60":{light:"rgba(255,255,255,0.6)",dark:"rgba(0,0,0,0.6)"},"editor.color.white.f90":{light:"rgba(255,255,255,0.9)",dark:"rgba(0,0,0,0.9)"},"editor.color.yellow5":{light:"#F3BB2F",dark:"#C29219"}};function cu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var su=function(){function e(){(0,Ke.A)(this,e),Object.defineProperty(this,"colorMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"lightToDark",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"darkToLight",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}return(0,$e.A)(e,[{key:"getColor",value:function(e){return this.colorMap.get(e)}},{key:"setColor",value:function(e,t){this.colorMap.set(e,t),t.light&&t.dark&&(this.lightToDark.set(t.light,t.dark),this.darkToLight.set(t.dark,t.light))}},{key:"registerColor",value:function(e,t){return this.setColor(e,t),this}},{key:"registerColors",value:function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var r=(0,tn.A)(n[t],2),o=r[0],i=r[1];this.setColor(o,i)}return this}},{key:"getIColorRegistry",value:function(){return this}},{key:"transform",value:function(e,t,n){var r=e||ou.LIGHT,o=t||ou.LIGHT;if(r===o)return n;if(r===ou.LIGHT&&o===ou.DARK&&this.lightToDark.has(n))return this.lightToDark.get(n);if(r===ou.DARK&&o===ou.LIGHT&&this.darkToLight.has(n))return this.darkToLight.get(n);var i=au.parse(n);return i?i.invert().toCSSValue():n}},{key:"clone",value:function(){var t=new e;return t.colorMap=new Map(this.colorMap),t}},{key:"getRefColoScheme",value:function(e){var t=this.colorMap.get(e);return(null==t?void 0:t.ref)?this.getRefColoScheme(t.ref):t||{light:"#fff",dark:"#000"}}},{key:"getProcessColorValue",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ou.LIGHT;if(e.ref&&!e.process)return"var(".concat(du(e.ref),")");var r=e.ref?this.getRefColoScheme(e.ref):e,o=r[n]||r[ou.LIGHT];if(o){var i=au.parse(o);return bt(i,"color parse error ".concat(o),"framework/infra/src/theme/color-registry.ts:104"),(null===(t=e.process)||void 0===t?void 0:t.call(e,i))||o}return null}},{key:"toStyleValues",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ou.LIGHT,r=[".",e,"{"],o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return cu(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cu(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(this.colorMap);try{for(o.s();!(t=o.n()).done;){var i=(0,tn.A)(t.value,2),a=i[0],l=i[1],u=this.getProcessColorValue(l,n);u&&r.push(du(a),":",u,";")}}catch(e){o.e(e)}finally{o.f()}return r.push("}"),r.join("")}}])}();function du(e){return"--lakex-".concat(e.replace(/\./g,"-"))}const fu=(new su).registerColors(uu).getIColorRegistry();var hu=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e),Object.defineProperty(this,"colorScheme",{enumerable:!0,configurable:!0,writable:!0,value:ou.LIGHT}),Object.defineProperty(this,"colorRegistry",{enumerable:!0,configurable:!0,writable:!0,value:fu}),Object.defineProperty(this,"selector",{enumerable:!0,configurable:!0,writable:!0,value:"lakex-default-theme"}),Object.defineProperty(this,"style",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("style")})}),[{key:"apply",value:function(e){this.style.innerText=this.colorRegistry.toStyleValues(this.selector,this.colorScheme),this.style.parentNode!==e&&(this.style.remove(),e.appendChild(this.style)),e.classList.contains(this.selector)||e.classList.add(this.selector)}},{key:"remove",value:function(e){this.style.parentNode&&this.style.remove(),e.classList.contains(this.selector)&&e.classList.remove(this.selector)}},{key:"getColor",value:function(e){var t;return(null===(t=this.colorRegistry.getColor(e))||void 0===t?void 0:t[this.colorScheme])||null}},{key:"transform",value:function(e,t,n){return fu.transform(e,t,n)}}])}();function pu(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,vu()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function vu(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vu=function(){return!!e})()}var mu=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=pu(this,t),Object.defineProperty(n,"domNode",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(n,"currentThemeSchema",{enumerable:!0,configurable:!0,writable:!0,value:new hu}),Object.defineProperty(n,"schemeMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(n,"selectorUsedDoms",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),n.schemeMap.set("default",n.currentThemeSchema),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"updateStyles",value:function(){this.currentThemeSchema.apply(this.domNode)}},{key:"removeCurrentTheme",value:function(){this.currentThemeSchema.remove(this.domNode)}},{key:"registerTheme",value:function(e,t){bt(!this.schemeMap.get(e),"the theme schema named ".concat(e," has already register"),"framework/infra/src/theme/index.ts:43"),this.schemeMap.set(e,t)}},{key:"setActiveTheme",value:function(e){var t=this,n=this.schemeMap.get(e);n&&this.currentThemeSchema!==n&&(this.currentThemeSchema&&this.removeCurrentTheme(),this.selectorUsedDoms.forEach((function(e){e.classList.remove(t.currentThemeSchema.selector),e.classList.add(n.selector)})),this.currentThemeSchema=n,this.updateStyles(),this.emit("themeChange"))}},{key:"bindThemeSelector",value:function(e){var t=this;return this.selectorUsedDoms.has(e)?(console.error("已经对该元素绑定过主题选择器"),function(){}):(this.selectorUsedDoms.add(e),this.currentThemeSchema&&e.classList.add(this.currentThemeSchema.selector),function(){t.selectorUsedDoms.delete(e)})}},{key:"isDark",value:function(){return this.currentThemeSchema.colorScheme===ou.DARK}},{key:"getColorByToken",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#fff";return this.currentThemeSchema.getColor(e)||t}},{key:"transform",value:function(e,t,n){return this.currentThemeSchema.transform(e,t,n)}},{key:"toPersistentValue",value:function(e){return e&&this.transform(this.currentThemeSchema.colorScheme,null,e)||e}},{key:"toVisualValue",value:function(e){return e&&this.transform(null,this.currentThemeSchema.colorScheme,e)||e}},{key:"getSchemeName",value:function(){return this.isDark()?"dark":"light"}},{key:"getThemeSelector",value:function(){return this.currentThemeSchema.selector}}])}(ot);Object.defineProperty(mu,"colorRegistry",{enumerable:!0,configurable:!0,writable:!0,value:fu});var gu=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"getState",value:function(){}},{key:"getValue",value:function(){}},{key:"isEnabled",value:function(){return!0}},{key:"execute",value:function(){}},{key:"destroy",value:function(){}}])}();function bu(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,yu()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function yu(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(yu=function(){return!!e})()}var wu=function(e){function t(){var e;return(0,Ke.A)(this,t),e=bu(this,t,arguments),Object.defineProperty(e,"_$commandUnderlay",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_$commands",{enumerable:!0,configurable:!0,writable:!0,value:{}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){var e=this;this.removeAllListeners(),Object.keys(this._$commands).forEach((function(t){var n=e._$commands[t];null==n||n.destroy()}))}},{key:"registerCommand",value:function(e,t){var n=this,r={};"string"==typeof e?r[e]=t:r=e,Object.keys(r).forEach((function(e){var t=r[e];bt(t instanceof gu,"framework/public/src/command-interceptor.ts:41"),["undo","redo"].includes(e)||bt(!n._$commands[e],"duplicate command name ".concat(e),"framework/public/src/command-interceptor.ts:44"),n._$commands[e]=t}))}},{key:"execCommand",value:function(e){for(var t,n,r,o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];return this._$commands[e]?(r=this._$commands[e]).execute.apply(r,i):null===(n=this._$commandUnderlay)||void 0===n?void 0:(t=n).execCommand.apply(t,[e].concat(i))}},{key:"queryCommandState",value:function(e){for(var t,n,r,o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];return this._$commands[e]?(r=this._$commands[e]).getState.apply(r,i):null===(n=this._$commandUnderlay)||void 0===n?void 0:(t=n).queryCommandState.apply(t,[e].concat(i))}},{key:"queryCommandSupported",value:function(e){var t,n;if(this._$commands[e])return!0;for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return!!(null===(n=this._$commandUnderlay)||void 0===n?void 0:(t=n).queryCommandSupported.apply(t,[e].concat(o)))}},{key:"queryCommandEnabled",value:function(e){var t,n;if(this._$commands[e])return this._$commands[e].isEnabled();for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return!!(null===(n=this._$commandUnderlay)||void 0===n?void 0:(t=n).queryCommandEnabled.apply(t,[e].concat(o)))}},{key:"queryCommandValue",value:function(e){for(var t,n,r,o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];return this._$commands[e]?(r=this._$commands[e]).getValue.apply(r,i):null===(n=this._$commandUnderlay)||void 0===n?void 0:(t=n).queryCommandValue.apply(t,[e].concat(i))}}])}(Ma),Au=o(6063),ku=o.n(Au),_u=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e),Object.defineProperty(this,"editor",{enumerable:!0,configurable:!0,writable:!0,value:null})}),[{key:"openLink",value:function(e,t){}},{key:"openMentionLink",value:function(e,t){}},{key:"openLocalLink",value:function(e){}},{key:"openYuqueDocLink",value:function(e){}},{key:"openLocalYuqueDocLink",value:function(e){}},{key:"openBookmarkLink",value:function(e){}},{key:"openThirdpartyLink",value:function(e){}},{key:"previewImgs",value:function(e,t){}},{key:"longPressCard",value:function(e){}},{key:"_init",value:function(e){var t=this;this.editor=e,this.editor.on("visitLink",(function(e,n){t.openLink(e,n)})).on("visitLocalLink",(function(e){t.openLocalLink(e)})).on("openYuqueDocLink",(function(e){t.openYuqueDocLink(e)})).on("openLocalYuqueDocLink",(function(e){t.openLocalYuqueDocLink(e)})).on("openBookmarkLink",(function(e){t.openBookmarkLink(e)})).on("openThirdpartyLink",(function(e){t.openThirdpartyLink(e)})).on("openMentionLink",(function(e,n){t.openMentionLink(e,n)})).on("previewImgs",(function(e,n){t.previewImgs(e,n)})).on("longPressCard",(function(e){t.longPressCard(e)}))}}])}();function Cu(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Nu()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Nu(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Nu=function(){return!!e})()}var Ou=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=Cu(this,t),Object.defineProperty(n,"target",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"openLink",value:function(e,t){var n,r;null===(r=(n=this.target).openLink)||void 0===r||r.call(n,e,t)}},{key:"openLocalLink",value:function(e){var t,n;null===(n=(t=this.target).openLocalLink)||void 0===n||n.call(t,e)}},{key:"openYuqueDocLink",value:function(e){var t,n;null===(n=(t=this.target).openYuqueDocLink)||void 0===n||n.call(t,e)}},{key:"openLocalYuqueDocLink",value:function(e){var t,n;null===(n=(t=this.target).openLocalYuqueDocLink)||void 0===n||n.call(t,e)}},{key:"openMentionLink",value:function(e,t){var n,r;null===(r=(n=this.target).openMentionLink)||void 0===r||r.call(n,e,t)}},{key:"openBookmarkLink",value:function(e){var t,n;null===(n=(t=this.target).openBookmarkLink)||void 0===n||n.call(t,e)}},{key:"openThirdpartyLink",value:function(e){var t,n;null===(n=(t=this.target).openThirdpartyLink)||void 0===n||n.call(t,e)}},{key:"previewImgs",value:function(e,t){var n,r;null===(r=(n=this.target).previewImgs)||void 0===r||r.call(n,e,t)}},{key:"longPressCard",value:function(e){var t,n;null===(n=(t=this.target).longPressCard)||void 0===n||n.call(t,e)}}])}(_u),xu={scene:null,themeManager:null,disabledPlugins:[],header:null,envAdapter:null,hideVipIcon:!1},Eu=function(){return(0,$e.A)((function e(t,n){(0,Ke.A)(this,e),Object.defineProperty(this,"editor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.editor=t,!n.envAdapter||n.envAdapter instanceof _u||(n.envAdapter=new Ou(n.envAdapter)),this._option=Object.assign(Object.assign(Object.assign({},xu),n),{scrollNode:n.scrollNode||document.scrollingElement||document.body,envAdapter:n.envAdapter||new _u}),bt(this._option.envAdapter instanceof _u,"framework/editor/src/editor-option.ts:53")}),[{key:"disabledPlugins",get:function(){return this._option.disabledPlugins.slice()}},{key:"currentURL",get:function(){return this.editor.engine.option.currentURL}},{key:"generateCardLink",get:function(){return this._option.generateCardLink}},{key:"envAdapter",get:function(){return this._option.envAdapter}},{key:"header",get:function(){return this._option.header}},{key:"scene",get:function(){return this._option.scene}},{key:"env",get:function(){return this._option.env}},{key:"themeManager",get:function(){return this._option.themeManager}},{key:"hideVipIcon",get:function(){return!!this._option.hideVipIcon}},{key:"showHeadingIcon",get:function(){return!!this._option.showHeadingIcon}},{key:"innerOverlayContainer",get:function(){return this._option.innerOverlayContainer}},{key:"getEditWrapRect",get:function(){return this._option.getEditWrapRect}},{key:"getOption",value:function(e){return this._option[e]}},{key:"extend",value:function(e){var t=e.OptionName;bt(t&&!this[t],"framework/editor/src/editor-option.ts:112"),this[t]=new e(ku()(this._option,t))}},{key:"getScrollNode",value:function(){return"function"==typeof this._option.scrollNode?this._option.scrollNode():this._option.scrollNode}}])}(),Du=function(){function e(t,n){(0,Ke.A)(this,e),Object.defineProperty(this,"ps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ps=t,this.config=n}return(0,$e.A)(e,[{key:"hoverEvent",get:function(){return e.createEvent("hoverEvent",this)}},{key:"leaveEvent",get:function(){return e.createEvent("leaveEvent",this)}},{key:"moveEvent",get:function(){return e.createEvent("moveEvent",this)}},{key:"destroy",value:function(){this.ps.deleteArea(this.config)}}],[{key:"createEvent",value:function(e,t){return{on:function(n){return t.ps[e].on(t.config,n)},off:function(n){return t.ps[e].off(t.config,n)}}}}])}(),Pu=o(7683),Ru=o.n(Pu),Su=o(1739),Tu=o.n(Su);function ju(e){return function(e){return"x"in e&&"y"in e&&"width"in e&&"height"in e&&e||void 0}(e)?"pixelRect":function(e){return"domNode"in e&&e||void 0}(e)?"domNode":void 0}var Iu=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function Bu(e){if("pixelRect"===ju(e))return e;var t=e.padding,n=void 0===t?0:t,r=Iu(e,["padding"]);return"function"==typeof n?Object.assign(Object.assign({},r),{getPadding:n}):Object.assign(Object.assign({},r),Fu(n))}function Mu(e){var t;return"getPadding"in e?t=Fu(e.getPadding()):(e.domNode,t=Iu(e,["domNode"])),t}function Fu(e){return"number"==typeof e?{leftPadding:e,rightPadding:e,topPadding:e,bottomPadding:e}:Array.isArray(e)&&2===e.length?{topPadding:e[0],bottomPadding:e[0],leftPadding:e[1],rightPadding:e[1]}:Array.isArray(e)&&4===e.length?{topPadding:e[0],rightPadding:e[1],bottomPadding:e[2],leftPadding:e[3]}:{topPadding:0,bottomPadding:0,leftPadding:0,rightPadding:0}}var Lu=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"areaConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"originAreaConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hovered",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.originAreaConfig=t,this.areaConfig=Bu(t),this.type=ju(t)}),[{key:"hover",value:function(){return this.hovered=!0,!0}},{key:"leave",value:function(){return this.hovered=!1,!0}},{key:"isSame",value:function(e){return Ru()(this.areaConfig,Bu(e),(function(e,t){if(Tu()(e)&&Tu()(t))return e.toString()===t.toString()}))}}])}();function Uu(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Vu(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vu(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function Vu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Hu=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"ps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cbMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),this.ps=t}),[{key:"getMapItem",value:function(e){var t=this.ps.getInternalArea(e);if(t)return[t,this.cbMap.get(t)]}},{key:"on",value:function(e,t){var n=this,r=this.getMapItem(e);if(null==r?void 0:r[1])r[1].push(t);else{var o=this.ps.registerArea(e);o&&this.cbMap.set(o,[t])}return function(){return n.off(e,t)}}},{key:"emit",value:function(e,t){var n,r=this.getMapItem(e);if(!(null===(n=null==r?void 0:r[1])||void 0===n?void 0:n.length))return!1;var o,i=Uu(r[1]);try{for(i.s();!(o=i.n()).done;)o.value.call(null,t)}catch(e){i.e(e)}finally{i.f()}return this}},{key:"off",value:function(e,t){var n,r=this.getMapItem(e);if(!(null===(n=null==r?void 0:r[1])||void 0===n?void 0:n.length))return!1;var o,i=[],a=Uu(r[1]);try{for(a.s();!(o=a.n()).done;){var l=o.value;t!==l&&i.push(l)}}catch(e){a.e(e)}finally{a.f()}return i.length?(this.cbMap.set(r[0],i),!0):this.removeAllListeners(e)}},{key:"removeAllListeners",value:function(e){var t,n=this.getMapItem(e);return!!(null===(t=null==n?void 0:n[1])||void 0===t?void 0:t.length)&&(this.cbMap.delete(n[0]),!0)}},{key:"destroy",value:function(){this.cbMap=new Map}}])}();function zu(e,t,n){var r,o=Mu(n),i=o.leftPadding,a=o.rightPadding,l=o.bottomPadding,u=o.topPadding,c=n.domNode;return"getBoundingClientRect"in c&&(r=c.getBoundingClientRect()),!!r&&Wu(e,t,{x:r.x-i,y:r.y-u,width:r.width+a+i,height:r.height+l+u})}function Wu(e,t,n){return e>n.x&&e<=n.x+n.width&&t>n.y&&t<=n.height+n.y}function qu(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return $u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function $u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ku=function(){return(0,$e.A)((function e(){var t=this;(0,Ke.A)(this,e),Object.defineProperty(this,"pixelRectAreas",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"domNodeAreas",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"lastPos",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0}}),Object.defineProperty(this,"hoverEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"leaveEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"moveEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"moveRaf",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onPointerMove",{enumerable:!0,configurable:!0,writable:!0,value:function(e){Math.sqrt(Math.pow(Math.abs(e.clientX-t.lastPos.x),2)+Math.pow(Math.abs(e.clientY-t.lastPos.y),2))<5||(t.lastPos={x:e.clientX,y:e.clientY},t.moveRaf=requestAnimationFrame((function(){!function(e,t,n){var r,o=e.clientX,i=e.clientY,a=qu(n.entries());try{for(a.s();!(r=a.n()).done;){var l=(0,tn.A)(r.value,2),u=(l[0],l[1]),c={srcEvent:e,areaConfig:u.areaConfig,offsetX:o-u.areaConfig.x,offsetY:i-u.areaConfig.y,isInPadding:!1};Wu(o,i,u.areaConfig)?(u.hovered||(u.hover(),t.hoverEvent.emit(u.originAreaConfig,c)),t.moveEvent.emit(u.originAreaConfig,c)):u.hovered&&(u.leave(),t.leaveEvent.emit(u.originAreaConfig,c))}}catch(e){a.e(e)}finally{a.f()}}(e,t,t.pixelRectAreas),function(e,t,n){var r,o=e.clientX,i=e.clientY,a=qu(n);try{for(a.s();!(r=a.n()).done;){var l,u=(0,tn.A)(r.value,2),c=(u[0],qu(u[1]));try{for(c.s();!(l=c.n()).done;){var s=l.value,d=s.areaConfig.domNode.getBoundingClientRect(),f=Mu(s.areaConfig),h={srcEvent:e,areaConfig:s.areaConfig,offsetX:o-d.x+f.leftPadding,offsetY:i-d.y+f.topPadding,isInPadding:!1};zu(o,i,s.areaConfig)?((o<d.left||o>d.right||i<d.top||i>d.bottom)&&(h.isInPadding=!0),s.hovered||(s.hover(),t.hoverEvent.emit(s.originAreaConfig,h)),t.moveEvent.emit(s.originAreaConfig,h)):s.hovered&&(s.leave(),t.leaveEvent.emit(s.originAreaConfig,h))}}catch(e){c.e(e)}finally{c.f()}}}catch(e){a.e(e)}finally{a.f()}}(e,t,t.domNodeAreas)})))}}),this.hoverEvent=new Hu(this),this.leaveEvent=new Hu(this),this.moveEvent=new Hu(this),document.addEventListener("pointermove",this.onPointerMove)}),[{key:"addAreaToMap",value:function(e){switch(e.type){case"domNode":var t=this.domNodeAreas.get(e.areaConfig.domNode);return(null==t?void 0:t.length)?t.push(e):this.domNodeAreas.set(e.areaConfig.domNode,[e]),e;case"pixelRect":var n=e.areaConfig;return this.pixelRectAreas.set("".concat(n.x,"_").concat(n.y,"_").concat(n.width,"_").concat(n.height),e),e;default:return!1}}},{key:"removeAreaFromMap",value:function(e){switch(e.type){case"domNode":var t=this.domNodeAreas.get(e.areaConfig.domNode);return!!(null==t?void 0:t.length)&&(1===t.length?this.domNodeAreas.delete(e.areaConfig.domNode):this.domNodeAreas.set(e.areaConfig.domNode,t.filter((function(t){return t!==e}))),!0);case"pixelRect":var n=e.areaConfig;return this.pixelRectAreas.delete("".concat(n.x,"_").concat(n.y,"_").concat(n.width,"_").concat(n.height)),!0;default:return!1}}},{key:"getInternalArea",value:function(e){if("domNode"in e){var t=this.domNodeAreas.get(e.domNode);if(null==t?void 0:t.length)return t.find((function(t){return t.isSame(e)}))}if("width"in e)return this.pixelRectAreas.get("".concat(e.x,"_").concat(e.y,"_").concat(e.width,"_").concat(e.height))}},{key:"registerArea",value:function(e){var t=this.getInternalArea(e);if(t)return t;var n=new Lu(e);return this.addAreaToMap(n)}},{key:"deleteArea",value:function(e){var t;return!!(t=e instanceof Lu?e:this.getInternalArea(e))&&(this.hoverEvent.removeAllListeners(e),this.moveEvent.removeAllListeners(e),this.leaveEvent.removeAllListeners(e),this.removeAreaFromMap(t))}},{key:"destroy",value:function(){document.removeEventListener("pointermove",this.onPointerMove),this.moveRaf&&(cancelAnimationFrame(this.moveRaf),this.moveRaf=void 0),this.pixelRectAreas=new Map,this.domNodeAreas=new Map,this.hoverEvent.destroy(),this.moveEvent.destroy(),this.leaveEvent.destroy()}}])}(),Yu=o(4883),Gu=o.n(Yu);function Ju(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Xu()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Xu(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Xu=function(){return!!e})()}var Qu=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=Ju(this,t,[e]),Object.defineProperty(n,"_ref",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_props",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n._props=e.props,n._ref=Gu().createRef(),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"update",value:function(e){this._props=e,this.forceUpdate()}},{key:"getRef",value:function(){return this._ref}},{key:"render",value:function(){var e=this.props.Component;return Gu().createElement(e,Object.assign({},this._props,{ref:this._ref}))}}])}(Gu().Component);function Zu(e,t,n,r){return new Promise((function(o){requestAnimationFrame((function(){if(t instanceof Element){var i=function(e,t,n){var r=n.placement,o=n.offsetH,i=void 0===o?0:o,a=n.offsetV,l=void 0===a?0:a,u=0,c=0,s="";switch(r){case"left":c=e.left,u=e.top+e.height/2,s="translate(-100%, -50%)";break;case"leftTop":c=e.left,u=e.top,s="translate(-100%, 0)";break;case"leftBottom":c=e.left,u=e.bottom,s="translate(-100%, -100%)";break;case"right":c=e.right,u=e.top+e.height/2,s="translate(0, -50%)";break;case"rightTop":c=e.right,u=e.top,s="translate(0, 0)";break;case"rightBottom":c=e.right,u=e.bottom,s="translate(0, -100%)";break;case"top":c=e.left+e.width/2,u=e.top,s="translate(-50%, -100%)";break;case"topLeft":c=e.left,u=e.top,s="translate(0, -100%)";break;case"topRight":c=e.right,u=e.top,s="translate(-100%, -100%)";break;case"bottom":c=e.left+e.width/2,u=e.bottom,s="translate(-50%, 0)";break;case"bottomLeft":c=e.left,u=e.bottom,s="translate(0, 0)";break;case"bottomRight":c=e.left+e.width/2,u=e.bottom,s="translate(-100%, 0)"}return{left:c+i-t.left,top:u+l-t.top,transform:s}}(t.getBoundingClientRect(),r.getBoundingClientRect(),n);"function"==typeof n.onAlign&&n.onAlign([Number(e.style.left.slice(0,-2)),Number(e.style.top.slice(0,-2))],[i.left,i.top],e),e.style.cssText="position:absolute;top:".concat(i.top,"px;left:").concat(i.left,"px;transform:").concat(i.transform),o(e)}else e.style.cssText="position:absolute;top:".concat(0,"px;left:",0,"px")}))}))}var ec=function(){return(0,$e.A)((function e(t){var n=this;(0,Ke.A)(this,e),Object.defineProperty(this,"mountNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pos",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reactRef",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"layerDOM",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"componentRootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"compInstance",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onComponentMount",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n.compInstance=e,n.reactRef=null==e?void 0:e._ref;var t=Gl().findDOMNode(e);t instanceof HTMLElement&&(n.componentRootNode=t),n.pos&&"domNode"in n.pos&&n.componentRootNode&&Zu(n.componentRootNode,n.pos.domNode,n.pos,n.layerDOM),!n.pos||n.pos}});var r=t.pos,o=t.layerDOM,i=t.Component,a=t.props;this.mountNode=document.createElement("div"),this.pos=r,this.layerDOM=o,Gl().render(Gu().createElement(Qu,{Component:i,props:a,ref:this.onComponentMount}),this.mountNode),this.layerDOM.prepend(this.mountNode)}),[{key:"updatePos",value:function(e){var t;e&&(this.pos=e),this.componentRootNode&&this.pos&&("x"in this.pos||("domNode"in this.pos&&(t=this.pos.domNode),t&&Zu(this.componentRootNode,t,this.pos,this.layerDOM)))}},{key:"update",value:function(e){var t,n=e.props,r=e.pos;null===(t=this.compInstance)||void 0===t||t.update(n),this.updatePos(r)}},{key:"getReactRef",value:function(){var e;return null===(e=this.compInstance)||void 0===e?void 0:e.getRef()}},{key:"destroyUI",value:function(){Gl().unmountComponentAtNode(this.mountNode),this.mountNode.remove()}}])}();function tc(e,t){return{on:t[e].on,off:t[e].off}}var nc=function(){return(0,$e.A)((function e(t){var n;(0,Ke.A)(this,e),Object.defineProperty(this,"ps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"layerDOM",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ps=new Ku,this.layerDOM=document.createElement("div"),this.layerDOM.className="ne-editor-ui-sys",null===(n=t.editorWrapNode)||void 0===n||n.prepend(this.layerDOM)}),[{key:"hoverEvent",get:function(){return tc("hoverEvent",this.ps)}},{key:"leaveEvent",get:function(){return tc("leaveEvent",this.ps)}},{key:"moveEvent",get:function(){return tc("moveEvent",this.ps)}},{key:"createUI",value:function(e){return new ec({Component:e,props:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},pos:arguments.length>2?arguments[2]:void 0,layerDOM:this.layerDOM})}},{key:"createArea",value:function(e){return new Du(this.ps,e)}},{key:"destroy",value:function(){this.ps.destroy()}},{key:"destroyUI",value:function(e){e.destroyUI()}},{key:"destroyArea",value:function(e){this.ps.deleteArea(e)}}])}(),rc=o(1538),oc=o.n(rc),ic={CHANGE:"change"},ac=new it;const lc={"+7天":"Next Week",AI助手:"AI Assistant","Mac 办公套件":"Mac office suite","Office 文件":"Windows office suite","PDF 文件":"PDF",UML图:"UML","YYYY 年 M 月":"MMM YYYY",markdown语法转换失败:"markdown syntax convert error","{count} 票":"{count} Ticket","、":"、",三栏:"Three Col",上一个:"Prev",上传中:"Uploading",上传失败:"Upload error",上传文件:"Upload",上标:"Superscript",下一个:"Next",下划线:"Underline",下周:"Next Week",下标:"Subscript",下载:"Download","不支持嵌入协作链接，请替换为地址栏链接或分享链接":"Collaboration url is not supported, use url from address bar instead",不支持嵌入该链接:"Does not support embedding the link",两栏:"Tow Col",两端对齐:"Justify",书签:"Bookmark",五栏:"Five Col",人:"people",人已投票:"people have voted",今天:"Today",从第:"Since",代码主题:"Theme",代码块:"Code block",代码语言:"Language",任务列表:"To-Do list",优酷:"Youku",使用分栏组织页面:"Use columns to organize the page",使用日历添加日程:"Add a calendar schedule",保存:"Save",保存文档:"Save draft",信息提示框:"Information",修改样式:"Modify style",全宽展示:"Adaptive width display",全屏:"Maximize",全屏编辑:"Maximize",全选:"Select All",全部替换:"Repalce all",公式:"Formula",六栏:"Six Col",关闭:"Close",内容:"content",内容加载中:"Content loading","内容已变更，无法插入 Markdown 内容":"The content has been changed, the markdown content cannot be inserted",内部三方工具:"Internal tools",减少缩进:"Decrease indent",减少行高:"Decrease lineHeight",分割线:"Divider",分栏卡片:"Columns",列:"column(s)",列等宽:"Cols equal width",删除:"Delete",删除所选列:"Delete selected column(s)",删除所选行:"Delete selected row(s)",删除线:"Strike-through",删除表格:"Delete table",剪切:"Cut",单元格背景色:"cell background color",卡片:"Card",卡片缺失:"Card not found",危险提示框:"Dangerous",发起投票活动:"Start a poll",取消:"Cancel",取消自适应:"Cancel adaptive",取消链接:"Delete link",可折叠内容:"Collapsible content","可插入图形、连线和图片等":"Support graph、line、pic ...",可自定义链接标题:"Define the link title",右对齐:"Right align",合并单元格:"Merge cells",向上插入:"Insert above",向下插入:"Insert below",向右插入:"Insert right",向左插入:"Insert left",否:"No",告警提示框:"Warning",哔哩哔哩:"BiliBili",四栏:"Four Col",图片:"Image",图片上传失败:"Failed to upload the image, please retry",图片加载失败:"Network error, can't display image",图片格式已对所有图片生效:"Attributes applied to all images",在此输入内容:"Enter content here",垂直对齐:"Vertical Align",垂直居中:"Align middle",基础:"Basic",增加缩进:"Increase indent",增加行高:"Increase lineHeight",墨刀:"Mockingbot",复制:"Copy",复制代码:"Copy",复制失败:"Copied failed",复制成功:"Copied successfully",复制段落链接:"Copy paragraph link",复制链接:"Copy link",复制错误信息:"Copy error message",大纲:"Toc",如:"like",字体颜色:"Text color",字号减小:"Decrease fontsize",字号加大:"Increase fontsize",字号调整:"Font-size Adjust",宜搭:"Yida",对本文档的图片一键应用样式和边距:"Applied style and spacing to all images",对齐方式:"Align",小工具:"Tools",居中对齐:"Centre align",展开:"Unfold",嵌入本地文件:"Embed local files",嵌入页面:"Embed",左对齐:"Left align","已开启格式刷，按 Esc 退出":"Format Brush is turned on, press Esc to exit",已截止:"Ended",已投票:"Voted",布局和样式:"Layout and Style",底部对齐:"Align bottom",开启自适应:"Enable adaptive",开始:"Start",引用:"Quote",快捷键:"Shortcut",思维导图:"Mindmap",思维导图文件:"Mind map file",成功提示框:"Success",截止:"end",截止日期:"Deadline",打开文档:"Open in YuqueDesktop",打开菜单:"open menu","批量应用格式：":"Applied to all",投票:"Vote","投票中...":"voting ...",投票成功:"Vote success",折叠块:"Collapse",拆分单元格:"Split cells",拖拽:"reposition",换行:"Breakline",提交:"Submit",提及:"Mention",提及人:"mention user",提及人和内容:"Mention user or content",提及人或内容:"Mention user or content",提及某人:"Mention",插入分割线:"Visually divide blocks",插入卡片:"Insert Card",插入序号列到最左侧:"Insert numbering column at left",插入引用:"Quotation",插入引用格式:"Insert a quote block",插入日期:"Insert date",插入特色卡片:"Insert image, table, attachment, codeblock, etc.",插入表格:"Insert Table",插入链接:"Link",搜索结果:"Result",撤销:"Undo","支持 Axure, Photoshop, Sketch":"Supported Axure, Photoshop, Sketch","支持 Latex 语法":"Support LaTeX syntax","支持 MindManager, XMind, MindNode":"Supported MindManager, XMind, MindNode","支持 Office、PDF、Sketch 等":"Office, PDF, Sketch ...","支持 Pages, Numbers, Keynote":"Supported Pages, Numbers, Keynote","支持 Word, Excel, PPT":"Supported Word, Excel, PPT","支持PlantUML、Mermaid等":"Generate diagrams by code","支持pdf、ppt等多种格式":"Support pdf、ppt files",支持多种语言和主题切换:"Capture a code snippet","支持用例图、类图、时序图等":"Draw UML diagrams",收起:"Fold","文件上传失败，请重试":"Failed to upload the file, please retry",文本:"Text",文本绘图:"Text diagram",斜体:"Italic",新建节点:"New Node","无匹配内容，请重新输入":"No matching content, please re-enter",无匹配卡片:"No suitable card",无可用卡片:"No available cards",无序列表:"Bulleted list",无效链接:"Invalid link","无效音频，请重新上传":"Invalid audio, please re-upload",无标题:"No title",无标题折叠块:"Untitled collapse",日历:"Calendar",日期:"Date",明天:"Tomorrow",星期一:"Monday",星期三:"Wednesday",星期二:"Tuesday",星期五:"Friday",星期六:"Saturday",星期四:"Thursday",星期日:"Sunday",是:"Yes","是否需要做样式转换？":"Do need to do a style conversion?",显示边框:"Show border",暂不支持显示该网站内容:"No support for displaying the content of this website",暂无匹配的搜索结果:"No matching search results yet",更多:"More",更多文本样式:"More text styles",替换:"Replace",替换为:"Replace",最近使用:"Recently Used",有序列表:"Numbered list",未能插入内容:"Failed to insert content",未能获取内容:"Failed to get content",本地文件:"Local File",本地视频:"Local Video",本地音频:"Local audio",查找:"Find",查找替换:"Search & Replace",查看帮助:"Help",查看帮助文档:"Help",查看示例:"Example",查看结果:"View Results",查询失败:"Query failure","查询音频信息中...":"Querying audio information...",标宽展示:"Standard width display",标题:"Title",标题1:"Heading 1",标题2:"Heading 2",标题3:"Heading 3",标题4:"Heading 4",标题5:"Heading 5",标题6:"Heading 6","标题{headingNo}":"Heading {headingNo}",标题列:"Title column",标题序号:"Heading NO",标题行:"Title row",标题行列:"Table head",根据宽度等分列宽:"Split columns equally",格式刷:"Paint format","检测到粘贴内容符合 Markdown 语法，是否需要做样式转换？":"Do need to do style conversion detect that the pasted content conforms to Markdown syntax?",模板:"Template",正在移动1列分栏:"Moving 1 column","正在移动{count}列":"Moving {count} columns","正在移动{count}行":"Moving {count} rows","正在获取投票数据...":"fetching ...",正文:"Normal",正文与标题:"Heading and text","此处不支持播放音频，可点击文件名播放":"This does not support playback of audio, you can click on the file name to play","此处为语雀投票卡片，点击链接查看：":"Here is the yuque vote card, click on the link to view:",流程图:"Flowchart",浏览器访问:"Open in browser",淘宝视频:"TaoBao Video","添加 TeX 公式":"New equation",添加图片描述:"Insert caption",添加描述:"Add describe",添加日程标题:"Untitled",添加说明:"Add a description",添加选项:"Add",添加间距:"Add spacing",清除内容:"Clear",清除格式:"Clean formatting",渐变色:"Gradient",点击:"Click to ",状态:"Status",玫红色:"magenta",用于梳理信息和头脑风暴:"For ideas and brainstorm",用于绘制流程:"Illustrate flows and diagrams",用彩色背景来高亮提示:"Colorful text blocks","由于版权保护，不支持在公开文档中直接播放该音频，可点击文件名播放":"Due to copyright protection, the audio is not supported for direct playback in public documents, but can be played by clicking on the file name",画板:"Board",码上掘金:"JueJin Code",确定:"Ok","确定删除该选项？":"Are you sure you want to delete it?",确认:"Ok",程序员:"Programmer",立即转换:"Convert Now",第三方服务:"Third party Service",粗体:"Bold",粘贴:"Paste","粘贴页面链接到此处，支持：":"Paste page url here, support: ",素材库:"Material",紫色:"purple",红色:"red",纯文本粘贴:"Paste Text Only",结束:"End",继续编号:"Continue Count",绿色:"green",编辑链接:"Edit link",缩进宽度:"Indent Unit",缩进模式:"Indent Style",缩进调整:"Indent Adjust",网易云音乐:"163 Music",翻译:"Translate",背景颜色:"Highlight color",自动换行:"Auto Wrap",自动缩进:"Auto Indent",自动缩进成功:"Indent success",自定义:"Custom",自定义日期:"Custom date",自适应宽度:"Adaptive width",蓝色:"blue",虾米:"Xiami",行:"row(s)",行内代码:"Inline code",行号:"Line numbers",行起自动编号:"row fill number",行高调整:"Leading Adjust",表格:"Table",视频导入:"Video import",视频已损坏:"Video is damaged","视频无法播放，请稍后重试":"Video is damaged, please retry",解释代码:"解释代码",设置标签:"Set label",设置状态:"SET STATUS",设置编号:"Set numbering",设计文件:"Design files",访问链接:"Visit link",评论:"Add Comment","该卡片引入的链接无法访问：":"The link introduced by this card is not accessible:",该卡片暂时无法显示:"Card cannot be displayed",请刷新页面后再试:"Please refresh the page and try again",请输入:"Please input",请输入代码块名称:"Please input name",请输入投票标题:"Enter a title",请输入折叠卡片标题:"Please input title",请输入搜索内容:"Please input search",请输入正确的链接:"Please enter the correct link",请输入链接:"Does not support embedding the link",转为卡片:"Convert to card",转码失败:"Transcoding failure",软换行:"Soft Breakline",过程:"Process",返回文档:"Back to document",退出全屏:"Exit Maximize","选项 {no}":"Option {no}",配色方案:"Color Scheme",重做:"Redo",重新投票:"re-vote",重新编号:"Re-count",金数据:"JinShuJu",链接:"Link",链接地址:"Link address","链接解析失败，请重试":"Link parsing failed, please retry",长按:"Drag to ",阅读页可下载:"Download allowed",附件:"Attachment",隐藏边框:"Hide border","非法 TeX 公式":"Invalid equation",音频导入:"Import audio files",音频文件不能播放:"Audio files cannot be played",顶部对齐:"Align top",预览:"Preview",高亮块:"Highlighter",高亮提示框:"Tips",高德地图:"AMap",黄色:"yellow",默认:"Default"};var uc=function(){function e(){(0,Ke.A)(this,e)}return(0,$e.A)(e,null,[{key:"getLanguage",value:function(){return e._lang}},{key:"setEnLang",value:function(t){e.i18n=oc()({en:t,useEn:function(){return"enUS"===e._lang}}),this.enMap=t}},{key:"addEnLang",value:function(t){this.enMap=Object.assign(Object.assign({},this.enMap),t),e.i18n=oc()({en:this.enMap,useEn:function(){return"enUS"===e._lang}})}},{key:"setLanguage",value:function(t){e._lang="enUS"===t||"en-US"===t||"en"===t||"en-us"===t?"enUS":"zhCN",ac.emit(ic.CHANGE,e._lang)}}])}();Object.defineProperty(uc,"_lang",{enumerable:!0,configurable:!0,writable:!0,value:"zhCN"}),Object.defineProperty(uc,"i18n",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(uc,"enMap",{enumerable:!0,configurable:!0,writable:!0,value:{}}),uc.setLanguage(function(){var e="zh-cn";if("undefined"!=typeof window&&"undefined"!=typeof document){var t=window.location.search,n=new URLSearchParams(t).get("language");if(n)return n;var r=document.cookie.match(/(?:^|; ?)lang=([^;]+)(?:;|$)/);return r?r[1]:e}return e}()),uc.setEnLang(lc);const cc=uc;var sc=function(e,t){return uc.i18n?uc.i18n(e,t):e},dc=document.createElement("div");function fc(e){dc.innerHTML=e;var t=dc.childNodes.length;return bt(t>0,"framework/utils/src/dom/template.ts:10"),1===t?dc.childNodes[0]:Array.from(dc.childNodes)}function hc(){var e,t=document.createElement("div");t.style.cssText="width: 100px; height: 10px; position: fixed; top: -9999999px; left: -9999999px; overflow: scroll;",t.innerHTML="<div></div>",document.body.appendChild(t);var n=100!==(null===(e=t.firstElementChild)||void 0===e?void 0:e.getBoundingClientRect().width);return t.remove(),n}function pc(e,t,n,r){for(var o=arguments.length,i=new Array(o>4?o-4:0),a=4;a<o;a++)i[a-4]=arguments[a];bt("function"==typeof e.destroy,"framework/utils/src/dom/event/bind-dom-event.ts:59"),bt("function"==typeof t.addEventListener||Array.isArray(t)&&t.every((function(e){return"function"==typeof e.addEventListener})),"framework/utils/src/dom/event/bind-dom-event.ts:60");var l=e.destroy;Array.isArray(t)?t.forEach((function(e){return e.addEventListener.apply(e,[n,r].concat(i))})):t.addEventListener.apply(t,[n,r].concat(i)),e.destroy=function(){for(var o=arguments.length,a=new Array(o),u=0;u<o;u++)a[u]=arguments[u];l.apply.apply(l,[e].concat(a)),Array.isArray(t)?t.forEach((function(e){return e.removeEventListener.apply(e,[n,r].concat(i))})):t.removeEventListener.apply(t,[n,r].concat(i))}}var vc="data-event-boundary",mc="ne-ignore-pointer-events";function gc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if((null==e?void 0:e.nodeType)===Node.TEXT_NODE&&(e=e.parentNode),!(null==e?void 0:e.closest))return null;var r=e.closest(t);return r?(n||(n=e.closest(".ne-doc-lite-editor")||e.closest(".ne-doc-lite-viewer")),n&&!n.contains(r)?null:r):null}function bc(e,t){return gc(e,"[".concat(vc,"],.").concat(mc),t)}function yc(e,t){return null!==bc(e,t)}function wc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block",n=bc(e,arguments.length>2?arguments[2]:void 0);return n&&n.getAttribute("data-card-type")===t}function Ac(e,t){return!(e.target.isConnected&&!yc(e.target,t))}var kc=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"toPercentage",value:function(e,t){if(e>t)return 0;var n=e/t;return n>=0&&n<=1?Math.floor(1e4*n)/100:0}}])}(),_c=o(6450),Cc=o.n(_c),Nc={},Oc=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"get",value:function(e,t){return function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,Cc().mark((function n(){var r;return Cc().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!Nc.hasOwnProperty(e)){n.next=2;break}return n.abrupt("return",Nc[e]);case 2:return r=t(),Nc[e]=r,n.abrupt("return",r);case 5:case"end":return n.stop()}}),n)})))}}])}();function xc(e,t,n,r){for(var o=arguments.length,i=new Array(o>4?o-4:0),a=4;a<o;a++)i[a-4]=arguments[a];bt("function"==typeof e.destroy,"framework/utils/src/bind-event.ts:19"),bt("function"==typeof t.on,"framework/utils/src/bind-event.ts:20"),bt("function"==typeof t.off,"framework/utils/src/bind-event.ts:21");var l=e.destroy;t.on.apply(t,[n,r].concat(i)),e.destroy=function(){for(var o=arguments.length,a=new Array(o),u=0;u<o;u++)a[u]=arguments[u];l.apply(e,a),t.off.apply(t,[n,r].concat(i))}}var Ec=Array.isArray;function Dc(e,t,n,r){var o,i,a,l=/\[\]$/;if(Ec(t))for(i=0;t&&i<t.length;i++)a=t[i],n||l.test(e)?r(e,a):Dc(e+"["+("object"===(0,Gn.A)(a)?i:"")+"]",a,n,r);else if(t&&"[object Object]"===t.toString())for(o in t)t.hasOwnProperty(o)&&Dc(e+"["+o+"]",t[o],n,r);else r(e,t)}function Pc(e,t){return e+(/\?/.test(e)?"&":"?")+t}function Rc(e,t){var n,r,o=t||!1,i=[],a=encodeURIComponent;function l(e,t){var n=t;"function"==typeof t?n=t():null==t&&(n=""),i[i.length]=a(e)+"="+a(n)}if(Ec(e))for(r=0;e&&r<e.length;r++)l(e[r].name,e[r].value);else for(n in e)e.hasOwnProperty(n)&&Dc(n,e[n],o,l);return i.join("&").replace(/%20/g,"+")}function Sc(e){return"undefined"!=typeof FormData&&e instanceof FormData}var Tc,jc=window,Ic=document,Bc=document.head,Mc=/^http/,Fc=/(^\w+):\/\//,Lc=/^20\d$/,Uc="readyState",Vc="Content-Type",Hc="X-Requested-With",zc="reqwest_"+ +new Date,Wc=0;function qc(){}var $c={traditional:!1,contentType:"application/x-www-form-urlencoded",requestedWith:"XMLHttpRequest",accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"},dataFilter:function(e){return e}};function Kc(e){Tc=e}function Yc(e,t){var n=this.o,r=(n.method||"GET").toUpperCase(),o="string"==typeof n?n:n.url,i=!1!==n.processData&&n.data&&"string"!=typeof n.data&&!Sc(n.data)?Rc(n.data,n.traditional||$c.traditional):n.data||null;if("jsonp"!==n.type&&"GET"!==r||!i||(o=Pc(o,i),i=null),"jsonp"===n.type)return function(e,t,n,r){var o=r,i=Wc++,a=e.jsonpCallback||"callback",l=e.jsonpCallbackName||function(e){return zc+"_"+e}(i),u=new RegExp("((^|\\?|&)"+a+")=([^&]+)"),c=o.match(u),s=Ic.createElement("script"),d=0;return c?"?"===c[3]?o=o.replace(u,"$1="+l):l=c[3]:o=Pc(o,a+"="+l),jc[l]=Kc,s.type="text/javascript",s.src=o,s.async=!0,s.onload=s.onreadystatechange=function(){if(s[Uc]&&"complete"!==s[Uc]&&"loaded"!==s[Uc]||d)return!1;s.onload=s.onreadystatechange=null,s.onclick&&s.onclick(),t(Tc),Tc=void 0,Bc.removeChild(s),d=1},Bc.appendChild(s),{abort:function(){s.onload=s.onreadystatechange=null,n("Request is aborted: timeout"),Tc=void 0,Bc.removeChild(s),d=1}}}(n,e,t,o);var a=n.xhr&&n.xhr(n)||function(e){var t=new XMLHttpRequest;if(!0===e.crossOrigin&&!("withCredentials"in t))throw new Error("Browser does not support cross-origin requests");return t}(n);return a.open(r,o,!1!==n.async),function(e,t){var n,r=t.headers||{};for(n in r.Accept=r.Accept||$c.accept[t.type]||$c.accept["*"],t.crossOrigin||r[Hc]||(r[Hc]=$c.requestedWith),r[Vc]||Sc(t.data)||(r[Vc]=t.contentType||$c.contentType),r)r.hasOwnProperty(n)&&"setRequestHeader"in e&&e.setRequestHeader(n,r[n])}(a,n),function(e,t){void 0!==t.withCredentials&&void 0!==e.withCredentials&&(e.withCredentials=!!t.withCredentials)}(a,n),a.onreadystatechange=function(e,t,n){return function(){return e._aborted?n("Request is aborted",e.request):e._timedOut?n("Request is aborted: timeout",e.request):void(e.request&&4===e.request[Uc]&&(e.request.onreadystatechange=qc,function(e){var t=Fc.exec(e.url),n="";return t&&(n=t[1]),n||(n=(e.o.context||jc).location.protocol),Mc.test(n)?Lc.test(e.request.status):!!e.request.response}(e)?t(e.request):n(e.request.statusText,e.request)))}}(this,e,t),n.before&&n.before(a),a.send(i),a}function Gc(){this.initPromise()}function Jc(){return new Gc}function Xc(e){var t=this;this.url="string"==typeof e?e:e.url,this.timeout&&clearTimeout(this.timeout),this.timeout=null,e.timeout&&(this.timeout=setTimeout((function(){t._timedOut=!0,t.request.abort()}),e.timeout)),this.request=Yc.call(this,(function(e){t.triggerSuccess(e)}),(function(e,n){t.triggerError(e,n)}))}Gc.prototype={triggerSuccess:function(e){var t=this.o,n=t.type,r=(t.dataFilter||$c.dataFilter)(e.responseText,n);if(n||(n=e&&function(e){if(e)return e.match("json")?"json":e.match("javascript")?"js":e.match("text")?"html":e.match("xml")?"xml":void 0}(e.getResponseHeader("Content-Type"))),e="jsonp"!==n?this.request:e,r)switch(n){case"json":try{e=jc.JSON.parse(r)}catch(t){return this.triggerError("Could not parse JSON in response",e)}break;case"html":e=r;break;case"xml":e=e.responseXML&&e.responseXML.parseError&&e.responseXML.parseError.errorCode&&e.responseXML.parseError.reason?null:e.responseXML}t.success&&t.success(e),this.triggerComplete(e),this.__resolve(e)},triggerError:function(e,t){var n=this.o,r=new Error(e);r.xhr=t,n.error&&n.error(r),this.triggerComplete(r),this.__reject(r)},triggerComplete:function(e){var t=this.o;t.timeout&&clearTimeout(this.timeout),this.timeout=null,t.complete&&t.complete(e)},initPromise:function(){var e=this;e.promise=new Promise((function(t,n){e.__resolve=t,e.__reject=n}))},abort:function(){this._aborted=!0,this.request.abort()},retry:function(){this.initPromise(),Xc.call(this,this.o)},then:function(e,t){return this.promise.then(e,t)},always:function(e){return this.promise.then(e,e)},fail:function(e){return this.promise.then(void 0,e)},catch:function(e){return this.fail(e)},setup:function(e){this.o=Object.assign(Object.assign({},$c),e)},start:function(e){this.setup(e),Xc.call(this,this.o)}},Jc.ajaxSetup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var t in e)e.hasOwnProperty(t)&&$c.hasOwnProperty(t)&&($c[t]=e[t])};const Qc=Jc;var Zc={},es={progress:function(){},error:function(){},success:function(){},data:{},method:"post",url:""},ts=function(e){var t;try{if(null===(t=e.xhr)||void 0===t?void 0:t.response){var n=JSON.parse(e.xhr.response);if(Zc.customErrorHandler&&Zc.customErrorHandler(n))return e;if(n.message)return n}}catch(e){}};function ns(e){if(e=Object.assign(Object.assign({},es),e),Zc.proxy)return Zc.proxy(e);var t=Qc();return t.start(e),t}function rs(e){Zc.proxy=e}function os(){delete Zc.proxy}function is(e){Zc.customErrorHandler=e}var as=o(7771),ls=o.n(as);function us(e,t){if(e)return ls()(e,Object.assign({format:"text/plain"},t))}var cs,ss,ds,fs,hs,ps,vs,ms=function(){return(0,$e.A)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,Ke.A)(this,e),Object.defineProperty(this,"_runner",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"priority",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_canceled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._runner=t,this.priority=n,this._canceled=!1}),[{key:"dispose",value:function(){this._canceled=!0}},{key:"execute",value:function(){if(!this._canceled)try{this._runner()}catch(e){console.error(e)}}}],[{key:"sort",value:function(e,t){return t.priority-e.priority}}])}();function gs(e){return ss(e,1e4)}function bs(e){return ss(e,-1e4)}function ys(e,t){var n=null,r=null;return n=gs((function(){var n=e();r=cs((function(){t(n)}),-1e4)})),{dispose:function(){null==n||n.dispose(),null==r||r.dispose()}}}function ws(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function As(e,t){if(!window.IntersectionObserver)return null;var n={},r=new Map;n.map=r;var o=new window.IntersectionObserver(function(e,t){var n=[],r=!1,o=function(){r=!1;var o,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ws(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ws(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(n);try{for(i.s();!(o=i.n()).done;){var a=o.value;t.map.has(a.target)&&t.map.get(a.target)(a,t.observer)}}catch(e){i.e(e)}finally{i.f()}e(n,t.observer),n=[]};return function(e){n=n.concat(e),r||(r=!0,requestAnimationFrame(o))}}(e,n),t);return n.observer={get root(){return o.root},get rootMargin(){return o.rootMargin},get thresholds(){return o.thresholds},takeRecords:function(){return o.takeRecords()},disconnect:function(){return r.clear(),o.disconnect()},observe:function(e,t){t&&"function"==typeof t&&r.set(e,t),o.observe(e)},unobserve:function(e){r.delete(e),o.unobserve(e)}},n.observer}ds=[],fs=null,hs=!1,ps=!1,vs=function(){for(hs=!1,fs=ds,ds=[],ps=!0;fs.length>0;)fs.sort(ms.sort),fs.shift().execute();ps=!1},ss=function(e){var t=new ms(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0);return ds.push(t),hs||(hs=!0,requestAnimationFrame(vs)),t},cs=function(e,t){if(ps){var n=new ms(e,t);return fs.push(n),n}return ss(e,t)};var ks="undefined"!=typeof process&&"string"==typeof process.platform&&"number"==typeof process.pid?process:null,_s="undefined"!=typeof navigator?navigator.userAgent:"",Cs=!!ks&&!_s,Ns=/edge/i.test(_s),Os=!Ns&&/chrome/i.test(_s),xs=/firefox/i.test(_s),Es=!Ns&&!Os&&/safari/i.test(_s),Ds=/dingtalk/i.test(_s),Ps=/mobile/i.test(_s),Rs=/YuqueDesktopApp\/[\d.]+/i.test(_s),Ss=/os [\.\_\d]+ like mac os/i.test(_s),Ts=/android/i.test(_s),js=_s?!Ss&&/mac os x/i.test(_s):"darwin"===(null==ks?void 0:ks.platform),Is=_s?/windows\s*(?:nt)?\s*[\.\_\d]+/i.test(_s):"win32"===(null==ks?void 0:ks.platform),Bs=/ipad/i.test(_s)||"undefined"!=typeof navigator&&"MacIntel"===(null===navigator||void 0===navigator?void 0:navigator.platform)&&(null===navigator||void 0===navigator?void 0:navigator.maxTouchPoints)>1,Ms=/YuqueMobileApp/i.test(_s),Fs=/YuqueMobileApp.+\(.+Device\/Phone/i.test(_s),Ls=/YuqueMobileApp.+\(.+Device\/Pad/i.test(_s);const Us={node:Cs,edge:Ns,chrome:Os,firefox:xs,safari:Es,mobile:Ps,desktop:Rs,ios:Ss,android:Ts,macos:js,windows:Is,ipad:Bs,app:Ms,yuquePhone:Fs,yuquePad:Ls};var Vs=!1,Hs=!1;function zs(){if(Vs)return Hs;var e=document.createElement("canvas");return Hs=!(!e.getContext||!e.getContext("2d"))&&(Us.chrome||Us.firefox||0===e.toDataURL("image/webp").indexOf("data:image/webp")),Vs=!0,Hs}var Ws=229,qs={isKeyInComposition:function(e){return e.keyCode===Ws},isEnter:function(e){return e.key?"Enter"===e.key:13===e.keyCode},isCmdEnter:function(e){return qs.isEnter(e)&&qs.onlyMeta(e)},isShift:function(e){return e.key?"Shift"===e.key:16===e.keyCode},isBackspace:function(e){return e.key?"Backspace"===e.key:8===e.keyCode},isDelete:function(e){return e.key?"Delete"===e.key:46===e.keyCode},isArrowKey:function(e){var t=e.key,n=e.keyCode;return t?"ArrowLeft"===t||"ArrowRight"===t||"ArrowUp"===t||"ArrowDown"===t:n>=37&&n<=40},isHome:function(e){return e.key?"Home"===e.key:36===e.keyCode},isEnd:function(e){return e.key?"End"===e.key:35===e.keyCode},isChar:function(e,t){var n=e.key,r=e.keyCode;return t=t.toUpperCase(),n?n.toUpperCase()===t:r===t.charCodeAt(0)},isTab:function(e){return e.key?"Tab"===e.key:9===e.keyCode},isArrowDown:function(e){return e.key?"ArrowDown"===e.key:40===e.keyCode},isArrowRight:function(e){return e.key?"ArrowRight"===e.key:39===e.keyCode},isArrowUp:function(e){return e.key?"ArrowUp"===e.key:38===e.keyCode},isArrowLeft:function(e){return e.key?"ArrowLeft"===e.key:37===e.keyCode},hasModifyKey:function(e){return e.metaKey||e.ctrlKey||e.shiftKey||e.altKey},onlyMeta:function(e){return e.metaKey&&!e.ctrlKey&&!e.shiftKey&&!e.altKey},onlyAlt:function(e){return e.altKey&&!e.metaKey&&!e.ctrlKey&&!e.shiftKey},onlyCtrl:function(e){return e.ctrlKey&&!e.altKey&&!e.metaKey&&!e.shiftKey},onlyShift:function(e){return!e.ctrlKey&&!e.altKey&&!e.metaKey&&e.shiftKey},isEscape:function(e){return e.key?"Escape"===e.key:27===e.keyCode}},$s=qs;const Ks=$s;Object.keys($s).forEach((function(e){var t=$s[e];$s[e]=function(e){if(e.keyCode===Ws)return!1;for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return t.call.apply(t,[this,e].concat(r))}}));var Ys=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,Gs={observe:function(){},takeRecords:function(){return[]},disconnect:function(){}};function Js(e){return Ys?new Ys(e):Gs}function Xs(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return 0===n.length?e:n.map((function(t){return"".concat(e).concat("-"!==t.charAt(0)?"-":"").concat(t)})).join(" ")}}var Qs=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))};function Zs(e){return new Promise((function(t,n){var r=new Image;r.src=e,r.crossOrigin="Anonymous",r.onload=function(){return t(r)},r.onerror=n}))}function ed(e){return e&&e.startsWith("data:image/svg+xml;")}function td(e){return Qs(this,void 0,void 0,Cc().mark((function t(){var n,r,o,i;return Cc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=document.createElement("canvas"),r=n.getContext("2d"),"",o=ed(e)?e:"data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(e))),t.next=6,Zs(o);case 6:return i=t.sent,n.width=2*i.width,n.height=2*i.height,n.style.width=i.width+"px",n.style.height=i.height+"px",r.drawImage(i,0,0,2*i.width,2*i.height),t.abrupt("return",{width:i.width,height:i.height,url:n.toDataURL()});case 13:case"end":return t.stop()}}),t)})))}function nd(e){return Qs(this,void 0,void 0,Cc().mark((function t(){var n,r;return Cc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=14;break}if(n="",ed(e)&&(n=e),!e.endsWith(".svg")){t.next=10;break}return t.next=6,fetch(e);case 6:return r=t.sent,t.next=9,r.text();case 9:n=t.sent;case 10:if(!n){t.next=14;break}return t.next=13,td(n);case 13:return t.abrupt("return",t.sent);case 14:return t.abrupt("return",{url:e});case 15:case"end":return t.stop()}}),t)})))}function rd(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var n=e.split(",")[0].split(":")[1].split(";")[0],r=new Uint8Array(t.length),o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return new Blob([r],{type:n})}function od(e,t){var n=setTimeout(e,t);return function(){return clearTimeout(n)}}function id(){return"undefined"!=typeof window&&window.devicePixelRatio||1}function ad(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=document.createElement(e);return n._neCustom=!0,Array.isArray(t.className)?n.className=t.className.join(" "):t.className&&(n.className=t.className),t.style&&Object.keys(t.style).forEach((function(e){n.style[e]=t.style[e]})),Object.keys(t).forEach((function(e){"className"!==e&&"style"!==e&&n.setAttribute(e,t[e])})),n}var ld=ad;function ud(e,t,n,r){for(var o=arguments.length,i=new Array(o>4?o-4:0),a=4;a<o;a++)i[a-4]=arguments[a];bt("function"==typeof t.addEventListener,"framework/utils/src/dom/event/bind-dom-event-for-react-component.ts:41"),bt("function"==typeof t.removeEventListener,"framework/utils/src/dom/event/bind-dom-event-for-react-component.ts:42");var l=e.componentWillUnmount;e.componentWillUnmount=function(){l&&l.call(e),t.removeEventListener.apply(t,[n,r].concat(i))},t.addEventListener.apply(t,[n,r].concat(i))}function cd(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3;bt("function"==typeof e.destroy,"framework/utils/src/dom/event/bind-dom-long-press.ts:20"),bt("function"==typeof t.addEventListener,"framework/utils/src/dom/event/bind-dom-long-press.ts:21");var o=null,i=function(){o&&(clearTimeout(o),o=null)},a=function(e){o=window.setTimeout((function(){n(e),i()}),r)};t.addEventListener("touchstart",a),t.addEventListener("touchmove",i),t.addEventListener("touchend",i),t.addEventListener("touchcancel",i);var l=e.destroy;e.destroy=function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];l.call.apply(l,[e].concat(r)),t.removeEventListener("touchstart",a),t.removeEventListener("touchmove",i),t.removeEventListener("touchEnd",i),t.removeEventListener("touchcancel",i)}}function sd(e,t,n,r){for(var o=arguments.length,i=new Array(o>4?o-4:0),a=4;a<o;a++)i[a-4]=arguments[a];bt("function"==typeof t.on,"framework/utils/src/dom/event/bind-event-for-react-component.ts:22"),bt("function"==typeof t.off,"framework/utils/src/dom/event/bind-event-for-react-component.ts:23");var l=e.componentWillUnmount;e.componentWillUnmount=function(){if(l){for(var o=arguments.length,a=new Array(o),u=0;u<o;u++)a[u]=arguments[u];l.call.apply(l,[e].concat(a))}t.off.apply(t,[n,r].concat(i))},t.on.apply(t,[n,r].concat(i))}function dd(e){var t,n=gc(e,".ne-editor",document.body);if(!n)return null;var r=n.editor;return null!==(t=null==r?void 0:r.id)&&void 0!==t?t:null}function fd(e,t){var n=e.target;if(!n||n instanceof Document)return!0;var r=dd(n);return!r||r===t}var hd=function(){return(0,$e.A)((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,Ke.A)(this,e),Object.defineProperty(this,"_scope",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_domNode",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"_eventFilter",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"_handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]})}),[{key:"destroy",value:function(){this.removeAllListener(),this._domNode=null,this._eventFilter=null,this._handlers=[]}},{key:"on",value:function(e,t,n){var r=this,o=t,i=this._eventFilter;return t=function(e){var t=e;if(fd(t,r._scope)&&(!i||!1!==i(t))){for(var n=arguments.length,a=new Array(n>1?n-1:0),l=1;l<n;l++)a[l-1]=arguments[l];o.apply(void 0,[e].concat(a))}},this._handlers.push([e,t,n]),this._domNode.addEventListener(e,t,n),function(){r._domNode.removeEventListener(e,t,n)}}},{key:"once",value:function(e,t,n){var r=this,o=function(){r._domNode.removeEventListener(e,t,n)},i=t;return t=function(e){if(fd(e,r._scope)){o();for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];i.apply(void 0,[e].concat(n))}},this._handlers.push([e,t,n]),this._domNode.addEventListener(e,t,n),o}},{key:"off",value:function(e,t,n){this._domNode.removeEventListener(e,t,n)}},{key:"removeAllListener",value:function(){var e=this._domNode;this._handlers.forEach((function(t){var n=(0,tn.A)(t,3),r=n[0],o=n[1],i=n[2];e.removeEventListener(r,o,i)}))}}])}();function pd(e,t){if(!e||!t)return null;if(!e.isConnected||!t.isConnected)return null;if(e.contains(t))return e;if(t.contains(e))return t;for(var n=e.parentNode;n;){if(n.contains(t))return n;n=n.parentNode}return null}var vd=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"encodeHTML",value:function(e){return"string"!=typeof e?e:e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}},{key:"decodeHTML",value:function(e){return"string"!=typeof e?e:e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&")}}])}(),md=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],gd=function(){function e(){(0,Ke.A)(this,e)}return(0,$e.A)(e,null,[{key:"createElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:"element",name:e,attrs:t.attrs,style:t.style,className:t.className}}},{key:"createTextNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:"text",name:"#text",plain:!1,data:e,attrs:t.attrs,style:t.style,className:t.className}}},{key:"createPlainTextNode",value:function(t){var n=e.createTextNode(t);return n.plain=!0,n}},{key:"updateAttribute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.attrs,r=t.style,o=t.className;if(n&&(e.attrs=Object.assign(Object.assign({},e.attrs),n)),r&&(e.style=Object.assign(Object.assign({},e.style),r)),o){var i=[];i=Array.isArray(o)?o:[o],i=Array.from(new Set([].concat((0,ln.A)(e.className||[]),(0,ln.A)(i)))),e.className=i}}},{key:"appendChild",value:function(e,t){bt("#text"!==e.name,"framework/utils/src/dom/html-node-helper.ts:113"),e.children||(e.children=[]),e.children.push(t)}},{key:"setChildren",value:function(e,t){e.children=(0,ln.A)(t)}},{key:"isLikeEmpty",value:function(t){return"text"===t.type?0===t.data.length:"element"===t.type&&(!t.children||0===t.children.length||t.children.every((function(t){return e.isLikeEmpty(t)})))}},{key:"toHTML",value:function(e){return bd(e)}},{key:"setAttribute",value:function(e,t,n){e.attrs||(e.attrs={}),e.attrs[t]=n}},{key:"removeAttribute",value:function(e,t){e.attrs&&delete e.attrs[t]}},{key:"removeAllAttribute",value:function(e){delete e.attrs}},{key:"removeAllStyle",value:function(e){delete e.style}},{key:"cloneNode",value:function(e){var t={type:e.type,name:e.name,attrs:Jn(e.attrs),style:Jn(e.style),className:Jn(e.className)};return e.data&&(t.data=e.data),t}},{key:"formatStyleName",value:function(e){return wd(e)}}])}();function bd(e){if("text"===e.type)return function(e){var t=e.data,n=void 0===t?"":t;n=vd.encodeHTML(n),e.plain||(n=n.replace(/\n/g,"<br />"));var r=yd(e.attrs,e.style,e.className);return r?"<span ".concat(r,">").concat(n,"</span>"):n||""}(e);var t;bt("element"===e.type,"framework/utils/src/dom/html-node-helper.ts:202"),e.children&&(t=e.children.map((function(e){return bd(e)})));var n=function(e){var t=e.name,n=e.attrs,r=e.style,o=e.className;bt(t,"framework/utils/src/dom/html-node-helper.ts:219");var i=["<".concat(t)],a=yd(n,r,o);return a&&i.push(" "+a),i.push(">"),md.includes(t)?[i.join(""),""]:[i.join(""),"</".concat(t,">")]}(e),r=(0,tn.A)(n,2),o=r[0],i=r[1];return o+(t?t.join(""):"")+i}function yd(e,t,n){var r=[],o=[];if(e&&Object.keys(e).forEach((function(t){if("class"!==t&&"style"!==t){var n=e[t];void 0!==n&&r.push(vd.encodeHTML(t)+'="'+vd.encodeHTML(n+"")+'"')}})),t&&Object.keys(t).forEach((function(e){var n=t[e];void 0!==n?o.push("".concat(wd(e),": ").concat(n)):console.warn("warning: invalid style value for "+e)})),n&&n.length)if(Array.isArray(n))n=n.filter((function(e){return!!e})).map((function(e){return e.trim()})),r.push('class="'.concat(vd.encodeHTML(n.join(" ")),'"'));else{var i=n.trim();i&&r.push('class="'.concat(vd.encodeHTML(i),'"'))}var a=[];return r.length&&a.push(r.join(" ")),o.length&&a.push('style="'+vd.encodeHTML(o.join("; "))+'"'),a.join(" ")}function wd(e){return e.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()}))}function Ad(e){return Array.from(e.parentNode.childNodes).indexOf(e)}var kd=o(878),_d=o.n(kd),Cd=o(7264),Nd=o.n(Cd),Od=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"createRange",value:function(e){var t=e.startContainer,n=e.startOffset,r=e.endContainer,o=e.endOffset,i=document.createRange();if(t===r)return n===o?(i.setStart(t,n),i.collapse(!0)):n<o?(i.setStart(t,n),i.setEnd(r,o)):(i.setStart(r,o),i.setEnd(t,n)),i;var a=t,l=r;t.nodeType===Node.ELEMENT_NODE&&(a=t.childNodes[n]||t),r.nodeType===Node.ELEMENT_NODE&&(l=r.childNodes[o]||r);var u=a.compareDocumentPosition(l);if(u&Node.DOCUMENT_POSITION_FOLLOWING)return i.setStart(t,n),i.setEnd(r,o),i;if(u&Node.DOCUMENT_POSITION_PRECEDING)return i.setStart(r,o),i.setEnd(t,n),i;if(u&Node.DOCUMENT_POSITION_CONTAINS)return i.setStart(t,n),i.setEnd(r,o),i;if(u&Node.DOCUMENT_POSITION_CONTAINED_BY)return i.setStart(r,o),i.setEnd(t,n),i;throw new Error("assert error")}},{key:"setRangeToPoint",value:function(e,t){var n;if(document.caretRangeFromPoint)n=document.caretRangeFromPoint(e,t);else{if(!document.caretPositionFromPoint)throw new Error("Does not support caretRangeFromPoint or caretPositionFromPoint");var r=document.caretPositionFromPoint(e,t);n=document.createRange(),r&&(n.setStart(r.offsetNode,r.offset),n.setEnd(r.offsetNode,r.offset))}if(n){var o=document.getSelection();return o&&(o.removeAllRanges(),o.addRange(n)),o}}},{key:"getRangeRect",value:function(e){if(!e)return null;if(e.collapsed&&e.getClientRects){var t=Nd()(e.getClientRects()[0]);if(!_d()(t))return t}else if(e.getBoundingClientRect){var n=Nd()(e.getBoundingClientRect());if(!_d()(n))return n}var r=e.startContainer;return r.nodeType===Node.TEXT_NODE&&(r=r.parentElement),r.nodeType===Node.ELEMENT_NODE?r.getBoundingClientRect():null}},{key:"getRangeEndRect",value:function(e){var t;if(!e)return null;if(e.collapsed&&e.getClientRects){var n=Nd()(e.getClientRects()[0]);if(!_d()(n))return n}else if(e.getBoundingClientRect)if(e.collapsed){var r=Nd()(e.getBoundingClientRect());if(!_d()(r))return r}else{if(e.endContainer.nodeType===Node.ELEMENT_NODE){var o=null;if(o=e.endOffset===e.endContainer.childNodes.length?e.endContainer.childNodes[e.endOffset-1]:null===(t=e.endContainer.childNodes[e.endOffset])||void 0===t?void 0:t.previousSibling){o.nodeType===Node.TEXT_NODE&&(o=o.parentElement);var i=Nd()(o.getBoundingClientRect());if(!_d()(i))return i}}var a=document.createRange();a.setStart(e.endContainer,e.endOffset),a.setEnd(e.endContainer,e.endOffset);var l=Nd()(a.getBoundingClientRect());if(!_d()(l))return l}var u=e.startContainer;return u.nodeType===Node.TEXT_NODE&&(u=u.parentElement),u.nodeType===Node.ELEMENT_NODE?u.getBoundingClientRect():null}}])}();function xd(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e.collapsed)return!1;var r=document.createRange();return r.selectNode(t),n?1!==e.compareBoundaryPoints(Range.START_TO_END,r)&&-1!==e.compareBoundaryPoints(Range.END_TO_START,r):e.compareBoundaryPoints(Range.START_TO_START,r)<1&&e.compareBoundaryPoints(Range.END_TO_END,r)>-1}var Ed=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))},Dd=null;function Pd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Ed(this,void 0,void 0,Cc().mark((function n(){var r,o,i;return Cc().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return Dd||(Dd=document.createElement("canvas")),r=null,o=new Promise((function(e){r=e})),(i=new Image).crossOrigin="anonymous",i.onload=function(){var e=i.naturalWidth||i.width,n=i.naturalHeight||i.height,o=e*t,a=n*t;if(!(o>0&&a>0))return r(null);Rd(o,a).drawImage(i,0,0,o,a);var l=Dd.toDataURL("image/png");Dd&&(Dd.width=0,Dd.height=0),r({url:l,width:o,height:a,originalWidth:e,originalHeight:n})},i.onerror=function(){r(null)},i.src=e,n.abrupt("return",o);case 9:case"end":return n.stop()}}),n)})))}function Rd(e,t){return Dd||(Dd=document.createElement("canvas")),Dd.width=e,Dd.height=t,Dd.getContext("2d")}function Sd(e){return!!e&&e.nodeType===Node.TEXT_NODE}function Td(e){return(null==e?void 0:e.nodeType)===Node.ELEMENT_NODE}function jd(e){return"input"===e.type}function Id(e){return e}var Bd=function(){function e(t,n,r){(0,Ke.A)(this,e),Object.defineProperty(this,"scrollContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"viewPercent",{enumerable:!0,configurable:!0,writable:!0,value:60}),Object.defineProperty(this,"speed",{enumerable:!0,configurable:!0,writable:!0,value:120}),Object.defineProperty(this,"initialSpeed",{enumerable:!0,configurable:!0,writable:!0,value:120}),Object.defineProperty(this,"clientY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"iteration",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"lastRaf",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lastRunRaf",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lastTs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lastAccurateScrollTop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.scrollContainer=t,this.viewPercent="number"==typeof n?n:this.viewPercent,this.speed="number"==typeof r?r:this.speed,this.initialSpeed="number"==typeof r?r:this.speed}return(0,$e.A)(e,[{key:"run",value:function(e){this.reset(),this.clientY=e.clientY,this.lastRunRaf=requestAnimationFrame(this.schedule.bind(this))}},{key:"schedule",value:function(t){this.iteration++,this.iteration>e.MAX_ITERATION?this.reset():(void 0===this.lastTs&&(this.lastTs=t),this.iteration%2!=0?(this.doScroll(t,this.lastTs),this.lastTs=t,this.lastRaf=requestAnimationFrame(this.schedule.bind(this))):this.lastRaf=requestAnimationFrame(this.schedule.bind(this)))}},{key:"doScroll",value:function(e,t){var n=this.clientY,r=this.getScrollContainerRect();this.scrollContainer&&"number"==typeof n&&r&&void 0!==this.lastAccurateScrollTop&&(this.isAheadOfView(n,r)?this.lastAccurateScrollTop-=this.getCurScrollDiff(e-t):this.isBehindOfView(n,r)&&(this.lastAccurateScrollTop+=this.getCurScrollDiff(e-t)),this.scrollContainer.scrollTop=this.lastAccurateScrollTop,this.isInView(n,r)||this.accelerate(e-t))}},{key:"accelerate",value:function(e){this.speed+=2*this.iteration}},{key:"getCurScrollDiff",value:function(e){return this.speed*(e/1e3)}},{key:"isInView",value:function(e,t){var n=this.getThresholdY(t),r=(0,tn.A)(n,2),o=r[0];return e<r[1]&&e>o}},{key:"isAheadOfView",value:function(e,t){var n=this.getThresholdY(t),r=(0,tn.A)(n,2),o=r[0];return r[1],e<o}},{key:"isBehindOfView",value:function(e,t){var n=this.getThresholdY(t),r=(0,tn.A)(n,2);return r[0],e>r[1]}},{key:"getScrollContainerRect",value:function(){var e;return null===(e=this.scrollContainer)||void 0===e?void 0:e.getBoundingClientRect()}},{key:"getThresholdY",value:function(e){var t=e.height,n=e.top+t/2;return[n-t*this.viewPercent/200,n+t*this.viewPercent/200]}},{key:"reset",value:function(){var e;this.lastRaf&&cancelAnimationFrame(this.lastRaf),this.lastRunRaf&&cancelAnimationFrame(this.lastRunRaf),this.lastRaf=void 0,this.lastRunRaf=void 0,this.clientY=void 0,this.speed=this.initialSpeed,this.iteration=0,this.lastTs=void 0,this.lastAccurateScrollTop=null===(e=this.scrollContainer)||void 0===e?void 0:e.scrollTop}},{key:"destroy",value:function(){this.reset(),this.scrollContainer=void 0}}])}();function Md(e,t){if(document.caretPositionFromPoint){var n=document.caretPositionFromPoint(e,t);return n?{node:n.offsetNode,offset:n.offset}:null}if(document.caretRangeFromPoint){var r=document.caretRangeFromPoint(e,t);return r?{node:r.startContainer,offset:r.startOffset}:null}return null}function Fd(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ld(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ld(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function Ld(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(Bd,"MAX_ITERATION",{enumerable:!0,configurable:!0,writable:!0,value:99999});var Ud=function(){return(0,$e.A)((function e(t,n){var r=this;(0,Ke.A)(this,e),Object.defineProperty(this,"clientX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"triggerNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"startEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"distance",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"scrollContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoScroll",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lastRaf",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trackHoveredNodeList",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"onPointerDown",{enumerable:!0,configurable:!0,writable:!0,value:function(e){if(0===e.button&&!e.ctrlKey&&!e.metaKey){var t=e.clientX,n=e.clientY;Object.assign(r,{clientX:t,clientY:n}),r.startEvent=e,document.addEventListener("pointerup",r.onPointerUp),document.addEventListener("dragstart",r.preventNativeEvent),document.addEventListener("pointermove",r.onDistanceChange)}}}),Object.defineProperty(this,"onDistanceChange",{enumerable:!0,configurable:!0,writable:!0,value:function(e){e.preventDefault();var t=e.clientX,n=e.clientY,o=r.startEvent,i=r.distance;Object.assign(r,{clientX:t,clientY:n}),(r.calcDistance(o.clientX,o.clientY,t,n)||0)>=i&&(document.removeEventListener("pointermove",r.onDistanceChange),r.startDrag())}}),Object.defineProperty(this,"onPointerUp",{enumerable:!0,configurable:!0,writable:!0,value:function(e){0===e.button&&(e.preventDefault(),r.releasePointerCapture(),document.removeEventListener("pointerup",r.onPointerUp),document.removeEventListener("dragstart",r.preventNativeEvent),document.removeEventListener("pointermove",r.onDistanceChange),document.removeEventListener("pointermove",r.onPointerMove),r.dragging&&r.onDrop(e),r._dispatchPointerLeaveEvent(e))}}),Object.defineProperty(this,"onPointerMove",{enumerable:!0,configurable:!0,writable:!0,value:function(e){r.dragging&&(e.preventDefault(),r.lastRaf&&cancelAnimationFrame(r.lastRaf),r.lastRaf=requestAnimationFrame((function(){var t;null===(t=r.autoScroll)||void 0===t||t.run(e),r.onDragMove(e),r._dispatchPointerEvent(e)})))}}),this.triggerNode=t,n&&(this.autoScroll=new Bd(n),this.scrollContainer=n),t&&pc(this,t,"pointerdown",this.onPointerDown,!1)}),[{key:"onDragStart",value:function(e){}},{key:"onDragMove",value:function(e){}},{key:"onDrop",value:function(e){}},{key:"startDrag",value:function(){this.dragging=!0,document.documentElement.setPointerCapture(this.startEvent.pointerId),document.documentElement.style.cursor="grabbing",document.addEventListener("pointermove",this.onPointerMove),this.onDragStart(this.startEvent)}},{key:"_dispatchPointerEvent",value:function(e){var t,n,r=Md(e.clientX,e.clientY);if((null==r?void 0:r.node)&&"BODY"!==r.node.nodeName&&this.trackHoveredNodeList){var o,i=null===(n=(t=r.node).closest)||void 0===n?void 0:n.call(t,'[data-dragover="hover"]'),a=Fd(this.trackHoveredNodeList);try{for(a.s();!(o=a.n()).done;){var l=o.value;l!==i&&(l.dispatchEvent(new PointerEvent("mouseleave",Object.assign(Object.assign({},e),{bubbles:!0}))),this.trackHoveredNodeList.delete(l))}}catch(e){a.e(e)}finally{a.f()}i&&(this.trackHoveredNodeList.has(i)||i.dispatchEvent(new PointerEvent("mouseenter",Object.assign(Object.assign({},e),{bubbles:!0}))),this.trackHoveredNodeList.add(i))}}},{key:"_dispatchPointerLeaveEvent",value:function(e){if(this.trackHoveredNodeList){var t,n=Fd(this.trackHoveredNodeList);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.dispatchEvent(new PointerEvent("mouseleave",Object.assign(Object.assign({},e),{bubbles:!0}))),this.trackHoveredNodeList.delete(r)}}catch(e){n.e(e)}finally{n.f()}}}},{key:"preventNativeEvent",value:function(e){e.preventDefault()}},{key:"calcDistance",value:function(e,t,n,r){return Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))}},{key:"releasePointerCapture",value:function(){this.startEvent&&document.documentElement.hasPointerCapture(this.startEvent.pointerId)&&(document.documentElement.releasePointerCapture(this.startEvent.pointerId),document.documentElement.style.cursor="")}},{key:"reset",value:function(){var e;this.startEvent&&(this.startEvent=void 0,this.releasePointerCapture()),null===(e=this.autoScroll)||void 0===e||e.reset(),this.lastRaf&&(cancelAnimationFrame(this.lastRaf),this.lastRaf=void 0)}},{key:"destroy",value:function(){var e;this.reset(),this.clientX=void 0,this.clientY=void 0,this.dragging=!1,this.triggerNode=void 0,null===(e=this.autoScroll)||void 0===e||e.destroy(),this.autoScroll=void 0,this.trackHoveredNodeList=void 0,document.removeEventListener("pointerup",this.onPointerUp),document.removeEventListener("dragstart",this.preventNativeEvent),document.removeEventListener("pointermove",this.onDistanceChange),document.removeEventListener("pointermove",this.onPointerMove)}}])}();function Vd(e,t){return["ne-hole","ne-root-card-hole"].includes(e.parentNode.nodeName.toLowerCase())?t:Ad(e)+t}function Hd(e){return Td(e)?e.getBoundingClientRect().height:(bt(Sd(e),"framework/utils/src/drag-drop/helpers/get-node-height.ts:9"),e.parentNode.getBoundingClientRect().height)}var zd=window.TouchEvent||function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}))}();function Wd(e,t){var n=!1,r=-1,o=null,i=function(){n=!1,null!==o&&e(o)},a=function(e){o=t(e)||o,n||(n=!0,r=requestAnimationFrame(i))};return a.cancel=function(){n&&cancelAnimationFrame(r),o=null},a}function qd(e){return e instanceof zd}function $d(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.preventDefault(),e.stopPropagation();var o=-1,i=-1,a=-1;qd(e)?(i=e.changedTouches[0].clientX,a=e.changedTouches[0].clientY,o=e.changedTouches[0].identifier):(i=e.clientX,a=e.clientY);var l={destroy:function(){}},u=function(e){if(e.preventDefault(),e.stopPropagation(),qd(e)){if(-1!==o)for(var t=0;t<e.changedTouches.length;t++){var n=e.changedTouches[t];if(n.identifier===o)return{clientX:n.clientX,clientY:n.clientY}}return null}return{clientX:e.clientX,clientY:e.clientY}},c=Wd((function(e){null!==e&&(t(e.clientX-i,e.clientY-a),r&&(i=e.clientX,a=e.clientY))}),u),s=Wd((function(e){null!==e&&(t(e.clientX-i,e.clientY-a),n(e.clientX-i,e.clientY-a),c.cancel(),s.cancel(),l.destroy())}),u);pc(l,document,"mousemove",c,{capture:!0}),pc(l,document,"touchmove",c,{passive:!1}),pc(l,document,"mouseup",s,{capture:!0}),pc(l,document,"touchend",s,{passive:!1})}var Kd={mime:"text/csv,charset=UTF-8",fileName:"data.csv",columns:[],data:[],el:null,auto:!0,utf8:!0,warning:!0},Yd=function(e){var t=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.forEach((function(t){for(var n in t)e[n]=t[n]})),e}({},Kd,e),n=t.utf8?"\ufeff":"";t.columns.forEach((function(e){n+=e.title+","})),n=n.substr(0,n.length-1);var r="";t.data.forEach((function(e){if("object"===(0,Gn.A)(e)){var n="";t.columns.forEach((function(r){n+=function(e){return null!=e&&void 0!==e||(e=""),(e=String(e)).replace(/"/g,'""'),e.search(/("|,|\n)/g)>0&&(e='"'.concat(e,'"')),e}(e[r.key])+",",!(r.key in e)&&t.warning&&console.warn("property ".concat(r.key," didn't in "),e)})),n=n.substr(0,n.length-1),r+=n+"\n"}}));var o=new Blob([n+"\n"+r],{type:t.mime}),i=URL.createObjectURL(o);if(t.el&&(t.el.setAttribute("href",i),t.el.setAttribute("download",t.fileName)),t.auto){var a=document.createElement("a");a.setAttribute("href",i),a.setAttribute("download",t.fileName),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)}return setTimeout((function(){"revokeObjectURL"in URL&&URL.revokeObjectURL(i),o=null}),4e4),o},Gd=function(){return"undefined"!=typeof Blob&&"undefined"!=typeof URL&&"createObjectURL"in URL&&"download"in document.createElement("a")},Jd=/^(b|B)$/,Xd={iec:{bits:["b","Kib","Mib","Gib","Tib","Pib","Eib","Zib","Yib"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},Qd={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]};function Zd(e){var t,n,r,o,i,a,l,u,c,s,d,f,h,p,v,m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},g=[],b=0;if(isNaN(e))throw new Error("Invalid arguments");return r=!0===m.bits,d=!0===m.unix,n=m.base||2,s=void 0!==m.round?m.round:d?1:2,f=void 0!==m.separator&&m.separator||"",h=void 0!==m.spacer?m.spacer:d?"":" ",v=m.symbols||m.suffixes||{},p=2===n&&m.standard||"jedec",c=m.output||"string",i=!0===m.fullform,a=m.fullforms instanceof Array?m.fullforms:[],t=void 0!==m.exponent?m.exponent:-1,o=n>2?1e3:1024,(l=(u=Number(e))<0)&&(u=-u),(-1===t||isNaN(t))&&(t=Math.floor(Math.log(u)/Math.log(o)))<0&&(t=0),t>8&&(t=8),0===u?(g[0]=0,g[1]=d?"":Xd[p][r?"bits":"bytes"][t]):(b=u/(2===n?Math.pow(2,10*t):Math.pow(1e3,t)),r&&(b*=8)>=o&&t<8&&(b/=o,t++),g[0]=Number(b.toFixed(t>0?s:0)),g[1]=10===n&&1===t?r?"kb":"kB":Xd[p][r?"bits":"bytes"][t],d&&(g[1]="jedec"===p?g[1].charAt(0):t>0?g[1].replace(/B$/,""):g[1],Jd.test(g[1])&&(g[0]=Math.floor(g[0]),g[1]=""))),l&&(g[0]=-g[0]),g[1]=v[g[1]]||g[1],"array"===c?g:"exponent"===c?t:"object"===c?{value:g[0],suffix:g[1],symbol:g[1]}:(i&&(g[1]=a[t]?a[t]:Qd[p][t]+(r?"bit":"byte")+(1===g[0]?"":"s")),f.length>0&&(g[0]=g[0].toString().replace(".",f)),g.join(h))}Zd.partial=function(e){return function(t){return Zd(t,e)}};var ef=/[A-Z]/g;function tf(e){return e.replace(ef,(function(e){return"-".concat(e.toLowerCase())}))}var nf={cmd:Us.macos?"⌘":"Ctrl",command:Us.macos?"⌘":"Ctrl",option:Us.macos?"⌥":"Alt",opt:Us.macos?"⌥":"Alt",shift:"⇧",190:".",188:",",49:"1"};const rf=nf;function of(e,t){return e.map((function(e){var t=(e+"").toLowerCase();return nf[t]||t[0].toUpperCase()+t.substring(1)})).join(t||" ")}var af=/^[a-z0-9]$/i,lf=Us.macos||Us.ios;function uf(e){e=e.map((function(e){return(e+"").toLowerCase()}));var t={any:!1,cmd:!1,alt:!1,shift:!1,ctrl:!1};e.forEach((function(n){"cmd"===n?lf?t.cmd=!0:t.ctrl=!0:"ctrl"===n?t.ctrl=!0:"shift"===n?t.shift=!0:"alt"===n||"opt"===n||"option"===n?t.alt=!0:"*"===n?t.any=!0:n?(bt(!t.key,"invalid shortcut-key name: "+e,"framework/utils/src/hot-key-matcher/parse-keys.ts:54"),af.test(n+"")?t.key=(n+"").toUpperCase().charCodeAt(0):t.key=n):console.warn("invalid shortcut-key: "+e)}));var n={any:!1,cmd:!1,shift:!1,alt:!1,ctrl:!1};return t.any?n.any=!0:(n.cmd=t.cmd,n.shift=t.shift,n.alt=t.alt,n.ctrl=t.ctrl),{keyName:t.key,modifier:n}}var cf=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_keyInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._keyInfo=uf(t)}),[{key:"match",value:function(e){var t=e.key,n=e.keyCode;if(!t)return!1;var r=this._keyInfo,o=r.keyName,i=r.modifier;return(t.toLowerCase()===o||n===o)&&sf(e,i)}}],[{key:"parseKeys",value:function(e){return uf(e)}},{key:"isMatchModifier",value:function(e,t){return sf(e,t)}}])}();function sf(e,t){return!!t.any||t.cmd===e.metaKey&&t.alt===e.altKey&&t.ctrl===e.ctrlKey&&t.shift===e.shiftKey}var df=["h1","h2","h3","h4","h5","h6"],ff=["html","body","address","article","aside","blockquote","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","header","hgroup","hr","legend","menu","nav","ol","optgroup","option","p","pre","section","summary","ul","table","tbody","thead","tr","li"].concat(df),hf={},pf={},vf={},mf={};function gf(e,t){for(var n in bt("object"===(0,Gn.A)(e),"framework/utils/src/is-state-changed.ts:8"),bt("object"===(0,Gn.A)(t),"framework/utils/src/is-state-changed.ts:9"),bt(e,"framework/utils/src/is-state-changed.ts:10"),e)if(!io()(t[n],e[n]))return!0;return!1}function bf(e){return!(!e||"nodeName"===e)}df.forEach((function(e){mf[e]=!0})),ff.forEach((function(e){hf[e]=!0})),["a","abbr","acronym","area","audio","b","base","basefont","bdi","bdo","big","body","br","button","canvas","caption","cite","code","col","colgroup","datalist","del","dfn","em","embed","font","frame","frameset","head","html","i","iframe","img","input","ins","kbd","keygen","label","link","map","mark","meta","meter","noframes","object","output","param","progress","q","rp","rt","ruby","s","samp","select","small","source","span","strike","strong","sub","sup","td","textarea","tfoot","th","time","title","track","tt","u","var","video","wbr","applet"].forEach((function(e){pf[e]=!0})),["svg","script","noscript"].forEach((function(e){vf[e]=!0}));var yf=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))},wf={},Af=function(){function e(t,n){(0,Ke.A)(this,e),Object.defineProperty(this,"libName",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"loadFunction",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"lib",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"loadingPromise",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"listeners",{enumerable:!0,configurable:!0,writable:!0,value:[]})}return(0,$e.A)(e,[{key:"isReady",value:function(){return!!this.lib}},{key:"get",value:function(){return this.lib?this.lib:null}},{key:"onLoaded",value:function(e){var t=this;return this.listeners.push(e),function(){var n=t.listeners.indexOf(e);-1!==n&&t.listeners.splice(n,1)}}},{key:"load",value:function(){return yf(this,void 0,void 0,Cc().mark((function e(){var t=this;return Cc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.lib){e.next=2;break}return e.abrupt("return",this.lib);case 2:if(!this.loadingPromise){e.next=4;break}return e.abrupt("return",this.loadingPromise);case 4:return this.loadingPromise=new Promise((function(e){return yf(t,void 0,void 0,Cc().mark((function t(){var n,r=this;return Cc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.loadFunction();case 3:n=t.sent,this.lib=n,this.loadingPromise=null,e(n),setTimeout((function(){r.listeners.forEach((function(e){e()}))})),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(0),this.loadingPromise=null,console.warn("failed to load libiary: ".concat(this.libName)),console.error(t.t0);case 15:case"end":return t.stop()}}),t,this,[[0,10]])})))})),e.abrupt("return",this.loadingPromise);case 6:case"end":return e.stop()}}),e,this)})))}}],[{key:"getLoader",value:function(t,n){if(wf[t])return wf[t];var r=new e(t,n);return wf[t]=r,r}}])}(),kf={codemirror:"https://gw.alipayobjects.com/as/g/larkgroup/lake-codemirror/7.1.3/CodeMirror.js"};function _f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body;return new Promise((function(n,r){var o=document.querySelector('script[src="'.concat(e,'"]'));o||((o=document.createElement("script")).src=e),o.getAttribute("loaded")?n():o.getAttribute("error")?r(new Error("load failed : ".concat(e))):(o.addEventListener("load",(function(){o.setAttribute("loaded","true"),n()}),!1),o.addEventListener("error",(function(){o.setAttribute("error","true"),r(new Error("load failed: ".concat(e)))}),!1),t.appendChild(o))}))}var Cf=function(){var e="__check_if_storage_supported",t=!0;if("undefined"!=typeof window)try{window.localStorage.setItem(e,"1"),window.localStorage.removeItem(e)}catch(e){t=!1}else t=!1;return t}()?window.localStorage:{_store:{},setItem:function(e,t){this._store[e]=t},getItem:function(e){return this._store[e]||null}};const Nf=Cf;var Of=Symbol("matchType"),xf=Symbol("matchAll"),Ef=function(e){return"function"==typeof e},Df=function(e){return e},Pf=function(e){return Ef(e)?e:function(){return e}},Rf=function(e,t){return bt(t,"cant match anything ".concat(e),"framework/utils/src/match.ts:43"),t.result(e)},Sf=function(e,t){return function(e){return(null==e?void 0:e.type)===Of}(n=e)||function(e){return(null==e?void 0:e.type)===xf}(n)?[e].concat((0,ln.A)(t)):t;var n},Tf=function(e){return function(t){return t.check(e)}},jf=function(e){return function(t){return e.find(t)}},If=function(e){return Ef(e)?e:Df},Bf=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce((function(e,t){return t(e)}),e)}},Mf=function(e,t){return{type:Of,check:(n=e,Ef(n)?n:Array.isArray(n)?function(e){return n.includes(e)}:(r=n,function(e){return r===e})),result:Pf(t)};var n,r},Ff=function(e){return{type:xf,check:function(){return!0},result:Pf(e)}};function Lf(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=Bf(If(e),Tf,jf(Sf(e,n)));return function(e){return Rf(e,o(e))}}function Uf(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e&&!!e.trim()})).join(" ")}function Vf(){for(var e=(0,$e.A)((function e(){(0,Ke.A)(this,e)})),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var o=function(){var t=a[i];Object.keys(t.prototype).forEach((function(n){Object.defineProperty(e.prototype,n,{get:function(){return t.prototype[n]}})}))},i=0,a=n;i<a.length;i++)o();return e}var Hf=o(2160),zf=o.n(Hf);function Wf(e,t){if(e=zf()(e),!t)return e;var n=t;return Object.keys(e).forEach((function(t){var r=e[t],o=n[t];void 0!==o?"disabledPlugins"===t&&r?n[t]=Array.from(new Set([].concat((0,ln.A)(r),(0,ln.A)(o)))):"envAdapter"===t&&o?n[t]=o:"object"!==(0,Gn.A)(o)||Array.isArray(o)||null===o||(n[t]=Object.assign(Object.assign({},e[t]),n[t])):n[t]=r})),n}var qf={"image/jpeg":["jpeg","jpg","jpe"],"image/png":["png"],"image/gif":["gif"],"image/vnd.wap.wbmp":["wbmp"],"image/tiff":["tiff","tiff"],"image/vnd.adobe.photoshop":["psd"],"image/svg+xml":["svg","svgz"],"text/jsx":["jsx"],"text/less":["less"],"text/css":["css"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/csv":["csv"],"text/xml":["xml"],"text/x-vcard":["vcf"],"text/x-vcalendar":["vcs"],"text/markdown":["md"],"text/plain":["txt"],"text/richtext":["rtx"],"text/rtf":["rtf"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/javascript":["js"],"text/yaml":["yaml","yml"],"audio/mp3":["mp3"],"audio/mp4":["mp4","mp4a"],"video/mp4":["mp4"],"audio/mpeg":["mpeg","mp2","mp3"],"audio/ogg":["oga"],"audio/wav":["wav"],"audio/wave":["wav"],"audio/webm":["weba"],"video/x-msvideo":["avi"],"video/quicktime":["mov","qt"],"video/ogg":["ogv"],"video/x-sgi-movie":["movie"],"application/rss+xml":["rss"],"application/json":["json"],"application/zip":["zip"],"application/gzip":["gzip"],"application/pdf":["pdf"],"application/postscript":["ai","eps","ps"],"application/msword":["doc","dot"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.ms-fontobject":["eot"],"application/vnd.android.package-archive":["apk"],"application/x-apple-diskimage":["dmg"],"application/x-iwork-keynote-sffkey":["key"],"application/x-iwork-pages-sffpages":["pages"],"application/x-iwork-keynote-sffnumbers":["numbers"],"application/x-iwork-numbers-sffnumbers":["numbers"]};function $f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($f=function(){return!!e})()}function Kf(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=function(e){function t(){(0,Ke.A)(this,t),n.forEach((function(e){var n=new e;Object.getOwnPropertyNames(e.prototype).forEach((function(n){Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype,n)||Object.create(null))})),Object.getOwnPropertyNames(n).forEach((function(e){Object.defineProperty(t.prototype,e,Object.getOwnPropertyDescriptor(n,e)||Object.create(null))}))}));for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,$f()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,[].concat(r))}return(0,Xe.A)(t,e),(0,$e.A)(t)}(e);return o}function Yf(e){return function(t){var n=new e;return Object.getOwnPropertyNames(e.prototype).forEach((function(n){Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype,n)||Object.create(null))})),Object.getOwnPropertyNames(n).forEach((function(e){Object.defineProperty(t.prototype,e,Object.getOwnPropertyDescriptor(n,e)||Object.create(null))})),t}}function Gf(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var o=function(){var t=a[i];Object.keys(t).forEach((function(n){e.prototype[n]=t[n]}))},i=0,a=n;i<a.length;i++)o();return e}var Jf=o(5710),Xf=o.n(Jf),Qf=o(3375),Zf=o.n(Qf),eh=o(7682),th=o.n(eh),nh=o(4980),rh=o.n(nh);function oh(){return"zhCN"===cc.getLanguage()?Xf().locale(rh()):Xf().locale("en"),Xf().apply(void 0,arguments)}function ih(e,t,n){if(!n)throw new Error("failed to attach decorator @observe: "+String(t));var r=e[t];if("function"==typeof r)return e[t]=function(){var e;!function(e){uh.has(e)?uh.set(e,uh.get(e)+1):uh.set(e,1)}(this);try{for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];e=r.apply(this,n)}finally{!function(e){var t=uh.get(e);t&&(0==--t?uh.delete(e):uh.set(e,t))}(this),function(e){if(!uh.has(e)){var t=lh.get(e);null==t||t()}}(this)}return e},n.writable=!1,e}function ah(e,t){return lh.set(e,t),e}Xf().locale(rh()),Xf().extend(Zf()),Xf().extend(th()),Xf().updateLocale(rh().name,{calendar:{sameDay:"[今天] HH:mm",lastDay:"[昨天] HH:mm",nextDay:"[明天] HH:mm",nextWeek:"[本]ddd HH:mm",lastWeek:"ddd HH:mm",sameElse:"MM-DD HH:mm"}});var lh=new WeakMap,uh=new WeakMap;const ch="function"==typeof queueMicrotask?queueMicrotask:function(e){Promise.resolve().then(e).catch((function(e){return setTimeout((function(){throw e}))}))};var sh={toDataURL:function(e){return e?"data:image/svg+xml;utf8,".concat(encodeURIComponent(e)):null}};const dh=sh;window.__neInjector||(window.__neInjector={});var fh="videoRemark",hh="vipTooltip",ph="vipIcon",vh="embedTooltip",mh="translateContent",gh=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"get",value:function(e){var t;return null===(t=window.__neInjector)||void 0===t?void 0:t[e]}}])}(),bh=["0.0.0.0","255.255.255.255",/^127\./,/^192\.168\./,/^10\./],yh=function(){function e(){(0,Ke.A)(this,e)}return(0,$e.A)(e,null,[{key:"isBase64ImageURL",value:function(e){return!!e&&/^data:image\//i.test(e)}},{key:"isFullHttpURL",value:function(e){if("string"!=typeof e)return!1;if(!e)return!1;if(/[\u0020\n]/.test(e))return!1;try{var t=new URL(e).protocol;return"http:"===t||"https:"===t}catch(e){return!1}}},{key:"parseQuery",value:function(e,t){var n="";return t.forEach((function(t){var r=t[0],o=t[1];"number"==typeof o&&(o=e[o]),n+="".concat(r,"=").concat(o,"&")})),n.substring(0,n.length-1)}},{key:"matchAndReplaceUrl",value:function(t,n){for(var r=!1,o=0;o<t.length;o++){var i=t[o],a=i[0],l=i[1],u=n.match(l);if(u){r="".concat(u[1],"?").concat(e.parseQuery(u,a));break}}return r}},{key:"validateLocalHost",value:function(e){try{var t=new URL(e,"http://localhost").hostname;return!(!t||"localhost"===t||/^\d+\.\d+.\d+.\d+$/.test(t)&&bh.some((function(e){return"string"==typeof e?e===t:e.test(t)})))}catch(e){return!1}}},{key:"getExtName",value:function(e){var t="";try{t=new URL(e,"http://localhost").pathname}catch(e){return null}var n=t.split("/"),r=n[n.length-1]||"";if(!r)return null;var o=r.split("."),i=o[o.length-1];return i?i.toLowerCase():null}},{key:"sanitizeUrl",value:function(e){return kh(e)}},{key:"sanitizeImageSrc",value:function(e){return this.isBase64ImageURL(e)?e:kh(e)}},{key:"getProtocol",value:function(e){if(!e)return null;try{return new URL(e).protocol}catch(e){return null}}},{key:"validUrl",value:function(e){return Ah(e)}},{key:"addSearchParam",value:function(e,t,n){if(!e)return e;try{var r=new URL(e);return r.searchParams.set(t,String(n)),r.toString()}catch(r){if(e.includes("?")){var o=new RegExp("".concat(t,"=[^&]+"));return o.test(e)?e.replace(o,"".concat(t,"=").concat(encodeURIComponent(n))):"".concat(e,"&").concat(t,"=").concat(encodeURIComponent(n))}return"".concat(e,"?").concat(t,"=").concat(encodeURIComponent(n))}}},{key:"openUrl",value:function(e){"undefined"!=typeof window&&window.open(e)}}])}(),wh=["http:","https:","blob:","data:","dingtalk:","ftp:","mailto:","fleamarket:","alipays:","qinpai:"];function Ah(e){if("string"!=typeof e)return!1;if((e=e.toLowerCase()).startsWith("data:text/html"))return!1;var t=e.split("#")[0];return!/\s/.test(t)&&(!!wh.some((function(t){return e.startsWith(t)}))||!(!e.startsWith("./")&&!e.startsWith("/"))||e.indexOf(":")<0)}function kh(e){return"string"==typeof e&&(e=e.trim()),Ah(e)?e:""}function _h(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!e||!t||"object"!==(0,Gn.A)(t))return e;try{var r=new URL(e,n);Object.keys(t).forEach((function(e){r.searchParams.append(e,t[e])}));var o=r.search;return e.split("?")[0]+o}catch(t){return console.warn(t),e}}var Ch=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"disappear",value:function(e,t){var n,r=(null===(n=null==e?void 0:e.editor)||void 0===n?void 0:n.renderer)||e.renderer;if(!(null==r?void 0:r.option.virtualRendering))if(t){if(!t.querySelector(".ne-max")){var o=t.getBoundingClientRect().height;e._visibility={node:t,height:t.style.height},t.style.height=o+"px",t.classList.add("ne-invisible")}}else e._visibility=null}},{key:"appear",value:function(e){var t,n=e._visibility;if(n){e._visibility=null;var r=n.height,o=n.node;o.classList.remove("ne-invisible");var i=(null===(t=null==e?void 0:e.editor)||void 0===t?void 0:t.renderer)||e.renderer;(null==i?void 0:i.option.virtualRendering)||(o.style.height=r||"")}}}])}(),Nh=/[\u0100-\uffff]+/g,Oh=/--+/g,xh=/\s+/;function Eh(e){if(!e)return 0;var t=0;return(e=(e=e.replace(Nh,(function(e){return e.codePointAt(0)>127?(t+=(0,ln.A)(e).length," "):e})).replace(Oh,(function(e,n,r){return xh.test(r[n-1])&&t++," "}))).trim())&&(t+=e.split(xh).length),t}function Dh(e,t){return t=t||(Us.windows?2:10),Zd(e,e<1048576?{base:t,exponent:1,round:0}:{base:t,exponent:2,round:1})}var Ph="ne-ui-scrollbar-visible",Rh=function(){return(0,$e.A)((function e(t,n){var r,o=this;(0,Ke.A)(this,e),Object.defineProperty(this,"editor",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_editorRootNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_headerLayer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_uiLayer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_uiExtraBox",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_boxWrapNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_editorExtraBox",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_editBox",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_overlayContainer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_innerOverlayContainer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_editorWrapNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_isMaxView",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_maxViewNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_scrollbarIsVisible",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_exitMaxBeforeCallback",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_exitMaxAfterCallback",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_editorNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_theme",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_clear",{enumerable:!0,configurable:!0,writable:!0,value:function(){}}),hc()&&(this._scrollbarIsVisible=!0,n.classList.add(Ph)),this.editor=t,this._editorRootNode=n,this._boxWrapNode=fc('<div class="ne-editor-wrap-content"><div class="ne-editor-outer-wrap-box"><div class="ne-editor-wrap-box"><div class="ne-editor-extra-box"></div><div class="ne-editor-box"></div></div></div></div>'),this._editorExtraBox=this._boxWrapNode.firstChild.firstChild.firstChild,this._editBox=this._editorExtraBox.nextSibling,this._editorNode=fc('<div class="ne-editor"></div>'),this._headerLayer=fc('<div class="ne-editor-header"><button type="button" class="ne-ui-exit-max-view-btn">'.concat(sc("返回文档"),"</button></div>")),this._uiLayer=fc('<div class="ne-ui"></div>'),this._uiExtraBox=fc('<div class="ne-ui-extra"></div>'),this._overlayContainer=fc('<div class="ne-overlay-container" data-event-boundary="overlay"></div>'),this._innerOverlayContainer=fc('<div class="ne-inner-overlay-container"></div>');var i=fc('<div class="ne-editor-body"></div>'),a=fc('<div class="ne-editor-wrap"></div>');i.appendChild(a),a.appendChild(this._innerOverlayContainer),a.appendChild(this._boxWrapNode),this._editorWrapNode=a,this._editorNode.appendChild(this._headerLayer),this._editorNode.appendChild(this._uiLayer),this._editorNode.appendChild(this._uiExtraBox),this._editorNode.appendChild(i),document.body.appendChild(this._overlayContainer),n.innerHTML="",n.appendChild(this._editorNode),pc(this,a,"mousedown",(function(e){e.target===a&&e.preventDefault()}),!1),pc(this,this._uiLayer,"mousedown",(function(e){Ac(e,o._editorRootNode)||e.preventDefault()}),!1),pc(this,this._headerLayer,"mousedown",(function(e){e.preventDefault()})),pc(this,this._headerLayer,"click",(function(e){var t,n;(null===(t=e.target)||void 0===t?void 0:t.closest(".ne-ui-exit-max-view-btn"))&&(null===(n=o.editor)||void 0===n||n.exitMaxView())}));var l=null===(r=t.option)||void 0===r?void 0:r.getScrollNode(),u=Date.now();pc(this,l||document.body,"scroll",(function(){var e,n=Date.now(),r=u;u=n,n-r<500||null===(e=t.uiEmitter)||void 0===e||e.emit("closePopover")}),{passive:!0})}),[{key:"destroy",value:function(){var e;this._editorRootNode&&(this._editorRootNode.classList.remove(Ph),this._editorRootNode.innerHTML=""),null===(e=this._overlayContainer)||void 0===e||e.remove()}},{key:"reset",value:function(){try{this.exitMaxView()}catch(e){}}},{key:"initTheme",value:function(e){var t=this;this._theme=e,this._overlayContainer&&(this._overlayContainer.className="ne-overlay-container ".concat(e.getThemeSelector())),this._innerOverlayContainer&&(this._innerOverlayContainer.className="ne-inner-overlay-container ".concat(e.getThemeSelector())),xc(this,e,"themeChange",(function(){t._overlayContainer&&(t._overlayContainer.className="ne-overlay-container ".concat(e.getThemeSelector())),t._innerOverlayContainer&&(t._innerOverlayContainer.className="ne-inner-overlay-container ".concat(e.getThemeSelector()))}))}},{key:"isMaxView",get:function(){return this._isMaxView}},{key:"scrollbarIsVisible",get:function(){return this._scrollbarIsVisible}},{key:"editorRootNode",get:function(){return this._editorRootNode}},{key:"uiExtraBox",get:function(){return this._uiExtraBox}},{key:"editorWrapNode",get:function(){return this._editorWrapNode}},{key:"editorExtraBox",get:function(){return this._editorExtraBox}},{key:"editBox",get:function(){return this._editBox}},{key:"editorNode",get:function(){return this._editorNode}},{key:"uiLayer",get:function(){return this._uiLayer}},{key:"overlayContainer",get:function(){return this._overlayContainer}},{key:"innerOverlayContainer",get:function(){return this._innerOverlayContainer}},{key:"enterMaxView",value:function(e,t,n,r){var o,i,a,l,u,c,s,d=this;if(this._isMaxView||!e)return!1;var f=null===(i=null===(o=this.editor)||void 0===o?void 0:o.option)||void 0===i?void 0:i.getScrollNode().scrollTop;null===(a=this.editor)||void 0===a||a.emit("beforeEnterMaxView"),this._isMaxView=!0,this._maxViewNode=e,this._exitMaxBeforeCallback=n,this._exitMaxAfterCallback=r,null===(l=this._editorRootNode)||void 0===l||l.classList.add("ne-ui-max-view"),null===(u=this._maxViewNode)||void 0===u||u.classList.add("ne-ui-max-view-node","ne-max"),t.toolbar?null===(s=this._editorRootNode)||void 0===s||s.classList.remove("ne-ui-max-view-no-toolbar"):null===(c=this._editorRootNode)||void 0===c||c.classList.add("ne-ui-max-view-no-toolbar");var h=function e(n){var r;27===n.keyCode&&(d._isMaxView&&(null===(r=t.preventEscExitMaxView)||void 0===r?void 0:r.call(t))||(setTimeout((function(){var e;null===(e=d.editor)||void 0===e||e.exitMaxView()}),0),document.removeEventListener("keydown",e)))};return document.addEventListener("keydown",h),this._clear=function(){d._clear=function(){},document.removeEventListener("keydown",h),"number"==typeof f&&(d.editor.option.getScrollNode().scrollTop=f)},!0}},{key:"exitMaxView",value:function(){var e,t;if(!this._isMaxView)return!1;var n=this._exitMaxBeforeCallback,r=this._exitMaxAfterCallback;return this._exitMaxBeforeCallback=null,this._exitMaxAfterCallback=null,null==n||n(),this._isMaxView=!1,null===(e=this._editorRootNode)||void 0===e||e.classList.remove("ne-ui-max-view","ne-ui-concise-max-view"),null===(t=this._maxViewNode)||void 0===t||t.classList.remove("ne-ui-max-view-node","ne-max"),this._clear(),null==r||r(),!0}}])}();function Sh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Th(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,jh()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function jh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(jh=function(){return!!e})()}var Ih=function(e){function t(e,n,r){var o;(0,Ke.A)(this,t),o=Th(this,t),Object.defineProperty(o,"_engine",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_uiEmitter",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(o,"_layerManager",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_plugins",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(o,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_theme",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"uiSystem",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(o,"_recordInCollapsedNodes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(o,"execCommand",{enumerable:!0,configurable:!0,writable:!0,value:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];try{var a;return(a=Tr((0,Je.A)(t.prototype),"execCommand",o)).call.apply(a,[o,e].concat(r))}catch(t){var l=r.map((function(e){try{return JSON.stringify(e)}catch(e){return"#error"}}));throw o.emit("commandExecuteError",{error:t,detail:{commandName:e,args:l}}),t}}}),Object.defineProperty(o,"queryCommandState",{enumerable:!0,configurable:!0,writable:!0,value:function(e){for(var n,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return(n=Tr((0,Je.A)(t.prototype),"queryCommandState",o)).call.apply(n,[o,e].concat(i))}}),Object.defineProperty(o,"queryCommandEnabled",{enumerable:!0,configurable:!0,writable:!0,value:function(e){return Tr((0,Je.A)(t.prototype),"queryCommandEnabled",o).call(o,e)}}),Object.defineProperty(o,"queryCommandValue",{enumerable:!0,configurable:!0,writable:!0,value:function(e){for(var n,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return(n=Tr((0,Je.A)(t.prototype),"queryCommandValue",o)).call.apply(n,[o,e].concat(i))}}),r=Object.assign({},r),o._option=new Eu(o,r),o._uiEmitter=new it,o._layerManager=new Rh(o,n),o._layerManager.editorNode.editor=o,o._option.header&&Gl().render(o._option.header,o._layerManager.editorExtraBox);var i=new mu(o.editorNode);return o._theme=i,o._layerManager.initTheme(i),o._engine=e.createEngine(o._layerManager.editBox,Object.assign(Object.assign({},r),{globalOverlayNode:o._layerManager.overlayContainer,scrollableOverlayNode:o.option.innerOverlayContainer||o._layerManager.innerOverlayContainer,uiEmitter:o._uiEmitter,eventEmitter:o,theme:i,getEditorWrapRect:function(){return o.getEditWrapRect()}})),o._$commandUnderlay=o._engine,o._init(e.editorPlugins),i.updateStyles(),o}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"_init",value:function(e){var t=this,n=this._plugins,r=this._option,o=this._engine,i=o.renderer,a=o.kernel,l=r.disabledPlugins,u=r.envAdapter;return null==u||u._init(this),this._initEditorUISystem(),e.map((function(e){var o=e.PluginName,u=e.Service,c=e.Colors,s=e.Commands;if(l.includes(o))return null;var d=e.PluginOption;d&&r.extend(d);var f=d?r[d.OptionName]:null;f&&(f.editorOption=t._option,f.engineOption=t._engine.option,f.kernelOption=t._engine.kernel.option);var h=new e(f,t,i,a);if(u){var p=new u(t,i,a,h);t.registerService(p),h.setService(p)}return t._createCommand(s,h),c&&Object.keys(c).forEach((function(e){mu.colorRegistry.registerColor(e,c[e])})),n.push(h),bt(void 0===n[o],"framework/editor/src/editor.ts:175"),n[o]=h,h})).filter(Boolean).map((function(e){return e.init(t,i,a),e})).forEach((function(e){e.afterInit()})),this.engine.renderer.on("selectionchange",(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.emit.apply(t,["selectionchange"].concat(n))})),this.engine.on("contentchange",(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.emit.apply(t,["contentchange"].concat(n))})),this.engine.on("focusstatuschange",(function(e){e?t.emit("focus"):t.emit("blur"),t.emit("focuschange",{focused:e}),t.emit("focusstatuschange",{focused:e})})),this}},{key:"_createCommand",value:function(e,t){var n=this;if(e){var r=this._engine,o=r.renderer,i=r.kernel,a={};Array.isArray(e)?(e.forEach((function(e){var r=e.ID;bt(r,"framework/editor/src/editor.ts:224"),bt(!a[r],"duplicate command ID ".concat(r),"framework/editor/src/editor.ts:225"),a[r]=new e(n,o,i,t)})),this.registerCommand(a)):"object"===(0,Gn.A)(e)&&(Object.keys(e).forEach((function(r){var l=e[r];bt(r,"framework/editor/src/editor.ts:240"),bt(!a[r],"duplicate command ID ".concat(r),"framework/editor/src/editor.ts:241"),a[r]=new l(n,o,i,t)})),this.registerCommand(a))}}},{key:"_initEditorUISystem",value:function(){this.uiSystem=new nc(this)}},{key:"destroy",value:function(){var e,t,n;this.emit("beforedestroy"),null===(e=this._uiEmitter)||void 0===e||e.removeAllListeners(),this._uiEmitter=null,this.removeAllListeners(),this._layerManager.editorExtraBox&&Gl().unmountComponentAtNode(this._layerManager.editorExtraBox),delete this._layerManager.editorNode.editor,this._plugins.forEach((function(e){e.destroy()})),this._engine.destroy(),null===(t=this._layerManager)||void 0===t||t.destroy(),null===(n=this.uiSystem)||void 0===n||n.destroy()}},{key:"id",get:function(){return this._engine.id}},{key:"option",get:function(){return this._option}},{key:"engine",get:function(){return this._engine}},{key:"uiEmitter",get:function(){return this._uiEmitter}},{key:"kernel",get:function(){return this._engine.kernel}},{key:"editorNode",get:function(){return this._layerManager.editorNode}},{key:"editorWrapNode",get:function(){return this._layerManager.editorWrapNode}},{key:"editorExtraBox",get:function(){return this._layerManager.editorExtraBox}},{key:"editBox",get:function(){return this._layerManager.editBox}},{key:"uiLayer",get:function(){return this._layerManager.uiLayer}},{key:"uiExtraBox",get:function(){return this._layerManager.uiExtraBox}},{key:"overlayContainer",get:function(){return this._layerManager.overlayContainer}},{key:"innerOverlayContainer",get:function(){return this.option.innerOverlayContainer||this._layerManager.innerOverlayContainer}},{key:"plugins",get:function(){return this._plugins}},{key:"isMaxView",get:function(){return this._layerManager.isMaxView}},{key:"theme",get:function(){return this._theme}},{key:"sendMessage",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.emit.apply(this,["message"].concat(t))}},{key:"onMessage",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.on.apply(this,["message"].concat(t))}},{key:"setDocument",value:function(e,t,n){this._layerManager.reset(),this._engine.setDocument(e,t,n)}},{key:"canGetDocument",value:function(){var e=!0;return this._plugins.forEach((function(t){t.sync()||(e=!1)})),this._engine.canGetDocument()||(e=!1),e}},{key:"getDocument",value:function(e,t){return this._engine.getDocument(e,t)}},{key:"getEditorService",value:function(e){return this.getService(e)}},{key:"enterMaxView",value:function(e,t,n,r){var o={sidebar:!0,toolbar:!0,preventEscExitMaxView:t.preventEscExitMaxView};t&&(t.concise?(o.sidebar=!1,o.toolbar=!1):(!1===t.sidebar?o.sidebar=!1:o.sidebar=!0,!1===t.toolbar?o.toolbar=!1:o.toolbar=!0)),this._layerManager.enterMaxView(e,o,n,r)&&this.emit("enterMaxView",Object.assign({},o))}},{key:"exitMaxView",value:function(){this._layerManager.exitMaxView()&&this.emit("leaveMaxView")}},{key:"scrollbarIsVisible",get:function(){return this._layerManager.scrollbarIsVisible}},{key:"editing",get:function(){return this.kernel.editing}},{key:"iRenderer",get:function(){return this.engine.renderer}},{key:"renderer",get:function(){return this.engine.renderer}},{key:"scrollNode",get:function(){return this.option.getScrollNode()}},{key:"editor",get:function(){return this}},{key:"iEditor",get:function(){return this}},{key:"inCollapsedNodes",get:function(){return this._recordInCollapsedNodes}},{key:"removeInCollapsedNodes",value:function(e){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Sh(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sh(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,o=this._recordInCollapsedNodes.indexOf(r);o>=0&&this._recordInCollapsedNodes.splice(o,1)}}catch(e){n.e(e)}finally{n.f()}}},{key:"emitEvent",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.emit.apply(this,[e].concat(n))}},{key:"createCardUI",value:function(e){var t=e.constructor,n=t.$EditableCardUI,r=t.name;if("function"!=typeof n)throw new Error("未在 CardNode 类上声明静态属性 $EditableCardUI，无法创建卡片UI：".concat(r));var o=new n(this,e);e._$cardUI=o;for(var i=arguments.length,a=new Array(i>1?i-1:0),l=1;l<i;l++)a[l-1]=arguments[l];return e._$cardUIInitArgs=a,e.isInCollapsed?this._recordInCollapsedNodes.push(e):e.$unCollapsed(),o}},{key:"createBoxUIByClazz",value:function(e,t){var n,r=new e(this,t);return t._$boxUI=r,null===(n=r.init)||void 0===n||n.call(r),r}},{key:"getEditWrapRect",value:function(){return"function"!=typeof this.option.getEditWrapRect?(this.scrollNode||document.body).getBoundingClientRect():this.option.getEditWrapRect(this)}}])}(wu);function Bh(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Mh()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Mh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Mh=function(){return!!e})()}var Fh=function(e){function t(e,n,r,o){var i;return(0,Ke.A)(this,t),i=Bh(this,t),Object.defineProperty(i,"option",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(i,"editor",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(i,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(i,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(i,"_cardNodes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(i,"service",{enumerable:!0,configurable:!0,writable:!0,value:null}),i}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"cardNodes",get:function(){return this._cardNodes}},{key:"init",value:function(e,t,n){}},{key:"setService",value:function(e){this.service=e}},{key:"destroy",value:function(){var e;this.removeAllListeners(),null===(e=this.service)||void 0===e||e.destroy(),this.service=null}},{key:"sync",value:function(){return!0}},{key:"afterInit",value:function(){}}])}(it);function Lh(){return function(){for(var e=function(){return(0,$e.A)((function e(t,n){(0,Ke.A)(this,e),Object.defineProperty(this,"editor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cardData",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_boxNodeInstance",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.editor=t,this._boxNodeInstance=n}),[{key:"id",get:function(){return this.viewNode.id}},{key:"viewNode",get:function(){return this._boxNodeInstance.viewNode}},{key:"init",value:function(){}},{key:"destroy",value:function(){}}])}(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.reduce((function(e,t){return t(e)}),e)}}function Uh(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Vh()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Vh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Vh=function(){return!!e})()}var Hh=function(e){function t(e,n){var r;(0,Ke.A)(this,t),r=Uh(this,t),Object.defineProperty(r,"editor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"cardNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"containerNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"pluginOption",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_cardData",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_cardID",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(r,"_cardRootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_destroyed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(r,"_isFocused",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(r,"_focusByKeyboard",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_cancelEnterCardListener",{enumerable:!0,configurable:!0,writable:!0,value:void 0});var o=n.id,i=n.cardRootNode,a=n.cardData,l=n.pluginOption,u=n.plugin;return r.editor=e,r.cardNode=n,r.plugin=u,r.pluginOption=l,r._cardID=o,r._cardRootNode=i,r.containerNode=document.createElement("div"),r.containerNode.className="ne-card-container",r._cardData=a,i.appendChild(r.containerNode),r._focusByKeyboard=null,r._cancelEnterCardListener=null,r._cancelEnterCardListener=e.renderer.onPluginEvent("selection_enterCardByKeyboard:".concat(n.id),(function(e){r._focusByKeyboard=e})),r.cardNode.registerUIEventCallback("focus",r.focus),r.cardNode.registerUIEventCallback("blur",r.blur),r.cardNode.registerUIEventCallback("afterFocus",r._afterFocus),r.cardNode.registerUIEventCallback("beforeBlur",r._beforeBlur),r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"id",get:function(){return this._cardID}},{key:"name",get:function(){return this.cardNode.nodeName}},{key:"destroyed",get:function(){return this._destroyed}},{key:"cardData",get:function(){return this._cardData}},{key:"cardRootNode",get:function(){return this._cardRootNode}},{key:"viewNode",get:function(){return this.cardNode.viewNode}},{key:"init",value:function(){}},{key:"beforeInit",value:function(){}},{key:"afterInit",value:function(){}},{key:"destroy",value:function(){var e;this._destroyed=!0,this.containerNode.remove(),this.removeAllListeners(),null===(e=this._cancelEnterCardListener)||void 0===e||e.call(this)}},{key:"isFocused",get:function(){return this._isFocused}},{key:"focusByKeyboard",get:function(){return this._focusByKeyboard}},{key:"focus",value:function(){}},{key:"blur",value:function(){}},{key:"onAfterCardFocus",value:function(){}},{key:"onBeforeCardBlur",value:function(){}},{key:"focusCardTo",value:function(e){var t=this.editor,n=t.renderer;t.isMaxView||n.execCommand("focusCard",this.cardNode.id,e)}},{key:"_afterFocus",value:function(){this._isFocused=!0,this.onAfterCardFocus()}},{key:"_beforeBlur",value:function(){this._isFocused=!1,this._focusByKeyboard=null,this.onBeforeCardBlur()}}],[{key:"extend",value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=n.reduce((function(e,t){return t(e)}),this);return o.extend=t.extend,o}}])}(it);function zh(){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return t(e)}),Hh)}}var Wh=function(){function e(){(0,Ke.A)(this,e)}return(0,$e.A)(e,null,[{key:"update",value:function(t,n){var r,o;!0===n?t._$mask||(t._$mask=(r=t._cardRootNode,(o=document.createElement("div")).className="ne-ui-card-mask",r.appendChild(o),o)):e.destroyMask(t)}},{key:"destroyMask",value:function(e){e._$mask&&(e._$mask.remove(),e._$mask=null)}}])}();function qh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qh=function(){return!!e})()}function $h(e){return function(e){function t(){var e;return(0,Ke.A)(this,t),e=function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,qh()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,arguments),Object.defineProperty(e,"_$mask",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"afterInit",value:function(){this._refreshMask(!0),Tr((0,Je.A)(t.prototype),"afterInit",this).call(this)}},{key:"destroy",value:function(){this._destroyMask(),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}},{key:"getCardMaskConfig",value:function(){return!1}},{key:"shouldRefreshMask",value:function(){return!0}},{key:"refreshMask",value:function(){return this._refreshMask()}},{key:"_refreshMask",value:function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||!this.shouldRefreshMask()){var e=this.getCardMaskConfig();Wh.update(this,e)}}},{key:"_destroyMask",value:function(){Wh.destroyMask(this)}}])}(e)}function Kh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Kh=function(){return!!e})()}function Yh(e){return function(e){function t(){return(0,Ke.A)(this,t),function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Kh()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"beforeMaximizeChanged",value:function(e){}},{key:"afterMaximizeChanged",value:function(e){}},{key:"onLeaveMaxViewAsync",value:function(){}},{key:"onEnterMaxViewAsync",value:function(){}},{key:"enterMaxView",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.beforeMaximizeChanged(!0),this.editor.enterMaxView(this.cardRootNode.parentNode,t,(function(){e.beforeMaximizeChanged(!1)}),(function(){Promise.resolve().then((function(){e.onLeaveMaxViewAsync()})),e.afterMaximizeChanged(!1)})),setTimeout((function(){e.onEnterMaxViewAsync(),e.afterMaximizeChanged(!0)}))}}])}(e)}function Gh(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Jh()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Jh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Jh=function(){return!!e})()}var Xh=function(e){function t(e,n,r,o){var i;return(0,Ke.A)(this,t),i=Gh(this,t),Object.defineProperty(i,"_boundaryNode",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(i,"_targetNodeHandle",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(i,"_resizerRootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_resizerTriggerNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_maskNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_min",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(i,"_max",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(i,"_callback",{enumerable:!0,configurable:!0,writable:!0,value:null}),i._resizerRootNode=document.createElement("div"),i._resizerRootNode.className="ne-card-resizer",i._resizerTriggerNode=document.createElement("div"),i._resizerTriggerNode.className="ne-card-resizer-trigger",i._resizerTriggerNode.setAttribute("draggable","true"),i._resizerRootNode.appendChild(i._resizerTriggerNode),i._maskNode=document.createElement("div"),i._maskNode.className="ne-card-resizer-mask",i._update(o),n.appendChild(i._resizerRootNode),n.appendChild(i._maskNode),i._initEvent(),i}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){this._resizerRootNode.remove(),delete this._resizerRootNode,this._maskNode.remove(),delete this._maskNode,this.removeAllListeners()}},{key:"recoverHeight",value:function(){this._getTargetNode().style.height=""}},{key:"update",value:function(e){this._update(e)}},{key:"_update",value:function(e){var t=e.min,n=e.max;t?bt(t>=0,"framework/uilib/src/card-resizer/card-resizer.ts:69"):t=0,n?bt(n>t,"framework/uilib/src/card-resizer/card-resizer.ts:75"):n=Number.MAX_SAFE_INTEGER,this._min=t,this._max=n,this._callback=e.callback||null}},{key:"_initEvent",value:function(){var e,t=this;pc(this,this._resizerTriggerNode,"mousedown",(function(){var n=t._getTargetNode();t._maskNode.style.display="block",n.style.pointerEvents="none",t.emit("start"),pc(e={destroy:function(){t.emit("complete"),t._maskNode&&(t._maskNode.style.display="",t._maskNode.style.height=""),n.style.pointerEvents=""}},document,"mouseup",(function(){null==e||e.destroy()}),!1)}),!1),pc(this,this._resizerTriggerNode,"dragstart",(function(n){n.dataTransfer.effectAllowed="move",n.dataTransfer.dropEffect="move";var r=document.createElement("div");r.style.cssText="position: fixed; width: 1px; height: 1px; top: -99999px; left: -99999px;",document.body.appendChild(r),n.dataTransfer.setDragImage(r,0,0);var o=t._getTargetNode().getBoundingClientRect().y;t._maskNode.style.height=t._getValidHeight(n.clientY-o)+"px",t._processDrag({destroy:function(){}},e,r)}),!1)}},{key:"_processDrag",value:function(e,t,n){var r=this,o=this._getTargetNode();pc(e,this._boundaryNode,"dragover",(function(e){e.preventDefault();var t=o.getBoundingClientRect().y;r._handleResize(e.clientY-t)}),!1),pc(e,this._boundaryNode,"dragenter",(function(e){e.preventDefault();var t=o.getBoundingClientRect().y;r._handleResize(e.clientY-t)}),!1),pc(e,this._boundaryNode,"dragend",(function(i){if(i.preventDefault(),n){var a=o.getBoundingClientRect().y;t.destroy(),e.destroy(),n.remove(),n=null,r._completed(i.clientY-a)}}),!1),pc(e,this._boundaryNode,"drop",(function(i){if(i.preventDefault(),n){var a=o.getBoundingClientRect().y;t.destroy(),e.destroy(),n.remove(),n=null,r._completed(i.clientY-a)}}),!1)}},{key:"show",value:function(){this._resizerRootNode.style.display="block"}},{key:"hide",value:function(){this._resizerRootNode.style.display="none"}},{key:"_getTargetNode",value:function(){return"function"==typeof this._targetNodeHandle?this._targetNodeHandle():this._targetNodeHandle}},{key:"_getValidHeight",value:function(e){return Math.min(this._max,Math.max(e,this._min))}},{key:"_handleResize",value:function(e){return e=this._getValidHeight(e),this._getTargetNode().style.height=e+"px",this._getTargetNode().style.maxHeight="unset",e}},{key:"_completed",value:function(e){e=this._handleResize(e),this._getTargetNode().style.maxHeight="",this._callback&&this._callback(e),this.emit("resize",e)}}])}(it),Qh=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"update",value:function(e,t,n,r,o,i,a,l){var u,c,s=e._$cardResizer;o?(o="object"!==(0,Gn.A)(o)?{callback:i}:Object.assign(Object.assign({},o),{callback:i}),s?s.update(o):e._$cardResizer=new Xh(t,n,r,o),a&&(null===(u=e._$cardResizer)||void 0===u||u.on("start",a)),l&&(null===(c=e._$cardResizer)||void 0===c||c.on("complete",l))):s&&(s.recoverHeight(),s.destroy(),e._$cardResizer=null)}},{key:"destroyResizer",value:function(e){e._$cardResizer&&(e._$cardResizer.destroy(),e._$cardResizer=null)}}])}();function Zh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Zh=function(){return!!e})()}function ep(e){return function(e){function t(){var e;(0,Ke.A)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Zh()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,[].concat(r)),Object.defineProperty(e,"resizeTarget",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_$cardResizer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_isResizing",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"onResizeStart",{enumerable:!0,configurable:!0,writable:!0,value:function(){e._isResizing=!0}}),Object.defineProperty(e,"onResizeComplete",{enumerable:!0,configurable:!0,writable:!0,value:function(){e._isResizing=!1}}),e.cardData&&e.cardData.on("heightChange",(function(t){var n=t.newHeight,r=t.oldHeight;e.heightChanged(n,r),e.refreshResizer()})),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"isResizing",get:function(){return this._isResizing}},{key:"afterInit",value:function(){var e=this;this._cardData&&(xc(this,this._cardData,"cardHeightReset",(function(){e.containerNode.style.height=""})),this._resizeCardHeight()),Tr((0,Je.A)(t.prototype),"afterInit",this).call(this)}},{key:"heightChanged",value:function(e,t){}},{key:"refreshResizer",value:function(){return this._refreshResizer()}},{key:"destroyResizer",value:function(){return this._destroyResizer()}},{key:"hideResizer",value:function(){this._$cardResizer&&this._$cardResizer.hide()}},{key:"showResizer",value:function(){this._$cardResizer&&this._$cardResizer.show()}},{key:"_refreshResizer",value:function(){var e=this;this._resizeCardHeight();var t=this.getResizerConfig();Qh.update(this,this.editor.editBox,this.cardRootNode,this.resizeTarget||this.containerNode,t,(function(t){e._cardData&&(e._cardData._resetCardValue(e._cardData.__getCardValueWithNewHeight(t)),e._cardData.sync(!1))}),this.onResizeStart,this.onResizeComplete)}},{key:"_resizeCardHeight",value:function(){var e;if(this._cardData){var t=this._cardData.getCardHeight(),n=this.getResizerConfig();if(n&&t){var r=this.containerNode;this.resizeTarget&&(r=this.resizeTarget,"function"==typeof this.resizeTarget&&(r=this.resizeTarget())),r&&(null===(e=this.viewNode)||void 0===e?void 0:e.hasCategory(qe.BlockCard))&&(!isNaN(n.min)&&t<n.min?r.style.height=n.min+"px":!isNaN(n.max)&&t>n.max?r.style.height=n.max+"px":r.style.height=t+"px")}}}},{key:"_destroyResizer",value:function(){Qh.destroyResizer(this)}},{key:"getResizerConfig",value:function(){return null}},{key:"destroy",value:function(){this._destroyResizer(),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}}])}(e)}function tp(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(tp=function(){return!!e})()}function np(e){return function(e){function t(){var e;(0,Ke.A)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,tp()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,[].concat(r)),e.cardData&&e.cardData.on("spacingChange",(function(){e._refreshCardSpacing()})),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"afterInit",value:function(){this._cardData&&this._refreshCardSpacing(),Tr((0,Je.A)(t.prototype),"afterInit",this).call(this)}},{key:"_refreshCardSpacing",value:function(){var e=this.cardNode.viewNode;if("image"===e.nodeName||e.hasCategory(qe.BlockCard)){var t=this._cardData.getCardSpacing(),n=this._cardRootNode.parentNode,r=n;"NE-HOLE"!==n.parentNode.nodeName&&"NE-ROOT-CARD-HOLE"!==n.parentNode.nodeName||(r=n.parentNode),r.classList.remove("ne-spacing-all","ne-spacing-top","ne-spacing-bottom"),t===Nl?r.classList.add("ne-spacing-all"):t===Ol?r.classList.add("ne-spacing-top"):t===xl&&r.classList.add("ne-spacing-bottom")}}}])}(e)}function rp(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rp=function(){return!!e})()}function op(e){return function(e){function t(){var e;(0,Ke.A)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,rp()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,[].concat(r)),e.cardData&&e.cardData.on("widthModeChange",(function(){e._refreshCardWidthMode()})),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"afterInit",value:function(){this._cardData&&this._refreshCardWidthMode(),Tr((0,Je.A)(t.prototype),"afterInit",this).call(this)}},{key:"_refreshCardWidthMode",value:function(){var e=this._cardData.getWidthMode(),t=this._cardRootNode.parentNode,n=t;"NE-HOLE"!==t.parentNode.nodeName&&"NE-ROOT-CARD-HOLE"!==t.parentNode.nodeName||(n=t.parentNode),e===Dl?n.classList.add("ne-full-width"):n.classList.remove("ne-full-width")}}])}(e)}function ip(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ip=function(){return!!e})()}function ap(e){return function(e){function t(){var e;(0,Ke.A)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,ip()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,[].concat(r)),Object.defineProperty(e,"_isHovered",{enumerable:!0,configurable:!0,writable:!0,value:!1}),e.cardNode.registerUIEventCallback("click",e._click),e.cardNode.registerUIEventCallback("mouseenter",e._mouseenter),e.cardNode.registerUIEventCallback("mousedown",e._mousedown),e.cardNode.registerUIEventCallback("tap",e._tap),e.cardNode.registerUIEventCallback("hover",e._hover),e.cardNode.registerUIEventCallback("longPress",e._longPress),e.cardNode.registerUIEventCallback("leave",e._leave),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"isHovered",get:function(){return this._isHovered}},{key:"click",value:function(e){}},{key:"mouseenter",value:function(e){}},{key:"hover",value:function(e){}},{key:"mousedown",value:function(e){}},{key:"tap",value:function(e){}},{key:"leave",value:function(){}},{key:"longPress",value:function(){}},{key:"_click",value:function(e){this.click(e)}},{key:"_mouseenter",value:function(e){this.mouseenter(e)}},{key:"_mousedown",value:function(e){this.mousedown(e)}},{key:"_tap",value:function(e){this.tap(e)}},{key:"_hover",value:function(){this._isHovered=!0,this.hover()}},{key:"_longPress",value:function(){this.longPress()}},{key:"_leave",value:function(){this._isHovered=!1,this.leave()}}])}(e)}var lp="light",up="dark",cp="style",sp="attr",dp="custom",fp=(0,$e.A)((function e(){(0,Ke.A)(this,e)}));Object.defineProperty(fp,"STYLE_NAME",{enumerable:!0,configurable:!0,writable:!0,value:cp}),Object.defineProperty(fp,"ATTR_NAME",{enumerable:!0,configurable:!0,writable:!0,value:sp}),Object.defineProperty(fp,"CUSTOM_NAME",{enumerable:!0,configurable:!0,writable:!0,value:dp});var hp=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e),Object.defineProperty(this,"_attrTranslators",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_inlineCards",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_blockCards",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_box",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_boxUI",{enumerable:!0,configurable:!0,writable:!0,value:{}})}),[{key:"destroy",value:function(){this._attrTranslators=null,this._inlineCards=null,this._blockCards=null,this._box=null}},{key:"registerAttrTranslator",value:function(e,t){var n=this,r={};"string"==typeof e?r[e]=t:r=e,Object.keys(r).forEach((function(e){var t=r[e];bt(t instanceof fp,"framework/public/src/registry.ts:61"),n._attrTranslators[e]=t}))}},{key:"registerInlineCard",value:function(e,t,n){this._inlineCards[t]={pluginInstance:e,definition:n}}},{key:"registerBlockCard",value:function(e,t,n){this._blockCards[t]={pluginInstance:e,definition:n}}},{key:"registerBoxNode",value:function(e,t,n){var r=this,o={};"string"==typeof e?o[e]=t:(o=e,t&&(n=t)),Object.keys(o).forEach((function(e){var t=o[e];"function"==typeof t&&(t={clazz:t,pluginContext:n}),r._box[e]=t}))}},{key:"registerBoxUI",value:function(e,t){var n=this,r={};"string"==typeof e?r[e]=t:r=e,Object.keys(r).forEach((function(e){var t=r[e];bt("function"==typeof t.factory,"framework/public/src/registry.ts:143"),n._boxUI[e]=t}))}},{key:"getCardClass",value:function(e){return this._inlineCards[e]||this._blockCards[e]||null}},{key:"getBoxDefinition",value:function(e){return this._box[e]||null}},{key:"getBoxUIDefinition",value:function(e){return this._boxUI[e]||null}},{key:"getAttrTranslator",value:function(e){return this._attrTranslators[e]}},{key:"isBoxNode",value:function(e){return bt("string"==typeof e,"framework/public/src/registry.ts:170"),!!this._box[e]}}])}(),pp=function(){return(0,$e.A)((function e(t,n,r){(0,Ke.A)(this,e),Object.defineProperty(this,"_engineBox",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_mountNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_domRootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_globalOverlayNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_scrollableOverlayNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_documentListener",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._mountNode=n,n.innerHTML='<div class="ne-engine-box"><div class="ne-engine"></div></div>',this._engineBox=n.firstChild,this._scrollableOverlayNode=r.scrollableOverlayNode||this._engineBox.firstChild,this._domRootNode=this._engineBox.lastChild,this._domRootNode.contentEditable="true",this._domRootNode.spellcheck=!1,this._domRootNode.value="",this._domRootNode.selectionStart=0,this._domRootNode.selectionEnd=0,this._domRootNode.tabIndex=1,this._initOverlay(r),pc(this,this._domRootNode,"dragstart",(function(e){var t;(null===(t=e.target)||void 0===t?void 0:t.nodeType)===Node.TEXT_NODE&&e.preventDefault()})),this._documentListener=new hd(t,this._mountNode.ownerDocument)}),[{key:"iLayer",get:function(){return this}},{key:"_initOverlay",value:function(e){var t=e.globalOverlayNode,n=e.scrollableOverlayNode;t?this._globalOverlayNode=t:(this._globalOverlayNode=ad("div",{className:"ne-engine-global-overlay"}),document.body.appendChild(this._globalOverlayNode)),n?this._scrollableOverlayNode=n:(this._scrollableOverlayNode=ad("div",{className:"ne-engine-scrollable-overlay"}),this._mountNode.firstChild.appendChild(this._scrollableOverlayNode))}},{key:"destroy",value:function(){this._mountNode=null,this._domRootNode=null,this._documentListener.destroy(),this._documentListener=null}},{key:"domRootNode",get:function(){return this._domRootNode}},{key:"globalOverlayNode",get:function(){return this._globalOverlayNode}},{key:"scrollableOverlayNode",get:function(){return this._scrollableOverlayNode}}])}();function vp(e,t,n){e[t]=n}function mp(e,t){return e[t]}function gp(e,t,n){e[t]=n}function bp(e,t){vp(e,"_neRef",t)}function yp(e,t){return e[t]}function wp(e){if(e)return mp(e,"_neRef")}function Ap(e){var t=wp(e),n=xp(e);if((null==n?void 0:n.getMainDOMNode())===e)return t}function kp(e){return!!e&&yp(e,"_isRenderRootNode")}function _p(e){if(e)return yp(e,"_modelNode")}function Cp(e){if(e)return yp(e,"_virtualNode")}function Np(e){delete e._virtualNode}function Op(e,t){gp(e,"_virtualNode",t)}function xp(e){return Cp(wp(e))}function Ep(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Dp()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Dp(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Dp=function(){return!!e})()}var Pp=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=Ep(this,t),Object.defineProperty(r,"_renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_domRootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_rootNodeObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_focused",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(r,"_disabled",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(r,"_preventFocus",{enumerable:!0,configurable:!0,writable:!0,value:!1}),r._renderer=e,r._domRootNode=n,r._rootNodeObserver=new hd(e.id,n),e.on("preventFocus",(function(e){r._preventFocus=e})),r._rootNodeObserver.on("mousedown",(function(){r._disabled||r._focused||r._preventFocus||(r._focused=!0,r.emit("focus"))})),r._rootNodeObserver.on("selectionchange",(function(e){r._disabled&&(e.stopPropagation(),e.stopImmediatePropagation())})),r._rootNodeObserver.on("focusin",(function(e){r._disabled||r._focused||r._preventFocus||(r._focused=!0,r.emit("focus"))})),r._rootNodeObserver.on("focusout",(function(e){if(!r._disabled&&r._focused)if(e.relatedTarget){if(n.contains(e.relatedTarget))return;r._focused=!1,r.emit("blur"),r._checkNodeBlur()}else setTimeout((function(){document.activeElement&&n.contains(document.activeElement)||(r._focused=!1,r.emit("blur"))}))})),r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){this._rootNodeObserver.destroy()}},{key:"disable",value:function(){this._disabled=!0}},{key:"enable",value:function(){this._disabled=!1}},{key:"focus",value:function(e){this.emit("forceFocus",e),e=Object.assign({preventScroll:!1},e);var t=document.getSelection(),n=this._renderer.engine.view.getViewSelection(),r=this._renderer.scrollNode,o=r.scrollTop,i=r.scrollHeight;e.preventScroll||Math.abs(i-this._renderer.scrollNode.getBoundingClientRect().height)<1&&(e.preventScroll=!0),this._domRootNode.focus({preventScroll:e.preventScroll});var a=this._renderer.toDOMRange(n.firstRange);t.removeAllRanges(),t.addRange(a),this._renderer.scrollNode.scrollTop=o,e.preventScroll||this._renderer.scrollToCurrentSelection(!0),this._checkNodeFocus()}},{key:"blur",value:function(){this._focused&&document.activeElement instanceof HTMLElement&&this._renderer.domRootNode.contains(document.activeElement)&&(document.activeElement.blur(),this._focused=!1,this.emit("blur"),this._checkNodeBlur())}},{key:"isDisabled",value:function(){return this._disabled}},{key:"isFocus",value:function(){return this._focused}},{key:"_checkNodeFocus",value:function(){var e,t=this._renderer.engine.view.getViewSelection(),n=t.firstRange.start.node;t.collapsed&&n.isCardNode()&&(null===(e=Cp(n))||void 0===e||e.$focus(!0))}},{key:"_checkNodeBlur",value:function(){var e,t=this._renderer.engine.view.getViewSelection(),n=t.firstRange.start.node;t.collapsed&&n.isCardNode()&&(null===(e=Cp(n))||void 0===e||e.$focus(!0))}}])}(it),Rp=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0});var n=t.container;if(!n)throw new Error("please set a dom container!");this.options=Object.assign(Object.assign({limitHeight:5e3,canvasCache:[],hPadding:0,container:n},t),{limitWidth:n.offsetWidth-2*(t.hPadding||0)}),n.style.overflow="hidden"}),[{key:"_removeCanvas",value:function(){var e=this.options;e.canvasCache.forEach((function(e){var t;null===(t=e.parentElement)||void 0===t||t.removeChild(e)})),e.canvasCache=[]}},{key:"_getCanvas",value:function(e){var t=this.options;return t.canvasCache[e]||this._createCanvasToCount(e+1),t.canvasCache[e]}},{key:"_createCanvasToCount",value:function(e){var t=this.options,n=t.limitHeight,r=t.container,o=t.canvasCache;if(!(o.length>=e))for(var i=o.length;i<e;i++){var a=document.createElement("canvas");a.style.position="absolute",a.style.top=i*n+"px",a.setAttribute("width",String(r.offsetWidth)),a.setAttribute("height",String(n)),r.appendChild(a),o.push(a)}}},{key:"_handleSingleRect",value:function(e){var t=e.x,n=e.y,r=e.index,o=e.width,i=e.height,a=e.callback,l=this.options.limitHeight,u=this._getCanvas(r);if(u){var c=u.getContext("2d");o=Math.max(0,Math.min(t+o,this.options.limitWidth+this.options.hPadding)-Math.max(t,this.options.hPadding)),a({x:t=Math.max(t,this.options.hPadding),y:n-l*r,width:o,height:i,context:c})}}},{key:"_drawRect",value:function(e){var t=e.x,n=e.y,r=e.width,o=e.height,i=e.fill,a=void 0===i?"#FFEC3D":i,l=e.stroke,u=void 0===l?"#FFEC3D":l;this._handleRect({x:t,y:n,width:r,height:o,callback:function(e){var t=e.x,n=e.y,r=e.width,o=e.height,i=e.context;i.fillStyle=a,i.strokeStyle=u,i.fillRect(t,n,r,o)}})}},{key:"_handleRect",value:function(e){for(var t=e.x,n=e.y,r=e.width,o=e.height,i=e.callback,a=this.options.limitHeight,l={x:t,y:n},u=n+o,c=Math.floor(l.y/a),s=Math.floor(u/a),d=c;d<=s;)this._handleSingleRect(Object.assign(Object.assign({},l),{index:d,width:r,height:o,callback:i})),d++}},{key:"getImageData",value:function(e){var t=e.x,n=e.y,r=e.width,o=e.height,i=this.options.limitHeight,a=Math.floor(n/i);return this._getCanvas(a).getContext("2d").getImageData(t,n,r,o)}},{key:"draw",value:function(e,t){this["_draw"+e](t)}},{key:"clearRect",value:function(e){var t=e.x,n=e.y,r=e.width,o=e.height;this._handleRect({x:t,y:n,width:r,height:o,callback:function(e){var t=e.x,n=e.y,r=e.width,o=e.height;e.context.clearRect(t,n,r,o)}})}},{key:"clear",value:function(){this.options.canvasCache.forEach((function(e){var t=e.getContext("2d"),n=Number(e.getAttribute("width")),r=Number(e.getAttribute("height"));t.clearRect(0,0,n,r)}))}},{key:"destroy",value:function(){this._removeCanvas()}}])}(),Sp=function(){return(0,$e.A)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,Ke.A)(this,e),Object.defineProperty(this,"_destroyed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_domRootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_boxNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_drawer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"boxRect",{enumerable:!0,configurable:!0,writable:!0,value:null}),this._domRootNode=t,this._boxNode=document.createElement("div"),this._boxNode.className="ne-drawer-box",t.nextSibling?t.parentNode.insertBefore(this._boxNode,t.nextSibling):t.parentNode.appendChild(this._boxNode),this._drawer=new Rp({container:this._boxNode,hPadding:"number"==typeof n.hPadding?n.hPadding:60}),this.refresh()}),[{key:"insideViewport",value:function(e){return e>=this._drawer.options.hPadding&&e<=this._drawer.options.hPadding+this._drawer.options.limitWidth}},{key:"destroy",value:function(){var e;this._destroyed=!0,this._drawer.destroy(),null===(e=this._boxNode)||void 0===e||e.remove(),this._boxNode=null}},{key:"refresh",value:function(){this._destroyed||(this.boxRect=this._boxNode.getBoundingClientRect())}},{key:"drawRanges",value:function(e,t,n){var r=this;if(this._destroyed||!e.length)return[];var o=this.getDrawRanges(e,n);return o.forEach((function(e){e&&(r._drawRects(e.rects,t),e.style=t)})),o}},{key:"drawRects",value:function(e,t){this._destroyed||this._drawRects(e,t)}},{key:"clearRects",value:function(e){var t=this;this._destroyed||e.forEach((function(e){t._drawer.clearRect(e)}))}},{key:"clearAll",value:function(){this._destroyed||this._drawer.clear()}},{key:"_drawRects",value:function(e,t){var n=this;e.forEach((function(e){n._drawer.draw("Rect",Object.assign(Object.assign({},e),{fill:t&&t.fill,stroke:t&&t.stroke}))}))}},{key:"getDrawRanges",value:function(e,t){var n=this;return this.refresh(),e.map((function(e){var r=n.getRectByViewRange(e,t);if(!r||0===r.length)return null;var o=r[r.length-1].bottom-r[0].top;return{viewRange:e,rects:n.parseRectsCoordinate(r),viewHeight:o}})).filter((function(e){return!!e}))}},{key:"clear",value:function(){this._destroyed||this._drawer.clear()}}])}();function Tp(e,t,n){return jp(e,t,n).map((function(e){return function(e,t,n){var r=document.createRange();return r.setStart(e,t),r.setEnd(e,n),r.getBoundingClientRect()}(e.textNode,e.startOffset,e.endOffset)}))}function jp(e,t,n){bt(t<n,"framework/public/src/drawer/rect-calc.ts:37");var r=[],o=Ip(e,t),i=Ip(e,n);if(o.top===i.top||t+1===n)return r.push({textNode:e,startOffset:t,endOffset:n,top:i.top}),r;var a,l=Math.ceil((n+t)/2),u=Ip(e,l);u.top===o.top?r.push({textNode:e,startOffset:t,endOffset:l,top:o.top}):r=r.concat(jp(e,t,l)),u.top!==i.top?r=r.concat(jp(e,l,n)):r.push({textNode:e,startOffset:l,endOffset:n,top:u.top});var c=[];return r.forEach((function(e){void 0===a||a!==e.top?(c.push(e),a=e.top):c[c.length-1].endOffset=e.endOffset})),c}function Ip(e,t){var n=document.createRange();return n.setStart(e,t),n.collapse(!0),n.getBoundingClientRect()}function Bp(e){var t=e.startContainer,n=e.startOffset,r=e.endContainer,o=e.endOffset,i=document.createRange();i.setStart(t,n),i.setEnd(r,o);var a,l=i.getBoundingClientRect(),u=null,c={x:l.x,y:l.y,top:l.top,left:l.left,width:l.width,height:l.height,right:l.right,bottom:l.bottom};if(t.nodeType===Node.TEXT_NODE){var s=Ip(t,n);(u={top:s.top,left:Math.max(c.left,s.left),width:c.width-s.left+c.left,height:s.height}).x=u.left,u.y=u.top,u.bottom=u.top+u.height,u.right=u.left+u.width,c.height=(c.bottom||0)-u.bottom,c.top=u.bottom,c.y=c.top}if(r.nodeType===Node.TEXT_NODE){var d=Ip(r,o);a={top:d.top,left:c.left,width:d.left-c.left,height:d.height}}else{var f=r.getBoundingClientRect();a={top:f.top,left:c.left,width:f.left-c.left,height:f.height}}a.x=a.left,a.y=a.top,a.bottom=a.top+a.height,a.right=a.left+a.width,c.height=a.top-c.top,c.bottom=a.top;var h=[c];return u&&h.unshift(u),h.push(a),h}function Mp(e,t){var n,r,o;if(Gp(e)||Jp(e))return(null===(n=Cp(e.start.node))||void 0===n?void 0:n.isConnected)?[Cp(e.start.node).getMainDOMNode().getBoundingClientRect()]:null;if(e.collapsed)return function(e){var t,n=e.node,r=e.offset;if(!(null===(t=Cp(n))||void 0===t?void 0:t.isConnected))return null;var o,i=function(e,t){for(var n=0,r=e.length;n<r;n++){var o=Cp(e[n]);if(null==o?void 0:o.isConnected){var i=o.getMainDOMNode();return o.isTextNode()&&(i=i.firstChild),0===n?{node:i,offset:t}:{node:i.parentNode,offset:Ad(i)}}}throw bt(!1,"framework/engine/src/renderer/viewport/drawer/get-rect-by-view-range.ts:494"),new Error("no need this line just for typescript")}([n],r);if(Xp(i.node))o=i.node.getBoundingClientRect();else if(i.node.childNodes&&Xp(i.node.childNodes[i.offset]))o=i.node.childNodes[i.offset].getBoundingClientRect();else if(i.node.nodeType===Node.TEXT_NODE)if(""===i.node.data){var a=i.node.previousSibling,l=i.node.nextSibling,u=i.node.parentNode;a?((o=a.getBoundingClientRect()).x=o.x+o.width,o.width=0):l?(o=l.getBoundingClientRect()).width=0:(o=u.getBoundingClientRect()).width=0}else{var c=document.createRange();c.setStart(i.node,Math.min(i.node.data.length,i.offset)),c.collapse(!0),o=c.getBoundingClientRect()}else if(i.node.nodeType===Node.ELEMENT_NODE){var s=i.node.childNodes[i.offset-1],d=i.node.childNodes[i.offset];s?((o=s.getBoundingClientRect()).x=o.x+o.width,o.width=0):d?(o=d.getBoundingClientRect()).width=0:(o=i.node.getBoundingClientRect()).width=0}return[o]}(e.start);if(!t){var i=Fp(e);if(!i)return;var a=i.start.node,l=i.start.offset,u=i.end.node,c=i.end.offset,s=null===(r=Cp(a))||void 0===r?void 0:r.getMainDOMNode(),d=null===(o=Cp(u))||void 0===o?void 0:o.getMainDOMNode();if(!s||!d)return;return Bp({startContainer:a.isTextNode()?s.firstChild:s,startOffset:l,endContainer:u.isTextNode()?d.firstChild:d,endOffset:c})}var f=Lp(e);if(0===f.length)return[];var h=[];return f.forEach((function(e){var t;if(e.node.isConnected&&(!e.isText||e.startOffset!==e.endOffset)){var n=null===(t=Cp(e.node))||void 0===t?void 0:t.getMainDOMNode();if(e.isText){var r=Tp(n.firstChild,e.startOffset,e.endOffset);h=h.concat(r)}else{var o=n.getBoundingClientRect();h=h.concat([o])}}})),h}function Fp(e){var t=function(e){var t=function(e,t){for(var n=e.start,r=e.end,o=qp(n),i=$p(r);!t(o);){if(o===i)return null;o=Hp(o)}return o}(e,(function(e){return!!(null==e?void 0:e.isConnected)})),n=function(e,t){for(var n=e.start,r=$p(e.end),o=qp(n);!t(r);){if(r===o)return null;r=zp(r)}return r}(e,(function(e){return!!(null==e?void 0:e.isConnected)}));return{start:t,end:n}}(e),n=t.start,r=t.end;if(n)return function(e){for(var t=e.start,n=e.end,r=t.node,o=t.offset,i=n.node,a=n.offset;r&&Up(r)&&r.children[o];)r=r.children[o],o=0;for(;i&&Up(i)&&i.children[a-1];)a=Vp(i=i.children[a-1]);return{start:{node:r,offset:o},end:{node:i,offset:a}}}({start:{node:n,offset:n===e.start.node?e.start.offset:0},end:{node:r,offset:r===e.end.node?e.end.offset:Vp(r)}})}function Lp(e){var t=[];return Yp(t,e.start,e.end),t}function Up(e){return!e.isCardNode()&&"td"!==e.nodeName&&e.children}function Vp(e){return e.isTextNode()?e.dataLength:e.children?e.children.length:0}function Hp(e){if(e.nextSibling)return e.nextSibling;for(;e.parentNode;){if(e.parentNode.nextSibling)return e.parentNode.nextSibling;e=e.parentNode}return null}function zp(e){if(e.previousSibling)return e.previousSibling;for(;e.parentNode;){if(e.parentNode.previousSibling)return e.parentNode.previousSibling;e=e.parentNode}return null}function Wp(e){return e.isTextNode()||e.isCardNode()}function qp(e){var t=e.node,n=e.offset;return Wp(t)?t:t.children&&t.children[n]?t.children[n]:Hp(t)}function $p(e){var t=e.node,n=e.offset;return Wp(t)?t:t.children&&t.children[n-1]?t.children[n-1]:zp(t)}function Kp(e){return e.isCardNode()||"table"===e.nodeName||"tr"===e.nodeName||"td"===e.nodeName}function Yp(e,t,n){var r=function(e){return!!e.nodeName}(t),o=r?t:t.node.isTextNode()?t.node:t.node.children[t.offset],i=n.node.isTextNode()?n.node:n.offset>0?n.node.children[n.offset-1]:null,a=!n.node.isTextNode();if(o===i&&a)e.push({node:o});else if(o&&(Kp(o)?e.push({node:o}):o.isTextNode()&&e.push({isText:!0,node:o,startOffset:r?0:t.offset,endOffset:o===i?n.offset:o.dataLength}),o!==i&&i)){if(!Kp(o)&&o.isElement()&&o.firstChild)return Yp(e,o.firstChild,n);if(o.nextSibling)return Yp(e,o.nextSibling,n);for(;o.parentNode;){if(o.parentNode.nextSibling)return Yp(e,o.parentNode.nextSibling,n);o=o.parentNode}}}function Gp(e){return e.start.node===e.end.node&&"td"===e.start.node.nodeName}function Jp(e){var t,n;return(null===(n=(t=e.start.node).isCardNode)||void 0===n?void 0:n.call(t))&&0===e.start.offset}function Xp(e){return e&&e.classList&&e.classList.contains("ne-b-filler")}function Qp(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Zp()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Zp(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Zp=function(){return!!e})()}var ev=function(e){function t(){return(0,Ke.A)(this,t),Qp(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"parseRectsCoordinate",value:function(e){var t=this;return e.map((function(e){return{x:e.x-t.boxRect.x,y:e.y-t.boxRect.y,width:e.width,height:e.height||20}}))}},{key:"getRectByViewRange",value:function(e){return Mp(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}}])}(Sp);function tv(e){bt(e.isRootNode(),"framework/engine/src/renderer/viewport/render-controller/lib/common/destory-tree-by-root-node.ts:6"),e.children.reverse().forEach((function(e){nv(e)}))}function nv(e){e.isElement()&&e.children.reverse().forEach((function(e){nv(e)})),e.destroy()}var rv=[qe.Block,qe.Hole,qe.LikeRoot,qe.Table,qe.TableRow,"columns","column"],ov=[qe.Hole,qe.TableHole,qe.LikeRoot,qe.Table,qe.TableRow,qe.TableCell,"columns","column"],iv=25,av=33.094,lv="trow",uv="tcell";function cv(e){if(!e.isRootNode()){var t=Cp(e);bt(t,"framework/engine/src/renderer/viewport/render-controller/lib/common/repair-by-view-node.ts:16"),t.repair(),t.isConnected||Cp(e.parentNode).insertByViewNode(e),e.isElement()&&e.children.forEach((function(e){Cp(e)&&cv(e)}))}}function sv(e){if(!e.isRootNode()){var t=Cp(e);bt(t,"framework/engine/src/renderer/viewport/render-controller/lib/common/repair-by-view-node.ts:43"),t.repair(),e.hasCategory(ov)||(t.isConnected||Cp(e.parentNode).insertByViewNode(e),e.isElement()&&e.children.forEach((function(e){Cp(e)&&sv(e)})))}}var dv=o(3398),fv=o.n(dv),hv=null;function pv(e,t){var n=t||{preventDefault:!1};if(e.Manager){var r=e,o=function(e,t){var o=Object.create(n);return t&&r.assign(o,t),pv(new r(e,o),o)};return r.assign(o,r),o.Manager=function(e,t){var o=Object.create(n);return t&&r.assign(o,t),pv(new r.Manager(e,o),o)},o}var i=Object.create(e),a=e.element;function l(e){return e.match(/[^ ]+/g)}function u(e){if("hammer.input"!==e.type){if(e.srcEvent._handled||(e.srcEvent._handled={}),e.srcEvent._handled[e.type])return;e.srcEvent._handled[e.type]=!0}var t=!1;e.stopPropagation=function(){t=!0};var n=e.srcEvent.stopPropagation.bind(e.srcEvent);"function"==typeof n&&(e.srcEvent.stopPropagation=function(){n(),e.stopPropagation()}),e.firstTarget=hv;for(var r=hv;r&&!t;){var o=r.hammer;if(o)for(var i,a=0;a<o.length;a++)if(i=o[a]._handlers[e.type])for(var l=0;l<i.length&&!t;l++)i[l](e);r=r.parentNode}}return a.hammer||(a.hammer=[]),a.hammer.push(i),e.on("hammer.input",(function(e){!0!==n.preventDefault&&n.preventDefault!==e.pointerType||e.preventDefault(),e.isFirst&&(hv=e.target)})),i._handlers={},i.on=function(t,n){return l(t).forEach((function(t){var r=i._handlers[t];r||(i._handlers[t]=r=[],e.on(t,u)),r.push(n)})),i},i.off=function(t,n){return l(t).forEach((function(t){var r=i._handlers[t];r&&((r=n?r.filter((function(e){return e!==n})):[]).length>0?i._handlers[t]=r:(e.off(t,u),delete i._handlers[t]))})),i},i.emit=function(t,n){hv=n.target,e.emit(t,n)},i.destroy=function(){var t=e.element.hammer,n=t.indexOf(i);-1!==n&&t.splice(n,1),t.length||delete e.element.hammer,i._handlers={},e.destroy()},i}var vv={id:"id"},mv=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"syncDOMNodeAttrs",value:function(e,t,n){gv(e,n).forEach((function(e){var n=e.type,r=e.name;n===fp.ATTR_NAME?t.setAttribute(r,e.value):n===fp.STYLE_NAME?t.style[r]=e.value:n===fp.CUSTOM_NAME&&e.value(t)}));try{t.dispatchEvent(new CustomEvent("ne-after-attr-update"))}catch(e){}}},{key:"syncDomNodeAttr",value:function(e,t,n,r){var o=yv(e,n,r);if(o){var i=o.name;o.type===fp.ATTR_NAME?t.setAttribute(i,o.value):o.type===fp.STYLE_NAME?t.style[o.name]=o.value:o.type===fp.CUSTOM_NAME&&o.value(t)}}},{key:"updateDOMNodeAttrs",value:function(e,t,n,r){var o=bv(e,n,r),i=o.updated,a=o.removed;i.forEach((function(e){var n=e.type,r=e.name,o=e.value;n===fp.ATTR_NAME?t.setAttribute(r,o):n===fp.STYLE_NAME?t.style[r]=o:n===fp.CUSTOM_NAME&&o(t)})),a.forEach((function(e){var n=e.type,r=e.name;n===fp.ATTR_NAME?t.removeAttribute(r):n===fp.STYLE_NAME?t.style[r]="":n===fp.CUSTOM_NAME&&e.remove(t)}));try{t.dispatchEvent(new CustomEvent("ne-after-attr-update"))}catch(e){}}},{key:"translateAll",value:function(e,t){return gv(e,t)}},{key:"translateChange",value:function(e,t,n){return bv(e,t,n)}}])}();function gv(e,t){var n=[];return Object.keys(t).forEach((function(r){var o=yv(e,r,t[r]);o&&n.push(o)})),n}function bv(e,t,n){var r=[],o=[];return Object.keys(n).forEach((function(i){var a=n[i];if("remove"===a.type){var l=yv(e,i,a.attrValue);l&&r.push(l)}else{var u=yv(e,i,t[i]);u&&o.push(u)}})),{removed:r,updated:o}}function yv(e,t,n){if(vv[t])return{type:fp.ATTR_NAME,name:vv[t],value:n};if(t.startsWith("data-"))return{type:fp.ATTR_NAME,name:t,value:n};var r=e.getAttrTranslator(t);return r?r.translate(t,n):null}var wv=function(){return(0,$e.A)((function e(t,n){(0,Ke.A)(this,e),Object.defineProperty(this,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isAppear",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_destroyed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_viewNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_domNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_parentNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),bt("*"!==n.nodeName,"framework/engine/src/renderer/node/virtual-node.ts:34"),this.renderer=t,this._viewNode=n}),[{key:"init",value:function(){}},{key:"_init",value:function(){var e,t,n=this.getMainDOMNode(),r=this.getContentDOMNode();vp(n,"_viewNode",this._viewNode),vp(n,"_neRef",this._viewNode),vp(r,"_viewNode",this._viewNode),vp(r,"_neRef",this._viewNode),kp(this._viewNode)&&(n.setAttribute("ne-role","render-unit"),null===(t=null===(e=this.renderer)||void 0===e?void 0:e.emit)||void 0===t||t.call(e,"renderUnitInited",{mainDOMNode:n,viewNode:this.viewNode}))}},{key:"$afterInit",value:function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this.$appear()}},{key:"$appear",value:function(){bt(!1===this._isAppear,"framework/engine/src/renderer/node/virtual-node.ts:77"),this._isAppear=!0}},{key:"$disappear",value:function(){bt(!0===this._isAppear,"framework/engine/src/renderer/node/virtual-node.ts:82"),this._isAppear=!1}},{key:"$afterRefresh",value:function(e){}},{key:"$afterPositionChange",value:function(){}},{key:"destroy",value:function(){this._isAppear=!1,this._destroyed=!0,this._domNode=null}},{key:"$focus",value:function(){}},{key:"$blur",value:function(){}},{key:"registry",get:function(){return this.renderer.registry}},{key:"isConnected",get:function(){var e=this.getMainDOMNode();if(!e||!e.isConnected)return!1;var t=this.getContentDOMNode();return!(!t||!t.isConnected)}},{key:"isDestroyed",get:function(){return this._destroyed}},{key:"iRenderer",get:function(){return this.renderer}},{key:"parentNode",get:function(){var e=this.getMainDOMNode();return xp(null==e?void 0:e.parentNode)},set:function(e){throw new Error("xxx")}},{key:"nodeName",get:function(){return this._viewNode.nodeName}},{key:"viewNode",get:function(){return this._viewNode}},{key:"isAppear",get:function(){return this._isAppear}},{key:"offset",get:function(){var e=this.getMainDOMNode();return e&&e.parentNode?[].indexOf.call(e.parentNode.childNodes,e):-1}},{key:"previousSibling",get:function(){if(!this._parentNode)return null;var e=this._parentNode.children,t=e.indexOf(this);return bt(-1!==t,"framework/engine/src/renderer/node/virtual-node.ts:172"),e[t-1]||null}},{key:"nextSibling",get:function(){if(!this._parentNode)return null;var e=this._parentNode.children,t=e.indexOf(this);return bt(-1!==t,"framework/engine/src/renderer/node/virtual-node.ts:185"),e[t+1]||null}},{key:"isRootNode",value:function(){return!1}},{key:"isTextNode",value:function(){return!1}},{key:"isCardNode",value:function(){return!1}},{key:"isBoxNode",value:function(){return!1}},{key:"isElement",value:function(){return!1}},{key:"isFillerNode",value:function(){return!1}},{key:"isBlockFillerNode",value:function(){return!1}},{key:"isInlineFillerNode",value:function(){return!1}},{key:"isTextFillerNode",value:function(){return!1}},{key:"updateAttribute",value:function(e,t){this._domNode&&mv.updateDOMNodeAttrs(this.registry,this._domNode,this._viewNode.attrs,e)}},{key:"repair",value:function(){}},{key:"getMainDOMNode",value:function(){return this._domNode}},{key:"getContentDOMNode",value:function(){return this._domNode}}])}();function Av(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,kv()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function kv(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(kv=function(){return!!e})()}var _v=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Av(this,t,arguments),Object.defineProperty(e,"_instance",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_cardRootNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_disabled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_focused",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_isFirstAppear",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(e,"_hasChange",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_callAppeared",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_hammerManager",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_hoverTimer",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(e,"_hovered",{enumerable:!0,configurable:!0,writable:!0,value:!1}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"isCardNode",value:function(){return!0}},{key:"isFocused",value:function(){return this._focused}},{key:"init",value:function(){var e=this._viewNode,t=e.nodeName,n=e.attrs,r=this.registry.getCardClass(t);bt(r,"CardClass for ".concat(t," not registered"),"framework/engine/src/renderer/node/virtual-card-node.ts:42");var o=this._createContainer(t),i=o.container,a=o.cardRootNode;i.setAttribute("id",n.id),this._cardRootNode=a,this._domNode=i,vp(this._domNode,"_neRef",this._viewNode),mv.syncDOMNodeAttrs(this.registry,this._domNode,this._viewNode.attrs),this._hammerManager=pv(new(fv().Manager)(this._cardRootNode))}},{key:"$afterInit",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._newInstance(),Tr((0,Je.A)(t.prototype),"$afterInit",this).call(this,e),this.$enableHover(),this.$enableClick(),this.$enableMousedown(),this.$enableTap(),this.$enableLongPress()}},{key:"$unCollapsed",value:function(){var e,t;null===(t=null===(e=this._instance)||void 0===e?void 0:e.$unCollapsed)||void 0===t||t.call(e),this._callAppeared&&this._isFirstAppear&&this.$appear()}},{key:"$appear",value:function(){var e,n;if(this._callAppeared=!0,!(null===(e=this._instance)||void 0===e?void 0:e.isInCollapsed)){Tr((0,Je.A)(t.prototype),"$appear",this).call(this);var r=this._isFirstAppear;this._isFirstAppear=!1,null===(n=this._instance)||void 0===n||n.$appear(r,this._hasChange)}}},{key:"$disappear",value:function(){var e;null===(e=this._instance)||void 0===e||e.$disappear(),Tr((0,Je.A)(t.prototype),"$disappear",this).call(this)}},{key:"_newInstance",value:function(){var e,t=this._viewNode.nodeName,n=this.registry.getCardClass(t);bt(n,"CardClass for ".concat(t," not registered"),"framework/engine/src/renderer/node/virtual-card-node.ts:97");var r=n.definition,o=n.pluginInstance;bt(r&&o,"framework/engine/src/renderer/node/virtual-card-node.ts:99"),this._instance="factory"in r?r.factory(this.renderer,this._viewNode,this._cardRootNode,o,r.pluginContext):new r(this.renderer,this._viewNode,this._cardRootNode,o),null===(e=this._instance)||void 0===e||e.init()}},{key:"$afterRefresh",value:function(e){var n;bt("boolean"==typeof e,"framework/engine/src/renderer/node/virtual-card-node.ts:123"),this._isAppear?this._hasChange=!1:this._hasChange=!0,null===(n=this._instance)||void 0===n||n.$didUpdate(e),Tr((0,Je.A)(t.prototype),"$afterRefresh",this).call(this)}},{key:"$disable",value:function(){this._disabled=!0,this._domNode&&this._domNode.classList.add("ne-card-mask")}},{key:"$enable",value:function(){this._disabled=!1,this._domNode&&this._domNode.classList.remove("ne-card-mask")}},{key:"$enableHover",value:function(){var e=this;this._cardRootNode&&(pc(this,this._cardRootNode,"mouseenter",(function(t){e.$mouseenter(t),e._hoverTimer=window.setTimeout((function(){e.$hover()}),200)})),pc(this,this._cardRootNode,"mouseleave",(function(){e._hoverTimer&&clearTimeout(e._hoverTimer),e.$leave()})))}},{key:"$enableClick",value:function(){var e=this;this._cardRootNode&&pc(this,this._cardRootNode,"click",(function(t){e.$click(t)}))}},{key:"$enableMousedown",value:function(){var e=this;this._cardRootNode&&pc(this,this._cardRootNode,"mousedown",(function(t){e.$mousedown(t)}))}},{key:"$enableLongPress",value:function(){var e=this;this._cardRootNode&&cd(this,this._cardRootNode,(function(){e.$longPress()}))}},{key:"$enableTap",value:function(){var e=this;this._cardRootNode&&this._hammerManager&&(this._hammerManager.add(new(fv().Tap)),this._hammerManager.on("tap",(function(t){e.$tap(t)})))}},{key:"$longPress",value:function(){var e;this._disabled||null===(e=this._instance)||void 0===e||e._$longPress()}},{key:"$click",value:function(e){var t;this._disabled||null===(t=this._instance)||void 0===t||t._$click(e)}},{key:"$mouseenter",value:function(e){var t;this._disabled||null===(t=this._instance)||void 0===t||t._$mouseenter(e)}},{key:"$mousedown",value:function(e){var t;this._disabled||null===(t=this._instance)||void 0===t||t._$mousedown(e)}},{key:"$tap",value:function(e){var t;this._disabled||null===(t=this._instance)||void 0===t||t._$tap(e)}},{key:"$hover",value:function(){var e;this._disabled||(this._domNode&&this._domNode.classList.add("ne-card-hovered"),null===(e=this._instance)||void 0===e||e._$hover(),this._hovered=!0)}},{key:"$leave",value:function(){this._instance&&!this._disabled&&this._hovered&&(this._domNode&&this._domNode.classList.remove("ne-card-hovered"),this._instance._$leave(),this._hovered=!1)}},{key:"$focus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._instance&&(this._disabled||e&&!this._instance.constructor.$ExternalFocus||(this._instance._$beforeFocus(),this._focused=!0,this._instance.$focus(),this._instance._$afterFocus()))}},{key:"$blur",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this._disabled&&this._instance){if(e&&!this._instance.constructor.$ExternalFocus)return;this._instance._$beforeBlur(),this._focused=!1,this._instance.$blur()}}},{key:"destroy",value:function(){var e;this._instance&&(this._instance.destroy(),this._instance._$destroy(),this._instance=null),null===(e=this._hammerManager)||void 0===e||e.destroy(),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}}])}(wv);function Cv(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Nv()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Nv(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Nv=function(){return!!e})()}Object.defineProperty(_v,"$ExternalFocus",{enumerable:!0,configurable:!0,writable:!0,value:!1});var Ov=function(e){function t(){return(0,Ke.A)(this,t),Cv(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"_createContainer",value:function(e){var t=document.createElement("ne-card"),n=document.createElement("ne-card-root");return t.setAttribute("data-card-name",e),t.setAttribute("data-card-type","block"),t.contentEditable="false",t.appendChild(n),{cardRootNode:n,container:t}}}])}(_v);function xv(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Ev()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Ev(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ev=function(){return!!e})()}var Dv=function(e){function t(){return(0,Ke.A)(this,t),xv(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"isFillerNode",value:function(){return!0}},{key:"isBlockFillerNode",value:function(){return!0}},{key:"init",value:function(){this._domNode=document.createElement("span"),this._domNode.className="ne-b-filler",this._domNode.appendChild(document.createElement("br"))}},{key:"$afterRefresh",value:function(){this._repair()}},{key:"repair",value:function(){this._repair()}},{key:"_repair",value:function(){var e;this._domNode&&(1===this._domNode.childNodes.length&&"BR"===(null===(e=this._domNode.firstChild)||void 0===e?void 0:e.nodeName)||(this._domNode.innerHTML="<br>"))}}])}(wv);function Pv(e,t){var n=Cp(t);bt(n&&!n.isDestroyed,"framework/engine/src/renderer/node/helper/insert-by-view-node.ts:22"),Rv(e.getContentDOMNode(),t,n.getMainDOMNode())}function Rv(e,t,n){if(Array.from(e.childNodes).forEach((function(e){wp(e)||e.remove()})),0!==e.childNodes.length){var r=xp(e),o=t.previousSibling,i=t.nextSibling,a=Cp(i),l=Cp(o);if(i&&a&&a.parentNode===r){var u=a.getMainDOMNode();u.previousSibling!==n&&e.insertBefore(n,u),function(e,t){var n=t.previousSibling;if(n){var r=xp(e),o=Cp(n),i=Cp(t);o&&(null==o?void 0:o.isConnected)&&(null==o?void 0:o.parentNode)===r&&Tv(o)>Tv(i)&&Rv(e,n,o.getMainDOMNode())}}(e,t)}else if(o&&l&&l.parentNode===r){var c=l.getMainDOMNode();if(c.nextSibling)c.nextSibling!==n&&e.insertBefore(n,c.nextSibling),function(e,t){var n=t.nextSibling;if(n){var r=xp(e),o=Cp(n),i=Cp(t);o&&o.isConnected&&o.parentNode===r&&Tv(o)<Tv(i)&&Rv(e,n,o.getMainDOMNode())}}(e,t);else{if(e.lastChild===n)return;e.appendChild(n)}}else{var s=e.childNodes;Sv(s,n,t,0,s.length)}}else e.appendChild(n)}function Sv(e,t,n,r,o){bt(r<o,"framework/engine/src/renderer/node/helper/insert-by-view-node.ts:105");var i=Math.floor((r+o)/2),a=e[i];if(a!==t){var l=wp(a);if(bt(l,"framework/engine/src/renderer/node/helper/insert-by-view-node.ts:119"),l.compare(n).following)return i===r?void(a.previousSibling!==t&&e[0].parentNode.insertBefore(t,a)):void Sv(e,t,n,r,i);if(i+1!==o)return Sv(e,t,n,i,o);a.nextSibling?a.nextSibling!==t&&e[0].parentNode.insertBefore(t,a.nextSibling):e[0].parentNode.lastChild!==t&&e[0].parentNode.appendChild(t)}}function Tv(e){var t=e.parentNode.children.indexOf(e);return bt(t>-1,"framework/engine/src/renderer/node/helper/insert-by-view-node.ts:228"),t}function jv(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Iv()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Iv(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Iv=function(){return!!e})()}var Bv=function(e){function t(){return(0,Ke.A)(this,t),jv(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"children",get:function(){var e=this.getContentDOMNode();return e?(bt(e,"framework/engine/src/renderer/node/virtual-container-node.ts:18"),Array.from(e.childNodes).map((function(e){var t=wp(e);return t?Cp(t):null})).filter(Boolean)):[]}},{key:"insertByViewNode",value:function(e){Pv(this,e)}},{key:"repair",value:function(){var e=this.getContentDOMNode();e&&Array.from(e.childNodes).forEach((function(e){wp(e)||e.remove()}))}},{key:"removeChild",value:function(e){this.getContentDOMNode().removeChild(e.getMainDOMNode())}}])}(wv);function Mv(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Fv()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Fv(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Fv=function(){return!!e})()}var Lv=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Mv(this,t,arguments),Object.defineProperty(e,"_instance",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_ui",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_isFirstAppear",{enumerable:!0,configurable:!0,writable:!0,value:!0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"isBoxNode",value:function(){return!0}},{key:"isElement",value:function(){return!0}},{key:"init",value:function(){this._newInstance()}},{key:"$afterInit",value:function(){var e;null===(e=this._instance)||void 0===e||e._afterInit(),Tr((0,Je.A)(t.prototype),"$afterInit",this).call(this,!0)}},{key:"$appear",value:function(){var e;Tr((0,Je.A)(t.prototype),"$appear",this).call(this);var n=this._isFirstAppear;this._isFirstAppear=!1,null===(e=this._instance)||void 0===e||e.$appear(n)}},{key:"$disappear",value:function(){var e;null===(e=this._instance)||void 0===e||e.$disappear(),Tr((0,Je.A)(t.prototype),"$disappear",this).call(this)}},{key:"$afterPositionChange",value:function(){var e;Tr((0,Je.A)(t.prototype),"$afterPositionChange",this).call(this),null===(e=this._instance)||void 0===e||e.$didPositionChange()}},{key:"$afterRefresh",value:function(e){var n;bt("boolean"==typeof e,"framework/engine/src/renderer/node/virtual-box-node.ts:51"),Tr((0,Je.A)(t.prototype),"$afterRefresh",this).call(this),null===(n=this._instance)||void 0===n||n.$didUpdate(e)}},{key:"destroy",value:function(){var e,n,r,o;null===(e=this._instance)||void 0===e||e.destroy(),null===(n=this._instance)||void 0===n||n._$destroy(),this._ui&&(null===(o=(r=this._ui).destroy)||void 0===o||o.call(r)),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}},{key:"updateAttribute",value:function(e,t){var n;bt(this._instance,"framework/engine/src/renderer/node/virtual-box-node.ts:66"),null===(n=this._instance)||void 0===n||n.updateAttribute(mv.translateChange(this.registry,this._viewNode.attrs,e),e,t)}},{key:"_newInstance",value:function(){var e,t=this._viewNode,n=this.registry.getBoxDefinition(t.nodeName),r=this.registry.getBoxUIDefinition(t.nodeName);if(n){if(bt("clazz"in n||"factory"in n,"framework/engine/src/renderer/node/virtual-box-node.ts:88"),this._instance="clazz"in n?new n.clazz(this.renderer,t,t.nodeName,n.pluginContext):n.factory(this.renderer,t,t.nodeName,n.pluginContext),null===(e=this._instance)||void 0===e||e.init(mv.translateAll(this.registry,t.attrs)),this._domNode=this._instance.getMainDOMNode(),bp(this._domNode,t),r&&"factory"in r)try{this._ui=r.factory(this._instance,t,this.renderer)}catch(e){console.warn(e)}}else console.warn("failed to create box-instance",t.nodeName)}},{key:"repair",value:function(){var e,t;null===(t=null===(e=this._instance)||void 0===e?void 0:e.repair)||void 0===t||t.call(e)}},{key:"getMainDOMNode",value:function(){return this._domNode}},{key:"getContentDOMNode",value:function(){return this._instance.getContentDOMNode()}}])}(Bv);function Uv(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Vv()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Vv(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Vv=function(){return!!e})()}var Hv=function(e){function t(){return(0,Ke.A)(this,t),Uv(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"isElement",value:function(){return!0}},{key:"init",value:function(){var e=this._viewNode;this._domNode=document.createElement("ne-".concat(tf(this.nodeName))),bp(this._domNode,e),mv.syncDOMNodeAttrs(this.registry,this._domNode,e.attrs)}}])}(Bv);function zv(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Wv()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Wv(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Wv=function(){return!!e})()}var qv=function(e){function t(){return(0,Ke.A)(this,t),zv(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"_createContainer",value:function(e){var t=document.createElement("ne-card"),n=document.createElement("ne-card-root");return t.setAttribute("data-card-name",e),t.setAttribute("data-card-type","inline"),t.contentEditable="false",t.appendChild(n),{cardRootNode:n,container:t}}}])}(_v);function $v(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Kv()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Kv(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Kv=function(){return!!e})()}var Yv=function(e){function t(){return(0,Ke.A)(this,t),$v(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"isFillerNode",value:function(){return!0}},{key:"isInlineFillerNode",value:function(){return!0}},{key:"init",value:function(){var e=document.createElement("span");e.className="ne-i-filler",e.appendChild(document.createElement("br")),this._domNode=e,bp(this._domNode,this._viewNode)}},{key:"$afterRefresh",value:function(){this._repair()}},{key:"repair",value:function(){this._repair()}},{key:"_repair",value:function(){var e;this._domNode&&(1===this._domNode.childNodes.length&&"BR"===(null===(e=this._domNode.firstChild)||void 0===e?void 0:e.nodeName)||(this._domNode.innerHTML="<br>"))}}])}(wv);function Gv(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Jv()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Jv(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Jv=function(){return!!e})()}var Xv=function(e){function t(){return(0,Ke.A)(this,t),Gv(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"isFillerNode",value:function(){return!0}},{key:"isTextFillerNode",value:function(){return!0}},{key:"init",value:function(){var e=document.createElement("span");e.className="ne-t-filler",e.innerHTML="\ufeff",this._domNode=e,bp(this._domNode,this._viewNode)}},{key:"$afterRefresh",value:function(){this._repair()}},{key:"repair",value:function(){this._repair()}},{key:"_repair",value:function(){1===this._domNode.childNodes.length&&"\ufeff"===this._domNode.firstChild.data||(this._domNode.innerHTML="\ufeff")}}])}(wv);function Qv(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Zv()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Zv(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Zv=function(){return!!e})()}var em=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Qv(this,t,arguments),Object.defineProperty(e,"_textNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e=this;this._domNode=document.createElement("ne-text"),this._textNode=document.createTextNode(""),this._domNode.appendChild(this._textNode),bp(this._domNode,this._viewNode),this._updateTextData(),mv.syncDOMNodeAttrs(this.registry,this._domNode,this._viewNode.attrs),xc(this,this.renderer.theme,"themeChange",(function(){if(e._domNode){var t=e._viewNode.attrs;t.color&&mv.syncDomNodeAttr(e.registry,e._domNode,"color",t.color),t.bgColor&&mv.syncDomNodeAttr(e.registry,e._domNode,"bgColor",t.bgColor)}}))}},{key:"isConnected",get:function(){var e,t;return!!(null===(e=this._domNode)||void 0===e?void 0:e.isConnected)&&!!(null===(t=this._textNode)||void 0===t?void 0:t.isConnected)}},{key:"isTextNode",value:function(){return!0}},{key:"updateTextData",value:function(){this._updateTextData()}},{key:"repair",value:function(){this._updateTextData(),1===this._domNode.childNodes.length&&this._domNode.firstChild===this._textNode||(this._domNode.innerHTML="",this._domNode.appendChild(this._textNode))}},{key:"_updateTextData",value:function(){var e=this._viewNode.data;this._textNode.data!==e&&(this._textNode.data=e||"")}}])}(wv);function tm(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];bt(!Cp(t),"framework/engine/src/renderer/viewport/printer/helpers/create-by-view-node.ts:23");var r=function(e,t){return t.isTextNode()?new em(e,t):t.isBlockCardNode()?new Ov(e,t):t.isInlineCardNode()?new qv(e,t):e.registry.isBoxNode(t.nodeName)?new Lv(e,t):t.isTextFillerNode()?new Xv(e,t):t.isBlockFillerNode()?new Dv(e,t):t.isInlineFillerNode()?new Yv(e,t):(bt(t.isElement(),"framework/engine/src/renderer/viewport/printer/helpers/create-by-view-node.ts:70"),new Hv(e,t))}(e,t);Op(t,r),r.init(),r._init(),Cp(t.parentNode).insertByViewNode(t),r.$afterInit(n)}function nm(e){return e.slice().sort((function(e,t){var n=e.compare(t);return bt(!n.equal,"framework/engine/src/renderer/viewport/printer/helpers/sort-view-node.ts:8"),n.contains||n.preceding?-1:1}))}var rm=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"destroyByViewNodes",value:function(e){e.forEach((function(e){var t=Cp(e);t&&!t.isDestroyed&&(Np(e),t.getMainDOMNode().remove(),t.destroy())}))}},{key:"createByViewNodes",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(t=nm(t)).forEach((function(t){Cp(t)||tm(e,t,n)}))}},{key:"attachTreeByViewNode",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];bt(kp(t),"framework/engine/src/renderer/viewport/printer/index.ts:63"),t.ancestors.slice(1).filter((function(e){var t=Cp(e);return!t||!t.isConnected})).concat(om(t)).forEach((function(r){Cp(r)?(t===r&&e.repairByViewNode(r),Cp(r.parentNode).insertByViewNode(r)):tm(e,r,n)}))}},{key:"forceAttachTreeByViewNode",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];bt(kp(t),"framework/engine/src/renderer/viewport/printer/index.ts:99"),t.ancestors.slice(1).concat(om(t)).forEach((function(r){Cp(r)?(t===r&&e.repairByViewNode(r),Cp(r.parentNode).insertByViewNode(r)):tm(e,r,n)}))}},{key:"forceAttachTreeByViewNodeNotRenderChildren",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.ancestors.slice(1);r=n?r.concat(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.push(e),e.isElement()&&!e.hasCategory([qe.LikeRoot])&&e.children.forEach((function(e){om(e,t)})),t}(t)):r.concat(om(t)),r.forEach((function(n){Cp(n)?(t===n&&e.repairByViewNode(n),Cp(n.parentNode).insertByViewNode(n)):tm(e,n,!0)}))}},{key:"updateTextByViewNodes",value:function(e){e.forEach((function(e){var t=Cp(e);bt(t&&t.isTextNode(),"framework/engine/src/renderer/viewport/printer/index.ts:165"),t.updateTextData()}))}},{key:"updateAttrByAttrChanges",value:function(e,t){e.forEach((function(e){var n=e.node,r=e.attrs,o=Cp(n);bt(o,"framework/engine/src/renderer/viewport/printer/index.ts:183"),o.updateAttribute(r,t),o.$afterRefresh(t)}))}},{key:"resetPosition",value:function(e,t,n,r){t.forEach((function(e){bt(e.isConnected,"framework/engine/src/renderer/viewport/printer/index.ts:197"),Cp(e.parentNode).insertByViewNode(e),r(e)&&Cp(e).$afterRefresh(n)}))}}])}();function om(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.push(e),e.isElement()&&e.children.forEach((function(e){om(e,t)})),t}function im(e,t,n){if(t){var r=t.attrChanges;rm.updateAttrByAttrChanges(r,n)}}function am(e,t,n,r){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=n.addedNodes,a=n.textChanges,l=n.attrChanges,u=n.positionChanges,c=t.viewNode.ancestors;rm.updateTextByViewNodes(a),rm.updateAttrByAttrChanges(l,r);for(var s=c.length-1;s>=1;s--)Cp(c[s])||i.unshift(c[s]);rm.createByViewNodes(e,i,o),rm.resetPosition(e,u,r,(function(e){return!l.includes(e)}))}function lm(e,t){if(e.isRootNode())return e.children[t]||e.children[t-1];for(var n=e;n;){var r=n.parentNode;if(null==r?void 0:r.isRootNode())return n;n=r}bt(!1,"framework/engine/src/renderer/viewport/render-controller/lib/common/get-point-node.ts:23")}var um=function(){function e(){(0,Ke.A)(this,e)}return(0,$e.A)(e,null,[{key:"renderByChanges",value:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=t.removedNodes,i=t.addedNodes,a=t.textChanges,l=t.attrChanges,u=t.positionChanges,c=e.renderUnitManager,s=e.renderer;rm.destroyByViewNodes(o);var d=new Set;new Set([].concat((0,ln.A)(i),(0,ln.A)(l.map((function(e){return e.node}))),(0,ln.A)(a),(0,ln.A)(u))).forEach((function(e){var t=c.getRenderUnitWithAncestor(e);t&&d.add(t)}));var f=cm(c,a.map((function(e){return{viewNode:e,payload:e}}))),h=cm(c,l.map((function(e){return{viewNode:e.node,payload:e}}))),p=function(e){var t=e.addedNodeMap,n=e.attrChangesMap,r=e.textChangesMap,o=e.positionChangesMap;return function(e){return{addedNodes:Array.from(t.get(e)||[]),textChanges:Array.from(r.get(e)||[]),attrChanges:Array.from(n.get(e)||[]),positionChanges:Array.from(o.get(e)||[])}}}({addedNodeMap:cm(c,i.map((function(e){return{viewNode:e,payload:e}}))),attrChangesMap:h,textChangesMap:f,positionChangesMap:cm(c,u.map((function(e){return{viewNode:e,payload:e}})))});Array.from(d).sort((function(e,t){var n=e.viewNode,r=t.viewNode,o=n.compare(r);return o.following||o.containedBy||o.contains?1:(bt(o.preceding,"framework/engine/src/renderer/viewport/render-controller/lib/common/general-render-helper/index.ts:116"),-1)})).forEach((function(e){am(s,e,p(e),n,r)})),im(0,p("*"),n),u.forEach((function(e){var t=Cp(e);bt.fatal(t,"[general-render-controller]位置改变的节点没有挂载","framework/engine/src/renderer/viewport/render-controller/lib/common/general-render-helper/index.ts:128"),t.$afterPositionChange()}))}},{key:"repairByViewNode",value:function(e){return cv(e)}},{key:"repairByViewRanges",value:function(t){var n=new Set;t.forEach((function(e){var t=e.start,r=e.end,o=lm(t.node,t.offset),i=lm(r.node,r.offset);if(o)do{if(n.add(o),o===i)return;o=o.nextSibling}while(o)})),n.forEach((function(t){e.repairByViewNode(t)}))}}])}();function cm(e,t){var n=new Map;return t.forEach((function(t){var r=t.viewNode,o=t.payload,i=e.getRenderUnitWithAncestor(r);i||(i="*"),n.has(i)||n.set(i,new Set),n.get(i).add(o)})),n}function sm(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t.isDirty();if(t.unmarkDirty(),r)return rm.forceAttachTreeByViewNode(e,t.viewNode,n),!0;var o=!t._virtualNode;return t.isConnected||rm.attachTreeByViewNode(e,t.viewNode,n),o}function dm(e,t){for(var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.renderer,o=t;o;)sm(r,o,n),o=o.nextUnit}var fm="start",hm="end",pm="topRight",vm="bottomLeft";function mm(e,t){var n=gm(e,t.start),r=n;t.collapsed||(r=gm(e,t.end));var o=document.createRange();return o.setStart(n.node,n.offset),o.setEnd(r.node,r.offset),o}function gm(e,t){var n=t.node,r=t.offset,o=Cp(n);if(bt(o,"framework/engine/src/renderer/viewport/helpers/to-dom-range.ts:34"),o.isConnected||(console.warn("选区映射修复 1",o),bm(e,o)),bt(o.isConnected,"framework/engine/src/renderer/viewport/helpers/to-dom-range.ts:41"),n.isTextNode())return{node:o.getContentDOMNode().firstChild,offset:r};if(n.isFillerNode())return{node:o.getMainDOMNode(),offset:r};if(n.isCardNode())return bt(0===t.offset,"framework/engine/src/renderer/viewport/helpers/to-dom-range.ts:58"),{node:o.getMainDOMNode(),offset:0};bt(n.isElement(),"framework/engine/src/renderer/viewport/helpers/to-dom-range.ts:66");var i=n,a=i.getChildByOffset(r),l=0;if(a||(a=i.getChildByOffset(r-1),l=1),!a)return bt(0===r&&n.hasCategory([qe.Root,qe.LikeRoot,qe.TextContainer]),"framework/engine/src/renderer/viewport/helpers/to-dom-range.ts:79"),{node:Cp(n).getMainDOMNode(),offset:0};bt(a,"framework/engine/src/renderer/viewport/helpers/to-dom-range.ts:94");var u=Cp(a);return bt(u,"framework/engine/src/renderer/viewport/helpers/to-dom-range.ts:100"),u.isConnected||(console.warn("选区映射修复 2",o),bm(e,u)),bt(u.isConnected,"framework/engine/src/renderer/viewport/helpers/to-dom-range.ts:107"),{node:u.getMainDOMNode().parentNode,offset:u.offset+l}}function bm(e,t){for(var n=t.viewNode,r=n.parentNode;r&&!r.isRootNode()&&!Cp(r).isConnected;){var o=r.parentNode;if(o.isRootNode())break;r=o}r?(r.isRootNode()?e.repairByViewNode(n):e.repairByViewNode(r),t.isConnected?console.log("修复成功",t):console.warn("修复失败，修复结果不符合预期",t,r)):console.warn("修复失败，未找到有效的节点",t)}var ym=110,wm=94,Am=10;function km(e){var t=e.getBoundingClientRect();return Object.assign(Object.assign({},t),{top:0,left:0,bottom:t.height,right:t.width})}function _m(e){var t=e.getBoundingClientRect();if(t.height>0)return t;var n=e.startContainer,r=e.startOffset;return n.nodeType===Node.TEXT_NODE?function(e,t){if(e.data.length){var n=document.createRange();return 0===t?(n.setStart(e,0),n.setEnd(e,1)):(n.setStart(e,t-1),n.setEnd(e,t)),n.getBoundingClientRect()}bt(0===Ad(e),"framework/engine/src/renderer/viewport/helpers/scroll-to-view-selection-for-read-write.ts:182");var r=e.parentNode.getBoundingClientRect();return r.height?r:e.parentNode.parentNode.getBoundingClientRect()}(n,r):function(e,t){var n=(e.childNodes[t-1]||e.childNodes[t]||e).getBoundingClientRect();return{top:n.top,bottom:n.bottom,height:1}}(n,r)}var Cm=110;function Nm(e,t,n,r){var o,i;if(n===document.documentElement||(null===(i=null===(o=document.documentElement)||void 0===o?void 0:o.classList)||void 0===i?void 0:i.contains("layout-read-write")))return function(e,t,n,r){var o=r.firstRange;if(t)!function(e,t,n){var r=n===(fm||pm),o=r?{node:t.startContainer,offset:t.startOffset}:{node:t.endContainer,offset:t.endOffset};(t=t.cloneRange()).setStart(o.node,o.offset),t.collapse(!0);var i=km(e),a=_m(t),l=a.top,u=a.bottom;if(!(l<=i.top&&u>=i.bottom))if(r)l<wm&&(e.scrollTop-=wm-l);else{if(u>i.bottom)return void(e.scrollTop+=u-i.bottom);if(u<wm){var c=wm-l;u+c>i.bottom?e.scrollTop-=i.bottom-u:e.scrollTop-=c}}}(n,mm(e,o),r.focus);else{if(r.isTableSelection)return;!function(e,t){var n=km(e),r=_m(t);if(!(r.height>n.height)){var o=function(e,t){return t.top<wm?t.top-wm-t.height-Am:t.bottom>e.bottom-ym?t.bottom-e.bottom+ym:null}(n,r);null!==o&&e.scrollTop+e.offsetHeight+o<e.scrollHeight&&(e.scrollTop+=o)}}(n,mm(e,o))}}(e,t,n,r);var a=r.firstRange;if(t)!function(e,t,n){var r=n===(fm||pm),o=r?{node:t.startContainer,offset:t.startOffset}:{node:t.endContainer,offset:t.endOffset};(t=t.cloneRange()).setStart(o.node,o.offset),t.collapse(!0);var i=e.getBoundingClientRect(),a=Om(t),l=a.top,u=a.bottom;if(!(l<=i.top&&u>=i.bottom))if(r)l<i.top&&(e.scrollTop-=i.top-l);else{if(u>i.bottom)return void(e.scrollTop+=u-i.bottom);if(u<i.top){var c=i.top-l;u+c>i.bottom?e.scrollTop-=i.bottom-u:e.scrollTop-=c}}}(n,mm(e,a),r.focus);else{if(r.isTableSelection)return;!function(e,t){var n=e.getBoundingClientRect(),r=Om(t);if(!(r.height>n.height)){var o=function(e,t){var n;if(t.top<e.top)return t.top-e.top;var r=null===(n=window.visualViewport)||void 0===n?void 0:n.height;(null===window||void 0===window?void 0:window._native_visual_viewport_height)&&(r=null===window||void 0===window?void 0:window._native_visual_viewport_height);var o=Math.min(e.bottom,r||Number.MAX_SAFE_INTEGER),i=Cm;return(null===window||void 0===window?void 0:window._native_bottom_buffer)&&(i=null===window||void 0===window?void 0:window._native_bottom_buffer),t.bottom>o-i?t.bottom-o+i:null}(n,r);null!==o&&(e.scrollTop+=o)}}(n,mm(e,a))}}function Om(e){var t=e.getBoundingClientRect();if(t.height>0)return t;var n=e.startContainer,r=e.startOffset;return n.nodeType===Node.TEXT_NODE?function(e,t){if(e.data.length){var n=document.createRange();return 0===t?(n.setStart(e,0),n.setEnd(e,1)):(n.setStart(e,t-1),n.setEnd(e,t)),n.getBoundingClientRect()}bt(0===Ad(e),"framework/engine/src/renderer/viewport/helpers/scroll-to-view-selection.ts:191");var r=e.parentNode.getBoundingClientRect();return r.height?r:e.parentNode.parentNode.getBoundingClientRect()}(n,r):function(e,t){var n=(e.childNodes[t]||e.childNodes[t-1]||e).getBoundingClientRect();return{top:n.top,bottom:n.bottom,height:1}}(n,r)}var xm=function(){return(0,$e.A)((function e(t,n,r,o){var i=this;(0,Ke.A)(this,e),Object.defineProperty(this,"_viewport",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_editDOMNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_scrollNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_engineOption",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_firstRendered",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"requestSetScrollTo",{enumerable:!0,configurable:!0,writable:!0,value:function(e){i._viewport.renderer.scrollNode.scrollTop=e}}),this._viewport=t,this._editDOMNode=n,this._scrollNode=r,this._engineOption=o}),[{key:"destroy",value:function(){tv(this._viewport.virtualRootNode),this._viewport=null,this._editDOMNode=null,this._scrollNode=null}},{key:"applyContentChange",value:function(e,t,n){if(!this._firstRendered)return this._firstRender();um.renderByChanges(this._viewport,e,n,!this._engineOption.allowCardLazyInit)}},{key:"applySelectionChange",value:function(){}},{key:"repairByViewNode",value:function(e){um.repairByViewNode(e)}},{key:"repairByViewRange",value:function(e){um.repairByViewRanges([e])}},{key:"repairByViewRanges",value:function(e){um.repairByViewRanges(e)}},{key:"scrollToSelection",value:function(e,t){var n=this._viewport.renderer;Nm(n,e,n.scrollNode,t)}},{key:"scrollByNodeId",value:function(e){var t=document.getElementById(e);if(t){var n=t.getBoundingClientRect(),r=this._scrollNode.getBoundingClientRect();this._scrollNode.scrollTop=n.top-r.top}}},{key:"_firstRender",value:function(){bt(!this._firstRendered,"framework/engine/src/renderer/viewport/render-controller/lib/general-render-controller/index.ts:90"),this._firstRendered=!0;var e=this._viewport,t=e.renderUnitManager.getFirstRenderUnitByViewNode(e.viewRootNode);dm(this._viewport,t,!this._engineOption.allowCardLazyInit),this._viewport.renderer.emit("generalRenderCompleted")}},{key:"repaintByScroll",value:function(){}}])}();function Em(e,t,n){var r,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=e.viewport,a=i.renderUnitManager,l=i.renderer,u=t.removedNodes,c=t.addedNodes,s=t.textChanges,d=t.attrChanges,f=t.positionChanges;rm.destroyByViewNodes(u),r=s,rm.updateTextByViewNodes(r.filter((function(e){return Cp(e)}))),function(e,t){rm.updateAttrByAttrChanges(e.filter((function(e){return Cp(e.node)})),t)}(d,n),function(e,t,n,r,o,i,a){var l=new Set,u=new Set;n.forEach((function(e){var n=t.getRenderUnitWithAncestor(e);if(!n)return!1;n.markDirty(),l.add(n)})),r.forEach((function(e){var n=t.getRenderUnitWithAncestor(e);bt(n,"framework/engine/src/renderer/viewport/render-controller/lib/tile-render-controller/tile-processor/helpers/apply-changes.ts:103"),n.viewNode!==e&&n.isConnected?u.add(e):(n.markDirty(),l.add(n))})),l.forEach((function(t){sm(e,t,a)})),rm.resetPosition(e,u,o,(function(e){return!d.includes(e)})),r.forEach((function(e){var t=Cp(e);bt.fatal(t,"[tile-render-controller]位置改变的节点没有挂载","framework/engine/src/renderer/viewport/render-controller/lib/tile-render-controller/tile-processor/helpers/apply-changes.ts:129"),t.$afterPositionChange()}))}(l,a,c,f,n,0,o)}var Dm=function(){function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_originUnit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_head",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_tail",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_stopped",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_topHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_bottomHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_units",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this._originUnit=t,this._head=t.prevUnit,this._tail=t.nextUnit,this._units.push(t)}return(0,$e.A)(e,[{key:"originUnit",get:function(){return this._originUnit}},{key:"getAllUnits",value:function(){return(0,ln.A)(this._units)}},{key:"prev",value:function(){if(!this._head||this._topHeight>=e.SCREEN_HEIGHT)return null;var t=this._head;return this._units.unshift(t),this._head=this._head.prevUnit,t}},{key:"next",value:function(){if(!this._tail||this._bottomHeight>=2*e.SCREEN_HEIGHT)return null;var t=this._tail;return this._units.push(t),this._tail=this._tail.nextUnit,t}},{key:"addTopHeight",value:function(e){this._topHeight+=e}},{key:"addBottomHeight",value:function(e){this._bottomHeight+=e}}])}();function Pm(e,t){var n,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=e.renderUnitManager,i=t.firstRange,a=t.lastRange,l=t.collapsed,u=function(e,t){var n=t.node,r=t.offset,o=n;return n.isElement()&&(o=n.getChildByOffset(r)||n),bt(o,"framework/engine/src/renderer/viewport/render-controller/lib/tile-render-controller/tile-processor/helpers/render-cursor.ts:77"),e.getFirstRenderUnitByViewNode(o)}(o,i.start);bt(u,"framework/engine/src/renderer/viewport/render-controller/lib/tile-render-controller/tile-processor/helpers/render-cursor.ts:21"),l||(n=function(e,t){var n=t.node,r=t.offset,o=n;return n.isElement()&&(o=n.getChildByOffset(r-1)||n),bt(o,"framework/engine/src/renderer/viewport/render-controller/lib/tile-render-controller/tile-processor/helpers/render-cursor.ts:92"),e.getLastRenderUnitByViewNode(o)}(o,a.end),bt(n,"framework/engine/src/renderer/viewport/render-controller/lib/tile-render-controller/tile-processor/helpers/render-cursor.ts:25"),n===u&&(n=null));var c=function(){for(var e=new Set,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){if(t){var n=t.prevUnit,r=t.nextUnit;n&&e.add(n),e.add(t),r&&e.add(r)}})),Array.from(e)}(u,n);return c.forEach((function(t){sm(e.renderer,t,r)})),c}function Rm(e,t,n,r){if(0===r.childNodes.length)return null;var o=function(e,t,n){var r;if(document.caretRangeFromPoint){var o=document.caretRangeFromPoint(e,t);if(!(null==o?void 0:o.startContainer))return null;(r=o.startContainer).nodeType===Node.ELEMENT_NODE&&(r=r.childNodes[o.startOffset]||r.childNodes[o.startOffset-1]||r)}else if(document.caretPositionFromPoint){var i=document.caretPositionFromPoint(e,t);if(!(null==i?void 0:i.offsetNode))return null;(r=i.offsetNode).nodeType===Node.ELEMENT_NODE&&(r=r.childNodes[i.offset]||r.childNodes[i.offset-1]||r)}return r&&n!==r&&n.contains(r)?r:null}(e,t,r);return o||(o=Sm(t,n,Array.from(r.childNodes))),o?function(e){for(;e;){var t=wp(e);if(t)return t;e=e.parentNode}return null}(o):null}function Sm(e,t,n){if(bt(n.length>0,"framework/engine/src/renderer/viewport/render-controller/lib/tile-render-controller/helpers/get-first-visible-view-node.ts:75"),1===n.length)return n[0];var r=Math.floor(n.length/2),o=n[r],i=o.getBoundingClientRect();if(0===i.height&&0===i.width)return Sm(e,t,[].concat((0,ln.A)(n.slice(0,r)),(0,ln.A)(n.slice(r+1))));if(i.bottom<=e){var a=n.slice(r+1);return 0===a.length?o:Sm(e,t,a)}if(i.top>=t){var l=n.slice(0,r);return 0===l.length?o:Sm(e,t,l)}return o}Object.defineProperty(Dm,"SCREEN_HEIGHT",{enumerable:!0,configurable:!0,writable:!0,value:Math.max(window.screen.availHeight||window.outerHeight||window.screen.height||1e3,1e3)});var Tm=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))},jm=function(){return(0,$e.A)((function e(t,n,r){(0,Ke.A)(this,e),Object.defineProperty(this,"_processor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_originUnit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_topUnit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_bottomUnit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_topContinue",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_bottomContinue",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_forceAppear",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_originTopPos",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_stopped",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_hasDone",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this._processor=t,this._originUnit=n,this._topUnit=n,this._bottomUnit=n,this._renderer=t._viewport.renderer,this._originTopPos=n.getDisplayRect().top,this._forceAppear=r}),[{key:"isDone",get:function(){return this._hasDone}},{key:"stop",value:function(){this._stopped=!0,this._processor=null,this._originUnit=null,this._topUnit=null,this._bottomUnit=null,this._renderer=null,this._topContinue=!1,this._bottomContinue=!1}},{key:"start",value:function(e){this._processor.isAllTileReady()||Tm(this,void 0,void 0,Cc().mark((function t(){return Cc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("up"!==e){t.next=11;break}return t.next=3,this._renderUp();case 3:if(t.t0=t.sent,!t.t0){t.next=8;break}return t.next=7,this._renderDown();case 7:t.t0=t.sent;case 8:this._hasDone=t.t0,t.next=19;break;case 11:return t.next=13,this._renderDown();case 13:if(t.t1=t.sent,!t.t1){t.next=18;break}return t.next=17,this._renderUp();case 17:t.t1=t.sent;case 18:this._hasDone=t.t1;case 19:this._hasDone&&this._processor.setAllTileReady();case 20:case"end":return t.stop()}}),t,this)})))}},{key:"_renderUp",value:function(){return Tm(this,void 0,void 0,Cc().mark((function e(){var t=this;return Cc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){requestAnimationFrame((function(){return Tm(t,void 0,void 0,Cc().mark((function t(){var n;return Cc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._stopped){t.next=3;break}return e(!1),t.abrupt("return");case 3:if(n=!0,!this._prevPaint()){t.next=8;break}return t.next=7,this._renderUp();case 7:n=t.sent;case 8:e(n);case 9:case"end":return t.stop()}}),t,this)})))}))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))}},{key:"_renderDown",value:function(){return Tm(this,void 0,void 0,Cc().mark((function e(){var t=this;return Cc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){requestAnimationFrame((function(){return Tm(t,void 0,void 0,Cc().mark((function t(){var n;return Cc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._stopped){t.next=3;break}return e(!1),t.abrupt("return");case 3:if(n=!0,!this._nextPaint()){t.next=8;break}return t.next=7,this._renderDown();case 7:n=t.sent;case 8:e(n);case 9:case"end":return t.stop()}}),t,this)})))}))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))}},{key:"_prevPaint",value:function(){if(!this._topContinue)return!1;if(!this._topUnit)return this._topContinue=!1,!1;for(var e=[],t=!1,n=0;n<10;n++){var r=this._topUnit.prevUnit;if(!r){this._topContinue=!1;break}this._topUnit=r,e.push(r),sm(this._renderer,r,this._forceAppear)&&(t=!0)}if(!e.length)return this._topContinue=!1,!1;if(t){var o=this._originUnit.getDisplayRect().top;o!==this._originTopPos&&this._processor.requestSetScrollTo(this._renderer.scrollNode.scrollTop+o-this._originTopPos)}return this._topContinue}},{key:"_nextPaint",value:function(){if(!this._bottomContinue)return!1;if(!this._bottomUnit)return this._bottomContinue=!1,!1;for(var e=[],t=0;t<10;t++){var n=this._bottomUnit.nextUnit;if(!n){this._bottomContinue=!1;break}this._bottomUnit=n,e.push(n),sm(this._renderer,n,this._forceAppear)}return e.length?this._bottomContinue:(this._bottomContinue=!1,!1)}}])}();function Im(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e._viewport.renderer,o=function(e){var t=e._viewport.domRootNode,n=t.getBoundingClientRect(),r=e._scrollNode.getBoundingClientRect(),o=Rm(n.x+100,r.y+50,r.bottom,t);if(!o)return null;var i=e._viewport.renderUnitManager.getFirstRenderUnitByViewNode(o);return bt(i,"framework/engine/src/renderer/viewport/render-controller/lib/tile-render-controller/tile-processor/helpers/get-first-visible-render-unit.ts:25"),i}(e);sm(r,o,n);var i=new jm(e,o,n);return i.start(t),i}function Bm(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Mm()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Mm(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Mm=function(){return!!e})()}var Fm=function(e){function t(e,n,r){var o;return(0,Ke.A)(this,t),o=Bm(this,t),Object.defineProperty(o,"_viewport",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_scrollNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_cursorUnits",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(o,"_cleanState",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(o,"_cleanTask",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(o,"_scrollRenderTask",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(o,"_allTileReady",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(o,"_allowCardLazyInit",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(o,"_prevScrollTop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_cancelListen",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(o,"_dispose",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(o,"_bindEvent",{enumerable:!0,configurable:!0,writable:!0,value:function(){o._viewport.renderer.on("tileRenderStart",o._bindTileRenderStart),o._viewport.renderer.on("tileRenderCompleted",o._bindTileRenderCompleted)}}),Object.defineProperty(o,"_unbindEvent",{enumerable:!0,configurable:!0,writable:!0,value:function(){o._viewport.renderer.off("tileRenderStart",o._bindTileRenderStart),o._viewport.renderer.off("tileRenderCompleted",o._bindTileRenderCompleted)}}),Object.defineProperty(o,"_bindTileRenderStart",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e;null===(e=o._cancelListen)||void 0===e||e.call(o),o._cancelListen=o._viewport.renderer.onScroll((function(){var e=o._prevScrollTop,t=o._viewport.renderer.scrollNode.scrollTop,n=t-e;o._prevScrollTop=t,0!==n&&(o._viewport.renderer.repaintByScroll(n),o._viewport.renderer.repaintRenderSelection(!0))}))}}),Object.defineProperty(o,"_bindTileRenderCompleted",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e;null===(e=o._cancelListen)||void 0===e||e.call(o),o._cancelListen=null}}),Object.defineProperty(o,"requestSetScrollTo",{enumerable:!0,configurable:!0,writable:!0,value:function(e){o._viewport.renderer.scrollNode.scrollTop=e,o._prevScrollTop=o._viewport.renderer.scrollNode.scrollTop}}),o._viewport=e,o._scrollNode=n,o._allowCardLazyInit=r.allowCardLazyInit,o._prevScrollTop=n.scrollTop,o._bindTileRenderStart(),o._bindTileRenderCompleted(),o}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){var e,t,n;this._unbindEvent(),null===(e=this._dispose)||void 0===e||e.dispose(),this._viewport=null,this._scrollNode=null,null===(t=this._cleanTask)||void 0===t||t.stop(),null===(n=this._scrollRenderTask)||void 0===n||n.stop()}},{key:"viewport",get:function(){return this._viewport}},{key:"cursorUnits",get:function(){return(0,ln.A)(this._cursorUnits)}},{key:"isAllTileReady",value:function(){return this._allTileReady}},{key:"setAllTileReady",value:function(){this._allTileReady=!0,this.emit("tileRenderCompleted"),this._viewport.renderer.emit("tileRenderCompleted")}},{key:"_isForceAppear",value:function(){return!this._allowCardLazyInit}},{key:"renderByNodeId",value:function(e,t){this._stopClean(),this._stopScrollTask();var n=this._getRenderUnitByNodeId(e);n&&(this.renderByUnit(n,t),this._anchorToRenderUnit(n),this._markNeedClean())}},{key:"renderByUnit",value:function(e,t){this._stopClean(),this._stopScrollTask();var n,r,o=this._viewport.renderer,i=new Dm(e),a=e.isConnected,l=this._isForceAppear(),u=0;for(a&&(u=e.getDisplayRect().top),sm(o,i.originUnit,l);n=i.prev();)sm(o,n,l),i.addTopHeight(n.getDisplayHeight());for(;r=i.next();)sm(o,r,l),i.addBottomHeight(r.getDisplayHeight());if(t&&this._renderCursor(t),a){var c=e.getDisplayRect().top-u;c&&this.requestSetScrollTo(this._scrollNode.scrollTop+c)}}},{key:"directRenderByUnits",value:function(e){var t=this._isForceAppear(),n=this._viewport.renderer;e.forEach((function(e){sm(n,e,t)}))}},{key:"applyChanges",value:function(e,t,n){var r=this;this._stopClean(),this._stopScrollTask()&&n&&(this._dispose=ss((function(){r.renderByScroll(-1)}))),Em(this,e,t,this._isForceAppear())}},{key:"renderSelection",value:function(e){this._stopClean(),this._renderCursor(e)}},{key:"renderByScroll",value:function(e){if(!this._allTileReady){bt(0!==e,"framework/engine/src/renderer/viewport/render-controller/lib/tile-render-controller/tile-processor/index.ts:175"),this._stopClean(),this._stopScrollTask();var t=e<0?"up":"down";this._scrollRenderTask=Im(this,t,this._isForceAppear()),this._markNeedClean()}}},{key:"_markNeedClean",value:function(){bt(1!==this._cleanState,"framework/engine/src/renderer/viewport/render-controller/lib/tile-render-controller/tile-processor/index.ts:191"),this._cleanState=0}},{key:"_stopClean",value:function(){var e;1===this._cleanState&&(bt(this._cleanTask,"framework/engine/src/renderer/viewport/render-controller/lib/tile-render-controller/tile-processor/index.ts:200"),null===(e=this._cleanTask)||void 0===e||e.stop(),this._cleanTask=null,this._cleanState=0)}},{key:"_stopScrollTask",value:function(){if(this._scrollRenderTask){var e=this._scrollRenderTask.isDone;return this._scrollRenderTask.stop(),this._scrollRenderTask=null,!e}return!1}},{key:"_renderCursor",value:function(e){this._cursorUnits=Pm(this._viewport,e,this._isForceAppear())}},{key:"_getRenderUnitByNodeId",value:function(e){var t=this._viewport,n=t.viewDocument.getNodeById(e);return n?t.renderUnitManager.getFirstRenderUnitByViewNode(n):null}},{key:"_anchorToRenderUnit",value:function(e){bt(e.isConnected,"framework/engine/src/renderer/viewport/render-controller/lib/tile-render-controller/tile-processor/index.ts:236");var t=e.getDisplayRect().top,n=this._scrollNode.getBoundingClientRect();t!==n.top&&this.requestSetScrollTo(this._scrollNode.scrollTop+t-n.top)}}])}(it);function Lm(e,t){var n=e._renderUnitManager,r=new Set;return t.forEach((function(e){var t=function(e,t){var n=t.node,r=t.offset;if(n.isTextNode()||n.isCardNode())return e.getRenderUnitWithAncestor(n);var o=n.children[r]||n;return e.getFirstRenderUnitByViewNode(o)}(n,e.start);if(bt(t,"framework/engine/src/renderer/viewport/render-controller/lib/tile-render-controller/helpers/get-render-units-by-view-ranges.ts:22"),r.add(t),!e.isCollapsed){var o=function(e,t){var n=t.node,r=t.offset;if(n.isTextNode())return e.getRenderUnitWithAncestor(n);var o=n.children[r-1]||n.children[r]||n;return e.getLastRenderUnitByViewNode(o)}(n,e.end);if(bt(o,"framework/engine/src/renderer/viewport/render-controller/lib/tile-render-controller/helpers/get-render-units-by-view-ranges.ts:35"),t!==o){var i=t;do{i=i.nextUnit,bt(i,"framework/engine/src/renderer/viewport/render-controller/lib/tile-render-controller/helpers/get-render-units-by-view-ranges.ts:45"),r.add(i)}while(i!==o)}}})),Array.from(r)}function Um(e,t){var n=e._renderUnitManager;if(t.isTableSelection)return[n.getRenderUnitWithAncestor(t.firstRange.start.node)];var r=function(e,t){var n=t.node,r=t.offset;if(n.isTextNode()||n.isCardNode())return e.getRenderUnitWithAncestor(n);var o=n.children[r]||n;return e.getFirstRenderUnitByViewNode(o)}(n,t.firstRange.start);if(bt(r,"framework/engine/src/renderer/viewport/render-controller/lib/tile-render-controller/helpers/get-render-units-by-view-selection.ts:29"),t.isCollapsed)return[r];var o=function(e,t){var n=t.node,r=t.offset;if(n.isTextNode())return e.getRenderUnitWithAncestor(n);var o=n.children[r-1]||n.children[r]||n;return e.getLastRenderUnitByViewNode(o)}(n,t.lastRange.end);if(bt(o,"framework/engine/src/renderer/viewport/render-controller/lib/tile-render-controller/helpers/get-render-units-by-view-selection.ts:40"),r===o)return[r];var i=[r],a=r;do{a=a.nextUnit,bt(a,"framework/engine/src/renderer/viewport/render-controller/lib/tile-render-controller/helpers/get-render-units-by-view-selection.ts:52"),i.push(a)}while(a!==o);return i}var Vm=function(){return(0,$e.A)((function e(t,n,r,o){(0,Ke.A)(this,e),Object.defineProperty(this,"_viewport",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_editDOMNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_scrollNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tileProcessor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_firstRendered",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_inRendering",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_changeStack",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_allowDelayChangeInTileRenderer",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this._viewport=t,this._editDOMNode=n,this._scrollNode=r,this._tileProcessor=new Fm(t,r,o),this._allowDelayChangeInTileRenderer=!!o.allowDelayChangeInTileRenderer}),[{key:"destroy",value:function(){tv(this._viewport.virtualRootNode),this._viewport=null,this._editDOMNode=null,this._scrollNode=null,this._tileProcessor.destroy()}},{key:"applyContentChange",value:function(e,t,n){if(!this._firstRendered)return this._inRendering=!0,void this._firstRender(t);this._doChanges(e,t,n)}},{key:"_doChanges",value:function(e,t,n){this._inRendering=!0,this._tileProcessor.applyChanges(e,n,this._allowDelayChangeInTileRenderer);var r=this._getFirstVisibleUnit();r||(r=this._getFirstRenderUnit()),bt(r,"framework/engine/src/renderer/viewport/render-controller/lib/tile-render-controller/index.ts:92"),this._tileProcessor.renderByUnit(r,t)}},{key:"applySelectionChange",value:function(e){this._tileProcessor.renderSelection(e)}},{key:"repaintByScroll",value:function(e){this._tileProcessor.renderByScroll(e)}},{key:"scrollByNodeId",value:function(e){this._tileProcessor.renderByNodeId(e),this._tileProcessor.renderByScroll(-1)}},{key:"scrollToSelection",value:function(e,t){var n=this._viewport.renderer,r=Um(this._viewport,t);this._tileProcessor.directRenderByUnits(r),Nm(n,e,n.scrollNode,t)}},{key:"repairByViewNode",value:function(e){cv(e)}},{key:"repairByViewRange",value:function(e){var t=Lm(this._viewport,[e]);this._tileProcessor.directRenderByUnits(t)}},{key:"repairByViewRanges",value:function(e){var t=Lm(this._viewport,e);this._tileProcessor.directRenderByUnits(t)}},{key:"_firstRender",value:function(e){var t;bt(!this._firstRendered,"framework/engine/src/renderer/viewport/render-controller/lib/tile-render-controller/index.ts:137"),this._firstRendered=!0,this._viewport.renderer.emit("tileRenderStart");var n=this._viewport.viewDocument.entryPoint;n&&(t=this._getRenderUnitByNodeId(n)),t?this._tileProcessor.renderByNodeId(t.viewNode.id,e):(t=this._getFirstRenderUnit(),bt(t,"framework/engine/src/renderer/viewport/render-controller/lib/tile-render-controller/index.ts:154"),this._tileProcessor.renderByUnit(t,e)),this._tileProcessor.renderByScroll(-1)}},{key:"_getFirstVisibleUnit",value:function(){var e=this._viewport.domRootNode,t=e.getBoundingClientRect(),n=this._scrollNode.getBoundingClientRect(),r=Rm(t.x+100,n.y+50,n.bottom,e);if(!r)return null;var o=this._viewport.renderUnitManager.getFirstRenderUnitByViewNode(r);return bt(o,"framework/engine/src/renderer/viewport/render-controller/lib/tile-render-controller/index.ts:180"),o}},{key:"_getRenderUnitByNodeId",value:function(e){var t=this._viewport,n=t.viewDocument.getNodeById(e);return n?t.renderUnitManager.getFirstRenderUnitByViewNode(n):null}},{key:"_getFirstRenderUnit",value:function(){var e=this._viewport;return e.renderUnitManager.getFirstRenderUnitByViewNode(e.viewRootNode)}}])}(),Hm=function(){function e(t,n){(0,Ke.A)(this,e),Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_offset",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=t,this._offset=n}return(0,$e.A)(e,[{key:"node",get:function(){return this._node}},{key:"offset",get:function(){return this._offset}},{key:"clone",value:function(){return new e(this._node,this._offset)}}],[{key:"equal",value:function(e,t){return e._node===t._node&&e._offset===t._offset}},{key:"create",value:function(t,n){return new e(t,n)}}])}(),zm=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(0,Ke.A)(this,e),Object.defineProperty(this,"_start",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_end",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._start=t,this._end=n||t.clone()}return(0,$e.A)(e,[{key:"start",get:function(){return this._start}},{key:"end",get:function(){return this._end}},{key:"collapsed",get:function(){return Hm.equal(this._start,this._end)}}],[{key:"create",value:function(t){return new e(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}},{key:"createByNodeAndOffset",value:function(t,n){return e.create(Hm.create(t,n))}}])}();const Wm=function(e){if(e){var t=window.getComputedStyle(e);return{marginTop:parseInt(t.marginTop)||0,marginBottom:parseInt(t.marginBottom)||0,marginLeft:parseInt(t.marginLeft)||0,marginRight:parseInt(t.marginRight)||0,width:parseInt(t.width)||0,height:parseInt(t.height)||0}}return{marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,width:0,height:0}};var qm=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"placeholderInfo",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_beforeElement",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_afterElement",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isInit",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this._beforeElement=document.createElement(t),this._afterElement=document.createElement(t)}),[{key:"destroy",value:function(){this._beforeElement.remove(),this._beforeElement=null,this._afterElement.remove(),this._afterElement=null}},{key:"initPlaceholder",value:function(){this.isInit=!0,this._beforeElement._neRef={compare:function(){return{equal:!1,contains:!1,containedBy:!1,preceding:!0,following:!1}}},this._afterElement._neRef={compare:function(){return{equal:!1,contains:!1,containedBy:!1,preceding:!1,following:!0}}},this._beforeElement.style.height="0px",this._afterElement.style.height="0px",this._beforeElement.style.userSelect="none",this._afterElement.style.userSelect="none",this._beforeElement.contentEditable="false",this._afterElement.contentEditable="false",this._beforeElement.className="ne-virtual-render-placeholder",this._afterElement.className="ne-virtual-render-placeholder",this.rootElement.appendChild(this._afterElement),this.rootElement.insertBefore(this._beforeElement,this.rootElement.firstChild)}},{key:"getPlaceholderInfo",value:function(e,t){var n=this.getPlaceholderStyle(t,!0);if(!this.placeholderInfo[e]){var r={style:n,range:t};return this.updatePlaceholderStyle(r,n),this.placeholderInfo[e]=r,r}var o=this.placeholderInfo[e].style;return o.height===n.height&&o.marginBottom===n.marginBottom&&o.marginTop===n.marginTop&&o.visible===n.visible||this.updatePlaceholderStyle(this.placeholderInfo[e],n),this.placeholderInfo[e].range=t,this.placeholderInfo[e]}},{key:"updatePlaceholderStyle",value:function(e,t){e.style=t}}])}();function $m(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Km()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Km(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Km=function(){return!!e})()}var Ym=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"div";return(0,Ke.A)(this,t),n=$m(this,t,[r]),Object.defineProperty(n,"node",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(n,"mountNodeInfos",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"rootElement",get:function(){return this.node.getContentDom()}},{key:"mount",value:function(e,t){var n=this,r=-1,o=0,i=[Number.MAX_VALUE,0],a=new Map;this.node.children.reduce((function(a,l,u){if(e.has(l.nodeId)){t.has(l.nodeId)&&(i[0]=Math.min(u,i[0]),i[1]=Math.max(u,i[1])),-1!==r&&0!==u&&(n.getPlaceholderInfo(o,[r,u-1]),o++);var c=l.getDom();if(!c)throw new Error("not render ".concat(l.nodeId));c.style.display="",r=-1,a.push(l)}else if(-1===r){r=u;var s=l.getDom();s&&"none"!==s.style.display&&(s.style.display="none")}else{var d=l.getDom();d&&"none"!==d.style.display&&(d.style.display="none")}return a}),[]).forEach((function(n){a.set(n.nodeId,n),n.mount(e,t)})),-1!==r&&(this.getPlaceholderInfo(o,[r,this.node.children.length-1]),o++),this.mountNodeInfos.forEach((function(t,n){if(e.has(n)){var r=t.getDom();r&&r.style.display&&(r.style.display="")}else{var o=t.getDom();o&&"none"!==o.style.display&&(o.style.display="none")}}));for(var l=0,u=0,c=0;c<this.placeholderInfo.length;c++){var s=this.placeholderInfo[c],d=s.range,f=s.style;!f.visible||c>=o||(d[1]<=i[0]?l+=f.height+f.marginBottom+f.marginTop:d[0]>=i[1]&&(u+=f.height+f.marginBottom+f.marginTop))}this.isInit||this.initPlaceholder(),this._beforeElement.style.height="".concat(l,"px"),this._afterElement.style.height="".concat(u,"px"),0===l?this._beforeElement.remove():this.rootElement.firstChild!==this._beforeElement&&(this.rootElement.firstChild?this.rootElement.insertBefore(this._beforeElement,this.rootElement.firstChild):this.rootElement.appendChild(this._beforeElement)),0===u?this._afterElement.remove():this.rootElement.lastChild!==this._afterElement&&this.rootElement.appendChild(this._afterElement),Array.from(this.rootElement.childNodes).forEach((function(e){e.nodeType===e.ELEMENT_NODE&&"none"===e.style.display&&n.rootElement.removeChild(e)})),this.mountNodeInfos=a}},{key:"getPlaceholderStyle",value:function(e,t){var n=this.node.children[e[0]],r=this.node.children[e[1]];return{height:r.topToRoot-n.topToRoot+r.height,visible:t,marginTop:n.marginTop,marginBottom:r.marginBottom}}}])}(qm),Gm=function(){return(0,$e.A)((function e(t,n){var r;if((0,Ke.A)(this,e),Object.defineProperty(this,"viewNode",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"unit",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"topToRoot",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:iv}),Object.defineProperty(this,"marginTop",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"marginBottom",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"paddingTop",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"paddingBottom",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_isDirty",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"needRecalculate",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isLocked",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"category",{enumerable:!0,configurable:!0,writable:!0,value:"normal"}),Object.defineProperty(this,"paintManager",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"parent",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"belongToHeading",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"headingLevel",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"children",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.isContainer=t.hasCategory(ov),t.hasCategory(qe.LikeRoot)&&(this.paintManager=new Ym(this)),t.hasCategory([qe.Table])?(this.category="table",this.paddingTop=15,this.paddingBottom=15,this.marginTop=4,this.marginBottom=1):t.hasCategory([qe.TableRow,"columns"])?this.category=lv:t.hasCategory([qe.TableCell,"column"])&&(this.category=uv),t.hasCategory([qe.TableCell])&&(this.paddingBottom=2,this.paddingTop=2),(null===(r=t.parent)||void 0===r?void 0:r.isRootNode())&&t.nodeName.startsWith("h"))switch(t.nodeName){case"h1":this.headingLevel=1;break;case"h2":this.headingLevel=2;break;case"h3":this.headingLevel=3;break;case"h4":this.headingLevel=4;break;case"h5":this.headingLevel=5;break;case"h6":this.headingLevel=6}}),[{key:"destroy",value:function(){var e;this.children.forEach((function(e){e.destroy()})),this.children=[],this.parent=null,null===(e=this.paintManager)||void 0===e||e.destroy(),this.paintManager=null}},{key:"nodeId",get:function(){return this.viewNode.id}},{key:"parentId",get:function(){var e,t;return(null===(e=this.parent)||void 0===e?void 0:e.nodeId)||(null===(t=this.viewNode.parent)||void 0===t?void 0:t.id)}},{key:"rootParent",get:function(){return null===this.parent?this:this.parent.rootParent}},{key:"belongToCollapse",get:function(){var e=this.rootParent;return e.viewNode.hasCategory("collapse")?e:null}},{key:"isSummary",get:function(){return"summary"===this.viewNode.nodeName}},{key:"isInCollapse",get:function(){var e,t,n,r;return"false"===(null===(n=null===(t=null===(e=this.belongToCollapse)||void 0===e?void 0:e.viewNode)||void 0===t?void 0:t.attrs)||void 0===n?void 0:n.open)&&!this.isSummary||(null===(r=this.rootParent.belongToHeading)||void 0===r?void 0:r.some((function(e){return e&&"true"===e.viewNode.attrs.collapsed})))}},{key:"isContainsByIds",value:function(e){for(var t=this.viewNode;t;){if(e.has(t.id))return!0;t=t.parent}return!1}},{key:"getNodeId",value:function(){return this.viewNode.id}},{key:"isRendered",value:function(){return!!this.viewNode.isConnected}},{key:"markDirty",value:function(){var e;this._isDirty=!0,null===(e=this.parent)||void 0===e||e.markDirty()}},{key:"markUNDirty",value:function(){this._isDirty=!1}},{key:"isDirty",value:function(){return this._isDirty}},{key:"getDom",value:function(){var e,t;return(null===(e=this.viewNode)||void 0===e?void 0:e.isConnected)&&(null===(t=Cp(this.viewNode))||void 0===t?void 0:t.getMainDOMNode())||null}},{key:"shouldLock",value:function(){var e;if("hole"!==this.viewNode.nodeName)return!1;if(this.viewNode.isElement()&&["audio","video","imageGallery"].includes(null===(e=this.viewNode.children[1])||void 0===e?void 0:e.nodeName))return!0;var t=this.getDom();return!!t&&!!t.querySelector("iframe")}},{key:"getContentDom",value:function(){var e;return this.viewNode.isConnected&&(null===(e=Cp(this.viewNode))||void 0===e?void 0:e.getContentDOMNode())||null}},{key:"measure",value:function(){var e=this.getDom();if(!e||this.isLocked||this.isInCollapse)return!1;var t=Wm(e),n=!1;t.marginTop===this.marginTop&&t.marginBottom===this.marginBottom||(this.marginTop=t.marginTop,this.marginBottom=t.marginBottom,n=!0);var r=e.getBoundingClientRect().height;return r!==this.height?(this.height=Math.max(r,this.category===uv?33.094:iv),!0):n}},{key:"compare",value:function(e){var t=this.viewNode.compare(e.viewNode);return t.preceding?-1:t.following?1:0}},{key:"lockHeight",value:function(){var e=this.getDom();e&&(e.style.height="".concat(this.height,"px"),e.style.marginTop="".concat(this.marginTop,"px"),e.style.marginBottom="".concat(this.marginBottom,"px"),this.isLocked=!0)}},{key:"unlockHeight",value:function(){this.isLocked=!1;var e=this.getDom();e&&(this.viewNode.attrs.height?e.style.height=this.viewNode.attrs.height+"px":e.style.height="",e.style.marginTop="",e.style.marginBottom="")}},{key:"sortChildren",value:function(){this.isContainer&&(this.children=this.children.sort((function(e,t){return e.compare(t)})),this.children.forEach((function(e){e.isContainer&&e.sortChildren()})))}},{key:"syncLayout",value:function(e){var t;if(this.isContainer){e&&this.category!==uv?this.topToRoot=e.topToRoot+e.height+Math.max(e.marginBottom,this.marginTop):this.topToRoot=this.parent?this.parent.topToRoot+this.parent.paddingTop+this.marginTop:this.marginTop;var n=null;this.children.forEach((function(e){e.syncLayout(n),n=e})),this.height!==iv&&this.height!==av||this.syncLayoutWithHeight()}else if(e)this.topToRoot=e.topToRoot+e.height+Math.max(e.marginBottom,this.marginTop);else{if((null===(t=this.parent)||void 0===t?void 0:t.category)===uv){var r=this.parent.height,o=this.parent.children.reduce((function(e,t){return e+t.height}),0);switch(this.parent.viewNode.attrs.verticalAlign){case"middle":return void(this.topToRoot=this.parent.topToRoot+Math.max(this.parent.paddingTop,(r-o)/2)+this.marginTop);case"bottom":return void(this.topToRoot=this.parent.topToRoot+Math.max(this.parent.paddingTop,r-o)+this.marginTop)}}this.topToRoot=this.parent?this.parent.topToRoot+this.parent.paddingTop+this.marginTop:this.marginTop}}},{key:"syncLayoutWithHeight",value:function(){if(this.isContainer)if(this.category===lv){var e=iv;this.children.forEach((function(t){e=Math.max(e,t.height)})),this.height=Math.max(e+this.paddingBottom+this.paddingTop,this.viewNode.attrs.height||0),this.viewNode.attrs.height&&(this.height=Math.max(this.viewNode.attrs.height,this.height))}else this.height=Math.max(this.children.reduce((function(e,t){return e+t.height}),0),this.category===uv?av:iv)+this.paddingBottom+this.paddingTop}},{key:"loopNode",value:function(e){this.children.forEach((function(t,n){(e(t,n,!1)||t.category===lv)&&t.loopNode(e)}))}},{key:"findNode",value:function(e){if(this.category===lv){var t=!1;return this.children.forEach((function(n,r){e(n,r,!1)&&(t=!0),n.findNode(e)&&(t=!0)})),t}for(var n=0;n<this.children.length;n++){var r=this.children[n];if(e(r,n,!1)&&r.category!==lv)return!0;if(r.findNode(e))return!0}return!1}},{key:"mount",value:function(e,t){this.paintManager?this.children.length>0&&this.paintManager.mount(e,t):this.isContainer&&this.children.forEach((function(n){n.mount(e,t)}))}}])}(),Jm=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"viewport",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"nodeMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"lockHeightNodes",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"blockNodes",{enumerable:!0,configurable:!0,writable:!0,value:new Set})}),[{key:"destroy",value:function(){this.nodes.forEach((function(e){e.destroy()})),this.nodes=[],this.nodeMap.clear(),this.lockHeightNodes.clear()}},{key:"applyChanges",value:function(e){var t=this,n=e.removedNodes,r=e.textChanges,o=e.attrChanges,i=e.addedNodes,a=e.positionChanges;n.forEach((function(e){t.removeNode(e.id)})),a.forEach((function(e){t.positionChange(e)})),i.forEach((function(e){t.addNode(e)})),r.forEach((function(e){t.markDirty(e.id)}));var l=!1;o.forEach((function(e){(e.attrs.collapsed||e.attrs.open)&&(l=!0),t.markDirty(e.node.id)})),(a.length||n.length||i.length)&&(this.sortNodes(),this.syncLayout()),l&&this.syncLayout()}},{key:"getNode",value:function(e){return this.nodeMap.get(e)}},{key:"removeNode",value:function(e){this.blockNodes.delete(e);var t=this.nodeMap.get(e);if(t){if(t.parentId){var n=this.getNode(t.parentId);n&&(t.parent=null,t.destroy(),n.children.splice(n.children.indexOf(t),1))}this.nodeMap.delete(e);var r=this.nodes.indexOf(t);r>-1&&this.nodes.splice(r,1)}}},{key:"doAddNode",value:function(e,t){var n=this.getNode(e.id);if(n)n.viewNode=e;else{var r=new Gm(e,t);this.nodeMap.set(e.id,r),this.nodes.push(r)}}},{key:"addNode",value:function(e){if("#blockFiller"!==e.nodeName){var t=this.viewport.renderUnitManager.getRenderUnitWithAncestor(e);if(t){var n=e.closest(rv)||t.viewNode;n&&this.doAddNode(n,t)}}else this.doAddNode(e)}},{key:"positionChange",value:function(e){var t,n,r=this.getNode(e.id);if(r){var o=null===(t=r.parent)||void 0===t?void 0:t.children.indexOf(r),i="number"!=typeof o?-1:o;i>-1&&(null===(n=r.parent)||void 0===n||n.children.splice(i,1)),r.parent=null,-1===this.nodes.indexOf(r)&&this.nodes.push(r)}}},{key:"markDirty",value:function(e){var t=this.getNode(e);t&&t.markDirty()}},{key:"markUNDirty",value:function(e){var t=this.getNode(e);t&&t.markUNDirty()}},{key:"sortNodes",value:function(){for(var e=0;e<this.nodes.length;e++){var t=this.nodes[e];if(t.parentId){var n=this.getNode(t.parentId);n&&(this.nodes.splice(e,1),e--,t.belongToHeading=null,t.parent=n,-1===n.children.indexOf(t)&&n.children.push(t))}}this.nodes=this.nodes.sort((function(e,t){return e.compare(t)}));var r=[];this.nodes.forEach((function(e){e.headingLevel>0&&(r=r.slice(0,e.headingLevel-1)),e.belongToHeading=r,e.isContainer&&e.sortChildren(),e.headingLevel>0&&((r=(0,ln.A)(r))[e.headingLevel-1]=e)}))}},{key:"shouldLock",value:function(e){var t=this.getNode(e);return!!t&&t.shouldLock()}},{key:"setBlock",value:function(e){this.shouldLock(e)&&this.blockNodes.add(e)}},{key:"lockHeight",value:function(e){var t=this.getNode(e);t&&(this.lockHeightNodes.add(e),t.lockHeight())}},{key:"unlockHeight",value:function(e){this.lockHeightNodes.delete(e);var t=this.getNode(e);t&&t.unlockHeight()}},{key:"unlockAndMeasure",value:function(){var e=this,t=[];this.lockHeightNodes.forEach((function(n){e.unlockHeight(n),t.push(n),t.push.apply(t,(0,ln.A)(e.ancestorIds(n)))})),new Set(t).forEach((function(t){e.measure(t)}))}},{key:"measure",value:function(e){var t=this.getNode(e);t&&t.measure()}},{key:"ancestorIds",value:function(e){var t=this.getNode(e);if(!t)return[];for(var n=[],r=t.parent;r;)n.push(r.nodeId),r=r.parent;return n}},{key:"syncLayout",value:function(){for(var e=null,t=0;t<this.nodes.length;t++){var n=this.nodes[t];n.isInCollapse?n.topToRoot=Number.MAX_VALUE:(n.syncLayout(e),e=n)}}},{key:"loopNode",value:function(e,t){var n=this;if(t&&t.size>0){var r=0;t.forEach((function(t){var o=n.getNode(t);o&&e(o,r++,!0)&&o.loopNode(e)}))}else for(var o=0;o<this.nodes.length;o++){var i=this.nodes[o];e(i,o,!0)&&i.loopNode(e)}}},{key:"findNode",value:function(e){for(var t=0;t<this.nodes.length;t++){var n=this.nodes[t];if(e(n,t,!0))return;if(n.findNode(e))return}}}])}(),Xm=o(5748),Qm=o.n(Xm),Zm=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))},eg=function(){return(0,$e.A)((function e(t){var n=this;(0,Ke.A)(this,e),Object.defineProperty(this,"reconciler",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"scrolling",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"widthResizing",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"disableHandleScroll",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"rect",{enumerable:!0,configurable:!0,writable:!0,value:{top:0,height:0,bottom:0}}),Object.defineProperty(this,"onScrollStart",{enumerable:!0,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(this,"onScrollEnd",{enumerable:!0,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(this,"cachedContentAboveRootHeight",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"getViewportHeight",{enumerable:!0,configurable:!0,writable:!0,value:function(){return n.scroller instanceof Window?n.scroller.innerHeight:n.scroller.offsetHeight}}),Object.defineProperty(this,"getScrollTop",{enumerable:!0,configurable:!0,writable:!0,value:function(){return(n.scroller instanceof Window?window.scrollY:n.scroller.scrollTop)-n.getContentAboveRootHeight()}}),Object.defineProperty(this,"getContentAboveRootHeight",{enumerable:!0,configurable:!0,writable:!0,value:function(){if(null===n.cachedContentAboveRootHeight){var e=n.scroller instanceof Window?window.scrollY:n.scroller.scrollTop,t=n.getContentTopToScrollerTop();n.cachedContentAboveRootHeight=e-t}return n.cachedContentAboveRootHeight}}),Object.defineProperty(this,"handleBinding",{enumerable:!0,configurable:!0,writable:!0,value:function(e){"on"!==e?n.scroller.removeEventListener("scroll",n.handleScroll):n.scroller.addEventListener("scroll",n.handleScroll)}}),Object.defineProperty(this,"withoutHandleScrolling",{enumerable:!0,configurable:!0,writable:!0,value:function(e){return Zm(n,void 0,void 0,Cc().mark((function t(){return Cc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.disableHandleScroll=!0,t.prev=1,t.next=4,e();case 4:this.updateRect(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),this.disableHandleScroll=!1;case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))}}),Object.defineProperty(this,"debounceScrollEnd",{enumerable:!0,configurable:!0,writable:!0,value:Qm()((function(){n.scrolling=!1,n.disableHandleScroll=!1,n.onScrollEnd()}),300)}),Object.defineProperty(this,"handleScroll",{enumerable:!0,configurable:!0,writable:!0,value:function(){n.scrolling||n.onScrollStart(),n.scrolling=!0,n.debounceScrollEnd(),n.updateViewport()}}),Object.defineProperty(this,"isScrolling",{enumerable:!0,configurable:!0,writable:!0,value:function(){return n.scrolling}}),Object.defineProperty(this,"debounceWidthResizeEnd",{enumerable:!0,configurable:!0,writable:!0,value:Qm()((function(){n.widthResizing=!1}),300)})}),[{key:"scroller",get:function(){return this.reconciler.scroller}},{key:"isInMaxView",get:function(){return this.reconciler.isInMaxView}},{key:"getViewportHelper",value:function(){return{getScrollTop:this.getScrollTop,setScrollTop:this.setScrollTop,getViewportHeight:this.getViewportHeight}}},{key:"getContentTopToScrollerTop",value:function(){return(this.scroller instanceof Window?0:this.scroller.getBoundingClientRect().top)-this.rootElement.getBoundingClientRect().top}},{key:"setScrollTop",value:function(e,t){var n=this;if(null==t?void 0:t.ignoreUpdateViewport)this.withoutHandleScrolling((function(){return Zm(n,void 0,void 0,Cc().mark((function t(){return Cc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.scroller){t.next=2;break}return t.abrupt("return");case 2:this.scroller.scrollTo(0,e+this.getContentAboveRootHeight()),this.updateRect();case 4:case"end":return t.stop()}}),t,this)})))}));else{if(!this.scroller)return;this.scroller.scrollTo(0,e+this.getContentAboveRootHeight()),this.updateRect()}}},{key:"rootElement",get:function(){return this.reconciler.rootElement}},{key:"viewportData",get:function(){return this.rect}},{key:"updateRect",value:function(){if(!this.isInMaxView){var e=this.getScrollTop(),t=this.getViewportHeight();this.rect={top:e,height:t,bottom:e+t}}}},{key:"clearContentOffsetTopCache",value:function(){this.cachedContentAboveRootHeight=null}},{key:"updateViewportSync",value:function(){this.updateViewport()}},{key:"updateViewport",value:function(){this.clearContentOffsetTopCache();var e=this.rect;this.updateRect(),this.disableHandleScroll||this.reconciler.updateViewport(e,this.rect)}},{key:"init",value:function(e,t){this.onScrollStart=e,this.onScrollEnd=t,this.disableOverflowAnchor(),this.handleBinding("on"),this.updateRect()}},{key:"disableOverflowAnchor",value:function(){try{this.scroller instanceof Window?document.documentElement.style.overflowAnchor="none":this.scroller.style.overflowAnchor="none"}catch(e){}}},{key:"destroy",value:function(){this.debounceScrollEnd.cancel(),this.debounceWidthResizeEnd.cancel(),this.handleBinding("off")}},{key:"handleWidthResize",value:function(){this.widthResizing=!0,this.debounceWidthResizeEnd()}}])}();function tg(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,ng()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function ng(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ng=function(){return!!e})()}var rg=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"div";return(0,Ke.A)(this,t),n=tg(this,t,[r]),Object.defineProperty(n,"reconciler",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(n,"mountNodeInfos",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"layoutTree",get:function(){return this.reconciler.layoutTree}},{key:"viewport",get:function(){return this.reconciler.viewport}},{key:"rootElement",get:function(){return this.reconciler.rootElement}},{key:"renderLayoutNode",value:function(e){var t,n;!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];rm.forceAttachTreeByViewNodeNotRenderChildren(e,t,n)}(this.viewport.renderer,e.viewNode,e.isContainer&&"hole"!==e.viewNode.nodeName),e.isInCollapse?null===(t=e.getDom())||void 0===t||t.classList.add("ne-force-fold"):null===(n=e.getDom())||void 0===n||n.classList.remove("ne-force-fold")}},{key:"appendLayoutNode",value:function(e){var t=e.getDom();if(t&&!t.isConnected)if(t.style.display="",null===e.parent){var n=this.rootElement.childNodes;n.length>0?Sv(n,t,e.viewNode,0,n.length):this.rootElement.appendChild(t)}else if(e.parent.getContentDom()){var r=e.parent.getContentDom(),o=r.childNodes;o.length>0?Sv(o,t,e.viewNode,0,o.length):r.appendChild(t)}else this.renderLayoutNode(e)}},{key:"mount",value:function(e,t,n){var r=this,o=-1,i=0,a=new Map;this.layoutTree.nodes.reduce((function(t,n,a){if(e.has(n.nodeId)){-1!==o&&0!==a&&(r.getPlaceholderInfo(i,[o,a-1]),i++);var l=n.getDom();if(!l)throw new Error("not render ".concat(n.nodeId));l.style.display="",o=-1,t.push(n)}else if(-1===o){o=a;var u=n.getDom();u&&"none"!==u.style.display&&(u.style.display="none")}else{var c=n.getDom();c&&"none"!==c.style.display&&(c.style.display="none")}return t}),[]).forEach((function(t){a.set(t.nodeId,t),t.mount(e,n)})),-1!==o&&(this.getPlaceholderInfo(i,[o,this.layoutTree.nodes.length-1]),i++),this.mountNodeInfos.forEach((function(t,n){if(e.has(n)){var r=t.getDom();r&&r.style.display&&(r.style.display="")}else{var o=t.getDom();o&&"none"!==o.style.display&&(o.style.display="none")}}));for(var l=0,u=0,c=0;c<this.placeholderInfo.length;c++){var s=this.placeholderInfo[c],d=s.range,f=s.style;!f.visible||c>=i||(d[1]<=t[0]?l+=f.height+f.marginBottom+f.marginTop:d[0]>=t[1]&&(u+=f.height+f.marginBottom+f.marginTop))}this._beforeElement.style.height="".concat(l,"px"),this._afterElement.style.height="".concat(u,"px"),0===l?this._beforeElement.remove():this.rootElement.firstChild!==this._beforeElement&&(this.rootElement.firstChild?this.rootElement.insertBefore(this._beforeElement,this.rootElement.firstChild):this.rootElement.appendChild(this._beforeElement)),0===u?this._afterElement.remove():this.rootElement.lastChild!==this._beforeElement&&this.rootElement.appendChild(this._afterElement),Array.from(this.rootElement.childNodes).forEach((function(e){e.nodeType===e.ELEMENT_NODE&&"none"===e.style.display&&e.remove()})),this.mountNodeInfos=a}},{key:"getPlaceholderStyle",value:function(e,t){for(var n=e[0],r=e[1],o=this.layoutTree.nodes[e[0]],i=this.layoutTree.nodes[e[1]];o.isInCollapse&&n<r;)n+=1,o=this.layoutTree.nodes[n];for(;i.isInCollapse&&n<r;)r-=1,i=this.layoutTree.nodes[r];if(o===i){var a=o.isInCollapse;return{visible:t,height:a?0:o.height,marginTop:a?0:o.marginTop,marginBottom:a?0:o.marginBottom}}return{height:i.topToRoot-o.topToRoot+i.height,visible:t,marginTop:o.marginTop,marginBottom:i.marginBottom}}}])}(qm);function og(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ig=function(){return(0,$e.A)((function e(t){var n=this;(0,Ke.A)(this,e),Object.defineProperty(this,"reconciler",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"changeEntries",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"prevResizeMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"_handleResizeChange",{enumerable:!0,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(this,"handleResize",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return og(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?og(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(e);try{for(r.s();!(t=r.n()).done;){var o=t.value,i=o.target.getAttribute("id");i&&n.changeEntries.set(i,o)}}catch(e){r.e(e)}finally{r.f()}}}),Object.defineProperty(this,"_loop",{enumerable:!0,configurable:!0,writable:!0,value:function(){n.changeEntries.size&&n._handleResizeChange(),requestAnimationFrame(n._loop)}}),Object.defineProperty(this,"_resizeObserver",{enumerable:!0,configurable:!0,writable:!0,value:null})}),[{key:"destroy",value:function(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null),this.changeEntries.clear(),this.prevResizeMap.clear()}},{key:"observerNodes",value:function(e){if(this._resizeObserver){var t=this._resizeObserver;e.forEach((function(e){var n=e.getDom();n&&t.observe(n)})),this.prevResizeMap.forEach((function(n,r){if(!e.has(r)){var o=n.getDom();o&&t.unobserve(o)}})),this.prevResizeMap=e}}},{key:"applyChanges",value:function(){var e=this,t=!1;return this.changeEntries.forEach((function(n,r){var o=e.reconciler.layoutTree.getNode(r);o&&(t=o.measure()||t)})),this.changeEntries.clear(),t}},{key:"init",value:function(e){this._resizeObserver=new ResizeObserver(this.handleResize),this._handleResizeChange=e,requestAnimationFrame(this._loop)}}])}(),ag=function(){return(0,$e.A)((function e(t){var n,r=this;(0,Ke.A)(this,e),Object.defineProperty(this,"viewport",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"viewportManager",{enumerable:!0,configurable:!0,writable:!0,value:new eg(this)}),Object.defineProperty(this,"paintManager",{enumerable:!0,configurable:!0,writable:!0,value:new rg(this)}),Object.defineProperty(this,"resizeManager",{enumerable:!0,configurable:!0,writable:!0,value:new ig(this)}),Object.defineProperty(this,"layoutTree",{enumerable:!0,configurable:!0,writable:!0,value:new Jm(this.viewport)}),Object.defineProperty(this,"activeNodes",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"bufferNodes",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"viewportNodes",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"selectionNodes",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"firstNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"lastNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"childrenShouldActive",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"isInMaxView",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"bufferHeight",{enumerable:!0,configurable:!0,writable:!0,value:500}),Object.defineProperty(this,"limitSize",{enumerable:!0,configurable:!0,writable:!0,value:10}),Object.defineProperty(this,"isScrollingUp",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isDestroyed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"handleScrollStart",{enumerable:!0,configurable:!0,writable:!0,value:function(){r.renderer.emit("scrollStart")}}),Object.defineProperty(this,"handleScrollEnd",{enumerable:!0,configurable:!0,writable:!0,value:function(){r.handleLastProcess(),r.renderer.emit("scrollEnd")}}),Object.defineProperty(this,"handleLastProcess",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"scroll";r.isInMaxView||(r.layoutTree.unlockAndMeasure(),r.resizeManager.applyChanges(),r.layoutTree.syncLayout()),r.rawPaint(e)}}),Object.defineProperty(this,"handleNodeHeightChange",{enumerable:!0,configurable:!0,writable:!0,value:function(){r.isScrolling||(r.resizeManager.applyChanges(),r.layoutTree.syncLayout(),r.debounceRawPaint())}}),Object.defineProperty(this,"debounceRawPaint",{enumerable:!0,configurable:!0,writable:!0,value:Qm()(this.rawPaint)}),Object.defineProperty(this,"debounceRAFPaint",{enumerable:!0,configurable:!0,writable:!0,value:(n=!1,function(){n||(n=!0,ss((function(){r.rawPaint(),n=!1})))})}),xc(this,t.renderer,"elementEnterMaxView",(function(e,t){t&&(r.isInMaxView=!0,r.childrenShouldActive.add(t),r.update())})),xc(this,t.renderer,"elementLeaveMaxView",(function(e,t){t&&(r.isInMaxView=!1,r.childrenShouldActive.delete(t),r.debounceRAFPaint())}))}),[{key:"isDestroyed",get:function(){return this._isDestroyed}},{key:"destroy",value:function(){this._isDestroyed=!0,this.layoutTree.destroy(),this.viewportManager.destroy(),this.paintManager.destroy(),this.resizeManager.destroy()}},{key:"rootElement",get:function(){return this.viewport._domRootNode}},{key:"scroller",get:function(){return this.viewport.renderer.scrollNode}},{key:"isScrolling",get:function(){return this.viewportManager.isScrolling()}},{key:"currentViewRect",get:function(){return this.viewportManager.viewportData}},{key:"renderer",get:function(){return this.viewport.renderer}},{key:"init",value:function(e){this.viewportManager.init(this.handleScrollStart,this.handleScrollEnd),this.resizeManager.init(this.handleNodeHeightChange),this.paintManager.initPlaceholder(),this.layoutTree.getNode(e)?this.scrollToNode(e):this.scrollToNode(this.layoutTree.nodes[0].nodeId)}},{key:"repairByViewNode",value:function(e){var t=this.layoutTree.getNode(e.id);t&&this.paintManager.appendLayoutNode(t)}},{key:"setActiveNodes",value:function(e){this.activeNodes=e.activeNodes,this.bufferNodes=e.bufferNodes,this.viewportNodes=e.viewportNodes,this.firstNode=e.firstNode,this.lastNode=e.lastNode}},{key:"isActiveNodesChange",value:function(e){var t=this;if(0===this.layoutTree.nodes.length)return!1;if(this.activeNodes.size!==e.activeNodes.size)return!0;var n=!1;return e.activeNodes.forEach((function(e,r){n||t.activeNodes.has(r)||(n=!0)})),n}},{key:"isViewportNodesChange",value:function(e){var t=this;if(0===this.layoutTree.nodes.length)return!1;if(this.viewportNodes.size!==e.viewportNodes.size)return!0;if(this.firstNode!==e.firstNode)return!0;if(this.lastNode!==e.lastNode)return!0;var n=!1;return e.viewportNodes.forEach((function(e,r){n||t.viewportNodes.has(r)||(n=!0)})),n}},{key:"emitChangeEvent",value:function(e,t){try{this.isActiveNodesChange(e)&&this.renderer.emit("activeNodesChange",new Set(this.activeNodes.keys()),t),this.isViewportNodesChange(e)&&this.renderer.emit("viewportNodesChange",new Set(this.viewportNodes.keys()),e.firstNode.nodeId,e.lastNode.nodeId,t)}catch(e){console.error(e)}this.setActiveNodes(e)}},{key:"rawPaint",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"scroll";if(!this.isDestroyed){var n=this.calculateViewportActivation();n.activeNodes.forEach((function(t){t.isDirty()?(e.paintManager.renderLayoutNode(t),t.needRecalculate=!0,t.markUNDirty()):e.paintManager.appendLayoutNode(t),e.layoutTree.setBlock(t.nodeId)})),n.activeNodes.forEach((function(t){e.layoutTree.lockHeight(t.nodeId)})),this.paintManager.mount(n.activeNodes,n.activeRange,n.viewportNodes),this.resizeManager.observerNodes(n.activeNodes);var r=this.getAnchorNode(),o=r?this.currentViewRect.top-r.topToRoot:0;n.activeNodes.forEach((function(t){e.layoutTree.measure(t.nodeId)})),this.layoutTree.unlockAndMeasure(),this.resizeManager.applyChanges(),this.isInMaxView||(this.layoutTree.syncLayout(),r&&Math.abs(this.currentViewRect.top-r.topToRoot-o)>=iv&&this.viewportManager.setScrollTop(r.topToRoot+o),this.emitChangeEvent(n,t))}}},{key:"getAnchorNode",value:function(){var e=this.currentViewRect.top,t=this.layoutTree.nodes[0];if(e<=0)return t||null;var n=Number.MAX_VALUE;return this.activeNodes.forEach((function(r){var o=Math.abs(r.topToRoot-e);return o<n&&(n=o,t=r),r.topToRoot>=e})),t||null}},{key:"setSelectionNodes",value:function(e){var t=this,n=!1;return e.forEach((function(e){t.activeNodes.has(e)||(n=!0)})),this.selectionNodes=e,n}},{key:"update",value:function(){this.handleLastProcess("change")}},{key:"updateViewport",value:function(e,t){this.isScrollingUp=t.top<e.top,this.layoutTree.unlockAndMeasure(),this.resizeManager.applyChanges(),this.layoutTree.syncLayout(),this.isScrollingUp?this.debounceRAFPaint():this.debounceRawPaint()}},{key:"applyChanges",value:function(e){this.layoutTree.applyChanges(e)}},{key:"calculateViewportActivation",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currentViewRect,n={top:t.top,bottom:t.top+t.height,bufferTop:t.top-this.bufferHeight,bufferBottom:t.top+t.height+this.bufferHeight},r=new Set,o=new Set,i=new Set,a=new Map,l=[Number.MAX_VALUE,0],u=-1,c=-1,s=null,d=Number.MAX_VALUE,f=new Set;if(this.layoutTree.loopNode((function(t,h,p){if(t.isInCollapse)return!1;if(e.childrenShouldActive.has(t.nodeId)||t.isContainsByIds(f))return a.set(t.nodeId,t),f.add(t.nodeId),!0;(t.isContainer&&t.parent&&"tr"!==t.viewNode.nodeName&&a.has(t.parent.nodeId)||e.layoutTree.blockNodes.has(t.nodeId))&&a.set(t.nodeId,t);var v=t.topToRoot+t.height;if(n.bufferTop>v)return!1;if(n.bufferBottom<t.topToRoot)return!1;if(v>=n.top&&v<=n.bottom||t.topToRoot>=n.top&&t.topToRoot<=n.bottom||t.topToRoot<=n.top&&v>=n.bottom){r.add(t.nodeId),a.set(t.nodeId,t),t.needRecalculate&&i.add(t.nodeId);var m=Math.abs(t.topToRoot-n.top);m<d&&(s=t,d=m),p&&(-1===u&&(u=h),c=Math.max(c,h),l[0]=Math.min(l[0],h),l[1]=Math.max(l[1],h))}else(v>=n.bufferTop&&v<=n.bufferBottom||t.topToRoot>=n.bufferTop&&t.topToRoot<=n.bufferBottom)&&(o.add(t.nodeId),a.set(t.nodeId,t),t.needRecalculate&&i.add(t.nodeId),p&&(-1===u&&(u=h),c=Math.max(c,h)));return!0}),this.childrenShouldActive),a.size<this.limitSize)for(var h=u-1,p=c+1,v=0;a.size<this.limitSize&&(h>=0||p>=0&&p<this.layoutTree.nodes.length)&&v<2*this.limitSize;){if(v++,h>=0){var m=this.layoutTree.nodes[h];m&&(u=h,a.set(m.nodeId,m),o.add(m.nodeId),h--)}if(p<this.layoutTree.nodes.length){var g=this.layoutTree.nodes[p];g&&(c=p,a.set(g.nodeId,g),o.add(g.nodeId),p++)}}return this.selectionNodes.forEach((function(t){var n=e.layoutTree.getNode(t);if(n){a.set(t,n);for(var r=n.parent;r;)a.set(r.nodeId,r),r=r.parent}})),c<0&&(c=0),u<0&&(u=c),{anchorNode:s,viewportNodes:r,viewportData:n,activeNodes:a,activeRange:l,bufferNodes:o,firstNode:this.layoutTree.nodes[u],lastNode:this.layoutTree.nodes[c],needRecalculateNodes:i}}},{key:"isAboveViewport",value:function(e){var t=this.currentViewRect.top;if(t<=0)return!1;var n=this.layoutTree.getNode(e);return Boolean(n&&n.topToRoot<=t)}},{key:"isNodeIdInActive",value:function(e){return this.bufferNodes.has(e)||this.viewportNodes.has(e)}},{key:"scrollToNode",value:function(e){var t=this,n=this.layoutTree.getNode(e);if(n){if(n.topToRoot>this.currentViewRect.top&&n.topToRoot<this.currentViewRect.bottom)return!0;var r=Math.max(n.topToRoot-this.currentViewRect.height,0),o=2*this.currentViewRect.height,i=this.calculateViewportActivation({top:r,height:o,bottom:r+o});return i.activeNodes.forEach((function(e){e.isDirty()?(t.paintManager.renderLayoutNode(e),e.needRecalculate=!0,e.markUNDirty()):t.paintManager.appendLayoutNode(e),t.layoutTree.setBlock(e.nodeId)})),i.activeNodes.forEach((function(e){t.layoutTree.lockHeight(e.nodeId)})),this.paintManager.mount(i.activeNodes,i.activeRange,i.viewportNodes),this.resizeManager.observerNodes(i.activeNodes),this.layoutTree.unlockAndMeasure(),this.resizeManager.applyChanges(),this.isInMaxView||(this.layoutTree.syncLayout(),this.viewportManager.setScrollTop(Math.max(n.topToRoot,0),{ignoreUpdateViewport:!0}),this.emitChangeEvent(i,"scroll")),!1}return!0}}])}();function lg(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t.isRootNode()||t.closest([qe.LikeRoot])&&t.isElement()){var o=n>=t.childCount?t.childCount-1:r?n:Math.max(n-1,0);return t.children[o].isFillerNode()?t.id:t.children[o].id}var i=e.renderUnitManager.getRenderUnitWithAncestor(t),a=t.closest(rv);return(a||i)&&((null==a?void 0:a.id)||(null==i?void 0:i.viewNode.id))||null}function ug(e,t){var n=new Set;return t.ranges.forEach((function(t){var r=lg(e,t.start.node,t.start.offset,!0),o=lg(e,t.end.node,t.end.offset,!1);r&&n.add(r),o&&n.add(o)})),n}function cg(e,t,n){for(var r,o=t;o&&!(r=wp(o));)o=o.parentNode;if(!r)return null;if(r.isCardNode())return{node:r,offset:0};var i=function(e,t){var n=e.previousSibling,r=e.nextSibling;if(e.isFillerNode()){if(pg(r))return r;if(pg(n))return n}if(e.isTextNode()){if(0===t&&pg(n))return n;if(t===e.data.length&&pg(r))return r}return null}(r,n);return i?{node:i,offset:0}:r.isFillerNode()?{node:r.parentNode,offset:r.offset}:(e.repairByViewNode(r),function(e,t,n){if(e.isTextNode()){var r=Cp(e).getContentDOMNode();return r===t?0===n?{node:e,offset:0}:{node:e,offset:e.dataLength}:(bt(r.firstChild===t,"framework/engine/src/renderer/viewport/render-controller/lib/virtual-render-controller/helper/to-view-range.ts:150"),{node:e,offset:Math.min(n,e.dataLength)})}return function(e,t,n){return bt(e.isElement(),"framework/engine/src/renderer/viewport/render-controller/lib/virtual-render-controller/helper/to-view-range.ts:166"),e.isRootNode()?function(e,t,n){var r=t.childNodes,o=n;for(n>=r.length&&(o=r.length-1);o>=0;o--){var i=wp(r[o]);if(i)return{node:e,offset:i.offset}}return null}(e,t,n):e.hasCategory([qe.Root,qe.LikeRoot])?function(e,t,n){if(0===e.childCount)return{node:e,offset:0};var r=Cp(e).getContentDOMNode(),o=document.createRange();o.setStart(t,n),o.collapse(!0);var i=document.createRange();if(i.setStart(r,0),i.collapse(!0),sg(o,i)||dg(o,i))return{node:e,offset:0};var a=document.createRange();return a.setStart(r,r.childNodes.length),a.collapse(!0),fg(o,a)?{node:e,offset:e.childCount}:hg(e,t,n)}(e,t,n):function(e,t,n){var r=Cp(e).getContentDOMNode(),o=document.createRange();o.setStart(t,n),o.collapse(!0);var i=document.createRange();if(i.setStart(r,0),i.collapse(!0),sg(o,i))return{node:e,offset:0};if(dg(o,i))return{node:e.parentNode,offset:e.offset};var a=document.createRange();return a.setStart(r,r.childNodes.length),a.collapse(!0),fg(o,a)?{node:e.parentNode,offset:e.offset+1}:hg(e,t,n)}(e,t,n)}(e,t,n)}(r,t,n))}function sg(e,t){return 0===e.compareBoundaryPoints(Range.END_TO_END,t)}function dg(e,t){return-1===e.compareBoundaryPoints(Range.END_TO_END,t)}function fg(e,t){return 1===e.compareBoundaryPoints(Range.END_TO_END,t)}function hg(e,t,n){var r=e.children,o=document.createRange();o.setStart(t,n),o.collapse(!0);for(var i=0,a=r.length;i<a;i++){var l=Cp(r[i]).getMainDOMNode(),u=document.createRange();if(u.selectNode(l),u.collapse(!0),sg(o,u)||dg(o,u))return{node:e,offset:i}}return{node:e,offset:e.childCount}}function pg(e){return!!e&&e.isTextNode()&&e.isEmpty()}var vg=document.createRange();function mg(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.node,o=t.offset,i=Cp(r);if(bt(i,"framework/engine/src/renderer/viewport/render-controller/lib/virtual-render-controller/helper/to-dom-range.ts:39"),i.isConnected||(console.warn("选区映射修复 1",i),gg(e,i)),bt(i.isConnected,"framework/engine/src/renderer/viewport/render-controller/lib/virtual-render-controller/helper/to-dom-range.ts:46"),r.isRootNode()){var a=o>=r.childCount?r.childCount-1:n?o:Math.max(0,o-1),l=Cp(r.children[a]);return bt(l,"framework/engine/src/renderer/viewport/render-controller/lib/virtual-render-controller/helper/to-dom-range.ts:58"),n?{node:l.getMainDOMNode(),offset:0}:(vg.selectNodeContents(l.getMainDOMNode()),vg.collapse(!1),{node:vg.startContainer,offset:vg.startOffset})}if(r.isTextNode())return{node:i.getContentDOMNode().firstChild,offset:o};if(r.isFillerNode())return{node:i.getMainDOMNode(),offset:o};if(r.isCardNode())return bt(0===t.offset,"framework/engine/src/renderer/viewport/render-controller/lib/virtual-render-controller/helper/to-dom-range.ts:89"),{node:i.getMainDOMNode(),offset:0};bt(r.isElement(),"framework/engine/src/renderer/viewport/render-controller/lib/virtual-render-controller/helper/to-dom-range.ts:97");var u=r,c=u.getChildByOffset(o),s=0;if(c||(c=u.getChildByOffset(o-1),s=1),!c)return bt(0===o&&r.hasCategory([qe.Root,qe.LikeRoot,qe.TextContainer]),"framework/engine/src/renderer/viewport/render-controller/lib/virtual-render-controller/helper/to-dom-range.ts:110"),{node:Cp(r).getMainDOMNode(),offset:0};bt(c,"framework/engine/src/renderer/viewport/render-controller/lib/virtual-render-controller/helper/to-dom-range.ts:125");var d=Cp(c);return bt(d,"framework/engine/src/renderer/viewport/render-controller/lib/virtual-render-controller/helper/to-dom-range.ts:129"),d.isConnected||(console.warn("选区映射修复 2",i),gg(e,d)),bt(d.isConnected,"framework/engine/src/renderer/viewport/render-controller/lib/virtual-render-controller/helper/to-dom-range.ts:136"),{node:d.getMainDOMNode().parentNode,offset:d.offset+s}}function gg(e,t){for(var n=t.viewNode,r=n.parentNode;r&&!r.isRootNode()&&!Cp(r).isConnected;){var o=r.parentNode;if(o.isRootNode())break;r=o}r?(e.repairByViewNode(n),t.isConnected?console.log("修复成功",t):console.warn("修复失败，修复结果不符合预期",t,r)):console.warn("修复失败，未找到有效的节点",t)}var bg=function(){return(0,$e.A)((function e(t,n,r,o){(0,Ke.A)(this,e),Object.defineProperty(this,"_viewport",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isFirstRender",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"reconciler",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_allowCardLazyInit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._viewport=t,this._allowCardLazyInit=o.allowCardLazyInit,this.reconciler=new ag(t),window.reconciler=this.reconciler}),[{key:"destroy",value:function(){tv(this._viewport.virtualRootNode),this.reconciler.destroy(),this._viewport=null,this._editDOMNode=null,this._scrollNode=null,this.reconciler=null}},{key:"applyContentChange",value:function(e,t,n){if(this._isFirstRender)this._isFirstRender=!1,this.reconciler.applyChanges(e),this.reconciler.init(t.focusPosition.node.id),this.reconciler.setSelectionNodes(ug(this._viewport,t)),this.reconciler.update();else{var r=e.removedNodes,o=e.textChanges,i=e.attrChanges,a=e.addedNodes,l=e.positionChanges;rm.destroyByViewNodes(r),rm.updateTextByViewNodes(o.filter((function(e){return Cp(e)}))),rm.updateAttrByAttrChanges(i.filter((function(e){return Cp(e.node)})),n),this.applyNodeChanges(this._viewport.renderer,this._viewport.renderUnitManager,a,l,n,(function(e){return i.some((function(t){return t.node===e}))}),this._isForceAppear()),this.reconciler.applyChanges(e),this.reconciler.setSelectionNodes(ug(this._viewport,t)),this.reconciler.update()}}},{key:"applySelectionChange",value:function(e){Pm(this._viewport,e),this.reconciler.setSelectionNodes(ug(this._viewport,e))&&this.reconciler.update()}},{key:"repaintByScroll",value:function(e){}},{key:"scrollByNodeId",value:function(e){var t,n=this._viewport.renderer,r=null===(t=n._nativeDoc)||void 0===t?void 0:t.getViewNodeById(e);if(r){var o=lg(this._viewport,r,0,!0),i=!0;if(o&&(this.reconciler.isNodeIdInActive(o)||(i=this.reconciler.scrollToNode(o))),i){var a=zm.createByNodeAndOffset(r,0);Nm(n,!1,n.scrollNode,n._nativeDoc._viewDoc.selection.cloneByRanges(a))}}}},{key:"scrollToSelection",value:function(e,t){var n=this._viewport.renderer,r=lg(this._viewport,t.focusPosition.node,t.focusPosition.offset,!0),o=!0;r&&(this.reconciler.isNodeIdInActive(r)||(o=this.reconciler.scrollToNode(r))),o&&Nm(n,e,n.scrollNode,t)}},{key:"repairByViewNode",value:function(e){sv(e)}},{key:"repairByViewRange",value:function(e){this.repairByViewRanges([e])}},{key:"repairByViewRanges",value:function(e){var t=new Set;e.forEach((function(e){var n=e.start,r=e.end,o=lm(n.node,n.offset),i=lm(r.node,r.offset);if(o)do{if(o&&Cp(o)&&t.add(o),o===i)return;o=o.nextSibling}while(o)})),t.forEach((function(e){sv(e)}))}},{key:"applyNodeChanges",value:function(e,t,n,r,o,i,a){var l=new Set,u=new Set;n.forEach((function(e){var n=t.getRenderUnitWithAncestor(e);if(!n)return!1;n.markDirty(),l.add(n)})),r.forEach((function(e){var n=t.getRenderUnitWithAncestor(e);bt(n,"framework/engine/src/renderer/viewport/render-controller/lib/virtual-render-controller/index.ts:239"),n.viewNode!==e&&n.isConnected?u.add(e):(n.markDirty(),l.add(n))})),l.forEach((function(t){sm(e,t,a)})),rm.resetPosition(e,u,o,i),r.forEach((function(e){var t=Cp(e);null==t||t.$afterPositionChange()}))}},{key:"_isForceAppear",value:function(){return!this._allowCardLazyInit}},{key:"toViewRange",value:function(e,t){return function(e,t){var n=t.startContainer,r=t.startOffset,o=t.endContainer,i=t.endOffset,a=t.collapsed,l=cg(e,n,r);if(!l)return null;if(a)return{start:l,end:Object.assign({},l)};var u=cg(e,o,i);return u?{start:l,end:u}:null}(e,t)}},{key:"toDOMRange",value:function(e,t){return function(e,t){var n=mg(e,t.start,!0),r=n;t.collapsed||(r=mg(e,t.end));var o=document.createRange();return o.setStart(n.node,n.offset),o.setEnd(r.node,r.offset),o}(e,t)}}])}();function yg(e,t){var n=t.startContainer,r=t.startOffset,o=t.endContainer,i=t.endOffset,a=t.collapsed,l=wg(e,n,r);if(!l)return null;if(a)return{start:l,end:Object.assign({},l)};var u=wg(e,o,i);return u?{start:l,end:u}:null}function wg(e,t,n){for(var r,o=t;o&&!(r=wp(o));)o=o.parentNode;if(!r)return null;if(r.isCardNode())return{node:r,offset:0};var i=function(e,t){var n=e.previousSibling,r=e.nextSibling;if(e.isFillerNode()){if(Ng(r))return r;if(Ng(n))return n}if(e.isTextNode()){if(0===t&&Ng(n))return n;if(t===e.data.length&&Ng(r))return r}return null}(r,n);return i?{node:i,offset:0}:r.isFillerNode()?{node:r.parentNode,offset:r.offset}:(e.repairByViewNode(r),function(e,t,n){if(e.isTextNode()){var r=Cp(e).getContentDOMNode();return r===t?0===n?{node:e,offset:0}:{node:e,offset:e.dataLength}:(bt(r.firstChild===t,"framework/engine/src/renderer/viewport/helpers/to-view-range.ts:149"),{node:e,offset:Math.min(n,e.dataLength)})}return function(e,t,n){return bt(e.isElement(),"framework/engine/src/renderer/viewport/helpers/to-view-range.ts:165"),e.hasCategory([qe.Root,qe.LikeRoot])?function(e,t,n){if(0===e.childCount)return{node:e,offset:0};var r=Cp(e).getContentDOMNode(),o=document.createRange();o.setStart(t,n),o.collapse(!0);var i=document.createRange();if(i.setStart(r,0),i.collapse(!0),Ag(o,i)||kg(o,i))return{node:e,offset:0};var a=document.createRange();return a.setStart(r,r.childNodes.length),a.collapse(!0),_g(o,a)?{node:e,offset:e.childCount}:Cg(e,t,n)}(e,t,n):function(e,t,n){var r=Cp(e).getContentDOMNode(),o=document.createRange();o.setStart(t,n),o.collapse(!0);var i=document.createRange();if(i.setStart(r,0),i.collapse(!0),Ag(o,i))return{node:e,offset:0};if(kg(o,i))return{node:e.parentNode,offset:e.offset};var a=document.createRange();return a.setStart(r,r.childNodes.length),a.collapse(!0),_g(o,a)?{node:e.parentNode,offset:e.offset+1}:Cg(e,t,n)}(e,t,n)}(e,t,n)}(r,t,n))}function Ag(e,t){return 0===e.compareBoundaryPoints(Range.END_TO_END,t)}function kg(e,t){return-1===e.compareBoundaryPoints(Range.END_TO_END,t)}function _g(e,t){return 1===e.compareBoundaryPoints(Range.END_TO_END,t)}function Cg(e,t,n){var r=e.children,o=document.createRange();o.setStart(t,n),o.collapse(!0);for(var i=0,a=r.length;i<a;i++){var l=Cp(r[i]).getMainDOMNode(),u=document.createRange();if(u.selectNode(l),u.collapse(!0),Ag(o,u)||kg(o,u))return{node:e,offset:i}}return{node:e,offset:e.childCount}}function Ng(e){return!!e&&e.isTextNode()&&e.isEmpty()}var Og=function(){return(0,$e.A)((function e(t,n,r,o){(0,Ke.A)(this,e),Object.defineProperty(this,"viewport",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"editDOMNode",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"scrollNode",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"engineOption",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"_viewport",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_controller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isFirst",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this._viewport=t,o.virtualRendering?this._controller=new bg(t,n,r,o):o.isTileRendering()?this._controller=new Vm(t,n,r,o):this._controller=new xm(t,n,r,o)}),[{key:"refreshController",value:function(){var e=this.viewport,t=this.editDOMNode,n=this.scrollNode,r=this.engineOption;this._controller.destroy(),r.isTileRendering()?this._controller=new Vm(e,t,n,r):this._controller=new xm(e,t,n,r)}},{key:"destroy",value:function(){this._controller.destroy(),this._viewport=null,this._controller=null}},{key:"applyContentChange",value:function(e,t,n,r){if(this._isFirst&&(this._isFirst=!1,this.engineOption.virtualRendering)){var o=e.addedNodes.find((function(e){return!(!e.isElement()||"table"!==e.nodeName)&&(e.attrs.colCount||1)*(e.attrs.rowCount||1)>2e3}));o&&this.refreshController()}this._controller.applyContentChange(e,n,t!==We.OT),t!==We.Auto&&t!==We.Silent&&this.checkActive(n,r)}},{key:"applySelectionChange",value:function(e,t){this._controller.applySelectionChange(e),this.checkActive(e,t)}},{key:"repairByViewNode",value:function(e){return this._controller.repairByViewNode(e)}},{key:"repairByViewRange",value:function(e){return this._controller.repairByViewRange(e)}},{key:"repairByViewRanges",value:function(e){return this._controller.repairByViewRanges(e)}},{key:"scrollByNodeId",value:function(e){return this._controller.scrollByNodeId(e)}},{key:"scrollToSelection",value:function(e,t){this._controller.scrollToSelection(e,t)}},{key:"repaintByScroll",value:function(e){this._controller.repaintByScroll(e)}},{key:"checkActive",value:function(e,t){var n=e.firstRange.start.node,r=t?t.firstRange.start.node:null,o=n.isCardNode()?n:null,i=r&&r.isCardNode()?r:null;if(o!==i){if(i&&i.isConnected){var a=Cp(i);bt(a,"framework/engine/src/renderer/viewport/render-controller/index.ts:171"),a.$blur()}if(o){var l=Cp(o);bt(o.isConnected&&l,"framework/engine/src/renderer/viewport/render-controller/index.ts:180"),l.$focus()}}}},{key:"toViewRange",value:function(e,t){return"toViewRange"in this._controller?this._controller.toViewRange(e,t):yg(e,t)}},{key:"toDOMRange",value:function(e,t){return"toDOMRange"in this._controller?this._controller.toDOMRange(e,t):mm(e,t)}}])}();function xg(e){return!(!e.hasCategory(qe.TableHole)&&!e.hasCategory([qe.Block,qe.Hole])&&(!e.hasCategory([qe.Brick])||e.parentNode.hasCategory([qe.Hole]))&&(!e.isBlockFillerNode()||!e.parentNode.hasCategory([qe.Root,qe.LikeRoot])))}function Eg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Dg(e){var t=e.closest(qe.TableHole);if(t)return t;if(xg(e))return e;for(var n=e.parentNode;n;){if(xg(n))return n;n=n.parentNode}return Pg(e)}function Pg(e){if(!e.isElement())return null;var t=e.children;if(!(null==t?void 0:t.length))return null;var n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Eg(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Eg(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(xg(o))return o;var i=Pg(o);if(i)return i}}catch(e){r.e(e)}finally{r.f()}return null}function Rg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Sg(e){var t=e.closest(qe.TableHole);if(t)return t;if(xg(e))return e;for(var n=e.parentNode;n;){if(xg(n))return n;n=n.parentNode}return Tg(e)}function Tg(e){if(!e.isElement())return null;var t=e.children;if(!(null==t?void 0:t.length))return null;t.reverse();var n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Rg(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rg(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(xg(o))return o;var i=Tg(o);if(i)return i}}catch(e){r.e(e)}finally{r.f()}return null}function jg(e){return bt(e.isValid,"framework/engine/src/renderer/viewport/render-unit-manager/helpers/get-next-render-unit-node.ts:8"),Ig(e.viewNode)}function Ig(e){for(var t=e.nextSibling;t;){var n=Dg(t);if(n)return n;t=t.nextSibling}return!e.parentNode||e.parentNode.hasCategory(qe.Root)?null:Ig(e.parentNode)}function Bg(e){return bt(e.isValid,"framework/engine/src/renderer/viewport/render-unit-manager/helpers/get-prev-render-unit-node.ts:8"),Mg(e.viewNode)}function Mg(e){for(var t=e.previousSibling;t;){var n=Sg(t);if(n)return n;t=t.previousSibling}return!e.parentNode||e.parentNode.hasCategory(qe.Root)?null:Mg(e.parentNode)}function Fg(e){var t=e.closest([qe.TableHole,qe.ContainerHole,qe.AlertHole]);if(t)return t;for(var n=e;n;){if(xg(n))return n;n=n.parentNode}return null}var Lg=function(){return(0,$e.A)((function e(t,n){(0,Ke.A)(this,e),Object.defineProperty(this,"_viewNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_renderUnitManager",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this._renderUnitManager=t,gp(n,"_isRenderRootNode",!0),gp(n,"_renderUnit",this),this._viewNode=n}),[{key:"viewNode",get:function(){return this._viewNode}},{key:"isValid",get:function(){return this._viewNode.isConnected}},{key:"isConnected",get:function(){var e=Cp(this._viewNode);return!(!e||!e.isConnected)}},{key:"prevUnit",get:function(){return this._renderUnitManager.getPrevRenderUnit(this)}},{key:"nextUnit",get:function(){return this._renderUnitManager.getNextRenderUnit(this)}},{key:"isDirty",value:function(){return this._dirty}},{key:"markDirty",value:function(){this._dirty=!0}},{key:"unmarkDirty",value:function(){this._dirty=!1}},{key:"getDisplayHeight",value:function(){var e=Cp(this._viewNode);return bt(e,"framework/engine/src/renderer/viewport/render-unit-manager/lib/render-unit/index.ts:66"),e.getMainDOMNode().getBoundingClientRect().height}},{key:"getDisplayDOM",value:function(){var e=Cp(this._viewNode);return bt(e,"framework/engine/src/renderer/viewport/render-unit-manager/lib/render-unit/index.ts:76"),e.getMainDOMNode()}},{key:"getDisplayRect",value:function(){var e=Cp(this._viewNode);return bt(e,"framework/engine/src/renderer/viewport/render-unit-manager/lib/render-unit/index.ts:87"),e.getMainDOMNode().getBoundingClientRect()}},{key:"attached",value:function(){this._renderUnitManager.renderUnitAttached(this)}},{key:"detached",value:function(){this._renderUnitManager.renderUnitDetached(this)}}])}(),Ug="_cachedRenderUnit",Vg=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e),Object.defineProperty(this,"_attached",{enumerable:!0,configurable:!0,writable:!0,value:new Set})}),[{key:"destroy",value:function(){}},{key:"getRenderUnitById",value:function(e){return Array.from(this._attached).find((function(t){return t.viewNode.id===e}))||null}},{key:"getRenderUnitByDOM",value:function(e){var t=wp(e);return t?this.getRenderUnit(t):null}},{key:"getAllAttachedUnits",value:function(){return Array.from(this._attached)}},{key:"renderUnitAttached",value:function(e){this._attached.add(e)}},{key:"renderUnitDetached",value:function(e){this._attached.delete(e)}},{key:"getFirstRenderUnitByViewNode",value:function(e){var t=Dg(e);return t?Hg(this,t):null}},{key:"getLastRenderUnitByViewNode",value:function(e){var t=Sg(e);return t?Hg(this,t):null}},{key:"getRenderUnit",value:function(e){return yp(e,Ug)||null}},{key:"getRenderUnitWithAncestor",value:function(e){var t=Fg(e);return t?Hg(this,t):null}},{key:"getPrevRenderUnit",value:function(e){var t=Bg(e);return t?Hg(this,t):null}},{key:"getNextRenderUnit",value:function(e){var t=jg(e);return t?Hg(this,t):null}}])}();function Hg(e,t){return yp(t,Ug)||gp(t,Ug,new Lg(e,t)),yp(t,Ug)||null}function zg(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Wg()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Wg(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Wg=function(){return!!e})()}var qg=function(e){function t(e,n,r){var o;return(0,Ke.A)(this,t),o=zg(this,t,[e,n]),Object.defineProperty(o,"_rendered",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),o._domNode=r,bp(o._domNode,n),o._rendered=!0,o}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"isRootNode",value:function(){return!0}},{key:"isConnected",get:function(){return!0}},{key:"isElement",value:function(){return!0}}])}(Bv),$g=function(){return(0,$e.A)((function e(t,n,r){(0,Ke.A)(this,e),Object.defineProperty(this,"_virtualRootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_viewRootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_viewDoc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_domRootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_renderController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_renderUnitManager",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_drawers",{enumerable:!0,configurable:!0,writable:!0,value:[]});var o=n.rootNode;r.innerHTML="",bp(r,o),this._virtualRootNode=new qg(t,o,r),Op(o,this._virtualRootNode),this._renderer=t,this._viewDoc=n,this._viewRootNode=o,this._domRootNode=r,this._renderUnitManager=new Vg,this._renderController=new Og(this,r,t.scrollNode,t.option)}),[{key:"destroy",value:function(){this._renderUnitManager.destroy(),this._renderController.destroy(),this._drawers.forEach((function(e){e.destroy()})),this._domRootNode.innerHTML="",this._virtualRootNode=null,this._viewDoc=null,this._renderController=null}},{key:"renderer",get:function(){return this._renderer}},{key:"renderUnitManager",get:function(){return this._renderUnitManager}},{key:"viewRootNode",get:function(){return this._viewRootNode}},{key:"domRootNode",get:function(){return this._domRootNode}},{key:"viewDocument",get:function(){return this._viewDoc}},{key:"virtualRootNode",get:function(){return this._virtualRootNode}},{key:"applyContentChange",value:function(e,t,n,r){this._renderController.applyContentChange(e,t,n,r)}},{key:"applySelectionChange",value:function(e,t){this._renderController.applySelectionChange(e,t)}},{key:"refreshSelection",value:function(){}},{key:"createDrawer",value:function(e){var t=new ev(this._domRootNode,e);return this._drawers.push(t),t}},{key:"repairByViewNode",value:function(e){return this._renderController.repairByViewNode(e)}},{key:"repairByViewRange",value:function(e){return this._renderController.repairByViewRange(e)}},{key:"repairByViewRanges",value:function(e){return this._renderController.repairByViewRanges(e)}},{key:"repaintByScroll",value:function(e){this._renderController.repaintByScroll(e)}},{key:"scrollByNodeId",value:function(e){return this._renderController.scrollByNodeId(e)}},{key:"scrollToSelection",value:function(e,t){this._renderController.scrollToSelection(e,t)}},{key:"toViewRange",value:function(e){return this._renderController.toViewRange(this._renderer,e)}},{key:"toDOMRange",value:function(e){return this._renderController.toDOMRange(this._renderer,e)}}])}(),Kg=function(){return(0,$e.A)((function e(t,n,r){(0,Ke.A)(this,e),Object.defineProperty(this,"_renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_viewDoc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_viewport",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._renderer=t,this._viewDoc=n,this._viewport=new $g(t,n,r),this._init()}),[{key:"_init",value:function(){var e=this;xc(this,this._viewDoc,"contentchange",(function(t){e._viewport.applyContentChange(t.changes,t.mode,t.selection,t.prevSelection),e._renderer.emit("contentchange_private",t.changes),e._renderer.emit("contentchange",{ranges:t.selection.ranges.map((function(t){return e._viewport.toDOMRange(t)})),mode:t.mode,focus:t.selection.focus,anchor:t.selection.anchor}),e._renderer.engine.emit("contentchange",t.mode)})),xc(this,this._viewDoc,"selectionchange",(function(t){e._viewport.applySelectionChange(t.selection,t.prevSelection),e._renderer.emit("selectionchange",{focus:t.selection.focus,anchor:t.selection.anchor,ranges:t.selection.ranges.map((function(t){return e._viewport.toDOMRange(t)}))}),e._renderer.engine.emit("selectionchange")}))}},{key:"destroy",value:function(){this._viewport.destroy()}},{key:"getViewNodeById",value:function(e){return this._viewDoc.getNodeById(e)}},{key:"createDrawer",value:function(e){return this._viewport.createDrawer(e)}},{key:"repairByViewNode",value:function(e){return this._viewport.repairByViewNode(e)}},{key:"repairByViewRange",value:function(e){return this._viewport.repairByViewRange(e)}},{key:"repairByViewRanges",value:function(e){return this._viewport.repairByViewRanges(e)}},{key:"repaintByScroll",value:function(e){this._viewport.repaintByScroll(e)}},{key:"scrollToCurrentSelection",value:function(e){this._viewport.scrollToSelection(e,this._viewDoc.selection)}},{key:"scrollByNodeId",value:function(e){return this._viewport.scrollByNodeId(e)}},{key:"scrollToSelection",value:function(e,t){return this._viewport.scrollToSelection(t,e)}},{key:"toViewRange",value:function(e){return this._viewport.toViewRange(e)}},{key:"toDOMRange",value:function(e){return this._viewport.toDOMRange(e)}}])}();function Yg(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Gg()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Gg(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Gg=function(){return!!e})()}var Jg=function(e){function t(e,n,r,o,i){var a;return(0,Ke.A)(this,t),a=Yg(this,t),Object.defineProperty(a,"option",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(a,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(a,"engine",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(a,"iLayer",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(a,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(a,"service",{enumerable:!0,configurable:!0,writable:!0,value:null}),a}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"setService",value:function(e){this.service=e}},{key:"afterInit",value:function(){}},{key:"destroy",value:function(){var e;this.removeAllListeners(),null===(e=this.service)||void 0===e||e.destroy(),this.service=null}},{key:"sync",value:function(){return!0}}])}(it);function Xg(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Qg(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qg(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function Qg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Zg(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,eb()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function eb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(eb=function(){return!!e})()}var tb=function(e){function t(e,n,r,o,i){var a;(0,Ke.A)(this,t),a=Zg(this,t),Object.defineProperty(a,"_engine",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_layer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_domRootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_nativeDoc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_registry",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_plugins",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(a,"_engineOption",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_resizeObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_uiEmitter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_focusManager",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_rootNodeObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_rootNodeForceObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_documentObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_scrollNodeObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_theme",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"execCommand",{enumerable:!0,configurable:!0,writable:!0,value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];try{var o;return(o=a._engine).execCommand.apply(o,[e].concat(n))}catch(e){var i=n.map((function(e){try{return JSON.stringify(e)}catch(e){return"#error"}}));throw a.emit("commandExecuteError",{error:e,detail:{commandName:name,args:i}}),e}}}),Object.defineProperty(a,"queryCommandState",{enumerable:!0,configurable:!0,writable:!0,value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(t=a._engine).queryCommandState.apply(t,[e].concat(r))}}),Object.defineProperty(a,"queryCommandEnabled",{enumerable:!0,configurable:!0,writable:!0,value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(t=a._engine).queryCommandEnabled.apply(t,[e].concat(r))}}),Object.defineProperty(a,"queryCommandValue",{enumerable:!0,configurable:!0,writable:!0,value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(t=a._engine).queryCommandValue.apply(t,[e].concat(r))}}),a._engine=n,a._layer=new pp(n.id,r,o),a._engineOption=o,a._domRootNode=a._layer.domRootNode,a._focusManager=new Pp(a,a._domRootNode),a._registry=new hp,a._uiEmitter=o.uiEmitter||new it,a._resizeObserver=new ResizeObserver((function(){a.emit("resize")})),a._resizeObserver.observe(a._domRootNode);var l=a.id;return a._rootNodeObserver=new hd(l,a.domRootNode,(function(e){if(Ac(e,a._domRootNode))return!1})),a._rootNodeForceObserver=new hd(l,a.domRootNode),a._documentObserver=new hd(l,a.domRootNode.ownerDocument),a._scrollNodeObserver=new hd(l,a.scrollNode),a._theme=o.theme||new mu(a.domRootNode),a._init(e.renderPlugins,i),o.theme||a._theme.updateStyles(),a}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"queryCommandSupported",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(t=this._engine).queryCommandSupported.apply(t,[e].concat(r))}},{key:"_init",value:function(e,t){var n,r=this,o=this._layer.iLayer,i=this.engine.kernel,a=this.engine._engineOption.disabledPlugins;e.forEach((function(e){var n=e.PluginName,l=e.Service,u=e.Commands,c=e.Colors;if(!a.includes(n)){var s=e.PluginOption,d=s?new s(t[s.OptionName]):null;d&&(d.kernelOption=i.option);var f=new e(d,r,r.engine,o,i);if(l){var h=new l(r,i,f);r.registerService(h),f.setService(h)}r._createCommand(u,f),c&&Object.keys(c).forEach((function(e){mu.colorRegistry.registerColor(e,c[e])})),bt(f instanceof Jg,"framework/engine/src/renderer/index.ts:239"),r._plugins.push(f),bt(void 0===r._plugins[n],"framework/engine/src/renderer/index.ts:243"),r._plugins[n]=f}}));var l,u=Xg(this._plugins);try{for(u.s();!(l=u.n()).done;)l.value.init(this,this.engine,o,i)}catch(e){u.e(e)}finally{u.f()}var c,s=Xg(this._plugins);try{for(s.s();!(c=s.n()).done;){var d=c.value;null===(n=d.afterInit)||void 0===n||n.call(d)}}catch(e){s.e(e)}finally{s.f()}this.engine.view.on("document.create",(function(e){r._nativeDoc=new Kg(r,e,r._domRootNode),r._focusManager.enable(),r.emit("document.create")})),this.engine.view.on("document.destroy",(function(){r.emit("document.destroy"),r._nativeDoc.destroy(),r._nativeDoc=null})),this._focusManager.on("focus",(function(){r.emit("focusstatuschange",!0)})),this._focusManager.on("blur",(function(){r.emit("focusstatuschange",!1)})),this._focusManager.on("forceFocus",(function(e){r.emit("forceFocus",e)})),i.editing.on("operationRollback",(function(){var e,t=r.engine.getViewSelection();(null==t?void 0:t.isTableSelection)||null===(e=null==t?void 0:t.ranges)||void 0===e||e.forEach((function(e){r.repairByViewRange(e)}))}))}},{key:"_createCommand",value:function(e,t){var n=this;if(e){var r=this.engine.kernel,o={};Array.isArray(e)?(e.forEach((function(e){var i=e.ID;bt(i,"framework/engine/src/renderer/index.ts:307"),bt(!o[i],"duplicate command ID ".concat(i),"framework/engine/src/renderer/index.ts:308"),o[i]=new e(n,r,t)})),this.registerCommand(o)):"object"===(0,Gn.A)(e)&&(Object.keys(e).forEach((function(i){var a=e[i];bt(i,"framework/engine/src/renderer/index.ts:318"),bt(!o[i],"duplicate command ID ".concat(i),"framework/engine/src/renderer/index.ts:319"),o[i]=new a(n,r,t)})),this.registerCommand(o))}}},{key:"destroy",value:function(){this.removeAllListeners(),this._resizeObserver.disconnect(),this._resizeObserver=null,this._plugins.forEach((function(e){e.destroy()})),this._uiEmitter!==this.engine._engineOption.uiEmitter&&this._uiEmitter.removeAllListeners(),this._nativeDoc&&(this._nativeDoc.destroy(),this._nativeDoc=null),this._registry.destroy(),this._focusManager.destroy(),this._layer.destroy(),this._rootNodeObserver.destroy(),this._rootNodeForceObserver.destroy(),this._documentObserver.destroy(),this._scrollNodeObserver.destroy()}},{key:"id",get:function(){return this.engine.id}},{key:"globalOverlayNode",get:function(){return this._layer.globalOverlayNode}},{key:"scrollableOverlayNode",get:function(){return this._layer.scrollableOverlayNode}},{key:"engine",get:function(){return this._engine}},{key:"plugins",get:function(){return this._plugins}},{key:"option",get:function(){return this._engineOption}},{key:"iRenderer",get:function(){return this}},{key:"uiEmitter",get:function(){return this._uiEmitter}},{key:"registry",get:function(){return this._registry}},{key:"scrollNode",get:function(){return this._engineOption.getScrollNode()}},{key:"domRootNode",get:function(){return this._domRootNode}},{key:"focusManager",get:function(){return this._focusManager}},{key:"theme",get:function(){return this._theme}},{key:"isNeedImmediatelyAppear",value:function(){return!this._engineOption.isTileRendering()}},{key:"registerAttrTranslator",value:function(e,t){this._registry.registerAttrTranslator(e,t)}},{key:"registerInlineCard",value:function(e,t,n){this._registry.registerInlineCard(e,t,n)}},{key:"registerBlockCard",value:function(e,t,n){this._registry.registerBlockCard(e,t,n)}},{key:"registerBoxNode",value:function(e,t,n){this._registry.registerBoxNode(e,t,n)}},{key:"registerBoxUI",value:function(e,t){this._registry.registerBoxUI(e,t)}},{key:"repaintByScroll",value:function(e){return!!this._nativeDoc&&(this._nativeDoc.repaintByScroll(e),!0)}},{key:"repaintRenderSelection",value:function(e){this.emit("repaintSelection",e)}},{key:"createDrawer",value:function(e){return this._nativeDoc.createDrawer(e)}},{key:"scrollToCurrentSelection",value:function(e){return this._nativeDoc.scrollToCurrentSelection(e)}},{key:"scrollToSelection",value:function(e,t){return this._nativeDoc.scrollToSelection(e,t)}},{key:"scrollByNodeId",value:function(e){return this._nativeDoc.scrollByNodeId(e)}},{key:"repairByViewNode",value:function(e){return this._nativeDoc.repairByViewNode(e)}},{key:"repairByViewRange",value:function(e){return this._nativeDoc.repairByViewRange(e)}},{key:"repairByViewRanges",value:function(e){return this._nativeDoc.repairByViewRanges(e)}},{key:"toViewRange",value:function(e){if(!this._nativeDoc)return null;var t=this._nativeDoc.toViewRange(e);return t?new zm(new Hm(t.start.node,t.start.offset),new Hm(t.end.node,t.end.offset)):null}},{key:"toDOMRange",value:function(e){return this._nativeDoc.toDOMRange(e)}},{key:"canGetDocument",value:function(){var e=!1;return this._plugins.forEach((function(t){t.sync()||(e=!0)})),!e}},{key:"domDocument",get:function(){return this._domRootNode.ownerDocument}},{key:"kernel",get:function(){return this._engine.kernel}},{key:"scrollTo",value:function(e){this.scrollNode.scrollTop=e,this.emit("scroll")}},{key:"emitEvent",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(t=this._engine).emitEvent.apply(t,[e].concat(r))}},{key:"sendMessage",value:function(){var e;(e=this._engine).sendMessage.apply(e,arguments)}},{key:"isFocus",value:function(){return this.focusManager.isFocus()}},{key:"focus",value:function(e){this.focusManager.focus(e)}},{key:"blur",value:function(){this.focusManager.blur()}},{key:"registerCommand",value:function(e,t){return this._engine.registerCommand(e,t)}},{key:"onRootNode",value:function(e,t,n){return this._rootNodeObserver.on(e,t,n)}},{key:"onForceRootNode",value:function(e,t,n){return this._rootNodeForceObserver.on(e,t,n)}},{key:"onceRootNode",value:function(e,t,n){return this._rootNodeObserver.once(e,t,n)}},{key:"onDocument",value:function(e,t,n){return this._documentObserver.on(e,t,n)}},{key:"onceDocument",value:function(e,t,n){return this._documentObserver.once(e,t,n)}},{key:"onScroll",value:function(e){return this.on("scroll",e),this._scrollNodeObserver.on("scroll",e,{passive:!0})}},{key:"getVirtualNode",value:function(e){return Cp(e)}},{key:"getViewNodeByDOM",value:function(e){return wp(e)}},{key:"getViewNodeById",value:function(e){return this.engine.view.getViewNodeById(e)}},{key:"getEditWrapRect",value:function(){return"function"!=typeof this.option.getEditorWrapRect?(this.scrollNode||document.body).getBoundingClientRect():this.option.getEditorWrapRect()}}])}(Ma),nb=function(){function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_viewTree",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_ranges",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_focus",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_anchor",{enumerable:!0,configurable:!0,writable:!0,value:null}),this._viewTree=t}return(0,$e.A)(e,[{key:"destroy",value:function(){delete this._viewTree,this._ranges=[],this._focus=null,this._anchor=null}},{key:"isCollapsed",get:function(){return 1===this._ranges.length&&this._ranges[0].collapsed}},{key:"collapsed",get:function(){return 1===this._ranges.length&&this._ranges[0].collapsed}},{key:"firstRange",get:function(){return this._ranges[0]}},{key:"lastRange",get:function(){return this._ranges[this._ranges.length-1]}},{key:"rangeCount",get:function(){return this._ranges.length}},{key:"ranges",get:function(){return this._ranges.slice()}},{key:"focus",get:function(){return this._focus}},{key:"anchor",get:function(){return this._anchor}},{key:"isTableSelection",get:function(){return this._ranges.length>1}},{key:"focusPosition",get:function(){var e=this._ranges;return this._focus===Hr.start?e[0].start:this._focus===Hr.end?e[e.length-1].end:ob(e,this._focus).start}},{key:"anchorPosition",get:function(){var e=this._ranges;return this._anchor===Hr.start?e[0].start:this._anchor===Hr.end?e[e.length-1].end:ob(e,this._anchor).start}},{key:"isValid",value:function(){return this._ranges.length>0}},{key:"updateBy",value:function(e){var t=this,n=e.focus,r=e.anchor;this._focus=n,this._anchor=r,this._ranges=e.ranges.map((function(e){return t.transformToViewRange(e)})),bt(this._focus&&this._anchor,"framework/engine/src/view/selection/index.ts:110")}},{key:"transformToViewRange",value:function(e){var t=this._viewTree,n=e.start,r=e.end,o=e.collapsed,i=rb(t,n.node,n.offset);if(o)return new zm(i);var a=rb(t,r.node,r.offset);return new zm(i,a)}},{key:"clone",value:function(){var t=new e(this._viewTree);return t._focus=this._focus,t._anchor=this._anchor,t._ranges=this._ranges.slice(),t}},{key:"cloneByRanges",value:function(t){var n;n=Array.isArray(t)?t:[t];var r=new e(this._viewTree);return r._ranges=(0,ln.A)(n),r._anchor=Hr.start,r.collapsed?r._focus=Hr.start:r._focus=Hr.end,r}}])}();function rb(e,t,n){if(t.isTextNode())return function(e,t,n){bt(t.isConnected,"framework/engine/src/view/selection/index.ts:206");var r=e.getViewNode(t);return bt(r,"framework/engine/src/view/selection/index.ts:210"),r.isConnected?new Hm(r,n):(bt(""===t.data,"framework/engine/src/view/selection/index.ts:214"),rb(e,t.parentNode,t.offset))}(e,t,n);if(t.hasCategory([qe.TableHole,qe.Hole]))return function(e,t,n){var r=e.getViewNode(t);return bt(r.isConnected,"framework/engine/src/view/selection/index.ts:188"),0===n?(bt(r.firstChild.isInlineFillerNode(),"framework/engine/src/view/selection/index.ts:191"),new Hm(r,0)):(bt(1===n&&r.lastChild.isInlineFillerNode(),"framework/engine/src/view/selection/index.ts:195"),new Hm(r,r.lastChild.offset))}(e,t,n);if(t.hasCategory(qe.Card))return function(e,t,n){bt(0===n,"framework/engine/src/view/selection/index.ts:174");var r=e.getViewNode(t);return new Hm(r,0)}(e,t,n);bt(t.isElement(),"framework/engine/src/view/selection/index.ts:243");var r=t.getChildByOffset(n),o=e.getViewNode(t);if(!o.isConnected)return bt(o.hasCategory(qe.Inline)&&o.isEmpty(),"framework/engine/src/view/selection/index.ts:250"),rb(e,t.parentNode,t.offset);if(!r)return o.lastChild&&o.lastChild.isBlockFillerNode()?new Hm(o,o.childCount-1):new Hm(o,o.childCount);var i=e.getViewNode(r),a=!1;if((null==i?void 0:i.isConnected)||(i=null),!i)for(var l=n-1;l>=0;l--){var u=t.getChildByOffset(l);bt(u,"framework/engine/src/view/selection/index.ts:289");var c=e.getViewNode(u);if(null==c?void 0:c.isConnected){r=u,i=c,a=!0;break}}if(!i)for(var s=n+1,d=t.childCount;s<d;s++){var f=t.getChildByOffset(s);bt(f,"framework/engine/src/view/selection/index.ts:305");var h=e.getViewNode(f);if(null==h?void 0:h.isConnected){r=f,i=h,a=!1;break}}if(!i)return bt(1===o.childCount&&o.firstChild.isFillerNode(),"framework/engine/src/view/selection/index.ts:318"),new Hm(o,0);if(null==r?void 0:r.isCardNode()){bt(r.hasCategory(qe.InlineCard),"framework/engine/src/view/selection/index.ts:327");var p=i.previousSibling;return bt(p,"framework/engine/src/view/selection/index.ts:332"),a?new Hm(i.parentNode,i.offset+1):p.isInlineFillerNode()?new Hm(p.parentNode,p.offset):new Hm(i.parentNode,i.offset)}return bt((null==r?void 0:r.isElement())||(null==r?void 0:r.isTextNode()),"framework/engine/src/view/selection/index.ts:353"),new Hm(i.parentNode,a?i.offset+1:i.offset)}function ob(e,t){var n=e.length;if(!n)throw new Error("invalid ranges");if(1===n||!t)return e[0];if(t===Hr.start)return e[0];if(t===Hr.end)return e[n-1];if(t===Hr.topRight){bt(e[0].start.node.hasCategory(qe.TableCell),"framework/engine/src/view/selection/index.ts:384");for(var r=e[0].start.node.attrs.col,o=1,i=n;o<i;o++)if(e[o].start.node.attrs.col===r)return e[o-1]}if(t===Hr.bottomLeft){bt(e[0].start.node.hasCategory(qe.TableCell),"framework/engine/src/view/selection/index.ts:396");for(var a=e[n-1].start.node.attrs.col,l=n-2;l>=0;l--)if(e[l].start.node.attrs.col===a)return e[l+1]}return e[n-1]}var ib="add-attr",ab="remove-attr",lb="update-attr",ub="add-node",cb="remove-node",sb="move-node",db="update-text",fb="update",hb="add",pb="remove",vb=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e),Object.defineProperty(this,"_changed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_childrenChanges",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"_positionChanges",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"_textChanges",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"_addedNodes",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"_removedNodes",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"_attrChanges",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"_connectedCache",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}),[{key:"addChange",value:function(e,t){this._changed=!0;var n=t.node;switch(bt(n,"framework/engine/src/view/change-observer.ts:88"),e){case ib:this._parseAddAttr(t);break;case lb:this._parseUpdateAttr(t);break;case ab:this._parseRemoveAttr(t);break;case db:this._parseTextChange(t);break;case ub:this._addNode(t);break;case cb:this._removeNode(t);break;case sb:this._moveNode(t);break;default:bt(!1,"framework/engine/src/view/change-observer.ts:120")}}},{key:"hasChange",value:function(){return this._changed}},{key:"_parseAddAttr",value:function(e){var t=e.node,n=e.attrName;if(this._isConnected(t)){var r=this._attrChanges;bt(n,"framework/engine/src/view/change-observer.ts:138");var o=r.get(t);o?o[n]={type:hb}:r.set(t,(0,Ha.A)({},n,{type:hb}))}}},{key:"_parseRemoveAttr",value:function(e){var t=e.node,n=e.attrName,r=e.attrValue;if(this._isConnected(t)){var o=this._attrChanges;bt(n,"framework/engine/src/view/change-observer.ts:165");var i=o.get(t);i?i[n]={type:pb,value:r}:o.set(t,(0,Ha.A)({},n,{type:pb,value:r}))}}},{key:"_parseTextChange",value:function(e){var t=e.node;this._isConnected(t)&&this._textChanges.add(t)}},{key:"_parseUpdateAttr",value:function(e){var t=e.node,n=e.attrName;if(this._isConnected(t)){var r=this._attrChanges;bt(n,"framework/engine/src/view/change-observer.ts:205");var o=r.get(t);if(o){var i=o[n];if((null==i?void 0:i.type)===hb)return;o[n]={type:fb}}else r.set(t,(0,Ha.A)({},n,{type:fb}))}}},{key:"_addNode",value:function(e){var t=this,n=e.parent,r=e.node,o=e.offset;bt(o>-1,"framework/engine/src/view/change-observer.ts:230");var i=this._childrenChanges,a=this._positionChanges,l=this._getNodeCache(r);if(this._isConnected(n)&&i.add(n),l.connected)l.parentNode===n&&l.offset===o||a.add(r);else{bt(!r.parentNode,"framework/engine/src/view/change-observer.ts:247"),bt(n&&r,"framework/engine/src/view/change-observer.ts:248");var u=this._addedNodes;u.add(r),gb(r,(function(e){t._isConnected(e)||u.add(e)}))}}},{key:"_removeNode",value:function(e){var t=this,n=e.node,r=this._childrenChanges,o=this._removedNodes,i=n.parentNode;bt(i,"framework/engine/src/view/change-observer.ts:267"),i&&this._isConnected(i)&&r.add(i),gb(n,(function(e){t._isConnected(e)&&o.add(e)}))}},{key:"_moveNode",value:function(e){var t=this._childrenChanges,n=this._positionChanges,r=e.parent,o=e.oldParent,i=e.node;bt(r&&o&&i,"framework/engine/src/view/change-observer.ts:287"),this._isConnected(r)&&t.add(r),this._isConnected(o)&&t.add(o),this._isConnected(i)&&n.add(i)}},{key:"_isConnected",value:function(e){return this._getNodeCache(e).connected}},{key:"_getNodeCache",value:function(e){var t=this._connectedCache;return t.has(e)||t.set(e,{connected:e.isConnected,parentNode:e.parentNode,offset:e.offset}),t.get(e)}},{key:"getChanges",value:function(){var e=new Map,t=[],n=Array.from(this._addedNodes).filter((function(t){return mb(e,t)}));return this._attrChanges.forEach((function(r,o){bt(!n.includes(o),"framework/engine/src/view/change-observer.ts:334"),mb(e,o)&&t.push({node:o,attrs:r})})),{childrenChanges:Array.from(this._childrenChanges).filter((function(t){return bt(!n.includes(t),"framework/engine/src/view/change-observer.ts:346"),mb(e,t)})),positionChanges:Array.from(this._positionChanges).filter((function(t){return bt(!n.includes(t),"framework/engine/src/view/change-observer.ts:350"),mb(e,t)})),addedNodes:n,removedNodes:Array.from(this._removedNodes).filter((function(t){return bt(!n.includes(t),"framework/engine/src/view/change-observer.ts:355"),!mb(e,t)})),textChanges:Array.from(this._textChanges).filter((function(t){return bt(!n.includes(t),"framework/engine/src/view/change-observer.ts:359"),mb(e,t)})),attrChanges:t}}},{key:"clear",value:function(){this._changed=!1,this._childrenChanges.clear(),this._positionChanges.clear(),this._textChanges.clear(),this._addedNodes.clear(),this._removedNodes.clear(),this._attrChanges.clear(),this._connectedCache.clear()}}])}();function mb(e,t){return e.has(t)||e.set(t,t.isConnected),e.get(t)}function gb(e,t){t(e),e.isElement()&&e.children.forEach((function(e){gb(e,t)}))}function bb(e,t){yb(t),wb(e,t,t)}function yb(e){bt(e.isElement(),"framework/engine/src/view/view-tree/filler-manager/helper/fill-content.ts:15"),e.children.forEach((function(e){e.isTextFillerNode()||e.isInlineFillerNode()?e.remove():e.isElement()&&yb(e)}))}function wb(e,t,n){n.isElement()&&n.children.forEach((function(n){n.hasCategory(qe.InlineBox)?(bt(n.isConnected,"framework/engine/src/view/view-tree/filler-manager/helper/fill-content.ts:37"),0===n.offset&&Ab(e,n),kb(e,n),function(e,t){var n;t.childCount&&((null===(n=t.firstChild)||void 0===n?void 0:n.isTextFillerNode())&&t.firstChild.isInlineFillerNode()||t.prependChild(e.createTextFillerNode()))}(e,n),function(e,t){t.childCount||t.prependChild(e.createTextFillerNode())}(e,n)):n.hasCategory(qe.InlineCard)?(bt(n.isConnected,"framework/engine/src/view/view-tree/filler-manager/helper/fill-content.ts:48"),0===n.offset&&Ab(e,n),kb(e,n)):n.isElement()&&wb(e,t,n)}))}function Ab(e,t){var n;t.previousSibling&&t.previousSibling.isTextFillerNode()||null===(n=t.parentNode)||void 0===n||n.insertBefore(e.createTextFillerNode(),t)}function kb(e,t){var n;t.nextSibling&&t.nextSibling.isTextFillerNode()||null===(n=t.parentNode)||void 0===n||n.insertAfter(e.createTextFillerNode(),t)}var _b=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_mapper",{enumerable:!0,configurable:!0,writable:!0,value:new WeakMap}),Object.defineProperty(this,"_viewDoc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._viewDoc=t}),[{key:"destroy",value:function(){this._mapper=null,this._viewDoc=null}},{key:"update",value:function(e){if(this._viewDoc){var t,n,r,o,i=this._getFillers(this._viewDoc,e);e.hasCategory([qe.Hole,qe.TableHole])?(t=this._viewDoc,r=(n=e).firstChild,o=n.lastChild,r&&!r.isInlineFillerNode()&&n.prependChild(t.createInlineFillerNode()),o&&!o.isInlineFillerNode()&&n.appendChild(t.createInlineFillerNode())):(bb(this._viewDoc,e),this._fillLine(e,i))}}},{key:"_fillLine",value:function(e,t){this._viewDoc&&(t.block||(t.block=this._viewDoc.createBlockFillerNode()),e.appendChild(t.block))}},{key:"_getFillers",value:function(e,t){var n,r,o;return(null===(n=this._mapper)||void 0===n?void 0:n.has(t))||null===(r=this._mapper)||void 0===r||r.set(t,{block:e.createBlockFillerNode()}),null===(o=this._mapper)||void 0===o?void 0:o.get(t)}}])}(),Cb=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"applyInsert",value:function(e,t){var n=t.parentNode,r=t.childNode,o=t.offset,i=Ob(e,n),a=Ob(e,r);return Nb(i,a,o),a}},{key:"applyUpdateText",value:function(e,t){var n=t.node,r=t.text;Ob(e,n).setData(r)}},{key:"applyRemove",value:function(e,t){var n=t.parentNode,r=t.childNode,o=Ob(e,n),i=Ob(e,r);return bt(!i.isFillerNode(),"framework/engine/src/view/view-tree/tree-helper.ts:38"),bt(o===i.parentNode,"framework/engine/src/view/view-tree/tree-helper.ts:39"),o.removeChild(i),i}},{key:"applyMove",value:function(e,t){var n=t.offset,r=t.parentNode,o=t.childNode;Nb(Ob(e,r),Ob(e,o),n)}},{key:"applyAddAttr",value:function(e,t){var n=t.node,r=t.attrName,o=t.attrValue;Ob(e,n).setAttribute(r,o)}},{key:"applyUpdateAttr",value:function(e,t){var n=t.node,r=t.attrName,o=t.attrValue;Ob(e,n).setAttribute(r,o)}},{key:"applyRemoveAttr",value:function(e,t){var n=t.node,r=t.attrName;Ob(e,n).removeAttribute(r)}}])}();function Nb(e,t,n){for(var r=t.parentNode,o=e.children,i=null,a=-1,l=0,u=o.length;l<u;l++){var c=o[l];if(!c.isInlineFillerNode()&&!c.isTextFillerNode()){if(c.isBlockFillerNode()){bt(l+1===u,"framework/engine/src/view/view-tree/tree-helper.ts:94"),i=c;break}if(++a===n){i=c;break}}}r&&r.removeChild(t),i?e.insertBefore(t,i):e.appendChild(t)}function Ob(e,t){var n=e._viewModelMapper,r=n.getViewNode(t);return r||(r=function(e,t,n){var r;if(n.isTextNode())r=t.createTextNode(n.data,n.category,Object.assign(Object.assign({},n.attrs),{id:n.id}));else if(n.isElement())r=t.createElement(n.nodeName,n.category,Object.assign(Object.assign({},n.attrs),{id:n.id}));else{bt(n.isCardNode(),"framework/engine/src/view/view-tree/tree-helper.ts:153");var o=Object.assign(Object.assign({},n.attrs),{id:n.id});r=n.hasCategory(qe.InlineCard)?t.createInlineCardNode(n.nodeName,n.category,o):t.createBlockCardNode(n.nodeName,n.category,o)}return r}(e._model,e._viewDoc,t),n.add(r,t)),r}var xb=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e),Object.defineProperty(this,"_v2m",{enumerable:!0,configurable:!0,writable:!0,value:new WeakMap}),Object.defineProperty(this,"_m2v",{enumerable:!0,configurable:!0,writable:!0,value:new WeakMap})}),[{key:"destroy",value:function(){this._v2m=null,this._m2v=null}},{key:"add",value:function(e,t){var n,r;null===(n=this._v2m)||void 0===n||n.set(e,t),null===(r=this._m2v)||void 0===r||r.set(t,e),e._modelNode=t}},{key:"remove",value:function(e){var t,n,r,o=null===(t=this._v2m)||void 0===t?void 0:t.get(e);null===(n=this._v2m)||void 0===n||n.delete(e),o&&(null===(r=this._m2v)||void 0===r||r.delete(o))}},{key:"getViewNode",value:function(e){var t;return e?null===(t=this._m2v)||void 0===t?void 0:t.get(e):null}},{key:"getModelNode",value:function(e){var t;return e?null===(t=this._v2m)||void 0===t?void 0:t.get(e):null}}])}(),Eb="x-lp",Db="x-rp";function Pb(e,t,n){return t.isFillerNode()?function(e,t){bt(t.isFillerNode(),"framework/engine/src/view/view-tree/helper/get-model-position-info.ts:132");var n=t.previousSibling,r=t.nextSibling;if(n){n.isFillerNode()&&(n=n.previousSibling);var o=e.getModelNode(n);if(o)return{node:o.parentNode,offset:o.offset+1}}if(r){r.isFillerNode()&&(r=r.nextSibling);var i=e.getModelNode(r);if(i)return{node:i.parentNode,offset:i.offset}}return{node:e.getModelNode(t.parentNode),offset:0}}(e,t):(bt(t.isElement()||t.isTextNode()||t.isCardNode(),"framework/engine/src/view/view-tree/helper/get-model-position-info.ts:17"),function(e,t,n){var r,o;if(t.nodeName===Eb||t.nodeName===Db){var i=e.getModelNode(t.parentNode);return bt((null==i?void 0:i.hasCategory(qe.Hole))&&1===i.childCount,"framework/engine/src/view/view-tree/helper/get-model-position-info.ts:34"),{node:i,offset:t.nodeName===Eb?0:1}}var a=e.getModelNode(t);if(!(null==a?void 0:a.isElement())||0===n)return{node:a,offset:n};var l=t.isElement()&&t.getChildByOffset(n);if(!l)return{node:a,offset:a.childCount};if(l.nodeName===Eb)return{node:a,offset:0};if(l.nodeName===Db)return{node:a,offset:1};if(!l.isFillerNode())return{node:a,offset:e.getModelNode(l).offset};for(var u=l.previousSibling;u;){if(!u.isFillerNode())return{node:a,offset:((null===(r=e.getModelNode(u))||void 0===r?void 0:r.offset)||0)+1};u=u.previousSibling}for(var c=l.nextSibling;c;){if(!c.isFillerNode())return{node:a,offset:(null===(o=e.getModelNode(c))||void 0===o?void 0:o.offset)||-1};c=c.nextSibling}return bt(1===t.childCount,"framework/engine/src/view/view-tree/helper/get-model-position-info.ts:118"),{node:a,offset:0}}(e,t,n))}var Rb=function(){return(0,$e.A)((function e(t,n,r,o){(0,Ke.A)(this,e),Object.defineProperty(this,"_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_parent",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_nodeName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_document",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_offset",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"_attrs",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_category",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._id=(null==o?void 0:o.id)||Dr(8),t.registerNode(this._id,this),this._document=t,this._nodeName=n,this._category=r||{},this._attrs=o||{}}),[{key:"destroy",value:function(){this._document.unregisterNode(this._id,this),this._document=null}},{key:"id",get:function(){return this._id}},{key:"document",get:function(){return this._document}},{key:"rootNode",get:function(){return this._document.rootNode}},{key:"attrs",get:function(){return Object.assign({},this._attrs)}},{key:"isConnected",get:function(){for(var e=this;e;){if(e.isRootNode())return!0;e=e.parent}return!1}},{key:"parent",get:function(){return this._parent}},{key:"parentNode",get:function(){return this._parent}},{key:"nodeName",get:function(){return this._nodeName}},{key:"nodeValue",get:function(){return null}},{key:"offset",get:function(){return this._offset}},{key:"ancestors",get:function(){for(var e=[],t=this;t=(null==t?void 0:t.parentNode)||null;)e.unshift(t);return e}},{key:"previousSibling",get:function(){if(!this._parent)return null;var e=this._parent.getChildByOffset(this._offset-1);return bt(e!==this,"framework/engine/src/view/node/view-node.ts:122"),e}},{key:"nextSibling",get:function(){if(!this._parent)return null;var e=this._parent.getChildByOffset(this._offset+1);return bt(e!==this,"framework/engine/src/view/node/view-node.ts:134"),e}},{key:"getPath",value:function(){for(var e=this,t=[e.offset];(e=e.parent)&&!e.isRootNode();)t.push(e.offset);return t.reverse()}},{key:"getSchema",value:function(){return this._document.model.schema.getNodeSchema(this._nodeName)}},{key:"isEmpty",value:function(){return!0}},{key:"hasCategory",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._category;Array.isArray(e)||(e=[e]);for(var r=0,o=e.length;r<o;r++)if(n[e[r]]){if(!t)return!0}else if(t)return!1;return!!t}},{key:"closest",value:function(e){for(var t=this;t;){if(t.hasCategory(e))return t;t=t.parentNode}return null}},{key:"getAttribute",value:function(e){var t=this._attrs[e];return void 0===t?null:t}},{key:"setAttribute",value:function(e,t){var n=lb;void 0===this._attrs[e]&&(n=ib),this._attrs[e]=t,this._document.addChange(n,{node:this,attrName:e})}},{key:"hasAttribute",value:function(e){return ir(this._attrs,e)}},{key:"removeAttribute",value:function(e){if(ir(this._attrs,e)){var t=this._attrs[e];delete this._attrs[e],this._document.addChange(ab,{node:this,attrName:e,attrValue:t})}}},{key:"isRootNode",value:function(){return!1}},{key:"isElement",value:function(){return!1}},{key:"isTextNode",value:function(){return!1}},{key:"isCardNode",value:function(){return!1}},{key:"isInlineCardNode",value:function(){return!1}},{key:"isBlockCardNode",value:function(){return!1}},{key:"isFillerNode",value:function(){return!1}},{key:"isInlineFillerNode",value:function(){return!1}},{key:"isTextFillerNode",value:function(){return!1}},{key:"isBlockFillerNode",value:function(){return!1}},{key:"remove",value:function(){this.parentNode&&this.parentNode.removeChild(this)}},{key:"compare",value:function(e){var t={equal:!1,contains:!1,containedBy:!1,preceding:!1,following:!1};if(this===e)return t.equal=!0,t;if(this.isRootNode())return t.contains=!0,t;if(e.isRootNode())return t.containedBy=!0,t;for(var n=this.getPath(),r=e.getPath(),o=n.length,i=r.length,a=0,l=Math.min(o,i);a<l;a++){var u=n[a],c=r[a];if(u<c)return t.preceding=!0,t;if(u>c)return t.following=!0,t}return bt(o!==i,"invalid compare node","framework/engine/src/view/node/view-node.ts:339"),n.length<r.length?t.contains=!0:t.containedBy=!0,t}},{key:"contains",value:function(e){return this===e||this.compare(e).contains}},{key:"print",value:function(){return{}}},{key:"toJSON",value:function(){var e={name:this._nodeName};return Object.keys(this._attrs).length&&(e.attrs=Jn(this._attrs)),e}},{key:"toString",value:function(){return"[node toString]"}}])}();function Sb(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Tb()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Tb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Tb=function(){return!!e})()}var jb=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Sb(this,t,arguments),Object.defineProperty(e,"kind",{enumerable:!0,configurable:!0,writable:!0,value:"Element"}),Object.defineProperty(e,"_children",{enumerable:!0,configurable:!0,writable:!0,value:[]}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"children",get:function(){return this._children.slice()}},{key:"childCount",get:function(){return this._children.length}},{key:"firstChild",get:function(){return this._children[0]||null}},{key:"lastChild",get:function(){return this._children[this._children.length-1]||null}},{key:"cloneNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=new t(this._document,this._nodeName,this._category,this._attrs);return e&&this._children.forEach((function(t){n.appendChild(t.cloneNode(e))})),n}},{key:"isElement",value:function(){return!0}},{key:"getChildByOffset",value:function(e){return this._children[e]||null}},{key:"isEmpty",value:function(){return 0===this._children.length}},{key:"print",value:function(){return{nodeName:this._nodeName,attrs:this.attrs,children:this._children.map((function(e){return e.print()}))}}},{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=Tr((0,Je.A)(t.prototype),"toJSON",this).call(this);return e&&(n.children=this._children.map((function(t){return t.toJSON(e)}))),n}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.nodeName,n=this.attrs,r=[];Object.keys(n).forEach((function(e){var t=n[e];"object"===(0,Gn.A)(t)?t=JSON.stringify(t):t+="",r.push("".concat(e,'="').concat(t,'"'))}));var o="";return e&&(o=this._children.map((function(t){return t.toString(e)})).join("")),"<".concat(t).concat(r.length?" "+r.join(" "):"",">").concat(o,"</").concat(t,">")}},{key:"appendChild",value:function(e){var t=e;if(t._parent===this&&t._offset+1===this.childCount)return e;var n=t._parent,r=this._children.length;return n?this._document.addChange(sb,{node:e,parent:this,oldParent:n}):this._document.addChange(ub,{node:e,parent:this,offset:r}),n&&Ib(n,t),t._offset=r,t._parent=this,this._children.push(t),e}},{key:"prependChild",value:function(e){return 0===this.childCount?this.appendChild(e):this.insertBefore(e,this._children[0])}},{key:"removeChild",value:function(e){var t=e.parentNode;return bt(t===this,"framework/engine/src/view/node/view-element.ts:159"),t&&this._document.addChange(cb,{node:e,parent:this}),Ib(this,e),e}},{key:"insertBefore",value:function(e,t){var n=e,r=t;if(bt(t.parent===this,"framework/engine/src/view/node/view-element.ts:177"),e===t)return e;var o=n.parent,i=this._children,a=i.indexOf(r);bt(-1!==a,"framework/engine/src/view/node/view-element.ts:187"),o?this._document.addChange(sb,{node:e,parent:this,oldParent:o}):this._document.addChange(ub,{node:e,parent:this,offset:a}),o&&Ib(o,n);for(var l=i.length-1;l>=a;l--)i[l]._offset++,i[l+1]=i[l];return n._offset=a,n._parent=this,i[a]=n,n}},{key:"insertAfter",value:function(e,t){bt(t.parent===this,"framework/engine/src/view/node/view-element.ts:220"),bt(e!==t,"framework/engine/src/view/node/view-element.ts:221");var n=t.nextSibling;return n?this.insertBefore(e,n):this.appendChild(e)}},{key:"insertByOffset",value:function(e,t){return t.parent===this&&t.offset===e?null:(bt(e<=this._children.length,"framework/engine/src/view/node/view-element.ts:237"),e===this._children.length?this.appendChild(t):this.insertBefore(t,this._children[e]))}}])}(Rb);function Ib(e,t){var n=e.children.indexOf(t);bt(-1!==n,"framework/engine/src/view/node/view-element.ts:250");var r=e._children;r.splice(n,1);for(var o=n,i=e._children.length;o<i;o++)r[o]._offset-=1;return t._parent=null,t._offset=-1,t}function Bb(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Mb()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Mb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Mb=function(){return!!e})()}var Fb,Lb=function(e){function t(e,n,r){var o;return(0,Ke.A)(this,t),o=Bb(this,t,[e,"#root",n,r]),Object.defineProperty(o,"_nodeName",{enumerable:!0,configurable:!0,writable:!0,value:"#root"}),o}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"nodeName",get:function(){return this._nodeName}},{key:"isRootNode",value:function(){return!0}},{key:"cloneNode",value:function(){throw new Error("can not clone rootNode")}}])}(jb),Ub=function(){return(0,$e.A)((function e(t,n,r){(0,Ke.A)(this,e),Object.defineProperty(this,"_viewDoc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_model",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_viewModelMapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fillerManager",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_defaultInputElementMapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._viewDoc=t,this._model=n,this._rootNode=new Lb(t,r.rootNode.category,r.rootNode.attrs),this._viewModelMapper=new xb,this._defaultInputElementMapper=new WeakMap,this._fillerManager=new _b(t),this._viewModelMapper.add(this._rootNode,r.rootNode)}),[{key:"destroy",value:function(){var e;this._fillerManager.destroy(),this._viewModelMapper.destroy(),(null===(e=this._defaultInputElementMapper)||void 0===e?void 0:e.deleteAll)&&this._defaultInputElementMapper.deleteAll(),delete this._defaultInputElementMapper,delete this._rootNode}},{key:"rootNode",get:function(){return this._rootNode}},{key:"getViewNode",value:function(e){return this._viewModelMapper.getViewNode(e)}},{key:"nodeIsInTree",value:function(e){var t=this._viewModelMapper.getModelNode(e);return!!t&&t.isConnected}},{key:"applyOperations",value:function(e){var t=this;e.forEach((function(e){t._applyOperation(e)}));var n=this._viewDoc.changeObserver.getChanges(),r=n.childrenChanges,o=n.addedNodes,i=new Set(r.concat(o));this._fill(i),this._fillDefaultInputElement(i),this._fillRootNodeDefaultInputElement(this._rootNode)}},{key:"fillRootNode",value:function(){0===this._rootNode.childCount&&this._addDefaultInputElement(this._rootNode)}},{key:"getModelRangeInfo",value:function(e){var t=Pb(this._viewModelMapper,e.start.node,e.start.offset);if(!t)return null;if(e.collapsed)return{start:t,end:Object.assign({},t)};var n=Pb(this._viewModelMapper,e.end.node,e.end.offset);return n?{start:t,end:n}:null}},{key:"_tryRegisterNode",value:function(e){e&&this._viewDoc.registerNode(e.id,e)}},{key:"_tryUnregisterNode",value:function(e){e&&this._viewDoc.unregisterNode(e.id,e)}},{key:"_applyOperation",value:function(e){switch(e.type){case"insert":return this._tryRegisterNode(Cb.applyInsert(this,e));case"update_text":return Cb.applyUpdateText(this,e);case"remove":return this._tryUnregisterNode(Cb.applyRemove(this,e));case"move":return Cb.applyMove(this,e);case"add_attr":return Cb.applyAddAttr(this,e);case"update_attr":return Cb.applyUpdateAttr(this,e);case"remove_attr":return Cb.applyRemoveAttr(this,e);case"object_insert":case"object_delete":case"object_replace":case"array_insert":return void bt(!1,"framework/engine/src/view/view-tree/index.ts:192");default:bt(!1,"framework/engine/src/view/view-tree/index.ts:196")}}},{key:"_fill",value:function(e){var t=this,n=this._fillerManager,r=new Set;Array.from(e).forEach((function(e){var o;if(e.isConnected){var i=e.closest(qe.Block);if(i&&r.add(i),e.hasCategory(qe.Hole)){var a=t._viewModelMapper.getModelNode(e);e.setAttribute("data-card",null===(o=null==a?void 0:a.firstChild)||void 0===o?void 0:o.nodeName),n.update(e)}else e.hasCategory(qe.TableHole)&&n.update(e)}})),Array.from(r).forEach((function(e){n.update(e)}))}},{key:"_fillDefaultInputElement",value:function(e){var t=this;e.forEach((function(e){if(e.hasCategory([qe.Root,qe.LikeRoot]))if(e.isConnected){var n=function(e){var t=e.lastChild;return t?t.isBlockFillerNode()?t.previousSibling:t:null}(e);if(n){var r=t._viewModelMapper.getModelNode(n);(null==r?void 0:r.hasCategory([qe.Table,qe.Table]))?t._addDefaultInputElement(e):t._removeDefaultInputElement(e)}else t._addDefaultInputElement(e)}else t._removeDefaultInputElement(e)}))}},{key:"_fillRootNodeDefaultInputElement",value:function(e){e.lastChild&&e.lastChild.hasCategory(qe.TextContainer)?this._removeDefaultInputElement(e):this._addDefaultInputElement(e)}},{key:"_addDefaultInputElement",value:function(e){var t;this._defaultInputElementMapper.has(e)?t=this._defaultInputElementMapper.get(e):(t=this._viewDoc.createBlockFillerNode(),this._defaultInputElementMapper.set(e,t)),e.appendChild(t)}},{key:"_removeDefaultInputElement",value:function(e){var t=this._defaultInputElementMapper.get(e);t&&t.parentNode&&(t.parentNode.removeChild(t),this._defaultInputElementMapper.delete(e))}}])}();function Vb(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Hb()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Hb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Hb=function(){return!!e})()}!function(e){e.Block="block",e.Inline="inline"}(Fb||(Fb={}));var zb=function(e){function t(){return(0,Ke.A)(this,t),Vb(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"cardType",get:function(){return Fb.Block}},{key:"cardValue",get:function(){return Object.assign({},this._attrs.value)}},{key:"isCardNode",value:function(){return!0}},{key:"isBlockCardNode",value:function(){return!0}},{key:"print",value:function(){return{nodeName:this._nodeName,attr:this.attrs}}},{key:"toString",value:function(){var e=this.nodeName,t=this.attrs,n=[];return Object.keys(t).forEach((function(e){var r=t[e];"object"===(0,Gn.A)(r)?r=JSON.stringify(r):r+="",n.push("".concat(e,'="').concat(r,'"'))})),"<".concat(e).concat(n.length?" "+n.join(" "):"","></").concat(e,">")}},{key:"cloneNode",value:function(){return new t(this.document,this.nodeName,this._category,this._attrs)}}])}(Rb);function Wb(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,qb()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function qb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qb=function(){return!!e})()}var $b=function(e){function t(e){return(0,Ke.A)(this,t),Wb(this,t,[e,"#blockFiller",{}])}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"cloneNode",value:function(){return new t(this._document)}},{key:"isFillerNode",value:function(){return!0}},{key:"isBlockFillerNode",value:function(){return!0}},{key:"print",value:function(){return{name:this._nodeName}}},{key:"toString",value:function(){return"<".concat(this._nodeName,"/>")}},{key:"toJSON",value:function(){return{id:this._id,name:this._nodeName}}}])}(Rb);function Kb(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Yb()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Yb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Yb=function(){return!!e})()}var Gb=function(e){function t(){return(0,Ke.A)(this,t),Kb(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"cardType",get:function(){return Fb.Inline}},{key:"cardValue",get:function(){return Object.assign({},this._attrs.value)}},{key:"isCardNode",value:function(){return!0}},{key:"isInlineCardNode",value:function(){return!0}},{key:"print",value:function(){return{nodeName:this._nodeName,attr:this.attrs}}},{key:"toString",value:function(){var e=this.nodeName,t=this.attrs,n=[];return Object.keys(t).forEach((function(e){var r=t[e];"object"===(0,Gn.A)(r)?r=JSON.stringify(r):r+="",n.push("".concat(e,'="').concat(r,'"'))})),"<".concat(e).concat(n.length?" "+n.join(" "):"","></").concat(e,">")}},{key:"cloneNode",value:function(e){throw new t(this.document,this.nodeName,this._category,this.attrs)}}])}(Rb);function Jb(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Xb()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Xb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Xb=function(){return!!e})()}var Qb=function(e){function t(e){return(0,Ke.A)(this,t),Jb(this,t,[e,"#inlineFiller",{}])}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"cloneNode",value:function(){return new t(this._document)}},{key:"isFillerNode",value:function(){return!0}},{key:"isInlineFillerNode",value:function(){return!0}},{key:"print",value:function(){return{name:this._nodeName}}},{key:"toString",value:function(){return"<".concat(this._nodeName,"/>")}},{key:"toJSON",value:function(){return{id:this._id,name:this._nodeName}}}])}(Rb);function Zb(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,ey()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function ey(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ey=function(){return!!e})()}var ty=function(e){function t(e){return(0,Ke.A)(this,t),Zb(this,t,[e,"#textFiller",{}])}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"cloneNode",value:function(){return new t(this._document)}},{key:"isFillerNode",value:function(){return!0}},{key:"isTextFillerNode",value:function(){return!0}},{key:"print",value:function(){return{name:this._nodeName}}},{key:"toString",value:function(){return"<".concat(this._nodeName,"/>")}},{key:"toJSON",value:function(){return{id:this._id,name:this._nodeName}}}])}(Rb);function ny(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,ry()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function ry(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ry=function(){return!!e})()}var oy=function(e){function t(e,n,r,o){var i;return(0,Ke.A)(this,t),i=ny(this,t,[e,"#text",r,o]),Object.defineProperty(i,"kind",{enumerable:!0,configurable:!0,writable:!0,value:"TextNode"}),Object.defineProperty(i,"_data",{enumerable:!0,configurable:!0,writable:!0,value:""}),i._data=n||"",i}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"data",get:function(){return this._data}},{key:"dataLength",get:function(){return gn.size(this._data)}},{key:"setData",value:function(e){this._document.addChange(db,{parent:this.parent,node:this}),this._data=e}},{key:"isEmpty",value:function(){return!this._data}},{key:"cloneNode",value:function(){return new t(this._document,this._data)}},{key:"isTextNode",value:function(){return!0}},{key:"print",value:function(){return{name:"#text",attrs:this.attrs,data:this._data}}},{key:"toString",value:function(){var e=this.attrs,t=[];return Object.keys(e).forEach((function(n){var r=e[n];r?"object"===(0,Gn.A)(r)?r=JSON.stringify(r):r+="":r="",t.push("".concat(n,'="').concat(r,'"'))})),"<#text".concat(t.length?" "+t.join(" "):"",">").concat(this._data,"</#text>")}},{key:"toJSON",value:function(){return{id:this._id,name:this._nodeName,data:this._data}}}])}(Rb);function iy(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,ay()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function ay(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ay=function(){return!!e})()}var ly=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=iy(this,t),Object.defineProperty(r,"_model",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_modelDoc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_viewTree",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_selection",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_changeObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_idNodeMap",{enumerable:!0,configurable:!0,writable:!0,value:{}}),r._model=e,r._modelDoc=n,r._changeObserver=new vb,r._viewTree=new Ub(r,e,n),r._selection=new nb(r._viewTree),r._init(),r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"_init",value:function(){var e=this;xc(this,this._modelDoc,"contentchange",(function(t){var n,r=t.operations,o=t.selection,i=t.mode,a=e._selection.isValid()?e._selection.clone():null;try{e._viewTree.applyOperations(r),n=e._changeObserver.getChanges()}finally{e._changeObserver.clear()}e._selection.updateBy(o),e.emit("contentchange",{changes:n,selection:e._selection,prevSelection:a,mode:i})})),xc(this,this._modelDoc,"selectionchange",(function(t){e._viewTree.fillRootNode();var n=e._selection.isValid()?e._selection.clone():null;e._selection.updateBy(t.selection);var r=e._changeObserver.getChanges(),o=e._changeObserver.hasChange();e._changeObserver.clear(),o?e.emit("contentchange",{changes:r,selection:e._selection,prevSelection:n,mode:We.Auto}):e.emit("selectionchange",{selection:e._selection,prevSelection:n})}))}},{key:"destroy",value:function(){this._selection.destroy(),this._viewTree.destroy()}},{key:"model",get:function(){return this._model}},{key:"changeObserver",get:function(){return this._changeObserver}},{key:"rootNode",get:function(){return this._viewTree.rootNode}},{key:"selection",get:function(){return this._selection}},{key:"entryPoint",get:function(){return this._modelDoc.entryPoint}},{key:"registerNode",value:function(e,t){this._idNodeMap[e]=t}},{key:"unregisterNode",value:function(e,t){this._idNodeMap[e]===t&&delete this._idNodeMap[e]}},{key:"getNodesByCategory",value:function(e){for(var t,n=[],r=0,o=Object.values(this._idNodeMap);r<o.length;r++){var i=o[r];(null===(t=null==i?void 0:i.hasCategory)||void 0===t?void 0:t.call(i,e))&&n.push(i)}return n}},{key:"getNodeById",value:function(e){return this._idNodeMap[e]||null}},{key:"transformToViewRange",value:function(e){return this._selection.transformToViewRange(e)}},{key:"addChange",value:function(e,t){this._changeObserver.addChange(e,t)}},{key:"createElement",value:function(e,t,n){return new jb(this,e,t,n)}},{key:"createTextNode",value:function(e,t,n){return new oy(this,e,t,n)}},{key:"createInlineCardNode",value:function(e,t,n){return new Gb(this,e,t,n)}},{key:"createBlockCardNode",value:function(e,t,n){return new zb(this,e,t,n)}},{key:"createBlockFillerNode",value:function(){return new $b(this)}},{key:"createInlineFillerNode",value:function(){return new Qb(this)}},{key:"createTextFillerNode",value:function(){return new ty(this)}},{key:"getModelRangeInfo",value:function(e){return this._viewTree.getModelRangeInfo(e)}},{key:"nodeIsInTree",value:function(e){return this._viewTree.nodeIsInTree(e)}},{key:"on",value:function(e,n){return Tr((0,Je.A)(t.prototype),"on",this).call(this,e,n),this}},{key:"once",value:function(e,n){return Tr((0,Je.A)(t.prototype),"once",this).call(this,e,n),this}}])}(it);function uy(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,cy()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function cy(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(cy=function(){return!!e})()}var sy=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=uy(this,t),Object.defineProperty(r,"_engine",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(r,"_model",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_modelDoc",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(r,"_viewDoc",{enumerable:!0,configurable:!0,writable:!0,value:null}),r._engine=e,r._model=n.model,r._init(),r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"_init",value:function(){var e=this;this._model.on("document.create",(function(t){e._modelDoc=t,e._viewDoc=new ly(e._model,t),e.emit("document.create",e._viewDoc)})),this._model.on("document.destroy",(function(){var t;e.emit("document.destroy",e._viewDoc),null===(t=e._viewDoc)||void 0===t||t.destroy()}))}},{key:"destroy",value:function(){this._viewDoc&&this._viewDoc.destroy(),this.removeAllListeners()}},{key:"viewDocument",get:function(){return this._viewDoc}},{key:"nodeIsInTree",value:function(e){var t;return(null===(t=this._viewDoc)||void 0===t?void 0:t.nodeIsInTree(e))||!1}},{key:"getViewSelection",value:function(){return this._viewDoc?this._viewDoc.selection:null}},{key:"getModelRangeInfo",value:function(e){return this._viewDoc?this._viewDoc.getModelRangeInfo(e):null}},{key:"modelRangeToViewRange",value:function(e){return this._viewDoc.transformToViewRange(e)}},{key:"getViewNodeById",value:function(e){var t;return null===(t=this._viewDoc)||void 0===t?void 0:t.getNodeById(e)}}])}(it);function dy(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,fy()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function fy(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(fy=function(){return!!e})()}var hy={scene:null,themeManager:null,disabledPlugins:[],scrollNode:document.scrollingElement||document.body,globalOverlayNode:null,scrollableOverlayNode:null,eventEmitter:null,tileRendering:!1,cardLazyInit:!1},py=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=dy(this,t),Object.defineProperty(r,"_engine",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r._engine=e,r._option=Object.assign(Object.assign({},hy),n),r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"allowDelayChangeInTileRenderer",get:function(){return!!this._option.allowDelayChangeInTileRenderer}},{key:"disabledPlugins",get:function(){return this._option.disabledPlugins.slice()}},{key:"eventEmitter",get:function(){return this._option.eventEmitter}},{key:"currentURL",get:function(){return this._engine.kernel.option.currentURL}},{key:"uiEmitter",get:function(){return this._option.uiEmitter}},{key:"globalOverlayNode",get:function(){return this._option.globalOverlayNode}},{key:"scrollableOverlayNode",get:function(){return this._option.scrollableOverlayNode}},{key:"allowCardLazyInit",get:function(){return!!this._option.cardLazyInit}},{key:"scene",get:function(){return this._option.scene}},{key:"theme",get:function(){return this._option.theme}},{key:"themeManager",get:function(){return this._option.themeManager}},{key:"virtualRendering",get:function(){return!!this._option.virtualRendering}},{key:"getEditorWrapRect",get:function(){return this._option.getEditorWrapRect}},{key:"isTileRendering",value:function(){return!!this._option.tileRendering}},{key:"getScrollNode",value:function(){return bt(this._option.scrollNode,"framework/engine/src/engine-option.ts:106"),"function"==typeof this._option.scrollNode?this._option.scrollNode():this._option.scrollNode}}])}(it);function vy(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,my()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function my(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(my=function(){return!!e})()}var gy=function(e){function t(e,n,r){var o,i;return(0,Ke.A)(this,t),o=vy(this,t),Object.defineProperty(o,"_view",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_engineOption",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"execCommand",{enumerable:!0,configurable:!0,writable:!0,value:function(e){for(var n,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return(n=Tr((0,Je.A)(t.prototype),"execCommand",o)).call.apply(n,[o,e].concat(i))}}),Object.defineProperty(o,"queryCommandState",{enumerable:!0,configurable:!0,writable:!0,value:function(e){for(var n,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return(n=Tr((0,Je.A)(t.prototype),"queryCommandState",o)).call.apply(n,[o,e].concat(i))}}),Object.defineProperty(o,"queryCommandEnabled",{enumerable:!0,configurable:!0,writable:!0,value:function(e){for(var n,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return(n=Tr((0,Je.A)(t.prototype),"queryCommandEnabled",o)).call.apply(n,[o,e].concat(i))}}),Object.defineProperty(o,"queryCommandValue",{enumerable:!0,configurable:!0,writable:!0,value:function(e){for(var n,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return(n=Tr((0,Je.A)(t.prototype),"queryCommandValue",o)).call.apply(n,[o,e].concat(i))}}),o._engineOption=new py(o,r),o._kernel=e.createKernel(Object.assign(Object.assign({},r),{theme:(null===(i=r.themeManager)||void 0===i?void 0:i.current)===up?up:lp,eventEmitter:r.eventEmitter||o})),o._view=new sy(o,o._kernel),o._renderer=new tb(e,o,n,o._engineOption,r),o._$commandUnderlay=o._kernel,o._init(),o}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"_init",value:function(){var e=this;this._renderer.on("focusstatuschange",(function(t){e.emit("focusstatuschange",t),e.emitEvent("focusstatuschange",t)}))}},{key:"destroy",value:function(){this.emit("beforedestroy"),Tr((0,Je.A)(t.prototype),"destroy",this).call(this),this._kernel.destroy(),this._view.destroy(),this._renderer.destroy()}},{key:"id",get:function(){return this._kernel.id}},{key:"kernel",get:function(){return this._kernel}},{key:"view",get:function(){return this._view}},{key:"renderer",get:function(){return this._renderer}},{key:"plugins",get:function(){return this._renderer.plugins}},{key:"iEngine",get:function(){return this}},{key:"iRenderer",get:function(){return this._renderer}},{key:"option",get:function(){return this._engineOption}},{key:"viewDocument",get:function(){return this.view.viewDocument}},{key:"theme",get:function(){return this._renderer.theme}},{key:"nodeIsInTree",value:function(e){return this.view.nodeIsInTree(e)}},{key:"transformDOMRange",value:function(e){var t=this.renderer.toViewRange(e);return t?this.view.getModelRangeInfo(t):null}},{key:"modelRangeToViewRange",value:function(e){return this.view.modelRangeToViewRange(e)}},{key:"viewRangeToDOMRange",value:function(e){return this.renderer.toDOMRange(e)}},{key:"createViewSelection",value:function(e){return this._view.getViewSelection().cloneByRanges(e)}},{key:"getViewSelection",value:function(){return this.view.getViewSelection()}},{key:"getViewNode",value:function(e){var t;return null===(t=this.view._viewDoc)||void 0===t?void 0:t._viewTree._viewModelMapper.getViewNode(e)}},{key:"getModelNode",value:function(e){var t;return null===(t=this.view._viewDoc)||void 0===t?void 0:t._viewTree._viewModelMapper.getModelNode(e)}},{key:"emitEvent",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(t=this._engineOption.eventEmitter||this).emit.apply(t,[e].concat(r))}},{key:"sendMessage",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=this._engineOption.eventEmitter||this).emit.apply(e,["message"].concat(n))}},{key:"onMessage",value:function(e){(this._engineOption.eventEmitter||this).on("message",e)}},{key:"setDocument",value:function(e,t,n){this._kernel.setDocument(e,t,n)}},{key:"canGetDocument",value:function(){var e=!0;return this._renderer.canGetDocument()||(e=!1),this._kernel.canGetDocument()||(e=!1),e}},{key:"getDocument",value:function(e,t){return this._kernel.getDocument(e,t)}}])}(wu);function by(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,yy()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function yy(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(yy=function(){return!!e})()}var wy=function(e){function t(){var e;return(0,Ke.A)(this,t),e=by(this,t,arguments),Object.defineProperty(e,"renderPlugins",{enumerable:!0,configurable:!0,writable:!0,value:[]}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"createEngine",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return vl(gy,[this].concat(t))}},{key:"registerRenderPlugin",value:function(e){return t.addPluginToPool(e,this.renderPlugins),this}}])}(ml);function Ay(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,ky()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function ky(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ky=function(){return!!e})()}var _y=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Ay(this,t,arguments),Object.defineProperty(e,"editorPlugins",{enumerable:!0,configurable:!0,writable:!0,value:[]}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"createEditor",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return vl(Ih,[this].concat(t))}},{key:"registerEditorPlugin",value:function(e){return t.addPluginToPool(e,this.editorPlugins),this}},{key:"registerRenderPlugin",value:function(e){return Tr((0,Je.A)(t.prototype),"registerRenderPlugin",this).call(this,e),this}},{key:"registerKernelPlugin",value:function(e){return Tr((0,Je.A)(t.prototype),"registerKernelPlugin",this).call(this,e),this}}])}(wy);function Cy(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Ny()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Ny(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ny=function(){return!!e})()}var Oy=function(e){function t(e,n,r,o){var i;return(0,Ke.A)(this,t),i=Cy(this,t),Object.defineProperty(i,"editor",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(i,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(i,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(i,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:o}),i}return(0,Xe.A)(t,e),(0,$e.A)(t)}(gu);function xy(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Ey()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Ey(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ey=function(){return!!e})()}var Dy=function(e){function t(e,n,r,o){var i;return(0,Ke.A)(this,t),i=xy(this,t),Object.defineProperty(i,"editor",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(i,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(i,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(i,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:o}),i}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Qe);function Py(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Ry()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Ry(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ry=function(){return!!e})()}var Sy=function(e){function t(e,n,r,o){var i;return(0,Ke.A)(this,t),i=Py(this,t),Object.defineProperty(i,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"viewNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"nodeName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"pluginContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),i.renderer=e,i.viewNode=n,i.nodeName=r,i.pluginContext=o,i}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getMainDOMNode",value:function(){throw bt(!1,"framework/engine/src/public/box-node.ts:37"),new Error("not implements this method")}},{key:"getContentDOMNode",value:function(){return this.getMainDOMNode()}},{key:"getBrickDOMNode",value:function(){return this.getMainDOMNode()}},{key:"repair",value:function(){}}])}(function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"init",value:function(e){}},{key:"_afterInit",value:function(){}},{key:"destroy",value:function(){}},{key:"_$destroy",value:function(){}},{key:"$appear",value:function(e){}},{key:"$disappear",value:function(){}},{key:"updateAttribute",value:function(e,t,n){}},{key:"$didUpdate",value:function(e){}},{key:"$didPositionChange",value:function(){}}])}()),Ty=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e),Object.defineProperty(this,"__hasInitUI",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_$cardUIInitArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_$cardUI",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_cardRootNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_cardData",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"uiEventCallbackPool",{enumerable:!0,configurable:!0,writable:!0,value:{}})}),[{key:"registerUIEventCallback",value:function(e,t){var n,r=null===(n=this.uiEventCallbackPool)||void 0===n?void 0:n[e];r?r.push(t):this.uiEventCallbackPool[e]=[t]}},{key:"hasInitUI",get:function(){return this.__hasInitUI}},{key:"init",value:function(){}},{key:"destroy",value:function(){}},{key:"_$destroy",value:function(){var e=this.plugin._cardNodes.indexOf(this);this.uiEventCallbackPool={},bt(e>-1,"framework/engine/src/public/_card-node-lifecycle.ts:78"),this.plugin._cardNodes.splice(e,1),this._cardData&&this._cardData.destroy()}},{key:"$didUpdate",value:function(e){}},{key:"$unCollapsed",value:function(){var e,t,n,r;this.__hasInitUI||(this.__hasInitUI=!0,null===(e=this._$cardUI)||void 0===e||e.beforeInit(),null===(t=this._$cardUI)||void 0===t||(r=t).init.apply(r,(0,ln.A)(this._$cardUIInitArgs)),null===(n=this._$cardUI)||void 0===n||n.afterInit())}},{key:"$appear",value:function(e,t){var n,r=this;null===(n=this.uiEventCallbackPool.appear)||void 0===n||n.forEach((function(n){return n.call(r._$cardUI,e,t)}))}},{key:"$disappear",value:function(){var e,t=this;null===(e=this.uiEventCallbackPool.disappear)||void 0===e||e.forEach((function(e){e.call(t._$cardUI)}))}},{key:"_$beforeFocus",value:function(){var e,t,n;null===(n=null===(t=null===(e=this._cardRootNode)||void 0===e?void 0:e.parentNode)||void 0===t?void 0:t.classList)||void 0===n||n.add("ne-focused")}},{key:"$focus",value:function(){var e,t=this;null===(e=this.uiEventCallbackPool.focus)||void 0===e||e.forEach((function(e){e.call(t._$cardUI)}))}},{key:"$blur",value:function(){var e,t=this;null===(e=this.uiEventCallbackPool.blur)||void 0===e||e.forEach((function(e){e.call(t._$cardUI)}))}},{key:"_$afterFocus",value:function(){var e,t=this;null===(e=this.uiEventCallbackPool.afterFocus)||void 0===e||e.forEach((function(e){e.call(t._$cardUI)}))}},{key:"_$click",value:function(e){var t,n=this;null===(t=this.uiEventCallbackPool.click)||void 0===t||t.forEach((function(t){t.call(n._$cardUI,e)}))}},{key:"_$mouseenter",value:function(e){var t,n=this;null===(t=this.uiEventCallbackPool.mouseenter)||void 0===t||t.forEach((function(t){t.call(n._$cardUI,e)}))}},{key:"_$mousedown",value:function(e){var t,n=this;null===(t=this.uiEventCallbackPool.mousedown)||void 0===t||t.forEach((function(t){t.call(n._$cardUI,e)}))}},{key:"_$tap",value:function(e){var t,n=this;null===(t=this.uiEventCallbackPool.tap)||void 0===t||t.forEach((function(t){t.call(n._$cardUI,e)}))}},{key:"_$hover",value:function(){var e,t=this;null===(e=this.uiEventCallbackPool.hover)||void 0===e||e.forEach((function(e){e.call(t._$cardUI)}))}},{key:"_$longPress",value:function(){var e,t=this;null===(e=this.uiEventCallbackPool.longPress)||void 0===e||e.forEach((function(e){e.call(t._$cardUI)}))}},{key:"_$leave",value:function(){var e,t=this;null===(e=this.uiEventCallbackPool.leave)||void 0===e||e.forEach((function(e){e.call(t._$cardUI)}))}},{key:"_$beforeBlur",value:function(){var e,t,n,r,o=this;null===(n=null===(t=null===(e=this._cardRootNode)||void 0===e?void 0:e.parentNode)||void 0===t?void 0:t.classList)||void 0===n||n.remove("ne-focused"),null===(r=this.uiEventCallbackPool.beforeBlur)||void 0===r||r.forEach((function(e){e.call(o._$cardUI)}))}}])}();function jy(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Iy()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Iy(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Iy=function(){return!!e})()}var By=function(e){function t(e,n,r,o,i){var a,l;(0,Ke.A)(this,t),a=jy(this,t),Object.defineProperty(a,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_viewNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"pluginContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"pluginOption",{enumerable:!0,configurable:!0,writable:!0,value:null}),a.renderer=e,a._viewNode=n,a._cardRootNode=r,a.plugin=o,a.pluginOption=o.option,a.pluginContext=i,o._cardNodes.push(a);var u=a.constructor,c=u.$CardData,s=u.$NonBoundary;return c&&(a._cardData=new c(a._viewNode.attrs.value,a.pluginOption),a._cardData.sync=function(e,t){var r,o,i;if(t){var l=t.getNodeById(n.attrs.id);return!!(l&&l.isConnected&&l.hasCategory(qe.Card))&&(l&&t.setAttribute(l,"value",null===(r=a._cardData)||void 0===r?void 0:r.getCardValue()),!0)}var u=a.renderer.execCommand("setCardValue",e,n.attrs.id,null===(o=a._cardData)||void 0===o?void 0:o.getCardValue());return null===(i=a._cardData)||void 0===i||i.afterChange(),u}),s||null===(l=r.parentNode)||void 0===l||l.setAttribute(vc,"card"),a}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"cardData",get:function(){return this._cardData}},{key:"viewNode",get:function(){return this._viewNode}},{key:"dom",get:function(){var e;return(null===(e=Cp(this._viewNode))||void 0===e?void 0:e.getMainDOMNode())||null}},{key:"nodeName",get:function(){return this._viewNode.nodeName}},{key:"isVisible",get:function(){var e;return null===(e=Cp(this._viewNode))||void 0===e?void 0:e.isAppear}},{key:"id",get:function(){return this._viewNode.attrs.id}},{key:"value",get:function(){return Object.assign({},this._viewNode.attrs.value)}},{key:"cardRootNode",get:function(){return this._cardRootNode}},{key:"isInCollapsed",get:function(){var e=_p(this._viewNode);return!!e&&Ut.isInCollapsed(e)}},{key:"$didUpdate",value:function(e){this._cardData&&this._cardData.resetCardValue(this.value,e)}},{key:"sync",value:function(){return!0}}])}(Ty);Object.defineProperty(By,"$NonBoundary",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(By,"$LAZY_INIT",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(By,"$VISIBILITY",{enumerable:!0,configurable:!0,writable:!0,value:!1});var My=function(e){function t(){return(0,Ke.A)(this,t),jy(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t)}(By),Fy=function(e){function t(){return(0,Ke.A)(this,t),jy(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t)}(By),Ly=function(){function e(){(0,Ke.A)(this,e)}return(0,$e.A)(e,null,[{key:"createElement",value:function(e){return ad(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}},{key:"createBoundaryNode",value:function(){var e=document.createElement("ne-boundary");return vp(e,"_neCustom",!0),e.innerHTML="<br>",e}},{key:"getChildren",value:function(e){var t,n,r=mp(e,"__neDangerDomTree");return null===(n=null===(t=wp(e))||void 0===t?void 0:t.children)||void 0===n?void 0:n.map((function(e){return r._nodeMapper.getNativeNode(e)}))}},{key:"syncDOMAttrChange",value:function(t,n){var r=n.updated,o=n.removed;e.setAttributeByChange(t,r),e.removeAttributeByChange(t,o)}},{key:"syncDOMAttr",value:function(e,t,n,r){mv.syncDomNodeAttr(e,t,n,r)}},{key:"setAttributeByChange",value:function(e){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).forEach((function(t){var n=t.type,r=t.name,o=t.value;n===cp?e.style[r]=o:n===dp?o(e):(bt(n===sp,"framework/engine/src/renderer/helpers/box-node-helper.ts:77"),e.setAttribute(r,o))}))}},{key:"removeAttributeByChange",value:function(e){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).forEach((function(t){var n=t.type,r=t.name;n===cp?e.style[r]="":n===dp?t.remove(e):(bt(n===sp,"framework/engine/src/renderer/helpers/box-node-helper.ts:96"),e.removeAttribute(r))}))}}])}();function Uy(e){for(;e;){if(e._neRef)return e._neRef;e=e.parentNode}return null}function Vy(e){return(null==e?void 0:e._viewNode)||null}function Hy(e){var t;return e?e._virtualNode?e._virtualNode:(null===(t=null==e?void 0:e._viewNode)||void 0===t?void 0:t._virtualNode)||null:null}function zy(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Wy()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Wy(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Wy=function(){return!!e})()}var qy=function(e){function t(e,n,r){var o;return(0,Ke.A)(this,t),o=zy(this,t),Object.defineProperty(o,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(o,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(o,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:r}),o}return(0,Xe.A)(t,e),(0,$e.A)(t)}(gu);function $y(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Ky()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Ky(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ky=function(){return!!e})()}var Yy=function(e){function t(e,n,r){var o;return(0,Ke.A)(this,t),o=$y(this,t),Object.defineProperty(o,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(o,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(o,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:r}),o}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Qe);function Gy(e){if(e.isTextNode())return 0===e.dataLength;if(e.isCardNode())return!1;if(e.isFillerNode())return!0;bt(e.isElement(),"framework/engine/src/view/view-tree/helper/is-like-empty.ts:17");var t=e;return!!t.isEmpty()||t.children.every((function(e){return Gy(e)}))}const Jy=gy;function Xy(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Xy=function(){return!!e})()}function Qy(e){var t;return t=function(e){function t(){var e;return(0,Ke.A)(this,t),e=function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Xy()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,[arguments.length<=0?void 0:arguments[0]]),Object.defineProperty(e,"kernelOption",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e.kernelOption=arguments.length<=1?void 0:arguments[1],e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(e),Object.defineProperty(t,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:e.OptionName}),t}var Zy=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e),Object.defineProperty(this,"_viewer",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}),[{key:"openLink",value:function(e,t){window.open(yh.sanitizeUrl(e),t?"_blank":"_self")}},{key:"openMentionLink",value:function(e,t){window.open(yh.sanitizeUrl(e),t?"_blank":"_self")}},{key:"previewImgs",value:function(e,t){}},{key:"longPressCard",value:function(e){}},{key:"_init",value:function(e){var t=this;this._viewer=e,this._viewer.on("visitLink",(function(e,n){t.openLink(e,n)})).on("openMentionLink",(function(e,n){t.openMentionLink(e,n)})).on("previewImgs",(function(e,n){t.previewImgs(e,n)})).on("longPressCard",(function(e){t.longPressCard(e)}))}}])}();function ew(e){return(null==e?void 0:e._viewerNode)||null}function tw(e){for(var t=e;t&&!t._neRef;)t=t.parentNode;return t?t._neRef.modelNode:null}var nw="ne-table-wrap",rw="ne-table-inner-wrap",ow="ne-table-box";function iw(e){var t;if(uw(e)||cw(e)){if(!(null===(t=ew(e.start.node))||void 0===t?void 0:t.isConnected))return null;var n=ew(e.start.node).getMainDOMNode().getBoundingClientRect();return n.isText=e.start.node.isTextNode(),[n]}if(e.collapsed)return function(e){var t,n=e.node,r=e.offset;if(!(null===(t=ew(n))||void 0===t?void 0:t.isConnected))return null;var o,i=function(e,t){for(var n=0,r=e.length;n<r;n++){var o=ew(e[n]);if(null==o?void 0:o.isConnected){var i=o.getMainDOMNode();return o.isTextNode()&&(i=i.firstChild),0===n?{node:i,offset:t}:{node:i.parentNode,offset:Ad(i)}}}bt(!1,"framework/viewer/src/viewer-renderer/drawer/get-rect-by-view-range.ts:312")}([n],r);if(sw(i.node))o=i.node.getBoundingClientRect();else if(i.node.childNodes&&sw(i.node.childNodes[i.offset]))o=i.node.childNodes[i.offset].getBoundingClientRect();else if(Sd(i.node))if(""===i.node.data){var a=i.node.previousSibling,l=i.node.nextSibling,u=i.node.parentNode;a?((o=a.getBoundingClientRect()).x=o.x+o.width,o.width=0):l?(o=l.getBoundingClientRect()).width=0:(o=u.getBoundingClientRect()).width=0}else{var c=document.createRange();c.setStart(i.node,Math.min(i.node.data.length,i.offset)),c.collapse(!0),o=c.getBoundingClientRect()}else if(Td(i.node)){var s=i.node.childNodes[i.offset-1],d=i.node.childNodes[i.offset];s?((o=s.getBoundingClientRect()).x=o.x+o.width,o.width=0):d?(o=d.getBoundingClientRect()).width=0:(o=i.node.getBoundingClientRect()).width=0}return o.isText=!1,[o]}(e.start);var r=aw(e);if(0===r.length)return[];var o=[];return r.forEach((function(e){var t,n;if(e.node.isConnected&&(!e.isText||e.startOffset!==e.endOffset)){var r=ew(e.node)?ew(e.node).getMainDOMNode():e.node;if(e.isText){var i=Tp(r.firstChild,e.startOffset,e.endOffset),a=gc(r,rw);i.forEach((function(e){e.isText=!0,e.isInline=!0,a&&(e.parentRectNode=a)})),o=o.concat(i)}else{if("image"===(null===(t=ew(e.node))||void 0===t?void 0:t.nodeName)&&!(r=r.querySelector(".ne-image-box")))return;var l=r.getBoundingClientRect();if("table"===(null===(n=ew(e.node))||void 0===n?void 0:n.nodeName)){var u=r.querySelector(ow).getBoundingClientRect(),c=u.x,s=u.y,d=u.width,f=u.height;d<l.width&&(l.x=c,l.width=d),l.y=s,l.height=f}var h=gc(r,rw);h&&(l.parentRectNode=h),l.isText=e.isText||!1,l.isInline=!!ew(e.node)&&ew(e.node).isInlineCardNode(),l.nodeName=ew(e.node)?ew(e.node).nodeName:"",o=o.concat([l])}}})),o}function aw(e){var t=[];return lw(t,e.start,e.end),t}function lw(e,t,n){var r,o,i,a,l,u,c,s="nodeName"in t,d=s?t:(null===(o=(r=t.node).isTextNode)||void 0===o?void 0:o.call(r))?t.node:t.node.children[t.offset],f=(null===(a=(i=n.node).isTextNode)||void 0===a?void 0:a.call(i))?n.node:n.offset>0?n.node.children[n.offset-1]:null,h=!(null===(u=(l=n.node).isTextNode)||void 0===u?void 0:u.call(l));if(d===f&&h)e.push({node:d});else if(d&&(dw(d)?e.push({node:d}):(null===(c=d.isTextNode)||void 0===c?void 0:c.call(d))&&e.push({isText:!0,node:d,startOffset:s?0:t.offset,endOffset:d===f?n.offset:d.dataLength}),d!==f&&f)){if(!dw(d)&&d.isElement()&&d.firstChild)return lw(e,d.firstChild,n);if(d.nextSibling)return lw(e,d.nextSibling,n);for(;d.parentNode;){if(d.parentNode.nextSibling)return lw(e,d.parentNode.nextSibling,n);d=d.parentNode}}}function uw(e){return e.start.node===e.end.node&&"td"===e.start.node.nodeName}function cw(e){var t,n;return(null===(n=(t=e.start.node).isCardNode)||void 0===n?void 0:n.call(t))&&0===e.start.offset}function sw(e){return e&&e.classList&&e.classList.contains("ne-b-filler")}function dw(e){return e.isCardNode()||"table"===e.nodeName||"tr"===e.nodeName||"td"===e.nodeName}function fw(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,hw()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function hw(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(hw=function(){return!!e})()}var pw=function(e){function t(){return(0,Ke.A)(this,t),fw(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"parseRectsCoordinate",value:function(e){var t=this;return e.map((function(e){return{parentRectNode:e.parentRectNode||null,isText:e.isText||!1,isInline:e.isInline||e.isText||!1,nodeName:e.nodeName||"",x:e.x-t.boxRect.x,y:e.y-t.boxRect.y,width:e.width,height:e.height||20}}))}},{key:"getRectByViewRange",value:function(e){return iw(e)}}])}(Sp),vw=function(){return(0,$e.A)((function e(t,n){(0,Ke.A)(this,e),Object.defineProperty(this,"_document",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_modelNode",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"_domNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_nodeName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_category",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_attrs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_parent",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_offset",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"_initialized",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this._category=n.category||{},this._attrs=n.attrs||{},this._nodeName=n.nodeName}),[{key:"document",get:function(){return this._document}},{key:"rootNode",get:function(){return this._document.rootNode}},{key:"registry",get:function(){return this._document.registry}},{key:"attrs",get:function(){return Object.assign({},this._attrs)}},{key:"modelNode",get:function(){return this._modelNode}},{key:"domNode",get:function(){return this._domNode}},{key:"isConnected",get:function(){for(var e=this;e;){if(e.isRootNode())return!0;e=e._parent}return!1}},{key:"parent",get:function(){return this._parent}},{key:"parentNode",get:function(){return this._parent}},{key:"nodeName",get:function(){return this._nodeName}},{key:"nodeValue",get:function(){return null}},{key:"offset",get:function(){return this._offset}},{key:"previousSibling",get:function(){return this._parent?this._parent.getChildByOffset(this._offset-1):null}},{key:"nextSibling",get:function(){return this._parent?this._parent.getChildByOffset(this._offset+1):null}},{key:"init",value:function(){this._initialized=!0}},{key:"destroy",value:function(){}},{key:"$afterInit",value:function(){}},{key:"_afterInit",value:function(){var e,t,n,r;this._document&&(null===(t=null===(e=this._parent)||void 0===e?void 0:e.isRootNode)||void 0===t?void 0:t.call(e))&&(null===(r=(n=this._document).emit)||void 0===r||r.call(n,"viewerNodeInited",{modelNode:this.modelNode,mainDOMNode:this.getMainDOMNode()}))}},{key:"getMainDOMNode",value:function(){return this._domNode}},{key:"getContentDOMNode",value:function(){return this._domNode}},{key:"isInitialized",value:function(){return this._initialized}},{key:"getTagAttrs",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.attrs,r=[];t&&(null===(e=this._modelNode)||void 0===e?void 0:e.id)&&(r.push('id="'.concat(this._modelNode.id,'"')),r.push('data-lake-id="'.concat(this._modelNode.id,'"'))),Object.keys(n).forEach((function(e){var t=e,o=n[e];o?"object"===(0,Gn.A)(o)?o=JSON.stringify(o):o+="":o="",r.push("".concat(t,'="').concat(o,'"'))}));var o=r.join(" ");return o.length?" "+o:o}},{key:"getPath",value:function(){for(var e=this,t=[e._offset];(e=e._parent)&&!e.isRootNode();)t.push(e._offset);return t.reverse()}},{key:"isEmpty",value:function(){return!0}},{key:"hasCategory",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._category;Array.isArray(e)||(e=[e]);for(var r=0,o=e.length;r<o;r++)if(n[e[r]]){if(!t)return!0}else if(t)return!1;return t}},{key:"closest",value:function(e){for(var t=this;t;){if(t.hasCategory(e))return t;t=t._parent}return null}},{key:"setAttribute",value:function(e,t){var n="update-attr";void 0===this._attrs[e]&&(n="add-attr"),this._attrs[e]=t,this._document.addChange(n,{node:this,attrName:e})}},{key:"hasAttribute",value:function(e){return ir(this._attrs,e)}},{key:"removeAttribute",value:function(e){if(ir(this._attrs,e)){var t=this._attrs[e];delete this._attrs[e],this._document.addChange("remove-attr",{node:this,attrName:e,attrValue:t})}}},{key:"isRootNode",value:function(){return!1}},{key:"isElement",value:function(){return!1}},{key:"isTextNode",value:function(){return!1}},{key:"isBoxNode",value:function(){return!1}},{key:"isCardNode",value:function(){return!1}},{key:"isInlineCardNode",value:function(){return!1}},{key:"isBlockCardNode",value:function(){return!1}},{key:"isFillerNode",value:function(){return!1}},{key:"isBlockFillerNode",value:function(){return!1}},{key:"remove",value:function(){this.parentNode&&this.parentNode.removeChild(this)}},{key:"toJSON",value:function(){var e={name:this._nodeName};return Object.keys(this._attrs).length&&(e.attrs=Jn(this._attrs)),e}},{key:"toString",value:function(){return"[node toString]"}},{key:"toHTML",value:function(){return""}}])}();function mw(e){if(!(e instanceof vw))throw new Error("invalid viewer node")}function gw(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,bw()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function bw(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bw=function(){return!!e})()}var yw=function(e){function t(){var e;return(0,Ke.A)(this,t),e=gw(this,t,arguments),Object.defineProperty(e,"_children",{enumerable:!0,configurable:!0,writable:!0,value:[]}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"children",get:function(){return this._children.slice()}},{key:"childCount",get:function(){return this._children.length}},{key:"firstChild",get:function(){return this._children[0]||null}},{key:"lastChild",get:function(){return this._children[this._children.length-1]||null}},{key:"isElement",value:function(){return!0}},{key:"init",value:function(){this.isInitialized()||(this._domNode=document.createElement("ne-".concat(tf(this.nodeName))),this._domNode.id=this.modelNode.id,this._domNode.dataset.lakeId=this.modelNode.id,this._domNode._neRef=this,mv.syncDOMNodeAttrs(this.registry,this._domNode,this.modelNode.attrs),Tr((0,Je.A)(t.prototype),"init",this).call(this))}},{key:"getChildByOffset",value:function(e){return this._children[e]||null}},{key:"isEmpty",value:function(){return 0===this._children.length}},{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=Tr((0,Je.A)(t.prototype),"toJSON",this).call(this);return e&&(n.children=this._children.map((function(e){return e.toJSON()}))),n}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.nodeName,n=this.getTagAttrs(),r="";return e&&(r=this._children.map((function(t){return t.toString(e)})).join("")),"<".concat(t).concat(n,">").concat(r,"</").concat(t,">")}},{key:"toHTML",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.nodeName,n="ne-".concat(t),r=this.getTagAttrs(!0),o="";return e&&(o=this._children.map((function(t){return t.toHTML(e)})).join("")),"<".concat(n).concat(r,">").concat(o,"</").concat(n,">")}},{key:"appendChild",value:function(e){if(e.parent===this&&e.offset+1===this.childCount)return e;mw(e);var t=e._parent;return t&&ww(t,e),e._offset=this._children.length,e._parent=this,this._children.push(e),e}},{key:"prependChild",value:function(e){return 0===this.childCount?this.appendChild(e):this.insertBefore(e,this._children[0])}},{key:"removeChild",value:function(e){return mw(e),ww(this,e),e}},{key:"insertBefore",value:function(e,t){if(bt(t.parent===this,"framework/viewer/src/viewer-document/node/viewer-element.ts:155"),mw(e),e===t)return e;var n=e._parent;n&&ww(n,e);for(var r=this._children,o=r.indexOf(t),i=r.length-1;i>=o;i--)r[i]._offset++,r[i+1]=r[i];return e._offset=o,e._parent=this,r[o]=e,e}},{key:"insertAfter",value:function(e,t){mw(e),bt(t.parent===this,"framework/viewer/src/viewer-document/node/viewer-element.ts:187"),bt(e!==t,"framework/viewer/src/viewer-document/node/viewer-element.ts:188");var n=t.nextSibling;return n?this.insertBefore(e,n):this.appendChild(e)}},{key:"insertByOffset",value:function(e,t){return t.parent===this&&t.offset===e?t:(bt(e<=this._children.length,"framework/viewer/src/viewer-document/node/viewer-element.ts:204"),e===this._children.length?this.appendChild(t):this.insertBefore(t,this._children[e]))}}])}(vw);function ww(e,t){mw(t);var n=e._children.indexOf(t);bt(-1!==n,"framework/viewer/src/viewer-document/node/viewer-element.ts:222");var r=e._children;r.splice(n,1);for(var o=n,i=e._children.length;o<i;o++)r[o]._offset-=1;return t._parent=null,t._offset=-1,t}function Aw(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,kw()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function kw(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(kw=function(){return!!e})()}var _w=function(e){function t(){return(0,Ke.A)(this,t),Aw(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"isRootNode",value:function(){return!0}},{key:"init",value:function(){}},{key:"toHTML",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._children.map((function(t){return t.toHTML(e)})).join("")}}])}(yw);function Cw(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Nw()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Nw(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Nw=function(){return!!e})()}var Ow=function(e){function t(e,n,r){var o;return(0,Ke.A)(this,t),o=Cw(this,t),Object.defineProperty(o,"viewer",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(o,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(o,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:r}),o}return(0,Xe.A)(t,e),(0,$e.A)(t)}(gu);function xw(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Ew()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Ew(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ew=function(){return!!e})()}var Dw=function(e){function t(e,n,r){var o;return(0,Ke.A)(this,t),o=xw(this,t),Object.defineProperty(o,"viewer",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(o,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(o,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:r}),o}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Qe);function Pw(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Rw()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Rw(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Rw=function(){return!!e})()}var Sw=function(e){function t(e,n,r){var o;return(0,Ke.A)(this,t),o=Pw(this,t),Object.defineProperty(o,"viewer",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(o,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(o,"option",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(o,"service",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(o,"_cardNodes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),o}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"cardNodes",get:function(){return this._cardNodes}},{key:"init",value:function(e,t){}},{key:"setService",value:function(e){this.service=e}},{key:"loaded",value:function(){return Promise.all(this._cardNodes.map((function(e){return e.loaded()})))}},{key:"destroy",value:function(){var e;this._cardNodes.forEach((function(e){e.destroy()})),this._cardNodes=null,this.removeAllListeners(),null===(e=this.service)||void 0===e||e.destroy(),this.service=null}}])}(it);function Tw(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,jw()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function jw(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(jw=function(){return!!e})()}var Iw=function(){return(0,$e.A)((function e(t,n,r,o,i){var a=this;(0,Ke.A)(this,e),Object.defineProperty(this,"viewer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cardRootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_domNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"viewerNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cardData",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pluginOption",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_$cardUI",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_$cardUIInitArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__hasInitUI",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isConnected",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"uiEventCallbackPool",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this.viewer=t,this.cardRootNode=n,this.plugin=r,this.pluginOption=r.option,this.modelNode=o,this.viewerNode=i,this._domNode=n,n._neRef=i,r._cardNodes.push(this);var l=this.constructor.$CardData;l&&(this.cardData=new l((o.attrs||{}).value,this.pluginOption),this.cardData.sync=function(e){var t=a.viewer.execCommand("setCardValue",e,o.id,a.cardData.getCardValue());return a.cardData.afterChange(),t})}),[{key:"registerUIEventCallback",value:function(e,t){var n,r=null===(n=this.uiEventCallbackPool)||void 0===n?void 0:n[e];r?r.push(t):this.uiEventCallbackPool[e]=[t]}},{key:"nodeName",get:function(){return this.modelNode.nodeName}},{key:"id",get:function(){return this.modelNode.id}},{key:"isInCollapsed",get:function(){return!!this.modelNode&&Ut.isInCollapsed(this.modelNode)}},{key:"init",value:function(){}},{key:"loaded",value:function(){var e=this;return new Promise((function(t){e._$cardUI||t(!0),e._$cardUI.isLoaded()?t(!0):e._$cardUI.on("loaded",(function(){t(!0)}))}))}},{key:"$unCollapsed",value:function(){var e;this.__hasInitUI||(this.__hasInitUI=!0,(e=this._$cardUI).init.apply(e,(0,ln.A)(this._$cardUIInitArgs)))}},{key:"$afterInit",value:function(){this.constructor.$NonBoundary||this.cardRootNode.setAttribute(vc,"card"),this._$cardUI&&this._$cardUI.afterInit()}},{key:"_$beforeFocus",value:function(){this.cardRootNode.classList.add("ne-focused")}},{key:"$focus",value:function(){var e,t=this;null===(e=this.uiEventCallbackPool.focus)||void 0===e||e.forEach((function(e){return e.call(t._$cardUI)}))}},{key:"_$afterFocus",value:function(){var e,t=this;null===(e=this.uiEventCallbackPool.afterFocus)||void 0===e||e.forEach((function(e){return e.call(t._$cardUI)}))}},{key:"_$beforeBlur",value:function(){var e,t=this;this.cardRootNode.classList.remove("ne-focused"),null===(e=this.uiEventCallbackPool.beforeBlur)||void 0===e||e.forEach((function(e){return e.call(t._$cardUI)}))}},{key:"$blur",value:function(){var e,t=this;null===(e=this.uiEventCallbackPool.blur)||void 0===e||e.forEach((function(e){return e.call(t._$cardUI)}))}},{key:"destroy",value:function(){var e;this.isConnected=!1,null===(e=this._$cardUI)||void 0===e||e.destroy(),this._$cardUI=null}}])}(),Bw=function(e){function t(){return(0,Ke.A)(this,t),Tw(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Iw),Mw=function(e){function t(){return(0,Ke.A)(this,t),Tw(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Iw);const Fw={"ne-ui-exit-max-view-btn":"https://gw.alipayobjects.com/zos/bmw-prod/09ca6e30-fd03-49ff-b2fb-15a2fbd8042a.svg","empty-result-img":"https://gw.alipayobjects.com/zos/bmw-prod/f7263ac4-6a8a-46f2-bd1e-14e42d60171d.svg","dark-empty-search-empty":"https://gw.alipayobjects.com/zos/bmw-prod/de13ccc4-212a-458c-922c-b228dbcc1904.svg","color-picker-preview":"https://gw.alipayobjects.com/mdn/rms_740edc/afts/img/A*G6CzS7jByMIAAAAAAAAAAABkARQnAQ","ne-card-toolbar-arrow-down-icon":"https://gw.alipayobjects.com/zos/bmw-prod/d5fce5b0-cd60-43b0-a351-9463486be4d2.svg","ne-card-audio-icon":"https://gw.alipayobjects.com/zos/bmw-prod/b9d51288-551f-447e-930f-7e1132a4a90b.svg","ne-card-audio-error-icon":"https://gw.alipayobjects.com/zos/bmw-prod/dc01c10b-e433-4bb3-bf7e-8b679725b823.svg","ne-card-bookmark-error-logo":"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*Stw6SLI_ZuAAAAAAAAAAAAAAARQnAQ","h5-ne-card-bookmark-error-logo":"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*Stw6SLI_ZuAAAAAAAAAAAAAAARQnAQ","ne-card-calendar-plus":"https://gw.alipayobjects.com/zos/bmw-prod/7ac8d36f-f041-4ee7-b1fe-d13404e9acea.svg","ne-card-calendar-icon-calendar":"https://gw.alipayobjects.com/zos/bmw-prod/524c6fbd-2711-47e5-a2f1-c03b27a7e979.svg","ne-card-calendar-icon-desc":"https://gw.alipayobjects.com/zos/bmw-prod/31781942-31fc-4d5b-97e7-97b295e9e692.svg","ne-card-calendar-schedule-panel-status-select":"https://gw.alipayobjects.com/zos/bmw-prod/16f5566a-e266-4417-b762-3bd0e1f8296a.svg","ne-toc-placeholder-ind":"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*Y9PXRrL9XM0AAAAAAAAAAAAAARQnAQ","ne-ui-toolbar-arrow-down":"https://gw.alipayobjects.com/zos/bmw-prod/d5fce5b0-cd60-43b0-a351-9463486be4d2.svg"};function Lw(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Uw()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Uw(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Uw=function(){return!!e})()}var Vw,Hw=function(e){function t(e,n){var r;(0,Ke.A)(this,t),r=Lw(this,t),Object.defineProperty(r,"_viewer",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(r,"_mountDOMNode",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(r,"_domRootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_viewerBodyNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_innerOverlayContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_overlayContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_viewerBodyWidth",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(r,"_headerNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_isMaxView",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(r,"_maxViewNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(r,"_exitMaxBeforeCallback",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(r,"_exitMaxAfterCallback",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(r,"_scrollNodeOverflow",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(r,"_lastPos",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(r,"_clear",{enumerable:!0,configurable:!0,writable:!0,value:null}),r._domRootNode=document.createElement("div"),r._domRootNode.className="ne-viewer",r._domRootNode.setAttribute("data-viewer-mode",r._viewer.option.viewerMode),r._domRootNode.setAttribute("id",Dr(5)),r._headerNode=fc('<div class="ne-viewer-header"><button type="button" class="ne-ui-exit-max-view-btn" style="background-image:url('.concat(Fw["ne-ui-exit-max-view-btn"],')">').concat(sc("返回文档"),"</button></div>")),r._viewerBodyNode=fc('<div class="ne-viewer-body"></div>'),r._overlayContainer=fc('<div class="ne-overlay-container" data-event-boundary="overlay"></div>'),r._innerOverlayContainer=fc('<div class="ne-inner-overlay-container"></div>'),r._domRootNode.appendChild(r._headerNode),r._domRootNode.appendChild(r._viewerBodyNode),r._domRootNode.appendChild(r._innerOverlayContainer),r._domRootNode._viewer=e,r._mountDOMNode.innerHTML="",r._mountDOMNode.appendChild(r._domRootNode);var o=ad("div",{style:{height:"0",overflow:"hidden"}});return o.innerHTML="​",r._mountDOMNode.appendChild(o),document.body.appendChild(r._overlayContainer),r.bindEvent(),r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"domRootNode",get:function(){return this._domRootNode}},{key:"viewerBodyNode",get:function(){return this._viewerBodyNode}},{key:"overlayContainer",get:function(){return this._overlayContainer}},{key:"innerOverlayContainer",get:function(){return this._innerOverlayContainer}},{key:"headerNode",get:function(){return this._headerNode}},{key:"isMaxView",get:function(){return this._isMaxView}},{key:"getViewerDisplayWidth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(null===this._viewerBodyWidth||e)&&(this._viewerBodyWidth=this._viewerBodyNode.offsetWidth),this._viewerBodyWidth}},{key:"destroy",value:function(){var e;this._headerNode=null,this._innerOverlayContainer=null,this._viewerBodyNode=null,this._domRootNode=null,this._scrollNodeOverflow=null,this._maxViewNode=null,this._isMaxView=!1,this._exitMaxBeforeCallback=null,this._exitMaxAfterCallback=null,this._mountDOMNode.innerHTML="",null===(e=this._overlayContainer)||void 0===e||e.remove(),this.removeAllListeners()}},{key:"bindEvent",value:function(){var e=this;pc(this,this._headerNode,"click",(function(t){t.target.closest(".ne-ui-exit-max-view-btn")&&e._viewer.exitMaxView()}))}},{key:"togglePreventScroll",value:function(e){var t=this._viewer.option.getScrollNode(),n=t;n===document.scrollingElement&&(n=document.body),n&&(null===this._scrollNodeOverflow&&(this._scrollNodeOverflow=Td(n)?n.style.overflow:null),Td(t)&&Td(n)&&(e?(this._lastPos=t.scrollTop,n.style.overflow="hidden"):(n.style.overflow=this._scrollNodeOverflow||"",t.scrollTop=this._lastPos)))}},{key:"enterMaxView",value:function(e,t,n,r){var o=this;this.togglePreventScroll(!0),this._isMaxView=!0,this._maxViewNode=e,this._exitMaxBeforeCallback=n||null,this._exitMaxAfterCallback=r||null,this._domRootNode.classList.add("ne-ui-max-view"),this._maxViewNode.classList.add("ne-ui-max-view-node","ne-max");var i=function e(n){var r;27===n.keyCode&&(o._isMaxView&&(null===(r=null==t?void 0:t.preventEscExitMaxView)||void 0===r?void 0:r.call(t))||(setTimeout((function(){o._viewer.exitMaxView()}),0),document.removeEventListener("keydown",e)))};return document.addEventListener("keydown",i),this._clear=function(){document.removeEventListener("keydown",i)},!0}},{key:"exitMaxView",value:function(){var e,t,n,r;return null===(e=this._clear)||void 0===e||e.call(this),!!this._isMaxView&&(null===(t=this._exitMaxBeforeCallback)||void 0===t||t.call(this),this._exitMaxBeforeCallback=null,this._isMaxView=!1,this._domRootNode.classList.remove("ne-ui-max-view"),null===(n=this._maxViewNode)||void 0===n||n.classList.remove("ne-ui-max-view-node","ne-max"),this.togglePreventScroll(!1),null===(r=this._exitMaxAfterCallback)||void 0===r||r.call(this),this._exitMaxAfterCallback=null,!0)}}])}(it),zw=o(2511),Ww=o.n(zw);!function(e){e.Normal="normal",e.Simple="simple",e.Present="present"}(Vw||(Vw={}));var qw=".ne-viewer",$w=".ne-viewer-body";function Kw(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Yw()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Yw(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Yw=function(){return!!e})()}var Gw=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=Kw(this,t),Object.defineProperty(n,"target",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"openLink",value:function(e,t){var n,r;null===(r=(n=this.target).openLink)||void 0===r||r.call(n,e,t)}},{key:"openMentionLink",value:function(e,t){var n,r;null===(r=(n=this.target).openMentionLink)||void 0===r||r.call(n,e,t)}},{key:"previewImgs",value:function(e,t){var n,r;null===(r=(n=this.target).previewImgs)||void 0===r||r.call(n,e,t)}},{key:"longPressCard",value:function(e){var t,n;null===(n=(t=this.target).longPressCard)||void 0===n||n.call(t,e)}}])}(Zy),Jw={currentURL:"undefined"!=typeof location?location.href:"about:blank",themeManager:null,scrollNode:document.scrollingElement||document.body,disabledPlugins:[],disableToolbar:!1,viewerMode:Vw.Normal,tileRendering:!1,header:null,boundaryTopOffset:0,isLogged:!1,loadedTimeout:1e4},Xw=function(){return(0,$e.A)((function e(t,n){(0,Ke.A)(this,e),Object.defineProperty(this,"_viewer",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Ww()({},Jw,{envAdapter:new Zy},n),!this._option.envAdapter||this._option.envAdapter instanceof Zy||(this._option.envAdapter=new Gw(this._option.envAdapter)),this._option.envAdapter||(this._option.envAdapter=new Zy)}),[{key:"themeManager",get:function(){return this._option.themeManager}},{key:"envAdapter",get:function(){return this._option.envAdapter}},{key:"disabledPlugins",get:function(){return this._option.disabledPlugins||[]}},{key:"disableToolbar",get:function(){return this._option.disableToolbar}},{key:"isTranslateMode",get:function(){return!!new URL(document.location.href).searchParams.get("translate")}},{key:"currentURL",get:function(){return this._viewer.kernel.option.currentURL}},{key:"generateCardLink",get:function(){return this._option.generateCardLink}},{key:"viewerMode",get:function(){return this._option.viewerMode}},{key:"header",get:function(){return this._option.header}},{key:"boundaryTopOffset",get:function(){return this._option.boundaryTopOffset}},{key:"isLogged",get:function(){return this._option.isLogged}},{key:"loadedTimeout",get:function(){return this._option.loadedTimeout}},{key:"get",value:function(e){return this._option[e]||null}},{key:"isTileRendering",value:function(){return!0===this._option.tileRendering}},{key:"getScrollNode",value:function(){return bt(this._option.scrollNode,"framework/viewer/src/viewer-option.ts:161"),"function"==typeof this._option.scrollNode?this._option.scrollNode():this._option.scrollNode}},{key:"getHeader",value:function(){return"function"==typeof this._option.header?this._option.header():this._option.header}}])}(),Qw=function(){return(0,$e.A)((function e(t,n,r){(0,Ke.A)(this,e),Object.defineProperty(this,"viewer",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"modelNode",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"pluginContext",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"document",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}),[{key:"init",value:function(){}},{key:"$afterInit",value:function(){}},{key:"destroy",value:function(){}},{key:"getMainDOMNode",value:function(){bt(!1,"framework/viewer/src/public/v-box-node.ts:33")}},{key:"getContentDOMNode",value:function(){return this.getMainDOMNode()}},{key:"updateAttribute",value:function(e,t){}}])}();function Zw(e,t){return t.isTextNode()?e.createTextNode(t):t.isElement()?e.registry.isBoxNode(t.nodeName)?e.createBoxNode(t):e.createElement(t):t.isCardNode()?t.hasCategory(qe.InlineCard)?e.createInlineCardNode(t):e.createBlockCardNode(t):void bt(!1,"framework/viewer/src/viewer-document/helpers/create-viewer-node.ts:31")}function eA(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,tA()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function tA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(tA=function(){return!!e})()}var nA=function(e){function t(){var e;return(0,Ke.A)(this,t),e=eA(this,t,arguments),Object.defineProperty(e,"_instance",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_focused",{enumerable:!0,configurable:!0,writable:!0,value:!1}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"cardValue",get:function(){return Object.assign({},this._attrs.value)}},{key:"cardNodeInstance",get:function(){return this._instance}},{key:"isCardNode",value:function(){return!0}},{key:"isFocused",value:function(){return this._focused}},{key:"init",value:function(){bt(!this._instance,"framework/viewer/src/viewer-document/node/viewer-card-node.ts:39"),this._newInstance(),mv.syncDOMNodeAttrs(this.registry,this.getMainDOMNode(),this.modelNode.attrs),Tr((0,Je.A)(t.prototype),"init",this).call(this)}},{key:"$afterInit",value:function(){Tr((0,Je.A)(t.prototype),"$afterInit",this).call(this),this._instance&&(this._instance.cardRootNode._neRef=this,this._instance.cardRootNode.id=this.modelNode.id,this._instance.$afterInit())}},{key:"$focus",value:function(){this._instance._$beforeFocus(),this._focused=!0,this._instance.$focus(),this._instance._$afterFocus()}},{key:"$blur",value:function(){this._instance._$beforeBlur(),this._focused=!1,this._instance.$blur()}},{key:"_newInstance",value:function(){var e=this.nodeName,t=this.modelNode,n=this.registry.getCardClass(e);bt(n,"CardClass for ".concat(e," not registered"),"framework/viewer/src/viewer-document/node/viewer-card-node.ts:75");var r=n.definition,o=n.pluginInstance;bt(r&&o,"framework/viewer/src/viewer-document/node/viewer-card-node.ts:77");var i=this._createCardRootNode(e);i.setAttribute("id",t.id),this._instance="factory"in r?r.factory(this.document.viewer,i,o,t,this):new r(this.document.viewer,i,o,t,this),this._instance.init()}},{key:"getMainDOMNode",value:function(){return bt(this._instance,"framework/viewer/src/viewer-document/node/viewer-card-node.ts:106"),this._instance.cardRootNode}},{key:"destroy",value:function(){Tr((0,Je.A)(t.prototype),"destroy",this).call(this),this._instance&&this._instance.destroy()}},{key:"print",value:function(){return{nodeName:this._nodeName,attr:this.attrs}}},{key:"toString",value:function(){var e=this.nodeName,t=this.getTagAttrs();return"<".concat(e).concat(t,"></").concat(e,">")}},{key:"toHTML",value:function(){var e=this.nodeName,t=this.getTagAttrs();return"<ne-".concat(e).concat(t,"></ne-").concat(e,">")}}])}(vw);function rA(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,oA()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function oA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(oA=function(){return!!e})()}var iA=function(e){function t(){return(0,Ke.A)(this,t),rA(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"isBlockCardNode",value:function(){return!0}},{key:"_createCardRootNode",value:function(e){return ad("ne-card",{"data-card-name":e,"data-card-type":"block"})}}])}(nA);function aA(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,lA()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function lA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(lA=function(){return!!e})()}var uA=function(e){function t(e){return(0,Ke.A)(this,t),aA(this,t,[e,{nodeName:"#blockFiller"}])}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"isFillerNode",value:function(){return!0}},{key:"isBlockFillerNode",value:function(){return!0}},{key:"init",value:function(){this._domNode=document.createElement("span"),this._domNode.classList.add("ne-viewer-b-filler"),this._domNode.setAttribute("ne-filler","block"),this._domNode._neRef=this;var e=document.createElement("br");this._domNode.appendChild(e)}}])}(vw);function cA(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,sA()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function sA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(sA=function(){return!!e})()}var dA=function(e){function t(){var e;return(0,Ke.A)(this,t),e=cA(this,t,arguments),Object.defineProperty(e,"_instance",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"isBoxNode",value:function(){return!0}},{key:"init",value:function(){bt(!this._instance,"framework/viewer/src/viewer-document/node/viewer-box-node.ts:24"),this._newInstance(),Tr((0,Je.A)(t.prototype),"init",this).call(this)}},{key:"_getBoxDefinition",value:function(){return this.registry.getBoxDefinition(this.nodeName)}},{key:"_newInstance",value:function(){var e=this.modelNode,t=this._getBoxDefinition();t?(this._instance="clazz"in t?new t.clazz(this.document.viewer,e,t.pluginContext):t.factory(this.document.viewer,e,t.pluginContext),this._instance.document=this.document,this._instance.init(),this._domNode=this._instance.getMainDOMNode()):console.warn("BoxNode Class not found",this.nodeName)}},{key:"getMainDOMNode",value:function(){return this._instance.getMainDOMNode()}},{key:"getContentDOMNode",value:function(){return this._instance.getContentDOMNode()}},{key:"$afterInit",value:function(){if(Tr((0,Je.A)(t.prototype),"$afterInit",this).call(this),this._instance){var e=this._instance.getMainDOMNode();e._neRef=this,mv.syncDOMNodeAttrs(this.registry,e,this.modelNode.attrs),this._instance.$afterInit()}}},{key:"destroy",value:function(){Tr((0,Je.A)(t.prototype),"destroy",this).call(this),this._instance&&this._instance.destroy()}},{key:"toHTML",value:function(){var e,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this._getBoxDefinition();return(null===(e=null==r?void 0:r.clazz)||void 0===e?void 0:e.toHTML)?r.clazz.toHTML(this,n):Tr((0,Je.A)(t.prototype),"toHTML",this).call(this,n)}},{key:"updateAttribute",value:function(e){var t;null===(t=this._instance)||void 0===t||t.updateAttribute(mv.translateChange(this.document.registry,this.modelNode.attrs,e),e)}}])}(yw);function fA(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,hA()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function hA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(hA=function(){return!!e})()}var pA=function(e){function t(){return(0,Ke.A)(this,t),fA(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"isInlineCardNode",value:function(){return!0}},{key:"_createCardRootNode",value:function(e){return ad("ne-card",{"data-card-name":e,"data-card-type":"inline"})}}])}(nA);function vA(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,mA()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function mA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mA=function(){return!!e})()}var gA=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=vA(this,t,[e,n]),Object.defineProperty(r,"_data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r._data=r.modelNode.data,r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"data",get:function(){return this._data}},{key:"dataLength",get:function(){return gn.size(this._data)}},{key:"isEmpty",value:function(){return!this._data}},{key:"init",value:function(){var e=this;if(!this.isInitialized()){this._domNode=document.createElement("ne-text"),this._domNode.textContent=this._data||"",this._domNode.id=this.modelNode.id,this._domNode._neRef=this,mv.syncDOMNodeAttrs(this.registry,this._domNode,this.modelNode.attrs);var n=this.modelNode.attrs,r=n.color,o=n.bgColor;if(r||o){var i={destroy:function(){}};xc(i,this._document.viewer.theme,"themeChange",(function(){r&&mv.syncDomNodeAttr(e.registry,e._domNode,"color",r),o&&mv.syncDomNodeAttr(e.registry,e._domNode,"bgColor",o)})),this._document.once("beforedestroy",(function(){i.destroy()}))}Tr((0,Je.A)(t.prototype),"init",this).call(this)}}},{key:"isTextNode",value:function(){return!0}},{key:"toString",value:function(){var e=this.getTagAttrs();return"<#text".concat(e,">").concat(this._data,"</#text>")}},{key:"toHTML",value:function(){var e=this.getTagAttrs();return"<ne-text".concat(e,">").concat(this._data,"</ne-text>")}},{key:"toJSON",value:function(){return{id:this._modelNode.id,name:this._nodeName,data:this._data}}}])}(vw);function bA(e,t){var n=e.getViewerNode(t);return n||(n=e.viewerDoc.getNodeByModelNode(t)),n}var yA=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"applyAddAttr",value:function(e,t){var n=t.node,r=t.attrName,o=t.attrValue;bA(e,n).setAttribute(r,o)}},{key:"applyUpdateAttr",value:function(e,t){var n=t.node,r=t.attrName,o=t.attrValue;bA(e,n).setAttribute(r,o)}},{key:"applyRemoveAttr",value:function(e,t){var n=t.node,r=t.attrName;bA(e,n).removeAttribute(r)}}])}(),wA=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e),Object.defineProperty(this,"_v2m",{enumerable:!0,configurable:!0,writable:!0,value:new WeakMap}),Object.defineProperty(this,"_m2v",{enumerable:!0,configurable:!0,writable:!0,value:new WeakMap})}),[{key:"add",value:function(e,t){this._v2m.set(e,t),this._m2v.set(t,e),e._modelNode=t,t._viewerNode=e}},{key:"getViewerNode",value:function(e){return this._m2v.get(e)}},{key:"getModelNode",value:function(e){return this._v2m.get(e)}}])}();function AA(e,t){t.hasCategory(qe.Block)&&t.isElement()&&t.appendChild(e.createBlockFillerNode())}function kA(e,t){var n=e.rootNode;t.children.forEach((function(t){_A(e,n,t)}))}function _A(e,t,n){var r=e.getNodeByModelNode(n);t.appendChild(r),n.isElement()&&n.children.forEach((function(t){_A(e,r,t)})),AA(e,r)}var CA=function(){return(0,$e.A)((function e(t,n,r){(0,Ke.A)(this,e),Object.defineProperty(this,"_domRootNode",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_modelDoc",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"_viewerDoc",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_modelMapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._modelMapper=new wA,this._rootNode=new _w(this._viewerDoc,this._modelDoc.rootNode),this._rootNode._domNode=this._domRootNode,this._rootNode._domNode._neRef=this._rootNode,this._modelDoc.rootNode._viewerNode=this._rootNode}),[{key:"rootNode",get:function(){return this._rootNode}},{key:"viewerDoc",get:function(){return this._viewerDoc}},{key:"applyOperations",value:function(e){var t=this;e.forEach((function(e){t._applyOperation(e)}))}},{key:"_applyOperation",value:function(e){switch(e.type){case"add_attr":return yA.applyAddAttr(this,e);case"update_attr":return yA.applyUpdateAttr(this,e);case"remove_attr":return yA.applyRemoveAttr(this,e);default:return}}},{key:"generate",value:function(){kA(this._viewerDoc,this._modelDoc.rootNode)}},{key:"connectViewerModelNode",value:function(e,t){this._modelMapper.add(e,t)}},{key:"getViewerNode",value:function(e){return this._modelMapper.getViewerNode(e)}},{key:"getModelNode",value:function(e){return this._modelMapper.getModelNode(e)}},{key:"destroy",value:function(){try{!function e(t){t.isElement()&&t.children.length&&t.children.reverse().forEach(e),t.destroy()}(this._rootNode)}catch(e){console.error("viewer 销毁异常",e)}}}])}(),NA=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e),Object.defineProperty(this,"_changed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_attrChanges",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}),[{key:"hasChange",value:function(){return this._changed}},{key:"addChange",value:function(e,t){switch(e){case"add-attr":this._parseAddAttr(t);break;case"update-attr":this._parseUpdateAttr(t);break;case"remove-attr":this._parseRemoveAttr(t)}}},{key:"_parseAddAttr",value:function(e){var t=e.node,n=e.attrName,r=this._attrChanges;bt(n,"framework/viewer/src/viewer-document/change-observer/viewer-change-observer.ts:77"),r.has(t)?r.get(t)[n]={type:"add"}:r.set(t,(0,Ha.A)({},n,{type:"add"}))}},{key:"_parseUpdateAttr",value:function(e){var t,n=e.node,r=e.attrName,o=this._attrChanges;if(bt(r,"framework/viewer/src/viewer-document/change-observer/viewer-change-observer.ts:96"),o.has(n)){if("add"===(null===(t=o.get(n)[r])||void 0===t?void 0:t.type))return;o.get(n)[r]={type:"update"}}else o.set(n,(0,Ha.A)({},r,{type:"update"}))}},{key:"_parseRemoveAttr",value:function(e){var t=e.node,n=e.attrName,r=e.attrValue,o=this._attrChanges;bt(n,"framework/viewer/src/viewer-document/change-observer/viewer-change-observer.ts:121"),o.has(t)?o.get(t)[n]={type:"remove",value:r}:o.set(t,(0,Ha.A)({},n,{type:"remove",value:r}))}},{key:"getChanges",value:function(){var e=[];return this._attrChanges.forEach((function(t,n){e.push({node:n,attrs:t})})),{attrChanges:e}}},{key:"clear",value:function(){this._changed=!1,this._attrChanges.clear()}}])}();function OA(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,xA()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function xA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xA=function(){return!!e})()}var EA=function(e){function t(e,n,r,o){var i;return(0,Ke.A)(this,t),i=OA(this,t),Object.defineProperty(i,"viewer",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(i,"_registry",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(i,"_modelDoc",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(i,"_domRootNode",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(i,"_viewerTree",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_viewerChangeObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_drawers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),i._viewerTree=new CA(o,r,i),i._viewerChangeObserver=new NA,i._modelDoc.on("contentchange",(function(e){var t,n=e.operations;try{i._viewerTree.applyOperations(n),t=i._viewerChangeObserver.getChanges()}finally{i._viewerChangeObserver.clear()}i.emit("contentchange",{changes:t})})),i._initEvent(),i}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"registry",get:function(){return this._registry}},{key:"modelDoc",get:function(){return this._modelDoc}},{key:"domRootNode",get:function(){return this._domRootNode}},{key:"rootNode",get:function(){return this._viewerTree.rootNode}},{key:"viewerTree",get:function(){return this._viewerTree}},{key:"viewerChangeObserver",get:function(){return this._viewerChangeObserver}},{key:"destroy",value:function(){this.emit("beforedestroy"),this.viewer=null,this._registry=null,this._modelDoc=null,this._domRootNode.innerHTML="",this._domRootNode=null,this._drawers.forEach((function(e){e.destroy()})),this._drawers=[],this._viewerTree.destroy(),this.removeAllListeners()}},{key:"addChange",value:function(){var e;(e=this._viewerChangeObserver).addChange.apply(e,arguments)}},{key:"getNodeByModelNode",value:function(e){var t=this._viewerTree.getViewerNode(e);return t||(t=Zw(this,e),this._viewerTree.connectViewerModelNode(t,e)),t}},{key:"createTextNode",value:function(e){return new gA(this,e)}},{key:"createElement",value:function(e){return new yw(this,e)}},{key:"createBoxNode",value:function(e){return new dA(this,e)}},{key:"createInlineCardNode",value:function(e){return new pA(this,e)}},{key:"createBlockCardNode",value:function(e){return new iA(this,e)}},{key:"createBlockFillerNode",value:function(){return new uA(this)}},{key:"createDrawer",value:function(){var e=new pw(this._domRootNode,{hPadding:0});return this._drawers.push(e),e}},{key:"_initEvent",value:function(){var e=this;this._modelDoc.once("ready",(function(){e._initDoc(),e.emit("ready")}))}},{key:"_initDoc",value:function(){this._viewerTree.generate()}}])}(it);function DA(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,PA()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function PA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(PA=function(){return!!e})()}var RA=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=DA(this,t),Object.defineProperty(n,"_viewerDoc",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){this._viewerDoc=null,this.removeAllListeners()}},{key:"applyContentChange",value:function(e){(null==e?void 0:e.attrChanges)&&e.attrChanges.forEach((function(e){var t,n=e.node,r=e.attrs;null===(t=n.updateAttribute)||void 0===t||t.call(n,r)}))}}])}(it);function SA(e){TA(e),e.isElement()&&e.children.forEach((function(e){SA(e)}))}function TA(e){var t=e.parentNode;if(t&&!t.isInitialized()&&TA(t),!e.isInitialized()&&(e.init(),t)){var n=e.getMainDOMNode();t.getContentDOMNode().appendChild(n),e.$afterInit(),e._afterInit()}}function jA(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,IA()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function IA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(IA=function(){return!!e})()}var BA=function(e){function t(){var e;return(0,Ke.A)(this,t),e=jA(this,t,arguments),Object.defineProperty(e,"_readyTimer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){var e=this;this._viewerDoc.rootNode.children.forEach((function(t,n){0===n&&e.emit("firstRender"),SA(t)})),this._readyTimer=setTimeout((function(){return e.emit("ready")}))}},{key:"destroy",value:function(){Tr((0,Je.A)(t.prototype),"destroy",this).call(this),this._readyTimer&&clearTimeout(this._readyTimer)}}])}(RA);function MA(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,FA()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function FA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(FA=function(){return!!e})()}var LA=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=MA(this,t,[e]),Object.defineProperty(n,"_total",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_tileCount",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_tileSize",{enumerable:!0,configurable:!0,writable:!0,value:30}),Object.defineProperty(n,"_currentTileIndex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(n,"_rafId",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(n,"timeIds",{enumerable:!0,configurable:!0,writable:!0,value:[]}),n._total=e.rootNode.childCount,bt(n._total>=0,"framework/viewer/src/viewer-renderer/render-controller/viewer-tile-render-controller/index.ts:19"),n._tileCount=Math.ceil(n._total/n._tileSize),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getTileRenderNodes",value:function(){var e=this._currentTileIndex*this._tileSize,t=e+this._tileSize;t>this._total&&(t=this._total),bt(t>=e,"framework/viewer/src/viewer-renderer/render-controller/viewer-tile-render-controller/index.ts:31");var n=this._viewerDoc.rootNode.children.slice(e,t);return this._currentTileIndex+=1,n}},{key:"render",value:function(){this.tileRender()}},{key:"tileRender",value:function(){var e=this;this.getTileRenderNodes().forEach((function(e){SA(e)})),this.timeIds.push(setTimeout((function(){return e.emit("firstRender")}))),this.isComplete()?this.timeIds.push(setTimeout((function(){return e.emit("ready")}))):this._rafId=requestAnimationFrame((function(){return e.tileRender()}))}},{key:"isComplete",value:function(){return this._currentTileIndex>=this._tileCount}},{key:"destroy",value:function(){Tr((0,Je.A)(t.prototype),"destroy",this).call(this),-1!==this._rafId&&cancelAnimationFrame(this._rafId),this.timeIds.forEach((function(e){return clearTimeout(e)})),this.timeIds.length=0}}])}(RA);function UA(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,VA()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function VA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(VA=function(){return!!e})()}var HA=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=UA(this,t),Object.defineProperty(r,"_viewer",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(r,"_viewerDoc",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(r,"_renderController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r._viewer.option.isTileRendering()?r._renderController=new LA(r._viewerDoc):r._renderController=new BA(r._viewerDoc),r._viewerDoc.on("contentchange",(function(e){var t=e.changes;r._viewer.viewer.emit("contentchange"),r._renderController.applyContentChange(t),r._viewer.viewer.emit("afterContentChange")})),r._renderController.on("ready",(function(){r.emit("ready")})),r._renderController.on("firstRender",(function(){r.emit("firstRender")})),r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){this._renderController.destroy(),this._renderController=null,this._viewer=null,this._viewerDoc=null}},{key:"render",value:function(){this._renderController.render()}}])}(it);function zA(e,t){for(var n=t,r=0;n&&!n._neRef;)n=n.parentNode;if(!n)return null;for(var o=n._neRef.modelNode,i=o;null!=(i=i.previousSibling);)r++;return[{start:{node:o.parentNode,offset:r},end:{node:o.parentNode,offset:r+1},collapsed:!1,commonAncestorContainer:o.parentNode}]}function WA(e,t){return[{start:{node:t,offset:0},end:{node:t,offset:1},collapsed:!1,commonAncestorContainer:t}]}function qA(e,t){var n=function(e,t){var n=t.startContainer,r=t.startOffset,o=t.endContainer,i=t.endOffset,a=t.commonAncestorContainer,l=t.collapsed;return n===e.domRootNode&&0===r&&o===e.domRootNode&&i===e.domRootNode.children.length&&(n=e.viewerBodyNode,r=0,o=e.viewerBodyNode,i=e.viewerBodyNode.children.length,a=e.viewerBodyNode,l=!1),{startContainer:n,startOffset:r,endContainer:o,endOffset:i,commonAncestorContainer:a,collapsed:l}}(e,t),r=n.startContainer,o=n.startOffset,i=n.endContainer,a=n.endOffset,l=n.commonAncestorContainer,u=n.collapsed;if(null===gc(l,$w,e.viewerBodyNode))return null;var c=$A(l,0),s=$A(r,o);if(!s)return null;if(u||c.node.isCardNode())return{start:s,end:Object.assign({},s),collapsed:!0,commonAncestorContainer:c.node};var d,f,h=$A(i,a);return h?(d={start:s,end:h,collapsed:!1,commonAncestorContainer:c.node},f=function(e){var t=e.node;if(t.hasCategory(qe.BlockCard)){var n=t.closest(qe.Hole);return{node:n.parentNode,offset:n.offset}}return bt(t.hasCategory(qe.InlineCard),"framework/viewer/src/utils/transform-dom-range-to-view-range.ts:79"),{node:t.parentNode,offset:t.offset}},d.start.node.isCardNode()&&(d.start=f(d.start)),d.end.node.isCardNode()&&(d.end=f(d.end),d.end.offset+=1),d.start.node===d.end.node&&d.start.offset===d.end.offset&&(d.collapsed=!0),d):null}function $A(e,t){var n,r=e.nodeType,o=gc(e,"ne-card");if(o)return n=o._neRef,bt(n,"framework/viewer/src/utils/transform-dom-range-to-view-range.ts:163"),{node:n.modelNode,offset:0};if(r===Node.ELEMENT_NODE){for(;e&&!e._neRef;)t=Array.from(e.parentNode.childNodes).indexOf(e),e=e.parentNode;n=e._neRef,bt(n,"framework/viewer/src/utils/transform-dom-range-to-view-range.ts:180"),n.isFillerNode()?(t=n.offset,n=n.parent):t=0===n.childCount?0:YA(e,t).offset}if(r===Node.TEXT_NODE)for(var i=e;i.parentNode;){if(i._neRef){n=i._neRef;break}t=KA(i,t),i=i.parentNode}return bt(n,"framework/viewer/src/utils/transform-dom-range-to-view-range.ts:205"),function(e){var t=e.node,n=e.offset;if(0===n||!t.isElement())return{node:t.modelNode,offset:n};for(var r=t.children,o=n;o>=1;o--)r[o-1].isFillerNode()&&n--;return bt(n<=t.modelNode.children.length,"framework/viewer/src/utils/transform-dom-range-to-view-range.ts:310"),{node:t.modelNode,offset:n}}({node:n,offset:t})}function KA(e,t){for(var n,r=e.previousSibling;r;)t+=(r.nodeType===Node.TEXT_NODE?r.length:null===(n=r.innerText)||void 0===n?void 0:n.length)||0,r=r.previousSibling;return t}function YA(e,t){for(var n=e.childNodes,r=t,o=n.length;r<o;r++){var i=n[r];if(i._neRef)return{continue:!1,offset:i._neRef.offset};if(i.nodeType===Node.ELEMENT_NODE){var a=YA(i,0);if(!a.continue)return a}}for(var l=t-1;l>=0;l--){var u=n[l];if(u._neRef)return{continue:!1,offset:u._neRef.offset+1};if(u.nodeType===Node.ELEMENT_NODE){var c=YA(u,u.childNodes.length);if(!c.continue)return c}}return{continue:!0,offset:0}}function GA(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,JA()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function JA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(JA=function(){return!!e})()}var XA=function(e){function t(e,n){var r;(0,Ke.A)(this,t),r=GA(this,t),Object.defineProperty(r,"_cardId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_cardNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_modelNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_viewer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_plugin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_pluginOption",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_cardData",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_cardRootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_containerNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_isAsyncUI",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(r,"_loaded",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(r,"_isFocused",{enumerable:!0,configurable:!0,writable:!0,value:!1});var o=n.id,i=n.cardRootNode,a=n.cardData,l=n.plugin,u=n.pluginOption;return r._viewer=e,r._cardNode=n,r._modelNode=n.modelNode,r._plugin=l,r._pluginOption=u,r._cardRootNode=i,r._cardData=a,r._cardId=o,r._containerNode=document.createElement("div"),r._containerNode.className="ne-card-container",r._cardRootNode.appendChild(r._containerNode),r._cardNode.registerUIEventCallback("afterFocus",r._afterFocus),r._cardNode.registerUIEventCallback("beforeBlur",r._beforeBlur),r._cardNode.registerUIEventCallback("blur",r.blur),r._cardNode.registerUIEventCallback("focus",r.focus),r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"id",get:function(){return this._cardId}},{key:"cardNode",get:function(){return this._cardNode}},{key:"modelNode",get:function(){return this._modelNode}},{key:"viewer",get:function(){return this._viewer}},{key:"plugin",get:function(){return this._plugin}},{key:"pluginOption",get:function(){return this._pluginOption}},{key:"cardData",get:function(){return this._cardData}},{key:"cardRootNode",get:function(){return this._cardRootNode}},{key:"containerNode",get:function(){return this._containerNode}},{key:"isAsyncUI",value:function(){return this._isAsyncUI}},{key:"isLoaded",value:function(){return this._loaded}},{key:"init",value:function(){}},{key:"loaded",value:function(){this._loaded=!0,this.emit("loaded")}},{key:"afterInit",value:function(){this.isAsyncUI()||this.loaded()}},{key:"destroy",value:function(){this._cardData&&this._cardData.destroy(),this.removeAllListeners()}},{key:"focus",value:function(){}},{key:"blur",value:function(){}},{key:"onAfterFocus",value:function(){}},{key:"onBeforeBlur",value:function(){}},{key:"_afterFocus",value:function(){this._isFocused=!0,this.onAfterFocus()}},{key:"_beforeBlur",value:function(){this._isFocused=!1,this.onBeforeBlur()}}],[{key:"extend",value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=n.reduce((function(e,t){return t(e)}),this);return o.extend=t.extend,o}}])}(it);function QA(){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return t(e)}),XA)}}var ZA=function(){function e(){(0,Ke.A)(this,e)}return(0,$e.A)(e,null,[{key:"syncDOMAttrChange",value:function(t,n){var r=n.updated,o=n.removed;e.setAttributeByChange(t,r),e.removeAttributeByChange(t,o)}},{key:"setAttributeByChange",value:function(e){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).forEach((function(t){var n=t.type,r=t.name,o=t.value;n===cp?e.style[r]=o:(bt(n===sp,"framework/viewer/src/utils/v-box-node-helper.ts:30"),e.setAttribute(r,o))}))}},{key:"removeAttributeByChange",value:function(e){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).forEach((function(t){var n=t.type,r=t.name;n===cp?e.style[r]="":(bt(n===sp,"framework/viewer/src/utils/v-box-node-helper.ts:47"),e.removeAttribute(r))}))}}])}(),ek=o(3082),tk=o(5399),nk=o.n(tk),rk=o(1915),ok=o(6001);const ik={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};var ak=o(4632);const lk=(0,Yu.createContext)({});var uk=o(5041),ck=o(8227),sk=o(9762),dk=o(3657),fk=o.n(dk);function hk(e,t){(0,ck.Ay)(e,"[@ant-design/icons] ".concat(t))}function pk(e){return"object"===(0,Gn.A)(e)&&"string"==typeof e.name&&"string"==typeof e.theme&&("object"===(0,Gn.A)(e.icon)||"function"==typeof e.icon)}function vk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){var r=e[n];return"class"===n?(t.className=r,delete t.class):(delete t[n],t[fk()(n)]=r),t}),{})}function mk(e,t,n){return n?Gu().createElement(e.tag,(0,ok.A)((0,ok.A)({key:t},vk(e.attrs)),n),(e.children||[]).map((function(n,r){return mk(n,"".concat(t,"-").concat(e.tag,"-").concat(r))}))):Gu().createElement(e.tag,(0,ok.A)({key:t},vk(e.attrs)),(e.children||[]).map((function(n,r){return mk(n,"".concat(t,"-").concat(e.tag,"-").concat(r))})))}function gk(e){return(0,uk.generate)(e)[0]}function bk(e){return e?Array.isArray(e)?e:[e]:[]}var yk={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"},wk=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\n.anticon {\n  display: inline-flex;\n  alignItems: center;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n",t=(0,Yu.useContext)(lk).csp;(0,Yu.useEffect)((function(){(0,sk.BD)(e,"@ant-design-icons",{prepend:!0,csp:t})}),[])},Ak=["icon","className","onClick","style","primaryColor","secondaryColor"],kk={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1},_k=function(e){var t=e.icon,n=e.className,r=e.onClick,o=e.style,i=e.primaryColor,a=e.secondaryColor,l=(0,ak.A)(e,Ak),u=kk;if(i&&(u={primaryColor:i,secondaryColor:a||gk(i)}),wk(),hk(pk(t),"icon should be icon definiton, but got ".concat(t)),!pk(t))return null;var c=t;return c&&"function"==typeof c.icon&&(c=(0,ok.A)((0,ok.A)({},c),{},{icon:c.icon(u.primaryColor,u.secondaryColor)})),mk(c.icon,"svg-".concat(c.name),(0,ok.A)({className:n,onClick:r,style:o,"data-icon":c.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},l))};_k.displayName="IconReact",_k.getTwoToneColors=function(){return(0,ok.A)({},kk)},_k.setTwoToneColors=function(e){var t=e.primaryColor,n=e.secondaryColor;kk.primaryColor=t,kk.secondaryColor=n||gk(t),kk.calculated=!!n};const Ck=_k;function Nk(e){var t=bk(e),n=(0,tn.A)(t,2),r=n[0],o=n[1];return Ck.setTwoToneColors({primaryColor:r,secondaryColor:o})}var Ok=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];Nk("#1890ff");var xk=Yu.forwardRef((function(e,t){var n=e.className,r=e.icon,o=e.spin,i=e.rotate,a=e.tabIndex,l=e.onClick,u=e.twoToneColor,c=(0,ak.A)(e,Ok),s=Yu.useContext(lk),d=s.prefixCls,f=void 0===d?"anticon":d,h=s.rootClassName,p=nk()(h,f,(0,Ha.A)((0,Ha.A)({},"".concat(f,"-").concat(r.name),!!r.name),"".concat(f,"-spin"),!!o||"loading"===r.name),n),v=a;void 0===v&&l&&(v=-1);var m=i?{msTransform:"rotate(".concat(i,"deg)"),transform:"rotate(".concat(i,"deg)")}:void 0,g=bk(u),b=(0,tn.A)(g,2),y=b[0],w=b[1];return Yu.createElement("span",(0,ok.A)((0,ok.A)({role:"img","aria-label":r.name},c),{},{ref:t,tabIndex:v,onClick:l,className:p}),Yu.createElement(Ck,{icon:r,primaryColor:y,secondaryColor:w,style:m}))}));xk.displayName="AntdIcon",xk.getTwoToneColor=function(){var e=Ck.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor},xk.setTwoToneColor=Nk;const Ek=xk;var Dk=function(e,t){return Yu.createElement(Ek,(0,ok.A)((0,ok.A)({},e),{},{ref:t,icon:ik}))};const Pk=Yu.forwardRef(Dk),Rk={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"};var Sk=function(e,t){return Yu.createElement(Ek,(0,ok.A)((0,ok.A)({},e),{},{ref:t,icon:Rk}))};const Tk=Yu.forwardRef(Sk),jk={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"};var Ik=function(e,t){return Yu.createElement(Ek,(0,ok.A)((0,ok.A)({},e),{},{ref:t,icon:jk}))};const Bk=Yu.forwardRef(Ik),Mk={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};var Fk=function(e,t){return Yu.createElement(Ek,(0,ok.A)((0,ok.A)({},e),{},{ref:t,icon:Mk}))};const Lk=Yu.forwardRef(Fk),Uk={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"};var Vk=function(e,t){return Yu.createElement(Ek,(0,ok.A)((0,ok.A)({},e),{},{ref:t,icon:Uk}))};const Hk=Yu.forwardRef(Vk);var zk=o(5325),Wk=o(8636);const qk={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},$k={lang:(0,ek.A)({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"}),timePickerLocale:(0,ek.A)({},qk)};var Kk="${label} is not a valid ${type}";const Yk={locale:"en",Pagination:{items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},DatePicker:$k,TimePicker:qk,Calendar:$k,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No Data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:Kk,method:Kk,array:Kk,object:Kk,number:Kk,date:Kk,boolean:Kk,integer:Kk,float:Kk,regexp:Kk,email:Kk,url:Kk,hex:Kk},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"}},Gk=Yk,Jk=(0,Yu.createContext)(void 0);var Xk=function(e){(0,Xe.A)(n,e);var t=(0,Wk.A)(n);function n(){return(0,Ke.A)(this,n),t.apply(this,arguments)}return(0,$e.A)(n,[{key:"getLocale",value:function(){var e=this.props,t=e.componentName,n=e.defaultLocale||Gk[t||"global"],r=this.context,o=t&&r?r[t]:{};return(0,ek.A)((0,ek.A)({},"function"==typeof n?n():n),o||{})}},{key:"getLocaleCode",value:function(){var e=this.context,t=e&&e.locale;return e&&e.exist&&!t?Gk.locale:t}},{key:"render",value:function(){return this.props.children(this.getLocale(),this.getLocaleCode(),this.context)}}]),n}(Yu.Component);Xk.defaultProps={componentName:"global"},Xk.contextType=Jk;const Qk=function(){var e=(0,Yu.useContext(o_).getPrefixCls)("empty-img-default");return Yu.createElement("svg",{className:e,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},Yu.createElement("g",{fill:"none",fillRule:"evenodd"},Yu.createElement("g",{transform:"translate(24 31.67)"},Yu.createElement("ellipse",{className:"".concat(e,"-ellipse"),cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),Yu.createElement("path",{className:"".concat(e,"-path-1"),d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"}),Yu.createElement("path",{className:"".concat(e,"-path-2"),d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",transform:"translate(13.56)"}),Yu.createElement("path",{className:"".concat(e,"-path-3"),d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"}),Yu.createElement("path",{className:"".concat(e,"-path-4"),d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"})),Yu.createElement("path",{className:"".concat(e,"-path-5"),d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"}),Yu.createElement("g",{className:"".concat(e,"-g"),transform:"translate(149.65 15.383)"},Yu.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),Yu.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},Zk=function(){var e=(0,Yu.useContext(o_).getPrefixCls)("empty-img-simple");return Yu.createElement("svg",{className:e,width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},Yu.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},Yu.createElement("ellipse",{className:"".concat(e,"-ellipse"),cx:"32",cy:"33",rx:"32",ry:"7"}),Yu.createElement("g",{className:"".concat(e,"-g"),fillRule:"nonzero"},Yu.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),Yu.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",className:"".concat(e,"-path")}))))};var e_=Yu.createElement(Qk,null),t_=Yu.createElement(Zk,null),n_=function(e){var t=e.className,n=e.prefixCls,r=e.image,o=void 0===r?e_:r,i=e.description,a=e.children,l=e.imageStyle,u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["className","prefixCls","image","description","children","imageStyle"]),c=Yu.useContext(o_),s=c.getPrefixCls,d=c.direction;return Yu.createElement(Xk,{componentName:"Empty"},(function(e){var r,c,f=s("empty",n),h=void 0!==i?i:e.description,p="string"==typeof h?h:"empty";return c="string"==typeof o?Yu.createElement("img",{alt:p,src:o}):o,Yu.createElement("div",(0,ek.A)({className:nk()(f,(r={},(0,Ha.A)(r,"".concat(f,"-normal"),o===t_),(0,Ha.A)(r,"".concat(f,"-rtl"),"rtl"===d),r),t)},u),Yu.createElement("div",{className:"".concat(f,"-image"),style:l},c),h&&Yu.createElement("div",{className:"".concat(f,"-description")},h),a&&Yu.createElement("div",{className:"".concat(f,"-footer")},a))}))};n_.PRESENTED_IMAGE_DEFAULT=e_,n_.PRESENTED_IMAGE_SIMPLE=t_;const r_=n_;var o_=Yu.createContext({getPrefixCls:function(e,t){return t||(e?"ant-".concat(e):"ant")},renderEmpty:function(e){return Yu.createElement(i_,null,(function(t){var n=(0,t.getPrefixCls)("empty");switch(e){case"Table":case"List":return Yu.createElement(r_,{image:r_.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return Yu.createElement(r_,{image:r_.PRESENTED_IMAGE_SIMPLE,className:"".concat(n,"-small")});default:return Yu.createElement(r_,null)}}))}}),i_=o_.Consumer,a_=o(3386),l_=o(3085);const u_=function(e,t,n){(0,ck.Ay)(e,"[antd: ".concat(t,"] ").concat(n))};var c_=(0,ek.A)({},Yk.Modal);function s_(e){c_=e?(0,ek.A)((0,ek.A)({},c_),e):(0,ek.A)({},Yk.Modal)}function d_(){return c_}var f_="internalMark",h_=function(e){(0,Xe.A)(n,e);var t=(0,Wk.A)(n);function n(e){var r;return(0,Ke.A)(this,n),r=t.call(this,e),s_(e.locale&&e.locale.Modal),u_(e._ANT_MARK__===f_,"LocaleProvider","`LocaleProvider` is deprecated. Please use `locale` with `ConfigProvider` instead: http://u.ant.design/locale"),r}return(0,$e.A)(n,[{key:"componentDidMount",value:function(){s_(this.props.locale&&this.props.locale.Modal)}},{key:"componentDidUpdate",value:function(e){var t=this.props.locale;e.locale!==t&&s_(t&&t.Modal)}},{key:"componentWillUnmount",value:function(){s_()}},{key:"render",value:function(){var e=this.props,t=e.locale,n=e.children;return Yu.createElement(Jk.Provider,{value:(0,ek.A)((0,ek.A)({},t),{exist:!0})},n)}}]),n}(Yu.Component);h_.defaultProps={locale:{}};var p_=Yu.createContext(void 0),v_=function(e){var t=e.children,n=e.size;return Yu.createElement(p_.Consumer,null,(function(e){return Yu.createElement(p_.Provider,{value:n||e},t)}))};const m_=p_,g_={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"};var b_=function(e,t){return Yu.createElement(Ek,(0,ok.A)((0,ok.A)({},e),{},{ref:t,icon:g_}))};const y_=Yu.forwardRef(b_),w_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"};var A_=function(e,t){return Yu.createElement(Ek,(0,ok.A)((0,ok.A)({},e),{},{ref:t,icon:w_}))};const k_=Yu.forwardRef(A_),__={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"};var C_=function(e,t){return Yu.createElement(Ek,(0,ok.A)((0,ok.A)({},e),{},{ref:t,icon:__}))};const N_=Yu.forwardRef(C_),O_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"};var x_=function(e,t){return Yu.createElement(Ek,(0,ok.A)((0,ok.A)({},e),{},{ref:t,icon:O_}))};const E_=Yu.forwardRef(x_),D_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"};var P_=function(e,t){return Yu.createElement(Ek,(0,ok.A)((0,ok.A)({},e),{},{ref:t,icon:D_}))};const R_=Yu.forwardRef(P_);var S_,T_,j_={},I_=4.5,B_=24,M_=24,F_="",L_="topRight",U_=!1;function V_(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B_,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:M_;switch(e){case"topLeft":t={left:0,top:n,bottom:"auto"};break;case"topRight":t={right:0,top:n,bottom:"auto"};break;case"bottomLeft":t={left:0,top:"auto",bottom:r};break;default:t={right:0,top:"auto",bottom:r}}return t}function H_(e,t){var n=e.placement,r=void 0===n?L_:n,o=e.top,i=e.bottom,a=e.getContainer,l=void 0===a?S_:a,u=e.closeIcon,c=void 0===u?T_:u,s=e.prefixCls,d=(0,J_().getPrefixCls)("notification",s||F_),f="".concat(d,"-").concat(r),h=j_[f];if(h)Promise.resolve(h).then((function(e){t({prefixCls:"".concat(d,"-notice"),instance:e})}));else{var p=Yu.createElement("span",{className:"".concat(d,"-close-x")},c||Yu.createElement(y_,{className:"".concat(d,"-close-icon")})),v=nk()("".concat(d,"-").concat(r),(0,Ha.A)({},"".concat(d,"-rtl"),!0===U_));j_[f]=new Promise((function(e){rk.default.newInstance({prefixCls:d,className:v,style:V_(r,o,i),getContainer:l,closeIcon:p},(function(n){e(n),t({prefixCls:"".concat(d,"-notice"),instance:n})}))}))}}var z_={success:k_,info:R_,error:N_,warning:E_};function W_(e,t){var n=e.duration,r=e.icon,o=e.type,i=e.description,a=e.message,l=e.btn,u=e.onClose,c=e.onClick,s=e.key,d=e.style,f=e.className,h=void 0===n?I_:n,p=null;r?p=Yu.createElement("span",{className:"".concat(t,"-icon")},e.icon):o&&(p=Yu.createElement(z_[o]||null,{className:"".concat(t,"-icon ").concat(t,"-icon-").concat(o)}));var v=!i&&p?Yu.createElement("span",{className:"".concat(t,"-message-single-line-auto-margin")}):null;return{content:Yu.createElement("div",{className:p?"".concat(t,"-with-icon"):"",role:"alert"},p,Yu.createElement("div",{className:"".concat(t,"-message")},v,a),Yu.createElement("div",{className:"".concat(t,"-description")},i),l?Yu.createElement("span",{className:"".concat(t,"-btn")},l):null),duration:h,closable:!0,onClose:u,onClick:c,key:s,style:d||{},className:nk()(f,(0,Ha.A)({},"".concat(t,"-").concat(o),!!o))}}var q_={open:function(e){H_(e,(function(t){var n=t.prefixCls;t.instance.notice(W_(e,n))}))},close:function(e){Object.keys(j_).forEach((function(t){return Promise.resolve(j_[t]).then((function(t){t.removeNotice(e)}))}))},config:function(e){var t=e.duration,n=e.placement,r=e.bottom,o=e.top,i=e.getContainer,a=e.closeIcon,l=e.prefixCls;void 0!==l&&(F_=l),void 0!==t&&(I_=t),void 0!==n?L_=n:e.rtl&&(L_="topLeft"),void 0!==r&&(M_=r),void 0!==o&&(B_=o),void 0!==i&&(S_=i),void 0!==a&&(T_=a),void 0!==e.rtl&&(U_=e.rtl)},destroy:function(){Object.keys(j_).forEach((function(e){Promise.resolve(j_[e]).then((function(e){e.destroy()})),delete j_[e]}))}};["success","info","warning","error"].forEach((function(e){q_[e]=function(t){return q_.open((0,ek.A)((0,ek.A)({},t),{type:e}))}})),q_.warn=q_.warning,q_.useNotification=function(e,t){return function(){var n,r=null,o={add:function(e,t){null==r||r.component.add(e,t)}},i=(0,zk.A)(o),a=(0,tn.A)(i,2),l=a[0],u=a[1],c=Yu.useRef({});return c.current.open=function(o){var i=o.prefixCls,a=n("notification",i);e((0,ek.A)((0,ek.A)({},o),{prefixCls:a}),(function(e){var n=e.prefixCls,i=e.instance;r=i,l(t(o,n))}))},["success","info","warning","error"].forEach((function(e){c.current[e]=function(t){return c.current.open((0,ek.A)((0,ek.A)({},t),{type:e}))}})),[c.current,Yu.createElement(i_,{key:"holder"},(function(e){return n=e.getPrefixCls,u}))]}}(H_,W_);const $_=q_;var K_,Y_=["getTargetContainer","getPopupContainer","renderEmpty","pageHeader","input","form"];function G_(){return K_||"ant"}var J_=function(){return{getPrefixCls:function(e,t){return t||(e?"".concat(G_(),"-").concat(e):G_())},getRootPrefixCls:function(e,t){return e||K_||(t&&t.includes("-")?t.replace(/^(.*)-[^-]*$/,"$1"):G_())}}},X_=function(e){var t=e.children,n=e.csp,r=e.autoInsertSpaceInButton,o=e.form,i=e.locale,a=e.componentSize,l=e.direction,u=e.space,c=e.virtual,s=e.dropdownMatchSelectWidth,d=e.legacyLocale,f=e.parentContext,h=e.iconPrefixCls,p=Yu.useCallback((function(t,n){var r=e.prefixCls;if(n)return n;var o=r||f.getPrefixCls("");return t?"".concat(o,"-").concat(t):o}),[f.getPrefixCls,e.prefixCls]),v=(0,ek.A)((0,ek.A)({},f),{csp:n,autoInsertSpaceInButton:r,locale:i||d,direction:l,space:u,virtual:c,dropdownMatchSelectWidth:s,getPrefixCls:p});Y_.forEach((function(t){var n=e[t];n&&(v[t]=n)}));var m=(0,l_.A)((function(){return v}),v,(function(e,t){var n=Object.keys(e),r=Object.keys(t);return n.length!==r.length||n.some((function(n){return e[n]!==t[n]}))})),g=Yu.useMemo((function(){return{prefixCls:h,csp:n}}),[h]),b=t,y={};return i&&i.Form&&i.Form.defaultValidateMessages&&(y=i.Form.defaultValidateMessages),o&&o.validateMessages&&(y=(0,ek.A)((0,ek.A)({},y),o.validateMessages)),Object.keys(y).length>0&&(b=Yu.createElement(a_.FormProvider,{validateMessages:y},t)),i&&(b=Yu.createElement(h_,{locale:i,_ANT_MARK__:f_},b)),h&&(b=Yu.createElement(lk.Provider,{value:g},b)),a&&(b=Yu.createElement(v_,{size:a},b)),Yu.createElement(o_.Provider,{value:m},b)},Q_=function(e){return Yu.useEffect((function(){e.direction&&(vC.config({rtl:"rtl"===e.direction}),$_.config({rtl:"rtl"===e.direction}))}),[e.direction]),Yu.createElement(Xk,null,(function(t,n,r){return Yu.createElement(i_,null,(function(t){return Yu.createElement(X_,(0,ek.A)({parentContext:t,legacyLocale:r},e))}))}))};Q_.ConfigContext=o_,Q_.SizeContext=m_,Q_.config=function(e){void 0!==e.prefixCls&&(K_=e.prefixCls)};const Z_=Q_;var eC,tC,nC,rC,oC=3,iC=1,aC="",lC="move-up",uC=!1,cC=!1;function sC(e,t){var n=e.prefixCls,r=J_(),o=r.getPrefixCls,i=r.getRootPrefixCls,a=o("message",n||aC),l=i(e.rootPrefixCls,a);if(eC)t({prefixCls:a,rootPrefixCls:l,instance:eC});else{var u={prefixCls:a,transitionName:uC?lC:"".concat(l,"-").concat(lC),style:{top:tC},getContainer:nC,maxCount:rC};rk.default.newInstance(u,(function(e){eC?t({prefixCls:a,rootPrefixCls:l,instance:eC}):(eC=e,t({prefixCls:a,rootPrefixCls:l,instance:e}))}))}}var dC={info:Hk,success:Lk,error:Bk,warning:Tk,loading:Pk};function fC(e,t){var n,r=void 0!==e.duration?e.duration:oC,o=dC[e.type],i=nk()("".concat(t,"-custom-content"),(n={},(0,Ha.A)(n,"".concat(t,"-").concat(e.type),e.type),(0,Ha.A)(n,"".concat(t,"-rtl"),!0===cC),n));return{key:e.key,duration:r,style:e.style||{},className:e.className,content:Yu.createElement("div",{className:i},e.icon||o&&Yu.createElement(o,null),Yu.createElement("span",null,e.content)),onClose:e.onClose,onClick:e.onClick}}var hC={open:function(e){var t=e.key||iC++,n=new Promise((function(n){var r=function(){return"function"==typeof e.onClose&&e.onClose(),n(!0)};sC(e,(function(n){var o=n.prefixCls;n.instance.notice(fC((0,ek.A)((0,ek.A)({},e),{key:t,onClose:r}),o))}))})),r=function(){eC&&eC.removeNotice(t)};return r.then=function(e,t){return n.then(e,t)},r.promise=n,r},config:function(e){void 0!==e.top&&(tC=e.top,eC=null),void 0!==e.duration&&(oC=e.duration),void 0!==e.prefixCls&&(aC=e.prefixCls),void 0!==e.getContainer&&(nC=e.getContainer),void 0!==e.transitionName&&(lC=e.transitionName,eC=null,uC=!0),void 0!==e.maxCount&&(rC=e.maxCount,eC=null),void 0!==e.rtl&&(cC=e.rtl)},destroy:function(e){if(eC)if(e)(0,eC.removeNotice)(e);else{(0,eC.destroy)(),eC=null}}};function pC(e,t){e[t]=function(n,r,o){return function(e){return"[object Object]"===Object.prototype.toString.call(e)&&!!e.content}(n)?e.open((0,ek.A)((0,ek.A)({},n),{type:t})):("function"==typeof r&&(o=r,r=void 0),e.open({content:n,duration:r,type:t,onClose:o}))}}["success","info","warning","error","loading"].forEach((function(e){return pC(hC,e)})),hC.warn=hC.warning,hC.useMessage=function(e,t){return function(){var n,r=null,o={add:function(e,t){null==r||r.component.add(e,t)}},i=(0,zk.A)(o),a=(0,tn.A)(i,2),l=a[0],u=a[1],c=Yu.useRef({});return c.current.open=function(o){var i=o.prefixCls,a=n("message",i),u=n(),c=o.key||iC++,s=new Promise((function(n){var i=function(){return"function"==typeof o.onClose&&o.onClose(),n(!0)};e((0,ek.A)((0,ek.A)({},o),{prefixCls:a,rootPrefixCls:u}),(function(e){var n=e.prefixCls,a=e.instance;r=a,l(t((0,ek.A)((0,ek.A)({},o),{key:c,onClose:i}),n))}))})),d=function(){r&&r.removeNotice(c)};return d.then=function(e,t){return s.then(e,t)},d.promise=s,d},["success","info","warning","error","loading"].forEach((function(e){return pC(c.current,e)})),[c.current,Yu.createElement(i_,{key:"holder"},(function(e){return n=e.getPrefixCls,u}))]}}(sC,fC);const vC=hC,mC=vC;var gC={copy:function(e,t){var n=document.createRange();n.selectNode(t.cardRootNode.parentNode),e.execCommand("copy",n)?mC.success(sc("复制成功")):mC.error(sc("复制失败"))},copyLink:function(e,t){var n=e.option,r=n.currentURL,o=n.generateCardLink;if(r){var i=null==o?void 0:o(r,t.id);i?(ls()(i,{format:"text/plain"}),mC.success(sc("复制成功"))):mC.error(sc("复制失败"))}},maximize:function(e,t,n){t.enterMaxView(n.option)},widthMode:function(e,t){var n,r;null===(n=null==t?void 0:t.cardData)||void 0===n||n.toggleWidthMode(),null===(r=null==t?void 0:t.cardData)||void 0===r||r.sync(!1)},comment:function(e,t){t.createComment()}},bC="top",yC="topLeft",wC="topRight",AC="bottom",kC="bottomLeft",_C="bottomRight",CC="left",NC="leftTop",OC="leftBottom",xC="right",EC="rightTop",DC="rightBottom";function PC(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,RC()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function RC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(RC=function(){return!!e})()}var SC=function(e){function t(){return(0,Ke.A)(this,t),PC(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){var e=this.props,n=e.type,r=e.iconfont;return n?t.shouldRenderCustom(n)?t.renderCustom(this.props):n.startsWith("iconfont-")?this._renderIconFont(n.substring(9)):t.getSvgIcon(n)?this._renderSVGSymbol():t.renderFallback(this.props):this._renderIconFont(r)}},{key:"_renderSVGSymbol",value:function(){var e=this.props,n=e.size,r=e.type,o=Uf(this.props.className,"ne-icon","ne-icon-".concat(r)),i={};n&&(i.fontSize=n+"px");var a="none",l=t.getSvgIcon(r);return l&&(a=l.default&&l.default.id||l.generateSymbol()),Gu().createElement("div",{className:o,style:i,"data-name":r},Gu().createElement("svg",{className:"ne-icon-symbol","aria-hidden":!0},Gu().createElement("use",{xlinkHref:"#".concat(a)})))}},{key:"_renderIconFont",value:function(e){var t=this.props.size,n=Uf(this.props.className,"ne-icon","ne-iconfont"),r={};return t&&(r.fontSize=t+"px"),Gu().createElement("div",{className:n,"data-name":e,style:r},Gu().createElement("span",{className:"lake-icon lake-icon-".concat(e),style:r}))}}],[{key:"getSvgIcon",value:function(e){return null}},{key:"shouldRenderCustom",value:function(e){return!1}},{key:"renderCustom",value:function(e){return null}},{key:"renderFallback",value:function(e){var t=e.size,n=e.type,r=Uf(e.className,"ne-icon","ne-icon-".concat(n)),o={};return t&&(o.fontSize=t+"px"),Gu().createElement("div",{className:r,style:o,"data-name":n},Gu().createElement("svg",{className:"ne-icon-symbol","aria-hidden":!0},Gu().createElement("use",{xlinkHref:"#none"})))}}])}(Yu.Component);function TC(e){if(!e.icon)return null;var t=e.icon;return Gu().isValidElement(t)?t:("function"==typeof t&&(t=t(e.cardData)),Gu().createElement(SC,{type:t,size:e.iconSize}))}function jC(e){if(!e.text)return null;var t=e.text;return"function"==typeof t?t(e.cardData):t}var IC=o(7211),BC=o(7114),MC=o(9451),FC=o(8217),LC=o(9438);function UC(e,t,n,r){var o=Gl().unstable_batchedUpdates?function(e){Gl().unstable_batchedUpdates(n,e)}:n;return null!=e&&e.addEventListener&&e.addEventListener(t,o,r),{remove:function(){null!=e&&e.removeEventListener&&e.removeEventListener(t,o,r)}}}var VC=o(4033);function HC(e,t,n){return n?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}const zC=function(){if("undefined"==typeof navigator||"undefined"==typeof window)return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(null==e?void 0:e.substr(0,4))};var WC,qC=o(6129);function $C(e){var t=e.prefixCls,n=e.motion,r=e.animation,o=e.transitionName;return n||(r?{motionName:"".concat(t,"-").concat(r)}:o?{motionName:o}:null)}function KC(e){var t=e.prefixCls,n=e.visible,r=e.zIndex,o=e.mask,i=e.maskMotion,a=e.maskAnimation,l=e.maskTransitionName;if(!o)return null;var u={};return(i||l||a)&&(u=(0,ok.A)({motionAppear:!0},$C({motion:i,prefixCls:t,transitionName:l,animation:a}))),Yu.createElement(qC.Ay,(0,ek.A)({},u,{visible:n,removeOnLeave:!0}),(function(e){var n=e.className;return Yu.createElement("div",{style:{zIndex:r},className:nk()("".concat(t,"-mask"),n)})}))}function YC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function GC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?YC(Object(n),!0).forEach((function(t){XC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function JC(e){return JC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},JC(e)}function XC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var QC={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function ZC(){if(void 0!==WC)return WC;WC="";var e=document.createElement("p").style;for(var t in QC)t+"Transform"in e&&(WC=t);return WC}function eN(){return ZC()?"".concat(ZC(),"TransitionProperty"):"transitionProperty"}function tN(){return ZC()?"".concat(ZC(),"Transform"):"transform"}function nN(e,t){var n=eN();n&&(e.style[n]=t,"transitionProperty"!==n&&(e.style.transitionProperty=t))}function rN(e,t){var n=tN();n&&(e.style[n]=t,"transform"!==n&&(e.style.transform=t))}var oN,iN=/matrix\((.*)\)/,aN=/matrix3d\((.*)\)/;function lN(e){var t=e.style.display;e.style.display="none",e.offsetHeight,e.style.display=t}function uN(e,t,n){var r=n;if("object"!==JC(t))return void 0!==r?("number"==typeof r&&(r="".concat(r,"px")),void(e.style[t]=r)):oN(e,t);for(var o in t)t.hasOwnProperty(o)&&uN(e,o,t[o])}function cN(e,t){var n=e["page".concat(t?"Y":"X","Offset")],r="scroll".concat(t?"Top":"Left");if("number"!=typeof n){var o=e.document;"number"!=typeof(n=o.documentElement[r])&&(n=o.body[r])}return n}function sN(e){return cN(e)}function dN(e){return cN(e,!0)}function fN(e){var t=function(e){var t,n,r,o=e.ownerDocument,i=o.body,a=o&&o.documentElement;return t=e.getBoundingClientRect(),n=Math.floor(t.left),r=Math.floor(t.top),{left:n-=a.clientLeft||i.clientLeft||0,top:r-=a.clientTop||i.clientTop||0}}(e),n=e.ownerDocument,r=n.defaultView||n.parentWindow;return t.left+=sN(r),t.top+=dN(r),t}function hN(e){return null!=e&&e==e.window}function pN(e){return hN(e)?e.document:9===e.nodeType?e:e.ownerDocument}var vN=new RegExp("^(".concat(/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,")(?!px)[a-z%]+$"),"i"),mN=/^(top|right|bottom|left)$/,gN="currentStyle",bN="runtimeStyle",yN="left";function wN(e,t){return"left"===e?t.useCssRight?"right":e:t.useCssBottom?"bottom":e}function AN(e){return"left"===e?"right":"right"===e?"left":"top"===e?"bottom":"bottom"===e?"top":void 0}function kN(e,t,n){"static"===uN(e,"position")&&(e.style.position="relative");var r=-999,o=-999,i=wN("left",n),a=wN("top",n),l=AN(i),u=AN(a);"left"!==i&&(r=999),"top"!==a&&(o=999);var c="",s=fN(e);("left"in t||"top"in t)&&(c=function(e){return e.style.transitionProperty||e.style[eN()]}(e)||"",nN(e,"none")),"left"in t&&(e.style[l]="",e.style[i]="".concat(r,"px")),"top"in t&&(e.style[u]="",e.style[a]="".concat(o,"px")),lN(e);var d=fN(e),f={};for(var h in t)if(t.hasOwnProperty(h)){var p=wN(h,n),v="left"===h?r:o,m=s[h]-d[h];f[p]=p===h?v+m:v-m}uN(e,f),lN(e),("left"in t||"top"in t)&&nN(e,c);var g={};for(var b in t)if(t.hasOwnProperty(b)){var y=wN(b,n),w=t[b]-s[b];g[y]=b===y?f[y]+w:f[y]-w}uN(e,g)}function _N(e,t){for(var n=0;n<e.length;n++)t(e[n])}function CN(e){return"border-box"===oN(e,"boxSizing")}"undefined"!=typeof window&&(oN=window.getComputedStyle?function(e,t,n){var r=n,o="",i=pN(e);return(r=r||i.defaultView.getComputedStyle(e,null))&&(o=r.getPropertyValue(t)||r[t]),o}:function(e,t){var n=e[gN]&&e[gN][t];if(vN.test(n)&&!mN.test(t)){var r=e.style,o=r[yN],i=e[bN][yN];e[bN][yN]=e[gN][yN],r[yN]="fontSize"===t?"1em":n||0,n=r.pixelLeft+"px",r[yN]=o,e[bN][yN]=i}return""===n?"auto":n});var NN=["margin","border","padding"],ON=-1,xN=2,EN=1;function DN(e,t,n){var r,o,i,a=0;for(o=0;o<t.length;o++)if(r=t[o])for(i=0;i<n.length;i++){var l;l="border"===r?"".concat(r).concat(n[i],"Width"):r+n[i],a+=parseFloat(oN(e,l))||0}return a}var PN={getParent:function(e){var t=e;do{t=11===t.nodeType&&t.host?t.host:t.parentNode}while(t&&1!==t.nodeType&&9!==t.nodeType);return t}};function RN(e,t,n){var r=n;if(hN(e))return"width"===t?PN.viewportWidth(e):PN.viewportHeight(e);if(9===e.nodeType)return"width"===t?PN.docWidth(e):PN.docHeight(e);var o="width"===t?["Left","Right"]:["Top","Bottom"],i="width"===t?Math.floor(e.getBoundingClientRect().width):Math.floor(e.getBoundingClientRect().height),a=CN(e),l=0;(null==i||i<=0)&&(i=void 0,(null==(l=oN(e,t))||Number(l)<0)&&(l=e.style[t]||0),l=Math.floor(parseFloat(l))||0),void 0===r&&(r=a?EN:ON);var u=void 0!==i||a,c=i||l;return r===ON?u?c-DN(e,["border","padding"],o):l:u?r===EN?c:c+(r===xN?-DN(e,["border"],o):DN(e,["margin"],o)):l+DN(e,NN.slice(r),o)}_N(["Width","Height"],(function(e){PN["doc".concat(e)]=function(t){var n=t.document;return Math.max(n.documentElement["scroll".concat(e)],n.body["scroll".concat(e)],PN["viewport".concat(e)](n))},PN["viewport".concat(e)]=function(t){var n="client".concat(e),r=t.document,o=r.body,i=r.documentElement[n];return"CSS1Compat"===r.compatMode&&i||o&&o[n]||i}}));var SN={position:"absolute",visibility:"hidden",display:"block"};function TN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,o=t[0];return 0!==o.offsetWidth?r=RN.apply(void 0,t):function(e,n,o){var i,a={},l=e.style;for(i in n)n.hasOwnProperty(i)&&(a[i]=l[i],l[i]=n[i]);for(i in function(){r=RN.apply(void 0,t)}.call(e),n)n.hasOwnProperty(i)&&(l[i]=a[i])}(o,SN),r}function jN(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}_N(["width","height"],(function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);PN["outer".concat(t)]=function(t,n){return t&&TN(t,e,n?0:EN)};var n="width"===e?["Left","Right"]:["Top","Bottom"];PN[e]=function(t,r){var o=r;return void 0!==o?t?(CN(t)&&(o+=DN(t,["padding","border"],n)),uN(t,e,o)):void 0:t&&TN(t,e,ON)}}));var IN={getWindow:function(e){if(e&&e.document&&e.setTimeout)return e;var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},getDocument:pN,offset:function(e,t,n){if(void 0===t)return fN(e);!function(e,t,n){if(n.ignoreShake){var r=fN(e),o=r.left.toFixed(0),i=r.top.toFixed(0),a=t.left.toFixed(0),l=t.top.toFixed(0);if(o===a&&i===l)return}n.useCssRight||n.useCssBottom?kN(e,t,n):n.useCssTransform&&tN()in document.body.style?function(e,t){var n=fN(e),r=function(e){var t=window.getComputedStyle(e,null),n=t.getPropertyValue("transform")||t.getPropertyValue(tN());if(n&&"none"!==n){var r=n.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(r[12]||r[4],0),y:parseFloat(r[13]||r[5],0)}}return{x:0,y:0}}(e),o={x:r.x,y:r.y};"left"in t&&(o.x=r.x+t.left-n.left),"top"in t&&(o.y=r.y+t.top-n.top),function(e,t){var n=window.getComputedStyle(e,null),r=n.getPropertyValue("transform")||n.getPropertyValue(tN());if(r&&"none"!==r){var o,i=r.match(iN);i?((o=(i=i[1]).split(",").map((function(e){return parseFloat(e,10)})))[4]=t.x,o[5]=t.y,rN(e,"matrix(".concat(o.join(","),")"))):((o=r.match(aN)[1].split(",").map((function(e){return parseFloat(e,10)})))[12]=t.x,o[13]=t.y,rN(e,"matrix3d(".concat(o.join(","),")")))}else rN(e,"translateX(".concat(t.x,"px) translateY(").concat(t.y,"px) translateZ(0)"))}(e,o)}(e,t):kN(e,t,n)}(e,t,n||{})},isWindow:hN,each:_N,css:uN,clone:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);if(e.overflow)for(t in e)e.hasOwnProperty(t)&&(n.overflow[t]=e.overflow[t]);return n},mix:jN,getWindowScrollLeft:function(e){return sN(e)},getWindowScrollTop:function(e){return dN(e)},merge:function(){for(var e={},t=0;t<arguments.length;t++)IN.mix(e,t<0||arguments.length<=t?void 0:arguments[t]);return e},viewportWidth:0,viewportHeight:0};jN(IN,PN);var BN=IN.getParent;function MN(e){if(IN.isWindow(e)||9===e.nodeType)return null;var t,n=IN.getDocument(e).body,r=IN.css(e,"position");if("fixed"!==r&&"absolute"!==r)return"html"===e.nodeName.toLowerCase()?null:BN(e);for(t=BN(e);t&&t!==n&&9!==t.nodeType;t=BN(t))if("static"!==(r=IN.css(t,"position")))return t;return null}var FN=IN.getParent;function LN(e,t){for(var n={left:0,right:1/0,top:0,bottom:1/0},r=MN(e),o=IN.getDocument(e),i=o.defaultView||o.parentWindow,a=o.body,l=o.documentElement;r;){if(-1!==navigator.userAgent.indexOf("MSIE")&&0===r.clientWidth||r===a||r===l||"visible"===IN.css(r,"overflow")){if(r===a||r===l)break}else{var u=IN.offset(r);u.left+=r.clientLeft,u.top+=r.clientTop,n.top=Math.max(n.top,u.top),n.right=Math.min(n.right,u.left+r.clientWidth),n.bottom=Math.min(n.bottom,u.top+r.clientHeight),n.left=Math.max(n.left,u.left)}r=MN(r)}var c=null;IN.isWindow(e)||9===e.nodeType||(c=e.style.position,"absolute"===IN.css(e,"position")&&(e.style.position="fixed"));var s=IN.getWindowScrollLeft(i),d=IN.getWindowScrollTop(i),f=IN.viewportWidth(i),h=IN.viewportHeight(i),p=l.scrollWidth,v=l.scrollHeight,m=window.getComputedStyle(a);if("hidden"===m.overflowX&&(p=i.innerWidth),"hidden"===m.overflowY&&(v=i.innerHeight),e.style&&(e.style.position=c),t||function(e){if(IN.isWindow(e)||9===e.nodeType)return!1;var t=IN.getDocument(e),n=t.body,r=null;for(r=FN(e);r&&r!==n&&r!==t;r=FN(r))if("fixed"===IN.css(r,"position"))return!0;return!1}(e))n.left=Math.max(n.left,s),n.top=Math.max(n.top,d),n.right=Math.min(n.right,s+f),n.bottom=Math.min(n.bottom,d+h);else{var g=Math.max(p,s+f);n.right=Math.min(n.right,g);var b=Math.max(v,d+h);n.bottom=Math.min(n.bottom,b)}return n.top>=0&&n.left>=0&&n.bottom>n.top&&n.right>n.left?n:null}function UN(e){var t,n,r;if(IN.isWindow(e)||9===e.nodeType){var o=IN.getWindow(e);t={left:IN.getWindowScrollLeft(o),top:IN.getWindowScrollTop(o)},n=IN.viewportWidth(o),r=IN.viewportHeight(o)}else t=IN.offset(e),n=IN.outerWidth(e),r=IN.outerHeight(e);return t.width=n,t.height=r,t}function VN(e,t){var n=t.charAt(0),r=t.charAt(1),o=e.width,i=e.height,a=e.left,l=e.top;return"c"===n?l+=i/2:"b"===n&&(l+=i),"c"===r?a+=o/2:"r"===r&&(a+=o),{left:a,top:l}}function HN(e,t,n,r,o){var i=VN(t,n[1]),a=VN(e,n[0]),l=[a.left-i.left,a.top-i.top];return{left:Math.round(e.left-l[0]+r[0]-o[0]),top:Math.round(e.top-l[1]+r[1]-o[1])}}function zN(e,t,n){return e.left<n.left||e.left+t.width>n.right}function WN(e,t,n){return e.top<n.top||e.top+t.height>n.bottom}function qN(e,t,n){var r=[];return IN.each(e,(function(e){r.push(e.replace(t,(function(e){return n[e]})))})),r}function $N(e,t){return e[t]=-e[t],e}function KN(e,t){return(/%$/.test(e)?parseInt(e.substring(0,e.length-1),10)/100*t:parseInt(e,10))||0}function YN(e,t){e[0]=KN(e[0],t.width),e[1]=KN(e[1],t.height)}function GN(e,t,n,r){var o=n.points,i=n.offset||[0,0],a=n.targetOffset||[0,0],l=n.overflow,u=n.source||e;i=[].concat(i),a=[].concat(a);var c={},s=0,d=LN(u,!(!(l=l||{})||!l.alwaysByViewport)),f=UN(u);YN(i,f),YN(a,t);var h=HN(f,t,o,i,a),p=IN.merge(f,h);if(d&&(l.adjustX||l.adjustY)&&r){if(l.adjustX&&zN(h,f,d)){var v=qN(o,/[lr]/gi,{l:"r",r:"l"}),m=$N(i,0),g=$N(a,0);(function(e,t,n){return e.left>n.right||e.left+t.width<n.left})(HN(f,t,v,m,g),f,d)||(s=1,o=v,i=m,a=g)}if(l.adjustY&&WN(h,f,d)){var b=qN(o,/[tb]/gi,{t:"b",b:"t"}),y=$N(i,1),w=$N(a,1);(function(e,t,n){return e.top>n.bottom||e.top+t.height<n.top})(HN(f,t,b,y,w),f,d)||(s=1,o=b,i=y,a=w)}s&&(h=HN(f,t,o,i,a),IN.mix(p,h));var A=zN(h,f,d),k=WN(h,f,d);if(A||k){var _=o;A&&(_=qN(o,/[lr]/gi,{l:"r",r:"l"})),k&&(_=qN(o,/[tb]/gi,{t:"b",b:"t"})),o=_,i=n.offset||[0,0],a=n.targetOffset||[0,0]}c.adjustX=l.adjustX&&A,c.adjustY=l.adjustY&&k,(c.adjustX||c.adjustY)&&(p=function(e,t,n,r){var o=IN.clone(e),i={width:t.width,height:t.height};return r.adjustX&&o.left<n.left&&(o.left=n.left),r.resizeWidth&&o.left>=n.left&&o.left+i.width>n.right&&(i.width-=o.left+i.width-n.right),r.adjustX&&o.left+i.width>n.right&&(o.left=Math.max(n.right-i.width,n.left)),r.adjustY&&o.top<n.top&&(o.top=n.top),r.resizeHeight&&o.top>=n.top&&o.top+i.height>n.bottom&&(i.height-=o.top+i.height-n.bottom),r.adjustY&&o.top+i.height>n.bottom&&(o.top=Math.max(n.bottom-i.height,n.top)),IN.mix(o,i)}(h,f,d,c))}return p.width!==f.width&&IN.css(u,"width",IN.width(u)+p.width-f.width),p.height!==f.height&&IN.css(u,"height",IN.height(u)+p.height-f.height),IN.offset(u,{left:p.left,top:p.top},{useCssRight:n.useCssRight,useCssBottom:n.useCssBottom,useCssTransform:n.useCssTransform,ignoreShake:n.ignoreShake}),{points:o,offset:i,targetOffset:a,overflow:c}}function JN(e,t,n){var r=n.target||t,o=UN(r),i=!function(e,t){var n=LN(e,t),r=UN(e);return!n||r.left+r.width<=n.left||r.top+r.height<=n.top||r.left>=n.right||r.top>=n.bottom}(r,n.overflow&&n.overflow.alwaysByViewport);return GN(e,o,n,i)}JN.__getOffsetParent=MN,JN.__getVisibleRectForElement=LN;const XN=function(e){if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox(),n=t.width,r=t.height;if(n||r)return!0}if(e.getBoundingClientRect){var o=e.getBoundingClientRect(),i=o.width,a=o.height;if(i||a)return!0}}return!1};var QN=o(2968),ZN=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var o=r[n];e.call(t,o[1],o[0])}},t}()}(),eO="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,tO=void 0!==o.g&&o.g.Math===Math?o.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),nO="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(tO):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)},rO=["top","right","bottom","left","width","height","size","weight"],oO="undefined"!=typeof MutationObserver,iO=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,o=0;function i(){n&&(n=!1,e()),r&&l()}function a(){nO(i)}function l(){var e=Date.now();if(n){if(e-o<2)return;r=!0}else n=!0,r=!1,setTimeout(a,t);o=e}return l}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){eO&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),oO?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){eO&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t,r=rO.some((function(e){return!!~n.indexOf(e)}));r&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),aO=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},lO=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||tO},uO=hO(0,0,0,0);function cO(e){return parseFloat(e)||0}function sO(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+cO(e["border-"+n+"-width"])}),0)}var dO="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof lO(e).SVGGraphicsElement}:function(e){return e instanceof lO(e).SVGElement&&"function"==typeof e.getBBox};function fO(e){return eO?dO(e)?function(e){var t=e.getBBox();return hO(0,0,t.width,t.height)}(e):function(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return uO;var r=lO(e).getComputedStyle(e),o=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var o=r[n],i=e["padding-"+o];t[o]=cO(i)}return t}(r),i=o.left+o.right,a=o.top+o.bottom,l=cO(r.width),u=cO(r.height);if("border-box"===r.boxSizing&&(Math.round(l+i)!==t&&(l-=sO(r,"left","right")+i),Math.round(u+a)!==n&&(u-=sO(r,"top","bottom")+a)),!function(e){return e===lO(e).document.documentElement}(e)){var c=Math.round(l+i)-t,s=Math.round(u+a)-n;1!==Math.abs(c)&&(l-=c),1!==Math.abs(s)&&(u-=s)}return hO(o.left,o.top,l,u)}(e):uO}function hO(e,t,n,r){return{x:e,y:t,width:n,height:r}}var pO=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=hO(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=fO(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),vO=function(e,t){var n=function(e){var t=e.x,n=e.y,r=e.width,o=e.height,i="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,a=Object.create(i.prototype);return aO(a,{x:t,y:n,width:r,height:o,top:n,right:t+r,bottom:o+n,left:t}),a}(t);aO(this,{target:e,contentRect:n})},mO=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new ZN,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof lO(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new pO(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof lO(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new vO(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),gO="undefined"!=typeof WeakMap?new WeakMap:new ZN,bO=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=iO.getInstance(),r=new mO(t,n,this);gO.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){bO.prototype[e]=function(){var t;return(t=gO.get(this))[e].apply(t,arguments)}}));const yO=void 0!==tO.ResizeObserver?tO.ResizeObserver:bO;function wO(e,t){var n=null,r=null,o=new yO((function(e){var o=(0,tn.A)(e,1)[0].target;if(document.documentElement.contains(o)){var i=o.getBoundingClientRect(),a=i.width,l=i.height,u=Math.floor(a),c=Math.floor(l);n===u&&r===c||Promise.resolve().then((function(){t({width:u,height:c})})),n=u,r=c}}));return e&&o.observe(e),function(){o.disconnect()}}function AO(e){return"function"!=typeof e?null:e()}function kO(e){return"object"===(0,Gn.A)(e)&&e?e:null}var _O=function(e,t){var n=e.children,r=e.disabled,o=e.target,i=e.align,a=e.onAlign,l=e.monitorWindowResize,u=e.monitorBufferTime,c=void 0===u?0:u,s=Gu().useRef({}),d=Gu().useRef(),f=Gu().Children.only(n),h=Gu().useRef({});h.current.disabled=r,h.current.target=o,h.current.align=i,h.current.onAlign=a;var p=function(e,t){var n=Gu().useRef(!1),r=Gu().useRef(null);function o(){window.clearTimeout(r.current)}return[function e(i){if(o(),n.current&&!0!==i)r.current=window.setTimeout((function(){n.current=!1,e()}),t);else{if(!1===function(){var e=h.current,t=e.disabled,n=e.target,r=e.align,o=e.onAlign,i=d.current;if(!t&&n&&i){var a,l=AO(n),u=kO(n);s.current.element=l,s.current.point=u,s.current.align=r;var c=document.activeElement;return l&&XN(l)?a=JN(i,l,r):u&&(a=function(e,t,n){var r,o,i=IN.getDocument(e),a=i.defaultView||i.parentWindow,l=IN.getWindowScrollLeft(a),u=IN.getWindowScrollTop(a),c=IN.viewportWidth(a),s=IN.viewportHeight(a),d={left:r="pageX"in t?t.pageX:l+t.clientX,top:o="pageY"in t?t.pageY:u+t.clientY,width:0,height:0},f=r>=0&&r<=l+c&&o>=0&&o<=u+s,h=[n.points[0],"cc"];return GN(e,d,GC(GC({},n),{},{points:h}),f)}(i,u,r)),function(e,t){e!==document.activeElement&&(0,MC.A)(t,e)&&"function"==typeof e.focus&&e.focus()}(c,i),o&&a&&o(i,a),!0}return!1}())return;n.current=!0,r.current=window.setTimeout((function(){n.current=!1}),t)}},function(){n.current=!1,o()}]}(0,c),v=(0,tn.A)(p,2),m=v[0],g=v[1],b=Gu().useState(),y=(0,tn.A)(b,2),w=y[0],A=y[1],k=Gu().useState(),_=(0,tn.A)(k,2),C=_[0],N=_[1];return(0,QN.A)((function(){A(AO(o)),N(kO(o))})),Gu().useEffect((function(){var e,t;s.current.element===w&&((e=s.current.point)===(t=C)||e&&t&&("pageX"in t&&"pageY"in t?e.pageX===t.pageX&&e.pageY===t.pageY:"clientX"in t&&"clientY"in t&&e.clientX===t.clientX&&e.clientY===t.clientY))&&function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new Set;return function e(t,o){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=r.has(t);if((0,ck.Ay)(!a,"Warning: There may be circular references"),a)return!1;if(t===o)return!0;if(n&&i>1)return!1;r.add(t);var l=i+1;if(Array.isArray(t)){if(!Array.isArray(o)||t.length!==o.length)return!1;for(var u=0;u<t.length;u++)if(!e(t[u],o[u],l))return!1;return!0}if(t&&o&&"object"===(0,Gn.A)(t)&&"object"===(0,Gn.A)(o)){var c=Object.keys(t);return c.length===Object.keys(o).length&&c.every((function(n){return e(t[n],o[n],l)}))}return!1}(e,t)}(s.current.align,i)||m()})),Gu().useEffect((function(){return wO(d.current,m)}),[d.current]),Gu().useEffect((function(){return wO(w,m)}),[w]),Gu().useEffect((function(){r?g():m()}),[r]),Gu().useEffect((function(){if(l)return UC(window,"resize",m).remove}),[l]),Gu().useEffect((function(){return function(){g()}}),[]),Gu().useImperativeHandle(t,(function(){return{forceAlign:function(){return m(!0)}}})),Gu().isValidElement(f)&&(f=Gu().cloneElement(f,{ref:(0,LC.K4)(f.ref,d)})),f},CO=Gu().forwardRef(_O);CO.displayName="Align";const NO=CO;function OO(){OO=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),l=new P(r||[]);return o(a,"_invoke",{value:O(e,n,l)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",h="suspendedYield",p="executing",v="completed",m={};function g(){}function b(){}function y(){}var w={};c(w,a,(function(){return this}));var A=Object.getPrototypeOf,k=A&&A(A(R([])));k&&k!==n&&r.call(k,a)&&(w=k);var _=y.prototype=g.prototype=Object.create(w);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function N(e,t){function n(o,i,a,l){var u=d(e[o],e,i);if("throw"!==u.type){var c=u.arg,s=c.value;return s&&"object"==(0,Gn.A)(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(s).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,l)}))}l(u.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function O(t,n,r){var o=f;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var l=r.delegate;if(l){var u=x(l,r);if(u){if(u===m)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var c=d(t,n,r);if("normal"===c.type){if(o=r.done?v:h,c.arg===m)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=v,r.method="throw",r.arg=c.arg)}}}function x(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function R(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError((0,Gn.A)(t)+" is not iterable")}return b.prototype=y,o(_,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:b,configurable:!0}),b.displayName=c(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,u,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},C(N.prototype),c(N.prototype,l,(function(){return this})),t.AsyncIterator=N,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new N(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},C(_),c(_,u,"Generator"),c(_,a,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return l.type="throw",l.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),D(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;D(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:R(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}var xO=o(957),EO=o(2022),DO=["measure","alignPre","align",null,"motion"],PO=Yu.forwardRef((function(e,t){var n=e.visible,r=e.prefixCls,o=e.className,i=e.style,a=e.children,l=e.zIndex,u=e.stretch,c=e.destroyPopupOnHide,s=e.forceRender,d=e.align,f=e.point,h=e.getRootDomNode,p=e.getClassNameFromAlign,v=e.onAlign,m=e.onMouseEnter,g=e.onMouseLeave,b=e.onMouseDown,y=e.onTouchStart,w=e.onClick,A=(0,Yu.useRef)(),k=(0,Yu.useRef)(),_=(0,Yu.useState)(),C=(0,tn.A)(_,2),N=C[0],O=C[1],x=function(e){var t=Yu.useState({width:0,height:0}),n=(0,tn.A)(t,2),r=n[0],o=n[1];return[Yu.useMemo((function(){var t={};if(e){var n=r.width,o=r.height;-1!==e.indexOf("height")&&o?t.height=o:-1!==e.indexOf("minHeight")&&o&&(t.minHeight=o),-1!==e.indexOf("width")&&n?t.width=n:-1!==e.indexOf("minWidth")&&n&&(t.minWidth=n)}return t}),[e,r]),function(e){var t=e.offsetWidth,n=e.offsetHeight,r=e.getBoundingClientRect(),i=r.width,a=r.height;Math.abs(t-i)<1&&Math.abs(n-a)<1&&(t=i,n=a),o({width:t,height:n})}]}(u),E=(0,tn.A)(x,2),D=E[0],P=E[1],R=function(e,t){var n=(0,EO.A)(null),r=(0,tn.A)(n,2),o=r[0],i=r[1],a=(0,Yu.useRef)();function l(e){i(e,!0)}function c(){BC.A.cancel(a.current)}return(0,Yu.useEffect)((function(){l("measure")}),[e]),(0,Yu.useEffect)((function(){"measure"===o&&(u&&P(h())),o&&(a.current=(0,BC.A)((0,xO.A)(OO().mark((function e(){var t,n;return OO().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=DO.indexOf(o),(n=DO[t+1])&&-1!==t&&l(n);case 3:case"end":return e.stop()}}),e)})))))}),[o]),(0,Yu.useEffect)((function(){return function(){c()}}),[]),[o,function(e){c(),a.current=(0,BC.A)((function(){l((function(e){switch(o){case"align":return"motion";case"motion":return"stable"}return e})),null==e||e()}))}]}(n),S=(0,tn.A)(R,2),T=S[0],j=S[1],I=(0,Yu.useState)(0),B=(0,tn.A)(I,2),M=B[0],F=B[1],L=(0,Yu.useRef)();function U(){var e;null===(e=A.current)||void 0===e||e.forceAlign()}function V(e,t){var n=p(t);N!==n&&O(n),F((function(e){return e+1})),"align"===T&&(null==v||v(e,t))}(0,QN.A)((function(){"alignPre"===T&&F(0)}),[T]),(0,QN.A)((function(){"align"===T&&(M<3?U():j((function(){var e;null===(e=L.current)||void 0===e||e.call(L)})))}),[M]);var H=(0,ok.A)({},$C(e));function z(){return new Promise((function(e){L.current=e}))}["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach((function(e){var t=H[e];H[e]=function(e,n){return j(),null==t?void 0:t(e,n)}})),Yu.useEffect((function(){H.motionName||"motion"!==T||j()}),[H.motionName,T]),Yu.useImperativeHandle(t,(function(){return{forceAlign:U,getElement:function(){return k.current}}}));var W=(0,ok.A)((0,ok.A)({},D),{},{zIndex:l,opacity:"motion"!==T&&"stable"!==T&&n?0:void 0,pointerEvents:n||"stable"===T?void 0:"none"},i),q=!0;null==d||!d.points||"align"!==T&&"stable"!==T||(q=!1);var $=a;return Yu.Children.count(a)>1&&($=Yu.createElement("div",{className:"".concat(r,"-content")},a)),Yu.createElement(qC.Ay,(0,ek.A)({visible:n,ref:k,leavedClassName:"".concat(r,"-hidden")},H,{onAppearPrepare:z,onEnterPrepare:z,removeOnLeave:c,forceRender:s}),(function(e,t){var n=e.className,i=e.style,a=nk()(r,o,N,n);return Yu.createElement(NO,{target:f||h,key:"popup",ref:A,monitorWindowResize:!0,disabled:q,align:d,onAlign:V},Yu.createElement("div",{ref:t,className:a,onMouseEnter:m,onMouseLeave:g,onMouseDownCapture:b,onTouchStartCapture:y,onClick:w,style:(0,ok.A)((0,ok.A)({},i),W)},$))}))}));PO.displayName="PopupInner";const RO=PO;var SO=Yu.forwardRef((function(e,t){var n=e.prefixCls,r=e.visible,o=e.zIndex,i=e.children,a=e.mobile,l=(a=void 0===a?{}:a).popupClassName,u=a.popupStyle,c=a.popupMotion,s=void 0===c?{}:c,d=a.popupRender,f=e.onClick,h=Yu.useRef();Yu.useImperativeHandle(t,(function(){return{forceAlign:function(){},getElement:function(){return h.current}}}));var p=(0,ok.A)({zIndex:o},u),v=i;return Yu.Children.count(i)>1&&(v=Yu.createElement("div",{className:"".concat(n,"-content")},i)),d&&(v=d(v)),Yu.createElement(qC.Ay,(0,ek.A)({visible:r,ref:h,removeOnLeave:!0},s),(function(e,t){var r=e.className,o=e.style,i=nk()(n,l,r);return Yu.createElement("div",{ref:t,className:i,onClick:f,style:(0,ok.A)((0,ok.A)({},o),p)},v)}))}));SO.displayName="MobilePopupInner";const TO=SO;var jO=["visible","mobile"],IO=Yu.forwardRef((function(e,t){var n=e.visible,r=e.mobile,o=(0,ak.A)(e,jO),i=(0,Yu.useState)(n),a=(0,tn.A)(i,2),l=a[0],u=a[1],c=(0,Yu.useState)(!1),s=(0,tn.A)(c,2),d=s[0],f=s[1],h=(0,ok.A)((0,ok.A)({},o),{},{visible:l});(0,Yu.useEffect)((function(){u(n),n&&r&&f(zC())}),[n,r]);var p=d?Yu.createElement(TO,(0,ek.A)({},h,{mobile:r,ref:t})):Yu.createElement(RO,(0,ek.A)({},h,{ref:t}));return Yu.createElement("div",null,Yu.createElement(KC,h),p)}));IO.displayName="Popup";const BO=IO,MO=Yu.createContext(null);function FO(){}var LO=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];const UO=(VO=VC.A,HO=function(e){(0,Xe.A)(n,e);var t=(0,Wk.A)(n);function n(e){var r,o;return(0,Ke.A)(this,n),r=t.call(this,e),(0,Ha.A)((0,IC.A)(r),"popupRef",Yu.createRef()),(0,Ha.A)((0,IC.A)(r),"triggerRef",Yu.createRef()),(0,Ha.A)((0,IC.A)(r),"portalContainer",void 0),(0,Ha.A)((0,IC.A)(r),"attachId",void 0),(0,Ha.A)((0,IC.A)(r),"clickOutsideHandler",void 0),(0,Ha.A)((0,IC.A)(r),"touchOutsideHandler",void 0),(0,Ha.A)((0,IC.A)(r),"contextMenuOutsideHandler1",void 0),(0,Ha.A)((0,IC.A)(r),"contextMenuOutsideHandler2",void 0),(0,Ha.A)((0,IC.A)(r),"mouseDownTimeout",void 0),(0,Ha.A)((0,IC.A)(r),"focusTime",void 0),(0,Ha.A)((0,IC.A)(r),"preClickTime",void 0),(0,Ha.A)((0,IC.A)(r),"preTouchTime",void 0),(0,Ha.A)((0,IC.A)(r),"delayTimer",void 0),(0,Ha.A)((0,IC.A)(r),"hasPopupMouseDown",void 0),(0,Ha.A)((0,IC.A)(r),"onMouseEnter",(function(e){var t=r.props.mouseEnterDelay;r.fireEvents("onMouseEnter",e),r.delaySetPopupVisible(!0,t,t?null:e)})),(0,Ha.A)((0,IC.A)(r),"onMouseMove",(function(e){r.fireEvents("onMouseMove",e),r.setPoint(e)})),(0,Ha.A)((0,IC.A)(r),"onMouseLeave",(function(e){r.fireEvents("onMouseLeave",e),r.delaySetPopupVisible(!1,r.props.mouseLeaveDelay)})),(0,Ha.A)((0,IC.A)(r),"onPopupMouseEnter",(function(){r.clearDelayTimer()})),(0,Ha.A)((0,IC.A)(r),"onPopupMouseLeave",(function(e){var t;e.relatedTarget&&!e.relatedTarget.setTimeout&&(0,MC.A)(null===(t=r.popupRef.current)||void 0===t?void 0:t.getElement(),e.relatedTarget)||r.delaySetPopupVisible(!1,r.props.mouseLeaveDelay)})),(0,Ha.A)((0,IC.A)(r),"onFocus",(function(e){r.fireEvents("onFocus",e),r.clearDelayTimer(),r.isFocusToShow()&&(r.focusTime=Date.now(),r.delaySetPopupVisible(!0,r.props.focusDelay))})),(0,Ha.A)((0,IC.A)(r),"onMouseDown",(function(e){r.fireEvents("onMouseDown",e),r.preClickTime=Date.now()})),(0,Ha.A)((0,IC.A)(r),"onTouchStart",(function(e){r.fireEvents("onTouchStart",e),r.preTouchTime=Date.now()})),(0,Ha.A)((0,IC.A)(r),"onBlur",(function(e){r.fireEvents("onBlur",e),r.clearDelayTimer(),r.isBlurToHide()&&r.delaySetPopupVisible(!1,r.props.blurDelay)})),(0,Ha.A)((0,IC.A)(r),"onContextMenu",(function(e){e.preventDefault(),r.fireEvents("onContextMenu",e),r.setPopupVisible(!0,e)})),(0,Ha.A)((0,IC.A)(r),"onContextMenuClose",(function(){r.isContextMenuToShow()&&r.close()})),(0,Ha.A)((0,IC.A)(r),"onClick",(function(e){if(r.fireEvents("onClick",e),r.focusTime){var t;if(r.preClickTime&&r.preTouchTime?t=Math.min(r.preClickTime,r.preTouchTime):r.preClickTime?t=r.preClickTime:r.preTouchTime&&(t=r.preTouchTime),Math.abs(t-r.focusTime)<20)return;r.focusTime=0}r.preClickTime=0,r.preTouchTime=0,r.isClickToShow()&&(r.isClickToHide()||r.isBlurToHide())&&e&&e.preventDefault&&e.preventDefault();var n=!r.state.popupVisible;(r.isClickToHide()&&!n||n&&r.isClickToShow())&&r.setPopupVisible(!r.state.popupVisible,e)})),(0,Ha.A)((0,IC.A)(r),"onPopupMouseDown",(function(){var e;r.hasPopupMouseDown=!0,clearTimeout(r.mouseDownTimeout),r.mouseDownTimeout=window.setTimeout((function(){r.hasPopupMouseDown=!1}),0),r.context&&(e=r.context).onPopupMouseDown.apply(e,arguments)})),(0,Ha.A)((0,IC.A)(r),"onDocumentClick",(function(e){if(!r.props.mask||r.props.maskClosable){var t=e.target,n=r.getRootDomNode(),o=r.getPopupDomNode();(0,MC.A)(n,t)&&!r.isContextMenuOnly()||(0,MC.A)(o,t)||r.hasPopupMouseDown||r.close()}})),(0,Ha.A)((0,IC.A)(r),"getRootDomNode",(function(){var e=r.props.getTriggerDOMNode;if(e)return e(r.triggerRef.current);try{var t=(0,FC.Ay)(r.triggerRef.current);if(t)return t}catch(e){}return Gl().findDOMNode((0,IC.A)(r))})),(0,Ha.A)((0,IC.A)(r),"getPopupClassNameFromAlign",(function(e){var t=[],n=r.props,o=n.popupPlacement,i=n.builtinPlacements,a=n.prefixCls,l=n.alignPoint,u=n.getPopupClassNameFromAlign;return o&&i&&t.push(function(e,t,n,r){for(var o=n.points,i=Object.keys(e),a=0;a<i.length;a+=1){var l=i[a];if(HC(e[l].points,o,r))return"".concat(t,"-placement-").concat(l)}return""}(i,a,e,l)),u&&t.push(u(e)),t.join(" ")})),(0,Ha.A)((0,IC.A)(r),"getComponent",(function(){var e=r.props,t=e.prefixCls,n=e.destroyPopupOnHide,o=e.popupClassName,i=e.onPopupAlign,a=e.popupMotion,l=e.popupAnimation,u=e.popupTransitionName,c=e.popupStyle,s=e.mask,d=e.maskAnimation,f=e.maskTransitionName,h=e.maskMotion,p=e.zIndex,v=e.popup,m=e.stretch,g=e.alignPoint,b=e.mobile,y=e.forceRender,w=e.onPopupClick,A=r.state,k=A.popupVisible,_=A.point,C=r.getPopupAlign(),N={};return r.isMouseEnterToShow()&&(N.onMouseEnter=r.onPopupMouseEnter),r.isMouseLeaveToHide()&&(N.onMouseLeave=r.onPopupMouseLeave),N.onMouseDown=r.onPopupMouseDown,N.onTouchStart=r.onPopupMouseDown,Yu.createElement(BO,(0,ek.A)({prefixCls:t,destroyPopupOnHide:n,visible:k,point:g&&_,className:o,align:C,onAlign:i,animation:l,getClassNameFromAlign:r.getPopupClassNameFromAlign},N,{stretch:m,getRootDomNode:r.getRootDomNode,style:c,mask:s,zIndex:p,transitionName:u,maskAnimation:d,maskTransitionName:f,maskMotion:h,ref:r.popupRef,motion:a,mobile:b,forceRender:y,onClick:w}),"function"==typeof v?v():v)})),(0,Ha.A)((0,IC.A)(r),"attachParent",(function(e){BC.A.cancel(r.attachId);var t,n=r.props,o=n.getPopupContainer,i=n.getDocument,a=r.getRootDomNode();o?(a||0===o.length)&&(t=o(a)):t=i(r.getRootDomNode()).body,t?t.appendChild(e):r.attachId=(0,BC.A)((function(){r.attachParent(e)}))})),(0,Ha.A)((0,IC.A)(r),"getContainer",(function(){if(!r.portalContainer){var e=(0,r.props.getDocument)(r.getRootDomNode()).createElement("div");e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",r.portalContainer=e}return r.attachParent(r.portalContainer),r.portalContainer})),(0,Ha.A)((0,IC.A)(r),"setPoint",(function(e){r.props.alignPoint&&e&&r.setState({point:{pageX:e.pageX,pageY:e.pageY}})})),(0,Ha.A)((0,IC.A)(r),"handlePortalUpdate",(function(){r.state.prevPopupVisible!==r.state.popupVisible&&r.props.afterPopupVisibleChange(r.state.popupVisible)})),(0,Ha.A)((0,IC.A)(r),"triggerContextValue",{onPopupMouseDown:r.onPopupMouseDown}),o="popupVisible"in e?!!e.popupVisible:!!e.defaultPopupVisible,r.state={prevPopupVisible:o,popupVisible:o},LO.forEach((function(e){r["fire".concat(e)]=function(t){r.fireEvents(e,t)}})),r}return(0,$e.A)(n,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var e,t=this.props;if(this.state.popupVisible)return this.clickOutsideHandler||!this.isClickToHide()&&!this.isContextMenuToShow()||(e=t.getDocument(this.getRootDomNode()),this.clickOutsideHandler=UC(e,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(e=e||t.getDocument(this.getRootDomNode()),this.touchOutsideHandler=UC(e,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(e=e||t.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=UC(e,"scroll",this.onContextMenuClose)),void(!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=UC(window,"blur",this.onContextMenuClose)));this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),BC.A.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var e;return(null===(e=this.popupRef.current)||void 0===e?void 0:e.getElement())||null}},{key:"getPopupAlign",value:function(){var e=this.props,t=e.popupPlacement,n=e.popupAlign,r=e.builtinPlacements;return t&&r?function(e,t,n){var r=e[t]||{};return(0,ok.A)((0,ok.A)({},r),n)}(r,t,n):n}},{key:"setPopupVisible",value:function(e,t){var n=this.props.alignPoint,r=this.state.popupVisible;this.clearDelayTimer(),r!==e&&("popupVisible"in this.props||this.setState({popupVisible:e,prevPopupVisible:r}),this.props.onPopupVisibleChange(e)),n&&t&&e&&this.setPoint(t)}},{key:"delaySetPopupVisible",value:function(e,t,n){var r=this,o=1e3*t;if(this.clearDelayTimer(),o){var i=n?{pageX:n.pageX,pageY:n.pageY}:null;this.delayTimer=window.setTimeout((function(){r.setPopupVisible(e,i),r.clearDelayTimer()}),o)}else this.setPopupVisible(e,n)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(e){var t=this.props.children.props,n=this.props;return t[e]&&n[e]?this["fire".concat(e)]:t[e]||n[e]}},{key:"isClickToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isContextMenuOnly",value:function(){var e=this.props.action;return"contextMenu"===e||1===e.length&&"contextMenu"===e[0]}},{key:"isContextMenuToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("contextMenu")||-1!==n.indexOf("contextMenu")}},{key:"isClickToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isMouseEnterToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseEnter")}},{key:"isMouseLeaveToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseLeave")}},{key:"isFocusToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("focus")}},{key:"isBlurToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("blur")}},{key:"forcePopupAlign",value:function(){var e;this.state.popupVisible&&(null===(e=this.popupRef.current)||void 0===e||e.forceAlign())}},{key:"fireEvents",value:function(e,t){var n=this.props.children.props[e];n&&n(t);var r=this.props[e];r&&r(t)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var e=this.state.popupVisible,t=this.props,n=t.children,r=t.forceRender,o=t.alignPoint,i=t.className,a=t.autoDestroy,l=Yu.Children.only(n),u={key:"trigger"};this.isContextMenuToShow()?u.onContextMenu=this.onContextMenu:u.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(u.onClick=this.onClick,u.onMouseDown=this.onMouseDown,u.onTouchStart=this.onTouchStart):(u.onClick=this.createTwoChains("onClick"),u.onMouseDown=this.createTwoChains("onMouseDown"),u.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(u.onMouseEnter=this.onMouseEnter,o&&(u.onMouseMove=this.onMouseMove)):u.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?u.onMouseLeave=this.onMouseLeave:u.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(u.onFocus=this.onFocus,u.onBlur=this.onBlur):(u.onFocus=this.createTwoChains("onFocus"),u.onBlur=this.createTwoChains("onBlur"));var c=nk()(l&&l.props&&l.props.className,i);c&&(u.className=c);var s=(0,ok.A)({},u);(0,LC.f3)(l)&&(s.ref=(0,LC.K4)(this.triggerRef,l.ref));var d,f=Yu.cloneElement(l,s);return(e||this.popupRef.current||r)&&(d=Yu.createElement(VO,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!e&&a&&(d=null),Yu.createElement(MO.Provider,{value:this.triggerContextValue},f,d)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.popupVisible,r={};return void 0!==n&&t.popupVisible!==n&&(r.popupVisible=n,r.prevPopupVisible=t.popupVisible),r}}]),n}(Yu.Component),(0,Ha.A)(HO,"contextType",MO),(0,Ha.A)(HO,"defaultProps",{prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:function(){return""},getDocument:function(e){return e?e.ownerDocument:window.document},onPopupVisibleChange:FO,afterPopupVisibleChange:FO,onPopupAlign:FO,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1}),HO);var VO,HO,zO={adjustX:1,adjustY:1},WO=[0,0];const qO={topLeft:{points:["bl","tl"],overflow:zO,offset:[0,-4],targetOffset:WO},topCenter:{points:["bc","tc"],overflow:zO,offset:[0,-4],targetOffset:WO},topRight:{points:["br","tr"],overflow:zO,offset:[0,-4],targetOffset:WO},bottomLeft:{points:["tl","bl"],overflow:zO,offset:[0,4],targetOffset:WO},bottomCenter:{points:["tc","bc"],overflow:zO,offset:[0,4],targetOffset:WO},bottomRight:{points:["tr","br"],overflow:zO,offset:[0,4],targetOffset:WO}};var $O=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger"];function KO(e,t){var n=e.arrow,r=void 0!==n&&n,o=e.prefixCls,i=void 0===o?"rc-dropdown":o,a=e.transitionName,l=e.animation,u=e.align,c=e.placement,s=void 0===c?"bottomLeft":c,d=e.placements,f=void 0===d?qO:d,h=e.getPopupContainer,p=e.showAction,v=e.hideAction,m=e.overlayClassName,g=e.overlayStyle,b=e.visible,y=e.trigger,w=void 0===y?["hover"]:y,A=(0,ak.A)(e,$O),k=Yu.useState(),_=(0,tn.A)(k,2),C=_[0],N=_[1],O="visible"in e?b:C,x=Yu.useRef(null);Yu.useImperativeHandle(t,(function(){return x.current}));var E,D,P,R,S,T,j=function(){var t=e.overlay;return"function"==typeof t?t():t},I=function(t){var n=e.onOverlayClick,r=j().props;N(!1),n&&n(t),r.onClick&&r.onClick(t)},B=function(){var e=j(),t={prefixCls:"".concat(i,"-menu"),onClick:I};return"string"==typeof e.type&&delete t.prefixCls,Yu.createElement(Yu.Fragment,null,r&&Yu.createElement("div",{className:"".concat(i,"-arrow")}),Yu.cloneElement(e,t))},M=v;return M||-1===w.indexOf("contextMenu")||(M=["click"]),Yu.createElement(UO,(0,ok.A)((0,ok.A)({builtinPlacements:f},A),{},{prefixCls:i,ref:x,popupClassName:nk()(m,(0,Ha.A)({},"".concat(i,"-show-arrow"),r)),popupStyle:g,action:w,showAction:p,hideAction:M||[],popupPlacement:s,popupAlign:u,popupTransitionName:a,popupAnimation:l,popupVisible:O,stretch:(S=e.minOverlayWidthMatchTrigger,T=e.alignPoint,("minOverlayWidthMatchTrigger"in e?S:!T)?"minWidth":""),popup:"function"==typeof e.overlay?B:B(),onPopupVisibleChange:function(t){var n=e.onVisibleChange;N(t),"function"==typeof n&&n(t)},getPopupContainer:h}),(P=(D=e.children).props?D.props:{},R=nk()(P.className,void 0!==(E=e.openClassName)?E:"".concat(i,"-open")),O&&D?Yu.cloneElement(D,{className:R}):D))}const YO=Yu.forwardRef(KO),GO={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"};var JO=function(e,t){return Yu.createElement(Ek,(0,ok.A)((0,ok.A)({},e),{},{ref:t,icon:GO}))};const XO=Yu.forwardRef(JO),QO={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"};var ZO=function(e,t){return Yu.createElement(Ek,(0,ok.A)((0,ok.A)({},e),{},{ref:t,icon:QO}))};const ex=Yu.forwardRef(ZO);var tx=o(4382),nx=function e(t){return(0,Ke.A)(this,e),new Error("unreachable case: ".concat(JSON.stringify(t)))};var rx=0,ox={};function ix(e){var t=rx++,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return ox[t]=(0,BC.A)((function r(){(n-=1)<=0?(e(),delete ox[t]):ox[t]=(0,BC.A)(r)})),t}ix.cancel=function(e){void 0!==e&&(BC.A.cancel(ox[e]),delete ox[e])},ix.ids=ox;var ax,lx=Yu.isValidElement;function ux(e,t){return function(e,t,n){return lx(e)?Yu.cloneElement(e,"function"==typeof n?n(e.props||{}):n):t}(e,e,t)}function cx(e){return!e||null===e.offsetParent||e.hidden}var sx=function(e){(0,Xe.A)(n,e);var t=(0,Wk.A)(n);function n(){var e;return(0,Ke.A)(this,n),(e=t.apply(this,arguments)).containerRef=Yu.createRef(),e.animationStart=!1,e.destroyed=!1,e.onClick=function(t,n){var r,o;if(!(!t||cx(t)||t.className.indexOf("-leave")>=0)){var i=e.props.insertExtraNode;e.extraNode=document.createElement("div");var a=(0,IC.A)(e).extraNode,l=e.context.getPrefixCls;a.className="".concat(l(""),"-click-animating-node");var u=e.getAttributeName();if(t.setAttribute(u,"true"),n&&"#ffffff"!==n&&"rgb(255, 255, 255)"!==n&&function(e){var t=(e||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return!(t&&t[1]&&t[2]&&t[3]&&t[1]===t[2]&&t[2]===t[3])}(n)&&!/rgba\((?:\d*, ){3}0\)/.test(n)&&"transparent"!==n){a.style.borderColor=n;var c=(null===(r=t.getRootNode)||void 0===r?void 0:r.call(t))||t.ownerDocument,s=c instanceof Document?c.body:null!==(o=c.firstChild)&&void 0!==o?o:c;ax=(0,sk.BD)("\n      [".concat(l(""),"-click-animating-without-extra-node='true']::after, .").concat(l(""),"-click-animating-node {\n        --antd-wave-shadow-color: ").concat(n,";\n      }"),"antd-wave",{csp:e.csp,attachTo:s})}i&&t.appendChild(a),["transition","animation"].forEach((function(n){t.addEventListener("".concat(n,"start"),e.onTransitionStart),t.addEventListener("".concat(n,"end"),e.onTransitionEnd)}))}},e.onTransitionStart=function(t){if(!e.destroyed){var n=e.containerRef.current;t&&t.target===n&&!e.animationStart&&e.resetEffect(n)}},e.onTransitionEnd=function(t){t&&"fadeEffect"===t.animationName&&e.resetEffect(t.target)},e.bindAnimationEvent=function(t){if(t&&t.getAttribute&&!t.getAttribute("disabled")&&!(t.className.indexOf("disabled")>=0)){var n=function(n){if("INPUT"!==n.target.tagName&&!cx(n.target)){e.resetEffect(t);var r=getComputedStyle(t).getPropertyValue("border-top-color")||getComputedStyle(t).getPropertyValue("border-color")||getComputedStyle(t).getPropertyValue("background-color");e.clickWaveTimeoutId=window.setTimeout((function(){return e.onClick(t,r)}),0),ix.cancel(e.animationStartId),e.animationStart=!0,e.animationStartId=ix((function(){e.animationStart=!1}),10)}};return t.addEventListener("click",n,!0),{cancel:function(){t.removeEventListener("click",n,!0)}}}},e.renderWave=function(t){var n=t.csp,r=e.props.children;if(e.csp=n,!Yu.isValidElement(r))return r;var o=e.containerRef;return(0,LC.f3)(r)&&(o=(0,LC.K4)(r.ref,e.containerRef)),ux(r,{ref:o})},e}return(0,$e.A)(n,[{key:"componentDidMount",value:function(){var e=this.containerRef.current;e&&1===e.nodeType&&(this.instance=this.bindAnimationEvent(e))}},{key:"componentWillUnmount",value:function(){this.instance&&this.instance.cancel(),this.clickWaveTimeoutId&&clearTimeout(this.clickWaveTimeoutId),this.destroyed=!0}},{key:"getAttributeName",value:function(){var e=this.context.getPrefixCls,t=this.props.insertExtraNode;return"".concat(e(""),t?"-click-animating":"-click-animating-without-extra-node")}},{key:"resetEffect",value:function(e){var t=this;if(e&&e!==this.extraNode&&e instanceof Element){var n=this.props.insertExtraNode,r=this.getAttributeName();e.setAttribute(r,"false"),ax&&(ax.innerHTML=""),n&&this.extraNode&&e.contains(this.extraNode)&&e.removeChild(this.extraNode),["transition","animation"].forEach((function(n){e.removeEventListener("".concat(n,"start"),t.onTransitionStart),e.removeEventListener("".concat(n,"end"),t.onTransitionEnd)}))}}},{key:"render",value:function(){return Yu.createElement(i_,null,this.renderWave)}}]),n}(Yu.Component);sx.contextType=o_;var dx=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t},fx=function(){return{width:0,opacity:0,transform:"scale(0)"}},hx=function(e){return{width:e.scrollWidth,opacity:1,transform:"scale(1)"}};const px=function(e){var t=e.prefixCls,n=!!e.loading;return e.existIcon?Gu().createElement("span",{className:"".concat(t,"-loading-icon")},Gu().createElement(Pk,null)):Gu().createElement(qC.Ay,{visible:n,motionName:"".concat(t,"-loading-icon-motion"),removeOnLeave:!0,onAppearStart:fx,onAppearActive:hx,onEnterStart:fx,onEnterActive:hx,onLeaveStart:hx,onLeaveActive:fx},(function(e,n){var r=e.className,o=e.style;return Gu().createElement("span",{className:"".concat(t,"-loading-icon"),style:o,ref:n},Gu().createElement(Pk,{className:r}))}))};var vx=/^[\u4e00-\u9fa5]{2}$/,mx=vx.test.bind(vx);function gx(e){return"text"===e||"link"===e}function bx(e){return"danger"===e?{danger:!0}:{type:e}}dx("default","primary","ghost","dashed","link","text"),dx("circle","round"),dx("submit","button","reset");var yx=function(e,t){var n,r,o=e.loading,i=void 0!==o&&o,a=e.prefixCls,l=e.type,u=e.danger,c=e.shape,s=e.size,d=e.className,f=e.children,h=e.icon,p=e.ghost,v=void 0!==p&&p,m=e.block,g=void 0!==m&&m,b=e.htmlType,y=void 0===b?"button":b,w=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["loading","prefixCls","type","danger","shape","size","className","children","icon","ghost","block","htmlType"]),A=Yu.useContext(m_),k=Yu.useState(!!i),_=(0,tn.A)(k,2),C=_[0],N=_[1],O=Yu.useState(!1),x=(0,tn.A)(O,2),E=x[0],D=x[1],P=Yu.useContext(o_),R=P.getPrefixCls,S=P.autoInsertSpaceInButton,T=P.direction,j=t||Yu.createRef(),I=Yu.useRef(),B=function(){return 1===Yu.Children.count(f)&&!h&&!gx(l)};r="object"===(0,Gn.A)(i)&&i.delay?i.delay||!0:!!i,Yu.useEffect((function(){clearTimeout(I.current),"number"==typeof r?I.current=window.setTimeout((function(){N(r)}),r):N(r)}),[r]),Yu.useEffect((function(){if(j&&j.current&&!1!==S){var e=j.current.textContent;B()&&mx(e)?E||D(!0):E&&D(!1)}}),[j]);var M=function(t){var n,r=e.onClick,o=e.disabled;C||o?t.preventDefault():null===(n=r)||void 0===n||n(t)};u_(!("string"==typeof h&&h.length>2),"Button","`icon` is using ReactNode instead of string naming in v4. Please check `".concat(h,"` at https://ant.design/components/icon")),u_(!(v&&gx(l)),"Button","`link` or `text` button can't be a `ghost` button.");var F=R("btn",a),L=!1!==S,U="";switch(s||A){case"large":U="lg";break;case"small":U="sm"}var V=C?"loading":h,H=nk()(F,(n={},(0,Ha.A)(n,"".concat(F,"-").concat(l),l),(0,Ha.A)(n,"".concat(F,"-").concat(c),c),(0,Ha.A)(n,"".concat(F,"-").concat(U),U),(0,Ha.A)(n,"".concat(F,"-icon-only"),!f&&0!==f&&!!V),(0,Ha.A)(n,"".concat(F,"-background-ghost"),v&&!gx(l)),(0,Ha.A)(n,"".concat(F,"-loading"),C),(0,Ha.A)(n,"".concat(F,"-two-chinese-chars"),E&&L),(0,Ha.A)(n,"".concat(F,"-block"),g),(0,Ha.A)(n,"".concat(F,"-dangerous"),!!u),(0,Ha.A)(n,"".concat(F,"-rtl"),"rtl"===T),n),d),z=h&&!C?h:Yu.createElement(px,{existIcon:!!h,prefixCls:F,loading:!!C}),W=f||0===f?function(e,t){var n=!1,r=[];return Yu.Children.forEach(e,(function(e){var t=(0,Gn.A)(e),o="string"===t||"number"===t;if(n&&o){var i=r.length-1,a=r[i];r[i]="".concat(a).concat(e)}else r.push(e);n=o})),Yu.Children.map(r,(function(e){return function(e,t){if(null!=e){var n=t?" ":"";return"string"!=typeof e&&"number"!=typeof e&&"string"==typeof e.type&&mx(e.props.children)?ux(e,{children:e.props.children.split("").join(n)}):"string"==typeof e?(mx(e)&&(e=e.split("").join(n)),Yu.createElement("span",null,e)):e}}(e,t)}))}(f,B()&&L):null,q=(0,tx.A)(w,["navigate"]);if(void 0!==q.href)return Yu.createElement("a",(0,ek.A)({},q,{className:H,onClick:M,ref:j}),z,W);var $=Yu.createElement("button",(0,ek.A)({},w,{type:y,className:H,onClick:M,ref:j}),z,W);return gx(l)?$:Yu.createElement(sx,null,$)},wx=Yu.forwardRef(yx);wx.displayName="Button",wx.Group=function(e){return Yu.createElement(i_,null,(function(t){var n,r=t.getPrefixCls,o=t.direction,i=e.prefixCls,a=e.size,l=e.className,u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["prefixCls","size","className"]),c=r("btn-group",i),s="";switch(a){case"large":s="lg";break;case"small":s="sm";break;case"middle":case void 0:break;default:console.warn(new nx(a))}var d=nk()(c,(n={},(0,Ha.A)(n,"".concat(c,"-").concat(s),s),(0,Ha.A)(n,"".concat(c,"-rtl"),"rtl"===o),n),l);return Yu.createElement("div",(0,ek.A)({},u,{className:d}))}))},wx.__ANT_BUTTON=!0;const Ax=wx;var kx=Ax.Group,_x=function(e){var t=Yu.useContext(o_),n=t.getPopupContainer,r=t.getPrefixCls,o=t.direction,i=e.prefixCls,a=e.type,l=e.disabled,u=e.onClick,c=e.htmlType,s=e.children,d=e.className,f=e.overlay,h=e.trigger,p=e.align,v=e.visible,m=e.onVisibleChange,g=e.placement,b=e.getPopupContainer,y=e.href,w=e.icon,A=void 0===w?Yu.createElement(ex,null):w,k=e.title,_=e.buttonsRender,C=e.mouseEnterDelay,N=e.mouseLeaveDelay,O=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["prefixCls","type","disabled","onClick","htmlType","children","className","overlay","trigger","align","visible","onVisibleChange","placement","getPopupContainer","href","icon","title","buttonsRender","mouseEnterDelay","mouseLeaveDelay"]),x=r("dropdown-button",i),E={align:p,overlay:f,disabled:l,trigger:l?[]:h,onVisibleChange:m,getPopupContainer:b||n,mouseEnterDelay:C,mouseLeaveDelay:N};"visible"in e&&(E.visible=v),E.placement="placement"in e?g:"rtl"===o?"bottomLeft":"bottomRight";var D=_([Yu.createElement(Ax,{type:a,disabled:l,onClick:u,htmlType:c,href:y,title:k},s),Yu.createElement(Ax,{type:a,icon:A})]),P=(0,tn.A)(D,2),R=P[0],S=P[1];return Yu.createElement(kx,(0,ek.A)({},O,{className:nk()(x,d)}),R,Yu.createElement(Ox,E,S))};_x.__ANT_BUTTON=!0,_x.defaultProps={type:"default",buttonsRender:function(e){return e}};const Cx=_x;dx("topLeft","topCenter","topRight","bottomLeft","bottomCenter","bottomRight");var Nx=function(e){var t,n,r=Yu.useContext(o_),o=r.getPopupContainer,i=r.getPrefixCls,a=r.direction,l=e.arrow,u=e.prefixCls,c=e.children,s=e.trigger,d=e.disabled,f=e.getPopupContainer,h=e.overlayClassName,p=i("dropdown",u),v=Yu.Children.only(c),m=ux(v,{className:nk()("".concat(p,"-trigger"),(0,Ha.A)({},"".concat(p,"-rtl"),"rtl"===a),v.props.className),disabled:d}),g=nk()(h,(0,Ha.A)({},"".concat(p,"-rtl"),"rtl"===a)),b=d?[]:s;return b&&-1!==b.indexOf("contextMenu")&&(t=!0),Yu.createElement(YO,(0,ek.A)({arrow:l,alignPoint:t},e,{overlayClassName:g,prefixCls:p,getPopupContainer:f||o,transitionName:function(){var t=i(),n=e.placement,r=void 0===n?"":n,o=e.transitionName;return void 0!==o?o:r.indexOf("top")>=0?"".concat(t,"-slide-down"):"".concat(t,"-slide-up")}(),trigger:b,overlay:function(){return function(t){var n,r=e.overlay;n="function"==typeof r?r():r;var o=(n=Yu.Children.only("string"==typeof n?Yu.createElement("span",null,n):n)).props;u_(!o.mode||"vertical"===o.mode,"Dropdown",'mode="'.concat(o.mode,"\" is not supported for Dropdown's Menu."));var i=o.selectable,a=void 0!==i&&i,l=o.expandIcon,u=void 0!==l&&Yu.isValidElement(l)?l:Yu.createElement("span",{className:"".concat(t,"-menu-submenu-arrow")},Yu.createElement(XO,{className:"".concat(t,"-menu-submenu-arrow-icon")}));return"string"==typeof n.type?n:ux(n,{mode:"vertical",selectable:a,expandIcon:u})}(p)},placement:(n=e.placement,void 0!==n?n:"rtl"===a?"bottomRight":"bottomLeft")}),m)};Nx.Button=Cx,Nx.defaultProps={mouseEnterDelay:.15,mouseLeaveDelay:.1};const Ox=Nx,xx=Ox,Ex=xx;var Dx={adjustX:1,adjustY:1},Px=[0,0],Rx={left:{points:["cr","cl"],overflow:Dx,offset:[-4,0],targetOffset:Px},right:{points:["cl","cr"],overflow:Dx,offset:[4,0],targetOffset:Px},top:{points:["bc","tc"],overflow:Dx,offset:[0,-4],targetOffset:Px},bottom:{points:["tc","bc"],overflow:Dx,offset:[0,4],targetOffset:Px},topLeft:{points:["bl","tl"],overflow:Dx,offset:[0,-4],targetOffset:Px},leftTop:{points:["tr","tl"],overflow:Dx,offset:[-4,0],targetOffset:Px},topRight:{points:["br","tr"],overflow:Dx,offset:[0,-4],targetOffset:Px},rightTop:{points:["tl","tr"],overflow:Dx,offset:[4,0],targetOffset:Px},bottomRight:{points:["tr","br"],overflow:Dx,offset:[0,4],targetOffset:Px},rightBottom:{points:["bl","br"],overflow:Dx,offset:[4,0],targetOffset:Px},bottomLeft:{points:["tl","bl"],overflow:Dx,offset:[0,4],targetOffset:Px},leftBottom:{points:["br","bl"],overflow:Dx,offset:[-4,0],targetOffset:Px}};const Sx=function(e){var t=e.overlay,n=e.prefixCls,r=e.id,o=e.overlayInnerStyle;return Yu.createElement("div",{className:"".concat(n,"-inner"),id:r,role:"tooltip",style:o},"function"==typeof t?t():t)};var Tx=function(e,t){var n=e.overlayClassName,r=e.trigger,o=void 0===r?["hover"]:r,i=e.mouseEnterDelay,a=void 0===i?0:i,l=e.mouseLeaveDelay,u=void 0===l?.1:l,c=e.overlayStyle,s=e.prefixCls,d=void 0===s?"rc-tooltip":s,f=e.children,h=e.onVisibleChange,p=e.afterVisibleChange,v=e.transitionName,m=e.animation,g=e.motion,b=e.placement,y=void 0===b?"right":b,w=e.align,A=void 0===w?{}:w,k=e.destroyTooltipOnHide,_=void 0!==k&&k,C=e.defaultVisible,N=e.getTooltipContainer,O=e.overlayInnerStyle,x=(0,ak.A)(e,["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle"]),E=(0,Yu.useRef)(null);(0,Yu.useImperativeHandle)(t,(function(){return E.current}));var D=(0,ok.A)({},x);"visible"in e&&(D.popupVisible=e.visible);var P=!1,R=!1;if("boolean"==typeof _)P=_;else if(_&&"object"===(0,Gn.A)(_)){var S=_.keepParent;P=!0===S,R=!1===S}return Yu.createElement(UO,(0,ek.A)({popupClassName:n,prefixCls:d,popup:function(){var t=e.arrowContent,n=void 0===t?null:t,r=e.overlay,o=e.id;return[Yu.createElement("div",{className:"".concat(d,"-arrow"),key:"arrow"},n),Yu.createElement(Sx,{key:"content",prefixCls:d,id:o,overlay:r,overlayInnerStyle:O})]},action:o,builtinPlacements:Rx,popupPlacement:y,ref:E,popupAlign:A,getPopupContainer:N,onPopupVisibleChange:h,afterPopupVisibleChange:p,popupTransitionName:v,popupAnimation:m,popupMotion:g,defaultPopupVisible:C,destroyPopupOnHide:P,autoDestroy:R,mouseLeaveDelay:u,popupStyle:c,mouseEnterDelay:a},D),f)};const jx=(0,Yu.forwardRef)(Tx);var Ix=o(9046),Bx={adjustX:1,adjustY:1},Mx={adjustX:0,adjustY:0},Fx=[0,0];function Lx(e){return"boolean"==typeof e?e?Bx:Mx:(0,ek.A)((0,ek.A)({},Mx),e)}var Ux=dx("success","processing","error","default","warning"),Vx=dx("pink","red","yellow","orange","cyan","green","blue","purple","geekblue","magenta","volcano","gold","lime"),Hx=function(){return{height:0,opacity:0}},zx=function(e){return{height:e.scrollHeight,opacity:1}},Wx=function(e,t){return!0===(null==t?void 0:t.deadline)||"height"===t.propertyName},qx={motionName:"ant-motion-collapse",onAppearStart:Hx,onEnterStart:Hx,onAppearActive:zx,onEnterActive:zx,onLeaveStart:function(e){return{height:e.offsetHeight}},onLeaveActive:Hx,onAppearEnd:Wx,onEnterEnd:Wx,onLeaveEnd:Wx,motionDeadline:500},$x=function(e,t,n){return void 0!==n?n:"".concat(e,"-").concat(t)};const Kx=qx;var Yx=new RegExp("^(".concat(Vx.join("|"),")(-inverse)?$"));var Gx=Yu.forwardRef((function(e,t){var n,r=Yu.useContext(o_),o=r.getPopupContainer,i=r.getPrefixCls,a=r.direction,l=(0,Ix.A)(!1,{value:e.visible,defaultValue:e.defaultVisible}),u=(0,tn.A)(l,2),c=u[0],s=u[1],d=function(){var t=e.title,n=e.overlay;return!t&&!n&&0!==t},f=function(){var t=e.builtinPlacements,n=e.arrowPointAtCenter,r=e.autoAdjustOverflow;return t||function(e){var t=e.arrowWidth,n=void 0===t?5:t,r=e.horizontalArrowShift,o=void 0===r?16:r,i=e.verticalArrowShift,a=void 0===i?8:i,l=e.autoAdjustOverflow,u={left:{points:["cr","cl"],offset:[-4,0]},right:{points:["cl","cr"],offset:[4,0]},top:{points:["bc","tc"],offset:[0,-4]},bottom:{points:["tc","bc"],offset:[0,4]},topLeft:{points:["bl","tc"],offset:[-(o+n),-4]},leftTop:{points:["tr","cl"],offset:[-4,-(a+n)]},topRight:{points:["br","tc"],offset:[o+n,-4]},rightTop:{points:["tl","cr"],offset:[4,-(a+n)]},bottomRight:{points:["tr","bc"],offset:[o+n,4]},rightBottom:{points:["bl","cr"],offset:[4,a+n]},bottomLeft:{points:["tl","bc"],offset:[-(o+n),4]},leftBottom:{points:["br","cl"],offset:[-4,a+n]}};return Object.keys(u).forEach((function(t){u[t]=e.arrowPointAtCenter?(0,ek.A)((0,ek.A)({},u[t]),{overflow:Lx(l),targetOffset:Fx}):(0,ek.A)((0,ek.A)({},Rx[t]),{overflow:Lx(l)}),u[t].ignoreShake=!0})),u}({arrowPointAtCenter:n,autoAdjustOverflow:r})},h=e.prefixCls,p=e.openClassName,v=e.getPopupContainer,m=e.getTooltipContainer,g=e.overlayClassName,b=e.color,y=e.overlayInnerStyle,w=e.children,A=i("tooltip",h),k=i(),_=c;!("visible"in e)&&d()&&(_=!1);var C,N,O,x=function(e,t){var n=e.type;if((!0===n.__ANT_BUTTON||!0===n.__ANT_SWITCH||!0===n.__ANT_CHECKBOX||"button"===e.type)&&e.props.disabled){var r=function(e,t){var n={},r=(0,ek.A)({},e);return["position","left","right","top","bottom","float","display","zIndex"].forEach((function(t){e&&t in e&&(n[t]=e[t],delete r[t])})),{picked:n,omitted:r}}(e.props.style),o=r.picked,i=r.omitted,a=(0,ek.A)((0,ek.A)({display:"inline-block"},o),{cursor:"not-allowed",width:e.props.block?"100%":null}),l=ux(e,{style:(0,ek.A)((0,ek.A)({},i),{pointerEvents:"none"}),className:null});return Yu.createElement("span",{style:a,className:nk()(e.props.className,"".concat(t,"-disabled-compatible-wrapper"))},l)}return e}(lx(w)?w:Yu.createElement("span",null,w),A),E=x.props,D=nk()(E.className,(0,Ha.A)({},p||"".concat(A,"-open"),!0)),P=nk()(g,(n={},(0,Ha.A)(n,"".concat(A,"-rtl"),"rtl"===a),(0,Ha.A)(n,"".concat(A,"-").concat(b),b&&Yx.test(b)),n)),R=y;return b&&!Yx.test(b)&&(R=(0,ek.A)((0,ek.A)({},y),{background:b}),C={background:b}),Yu.createElement(jx,(0,ek.A)({},e,{prefixCls:A,overlayClassName:P,getTooltipContainer:v||m||o,ref:t,builtinPlacements:f(),overlay:(N=e.title,O=e.overlay,0===N?N:O||N||""),visible:_,onVisibleChange:function(t){var n;s(!d()&&t),d()||null===(n=e.onVisibleChange)||void 0===n||n.call(e,t)},onPopupAlign:function(e,t){var n=f(),r=Object.keys(n).filter((function(e){return n[e].points[0]===t.points[0]&&n[e].points[1]===t.points[1]}))[0];if(r){var o=e.getBoundingClientRect(),i={top:"50%",left:"50%"};r.indexOf("top")>=0||r.indexOf("Bottom")>=0?i.top="".concat(o.height-t.offset[1],"px"):(r.indexOf("Top")>=0||r.indexOf("bottom")>=0)&&(i.top="".concat(-t.offset[1],"px")),r.indexOf("left")>=0||r.indexOf("Right")>=0?i.left="".concat(o.width-t.offset[0],"px"):(r.indexOf("right")>=0||r.indexOf("Left")>=0)&&(i.left="".concat(-t.offset[0],"px")),e.style.transformOrigin="".concat(i.left," ").concat(i.top)}},overlayInnerStyle:R,arrowContent:Yu.createElement("span",{className:"".concat(A,"-arrow-content"),style:C}),motion:{motionName:$x(k,"zoom-big-fast",e.transitionName),motionDeadline:1e3}}),_?ux(x,{className:D}):x)}));Gx.displayName="Tooltip",Gx.defaultProps={placement:"top",mouseEnterDelay:.1,mouseLeaveDelay:.1,arrowPointAtCenter:!1,autoAdjustOverflow:!0};const Jx=Gx;var Xx=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function Qx(e){var t=e.children,n=Xx(e,["children"]);return Us.mobile?Gu().createElement(Gu().Fragment,null,t):Gu().createElement(Jx,Object.assign({},n),t)}function Zx(e,t,n){if(!e)return t;"string"==typeof e&&(e=[e]);var r=e.map((function(e,t){return e?Gu().createElement("div",{key:t},e):null}));return Us.mobile?t:Gu().createElement(Jx,Object.assign({overlayClassName:"ne-ui-tooltip",title:Gu().createElement("div",{className:"ne-ui-tooltip-content"},r),trigger:["hover","click"],placement:"bottom"},n),t)}const eE=function(e){var t=e.title,n=e.overlay,r=e.overlayProps,o=e.icon,i=e.toolTip,a=e.index,l=e.name,u=e.dropdownComponentConfig,c=void 0===u?{}:u,s=e.tooltipPlacement,d=e.selected,f=e.onClick,h="ne-card-toolbar-dropdown-item ".concat(t?"ne-card-toolbar-dropdown-item-has-title":"");return Gu().createElement(Ex,Object.assign({overlay:Gu().createElement(n,Object.assign({},r)),trigger:["click"],getPopupContainer:function(e){return e}},c),Zx(i,Gu().createElement("div",{className:"".concat(h," ").concat(d?"selected":""),key:a+l,onClick:function(){f&&f()}},"string"==typeof o?Gu().createElement(SC,{type:o}):o,!!t&&Gu().createElement("span",null,t)),{placement:s}))};var tE=o(7842),nE=o.n(tE),rE=o(5861),oE=Yu.createContext(null),iE=new Map,aE=new yO((function(e){e.forEach((function(e){var t,n=e.target;null===(t=iE.get(n))||void 0===t||t.forEach((function(e){return e(n)}))}))})),lE=function(e){(0,Xe.A)(n,e);var t=(0,Wk.A)(n);function n(){return(0,Ke.A)(this,n),t.apply(this,arguments)}return(0,$e.A)(n,[{key:"render",value:function(){return this.props.children}}]),n}(Yu.Component);function uE(e,t){var n=e.children,r=e.disabled,o=Yu.useRef(null),i=Yu.useRef(null),a=Yu.useContext(oE),l="function"==typeof n,u=l?n(o):n,c=Yu.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),s=!l&&Yu.isValidElement(u)&&(0,LC.f3)(u),d=s?u.ref:null,f=(0,LC.xK)(d,o),h=function(){var e;return(0,FC.Ay)(o.current)||(o.current&&"object"===(0,Gn.A)(o.current)?(0,FC.Ay)(null===(e=o.current)||void 0===e?void 0:e.nativeElement):null)||(0,FC.Ay)(i.current)};Yu.useImperativeHandle(t,(function(){return h()}));var p=Yu.useRef(e);p.current=e;var v=Yu.useCallback((function(e){var t=p.current,n=t.onResize,r=t.data,o=e.getBoundingClientRect(),i=o.width,l=o.height,u=e.offsetWidth,s=e.offsetHeight,d=Math.floor(i),f=Math.floor(l);if(c.current.width!==d||c.current.height!==f||c.current.offsetWidth!==u||c.current.offsetHeight!==s){var h={width:d,height:f,offsetWidth:u,offsetHeight:s};c.current=h;var v=u===Math.round(i)?i:u,m=s===Math.round(l)?l:s,g=(0,ok.A)((0,ok.A)({},h),{},{offsetWidth:v,offsetHeight:m});null==a||a(g,e,r),n&&Promise.resolve().then((function(){n(g,e)}))}}),[]);return Yu.useEffect((function(){var e,t,n=h();return n&&!r&&(e=n,t=v,iE.has(e)||(iE.set(e,new Set),aE.observe(e)),iE.get(e).add(t)),function(){return function(e,t){iE.has(e)&&(iE.get(e).delete(t),iE.get(e).size||(aE.unobserve(e),iE.delete(e)))}(n,v)}}),[o.current,r]),Yu.createElement(lE,{ref:i},s?Yu.cloneElement(u,{ref:f}):u)}const cE=Yu.forwardRef(uE);function sE(e,t){var n=e.children;return("function"==typeof n?[n]:(0,rE.A)(n)).map((function(n,r){var o=(null==n?void 0:n.key)||"".concat("rc-observer-key","-").concat(r);return Yu.createElement(cE,(0,ek.A)({},e,{key:o,ref:0===r?t:void 0}),n)}))}var dE=Yu.forwardRef(sE);dE.Collection=function(e){var t=e.children,n=e.onBatchResize,r=Yu.useRef(0),o=Yu.useRef([]),i=Yu.useContext(oE),a=Yu.useCallback((function(e,t,a){r.current+=1;var l=r.current;o.current.push({size:e,element:t,data:a}),Promise.resolve().then((function(){l===r.current&&(null==n||n(o.current),o.current=[])})),null==i||i(e,t,a)}),[n,i]);return Yu.createElement(oE.Provider,{value:a},t)};const fE=dE;var hE=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],pE=void 0;function vE(e,t){var n=e.prefixCls,r=e.invalidate,o=e.item,i=e.renderItem,a=e.responsive,l=e.responsiveDisabled,u=e.registerSize,c=e.itemKey,s=e.className,d=e.style,f=e.children,h=e.display,p=e.order,v=e.component,m=void 0===v?"div":v,g=(0,ak.A)(e,hE),b=a&&!h;function y(e){u(c,e)}Yu.useEffect((function(){return function(){y(null)}}),[]);var w,A=i&&o!==pE?i(o):f;r||(w={opacity:b?0:1,height:b?0:pE,overflowY:b?"hidden":pE,order:a?p:pE,pointerEvents:b?"none":pE,position:b?"absolute":pE});var k={};b&&(k["aria-hidden"]=!0);var _=Yu.createElement(m,(0,ek.A)({className:nk()(!r&&n,s),style:(0,ok.A)((0,ok.A)({},w),d)},k,g,{ref:t}),A);return a&&(_=Yu.createElement(fE,{onResize:function(e){y(e.offsetWidth)},disabled:l},_)),_}var mE=Yu.forwardRef(vE);mE.displayName="Item";const gE=mE;var bE=o(4695);function yE(e,t){var n=Yu.useState(t),r=(0,tn.A)(n,2),o=r[0],i=r[1];return[o,(0,bE.A)((function(t){e((function(){i(t)}))}))]}var wE=Gu().createContext(null),AE=["component"],kE=["className"],_E=["className"],CE=function(e,t){var n=Yu.useContext(wE);if(!n){var r=e.component,o=void 0===r?"div":r,i=(0,ak.A)(e,AE);return Yu.createElement(o,(0,ek.A)({},i,{ref:t}))}var a=n.className,l=(0,ak.A)(n,kE),u=e.className,c=(0,ak.A)(e,_E);return Yu.createElement(wE.Provider,{value:null},Yu.createElement(gE,(0,ek.A)({ref:t,className:nk()(a,u)},l,c)))},NE=Yu.forwardRef(CE);NE.displayName="RawItem";const OE=NE;var xE=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],EE="responsive",DE="invalidate";function PE(e){return"+ ".concat(e.length," ...")}function RE(e,t){var n,r=e.prefixCls,o=void 0===r?"rc-overflow":r,i=e.data,a=void 0===i?[]:i,l=e.renderItem,u=e.renderRawItem,c=e.itemKey,s=e.itemWidth,d=void 0===s?10:s,f=e.ssr,h=e.style,p=e.className,v=e.maxCount,m=e.renderRest,g=e.renderRawRest,b=e.suffix,y=e.component,w=void 0===y?"div":y,A=e.itemComponent,k=e.onVisibleChange,_=(0,ak.A)(e,xE),C="full"===f,N=(n=Yu.useRef(null),function(e){n.current||(n.current=[],function(e){if("undefined"==typeof MessageChannel)(0,BC.A)(e);else{var t=new MessageChannel;t.port1.onmessage=function(){return e()},t.port2.postMessage(void 0)}}((function(){(0,Yl.unstable_batchedUpdates)((function(){n.current.forEach((function(e){e()})),n.current=null}))}))),n.current.push(e)}),O=yE(N,null),x=(0,tn.A)(O,2),E=x[0],D=x[1],P=E||0,R=yE(N,new Map),S=(0,tn.A)(R,2),T=S[0],j=S[1],I=yE(N,0),B=(0,tn.A)(I,2),M=B[0],F=B[1],L=yE(N,0),U=(0,tn.A)(L,2),V=U[0],H=U[1],z=yE(N,0),W=(0,tn.A)(z,2),q=W[0],$=W[1],K=(0,Yu.useState)(null),Y=(0,tn.A)(K,2),G=Y[0],J=Y[1],X=(0,Yu.useState)(null),Q=(0,tn.A)(X,2),Z=Q[0],ee=Q[1],te=Yu.useMemo((function(){return null===Z&&C?Number.MAX_SAFE_INTEGER:Z||0}),[Z,E]),ne=(0,Yu.useState)(!1),re=(0,tn.A)(ne,2),oe=re[0],ie=re[1],ae="".concat(o,"-item"),le=Math.max(M,V),ue=v===EE,ce=a.length&&ue,se=v===DE,de=ce||"number"==typeof v&&a.length>v,fe=(0,Yu.useMemo)((function(){var e=a;return ce?e=null===E&&C?a:a.slice(0,Math.min(a.length,P/d)):"number"==typeof v&&(e=a.slice(0,v)),e}),[a,d,E,v,ce]),he=(0,Yu.useMemo)((function(){return ce?a.slice(te+1):a.slice(fe.length)}),[a,fe,ce,te]),pe=(0,Yu.useCallback)((function(e,t){var n;return"function"==typeof c?c(e):null!==(n=c&&(null==e?void 0:e[c]))&&void 0!==n?n:t}),[c]),ve=(0,Yu.useCallback)(l||function(e){return e},[l]);function me(e,t,n){(Z!==e||void 0!==t&&t!==G)&&(ee(e),n||(ie(e<a.length-1),null==k||k(e)),void 0!==t&&J(t))}function ge(e,t){j((function(n){var r=new Map(n);return null===t?r.delete(e):r.set(e,t),r}))}function be(e){return T.get(pe(fe[e],e))}(0,QN.A)((function(){if(P&&"number"==typeof le&&fe){var e=q,t=fe.length,n=t-1;if(!t)return void me(0,null);for(var r=0;r<t;r+=1){var o=be(r);if(C&&(o=o||0),void 0===o){me(r-1,void 0,!0);break}if(e+=o,0===n&&e<=P||r===n-1&&e+be(n)<=P){me(n,null);break}if(e+le>P){me(r-1,e-o-q+V);break}}b&&be(0)+q>P&&J(null)}}),[P,T,V,q,pe,fe]);var ye=oe&&!!he.length,we={};null!==G&&ce&&(we={position:"absolute",left:G,top:0});var Ae,ke={prefixCls:ae,responsive:ce,component:A,invalidate:se},_e=u?function(e,t){var n=pe(e,t);return Yu.createElement(wE.Provider,{key:n,value:(0,ok.A)((0,ok.A)({},ke),{},{order:t,item:e,itemKey:n,registerSize:ge,display:t<=te})},u(e,t))}:function(e,t){var n=pe(e,t);return Yu.createElement(gE,(0,ek.A)({},ke,{order:t,key:n,item:e,renderItem:ve,itemKey:n,registerSize:ge,display:t<=te}))},Ce={order:ye?te:Number.MAX_SAFE_INTEGER,className:"".concat(ae,"-rest"),registerSize:function(e,t){H(t),F(V)},display:ye};if(g)g&&(Ae=Yu.createElement(wE.Provider,{value:(0,ok.A)((0,ok.A)({},ke),Ce)},g(he)));else{var Ne=m||PE;Ae=Yu.createElement(gE,(0,ek.A)({},ke,Ce),"function"==typeof Ne?Ne(he):Ne)}var Oe=Yu.createElement(w,(0,ek.A)({className:nk()(!se&&o,p),style:h,ref:t},_),fe.map(_e),de?Ae:null,b&&Yu.createElement(gE,(0,ek.A)({},ke,{responsive:ue,responsiveDisabled:!ce,order:te,className:"".concat(ae,"-suffix"),registerSize:function(e,t){$(t)},display:!0,style:we}),b));return ue&&(Oe=Yu.createElement(fE,{onResize:function(e,t){D(t.clientWidth)},disabled:!ce},Oe)),Oe}var SE=Yu.forwardRef(RE);SE.displayName="Overflow",SE.Item=OE,SE.RESPONSIVE=EE,SE.INVALIDATE=DE;const TE=SE;var jE=o(1145),IE=["children","locked"],BE=Yu.createContext(null);function ME(e){var t=e.children,n=e.locked,r=(0,ak.A)(e,IE),o=Yu.useContext(BE),i=(0,l_.A)((function(){return e=o,t=r,n=(0,ok.A)({},e),Object.keys(t).forEach((function(e){var r=t[e];void 0!==r&&(n[e]=r)})),n;var e,t,n}),[o,r],(function(e,t){return!(n||e[0]===t[0]&&nE()(e[1],t[1]))}));return Yu.createElement(BE.Provider,{value:i},t)}function FE(e,t,n,r){var o=Yu.useContext(BE),i=o.activeKey,a=o.onActive,l=o.onInactive,u={active:i===e};return t||(u.onMouseEnter=function(t){null==n||n({key:e,domEvent:t}),a(e)},u.onMouseLeave=function(t){null==r||r({key:e,domEvent:t}),l(e)}),u}var LE=["item"];function UE(e){var t=e.item,n=(0,ak.A)(e,LE);return Object.defineProperty(n,"item",{get:function(){return(0,ck.Ay)(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),t}}),n}function VE(e){var t=e.icon,n=e.props,r=e.children;return("function"==typeof t?Yu.createElement(t,(0,ok.A)({},n)):t)||r||null}function HE(e){var t=Yu.useContext(BE),n=t.mode,r=t.rtl,o=t.inlineIndent;return"inline"!==n?null:r?{paddingRight:e*o}:{paddingLeft:e*o}}var zE=[],WE=Yu.createContext(null);function qE(){return Yu.useContext(WE)}var $E=Yu.createContext(zE);function KE(e){var t=Yu.useContext($E);return Yu.useMemo((function(){return void 0!==e?[].concat((0,ln.A)(t),[e]):t}),[t,e])}var YE=Yu.createContext(null),GE=Yu.createContext(null);function JE(e,t){return void 0===e?null:"".concat(e,"-").concat(t)}function XE(e){return JE(Yu.useContext(GE),e)}var QE=["title","attribute","elementRef"],ZE=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],eD=["active"],tD=function(e){(0,Xe.A)(n,e);var t=(0,Wk.A)(n);function n(){return(0,Ke.A)(this,n),t.apply(this,arguments)}return(0,$e.A)(n,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.attribute,r=e.elementRef,o=(0,ak.A)(e,QE),i=(0,tx.A)(o,["eventKey"]);return(0,ck.Ay)(!n,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),Yu.createElement(TE.Item,(0,ek.A)({},n,{title:"string"==typeof t?t:void 0},i,{ref:r}))}}]),n}(Yu.Component),nD=function(e){var t,n=e.style,r=e.className,o=e.eventKey,i=(e.warnKey,e.disabled),a=e.itemIcon,l=e.children,u=e.role,c=e.onMouseEnter,s=e.onMouseLeave,d=e.onClick,f=e.onKeyDown,h=e.onFocus,p=(0,ak.A)(e,ZE),v=XE(o),m=Yu.useContext(BE),g=m.prefixCls,b=m.onItemClick,y=m.disabled,w=m.overflowDisabled,A=m.itemIcon,k=m.selectedKeys,_=m.onActive,C="".concat(g,"-item"),N=Yu.useRef(),O=Yu.useRef(),x=y||i,E=KE(o),D=function(e){return{key:o,keyPath:(0,ln.A)(E).reverse(),item:N.current,domEvent:e}},P=a||A,R=FE(o,x,c,s),S=R.active,T=(0,ak.A)(R,eD),j=k.includes(o),I=HE(E.length),B={};return"option"===e.role&&(B["aria-selected"]=j),Yu.createElement(tD,(0,ek.A)({ref:N,elementRef:O,role:null===u?"none":u||"menuitem",tabIndex:i?null:-1,"data-menu-id":w&&v?null:v},p,T,B,{component:"li","aria-disabled":i,style:(0,ok.A)((0,ok.A)({},I),n),className:nk()(C,(t={},(0,Ha.A)(t,"".concat(C,"-active"),S),(0,Ha.A)(t,"".concat(C,"-selected"),j),(0,Ha.A)(t,"".concat(C,"-disabled"),x),t),r),onClick:function(e){if(!x){var t=D(e);null==d||d(UE(t)),b(t)}},onKeyDown:function(e){if(null==f||f(e),e.which===jE.A.ENTER){var t=D(e);null==d||d(UE(t)),b(t)}},onFocus:function(e){_(o),null==h||h(e)}}),l,Yu.createElement(VE,{props:(0,ok.A)((0,ok.A)({},e),{},{isSelected:j}),icon:P}))};const rD=function(e){var t=e.eventKey,n=qE(),r=KE(t);return Yu.useEffect((function(){if(n)return n.registerPath(t,r),function(){n.unregisterPath(t,r)}}),[r]),n?null:Yu.createElement(nD,e)};function oD(e,t){return(0,rE.A)(e).map((function(e,n){if(Yu.isValidElement(e)){var r,o,i=e.key,a=null!==(r=null===(o=e.props)||void 0===o?void 0:o.eventKey)&&void 0!==r?r:i;null==a&&(a="tmp_key-".concat([].concat((0,ln.A)(t),[n]).join("-")));var l={key:a,eventKey:a};return Yu.cloneElement(e,l)}return e}))}function iD(e){var t=Yu.useRef(e);t.current=e;var n=Yu.useCallback((function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return null===(e=t.current)||void 0===e?void 0:e.call.apply(e,[t].concat(r))}),[]);return e?n:void 0}var aD=["className","children"],lD=function(e,t){var n=e.className,r=e.children,o=(0,ak.A)(e,aD),i=Yu.useContext(BE),a=i.prefixCls,l=i.mode,u=i.rtl;return Yu.createElement("ul",(0,ek.A)({className:nk()(a,u&&"".concat(a,"-rtl"),"".concat(a,"-sub"),"".concat(a,"-").concat("inline"===l?"inline":"vertical"),n)},o,{"data-menu-list":!0,ref:t}),r)},uD=Yu.forwardRef(lD);uD.displayName="SubMenuList";const cD=uD;var sD={adjustX:1,adjustY:1},dD={topLeft:{points:["bl","tl"],overflow:sD,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:sD,offset:[0,7]},leftTop:{points:["tr","tl"],overflow:sD,offset:[-4,0]},rightTop:{points:["tl","tr"],overflow:sD,offset:[4,0]}},fD={topLeft:{points:["bl","tl"],overflow:sD,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:sD,offset:[0,7]},rightTop:{points:["tr","tl"],overflow:sD,offset:[-4,0]},leftTop:{points:["tl","tr"],overflow:sD,offset:[4,0]}};function hD(e,t,n){return t||(n?n[e]||n.other:void 0)}var pD={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function vD(e){var t=e.prefixCls,n=e.visible,r=e.children,o=e.popup,i=e.popupClassName,a=e.popupOffset,l=e.disabled,u=e.mode,c=e.onVisibleChange,s=Yu.useContext(BE),d=s.getPopupContainer,f=s.rtl,h=s.subMenuOpenDelay,p=s.subMenuCloseDelay,v=s.builtinPlacements,m=s.triggerSubMenuAction,g=s.forceSubMenuRender,b=s.motion,y=s.defaultMotions,w=Yu.useState(!1),A=(0,tn.A)(w,2),k=A[0],_=A[1],C=f?(0,ok.A)((0,ok.A)({},fD),v):(0,ok.A)((0,ok.A)({},dD),v),N=pD[u],O=hD(u,b,y),x=(0,ok.A)((0,ok.A)({},O),{},{leavedClassName:"".concat(t,"-hidden"),removeOnLeave:!1,motionAppear:!0}),E=Yu.useRef();return Yu.useEffect((function(){return E.current=(0,BC.A)((function(){_(n)})),function(){BC.A.cancel(E.current)}}),[n]),Yu.createElement(UO,{prefixCls:t,popupClassName:nk()("".concat(t,"-popup"),(0,Ha.A)({},"".concat(t,"-rtl"),f),i),stretch:"horizontal"===u?"minWidth":null,getPopupContainer:d,builtinPlacements:C,popupPlacement:N,popupVisible:k,popup:o,popupAlign:a&&{offset:a},action:l?[]:[m],mouseEnterDelay:h,mouseLeaveDelay:p,onPopupVisibleChange:c,forceRender:g,popupMotion:x},r)}function mD(e){var t=e.id,n=e.open,r=e.keyPath,o=e.children,i="inline",a=Yu.useContext(BE),l=a.prefixCls,u=a.forceSubMenuRender,c=a.motion,s=a.defaultMotions,d=a.mode,f=Yu.useRef(!1);f.current=d===i;var h=Yu.useState(!f.current),p=(0,tn.A)(h,2),v=p[0],m=p[1],g=!!f.current&&n;Yu.useEffect((function(){f.current&&m(!1)}),[d]);var b=(0,ok.A)({},hD(i,c,s));r.length>1&&(b.motionAppear=!1);var y=b.onVisibleChanged;return b.onVisibleChanged=function(e){return f.current||e||m(!0),null==y?void 0:y(e)},v?null:Yu.createElement(ME,{mode:i,locked:!f.current},Yu.createElement(qC.Ay,(0,ek.A)({visible:g},b,{forceRender:u,removeOnLeave:!1,leavedClassName:"".concat(l,"-hidden")}),(function(e){var n=e.className,r=e.style;return Yu.createElement(cD,{id:t,className:n,style:r},o)})))}var gD=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],bD=["active"],yD=function(e){var t,n=e.style,r=e.className,o=e.title,i=e.eventKey,a=(e.warnKey,e.disabled),l=e.internalPopupClose,u=e.children,c=e.itemIcon,s=e.expandIcon,d=e.popupClassName,f=e.popupOffset,h=e.onClick,p=e.onMouseEnter,v=e.onMouseLeave,m=e.onTitleClick,g=e.onTitleMouseEnter,b=e.onTitleMouseLeave,y=(0,ak.A)(e,gD),w=XE(i),A=Yu.useContext(BE),k=A.prefixCls,_=A.mode,C=A.openKeys,N=A.disabled,O=A.overflowDisabled,x=A.activeKey,E=A.selectedKeys,D=A.itemIcon,P=A.expandIcon,R=A.onItemClick,S=A.onOpenChange,T=A.onActive,j=Yu.useContext(YE).isSubPathKey,I=KE(),B="".concat(k,"-submenu"),M=N||a,F=Yu.useRef(),L=Yu.useRef(),U=c||D,V=s||P,H=C.includes(i),z=!O&&H,W=j(E,i),q=FE(i,M,g,b),$=q.active,K=(0,ak.A)(q,bD),Y=Yu.useState(!1),G=(0,tn.A)(Y,2),J=G[0],X=G[1],Q=function(e){M||X(e)},Z=Yu.useMemo((function(){return $||"inline"!==_&&(J||j([x],i))}),[_,$,x,J,i,j]),ee=HE(I.length),te=iD((function(e){null==h||h(UE(e)),R(e)})),ne=w&&"".concat(w,"-popup"),re=Yu.createElement("div",(0,ek.A)({role:"menuitem",style:ee,className:"".concat(B,"-title"),tabIndex:M?null:-1,ref:F,title:"string"==typeof o?o:null,"data-menu-id":O&&w?null:w,"aria-expanded":z,"aria-haspopup":!0,"aria-controls":ne,"aria-disabled":M,onClick:function(e){M||(null==m||m({key:i,domEvent:e}),"inline"===_&&S(i,!H))},onFocus:function(){T(i)}},K),o,Yu.createElement(VE,{icon:"horizontal"!==_?V:null,props:(0,ok.A)((0,ok.A)({},e),{},{isOpen:z,isSubMenu:!0})},Yu.createElement("i",{className:"".concat(B,"-arrow")}))),oe=Yu.useRef(_);if("inline"!==_&&(oe.current=I.length>1?"vertical":_),!O){var ie=oe.current;re=Yu.createElement(vD,{mode:ie,prefixCls:B,visible:!l&&z&&"inline"!==_,popupClassName:d,popupOffset:f,popup:Yu.createElement(ME,{mode:"horizontal"===ie?"vertical":ie},Yu.createElement(cD,{id:ne,ref:L},u)),disabled:M,onVisibleChange:function(e){"inline"!==_&&S(i,e)}},re)}return Yu.createElement(ME,{onItemClick:te,mode:"horizontal"===_?"vertical":_,itemIcon:U,expandIcon:V},Yu.createElement(TE.Item,(0,ek.A)({role:"none"},y,{component:"li",style:n,className:nk()(B,"".concat(B,"-").concat(_),r,(t={},(0,Ha.A)(t,"".concat(B,"-open"),z),(0,Ha.A)(t,"".concat(B,"-active"),Z),(0,Ha.A)(t,"".concat(B,"-selected"),W),(0,Ha.A)(t,"".concat(B,"-disabled"),M),t)),onMouseEnter:function(e){Q(!0),null==p||p({key:i,domEvent:e})},onMouseLeave:function(e){Q(!1),null==v||v({key:i,domEvent:e})}}),re,!O&&Yu.createElement(mD,{id:ne,open:z,keyPath:I},u)))};function wD(e){var t,n=e.eventKey,r=e.children,o=KE(n),i=oD(r,o),a=qE();return Yu.useEffect((function(){if(a)return a.registerPath(n,o),function(){a.unregisterPath(n,o)}}),[o]),t=a?i:Yu.createElement(yD,e,i),Yu.createElement($E.Provider,{value:o},t)}function AD(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(XN(e)){var n=e.nodeName.toLowerCase(),r=["input","select","textarea","button"].includes(n)||e.isContentEditable||"a"===n&&!!e.getAttribute("href"),o=e.getAttribute("tabindex"),i=Number(o),a=null;return o&&!Number.isNaN(i)?a=i:r&&null===a&&(a=0),r&&e.disabled&&(a=null),null!==a&&(a>=0||t&&a<0)}return!1}var kD=jE.A.LEFT,_D=jE.A.RIGHT,CD=jE.A.UP,ND=jE.A.DOWN,OD=jE.A.ENTER,xD=jE.A.ESC,ED=[CD,ND,kD,_D];function DD(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!e)return null;var o=function(e,t){return function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,ln.A)(e.querySelectorAll("*")).filter((function(e){return AD(e,t)}));return AD(e,t)&&n.unshift(e),n}(e,!0).filter((function(e){return t.has(e)}))}(e,t),i=o.length,a=o.findIndex((function(e){return n===e}));return r<0?-1===a?a=i-1:a-=1:r>0&&(a+=1),o[a=(a+i)%i]}var PD=Math.random().toFixed(5).toString().slice(2),RD=0,SD="__RC_UTIL_PATH_SPLIT__",TD=function(e){return e.join(SD)},jD="rc-menu-more";var ID=["prefixCls","style","className","tabIndex","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName"],BD=[];var MD=["className","title","eventKey","children"],FD=["children"],LD=function(e){var t=e.className,n=e.title,r=(e.eventKey,e.children),o=(0,ak.A)(e,MD),i=Yu.useContext(BE).prefixCls,a="".concat(i,"-item-group");return Yu.createElement("li",(0,ek.A)({},o,{onClick:function(e){return e.stopPropagation()},className:nk()(a,t)}),Yu.createElement("div",{className:"".concat(a,"-title"),title:"string"==typeof n?n:void 0},n),Yu.createElement("ul",{className:"".concat(a,"-list")},r))};function UD(e){var t=e.children,n=(0,ak.A)(e,FD),r=oD(t,KE(n.eventKey));return qE()?r:Yu.createElement(LD,(0,tx.A)(n,["warnKey"]),r)}function VD(e){var t=e.className,n=e.style,r=Yu.useContext(BE).prefixCls;return qE()?null:Yu.createElement("li",{className:nk()("".concat(r,"-item-divider"),t),style:n})}var HD=function(e){var t,n,r=e.prefixCls,o=void 0===r?"rc-menu":r,i=e.style,a=e.className,l=e.tabIndex,u=void 0===l?0:l,c=e.children,s=e.direction,d=e.id,f=e.mode,h=void 0===f?"vertical":f,p=e.inlineCollapsed,v=e.disabled,m=e.disabledOverflow,g=e.subMenuOpenDelay,b=void 0===g?.1:g,y=e.subMenuCloseDelay,w=void 0===y?.1:y,A=e.forceSubMenuRender,k=e.defaultOpenKeys,_=e.openKeys,C=e.activeKey,N=e.defaultActiveFirst,O=e.selectable,x=void 0===O||O,E=e.multiple,D=void 0!==E&&E,P=e.defaultSelectedKeys,R=e.selectedKeys,S=e.onSelect,T=e.onDeselect,j=e.inlineIndent,I=void 0===j?24:j,B=e.motion,M=e.defaultMotions,F=e.triggerSubMenuAction,L=void 0===F?"hover":F,U=e.builtinPlacements,V=e.itemIcon,H=e.expandIcon,z=e.overflowedIndicator,W=void 0===z?"...":z,q=e.overflowedIndicatorPopupClassName,$=e.getPopupContainer,K=e.onClick,Y=e.onOpenChange,G=e.onKeyDown,J=(e.openAnimation,e.openTransitionName,(0,ak.A)(e,ID)),X=oD(c,BD),Q=Yu.useState(!1),Z=(0,tn.A)(Q,2),ee=Z[0],te=Z[1],ne=Yu.useRef(),re=function(e){var t=(0,Ix.A)(e,{value:e}),n=(0,tn.A)(t,2),r=n[0],o=n[1];return Yu.useEffect((function(){RD+=1;var e="".concat(PD,"-").concat(RD);o("rc-menu-uuid-".concat(e))}),[]),r}(d),oe="rtl"===s,ie=Yu.useMemo((function(){return"inline"!==h&&"vertical"!==h||!p?[h,!1]:["vertical",p]}),[h,p]),ae=(0,tn.A)(ie,2),le=ae[0],ue=ae[1],ce=Yu.useState(0),se=(0,tn.A)(ce,2),de=se[0],fe=se[1],he=de>=X.length-1||"horizontal"!==le||m,pe=(0,Ix.A)(k,{value:_,postState:function(e){return e||BD}}),ve=(0,tn.A)(pe,2),me=ve[0],ge=ve[1],be=function(e){ge(e),null==Y||Y(e)},ye=Yu.useState(me),we=(0,tn.A)(ye,2),Ae=we[0],ke=we[1],_e="inline"===le,Ce=Yu.useRef(!1);Yu.useEffect((function(){_e&&ke(me)}),[me]),Yu.useEffect((function(){Ce.current?_e?ge(Ae):be(BD):Ce.current=!0}),[_e]);var Ne=function(){var e=Yu.useState({}),t=(0,tn.A)(e,2)[1],n=(0,Yu.useRef)(new Map),r=(0,Yu.useRef)(new Map),o=Yu.useState([]),i=(0,tn.A)(o,2),a=i[0],l=i[1],u=(0,Yu.useRef)(0),c=(0,Yu.useRef)(!1),s=(0,Yu.useCallback)((function(e,o){var i=TD(o);r.current.set(i,e),n.current.set(e,i),u.current+=1;var a,l=u.current;a=function(){l===u.current&&(c.current||t({}))},Promise.resolve().then(a)}),[]),d=(0,Yu.useCallback)((function(e,t){var o=TD(t);r.current.delete(o),n.current.delete(e)}),[]),f=(0,Yu.useCallback)((function(e){l(e)}),[]),h=(0,Yu.useCallback)((function(e,t){var r=(n.current.get(e)||"").split(SD);return t&&a.includes(r[0])&&r.unshift(jD),r}),[a]),p=(0,Yu.useCallback)((function(e,t){return e.some((function(e){return h(e,!0).includes(t)}))}),[h]),v=(0,Yu.useCallback)((function(e){var t="".concat(n.current.get(e)).concat(SD),o=new Set;return(0,ln.A)(r.current.keys()).forEach((function(e){e.startsWith(t)&&o.add(r.current.get(e))})),o}),[]);return Yu.useEffect((function(){return function(){c.current=!0}}),[]),{registerPath:s,unregisterPath:d,refreshOverflowKeys:f,isSubPathKey:p,getKeyPath:h,getKeys:function(){var e=(0,ln.A)(n.current.keys());return a.length&&e.push(jD),e},getSubPathKeys:v}}(),Oe=Ne.registerPath,xe=Ne.unregisterPath,Ee=Ne.refreshOverflowKeys,De=Ne.isSubPathKey,Pe=Ne.getKeyPath,Re=Ne.getKeys,Se=Ne.getSubPathKeys,Te=Yu.useMemo((function(){return{registerPath:Oe,unregisterPath:xe}}),[Oe,xe]),je=Yu.useMemo((function(){return{isSubPathKey:De}}),[De]);Yu.useEffect((function(){Ee(he?BD:X.slice(de+1).map((function(e){return e.key})))}),[de,he]);var Ie=(0,Ix.A)(C||N&&(null===(t=X[0])||void 0===t?void 0:t.key),{value:C}),Be=(0,tn.A)(Ie,2),Me=Be[0],Fe=Be[1],Le=iD((function(e){Fe(e)})),Ue=iD((function(){Fe(void 0)})),Ve=(0,Ix.A)(P||[],{value:R,postState:function(e){return Array.isArray(e)?e:null==e?BD:[e]}}),He=(0,tn.A)(Ve,2),ze=He[0],We=He[1],qe=iD((function(e){null==K||K(UE(e)),function(e){if(x){var t,n=e.key,r=ze.includes(n);t=D?r?ze.filter((function(e){return e!==n})):[].concat((0,ln.A)(ze),[n]):[n],We(t);var o=(0,ok.A)((0,ok.A)({},e),{},{selectedKeys:t});r?null==T||T(o):null==S||S(o)}!D&&me.length&&"inline"!==le&&be(BD)}(e)})),$e=iD((function(e,t){var n=me.filter((function(t){return t!==e}));if(t)n.push(e);else if("inline"!==le){var r=Se(e);n=n.filter((function(e){return!r.has(e)}))}nE()(me,n)||be(n)})),Ke=iD($),Ye=function(e,t,n,r,o,i,a,l,u,c){var s=Yu.useRef(),d=Yu.useRef();d.current=t;var f=function(){BC.A.cancel(s.current)};return Yu.useEffect((function(){return function(){f()}}),[]),function(h){var p=h.which;if([].concat(ED,[OD,xD]).includes(p)){var v,m,g,b=function(){return v=new Set,m=new Map,g=new Map,i().forEach((function(e){var t=document.querySelector("[data-menu-id='".concat(JE(r,e),"']"));t&&(v.add(t),g.set(t,e),m.set(e,t))})),v};b();var y=function(e,t){for(var n=e||document.activeElement;n;){if(t.has(n))return n;n=n.parentElement}return null}(m.get(t),v),w=g.get(y),A=function(e,t,n,r){var o,i,a,l,u="prev",c="next",s="children",d="parent";if("inline"===e&&r===OD)return{inlineTrigger:!0};var f=(o={},(0,Ha.A)(o,CD,u),(0,Ha.A)(o,ND,c),o),h=(i={},(0,Ha.A)(i,kD,n?c:u),(0,Ha.A)(i,_D,n?u:c),(0,Ha.A)(i,ND,s),(0,Ha.A)(i,OD,s),i),p=(a={},(0,Ha.A)(a,CD,u),(0,Ha.A)(a,ND,c),(0,Ha.A)(a,OD,s),(0,Ha.A)(a,xD,d),(0,Ha.A)(a,kD,n?s:d),(0,Ha.A)(a,_D,n?d:s),a);switch(null===(l={inline:f,horizontal:h,vertical:p,inlineSub:f,horizontalSub:p,verticalSub:p}["".concat(e).concat(t?"":"Sub")])||void 0===l?void 0:l[r]){case u:return{offset:-1,sibling:!0};case c:return{offset:1,sibling:!0};case d:return{offset:-1,sibling:!1};case s:return{offset:1,sibling:!1};default:return null}}(e,1===a(w,!0).length,n,p);if(!A)return;ED.includes(p)&&h.preventDefault();var k=function(e){if(e){var t=e,n=e.querySelector("a");(null==n?void 0:n.getAttribute("href"))&&(t=n);var r=g.get(e);l(r),f(),s.current=(0,BC.A)((function(){d.current===r&&t.focus()}))}};if(A.sibling||!y){var _=DD(y&&"inline"!==e?function(e){for(var t=e;t;){if(t.getAttribute("data-menu-list"))return t;t=t.parentElement}return null}(y):o.current,v,y,A.offset);k(_)}else if(A.inlineTrigger)u(w);else if(A.offset>0)u(w,!0),f(),s.current=(0,BC.A)((function(){b();var e=y.getAttribute("aria-controls"),t=DD(document.getElementById(e),v);k(t)}),5);else if(A.offset<0){var C=a(w,!0),N=C[C.length-2],O=m.get(N);u(N,!1),k(O)}}null==c||c(h)}}(le,Me,oe,re,ne,Re,Pe,Fe,(function(e,t){var n=null!=t?t:!me.includes(e);$e(e,n)}),G);Yu.useEffect((function(){te(!0)}),[]);var Ge="horizontal"!==le||m?X:X.map((function(e,t){return Yu.createElement(ME,{key:e.key,overflowDisabled:t>de},e)})),Je=Yu.createElement(TE,(0,ek.A)({id:d,ref:ne,prefixCls:"".concat(o,"-overflow"),component:"ul",itemComponent:rD,className:nk()(o,"".concat(o,"-root"),"".concat(o,"-").concat(le),a,(n={},(0,Ha.A)(n,"".concat(o,"-inline-collapsed"),ue),(0,Ha.A)(n,"".concat(o,"-rtl"),oe),n)),dir:s,style:i,role:"menu",tabIndex:u,data:Ge,renderRawItem:function(e){return e},renderRawRest:function(e){var t=e.length,n=t?X.slice(-t):null;return Yu.createElement(wD,{eventKey:jD,title:W,disabled:he,internalPopupClose:0===t,popupClassName:q},n)},maxCount:"horizontal"!==le||m?TE.INVALIDATE:TE.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(e){fe(e)},onKeyDown:Ye},J));return Yu.createElement(GE.Provider,{value:re},Yu.createElement(ME,{prefixCls:o,mode:le,openKeys:me,rtl:oe,disabled:v,motion:ee?B:null,defaultMotions:ee?M:null,activeKey:Me,onActive:Le,onInactive:Ue,selectedKeys:ze,inlineIndent:I,subMenuOpenDelay:b,subMenuCloseDelay:w,forceSubMenuRender:A,builtinPlacements:U,triggerSubMenuAction:L,getPopupContainer:Ke,itemIcon:V,expandIcon:H,onItemClick:qe,onOpenChange:$e},Yu.createElement(YE.Provider,{value:je},Je),Yu.createElement("div",{style:{display:"none"},"aria-hidden":!0},Yu.createElement(WE.Provider,{value:Te},X))))};HD.Item=rD,HD.SubMenu=wD,HD.ItemGroup=UD,HD.Divider=VD;const zD=HD,WD=(0,Yu.createContext)({prefixCls:"",firstLevel:!0,inlineCollapsed:!1}),qD={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"bars",theme:"outlined"};var $D=function(e,t){return Yu.createElement(Ek,(0,ok.A)((0,ok.A)({},e),{},{ref:t,icon:qD}))};const KD=Yu.forwardRef($D),YD={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"};var GD=function(e,t){return Yu.createElement(Ek,(0,ok.A)((0,ok.A)({},e),{},{ref:t,icon:YD}))};const JD=Yu.forwardRef(GD);var XD=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},QD=Yu.createContext({siderHook:{addSider:function(){return null},removeSider:function(){return null}}});function ZD(e){var t=e.suffixCls,n=e.tagName,r=e.displayName;return function(e){var o=function(r){var o=Yu.useContext(o_).getPrefixCls,i=r.prefixCls,a=o(t,i);return Yu.createElement(e,(0,ek.A)({prefixCls:a,tagName:n},r))};return o.displayName=r,o}}var eP=function(e){var t=e.prefixCls,n=e.className,r=e.children,o=e.tagName,i=XD(e,["prefixCls","className","children","tagName"]),a=nk()(t,n);return Yu.createElement(o,(0,ek.A)({className:a},i),r)};ZD({suffixCls:"layout",tagName:"section",displayName:"Layout"})((function(e){var t,n=Yu.useContext(o_).direction,r=Yu.useState([]),o=(0,tn.A)(r,2),i=o[0],a=o[1],l=e.prefixCls,u=e.className,c=e.children,s=e.hasSider,d=e.tagName,f=XD(e,["prefixCls","className","children","hasSider","tagName"]),h=nk()(l,(t={},(0,Ha.A)(t,"".concat(l,"-has-sider"),"boolean"==typeof s?s:i.length>0),(0,Ha.A)(t,"".concat(l,"-rtl"),"rtl"===n),t),u);return Yu.createElement(QD.Provider,{value:{siderHook:{addSider:function(e){a((function(t){return[].concat((0,ln.A)(t),[e])}))},removeSider:function(e){a((function(t){return t.filter((function(t){return t!==e}))}))}}}},Yu.createElement(d,(0,ek.A)({className:h},f),c))})),ZD({suffixCls:"layout-header",tagName:"header",displayName:"Header"})(eP),ZD({suffixCls:"layout-footer",tagName:"footer",displayName:"Footer"})(eP),ZD({suffixCls:"layout-content",tagName:"main",displayName:"Content"})(eP);var tP={xs:"479.98px",sm:"575.98px",md:"767.98px",lg:"991.98px",xl:"1199.98px",xxl:"1599.98px"},nP=Yu.createContext({}),rP=function(){var e=0;return function(){return e+=1,"".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").concat(e)}}(),oP=Yu.forwardRef((function(e,t){var n=e.prefixCls,r=e.className,o=e.trigger,i=e.children,a=e.defaultCollapsed,l=void 0!==a&&a,u=e.theme,c=void 0===u?"dark":u,s=e.style,d=void 0===s?{}:s,f=e.collapsible,h=void 0!==f&&f,p=e.reverseArrow,v=void 0!==p&&p,m=e.width,g=void 0===m?200:m,b=e.collapsedWidth,y=void 0===b?80:b,w=e.zeroWidthTriggerStyle,A=e.breakpoint,k=e.onCollapse,_=e.onBreakpoint,C=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["prefixCls","className","trigger","children","defaultCollapsed","theme","style","collapsible","reverseArrow","width","collapsedWidth","zeroWidthTriggerStyle","breakpoint","onCollapse","onBreakpoint"]),N=(0,Yu.useContext)(QD).siderHook,O=(0,Yu.useState)("collapsed"in C?C.collapsed:l),x=(0,tn.A)(O,2),E=x[0],D=x[1],P=(0,Yu.useState)(!1),R=(0,tn.A)(P,2),S=R[0],T=R[1];(0,Yu.useEffect)((function(){"collapsed"in C&&D(C.collapsed)}),[C.collapsed]);var j=function(e,t){"collapsed"in C||D(e),null==k||k(e,t)},I=(0,Yu.useRef)();I.current=function(e){T(e.matches),null==_||_(e.matches),E!==e.matches&&j(e.matches,"responsive")},(0,Yu.useEffect)((function(){function e(e){return I.current(e)}var t;if("undefined"!=typeof window){var n=window.matchMedia;if(n&&A&&A in tP){t=n("(max-width: ".concat(tP[A],")"));try{t.addEventListener("change",e)}catch(n){t.addListener(e)}e(t)}}return function(){try{null==t||t.removeEventListener("change",e)}catch(n){null==t||t.removeListener(e)}}}),[]),(0,Yu.useEffect)((function(){var e=rP("ant-sider-");return N.addSider(e),function(){return N.removeSider(e)}}),[]);var B,M,F,L,U,V,H,z,W,q,$,K=function(){j(!E,"clickTrigger")},Y=(0,Yu.useContext)(o_).getPrefixCls;return Yu.createElement(nP.Provider,{value:{siderCollapsed:E}},(M=Y("layout-sider",n),F=(0,tx.A)(C,["collapsed"]),$=L=E?y:g,U=!isNaN(parseFloat($))&&isFinite($)?"".concat(L,"px"):String(L),V=0===parseFloat(String(y||0))?Yu.createElement("span",{onClick:K,className:nk()("".concat(M,"-zero-width-trigger"),"".concat(M,"-zero-width-trigger-").concat(v?"right":"left")),style:w},o||Yu.createElement(KD,null)):null,H={expanded:v?Yu.createElement(XO,null):Yu.createElement(JD,null),collapsed:v?Yu.createElement(JD,null):Yu.createElement(XO,null)}[E?"collapsed":"expanded"],z=null!==o?V||Yu.createElement("div",{className:"".concat(M,"-trigger"),onClick:K,style:{width:U}},o||H):null,W=(0,ek.A)((0,ek.A)({},d),{flex:"0 0 ".concat(U),maxWidth:U,minWidth:U,width:U}),q=nk()(M,"".concat(M,"-").concat(c),(B={},(0,Ha.A)(B,"".concat(M,"-collapsed"),!!E),(0,Ha.A)(B,"".concat(M,"-has-trigger"),h&&null!==o&&!V),(0,Ha.A)(B,"".concat(M,"-below"),!!S),(0,Ha.A)(B,"".concat(M,"-zero-width"),0===parseFloat(U)),B),r),Yu.createElement("aside",(0,ek.A)({className:q},F,{style:W,ref:t}),Yu.createElement("div",{className:"".concat(M,"-children")},i),h||S&&V?z:null)))}));oP.displayName="Sider";var iP=function(e){(0,Xe.A)(n,e);var t=(0,Wk.A)(n);function n(){var e;return(0,Ke.A)(this,n),(e=t.apply(this,arguments)).renderItem=function(t){var n,r,o=t.siderCollapsed,i=e.context,a=i.prefixCls,l=i.firstLevel,u=i.inlineCollapsed,c=i.direction,s=e.props,d=s.className,f=s.children,h=e.props,p=h.title,v=h.icon,m=h.danger,g=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(h,["title","icon","danger"]),b=p;void 0===p?b=l?f:"":!1===p&&(b="");var y={title:b};o||u||(y.title=null,y.visible=!1);var w=(0,rE.A)(f).length;return Yu.createElement(Jx,(0,ek.A)({},y,{placement:"rtl"===c?"left":"right",overlayClassName:"".concat(a,"-inline-collapsed-tooltip")}),Yu.createElement(rD,(0,ek.A)({},g,{className:nk()((n={},(0,Ha.A)(n,"".concat(a,"-item-danger"),m),(0,Ha.A)(n,"".concat(a,"-item-only-child"),1===(v?w+1:w)),n),d),title:"string"==typeof p?p:void 0}),ux(v,{className:nk()(lx(v)?null===(r=v.props)||void 0===r?void 0:r.className:"","".concat(a,"-item-icon"))}),e.renderItemChildren(u)))},e}return(0,$e.A)(n,[{key:"renderItemChildren",value:function(e){var t=this.context,n=t.prefixCls,r=t.firstLevel,o=this.props,i=o.icon,a=o.children;return!i||lx(a)&&"span"===a.type?a&&e&&r&&"string"==typeof a?Yu.createElement("div",{className:"".concat(n,"-inline-collapsed-noicon")},a.charAt(0)):a:Yu.createElement("span",{className:"".concat(n,"-title-content")},a)}},{key:"render",value:function(){return Yu.createElement(nP.Consumer,null,this.renderItem)}}]),n}(Yu.Component);iP.contextType=WD;var aP=function(e){(0,Xe.A)(n,e);var t=(0,Wk.A)(n);function n(e){var r;return(0,Ke.A)(this,n),(r=t.call(this,e)).renderMenu=function(e){var t=e.getPopupContainer,n=e.getPrefixCls,o=e.direction,i=n(),a=r.props,l=a.prefixCls,u=a.className,c=a.theme,s=a.expandIcon,d=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(a,["prefixCls","className","theme","expandIcon"]),f=(0,tx.A)(d,["siderCollapsed","collapsedWidth"]),h=r.getInlineCollapsed(),p={horizontal:{motionName:"".concat(i,"-slide-up")},inline:Kx,other:{motionName:"".concat(i,"-zoom-big")}},v=n("menu",l),m=nk()("".concat(v,"-").concat(c),u);return Yu.createElement(WD.Provider,{value:{prefixCls:v,inlineCollapsed:h||!1,antdMenuTheme:c,direction:o,firstLevel:!0}},Yu.createElement(zD,(0,ek.A)({getPopupContainer:t},f,{inlineCollapsed:h,className:m,prefixCls:v,direction:o,defaultMotions:p,expandIcon:ux(s,{className:"".concat(v,"-submenu-expand-icon")})})))},u_(!("inlineCollapsed"in e&&"inline"!==e.mode),"Menu","`inlineCollapsed` should only be used when `mode` is inline."),u_(!(void 0!==e.siderCollapsed&&"inlineCollapsed"in e),"Menu","`inlineCollapsed` not control Menu under Sider. Should set `collapsed` on Sider instead."),r}return(0,$e.A)(n,[{key:"getInlineCollapsed",value:function(){var e=this.props,t=e.inlineCollapsed,n=e.siderCollapsed;return void 0!==n?n:t}},{key:"render",value:function(){return Yu.createElement(i_,null,this.renderMenu)}}]),n}(Yu.Component);aP.defaultProps={theme:"light"};var lP=function(e){(0,Xe.A)(n,e);var t=(0,Wk.A)(n);function n(){return(0,Ke.A)(this,n),t.apply(this,arguments)}return(0,$e.A)(n,[{key:"render",value:function(){var e=this;return Yu.createElement(nP.Consumer,null,(function(t){return Yu.createElement(aP,(0,ek.A)({},e.props,t))}))}}]),n}(Yu.Component);lP.Divider=VD,lP.Item=iP,lP.SubMenu=function(e){var t,n,r=e.popupClassName,o=e.icon,i=e.title,a=Yu.useContext(WD),l=a.prefixCls,u=a.inlineCollapsed,c=a.antdMenuTheme,s=KE();if(o){var d=lx(i)&&"span"===i.type;n=Yu.createElement(Yu.Fragment,null,ux(o,{className:nk()(lx(o)?null===(t=o.props)||void 0===t?void 0:t.className:"","".concat(l,"-item-icon"))}),d?i:Yu.createElement("span",{className:"".concat(l,"-title-content")},i))}else n=u&&!s.length&&i&&"string"==typeof i?Yu.createElement("div",{className:"".concat(l,"-inline-collapsed-noicon")},i.charAt(0)):i;return Yu.createElement(WD.Provider,{value:(0,ek.A)((0,ek.A)({},a),{firstLevel:!1})},Yu.createElement(wD,(0,ek.A)({},(0,tx.A)(e,["icon"]),{title:n,popupClassName:nk()(l,"".concat(l,"-").concat(c),r)})))},lP.ItemGroup=UD;const uP=lP,cP=uP,sP=function(e){var t=e.title,n=e.icon,r=e.menuItems,o=e.onSelect,i=e.toolTip,a=e.selectValue,l=e.index,u=e.name,c=e.dropdownComponentConfig,s=void 0===c?{}:c,d=e.tooltipPlacement;return Gu().createElement(Ex,Object.assign({overlay:Gu().createElement(cP,{className:"ne-card-toolbar-select-menu",selectedKeys:a,onClick:function(e){return o(e.key)},onMouseDown:function(e){return e.preventDefault()}},r.map((function(e){return Gu().createElement(cP.Item,{key:e.value+"",className:"ne-card-toolbar-select-menu-item"},Zx(e.tooltip,Gu().createElement("div",null,Gu().createElement("div",{className:"ne-card-toolbar-check-icon"},Gu().createElement(SC,{type:"check"})),Gu().createElement("div",{className:"ne-card-toolbar-select-item-content"},e.icon&&Gu().createElement(SC,{className:"ne-card-toolbar-select-item-icon",type:e.icon}),Gu().createElement("div",{className:"ne-card-toolbar-select-item-label"},e.label))),{placement:"right"}))}))),getPopupContainer:function(e){return e}},s),Zx(i,Gu().createElement("div",{className:"ne-card-toolbar-select-item ".concat(t?"ne-card-toolbar-select-item-has-title":""),key:l+u},"string"==typeof n?Gu().createElement(SC,{type:n}):n,!!t&&Gu().createElement("span",null,t),Gu().createElement("div",{className:"ne-card-toolbar-arrow-down-icon",style:{backgroundImage:"url(".concat(Fw["ne-card-toolbar-arrow-down-icon"],")")}})),{placement:d}))};var dP=dx("text","input");function fP(e){return!!(e.prefix||e.suffix||e.allowClear)}function hP(e){return!(!e.addonBefore&&!e.addonAfter)}var pP=function(e){(0,Xe.A)(n,e);var t=(0,Wk.A)(n);function n(){var e;return(0,Ke.A)(this,n),(e=t.apply(this,arguments)).containerRef=Yu.createRef(),e.onInputMouseUp=function(t){var n;if(null===(n=e.containerRef.current)||void 0===n?void 0:n.contains(t.target)){var r=e.props.triggerFocus;null==r||r()}},e}return(0,$e.A)(n,[{key:"renderClearIcon",value:function(e){var t=this.props,n=t.allowClear,r=t.value,o=t.disabled,i=t.readOnly,a=t.handleReset;if(!n)return null;var l=!o&&!i&&r,u="".concat(e,"-clear-icon");return Yu.createElement(Bk,{onClick:a,className:nk()((0,Ha.A)({},"".concat(u,"-hidden"),!l),u),role:"button"})}},{key:"renderSuffix",value:function(e){var t=this.props,n=t.suffix,r=t.allowClear;return n||r?Yu.createElement("span",{className:"".concat(e,"-suffix")},this.renderClearIcon(e),n):null}},{key:"renderLabeledIcon",value:function(e,t){var n,r=this.props,o=r.focused,i=r.value,a=r.prefix,l=r.className,u=r.size,c=r.suffix,s=r.disabled,d=r.allowClear,f=r.direction,h=r.style,p=r.readOnly,v=r.bordered,m=this.renderSuffix(e);if(!fP(this.props))return ux(t,{value:i});var g=a?Yu.createElement("span",{className:"".concat(e,"-prefix")},a):null,b=nk()("".concat(e,"-affix-wrapper"),(n={},(0,Ha.A)(n,"".concat(e,"-affix-wrapper-focused"),o),(0,Ha.A)(n,"".concat(e,"-affix-wrapper-disabled"),s),(0,Ha.A)(n,"".concat(e,"-affix-wrapper-sm"),"small"===u),(0,Ha.A)(n,"".concat(e,"-affix-wrapper-lg"),"large"===u),(0,Ha.A)(n,"".concat(e,"-affix-wrapper-input-with-clear-btn"),c&&d&&i),(0,Ha.A)(n,"".concat(e,"-affix-wrapper-rtl"),"rtl"===f),(0,Ha.A)(n,"".concat(e,"-affix-wrapper-readonly"),p),(0,Ha.A)(n,"".concat(e,"-affix-wrapper-borderless"),!v),(0,Ha.A)(n,"".concat(l),!hP(this.props)&&l),n));return Yu.createElement("span",{ref:this.containerRef,className:b,style:h,onMouseUp:this.onInputMouseUp},g,ux(t,{style:null,value:i,className:bP(e,v,u,s)}),m)}},{key:"renderInputWithLabel",value:function(e,t){var n,r=this.props,o=r.addonBefore,i=r.addonAfter,a=r.style,l=r.size,u=r.className,c=r.direction;if(!hP(this.props))return t;var s="".concat(e,"-group"),d="".concat(s,"-addon"),f=o?Yu.createElement("span",{className:d},o):null,h=i?Yu.createElement("span",{className:d},i):null,p=nk()("".concat(e,"-wrapper"),s,(0,Ha.A)({},"".concat(s,"-rtl"),"rtl"===c)),v=nk()("".concat(e,"-group-wrapper"),(n={},(0,Ha.A)(n,"".concat(e,"-group-wrapper-sm"),"small"===l),(0,Ha.A)(n,"".concat(e,"-group-wrapper-lg"),"large"===l),(0,Ha.A)(n,"".concat(e,"-group-wrapper-rtl"),"rtl"===c),n),u);return Yu.createElement("span",{className:v,style:a},Yu.createElement("span",{className:p},f,ux(t,{style:null}),h))}},{key:"renderTextAreaWithClearIcon",value:function(e,t){var n,r=this.props,o=r.value,i=r.allowClear,a=r.className,l=r.style,u=r.direction,c=r.bordered;if(!i)return ux(t,{value:o});var s=nk()("".concat(e,"-affix-wrapper"),"".concat(e,"-affix-wrapper-textarea-with-clear-btn"),(n={},(0,Ha.A)(n,"".concat(e,"-affix-wrapper-rtl"),"rtl"===u),(0,Ha.A)(n,"".concat(e,"-affix-wrapper-borderless"),!c),(0,Ha.A)(n,"".concat(a),!hP(this.props)&&a),n));return Yu.createElement("span",{className:s,style:l},ux(t,{style:null,value:o}),this.renderClearIcon(e))}},{key:"render",value:function(){var e=this.props,t=e.prefixCls,n=e.inputType,r=e.element;return n===dP[0]?this.renderTextAreaWithClearIcon(t,r):this.renderInputWithLabel(t,this.renderLabeledIcon(t,r))}}]),n}(Yu.Component);const vP=pP;function mP(e){return null==e?"":e}function gP(e,t,n,r){if(n){var o=t,i=e.value;return"click"===t.type?((o=Object.create(t)).target=e,o.currentTarget=e,e.value="",n(o),void(e.value=i)):void 0!==r?((o=Object.create(t)).target=e,o.currentTarget=e,e.value=r,void n(o)):void n(o)}}function bP(e,t,n,r,o){var i;return nk()(e,(i={},(0,Ha.A)(i,"".concat(e,"-sm"),"small"===n),(0,Ha.A)(i,"".concat(e,"-lg"),"large"===n),(0,Ha.A)(i,"".concat(e,"-disabled"),r),(0,Ha.A)(i,"".concat(e,"-rtl"),"rtl"===o),(0,Ha.A)(i,"".concat(e,"-borderless"),!t),i))}function yP(e,t){if(e){e.focus(t);var n=(t||{}).cursor;if(n){var r=e.value.length;switch(n){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(r,r);break;default:e.setSelectionRange(0,r)}}}}var wP=function(e){(0,Xe.A)(n,e);var t=(0,Wk.A)(n);function n(e){var r;(0,Ke.A)(this,n),(r=t.call(this,e)).direction="ltr",r.focus=function(e){yP(r.input,e)},r.saveClearableInput=function(e){r.clearableInput=e},r.saveInput=function(e){r.input=e},r.onFocus=function(e){var t=r.props.onFocus;r.setState({focused:!0},r.clearPasswordValueAttribute),null==t||t(e)},r.onBlur=function(e){var t=r.props.onBlur;r.setState({focused:!1},r.clearPasswordValueAttribute),null==t||t(e)},r.handleReset=function(e){r.setValue("",(function(){r.focus()})),gP(r.input,e,r.props.onChange)},r.renderInput=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.props,a=i.className,l=i.addonBefore,u=i.addonAfter,c=i.size,s=i.disabled,d=(0,tx.A)(r.props,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","size","inputType","bordered"]);return Yu.createElement("input",(0,ek.A)({autoComplete:o.autoComplete},d,{onChange:r.handleChange,onFocus:r.onFocus,onBlur:r.onBlur,onKeyDown:r.handleKeyDown,className:nk()(bP(e,n,c||t,s,r.direction),(0,Ha.A)({},a,a&&!l&&!u)),ref:r.saveInput}))},r.clearPasswordValueAttribute=function(){r.removePasswordTimeout=setTimeout((function(){r.input&&"password"===r.input.getAttribute("type")&&r.input.hasAttribute("value")&&r.input.removeAttribute("value")}))},r.handleChange=function(e){r.setValue(e.target.value,r.clearPasswordValueAttribute),gP(r.input,e,r.props.onChange)},r.handleKeyDown=function(e){var t=r.props,n=t.onPressEnter,o=t.onKeyDown;n&&13===e.keyCode&&n(e),null==o||o(e)},r.renderComponent=function(e){var t=e.getPrefixCls,n=e.direction,o=e.input,i=r.state,a=i.value,l=i.focused,u=r.props,c=u.prefixCls,s=u.bordered,d=void 0===s||s,f=t("input",c);return r.direction=n,Yu.createElement(m_.Consumer,null,(function(e){return Yu.createElement(vP,(0,ek.A)({size:e},r.props,{prefixCls:f,inputType:"input",value:mP(a),element:r.renderInput(f,e,d,o),handleReset:r.handleReset,ref:r.saveClearableInput,direction:n,focused:l,triggerFocus:r.focus,bordered:d}))}))};var o=void 0===e.value?e.defaultValue:e.value;return r.state={value:o,focused:!1,prevValue:e.value},r}return(0,$e.A)(n,[{key:"componentDidMount",value:function(){this.clearPasswordValueAttribute()}},{key:"componentDidUpdate",value:function(){}},{key:"getSnapshotBeforeUpdate",value:function(e){return fP(e)!==fP(this.props)&&u_(this.input!==document.activeElement,"Input","When Input is focused, dynamic add or remove prefix / suffix will make it lose focus caused by dom structure change. Read more: https://ant.design/components/input/#FAQ"),null}},{key:"componentWillUnmount",value:function(){this.removePasswordTimeout&&clearTimeout(this.removePasswordTimeout)}},{key:"blur",value:function(){this.input.blur()}},{key:"setSelectionRange",value:function(e,t,n){this.input.setSelectionRange(e,t,n)}},{key:"select",value:function(){this.input.select()}},{key:"setValue",value:function(e,t){void 0===this.props.value?this.setState({value:e},t):null==t||t()}},{key:"render",value:function(){return Yu.createElement(i_,null,this.renderComponent)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.prevValue,r={prevValue:e.value};return void 0===e.value&&n===e.value||(r.value=e.value),r}}]),n}(Yu.Component);wP.defaultProps={type:"text"};const AP=wP,kP={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"};var _P=function(e,t){return Yu.createElement(Ek,(0,ok.A)((0,ok.A)({},e),{},{ref:t,icon:kP}))};const CP=Yu.forwardRef(_P);var NP=Yu.forwardRef((function(e,t){var n,r,o=e.prefixCls,i=e.inputPrefixCls,a=e.className,l=e.size,u=e.suffix,c=e.enterButton,s=void 0!==c&&c,d=e.addonAfter,f=e.loading,h=e.disabled,p=e.onSearch,v=e.onChange,m=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange"]),g=Yu.useContext(o_),b=g.getPrefixCls,y=g.direction,w=Yu.useContext(m_),A=l||w,k=Yu.useRef(null),_=function(e){var t;document.activeElement===(null===(t=k.current)||void 0===t?void 0:t.input)&&e.preventDefault()},C=function(e){var t;p&&p(null===(t=k.current)||void 0===t?void 0:t.input.value,e)},N=b("input-search",o),O=b("input",i),x="boolean"==typeof s||void 0===s?Yu.createElement(CP,null):null,E="".concat(N,"-button"),D=s||{},P=D.type&&!0===D.type.__ANT_BUTTON;r=P||"button"===D.type?ux(D,(0,ek.A)({onMouseDown:_,onClick:C,key:"enterButton"},P?{className:E,size:A}:{})):Yu.createElement(Ax,{className:E,type:s?"primary":void 0,size:A,disabled:h,key:"enterButton",onMouseDown:_,onClick:C,loading:f,icon:x},s),d&&(r=[r,ux(d,{key:"addonAfter"})]);var R=nk()(N,(n={},(0,Ha.A)(n,"".concat(N,"-rtl"),"rtl"===y),(0,Ha.A)(n,"".concat(N,"-").concat(A),!!A),(0,Ha.A)(n,"".concat(N,"-with-button"),!!s),n),a);return Yu.createElement(AP,(0,ek.A)({ref:(0,LC.K4)(k,t),onPressEnter:C},m,{size:A,prefixCls:O,addonAfter:r,suffix:u,onChange:function(e){e&&e.target&&"click"===e.type&&p&&p(e.target.value,e),v&&v(e)},className:R,disabled:h}))}));NP.displayName="Search";const OP=NP;var xP,EP,DP=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"],PP={};!function(e){e[e.NONE=0]="NONE",e[e.RESIZING=1]="RESIZING",e[e.RESIZED=2]="RESIZED"}(EP||(EP={}));var RP=function(e){(0,Xe.A)(n,e);var t=(0,Wk.A)(n);function n(e){var r;return(0,Ke.A)(this,n),(r=t.call(this,e)).nextFrameActionId=void 0,r.resizeFrameId=void 0,r.textArea=void 0,r.saveTextArea=function(e){r.textArea=e},r.handleResize=function(e){var t=r.state.resizeStatus,n=r.props,o=n.autoSize,i=n.onResize;t===EP.NONE&&("function"==typeof i&&i(e),o&&r.resizeOnNextFrame())},r.resizeOnNextFrame=function(){cancelAnimationFrame(r.nextFrameActionId),r.nextFrameActionId=requestAnimationFrame(r.resizeTextarea)},r.resizeTextarea=function(){var e=r.props.autoSize;if(e&&r.textArea){var t=e.minRows,n=e.maxRows,o=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;xP||((xP=document.createElement("textarea")).setAttribute("tab-index","-1"),xP.setAttribute("aria-hidden","true"),document.body.appendChild(xP)),e.getAttribute("wrap")?xP.setAttribute("wrap",e.getAttribute("wrap")):xP.removeAttribute("wrap");var o=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&PP[n])return PP[n];var r=window.getComputedStyle(e),o=r.getPropertyValue("box-sizing")||r.getPropertyValue("-moz-box-sizing")||r.getPropertyValue("-webkit-box-sizing"),i=parseFloat(r.getPropertyValue("padding-bottom"))+parseFloat(r.getPropertyValue("padding-top")),a=parseFloat(r.getPropertyValue("border-bottom-width"))+parseFloat(r.getPropertyValue("border-top-width")),l={sizingStyle:DP.map((function(e){return"".concat(e,":").concat(r.getPropertyValue(e))})).join(";"),paddingSize:i,borderSize:a,boxSizing:o};return t&&n&&(PP[n]=l),l}(e,t),i=o.paddingSize,a=o.borderSize,l=o.boxSizing,u=o.sizingStyle;xP.setAttribute("style","".concat(u,";").concat("\n  min-height:0 !important;\n  max-height:none !important;\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n")),xP.value=e.value||e.placeholder||"";var c,s=Number.MIN_SAFE_INTEGER,d=Number.MAX_SAFE_INTEGER,f=xP.scrollHeight;if("border-box"===l?f+=a:"content-box"===l&&(f-=i),null!==n||null!==r){xP.value=" ";var h=xP.scrollHeight-i;null!==n&&(s=h*n,"border-box"===l&&(s=s+i+a),f=Math.max(s,f)),null!==r&&(d=h*r,"border-box"===l&&(d=d+i+a),c=f>d?"":"hidden",f=Math.min(d,f))}return{height:f,minHeight:s,maxHeight:d,overflowY:c,resize:"none"}}(r.textArea,!1,t,n);r.setState({textareaStyles:o,resizeStatus:EP.RESIZING},(function(){cancelAnimationFrame(r.resizeFrameId),r.resizeFrameId=requestAnimationFrame((function(){r.setState({resizeStatus:EP.RESIZED},(function(){r.resizeFrameId=requestAnimationFrame((function(){r.setState({resizeStatus:EP.NONE}),r.fixFirefoxAutoScroll()}))}))}))}))}},r.renderTextArea=function(){var e=r.props,t=e.prefixCls,n=void 0===t?"rc-textarea":t,o=e.autoSize,i=e.onResize,a=e.className,l=e.disabled,u=r.state,c=u.textareaStyles,s=u.resizeStatus,d=(0,tx.A)(r.props,["prefixCls","onPressEnter","autoSize","defaultValue","onResize"]),f=nk()(n,a,(0,Ha.A)({},"".concat(n,"-disabled"),l));"value"in d&&(d.value=d.value||"");var h=(0,ok.A)((0,ok.A)((0,ok.A)({},r.props.style),c),s===EP.RESIZING?{overflowX:"hidden",overflowY:"hidden"}:null);return Yu.createElement(fE,{onResize:r.handleResize,disabled:!(o||i)},Yu.createElement("textarea",(0,ek.A)({},d,{className:f,style:h,ref:r.saveTextArea})))},r.state={textareaStyles:{},resizeStatus:EP.NONE},r}return(0,$e.A)(n,[{key:"componentDidUpdate",value:function(e){e.value===this.props.value&&nE()(e.autoSize,this.props.autoSize)||this.resizeTextarea()}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.nextFrameActionId),cancelAnimationFrame(this.resizeFrameId)}},{key:"fixFirefoxAutoScroll",value:function(){try{if(document.activeElement===this.textArea){var e=this.textArea.selectionStart,t=this.textArea.selectionEnd;this.textArea.setSelectionRange(e,t)}}catch(e){}}},{key:"render",value:function(){return this.renderTextArea()}}]),n}(Yu.Component);const SP=RP;var TP=function(e){(0,Xe.A)(n,e);var t=(0,Wk.A)(n);function n(e){var r;(0,Ke.A)(this,n),(r=t.call(this,e)).resizableTextArea=void 0,r.focus=function(){r.resizableTextArea.textArea.focus()},r.saveTextArea=function(e){r.resizableTextArea=e},r.handleChange=function(e){var t=r.props.onChange;r.setValue(e.target.value,(function(){r.resizableTextArea.resizeTextarea()})),t&&t(e)},r.handleKeyDown=function(e){var t=r.props,n=t.onPressEnter,o=t.onKeyDown;13===e.keyCode&&n&&n(e),o&&o(e)};var o=void 0===e.value||null===e.value?e.defaultValue:e.value;return r.state={value:o},r}return(0,$e.A)(n,[{key:"setValue",value:function(e,t){"value"in this.props||this.setState({value:e},t)}},{key:"blur",value:function(){this.resizableTextArea.textArea.blur()}},{key:"render",value:function(){return Yu.createElement(SP,(0,ek.A)({},this.props,{value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,ref:this.saveTextArea}))}}],[{key:"getDerivedStateFromProps",value:function(e){return"value"in e?{value:e.value}:null}}]),n}(Yu.Component);const jP=TP;function IP(e,t){return(0,ln.A)(e||"").slice(0,t).join("")}var BP=Yu.forwardRef((function(e,t){var n,r=e.prefixCls,o=e.bordered,i=void 0===o||o,a=e.showCount,l=void 0!==a&&a,u=e.maxLength,c=e.className,s=e.style,d=e.size,f=e.onCompositionStart,h=e.onCompositionEnd,p=e.onChange,v=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["prefixCls","bordered","showCount","maxLength","className","style","size","onCompositionStart","onCompositionEnd","onChange"]),m=Yu.useContext(o_),g=m.getPrefixCls,b=m.direction,y=Yu.useContext(m_),w=Yu.useRef(null),A=Yu.useRef(null),k=Yu.useState(!1),_=(0,tn.A)(k,2),C=_[0],N=_[1],O=(0,Ix.A)(v.defaultValue,{value:v.value}),x=(0,tn.A)(O,2),E=x[0],D=x[1],P=function(e,t){void 0===v.value&&(D(e),null==t||t())},R=Number(u)>0,S=g("input",r);Yu.useImperativeHandle(t,(function(){var e;return{resizableTextArea:null===(e=w.current)||void 0===e?void 0:e.resizableTextArea,focus:function(e){var t,n;yP(null===(n=null===(t=w.current)||void 0===t?void 0:t.resizableTextArea)||void 0===n?void 0:n.textArea,e)},blur:function(){var e;return null===(e=w.current)||void 0===e?void 0:e.blur()}}}));var T=Yu.createElement(jP,(0,ek.A)({},(0,tx.A)(v,["allowClear"]),{className:nk()((n={},(0,Ha.A)(n,"".concat(S,"-borderless"),!i),(0,Ha.A)(n,c,c&&!l),(0,Ha.A)(n,"".concat(S,"-sm"),"small"===y||"small"===d),(0,Ha.A)(n,"".concat(S,"-lg"),"large"===y||"large"===d),n)),style:l?void 0:s,prefixCls:S,onCompositionStart:function(e){N(!0),null==f||f(e)},onChange:function(e){var t=e.target.value;!C&&R&&(t=IP(t,u)),P(t),gP(e.currentTarget,e,p,t)},onCompositionEnd:function(e){N(!1);var t=e.currentTarget.value;R&&(t=IP(t,u)),t!==E&&(P(t),gP(e.currentTarget,e,p,t)),null==h||h(e)},ref:w})),j=mP(E);C||!R||null!==v.value&&void 0!==v.value||(j=IP(j,u));var I=Yu.createElement(vP,(0,ek.A)({},v,{prefixCls:S,direction:b,inputType:"text",value:j,element:T,handleReset:function(e){var t,n;P("",(function(){var e;null===(e=w.current)||void 0===e||e.focus()})),gP(null===(n=null===(t=w.current)||void 0===t?void 0:t.resizableTextArea)||void 0===n?void 0:n.textArea,e,p)},ref:A,bordered:i}));if(l){var B,M=(0,ln.A)(j).length;return B="object"===(0,Gn.A)(l)?l.formatter({count:M,maxLength:u}):"".concat(M).concat(R?" / ".concat(u):""),Yu.createElement("div",{className:nk()("".concat(S,"-textarea"),(0,Ha.A)({},"".concat(S,"-textarea-rtl"),"rtl"===b),"".concat(S,"-textarea-show-count"),c),style:s,"data-count":B},I)}return I}));const MP=BP,FP={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"};var LP=function(e,t){return Yu.createElement(Ek,(0,ok.A)((0,ok.A)({},e),{},{ref:t,icon:FP}))};const UP=Yu.forwardRef(LP),VP={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"};var HP=function(e,t){return Yu.createElement(Ek,(0,ok.A)((0,ok.A)({},e),{},{ref:t,icon:VP}))};const zP=Yu.forwardRef(HP);var WP={click:"onClick",hover:"onMouseOver"},qP=Yu.forwardRef((function(e,t){var n=(0,Yu.useState)(!1),r=(0,tn.A)(n,2),o=r[0],i=r[1],a=function(){e.disabled||i(!o)},l=function(n){var r=n.getPrefixCls,i=e.className,l=e.prefixCls,u=e.inputPrefixCls,c=e.size,s=e.visibilityToggle,d=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["className","prefixCls","inputPrefixCls","size","visibilityToggle"]),f=r("input",u),h=r("input-password",l),p=s&&function(t){var n,r=e.action,i=e.iconRender,l=WP[r]||"",u=(void 0===i?function(){return null}:i)(o),c=(n={},(0,Ha.A)(n,l,a),(0,Ha.A)(n,"className","".concat(t,"-icon")),(0,Ha.A)(n,"key","passwordIcon"),(0,Ha.A)(n,"onMouseDown",(function(e){e.preventDefault()})),(0,Ha.A)(n,"onMouseUp",(function(e){e.preventDefault()})),n);return Yu.cloneElement(Yu.isValidElement(u)?u:Yu.createElement("span",null,u),c)}(h),v=nk()(h,i,(0,Ha.A)({},"".concat(h,"-").concat(c),!!c)),m=(0,ek.A)((0,ek.A)({},(0,tx.A)(d,["suffix","iconRender"])),{type:o?"text":"password",className:v,prefixCls:f,suffix:p});return c&&(m.size=c),Yu.createElement(AP,(0,ek.A)({ref:t},m))};return Yu.createElement(i_,null,l)}));qP.defaultProps={action:"click",visibilityToggle:!0,iconRender:function(e){return e?Yu.createElement(UP,null):Yu.createElement(zP,null)}},qP.displayName="Password";const $P=qP;AP.Group=function(e){return Yu.createElement(i_,null,(function(t){var n,r=t.getPrefixCls,o=t.direction,i=e.prefixCls,a=e.className,l=void 0===a?"":a,u=r("input-group",i),c=nk()(u,(n={},(0,Ha.A)(n,"".concat(u,"-lg"),"large"===e.size),(0,Ha.A)(n,"".concat(u,"-sm"),"small"===e.size),(0,Ha.A)(n,"".concat(u,"-compact"),e.compact),(0,Ha.A)(n,"".concat(u,"-rtl"),"rtl"===o),n),l);return Yu.createElement("span",{className:c,style:e.style,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onFocus:e.onFocus,onBlur:e.onBlur},e.children)}))},AP.Search=OP,AP.TextArea=MP,AP.Password=$P;const KP=AP;function YP(e){var t=window.innerWidth,n=window.innerHeight;if(e===window||e===document||e===document.documentElement||e===document.body)return{top:0,left:0,right:t,bottom:n,width:t,height:n};var r=e.getBoundingClientRect();if(r.left>t||r.top>n||r.left<0||r.top<0)return{top:r.top,left:r.left,right:r.right,bottom:r.bottom,width:r.width,height:r.height};var o=Math.min(t-r.left,r.width),i=Math.min(n-r.top,r.height);return{top:r.top,left:r.left,bottom:r.top+i,right:r.left+o,width:o,height:i}}function GP(e,t,n,r,o,i,a,l){var u=YP(r);(null==e?void 0:e.topOffset)&&(u.top+=e.topOffset,u.height-=e.topOffset,u.height<0&&(u.height=0,u.top=u.bottom));var c=o.getBoundingClientRect();(null==e?void 0:e.transformY)&&(c.y+=e.transformY);var s=i.getBoundingClientRect(),d=function(e,t,n,r,o,i,a){var l,u=!!e;l="string"==typeof e?[e]:e;var c=function(e,t,n,r,o){var i=t.top-o,a=t.bottom+o,l=t.left-r,u=t.right+r,c=i>=e.top,s=a<=e.bottom,d=l>=e.left,f=u<=e.right,h=t.top>=e.top&&t.top<=e.bottom,p=t.bottom<=e.bottom&&t.bottom>=e.top,v=t.left>=e.left&&t.left+r<=e.right,m=t.right<=e.right&&t.right-r>=e.left,g=[];return c&&(g.push(bC),v&&g.push(yC),m&&g.push(wC)),s&&(g.push(AC),v&&g.push(kC),m&&g.push(_C)),d&&(g.push(CC),h&&g.push(NC),p&&g.push(OC)),f&&(g.push(xC),h&&g.push(EC),p&&g.push(DC)),g}(n,{top:r.top-t,left:r.left-t,right:r.right+t,bottom:r.bottom+t,width:r.width+2*t,height:r.height+2*t},0,i,a);if(u&&c.length)for(var s=0,d=l.length;s<d;s++)if(c.includes(l[s]))return l[s];return u?l[0]:c.length?c[0]:function(e,t,n){if(1===e.length)return e[0];var r=n.top-t.top,o=t.bottom-n.bottom,i=n.left-t.left,a=t.right-n.right,l=r>o,u=i>=a,c={2:[],1:[]};return e.forEach((function(e){switch(e){case bC:l&&c[2].push(e);break;case yC:case NC:l&&u?c[2].push(e):(l||u)&&c[1].push(e);break;case wC:case EC:l&&!u?c[2].push(e):!l&&u||c[1].push(e);break;case AC:l||c[2].push(e);break;case kC:case OC:!l&&u?c[2].push(e):l&&!u||c[1].push(e);break;case _C:case DC:l||u?l&&u||c[1].push(e):c[2].push(e);break;case CC:u&&c[2].push(e);break;case xC:u||c[2].push(e);break;default:bt(!1,"framework/uilib/src/boundary-popover/calc-position-by-node.ts:412")}return!1})),c[2].length?c[2][0]:c[1].length?c[1][0]:e[0]}(c.concat([kC]),n,r)}(t,n,u,c,0,a,l);return{placement:d,pos:JP(d,c,s,u,a,l,n)}}function JP(e,t,n,r,o,i,a){var l=(t.width-o)/2,u=(t.height-i)/2;switch(e){case bC:return{left:XP(t.left+l-n.left,o,r.width),bottom:n.bottom-(t.top-a)};case AC:return{left:XP(t.left+l-n.left,o,r.width),top:t.bottom+a-n.top};case CC:return{right:n.right-(t.left-a),top:t.top+u-n.top};case xC:return{left:t.right+a-n.left,top:t.top+u-n.top};case yC:return{left:t.left-n.left,bottom:n.bottom-(t.top-a)};case NC:return{right:n.right-(t.left-a),top:t.top-n.top};case wC:return{left:t.right-o-n.left,bottom:n.bottom-(t.top-a)};case EC:return{left:t.right+a-n.left,top:t.top-n.top};case kC:return{left:t.left-n.left,top:t.bottom+a-n.top};case OC:return{right:n.right-(t.left-a),bottom:n.bottom-t.bottom};case _C:return{left:t.right-o-n.left,top:t.bottom+a-n.top};case DC:return{left:t.right+a-n.left,top:t.bottom-i-n.top};default:return bt(!1,"framework/uilib/src/boundary-popover/calc-position-by-node.ts:179"),{top:0,left:0}}}function XP(e,t,n){return e<0?0:e+t>n?Math.max(0,n-t):e}function QP(e,t,n,r,o,i,a){var l,u=o.getBoundingClientRect(),c=YP(r),s=function(e,t,n,r,o){var i;if(i=e?"string"==typeof e?[e]:e:[yC],t.x>n.right||t.x<n.left||t.y>n.bottom||t.y<n.top)return i;var a=function(e,t,n,r){var o=t.x,i=t.y,a=i+r,l=o-n,u=o+n,c=i-r>e.top,s=a<e.bottom,d=l>e.left,f=u<e.right,h=[];return c&&(d&&(h.push(yC),h.push(NC)),f&&(h.push(wC),h.push(EC))),s&&(d&&(h.push(kC),h.push(OC)),f&&(h.push(_C),h.push(DC))),h}(n,t,r,o),l=i.filter((function(e){return a.includes(e)}));return l.length?l:a}(e,t,c,i,a);return s.length?l=function(e,t,n,r){var o=t.x,i=t.y;switch(e){case yC:case NC:return{x:o-n,y:i-r};case wC:case EC:return{x:o,y:i-r};case kC:case OC:return{x:o-n,y:i};case _C:case DC:return{x:o,y:i};default:return bt(!1,"framework/uilib/src/boundary-popover/calc-position-by-point.ts:113"),t}}(s[0],t,i,a):n?(l=function(e,t,n,r){var o=e.x,i=e.y;return n.height<=r?{x:o,y:n.top}:i+r<=n.bottom?{x:o,y:i}:{x:o,y:n.bottom-r}}(t,0,c,a),l.x+=2):l=t,{placement:s[0],pos:{left:l.x-u.x,top:l.y-u.y}}}function ZP(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,eR()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function eR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(eR=function(){return!!e})()}var tR={offset:0,visible:!1,adjustment:!1,allowClose:!0,placement:yC,onOpen:function(){},onClose:function(){},onCancel:function(){}},nR=function(e){function t(){var e;return(0,Ke.A)(this,t),e=ZP(this,t,arguments),Object.defineProperty(e,"posRaf",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_wrapNodeRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"_handleMouseDown",{enumerable:!0,configurable:!0,writable:!0,value:function(t){if(!e._ignore(t)){var n=e._wrapNodeRef.current;n&&(n.contains(t.target)||e.props.onClose())}}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.allowClose&&ud(this,document,"mousedown",this._handleMouseDown,!0),this.props.uiEmitter&&sd(this,this.props.uiEmitter,"closePopover",(function(){e.props.onClose(),e.props.onCancel()})),this.props.visible&&this._show()}},{key:"componentDidUpdate",value:function(e){this.props.visible!==e.visible&&(this.props.visible?this._show():this._hide())}},{key:"componentWillUnmount",value:function(){this.posRaf&&cancelAnimationFrame(this.posRaf)}},{key:"render",value:function(){return Gu().createElement("div",{ref:this._wrapNodeRef,className:Uf("ne-ui-boundary-popover",this.props.className)},this.props.children)}},{key:"updatePos",value:function(){var e=this._wrapNodeRef.current;if(e&&e.firstChild){e.style.top="-999999px",e.style.left="-999999px",e.style.display="block",e.style.height="unset";var t,n=this.props,r=n.placement,o=n.offset,i=n.boundaryNode,a=n.targetNode,l=n.point,u=n.adjustment,c=n.options,s=this._getOverlaySize(e),d=s.width,f=s.height;t=l?QP(r,l,u,i||document.body,e.parentNode,d,f):GP(c,r,o,i||document.body,"function"==typeof a?a():a,e.parentNode,d,f),this.props.positionHandle?(e.style.top="auto",e.style.left="auto",this.props.positionHandle(e,t.placement,t.pos,this.defaultPositionHandle)):this.defaultPositionHandle(e,t.pos)}}},{key:"defaultPositionHandle",value:function(e,t){e.style.top=void 0!==t.top?t.top+"px":"auto",e.style.right=void 0!==t.right?t.right+"px":"auto",e.style.bottom=void 0!==t.bottom?t.bottom+"px":"auto",e.style.left=void 0!==t.left?t.left+"px":"auto"}},{key:"_show",value:function(){var e=this;this.posRaf=requestAnimationFrame((function(){e.updatePos()})),this.props.onOpen()}},{key:"_hide",value:function(){var e=this._wrapNodeRef.current;e&&(e.style.display="none")}},{key:"_ignore",value:function(e){var t;return!!gc(e.target,"[".concat(vc,'="overlay"]'),document.body)||!!(null===(t=this.props.closeExclude)||void 0===t?void 0:t.contains(e.target))}},{key:"_getOverlaySize",value:function(e){var t=this.props,n=t.overlayWidth,r=t.overlayHeight;if(n&&r)return{width:n,height:r};var o=e.getBoundingClientRect();return{width:o.width,height:o.height}}}])}(Yu.Component);function rR(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,oR()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function oR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(oR=function(){return!!e})()}Object.defineProperty(nR,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:tR});var iR=function(e){function t(){var e;return(0,Ke.A)(this,t),e=rR(this,t,arguments),Object.defineProperty(e,"_boundaryRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"state",{enumerable:!0,configurable:!0,writable:!0,value:{isMenuVisible:!1}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){return Gu().createElement(nR,{visible:!0,ref:this._boundaryRef,offset:void 0!==this.props.options.offset?this.props.options.offset:2,placement:Us.mobile?[bC,AC]:[bC],targetNode:this.props.targetNode,boundaryNode:this.props.boundaryNode,options:this.props.options},Gu().createElement("div",{className:nk()("ne-card-toolbar",this.props.className),onMouseDown:function(e){var t,n;if("INPUT"!==e.target.nodeName){var r=document.getSelection();(null===(n=null===(t=null==r?void 0:r.anchorNode)||void 0===t?void 0:t.closest)||void 0===n?void 0:n.call(t,".ne-card-toolbar"))!==e.currentTarget&&e.preventDefault()}}},this._renderItems()))}},{key:"updatePos",value:function(){this._boundaryRef.current&&this._boundaryRef.current.updatePos()}},{key:"_renderItems",value:function(){var e=this;return this.props.items.map((function(t,n){return e._renderItem(t,n)}))}},{key:"_renderItem",value:function(e,t){if("|"===e)return Gu().createElement("div",{className:"ne-ui-card-toolbar-divider",key:"|"+t});if(!(null==e?void 0:e.type))return this._renderNormalItem(e,t);switch(e.type){case"input":return this._renderInputItem(e,t);case"select":return this._renderSelectItem(e,t);case"item":return this._renderNormalItem(e,t);case"dropdown":return this._renderDropdownItem(e,t);case"react":return bt("function"==typeof e.render,"framework/uilib/src/mini-toolbar/card-toolbar/card-toolbar-view.tsx:201"),e.render(e,t);default:bt(!1,"framework/uilib/src/mini-toolbar/card-toolbar/card-toolbar-view.tsx:205")}}},{key:"_renderNormalItem",value:function(e,t){var n="ne-card-toolbar-item ".concat(e.title?"ne-card-toolbar-item-has-title":""),r=Gu().createElement("div",{"data-disabled":!!e.disabled||null,"data-testid":"ne-card-toolbar-item-".concat(e.name),onClick:function(){e.disabled||e.onClick&&e.onClick()},style:e.style,className:"".concat(n," ").concat(e.selected?"selected":""),key:e.name+""+t},TC(e),e.title&&Gu().createElement("span",null,e.title));return e.disableTooltip?r:Gu().createElement(Qx,{key:e.name+""+t,trigger:e.disabled?["hover"]:["hover","click"],title:jC(e),getPopupContainer:function(e){return e},overlayStyle:{maxWidth:500}},r)}},{key:"_renderInputItem",value:function(e,t){var n=e.title,r=e.name,o=e.componentProperty,i=void 0===o?null:o;return Gu().createElement("div",{className:"ne-card-toolbar-input-container",key:r+t+(null==i?void 0:i.defaultValue)},Gu().createElement("span",{className:"ne-card-toolbar-input-title"},n),Gu().createElement(KP,Object.assign({disabled:e.disabled,className:"ne-card-toolbar-input",size:"small"},i)))}},{key:"_processDropdownConfig",value:function(e){var t=this,n=e.onVisibleChange;return e.onVisibleChange=function(e){t.props.onSelectVisibleChange(e),n&&n(e)},e}},{key:"_renderSelectItem",value:function(e,t){var n=e.icon,r=e.items,o=e.onSelect,i=e.text,a=e.name,l=e.dropdownComponentConfig,u=void 0===l?{}:l,c=e.selectValue,s=e.tooltipPlacement,d=e.title;return Gu().createElement(sP,{title:d,index:t,name:a,icon:n,menuItems:r,onSelect:o,toolTip:i,selectValue:c,tooltipPlacement:s,dropdownComponentConfig:this._processDropdownConfig(u)})}},{key:"_renderDropdownItem",value:function(e,t){var n=e.icon,r=e.overlay,o=e.overlayProps,i=e.text,a=e.name,l=e.tooltipPlacement,u=e.title,c=e.selected,s=e.onClick;return Gu().createElement(eE,{title:u,index:t,name:a,icon:n,overlay:r,overlayProps:o,toolTip:i,tooltipPlacement:l,selected:c,onClick:s})}}])}(Yu.Component);Object.defineProperty(iR,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{onSelectVisibleChange:function(e){}}});var aR=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"openOnlyByType",value:function(e,t){var n=t.overlayClassName,r=t.containerNode,o=t.targetNode,i=t.reactComponent,a=t.closeCallback,l=t.autoClose,u=t.options,c=t.shouldCancel;this._overlaysTypeMap[e]&&this._overlaysTypeMap[e].cancel("force");var s=this.open({overlayClassName:n,containerNode:r,targetNode:o,reactComponent:i,closeCallback:a,autoClose:l,options:u,shouldCancel:c},e);return this._overlaysTypeMap[e]=s,s}},{key:"open",value:function(e,t){var n=this,r=e.overlayClassName,o=e.containerNode,i=e.targetNode,a=e.reactComponent,l=e.closeCallback,u=e.autoClose,c=void 0===u||u,s=e.options,d=void 0===s?{}:s,f=e.shouldCancel,h=void 0===f?function(){return!0}:f;if(!i.isConnected||!o)return null;var p,v=function(e,t,n){var r=document.createElement("ne-overlay-tmp");return r.contentEditable="false",r.setAttribute(vc,"overlay"),(null==n?void 0:n.zIndex)&&(r.style.zIndex=n.zIndex),t&&(r.className=t),null==e||e.prepend(r),r}(o,r,d),m={focused:!1,hovered:!1,mountNode:v},g=function(){m.hovered=!0},b=function(){m.hovered=!1,c&&("function"!=typeof c||c())&&m.lazyCancel()};return m.isConnected=function(){return v.isConnected},m.cancel=function(){m.removed||("force"===(arguments.length<=0?void 0:arguments[0])||"function"!=typeof h||h())&&(Gl().unmountComponentAtNode(v),v.remove(),t&&delete n._overlaysTypeMap[t],i.removeEventListener("mouseenter",g),i.removeEventListener("mouseleave",b),l&&l.apply(void 0,arguments),m.removed=!0)},m.lazyCancel=function(){p&&clearTimeout(p),p=setTimeout((function(){m.hovered||m.focused||m.cancel()}),300)},m.rerender=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Gl().render(Gu().createElement(a.type,Object.assign({},Object.assign(Object.assign({},a.props),e),{ref:a.ref,targetNode:i,onClose:m.cancel})),v)},m.rerender(),v.firstChild&&(v.firstChild.addEventListener("mouseleave",b),v.firstChild.addEventListener("mouseenter",g),v.firstChild.addEventListener("focusin",(function(){m.focused=!0})),v.firstChild.addEventListener("focusout",(function(){m.focused=!1,c&&("function"!=typeof c||c())&&m.lazyCancel()}))),i.addEventListener("mouseenter",g),i.addEventListener("mouseleave",b),m}}])}();Object.defineProperty(aR,"_overlaysTypeMap",{enumerable:!0,configurable:!0,writable:!0,value:{}});var lR=function(){return(0,$e.A)((function e(t,n,r,o,i){var a=this;(0,Ke.A)(this,e),Object.defineProperty(this,"_targetNode",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_overlayContainer",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"_boundaryNode",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"_items",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"_isDestroyed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_delayUpdate",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_overlay",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_autoClose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_shouldCancel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_showMiniToolbarWhen",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_cardToolbarViewRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(this,"_delayUpdateTimeId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_handleSelectVisibleChange",{enumerable:!0,configurable:!0,writable:!0,value:function(e){e&&(a._delayUpdate=!0,clearTimeout(a._delayUpdateTimeId),a._delayUpdateTimeId=window.setTimeout((function(){a._delayUpdate=!1}),350))}});var l=i.autoClose,u=i.showMiniToolbarWhen,c=i.shouldCancel,s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(i,["autoClose","showMiniToolbarWhen","shouldCancel"]);this._autoClose=l,this._showMiniToolbarWhen=u,this._shouldCancel=c,this._options=Object.assign({topOffset:0},s),this._open()}),[{key:"isRemoved",get:function(){return null===this._overlay||this._overlay.removed}},{key:"isFocusOrHover",value:function(){return this._overlay&&this._overlay.isConnected()&&(this._overlay.hovered||this._overlay.focused)}},{key:"mountNode",get:function(){var e;return null===(e=this._overlay)||void 0===e?void 0:e.mountNode}},{key:"destroy",value:function(){this._overlay&&(this._overlay.cancel(),this._overlay=null),delete this._targetNode,delete this._overlayContainer,delete this._items,this._isDestroyed=!0}},{key:"updatePos",value:function(){this._cardToolbarViewRef.current&&this._cardToolbarViewRef.current.updatePos()}},{key:"update",value:function(e){if(!this._isDestroyed){if(this._overlay){if(this._overlay.isConnected()&&(this._overlay.hovered||this._overlay.focused||this._delayUpdate))return void this._overlay.rerender({items:e});this._overlay.cancel()}this._items=e,this._open()}}},{key:"_open",value:function(){var e=this._overlayContainer,t=this._targetNode,n=this._items,r=this._boundaryNode,o=this._showMiniToolbarWhen?"".concat(this._showMiniToolbarWhen,"CardToolbar"):"cardToolbar";this._overlay=aR.openOnlyByType(o,{containerNode:e,targetNode:t,autoClose:this._autoClose,shouldCancel:this._shouldCancel,options:{zIndex:2},reactComponent:Gu().createElement(iR,{targetNode:t,ref:this._cardToolbarViewRef,onSelectVisibleChange:this._handleSelectVisibleChange,boundaryNode:r,items:n,options:this._options})})}}])}();function uR(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,cR()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function cR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(cR=function(){return!!e})()}var sR=function(e){function t(){var e;return(0,Ke.A)(this,t),e=uR(this,t,arguments),Object.defineProperty(e,"_boundaryRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"_destroyed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"state",{enumerable:!0,configurable:!0,writable:!0,value:{popoverVisible:!0}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentWillUnmount",value:function(){this._destroyed=!0}},{key:"_renderItem",value:function(e,t){var n=this;if("|"===e)return Gu().createElement("div",{className:"ne-ui-container-right-toolbar-divider",key:"|"+t});var r=Object.assign(Object.assign({},e),{iconSize:16}),o=Gu().createElement("div",{className:"ne-ui-container-right-toolbar-item","data-action":e.name,onClick:function(){var e;null===(e=r.onClick)||void 0===e||e.call(r,r),n.setState({popoverVisible:!1})}},TC(r));return r.disableTooltip?o:Gu().createElement(Qx,{key:r.name+""+t,title:jC(r),placement:"rightTop"},o)}},{key:"_renderItems",value:function(){var e=this;return this.props.config.items.map((function(t,n){return e._renderItem(t,n)}))}},{key:"render",value:function(){var e=this;return this.props.config.items?Gu().createElement(nR,{ref:this._boundaryRef,targetNode:this.props.targetNode,className:this.props.config.className,visible:this.state.popoverVisible,placement:"rightTop",positionHandle:this.props.config.positionHandle,options:{transformY:this.props.config.transformY}},Gu().createElement("div",{className:"ne-container-right-toolbar",style:{minHeight:this.props.config.minHeight||0,paddingLeft:"".concat(this.props.config.paddingLeft,"px")||0},onClick:function(t){t.target.closest(".ne-ui-container-right-toolbar-item")||e.props.onClickBackground()}},this._renderItems())):null}},{key:"updatePos",value:function(){this._boundaryRef.current&&this._boundaryRef.current.updatePos()}}])}(Yu.Component);function dR(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,fR()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function fR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(fR=function(){return!!e})()}var hR=function(e){function t(e,n,r,o){var i;return(0,Ke.A)(this,t),i=dR(this,t),Object.defineProperty(i,"_editBox",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(i,"_overlayContainer",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(i,"_targetNode",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(i,"_config",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(i,"_overlay",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(i,"_isDestroyed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(i,"_containerToolbarViewRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),i._open(),i}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){var e=this;setTimeout((function(){e._overlay&&(e._overlay.cancel(),e._overlay=null)})),this._editBox=null,this._overlayContainer=null,this._targetNode=null,this._config=null,this._isDestroyed=!0,this.removeAllListeners()}},{key:"updatePos",value:function(){this._containerToolbarViewRef.current&&this._containerToolbarViewRef.current.updatePos()}},{key:"isRemoved",get:function(){return null===this._overlay||this._overlay.removed}},{key:"mountNode",get:function(){var e;return null===(e=this._overlay)||void 0===e?void 0:e.mountNode}},{key:"_open",value:function(){var e=this,t=this._config,n=this._overlayContainer,r=this._targetNode;this._overlay=aR.openOnlyByType("containerRightBar",{containerNode:n,targetNode:r,reactComponent:Gu().createElement(sR,{ref:this._containerToolbarViewRef,targetNode:r,config:t,onClickBackground:function(){var n;null===(n=e._overlay)||void 0===n||n.cancel(),"function"==typeof t.clickBackgroundHandle&&t.clickBackgroundHandle()}}),options:{zIndex:2}})}},{key:"update",value:function(e){this._isDestroyed||(!this._overlay||this._overlay.removed?(this._config=e,this._open()):this.updatePos())}}])}(it),pR=function(e){return e?"function"==typeof e?e():e:null},vR=Yu.forwardRef((function(e,t){var n=e.prefixCls,r=e.title,o=e.content,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["prefixCls","title","content"]),a=Yu.useContext(o_).getPrefixCls,l=a("popover",n),u=a();return Yu.createElement(Jx,(0,ek.A)({},i,{prefixCls:l,ref:t,overlay:function(e){return Yu.createElement(Yu.Fragment,null,r&&Yu.createElement("div",{className:"".concat(e,"-title")},pR(r)),Yu.createElement("div",{className:"".concat(e,"-inner-content")},pR(o)))}(l),transitionName:$x(u,"zoom-big",i.transitionName)}))}));vR.displayName="Popover",vR.defaultProps={placement:"top",trigger:"hover",mouseEnterDelay:.1,mouseLeaveDelay:.1,overlayStyle:{}};const mR=vR;var gR=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function bR(e){var t=e.children,n=e.overlayClassName,r=gR(e,["children","overlayClassName"]);return Gu().createElement(mR,Object.assign({overlayClassName:"ne-ui-popover ".concat(n||"")},r),t)}var yR=Yu.forwardRef((function(e,t){var n,r=e.prefixCls,o=void 0===r?"rc-switch":r,i=e.className,a=e.checked,l=e.defaultChecked,u=e.disabled,c=e.loadingIcon,s=e.checkedChildren,d=e.unCheckedChildren,f=e.onClick,h=e.onChange,p=e.onKeyDown,v=(0,ak.A)(e,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),m=(0,Ix.A)(!1,{value:a,defaultValue:l}),g=(0,tn.A)(m,2),b=g[0],y=g[1];function w(e,t){var n=b;return u||(y(n=e),null==h||h(n,t)),n}var A=nk()(o,i,(n={},(0,Ha.A)(n,"".concat(o,"-checked"),b),(0,Ha.A)(n,"".concat(o,"-disabled"),u),n));return Yu.createElement("button",Object.assign({},v,{type:"button",role:"switch","aria-checked":b,disabled:u,className:A,ref:t,onKeyDown:function(e){e.which===jE.A.LEFT?w(!1,e):e.which===jE.A.RIGHT&&w(!0,e),null==p||p(e)},onClick:function(e){var t=w(!b,e);null==f||f(t,e)}}),c,Yu.createElement("span",{className:"".concat(o,"-inner")},b?s:d))}));yR.displayName="Switch";const wR=yR;var AR=Yu.forwardRef((function(e,t){var n,r=e.prefixCls,o=e.size,i=e.loading,a=e.className,l=void 0===a?"":a,u=e.disabled,c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["prefixCls","size","loading","className","disabled"]);u_("checked"in c||!("value"in c),"Switch","`value` is not a valid prop, do you mean `checked`?");var s=Yu.useContext(o_),d=s.getPrefixCls,f=s.direction,h=Yu.useContext(m_),p=d("switch",r),v=Yu.createElement("div",{className:"".concat(p,"-handle")},i&&Yu.createElement(Pk,{className:"".concat(p,"-loading-icon")})),m=nk()((n={},(0,Ha.A)(n,"".concat(p,"-small"),"small"===(o||h)),(0,Ha.A)(n,"".concat(p,"-loading"),i),(0,Ha.A)(n,"".concat(p,"-rtl"),"rtl"===f),n),l);return Yu.createElement(sx,{insertExtraNode:!0},Yu.createElement(wR,(0,ek.A)({},c,{prefixCls:p,className:m,disabled:u||i,ref:t,loadingIcon:v})))}));AR.__ANT_SWITCH=!0,AR.displayName="Switch";const kR=AR;var _R=["imageGallery"],CR=function(){return(0,$e.A)((function e(t,n,r,o,i,a,l,u){var c=this;(0,Ke.A)(this,e),Object.defineProperty(this,"boundaryDOMNode",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"overlayNode",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"cardRootNode",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"triggerDomNode",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"scrollContainer",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"onDrop",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"onDragStart",{enumerable:!0,configurable:!0,writable:!0,value:l}),Object.defineProperty(this,"dragNodeClass",{enumerable:!0,configurable:!0,writable:!0,value:u}),Object.defineProperty(this,"dragImageNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_cursor",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_lastRect",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"autoScroll",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mouseToDrag",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mask",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"toolbarNodes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lastClientPos",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"onMouseDragStart",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t;c.dragImageNode=c.triggerDomNode.cloneNode(),c.dragImageNode.classList.add("ne-card-drag-image","ne-card-drag-image-placeholder"),c.dragNodeClass&&c.dragImageNode.classList.add(c.dragNodeClass),c.dragImageNode.style.transform="translate(".concat(e.clientX,"px, ").concat(e.clientY,"px)"),null===(t=c.onDragStart)||void 0===t||t.call(c,c.dragImageNode),document.body.appendChild(c.dragImageNode)}}),Object.defineProperty(this,"onMouseDragMove",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t,n;if(c.autoScroll.run(e),c.dragImageNode&&(c.dragImageNode.style.transform="translate(".concat(e.clientX,"px, ").concat(e.clientY,"px)")),!(c.lastClientPos&&Math.sqrt(Math.pow(Math.abs(e.clientX-c.lastClientPos[0]),2)+Math.pow(Math.abs(e.clientY-c.lastClientPos[1]),2))<5)){c.lastClientPos=[e.clientX,e.clientY];var r=e.clientX,o=Md(r,e.clientY);if(o){var i=c._getRect(r,o);if(i){if("NE-CARD"===(null===(t=i.originNode)||void 0===t?void 0:t.nodeName)&&(null===(n=i.originNode)||void 0===n?void 0:n.dataset.cardName)&&_R.includes(i.originNode.dataset.cardName))return c._clearCursor(),void(c._lastRect=i);c._resetCursor(i),c._lastRect=i}else c._clearCursor()}}}}),Object.defineProperty(this,"onMouseDrop",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t=c._lastRect;c.destroy(),t&&c.onDrop({node:t.node,originNode:t.originNode,offset:t.offset})}}),this.autoScroll=new Bd(i),this.mouseToDrag=new Ud(this.triggerDomNode,this.scrollContainer),this.startListen()}),[{key:"startListen",value:function(){this.mouseToDrag&&(this.mouseToDrag.onDragStart=this.onMouseDragStart,this.mouseToDrag.onDragMove=this.onMouseDragMove,this.mouseToDrag.onDrop=this.onMouseDrop)}},{key:"_resetCursor",value:function(e){if(this._cursor||(this._cursor=document.createElement("ne-drag-cursor"),this.boundaryDOMNode.appendChild(this._cursor)),!this._lastRect||this._lastRect.x!==e.x||this._lastRect.y!==e.y){var t=this.boundaryDOMNode.getBoundingClientRect(),n=e.x-t.x,r=e.y-t.y;this._cursor.style.cssText="top: ".concat(r,"px; left: ").concat(n,"px; height: ").concat(e.height,"px")}}},{key:"_clearCursor",value:function(){this._cursor&&(this._cursor.remove(),this._lastRect=null,this._cursor=null)}},{key:"destroy",value:function(){this.dragImageNode&&(this.dragImageNode.remove(),this.dragImageNode=null),this._clearCursor(),this.autoScroll.reset(),this.mouseToDrag.reset(),this._cursor=null,this._lastRect=null}},{key:"_getRect",value:function(e,t){var n,r=t.node,o=t.offset,i=gc(r,"ne-card",this.boundaryDOMNode);if(i&&i===this.cardRootNode)return null;if(r.classList&&r.classList.contains("ne-b-filler"))n=r.getBoundingClientRect();else{var a=document.createRange();a.setStart(r,o),a.collapse(!0),n=a.getBoundingClientRect()}if(i){var l=i.getBoundingClientRect();return e>l.left+l.width/2?{x:l.right+1,y:l.top,height:l.height,node:i.parentNode,originNode:i,offset:Vd(i,1)}:{x:l.left-2-1,y:l.top,height:l.height,node:i.parentNode,originNode:i,offset:Vd(i,0)}}return 0===n.left&&0===n.top?null:{x:n.left-2-1,y:n.top,height:n.height||Hd(r),node:r,originNode:r,offset:o}}}])}();function NR(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,OR()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function OR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(OR=function(){return!!e})()}var xR=function(e){function t(){var e;return(0,Ke.A)(this,t),e=NR(this,t,arguments),Object.defineProperty(e,"_triggerRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"_boundaryRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"_destroyed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"state",{enumerable:!0,configurable:!0,writable:!0,value:{isMenuVisible:!1,tooltipVisible:!1,popoverPlacement:"leftTop"}}),Object.defineProperty(e,"_handleTooltipMouseEnter",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.setState({tooltipVisible:!0})}}),Object.defineProperty(e,"_handleTooltipMouseLeave",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.setState({tooltipVisible:!1})}}),Object.defineProperty(e,"_handleTooltipMouseDown",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.setState({tooltipVisible:!1})}}),Object.defineProperty(e,"_handleVisibleChange",{enumerable:!0,configurable:!0,writable:!0,value:function(t){if(e.props.onMenuVisibleChange&&e.props.onMenuVisibleChange(t),t||e._destroyed||e.setState({isMenuVisible:!1}),t){var n=e._triggerRef.current.getBoundingClientRect();e.setState({popoverPlacement:n.left>=240?"leftTop":"rightTop"})}}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){var e=this,t=this._triggerRef.current,n=!1;ud(this,t,"mousedown",(function(){n=!1,e.state.isMenuVisible||document.addEventListener("mouseup",(function r(o){document.removeEventListener("mouseup",r,!1),!n&&t.contains(o.target)&&e.showMenu()}),!1)}),!1),this.props.config.draggable&&new CR(this.props.dragBoundaryNode,this.props.overlayNode,this.props.targetNode,t,this.props.scrollContainer,(function(t){n=!1,e.props.onDrop(t)}),this.props.onDragStart)}},{key:"componentWillUnmount",value:function(){this._destroyed=!0}},{key:"showMenu",value:function(){var e=this;setTimeout((function(){e._destroyed||e.setState({isMenuVisible:!0})}),32)}},{key:"calcArrowPos",value:function(){var e,t=null===(e=this._triggerRef.current)||void 0===e?void 0:e.getBoundingClientRect();return(null==t?void 0:t.x)&&t.x<this.props.articleSpace?"topLeft":"top"}},{key:"render",value:function(){var e=this,t=Gu().createElement(Qx,{title:this._renderTooltipTitle(),visible:this.state.tooltipVisible,autoAdjustOverflow:!0,arrowPointAtCenter:!0,placement:this.calcArrowPos(),onMouseEnter:this._handleTooltipMouseEnter,onMouseLeave:this._handleTooltipMouseLeave,onMouseDown:this._handleTooltipMouseDown},Gu().createElement("div",{ref:this._triggerRef,className:nk()("ne-ui-container-toolbar-trigger",this.props.className),draggable:this.props.config.draggable},Gu().createElement(SC,{type:"drag",size:16}))),n=this.props.config.items?Gu().createElement("div",{className:"ne-container-toolbar",onMouseDown:function(e){e.stopPropagation(),e.preventDefault()},onContextMenu:function(e){e.preventDefault(),e.stopPropagation()},style:{minHeight:this.props.config.minHeight||0,paddingRight:6},onClick:function(t){t.target.closest(".ne-ui-container-toolbar-trigger")||e.props.onClickBackground()}},Gu().createElement(bR,{overlayClassName:"ne-container-toolbar-overlay",content:this._renderMenu(),onVisibleChange:this._handleVisibleChange,getPopupContainer:function(e){return e},onMouseDown:function(e){return e.stopPropagation()},trigger:"click",placement:this.state.popoverPlacement,visible:this.state.isMenuVisible},t)):t;return Gu().createElement(nR,{ref:this._boundaryRef,targetNode:this.props.targetNode,offset:this.props.config.offset||0,className:this.props.config.className,visible:!0,placement:"leftTop",positionHandle:this.props.config.positionHandle,options:{transformY:this.props.config.transformY}},n)}},{key:"updatePos",value:function(){this._boundaryRef.current&&this._boundaryRef.current.updatePos()}},{key:"_handleItemClick",value:function(){this.setState({isMenuVisible:!1})}},{key:"_renderTooltipTitle",value:function(){var e;return e=this.props.config.draggable?Gu().createElement(Gu().Fragment,null,Gu().createElement("div",null,Gu().createElement("span",null,sc("长按")),sc("拖拽")),Gu().createElement("div",null,Gu().createElement("span",null,sc("点击")),sc("打开菜单"))):Gu().createElement("div",null,Gu().createElement("span",null,sc("点击"),sc("打开菜单"))),Gu().createElement("div",{className:"ne-container-toolbar-tip"},e)}},{key:"_renderMenu",value:function(){var e=this,t=this.props.config.items.map((function(t,n){if("|"===t)return Gu().createElement(cP.Divider,{key:"divider-".concat(n)});var r=t.name+""+n;if("switch"===t.type)return e._renderSwitchItem(t,r);var o=TC(t),i=t.shortcut?Gu().createElement("span",{className:"ne-container-toolbar-item-shortcut"},t.shortcut):null;return Gu().createElement(cP.Item,{key:r,onClick:function(){e._handleItemClick(),t.onClick(t)}},Gu().createElement("div",{className:"ne-container-toolbar-item","data-action":t.name},o,jC(t),i))}));return Gu().createElement(cP,{className:"ne-card-container-menu ne-card-container-actions",selectable:!1,align:{offset:[0,0]}},t)}},{key:"_renderSwitchItem",value:function(e,t){var n,r=e.icon?Gu().createElement(SC,{type:e.icon}):null;return Gu().createElement(cP.Item,{key:t,className:"ne-container-toolbar-switch-item"},Gu().createElement("div",{className:"ne-container-toolbar-item","data-action":e.name},Gu().createElement("label",null,r,e.text,Gu().createElement(kR,{onClick:function(t){e.onClick(e,t)},defaultChecked:null===(n=e.isChecked)||void 0===n?void 0:n.call(e),size:"small"}))))}}])}(Yu.Component);function ER(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,DR()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function DR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(DR=function(){return!!e})()}Object.defineProperty(xR,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{onDrop:function(){},articleSpace:50}});var PR=function(e){function t(e,n,r,o,i){var a;return(0,Ke.A)(this,t),a=ER(this,t),Object.defineProperty(a,"_editBox",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(a,"_overlayContainer",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(a,"_targetNode",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(a,"_config",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(a,"_scrollContainer",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(a,"_overlay",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(a,"_isDestroyed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(a,"_showMiniToolbarWhen",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_containerToolbarViewRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(a,"_autoClose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_onContainerToolbarMenuVisibleChange",{enumerable:!0,configurable:!0,writable:!0,value:function(e){a.emit("menuVisibleChange",e)}}),a._showMiniToolbarWhen=o.showMiniToolbarWhen,a._autoClose=o.autoClose,a._open(),a}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"isRemoved",get:function(){return null===this._overlay||this._overlay.removed}},{key:"destroy",value:function(){var e=this;setTimeout((function(){e._overlay&&(e._overlay.cancel(),e._overlay=null)})),this._editBox=null,this._overlayContainer=null,this._targetNode=null,this._config=null,this._isDestroyed=!0,this.removeAllListeners()}},{key:"updatePos",value:function(){this._containerToolbarViewRef.current&&this._containerToolbarViewRef.current.updatePos()}},{key:"mountNode",get:function(){var e;return null===(e=this._overlay)||void 0===e?void 0:e.mountNode}},{key:"_open",value:function(){var e=this,t=this._config,n=this._overlayContainer,r=this._editBox,o=this._targetNode,i=this._showMiniToolbarWhen,a=this._scrollContainer,l=i?"".concat(i,"ContainerBar"):"containerBar";this._overlay=aR.openOnlyByType(l,{containerNode:n,targetNode:o,autoClose:this._autoClose,reactComponent:Gu().createElement(xR,{targetNode:o,ref:this._containerToolbarViewRef,dragBoundaryNode:r,overlayNode:n,scrollContainer:a,onDrop:t.onDrop,onDragStart:t.onDragStart,config:t,onMenuVisibleChange:this._onContainerToolbarMenuVisibleChange,onClickBackground:function(){var n;null===(n=e._overlay)||void 0===n||n.cancel(),"function"==typeof t.clickBackgroundHandle&&t.clickBackgroundHandle()}})})}},{key:"update",value:function(e){this._isDestroyed||(!this._overlay||this._overlay.removed?(this._config=e,this._open()):this.updatePos())}}])}(it);function RR(e,t){return e.filter((function(e){return"|"===e||("string"==typeof e?!t.includes(e):!t.includes(e.name))})).reduce((function(e,t,n,r){return"|"===t&&("|"===e[e.length-1]&&e.pop(),0===e.length||n===r.length-1)||e.push(t),e}),[])}var SR=function(){return{copy:{type:"item",icon:"c-tb-copy",appIcon:"editor-copy",text:sc("复制")},delete:{type:"item",icon:"c-tb-delete",appIcon:"editor-delete",text:sc("删除")},copyLink:{type:"item",icon:"c-tb-copy-link",appIcon:"editor-copy-link",text:sc("复制链接")},cut:{type:"item",icon:"cut",appIcon:"editor-cut",text:sc("剪切")},spacing:{type:"switch",icon:"c-tb-spacing",text:sc("添加间距"),isChecked:function(){return!1}},maximize:{type:"item",icon:"c-tb-maximize",appIcon:"editor-maximize",text:sc("全屏")},widthMode:{type:"item",icon:function(e){return e.getWidthMode()===Dl?"c-tb-width-mode-fold":"c-tb-width-mode-unfold"},text:function(e){return e.getWidthMode()===Dl?sc("标宽展示"):sc("全宽展示")}},comment:{type:"item",icon:"card-tb-comment",text:sc("评论")}}},TR=SR();function jR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}ac.on(ic.CHANGE,(function(){TR=SR()}));var IR=new WeakMap,BR=new WeakMap,MR=new WeakMap,FR=new Set,LR=new Set,UR=function(){function e(){(0,Ke.A)(this,e)}return(0,$e.A)(e,null,[{key:"_setCurrentDOM",value:function(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(n.has(t))return!0;var i,a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return jR(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jR(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(n);try{for(a.s();!(i=a.n()).done;){var l=i.value,u=r.get(l);if(u&&!u.isRemoved&&t!==l&&t.contains(l))return!1;o.includes("containerToolbar")&&e.destroyContainerToolbar(l),o.includes("cardToolbar")&&e.destroyCardToolbar(l)}}catch(e){a.e(e)}finally{a.f()}return n.clear(),n.add(t),!0}},{key:"filter",value:function(e,t){return RR(e,t)}},{key:"updateContainerToolbar",value:function(e,t,n,r,o){if(Us.mobile)return null;var i=IR.get(e);return o&&this._setCurrentDOM(e,FR,IR,["containerToolbar"])?(i?i.update(o):(i=new PR(t,n,e,o,r),IR.set(e,i)),i):void 0}},{key:"updateContainerToolbarPos",value:function(e){var t=IR.get(e);t&&t.updatePos()}},{key:"destroyContainerToolbar",value:function(e){var t;FR.has(e)&&FR.clear(),IR.has(e)&&(null===(t=IR.get(e))||void 0===t||t.destroy(),IR.delete(e))}},{key:"updateCardToolbar",value:function(e,t,n,r,o){var i=BR.get(e);if(null==r?void 0:r.length){if(this._setCurrentDOM(e,LR,BR,["cardToolbar"]))return i?i.update(r):(i=new lR(e,t,n,r,o),BR.set(e,i)),i}else this.destroyCardToolbar(e)}},{key:"updateCardToolbarPos",value:function(e){var t=BR.get(e);t&&t.updatePos()}},{key:"destroyCardToolbar",value:function(e){var t;e&&(LR.has(e)&&LR.clear(),BR.has(e)&&(null===(t=BR.get(e))||void 0===t||t.destroy(),BR.delete(e)))}},{key:"updateContainerRightToolbar",value:function(e,t,n,r){var o=MR.get(e);if(r)return o?o.update(r):(o=new hR(t,n,e,r),MR.set(e,o)),o}},{key:"updateContainerRightToolbarPos",value:function(e){var t=MR.get(e);t&&t.updatePos()}},{key:"destroyContainerRightToolbar",value:function(e){var t;MR.has(e)&&(null===(t=MR.get(e))||void 0===t||t.destroy(),MR.delete(e))}},{key:"generateToolbarItems",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.map((function(e){if("|"===e)return"|";bt(e.name&&e.onClick,"framework/uilib/src/mini-toolbar/index.ts:266");var n=TR[e.name];return t&&(null==n?void 0:n.appIcon)&&(n.icon=n.appIcon,delete n.appIcon),Object.assign(Object.assign({},n),e)}))}}])}(),VR=6,HR=function(e){return e},zR=HR({pluginName:"miniToolbar",service:{IMiniToolbarService:"IMiniToolbarService"}});function WR(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,qR()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function qR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qR=function(){return!!e})()}var $R=function(e){function t(){var e;return(0,Ke.A)(this,t),e=WR(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Qe);Object.defineProperty($R,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze(zR.service.IMiniToolbarService)});var KR=function(){return(0,$e.A)((function e(t,n,r,o,i,a,l){var u=this;(0,Ke.A)(this,e),Object.defineProperty(this,"viewer",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_instance",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"_cardData",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"_getCardToolbarConfig",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"_getContainerToolbarConfig",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"_getContainerRightToolbarConfig",{enumerable:!0,configurable:!0,writable:!0,value:l}),Object.defineProperty(this,"_isHover",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_cardToolbar",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_containerToolbar",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_containerRightToolbar",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_isShowToolbar",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_showToolbar",{enumerable:!0,configurable:!0,writable:!0,value:function(){u.viewer.isMaxView()||(u._rootNode.classList.add("ne-card-hovered"),u._isHover=!0,u.getCardToolbarConfig()&&u._initCardToolbar(),u.getContainerToolbarConfig()&&u._initContainerToolbar(),u.getContainerRightToolbarConfig()&&u._initContainerRightToolbar())}}),Object.defineProperty(this,"_hideToolbar",{enumerable:!0,configurable:!0,writable:!0,value:function(){u._rootNode.classList.remove("ne-card-hovered"),u._isHover=!1}}),Object.defineProperty(this,"_destroyToolbar",{enumerable:!0,configurable:!0,writable:!0,value:function(){UR.destroyContainerToolbar(u.getContainerToolbarRootNode()),UR.destroyCardToolbar(u.getCardToolbarRootNode()),UR.destroyContainerRightToolbar(u.getCardToolbarRootNode())}}),Object.defineProperty(this,"_initCardToolbar",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=u.viewer,t=e.scrollNode,n=e.innerOverlayContainer;u._cardToolbar=UR.updateCardToolbar(u.getCardToolbarRootNode(),n,t,u._transformToolbarItem(u.getCardToolbarConfig(),"mini",u.viewer),{topOffset:u.viewer.option.boundaryTopOffset})}}),Object.defineProperty(this,"_initContainerToolbar",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=u.getContainerToolbarConfig(),t=u._needTransform()?14:0,n=Object.assign(Object.assign({},e),{items:u._transformToolbarItem(e.items,"container",u.viewer),transformY:e.transformY||t,minHeight:u.getContainerToolbarRootNode().getBoundingClientRect().height});if(!function(e){var t;return!(null===(t=e.items)||void 0===t?void 0:t.length)&&!e.draggable&&!(e.className||e.positionHandle||e.onDrop)}(n)){var r=u.viewer,o=r.viewerBodyNode,i=r.innerOverlayContainer,a=r.scrollNode;u._containerToolbar=UR.updateContainerToolbar(u.getContainerToolbarRootNode(),o,i,a,n)}}}),Object.defineProperty(this,"_initContainerRightToolbar",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=u.viewer,t=e.viewerBodyNode,n=e.innerOverlayContainer,r=u.getContainerRightToolbarConfig(),o=Us.mobile?1:VR+1,i=u.getContainerRightToolbarRootNode(),a=gc(i,"ne-collapse"),l=Object.assign(Object.assign({},r),{items:u._transformToolbarItem(r.items,"containerRight",u.viewer),transformY:u._needTransform()?14:0,minHeight:i.getBoundingClientRect().height,paddingLeft:a?o+a.getBoundingClientRect().right-i.getBoundingClientRect().right:o});r&&(u._containerRightToolbar=UR.updateContainerRightToolbar(i,t,n,l))}})}),[{key:"init",value:function(){this._initToolbar()}},{key:"refresh",value:function(){this._refreshToolbar()}},{key:"destroy",value:function(){this.viewer=null,this._instance=null,this._rootNode=null,this._cardData=null,this._getCardToolbarConfig=null,this._getContainerToolbarConfig=null,this._getContainerRightToolbarConfig=null}},{key:"getCardToolbarConfig",value:function(){return"function"==typeof this._getCardToolbarConfig?this._getCardToolbarConfig.call(this._instance):null}},{key:"getContainerToolbarConfig",value:function(){return"function"==typeof this._getContainerToolbarConfig?this._getContainerToolbarConfig.call(this._instance):null}},{key:"getContainerRightToolbarConfig",value:function(){return"function"==typeof this._getContainerRightToolbarConfig?this._getContainerRightToolbarConfig.call(this._instance):null}},{key:"showToolbar",value:function(){this._isShowToolbar=!0}},{key:"hideToolbar",value:function(){this._isShowToolbar=!1,this._hideToolbar()}},{key:"destroyToolbar",value:function(){this._destroyToolbar()}},{key:"getCardToolbarRootNode",value:function(){return this._rootNode}},{key:"getContainerToolbarRootNode",value:function(){return this._rootNode}},{key:"getContainerRightToolbarRootNode",value:function(){return this._rootNode}},{key:"_transformToolbarItem",value:function(e){var t,n,r=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mini",i=arguments.length>2?arguments[2]:void 0;if(!e)return e;e=e.map((function(e){var t,n;return"|"===e?e:("string"!=typeof e?(n=e.name,e=Object.assign({onClick:gC[n]},e)):e={name:n=e,onClick:gC[n]},bt("object"===(0,Gn.A)(e),"framework/viewer/src/v-toolbar/index.ts:193"),"copyLink"===n&&"function"!=typeof i.option.generateCardLink?null:"comment"!==n||(null===(t=i.option.get("comments"))||void 0===t?void 0:t.enableCardComment)&&!i.option.isTranslateMode?Object.assign(Object.assign({},e),{name:n,cardData:r._cardData,onClick:function(){var t,i;bt("object"===(0,Gn.A)(e),"framework/viewer/src/v-toolbar/index.ts:217"),e.onClick&&e.onClick(r.viewer,r._instance,e);var a=(null===(i=null===(t=r._instance)||void 0===t?void 0:t.cardNode)||void 0===i?void 0:i.nodeName)||"table";r.viewer.emitEvent("userAction",{type:"cardToolbar",name:n,source:"".concat(a,"|").concat(o)})}}):null)})).filter(Boolean);var a=this.viewer.getService($R.ID);return a&&(e=UR.filter(e,a.getDisabledMiniToolbarItems())),a&&(e=UR.filter(e,a.getFilterMiniToolbarItems(this._instance.modelNode,e))),(null===(n=null===(t=this._rootNode)||void 0===t?void 0:t.closest)||void 0===n?void 0:n.call(t,"ne-container-hole, ne-alert-hole"))&&(e=UR.filter(e,["widthMode"])),UR.generateToolbarItems(e)}},{key:"_initToolbar",value:function(){pc(this,this._rootNode,"mouseenter",this._showToolbar),pc(this,this._rootNode,"mouseleave",this._hideToolbar)}},{key:"_refreshToolbar",value:function(){this._isHover&&this._showToolbar()}},{key:"_needTransform",value:function(){return this.viewer.kernel.hasExtendMethod("isParagraphSpacingRelax")&&!this.viewer.kernel.isParagraphSpacingRelax()&&"NE-TABLE-WRAP"===this._rootNode.nodeName}}])}();function YR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function GR(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,JR()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function JR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(JR=function(){return!!e})()}var XR=function(e){function t(e,n,r){var o;(0,Ke.A)(this,t),o=GR(this,t),Object.defineProperty(o,"_mountDOMNode",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(o,"_vLayerManager",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_registry",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_plugins",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(o,"_theme",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_renderer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(o,"_viewerDoc",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(o,"_loadedTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(o,"_rootNodeObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_rootNodeForceObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_documentObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_recordInCollapsedNodes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(o,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"registerBoxNode",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return o._registry.registerBoxNode(e,t,n)}}),Object.defineProperty(o,"execCommand",{enumerable:!0,configurable:!0,writable:!0,value:function(e){for(var n,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return(n=Tr((0,Je.A)(t.prototype),"execCommand",o)).call.apply(n,[o,e].concat(i))}}),Object.defineProperty(o,"queryCommandState",{enumerable:!0,configurable:!0,writable:!0,value:function(e){for(var n,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return(n=Tr((0,Je.A)(t.prototype),"queryCommandState",o)).call.apply(n,[o,e].concat(i))}}),Object.defineProperty(o,"queryCommandEnabled",{enumerable:!0,configurable:!0,writable:!0,value:function(e){for(var n,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return(n=Tr((0,Je.A)(t.prototype),"queryCommandEnabled",o)).call.apply(n,[o,e].concat(i))}}),Object.defineProperty(o,"queryCommandValue",{enumerable:!0,configurable:!0,writable:!0,value:function(e){for(var n,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return(n=Tr((0,Je.A)(t.prototype),"queryCommandValue",o)).call.apply(n,[o,e].concat(i))}}),o._option=new Xw(o,r),o._kernel=e.createKernel(r),o.id=o._kernel.id,o._registry=new hp,o._vLayerManager=new Hw(o,n),o._$commandUnderlay=o._kernel,o._rootNodeObserver=new hd(o.id,o.domRootNode,(function(e){if(Ac(e,o.domRootNode))return!1})),o._rootNodeForceObserver=new hd(o.id,o.domRootNode),o._documentObserver=new hd(o.id,o.domRootNode.ownerDocument);var i=new mu(o.domRootNode);return o._theme=i,o._init(e.viewerPlugins,r||{}),i.updateStyles(),o}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"_init",value:function(e,t){var n=this,r=this._kernel,o=this._option,i=o.disabledPlugins;o.envAdapter._init(this),e.forEach((function(e){var o=e.PluginName;if(!i.includes(o)){var a=e.PluginOption,l=e.Service,u=e.Commands,c=e.Colors,s=null;a&&(bt(a.OptionName,"framework/viewer/src/viewer.ts:149"),(s=new a(t[a.OptionName],r.option)).kernelOption=r.option);var d=new e(n,r,s);if(l){var f=new l(n,r,d);n.registerService(f),d.setService(f)}n._createCommand(u,d),c&&Object.keys(c).forEach((function(e){mu.colorRegistry.registerColor(e,c[e])})),bt(d instanceof Sw,"framework/viewer/src/viewer.ts:180"),n._plugins.push(d),n._plugins[o]=d}})),this._plugins.forEach((function(e){e.init(n,r)})),this._kernel.model.on("document.create",(function(e){n._viewerDoc=new EA(n,n._registry,e,n._vLayerManager.viewerBodyNode),n._viewerDoc.on("viewerNodeInited",n.emit.bind(n,"viewerNodeInited")),n._viewerDoc.once("ready",(function(){n._renderer=new HA(n,n._viewerDoc),n._renderer.on("ready",(function(){n.emit("ready"),n.loaded()})),n._renderer.on("firstRender",(function(){n.emit("firstRender")})),n._renderer.render()}))})),this._kernel.model.on("document.destroy",(function(){var e,t;null===(e=n._viewerDoc)||void 0===e||e.destroy(),null===(t=n._renderer)||void 0===t||t.destroy()})),this._kernel.onPluginEvent("dynamicData_dynamicDataRecordChange",(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.emit.apply(n,["dynamicDataChange"].concat(t))}))}},{key:"_createCommand",value:function(e,t){var n=this;if(e){var r=this._kernel,o={};Array.isArray(e)?(e.forEach((function(e){var i=e.ID;bt(i,"framework/viewer/src/viewer.ts:241"),o[i]=new e(n,r,t)})),this.registerCommand(o)):"object"===(0,Gn.A)(e)&&(Object.keys(e).forEach((function(i){var a=e[i];bt(i,"framework/viewer/src/viewer.ts:248"),bt(!o[i],"duplicate command ID ".concat(i),"framework/viewer/src/viewer.ts:249"),o[i]=new a(n,r,t)})),this.registerCommand(o))}}},{key:"destroy",value:function(){var e,t;this.emit("beforedestroy"),this._plugins.forEach((function(e){e.destroy()})),this._plugins=null,this._option=null,this._documentObserver.destroy(),this._documentObserver=null,this._rootNodeObserver.destroy(),this._rootNodeObserver=null,this._rootNodeForceObserver.destroy(),this._rootNodeForceObserver=null,this._registry.destroy(),this._registry=null,this._kernel.destroy(),this._kernel=null,null===(e=this._viewerDoc)||void 0===e||e.destroy(),this._viewerDoc=null,null===(t=this._renderer)||void 0===t||t.destroy(),this._renderer=null,this._vLayerManager.destroy(),this._vLayerManager=null,this._mountDOMNode=null,this._domRootNode=null,this._loadedTimer&&clearTimeout(this._loadedTimer)}},{key:"option",get:function(){return this._option}},{key:"viewer",get:function(){return this}},{key:"registry",get:function(){return this._registry}},{key:"kernel",get:function(){return this._kernel}},{key:"domRootNode",get:function(){return this._vLayerManager.domRootNode}},{key:"layerManager",get:function(){return this._vLayerManager}},{key:"viewerBodyNode",get:function(){return this._vLayerManager.viewerBodyNode}},{key:"overlayContainer",get:function(){return this._vLayerManager.overlayContainer}},{key:"innerOverlayContainer",get:function(){return this._vLayerManager.innerOverlayContainer}},{key:"theme",get:function(){return this._theme}},{key:"getRenderDOMNode",value:function(){return this._vLayerManager.viewerBodyNode}},{key:"setDocument",value:function(){var e;(e=this._kernel).setDocument.apply(e,arguments)}},{key:"getDocument",value:function(){var e;return(e=this._kernel).getDocument.apply(e,arguments)}},{key:"registerAttrTranslator",value:function(e,t){return this._registry.registerAttrTranslator(e,t)}},{key:"registerInlineCard",value:function(){var e;return(e=this._registry).registerInlineCard.apply(e,arguments)}},{key:"registerBlockCard",value:function(){var e;return(e=this._registry).registerBlockCard.apply(e,arguments)}},{key:"sendMessage",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.emit.apply(this,["message"].concat(t))}},{key:"onMessage",value:function(e){this.on("message",e)}},{key:"getViewerContext",value:function(){var e=this.kernel.getDocExtraContent();return{outline:(null==e?void 0:e.toc)||[]}}},{key:"enterMaxViewById",value:function(e){if(this.kernel.document){var t=this.kernel.document.getNodeById(e);if(t){var n=t._viewerNode;bt(n,"framework/viewer/src/viewer.ts:438");var r=n.getMainDOMNode();n.hasCategory(qe.Table)&&(r=r.parentNode),this.enterMaxView(r)}}}},{key:"enterMaxView",value:function(e,t,n,r,o){this.emit("beforeEnterMaxView",e,{id:null==n?void 0:n.id}),this._vLayerManager.enterMaxView(e,t,r,o)&&this.emit("enterMaxView")}},{key:"exitMaxView",value:function(){this.emit("beforeLeaveMaxView"),this._vLayerManager.exitMaxView()&&this.emit("leaveMaxView")}},{key:"createDrawer",value:function(){var e;return null===(e=this._viewerDoc)||void 0===e?void 0:e.createDrawer()}},{key:"loaded",value:function(){var e=this,t=!1;this._loadedTimer=setTimeout((function(){t||(t=!0,console.warn("viewer loaded timeout"),e.emit("loaded"))}),this._option.loadedTimeout),Promise.all(Object.keys(this._plugins).map((function(t){return Number.isNaN(Number(t))?e._plugins[t].loaded():t}))).then((function(){t||(t=!0,e.emit("loaded"))})).catch((function(n){console.error("viewer loaded error",n),t||(t=!0,e.emit("loaded"))}))}},{key:"scrollNode",get:function(){return this.option.getScrollNode()}},{key:"inCollapsedNodes",get:function(){return this._recordInCollapsedNodes}},{key:"emitEvent",value:function(){this.emit.apply(this,arguments)}},{key:"createCardUI",value:function(e){var t=e.constructor,n=t.$CardUI,r=t.name;if("function"!=typeof n)throw new Error("未在 CardNode 类上声明静态属性 $CardUI，无法创建卡片UI：".concat(r));var o=new n(this,e);e._$cardUI=o;for(var i=arguments.length,a=new Array(i>1?i-1:0),l=1;l<i;l++)a[l-1]=arguments[l];return e._$cardUIInitArgs=a,this.option.viewerMode!==Vw.Simple&&e.isInCollapsed?this._recordInCollapsedNodes.push(e):o.init.apply(o,a),o}},{key:"removeInCollapsedNodes",value:function(e){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return YR(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?YR(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,o=this._recordInCollapsedNodes.indexOf(r);o>=0&&this._recordInCollapsedNodes.splice(o,1)}}catch(e){n.e(e)}finally{n.f()}}},{key:"onRootNode",value:function(){var e;return(e=this._rootNodeObserver).on.apply(e,arguments)}},{key:"onceRootNode",value:function(){var e;return(e=this._rootNodeObserver).once.apply(e,arguments)}},{key:"onForceRootNode",value:function(){var e;return(e=this._rootNodeForceObserver).on.apply(e,arguments)}},{key:"onDocument",value:function(){var e;return(e=this._documentObserver).on.apply(e,arguments)}},{key:"onceDocument",value:function(){var e;return(e=this._documentObserver).once.apply(e,arguments)}},{key:"isMaxView",value:function(){return this._vLayerManager.isMaxView}},{key:"createComment",value:function(e){var t=zA(0,e);if(t&&t.length>0){var n=this.getExtendMethod("wording_comment");bt("function"==typeof n,"framework/viewer/src/viewer.ts:648"),n(t,!0)}}},{key:"transformDOMRangeToViewRange",value:function(e){return qA(this,e)}},{key:"getViewerDisplayWidth",value:function(e){return this._vLayerManager.getViewerDisplayWidth(e)}},{key:"login",value:function(){this.emitEvent("login")}}])}(wu);function QR(e){return e}function ZR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ZR=function(){return!!e})()}function eS(e){return function(e){function t(){return(0,Ke.A)(this,t),function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,ZR()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getCardMaskConfig",value:function(){return!1}},{key:"onBeforeRefreshMask",value:function(){return!0}},{key:"refreshMask",value:function(){return this._refreshMask()}},{key:"_refreshMask",value:function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this.onBeforeRefreshMask()){var e=this.getCardMaskConfig();Wh.update(this,e)}}},{key:"_destroyMask",value:function(){Wh.destroyMask(this)}},{key:"afterInit",value:function(){this._refreshMask(!0),Tr((0,Je.A)(t.prototype),"afterInit",this).call(this)}},{key:"destroy",value:function(){this._destroyMask(),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}}])}(e)}function tS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(tS=function(){return!!e})()}function nS(e){return function(e){function t(){return(0,Ke.A)(this,t),function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,tS()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"beforeMaximizeChanged",value:function(e){}},{key:"afterMaximizeChanged",value:function(e){}},{key:"onCommonLeaveMaxViewAsync",value:function(){}},{key:"onCommonEnterMaxView",value:function(){}},{key:"enterMaxView",value:function(e){var t=this;this.beforeMaximizeChanged(!0),this.onCommonEnterMaxView(),this.viewer.enterMaxView(this.cardRootNode,e,this.cardNode,(function(){t.beforeMaximizeChanged(!1)}),(function(){Promise.resolve().then((function(){t.onCommonLeaveMaxViewAsync()})),t.afterMaximizeChanged(!1)})),this.afterMaximizeChanged(!0)}}])}(e)}function rS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rS=function(){return!!e})()}function oS(e){return function(e){function t(){var e;(0,Ke.A)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,rS()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,[].concat(r)),Object.defineProperty(e,"resizeTarget",{enumerable:!0,configurable:!0,writable:!0,value:null}),e._cardData.on("heightChange",(function(t){var n=t.newHeight,r=t.oldHeight;e.heightChanged(n,r),e.refreshResizer()})),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"afterInit",value:function(){var e=this;this._resizeCardHeight(),this._cardData&&xc(this,this._cardData,"cardHeightReset",(function(){e.containerNode.style.height=""})),Tr((0,Je.A)(t.prototype),"afterInit",this).call(this)}},{key:"destroy",value:function(){this._destroyResizer(),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}},{key:"getResizerConfig",value:function(){return!0}},{key:"heightChanged",value:function(e,t){}},{key:"refreshResizer",value:function(){return this._refreshResizer()}},{key:"resizeCardHeight",value:function(){return this._resizeCardHeight()}},{key:"_resizeCardHeight",value:function(){var e;if(this._cardData){var t=this._cardData.getCardHeight();if(this.getResizerConfig()&&t){var n=this.containerNode;this.resizeTarget&&(n=this.resizeTarget,"function"==typeof this.resizeTarget&&(n=this.resizeTarget())),n&&(null===(e=this.modelNode)||void 0===e?void 0:e.hasCategory(qe.BlockCard))&&(n.style.height=t+"px")}}}},{key:"_refreshResizer",value:function(){var e=this,t=this.getResizerConfig();"boolean"!=typeof t&&(this._resizeCardHeight(),Qh.update(this,this.viewer.viewerBodyNode,this.cardRootNode,this.resizeTarget||this.containerNode,t,(function(t){e._cardData&&(e._cardData._resetCardValue(e._cardData.__getCardValueWithNewHeight(t)),e._cardData.sync(!1))})))}},{key:"_destroyResizer",value:function(){Qh.destroyResizer(this)}}])}(e)}function iS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(iS=function(){return!!e})()}function aS(e){return function(e){function t(){return(0,Ke.A)(this,t),function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,iS()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"afterInit",value:function(){this._initCardSpacing(),Tr((0,Je.A)(t.prototype),"afterInit",this).call(this)}},{key:"_initCardSpacing",value:function(){if(this._cardData){var e=this.cardNode.modelNode;if("image"!==e.nodeName&&!e.hasCategory(qe.BlockCard))return;var t=this._cardData.getCardSpacing(),n=this._cardRootNode,r=n;"NE-HOLE"!==n.parentNode.nodeName&&"NE-ROOT-CARD-HOLE"!==n.parentNode.nodeName||(r=n.parentNode),t===Nl?r.classList.add("ne-spacing-all"):t===Ol?r.classList.add("ne-spacing-top"):t===xl&&r.classList.add("ne-spacing-bottom")}}}])}(e)}function lS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(lS=function(){return!!e})()}function uS(e){return function(e){function t(){var e;(0,Ke.A)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,lS()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,[].concat(r)),Object.defineProperty(e,"_vToolbar",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e._viewer.option.disableToolbar||(e._vToolbar=new KR(e._viewer,e,e._cardRootNode,e._cardData,e.getCardToolbarConfig.bind(e),e._viewer.option.viewerMode===Vw.Present?null:e._filterGetContainerToolbarConfig.bind(e),e.getContainerRightToolbarConfig.bind(e))),e._cardData&&e._cardData.on("widthModeChange",(function(){e._refreshToolbar()})),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getCardToolbarConfig",value:function(){return null}},{key:"getContainerToolbarConfig",value:function(){return null}},{key:"getContainerRightToolbarConfig",value:function(){return null}},{key:"refreshToolbar",value:function(){this._refreshToolbar()}},{key:"showAllToolbar",value:function(){var e;null===(e=this._vToolbar)||void 0===e||e.showToolbar()}},{key:"hideAllToolbar",value:function(){var e;null===(e=this._vToolbar)||void 0===e||e.hideToolbar()}},{key:"_refreshToolbar",value:function(){var e;null===(e=this._vToolbar)||void 0===e||e.refresh()}},{key:"_initToolbar",value:function(){var e;null===(e=this._vToolbar)||void 0===e||e.init()}},{key:"_destroyToolbar",value:function(){var e;null===(e=this._vToolbar)||void 0===e||e.destroyToolbar()}},{key:"afterInit",value:function(){this._initToolbar(),Tr((0,Je.A)(t.prototype),"afterInit",this).call(this)}},{key:"_filterGetContainerToolbarConfig",value:function(){var e,t,n,r,o=(null===(r=null===(n=null===(t=null===(e=this.viewer)||void 0===e?void 0:e.option)||void 0===t?void 0:t.get)||void 0===n?void 0:n.call(t,"clipboard"))||void 0===r?void 0:r.preventCopy)||!1,i=this.getContainerToolbarConfig();return i?(i.items=(i.items||[]).filter((function(e){return!o||"copy"!==e&&"copy"!==(null==e?void 0:e.name)})),i):i}}])}(e)}function cS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(cS=function(){return!!e})()}function sS(e){return function(e){function t(){var e;(0,Ke.A)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,cS()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,[].concat(r)),e._cardData&&e._cardData.on("widthModeChange",(function(){e._refreshCardWidthMode()})),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"afterInit",value:function(){this._refreshCardWidthMode(),Tr((0,Je.A)(t.prototype),"afterInit",this).call(this)}},{key:"_refreshCardWidthMode",value:function(){var e=this._cardData.getWidthMode(),t=this._cardRootNode.parentNode,n=t;"NE-HOLE"!==t.parentNode.nodeName&&"NE-ROOT-CARD-HOLE"!==t.parentNode.nodeName||(n=t.parentNode),e===Dl?n.classList.add("ne-full-width"):n.classList.remove("ne-full-width")}}])}(e)}function dS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(dS=function(){return!!e})()}function fS(e){return function(e){function t(){var e;(0,Ke.A)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,dS()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,[].concat(r)),e._cardData.on("widthModeChange",(function(){var t=e.viewer.getExtendMethod("wording_rerenderWording");t&&t()})),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"createComment",value:function(){this.viewer.createComment(this.cardNode._domNode)}}])}(e)}function hS(e){if(!(e instanceof yw))throw new Error("invalid viewer node")}function pS(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,vS()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function vS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vS=function(){return!!e})()}var mS=function(e){function t(){var e;return(0,Ke.A)(this,t),e=pS(this,t,arguments),Object.defineProperty(e,"viewerPlugins",{enumerable:!0,configurable:!0,writable:!0,value:[]}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"createViewer",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];try{var r;window.BEFORE_CREATE_VIEWER&&(r=window).BEFORE_CREATE_VIEWER.apply(r,[this].concat(t))}catch(e){console.error(e)}var o=vl(XR,[this].concat(t));try{window.AFTER_CREATE_VIEWER&&window.AFTER_CREATE_VIEWER(o)}catch(e){console.error(e)}return o}},{key:"registerViewerPlugin",value:function(e){return t.addPluginToPool(e,this.viewerPlugins),this}},{key:"registerKernelPlugin",value:function(e){return Tr((0,Je.A)(t.prototype),"registerKernelPlugin",this).call(this,e),this}}])}(ml);const gS=XR;function bS(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,yS()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function yS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(yS=function(){return!!e})()}var wS=function(e){function t(){var e;return(0,Ke.A)(this,t),e=bS(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(rt);function AS(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,kS()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function kS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(kS=function(){return!!e})()}Object.defineProperty(wS,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze("IHTMLKernelService")});var _S=function(e){function t(){var e;return(0,Ke.A)(this,t),e=AS(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(rt);Object.defineProperty(_S,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze("ILakeKernelService")});var CS,NS=function(){return(0,$e.A)((function e(t,n,r,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return!0};(0,Ke.A)(this,e),Object.defineProperty(this,"_editing",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_pattern",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"_handler",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"_blockNodes",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"canInsertPosition",{enumerable:!0,configurable:!0,writable:!0,value:i})}),[{key:"destroy",value:function(){delete this._editing,delete this._pattern,delete this._handler,delete this._blockNodes}},{key:"match",value:function(e,t){if(!this.canInsertPosition(t))return null;if(1!==e.length)return null;var n=e[e.length-1];if(!n)return null;bt(1===n.fragments.length,"plugins/markdown/src/public/head-markdown-matcher.ts:74");var r=null,o=[];if("string"==typeof this._pattern){if(n.text!==this._pattern)return null;r=this._pattern}else{var i="function"==typeof this._pattern?this._pattern(n.text):this._pattern.exec(n.text);if(!i)return null;for(var a=1;a<i.length;a++)o.push(i[a]);r=RegExp.lastMatch}for(var l=0,u=e.length-1;l<u;l++){var c=e[l];if(!c)return null;if(!c.text)return null}var s=Ut.closest(n.fragments[0].start.node,qe.Block);if(this._blockNodes)if("function"==typeof this._blockNodes){if(!this._blockNodes(s))return null}else if(!s.hasCategory(this._blockNodes))return null;return bt(s,"plugins/markdown/src/public/head-markdown-matcher.ts:133"),{section:e,blockNode:s,matchedText:r,matchedGroup:o}}},{key:"exec",value:function(e){var t=this._editing.newJob(We.User),n=e.section,r=e.blockNode,o=e.matchedText,i=n[n.length-1].fragments[0].start.node;t.setTextNodeData(i,i.data.substring(o.length)),this._handler(t,r,i,e),this._editing.commitJob(t)}}])}(),OS=HR({pluginName:"markdown",service:{IMarkdownKernelService:"IMarkdownKernelService"}});function xS(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,ES()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function ES(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ES=function(){return!!e})()}!function(e){e.whiteSpace="whiteSpace",e.enter="enter"}(CS||(CS={}));var DS=function(e){function t(){var e;return(0,Ke.A)(this,t),e=xS(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(rt);Object.defineProperty(DS,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze(OS.service.IMarkdownKernelService)});var PS="alert",RS="info",SS="warning",TS="danger",jS="success",IS="tips",BS="color1",MS="color2",FS="color3",LS="color4",US="color5",VS=[RS,SS,TS,jS,IS,BS,MS,FS,LS,US],HS=[IS,RS,BS,MS,jS,SS,FS,TS,LS,US];const zS={type:{targets:["alert"],values:VS}},WS={alert:{parents:[qe.AlertHole],excludes:[qe.VirtualLikeRoot],category:[qe.LikeRoot,qe.VirtualLikeRoot,qe.Brick]}};var qS=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Ww()({},t)}),[{key:"onAfterKernelPluginInit",get:function(){return this._option.onAfterKernelPluginInit}}])}();function $S(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,KS()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function KS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(KS=function(){return!!e})()}Object.defineProperty(qS,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"alert"});var YS=function(e){function t(){return(0,Ke.A)(this,t),$S(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){var t=e.getSelection();return t.isCardSelection||t.isTableSelection?pt.UNAVAILABLE:pt.NOT_EXECUTED}},{key:"execute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:VS[0],n=e.newJob();if(this.getState(n)===pt.UNAVAILABLE)return e.cancelJob(n),!1;var r=n.getSelection();r.collapsed||(r=wi.deleteContent(n,r)),bt.fatal(r.collapsed,"plugins/alert/src/kernel/commands/alert-command.ts:39");var o=r.firstRange.start,i=o.node.closest(qe.Block);i&&Ut.isLikeEmptyElement(i)&&(o=n.newPosition(i.parentNode,i.offset),n.removeChild(i.parentNode,i));var a=n.createHole("alertHole"),l=n.createElement("alert",{type:t}),u=n.createElement(n.defaultElementName);return n.appendChild(l,u),n.appendChild(a,l),wr.insertNodes(n,o,[a]),n.setSelection([n.newRange(n.newPosition(u,0))]),e.commitJob(n),!0}}])}(pt);function GS(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,JS()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function JS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(JS=function(){return!!e})()}var XS=function(e){function t(){return(0,Ke.A)(this,t),GS(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t){var n=e.newJob(),r=n.getNodeById(t);if("alert"!==(null==r?void 0:r.nodeName))return!1;var o=wi.deleteContent(n,n.selectNode(r));return bt.fatal(o.collapsed,"plugins/alert/src/kernel/commands/alert-delete-command.ts:19"),n.setSelection(o),e.commitJob(n),!0}}])}(pt);function QS(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,ZS()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function ZS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ZS=function(){return!!e})()}var eT=function(e){function t(){return(0,Ke.A)(this,t),QS(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t,n){var r=e.newJob(),o=r.getNodeById(t);o&&o.isConnected&&"alert"===(null==o?void 0:o.nodeName)?(wr.insertNodes(r,n,[o.parentNode]),r.setSelection(r.selectNode(o)),e.commitJob(r)):e.cancelJob(r)}}])}(pt);function tT(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,nT()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function nT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nT=function(){return!!e})()}var rT=function(e){function t(){return(0,Ke.A)(this,t),tT(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getValue",value:function(e,t){bt.fatal(t,"plugins/alert/src/kernel/commands/alert-type-command.ts:8");var n=e.getNodeById(t);return bt.fatal(n,"plugins/alert/src/kernel/commands/alert-type-command.ts:12"),n.attrs.type}},{key:"execute",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:VS[0],r="string"==typeof t?[t]:t,o=e.newJob(),i=r.map((function(e){return o.getNodeById(e)})).filter((function(e){return"alert"===(null==e?void 0:e.nodeName)}));return!!i.length&&(i.forEach((function(e){o.setAttribute(e,"type",n)})),e.commitJob(o),!0)}}])}(pt),oT={LOCAL_STORAGE_KEY:"lake-alert",load:function(){var e=null,t=Nf.getItem(this.LOCAL_STORAGE_KEY);if(t)try{e=JSON.parse(t)}catch(e){console.error("invalid data:",t)}return e},save:function(e){var t={type:e.type};Nf.setItem(this.LOCAL_STORAGE_KEY,JSON.stringify(t))},clear:function(){var e;null===(e=Nf.removeItem)||void 0===e||e.call(Nf,this.LOCAL_STORAGE_KEY)}};const iT=oT;var aT=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"read",value:function(e,t){var n,r=null===(n=null==t?void 0:t.attrs)||void 0===n?void 0:n.class;if(null==r?void 0:r.includes("lake-alert")){var o=/lake-alert-([\w]*)/i.exec(r),i=VS[0];o&&o.length>=2&&(i=o[1]);var a=ar.createElement("alert",{type:i});return e.setNode(a),!1}return!0}}])}();Object.defineProperty(aT,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["blockquote"]});var lT=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"leaveNode",value:function(e){}}])}(),uT=function(e){return function(t){return t.transparent(e).toCSSValue()}},cT={"alert.tips.bar.border":{light:"#BEC0BF",dark:"#505050"},"alert.tips.bar.bg":{light:"#D8DAD9",dark:"#424242"},"alert.tips.background":{light:"#EFF0F0",dark:"#292929"},"alert.tips.border":{light:"#E7E9E8",dark:"#333333"},"alert.info.bar.border":{light:"#C0DDFC",dark:"#253C56"},"alert.info.bar.bg":{ref:"alert.info.bar.border"},"alert.info.background":{ref:"alert.info.bar.border",process:uT(.5)},"alert.info.border":{light:"#81BBF8",dark:"#1D4672"},"alert.color1.bar.border":{light:"#B5EFF2",dark:"#255356"},"alert.color1.bar.bg":{ref:"alert.color1.bar.border"},"alert.color1.background":{ref:"alert.color1.bar.border",process:uT(.5)},"alert.color1.border":{light:"#81DFE4",dark:"#1A7074"},"alert.color2.bar.border":{light:"#C7F0DF",dark:"#255641"},"alert.color2.bar.bg":{ref:"alert.color2.bar.border"},"alert.color2.background":{ref:"alert.color2.bar.border",process:uT(.5)},"alert.color2.border":{light:"#82EDC0",dark:"#18774F"},"alert.success.bar.border":{light:"#DBF1B7",dark:"#445625"},"alert.success.bar.bg":{ref:"alert.success.bar.border"},"alert.success.background":{ref:"alert.success.bar.border",process:uT(.5)},"alert.success.border":{light:"#C1E77E",dark:"#557915"},"alert.warning.bar.border":{light:"#F6E1AC",dark:"#564825"},"alert.warning.bar.bg":{ref:"alert.warning.bar.border"},"alert.warning.background":{ref:"alert.warning.bar.border",process:uT(.5)},"alert.warning.border":{light:"#F5D480",dark:"#775C18"},"alert.color3.bar.border":{light:"#F8D6B9",dark:"#5E3B1D"},"alert.color3.bar.bg":{ref:"alert.color3.bar.border"},"alert.color3.background":{ref:"alert.color3.bar.border",process:uT(.5)},"alert.color3.border":{light:"#F8B881",dark:"#774418"},"alert.danger.bar.border":{light:"#F8CED3",dark:"#5B2027"},"alert.danger.bar.bg":{ref:"alert.danger.bar.border"},"alert.danger.background":{ref:"alert.danger.bar.border",process:uT(.5)},"alert.danger.border":{light:"#F1A2AB",dark:"#741B25"},"alert.color4.bar.border":{light:"#F7C4E2",dark:"#5B1F42"},"alert.color4.bar.bg":{ref:"alert.color4.bar.border"},"alert.color4.background":{ref:"alert.color4.bar.border",process:uT(.5)},"alert.color4.border":{light:"#F297CC",dark:"#701F4E"},"alert.color5.bar.border":{light:"#D9C9F8",dark:"#352259"},"alert.color5.bar.bg":{ref:"alert.color5.bar.border"},"alert.color5.background":{ref:"alert.color5.bar.border",process:uT(.5)},"alert.color5.border":{light:"#BA9BF2",dark:"#3A1C73"}};function sT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"light",r=arguments.length>3?arguments[3]:void 0,o=t[e];if(o.ref)return sT(o.ref,t,n,o.process);var i=o[n];bt.fatal("string"==typeof i,"colorStr should be string","framework/infra/src/theme/get-color-from-scheme.ts:17");var a=au.parse(i);return bt.fatal(!!a,"colorStr ".concat(i," cannot be parsed"),"framework/infra/src/theme/get-color-from-scheme.ts:19"),(r||o.process||function(e){return i})(a)}var dT={margin:"4px 0",padding:"10px",borderRadius:"4px"};function fT(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,hT()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function hT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(hT=function(){return!!e})()}Object.assign({border:"1px solid #C0D9FC",backgroundColor:"#D9E8FC"},dT),Object.assign({border:"1px solid #F6E5AC",backgroundColor:"#F9EFCD"},dT),Object.assign({border:"1px solid #F8CED3",backgroundColor:"#FBE4E7"},dT),Object.assign({border:"1px solid #DCF4B4",backgroundColor:"#E8F7CF"},dT),Object.assign({border:"1px solid #E8E9E8",backgroundColor:"#F4F5F5"},dT),Object.assign({border:"1px solid #B5E8F2",backgroundColor:"#CEF1F7"},dT),Object.assign({border:"1px solid #C7F0DF",backgroundColor:"#DAF6EA"},dT),Object.assign({border:"1px solid #F8D6B9",backgroundColor:"#FDE6D3"},dT),Object.assign({border:"1px solid #F7C4E2",backgroundColor:"#FBDFEF"},dT),Object.assign({border:"1px solid #D9C9F8",backgroundColor:"#E6DCF9"},dT);var pT=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=fT(this,t),Object.defineProperty(n,"customThemeService",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){var n,r,o,i=(null===(n=t.attrs)||void 0===n?void 0:n.type)||"info";e.isInlineMode()&&(o=function(e,t){var n=Object.assign({},cT);t&&Object.keys(t).forEach((function(e){if(n[e]){var r=t[e];n[e]="string"==typeof r?{light:r}:{light:r.light,dark:r.dark}}}));var r="alert.".concat(e,".bar.border"),o="alert.".concat(e,".background"),i=sT(r,n),a=sT(o,n);return Object.assign({border:"1px solid ".concat(i),backgroundColor:a},dT)}(i,null===(r=this.customThemeService)||void 0===r?void 0:r.getOption().overrides));var a=e.createElement("div",{className:"ne-alert",attrs:{"data-type":i},style:o});e.setNode(a)}}])}(lT);Object.defineProperty(pT,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["alert"]});var vT=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"leaveNode",value:function(e,t){}}])}();function mT(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,gT()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function gT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(gT=function(){return!!e})()}var bT=function(e){function t(){return(0,Ke.A)(this,t),mT(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){var n,r=(null===(n=null==t?void 0:t.attrs)||void 0===n?void 0:n.type)||VS[0];e.setNode(gd.createElement("blockquote")),e.addClassName("lake-alert","lake-alert-".concat(r))}}])}(vT);Object.defineProperty(bT,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["alert"]});var yT=HR({pluginName:"customTheme",service:{ICustomThemeKernelService:"ICustomThemeKernelService"}});function wT(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,AT()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function AT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(AT=function(){return!!e})()}var kT=function(e){function t(){var e;return(0,Ke.A)(this,t),e=wT(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(rt);function _T(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,CT()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function CT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(CT=function(){return!!e})()}Object.defineProperty(kT,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze(yT.service.ICustomThemeKernelService)});var NT=function(e){function t(){return(0,Ke.A)(this,t),_T(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerElement(WS),e.registerAttr(zS),e.registerCommand({alert:new YS,alertDelete:new XS,alertType:new rT,alertMove:new eT});var t=e.getService(DS.ID);if(t){var n=new RegExp("^[:：]{3}(".concat(VS.join("|"),"|s*)$"),"i");t.registerMarkdownMatcher(CS.enter,new NS(this.editing,n,(function(e,t,n,r){var o=r.matchedGroup,i=(0,tn.A)(o,1)[0],a=void 0===i?VS[0]:i,l=iT.load()||{};a&&iT.save({type:a.toLowerCase()});var u=e.createHole("alertHole"),c=e.createElement("alert",{type:(a||l.type||VS[0]).toLowerCase()});e.appendChild(u,c),e.replaceChild(t.parentNode,u,t),e.appendChild(c,t),e.setSelection(e.newSelection(e.newRange(e.newPosition(t,0))))}),void 0,(function(e){return!e.node.closest("alert")})))}this.option.onAfterKernelPluginInit&&this.option.onAfterKernelPluginInit(this.kernel)}},{key:"afterInit",value:function(){var e,t,n;null===(e=this.kernel.getService(_S.ID))||void 0===e||e.registerLakeNodeReader(aT.NodeNames,new aT),null===(t=this.kernel.getService(_S.ID))||void 0===t||t.registerLakeNodeWriter(bT.NodeNames,new bT),null===(n=this.kernel.getService(wS.ID))||void 0===n||n.registerNodeHTMLWriter(pT.NodeNames,new pT(this.kernel.getService(kT.ID)))}}])}(ct);function OT(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,xT()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function xT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xT=function(){return!!e})()}Object.defineProperty(NT,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:"alert"}),Object.defineProperty(NT,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:qS});var ET=function(e){function t(){var e;return(0,Ke.A)(this,t),e=OT(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(rt);function DT(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,PT()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function PT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(PT=function(){return!!e})()}Object.defineProperty(ET,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze("IFileReaderKernelService")});var RT=function(e){function t(){var e;return(0,Ke.A)(this,t),e=DT(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(rt);Object.defineProperty(RT,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze("IINodeReaderKernelService")});var ST,TT,jT,IT=function(){return(0,$e.A)((function e(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return!0};(0,Ke.A)(this,e),Object.defineProperty(this,"_editing",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_handler",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"canInsertPosition",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"_matchPattern",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_excludePattern",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n instanceof RegExp?this._matchPattern=n:(this._matchPattern=n.match,this._excludePattern=n.exclude)}),[{key:"destroy",value:function(){delete this._editing,delete this._matchPattern,delete this._excludePattern,delete this._handler}},{key:"match",value:function(e,t){if(!this.canInsertPosition(t))return null;var n,r=e[e.length-1];if(!r)return null;if(bt(1===r.fragments.length,"plugins/markdown/src/public/pattern-markdown-matcher.ts:79"),!(n=this._matchPattern instanceof RegExp?this._matchPattern.exec(r.text):this._matchPattern(r.text)))return null;if(this._excludePattern&&this._excludePattern.test(r.text))return null;var o=Ut.closest(r.fragments[0].start.node,qe.Block);return bt(o,"plugins/markdown/src/public/pattern-markdown-matcher.ts:102"),{section:e,blockNode:o,matched:n}}},{key:"exec",value:function(e){var t=this._editing.newJob(We.User),n=e.section,r=e.blockNode,o=e.matched,i=n[n.length-1].fragments[0].start.node;try{t.setTextNodeData(i,gn.deleteString(i.data,o.index,o.index+o[0].length)),this._handler(t,r,i,e),this._editing.commitJob(t)}catch(e){this._editing.cancelJob(t)}}}])}(),BT="init",MT="paste",FT="drop",LT="ui",UT="materialLibrary",VT="pending",HT="uploading",zT="done",WT="error";function qT(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,$T()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function $T(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($T=function(){return!!e})()}!function(e){e.PENDING="pending",e.UPLOADING="uploading",e.DONE="done",e.ERROR="error"}(ST||(ST={})),function(e){e.binary="binary",e.url="url",e.file="file",e.base64="base64"}(TT||(TT={})),function(e){e.init="init",e.paste="paste",e.drop="drop",e.ui="ui",e.materialLibrary="materialLibrary"}(jT||(jT={}));var KT=function(e){function t(e,n){return(0,Ke.A)(this,t),qT(this,t,[e,n])}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getStatus",value:function(){return this._cardValue.status}},{key:"getSrc",value:function(){return this._cardValue.src}},{key:"getSize",value:function(){return this._cardValue.size}},{key:"getPreviewSrc",value:function(){return this.toDisplaySrc(this._cardValue.src)}},{key:"getDisplaySrc",value:function(){return this.toDisplaySrc(this._cardValue.src)}},{key:"toDisplaySrc",value:function(e){var t;return e?yh.isBase64ImageURL(e)?e:(null===(t=this._pluginOption)||void 0===t?void 0:t.onBeforeRenderImage(e,this._pluginOption.isCaptureImageURL(e)))||e:e}},{key:"getName",value:function(){return this._cardValue.name}},{key:"getTaskId",value:function(){return this._cardValue.taskId}},{key:"getClientId",value:function(){return this._cardValue.clientId}},{key:"getOcrLocations",value:function(){return this._cardValue.ocr}},{key:"hasUserWidth",value:function(){return!!this._cardValue.width}},{key:"getUserWidth",value:function(){return this._cardValue.width}},{key:"getOriginalWidth",value:function(){return this._cardValue.original.width}},{key:"getOriginalHeight",value:function(){return this._cardValue.original.height}},{key:"getCropWidth",value:function(){return Math.round(this._cardValue.original.width*(this._cardValue.crop[2]-this._cardValue.crop[0]))}},{key:"getCropHeight",value:function(){return Math.round(this._cardValue.original.height*(this._cardValue.crop[3]-this._cardValue.crop[1]))}},{key:"getRotationCropWidth",value:function(){return this._cardValue.rotation%180==0?this.getCropWidth():this.getCropHeight()}},{key:"getRotationCropHeight",value:function(){return this._cardValue.rotation%180==0?this.getCropHeight():this.getCropWidth()}},{key:"getOriginDisplayWidth",value:function(){return this._cardValue.rotation%180==0?Math.round(this.getDisplayWidth()*this.getOriginalWidth()/this.getCropWidth()):Math.round(this.getDisplayHeight()*this.getOriginalWidth()/this.getCropWidth())}},{key:"getDisplayWidth",value:function(){return this._cardValue.width?this._cardValue.width:this.getRotationCropWidth()}},{key:"getDisplayHeight",value:function(){var e=this.getDisplayWidth(),t=this.getRotationCropWidth(),n=this.getRotationCropHeight();return e===t?n:Math.round(e/t*n)}},{key:"isCompleted",value:function(){var e=this._cardValue.status;return e===zT||e===WT}},{key:"isValid",value:function(){return!!this._cardValue.src}},{key:"isFromPaste",value:function(){return ku()(this._cardValue,"original.from",null)===MT}},{key:"isBinaryType",value:function(){return"binary"===ku()(this._cardValue,"original.type",null)}},{key:"getRatio",value:function(){return ku()(this._cardValue,"original.ratio",1)}},{key:"setImageOriginSize",value:function(e,t){this._cardValue.original=Object.assign(Object.assign({},this._cardValue.original),{width:e,height:t})}},{key:"setDisplayWidth",value:function(e){this._cardValue.width=e}},{key:"resetDisplayWidth",value:function(){delete this._cardValue.width}},{key:"resetRotationCrop",value:function(){if(this._cardValue.width){var e=this._cardValue.width/this.getRotationCropWidth();this._cardValue.width=Math.ceil(e*this.getOriginalWidth())}this._cardValue.rotation=0,this._cardValue.crop=[0,0,1,1]}},{key:"setImageInfo",value:function(e){var t=e.url,n=e.filename,r=e.ocrLocations,o=e.size;bt.fatal(t,"plugins/image/src/kernel/image-card-data.ts:470");var i=this._cardValue;i.src=t,i.size=o,i.status=ST.DONE,n&&(i.name=n),r&&(i.ocr=this.roundOCRPosition(r),i.search=this._getSearchText(r))}},{key:"roundOCRPosition",value:function(e){return e.map((function(e){return e.x=Math.round(e.x),e.y=Math.round(e.y),e.width=Math.round(e.width),e.height=Math.round(e.height),e}))}},{key:"setUploadError",value:function(e){this._cardValue.status=ST.ERROR,this._cardValue.errorMessage=e||"unknown error"}},{key:"setLink",value:function(e){e?e!==this._cardValue.link&&(this._cardValue.link=e):delete this._cardValue.link}},{key:"getLink",value:function(){return this._cardValue.link}},{key:"setLinkExternal",value:function(e){this._cardValue.linkExternal=e}},{key:"isOpenLinkInSelf",value:function(){return!1===this._cardValue.linkExternal}},{key:"setStyle",value:function(e){e&&"none"!==e?e!==this._cardValue.style&&(this._cardValue.style=e):delete this._cardValue.style}},{key:"getStyle",value:function(){return this._cardValue.style}},{key:"setAverageHue",value:function(e){e&&(this._cardValue.averageHue=e,this.sync(!1))}},{key:"getAverageHue",value:function(){return this._cardValue.averageHue}},{key:"_getSearchText",value:function(e){return e.map((function(e){return e.text})).join(" ")}},{key:"showTitle",value:function(){return this._cardValue.showTitle}},{key:"getTitle",value:function(){return this._cardValue.title}},{key:"getRotation",value:function(){return this._cardValue.rotation}},{key:"getCrop",value:function(){return this._cardValue.crop}},{key:"setShowTitle",value:function(e){this._cardValue.showTitle=e}},{key:"setTitle",value:function(e){this._cardValue.title=e}},{key:"setRotation",value:function(e){this._cardValue.rotation=e%360}},{key:"setCrop",value:function(e){this._cardValue.crop=e}},{key:"isAfterEdit",value:function(){return 0!==this._cardValue.rotation||YT(this._cardValue.crop[0]-0,this.getOriginalWidth())||YT(this._cardValue.crop[1]-0,this.getOriginalHeight())||YT(this._cardValue.crop[2]-1,this.getOriginalWidth())||YT(this._cardValue.crop[3]-1,this.getOriginalHeight())}}],[{key:"getAllImages",value:function(){return null}},{key:"createValueByURL",value:function(e){var n,r=e.type,o=e.src,i=e.originalURL,a=e.ratio,l=e.link,u=e.linkExternal,c=e.name,s=e.size,d=e.width,f=e.ocr,h=null===(n=this.getAllImages())||void 0===n?void 0:n.reverse()[0];return Sl.setCardSpacingToValue(h?h.__spacing:Nl,Ww()({},t.DefaultCardValue,{original:{type:r,from:"url",ratio:a,url:i},src:o,status:zT,link:l,linkExternal:u,name:c,size:s,ocr:f,width:d,style:h?h.style:t.DefaultCardValue.style}))}},{key:"createWillUploadValue",value:function(e){var n,r=e.type,o=e.from,i=e.name,a=e.ratio,l=e.taskId,u=e.clientId,c=e.originalURL,s=e.link,d=e.width,f=e.linkExternal,h=null===(n=this.getAllImages())||void 0===n?void 0:n.reverse()[0];return Sl.setCardSpacingToValue(h?h.__spacing:Nl,Ww()({},t.DefaultCardValue,{original:{type:r,from:o,ratio:a,url:c},name:i,taskId:l,clientId:u,status:VT,link:s,width:d,linkExternal:f,style:h?h.style:t.DefaultCardValue.style}))}},{key:"fromRepository",value:function(e){var n=e.copiedFileInfo;return Ww()({},t.DefaultCardValue,{source:"transfer",src:n.url,status:zT})}},{key:"processValue",value:function(e){var t;return(null===(t=e.crop)||void 0===t?void 0:t.includes(null))&&(e.crop=[0,0,1,1]),e}},{key:"fromLake",value:function(e){var n;return this.processValue(Ww()({},t.DefaultCardValue,{src:"object"===(0,Gn.A)(e.src)?null===(n=e.src)||void 0===n?void 0:n.url:e.src,name:e.name,size:e.size,taskId:e.taskId,clientId:e.clientId,errorMessage:e.errorMessage,link:e.link,linkExternal:"_blank"===e.linkTarget,style:e.style,original:{type:e.originalType,from:e.from,ratio:e.ratio||1,width:e.originWidth,height:e.originHeight},width:e.width,status:e.status,ocr:e.ocrLocations,search:e.search,showTitle:e.showTitle,title:e.title,rotation:e.rotation,crop:e.crop||[0,0,1,1],averageHue:e.averageHue}))}},{key:"toLake",value:function(e){return{src:e.src,taskId:e.taskId,clientId:e.clientId,originalType:ku()(e,"original.type"),width:e.width,height:GT(e),link:e.link,linkTarget:e.linkExternal?"_blank":"",name:e.name,size:e.size,from:ku()(e,"original.from"),originWidth:ku()(e,"original.width"),originHeight:ku()(e,"original.height"),ratio:ku()(e,"original.ratio"),status:e.status,style:e.style,errorMessage:e.errorMessage,search:e.search,ocrLocations:e.ocr,showTitle:e.showTitle,title:e.title,rotation:e.rotation,crop:e.crop||[0,0,1,1],averageHue:e.averageHue}}}])}(Sl);function YT(e,t){return Math.abs(e*t)>=1}function GT(e){var t,n,r=null===(t=e.original)||void 0===t?void 0:t.width,o=null===(n=e.original)||void 0===n?void 0:n.height,i=e.width;if(r&&o&&i)return i===r?o:Math.round(i/r*o)}Object.defineProperty(KT,"DefaultCardValue",{enumerable:!0,configurable:!0,writable:!0,value:{src:"",original:{type:TT.binary,from:void 0,ratio:1,width:void 0,height:void 0},name:void 0,size:void 0,width:void 0,status:ST.PENDING,errorMessage:void 0,style:"none",taskId:void 0,clientId:void 0,link:void 0,linkExternal:!0,ocr:void 0,search:void 0,crop:[0,0,1,1],showTitle:!1,title:"",rotation:0}});var JT={accept:null,capturePatterns:[/[\s\S]*?/],excludeCapturePatterns:[],ratio:1,isCaptureImageURL:function(){return!0},onBeforeRenderImage:function(e){return e},useOriginSrc:function(){return!1}},XT=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Ww()({},JT,t)}),[{key:"accept",get:function(){return this._option.accept}},{key:"ratio",get:function(){return this._option.ratio}},{key:"onBeforeRenderImage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._option.onBeforeRenderImage(e,t)}},{key:"useOriginSrc",value:function(e){return!!this._option.useOriginSrc(e)}},{key:"isCaptureImageURL",value:function(e){var t=this._option;return(0,t.isCaptureImageURL)(e,t.capturePatterns,t.excludeCapturePatterns)}}])}();Object.defineProperty(XT,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"image"});var QT=HR({pluginName:"image",cardName:"image",command:{image:"image",imageTask:"imageTask",moveImage:"moveImage",insertImage:"insertImage",imageTitleBreakLine:"imageTitleBreakLine",updateImageData:"updateImageData",insertAfterImage:"insertAfterImage"},toolbar:{image:"image",noteImage:"note-image",noteImageBlack:"note-image-black"},cardSelect:"image"});function ZT(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,ej()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function ej(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ej=function(){return!!e})()}var tj=function(e){function t(){return(0,Ke.A)(this,t),ZT(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t){var n=e.newJob();if(this.getState(n)===pt.UNAVAILABLE)return e.cancelJob(n),!1;var r=Ai.insertCardNode(n,n.getSelection(),"image",t),o=r.selection,i=r.cardNode;return t.taskId&&this.plugin.registerTask(t.taskId,i.id),n.setSelection(o),e.commitJob(n),i.id}}])}(Bl);function nj(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,rj()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function rj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rj=function(){return!!e})()}Object.defineProperty(tj,"ID",{enumerable:!0,configurable:!0,writable:!0,value:QT.command.image});var oj=function(e){function t(){return(0,Ke.A)(this,t),nj(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getValue",value:function(e,t){return this.plugin.getNodeIdByTaskId(t)}}])}(gt);function ij(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,aj()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function aj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(aj=function(){return!!e})()}Object.defineProperty(oj,"ID",{enumerable:!0,configurable:!0,writable:!0,value:QT.command.imageTask});var lj=function(e){function t(){return(0,Ke.A)(this,t),ij(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t){var n=e.newJob(),r=n.getNodeById(t);if(!r||!r.isConnected||!r.isCardNode())return e.cancelJob(n),!1;var o=r.parentNode.childCount,i=n.newSelection(n.newRange(n.newPosition(r.parentNode,r.offset+1)));if(bt.fatal(i.collapsed,"plugins/image/src/kernel/commands/image-title-breakline-command.ts:24"),o>1)return n.setSelection(i),e.commitJob(n),!0;var a=wr.breakLine(n,i.firstRange.start);return n.setSelection([n.newRange(a)]),e.commitJob(n),!0}}])}(gt);function uj(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,cj()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function cj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(cj=function(){return!!e})()}Object.defineProperty(lj,"ID",{enumerable:!0,configurable:!0,writable:!0,value:QT.command.imageTitleBreakLine});var sj=function(e){function t(){return(0,Ke.A)(this,t),uj(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){return e.getSelection().rangeCount>1?pt.UNAVAILABLE:pt.NOT_EXECUTED}},{key:"_execute",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=e.newJob();if(this.getState(o)===pt.UNAVAILABLE)return e.cancelJob(o),!1;var i=Ai.insertCardNode(o,o.getSelection(),t,n),a=i.selection,l=i.cardNode;return r?o.setSelection([o.newRange(o.newPosition(l,0))]):o.setSelection(a),e.commitJob(o),l.id}}])}(gt),dj=HR({pluginName:"card",command:{setCardValue:"setCardValue",insertCard:"insertCard",focusCard:"focusCard",deleteCard:"deleteCard",cardValue:"cardValue",moveCard:"moveCard",cardIsExist:"cardIsExist",cardBatchApply:"cardBatchApply"}});function fj(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,hj()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function hj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(hj=function(){return!!e})()}var pj=function(e){function t(){return(0,Ke.A)(this,t),fj(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t,n){var r=e.newJob(),o=r.getNodeById(t);if(o&&o.isConnected&&o.hasCategory(qe.Card))if(n.node.closest(qe.OnlyText))e.cancelJob(r);else{if(o.hasCategory(qe.BlockCard)){var i=o.parentNode;bt.fatal(null==i?void 0:i.isHole(),"plugins/card/src/kernel/commands/move-card-command.ts:33"),wr.insertNodes(r,n,[i])}else wr.insertNodes(r,n,[o]);r.setSelection([r.newRange(r.newPosition(o.parentNode,o.offset+1))]),e.commitJob(r)}else e.cancelJob(r)}}])}(gt);function vj(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,mj()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function mj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mj=function(){return!!e})()}Object.defineProperty(pj,"ID",{enumerable:!0,configurable:!0,writable:!0,value:dj.command.moveCard});var gj=function(e){function t(){return(0,Ke.A)(this,t),vj(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=KT.createValueByURL(t);return this._execute(e,"image",r,n)}}])}(sj);function bj(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,yj()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function yj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(yj=function(){return!!e})()}Object.defineProperty(gj,"ID",{enumerable:!0,configurable:!0,writable:!0,value:QT.command.insertImage});var wj=function(e){function t(){return(0,Ke.A)(this,t),bj(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t)}(pj);function Aj(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,kj()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function kj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(kj=function(){return!!e})()}Object.defineProperty(wj,"ID",{enumerable:!0,configurable:!0,writable:!0,value:QT.command.moveImage});var _j=function(e){function t(){return(0,Ke.A)(this,t),Aj(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t,n){var r=e.newJob(),o=r.getNodeById(t);return o&&o.isConnected?(r.setAttribute(o,"value",Object.assign(Object.assign({},o.attrs.value),n)),e.commitJob(r),!0):(e.cancelJob(r),!1)}}])}(Bl);Object.defineProperty(_j,"ID",{enumerable:!0,configurable:!0,writable:!0,value:QT.command.updateImageData});var Cj=(0,$e.A)((function e(){(0,Ke.A)(this,e)}));function Nj(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Oj()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Oj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Oj=function(){return!!e})()}var xj=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=Nj(this,t),Object.defineProperty(r,"_imagePlugin",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(r,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:n}),r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"readFile",value:function(e,t){var n;if((null==t?void 0:t.from)!==LT||"image"===(null==t?void 0:t.category)){var r=e._$neUploadTaskId;if(r){var o=Dr(9),i=ar.createCard("image",KT.createWillUploadValue({type:"binary",from:t?t.from:void 0,ratio:this._imagePlugin.option.ratio,name:null===(n=e.file)||void 0===n?void 0:n.name,taskId:r,clientId:this._kernel.id}),o);return this._imagePlugin.registerTask(r,o),i}}}}])}(Cj),Ej=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"leaveNode",value:function(e){}}])}();function Dj(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Pj()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Pj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Pj=function(){return!!e})()}var Rj=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=Dj(this,t),Object.defineProperty(r,"_imagePlugin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r._imagePlugin=e,r._kernel=n,r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"readNode",value:function(e,t){var n=t.attrs,r=n.src,o=n._$neUploadTaskId,i=n._$neImageSrc,a=n.width,l=a?parseInt(a+"",10):NaN,u=null;if(i?u=i:(r&&!this._imagePlugin.option.isCaptureImageURL(r)||this._imagePlugin.option.useOriginSrc(r))&&(u=r),u||o){var c,s=e.getState("link");if(u)c=ar.createCard("image",KT.createValueByURL({from:"paste",originalURL:r,ratio:this._imagePlugin.option.ratio,src:u,link:s,linkExternal:!!s||void 0,width:isNaN(l)?void 0:l}));else{var d=Dr(9);c=ar.createCard("image",KT.createWillUploadValue({type:"url",from:"paste",ratio:this._imagePlugin.option.ratio,originalURL:r,taskId:o,clientId:this._kernel.id,link:s,linkExternal:!!s||void 0,width:isNaN(l)?void 0:l}),d),this._imagePlugin.registerTask(o,d)}e.setNode(c)}}}])}(Ej);function Sj(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Tj()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Tj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Tj=function(){return!!e})()}Object.defineProperty(Rj,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["img"]});var jj=function(e){function t(){return(0,Ke.A)(this,t),Sj(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"readNode",value:function(e,t){var n,r=t.className||(null===(n=t.attrs)||void 0===n?void 0:n.class)||"";return!(!r.includes("ne-ui-image-ocr-mask")&&!r.includes("ne-ui-image-ocr-text")||(e.stop(),0))}}])}(Ej);Object.defineProperty(jj,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["div"]});var Ij=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"read",value:function(e,t){return!0}},{key:"destroy",value:function(){}}])}();function Bj(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Mj()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Mj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Mj=function(){return!!e})()}var Fj=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=Bj(this,t),Object.defineProperty(n,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t){var n,r=null===(n=t.attrs)||void 0===n?void 0:n.value;return!r||(r.src&&!r.status&&(r.status=ST.DONE),e.setNode(ar.createCard("image",r,t.id)),!0)}}])}(Ij),Lj=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"destroy",value:function(){}}])}();function Uj(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Vj()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Vj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Vj=function(){return!!e})()}var Hj=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=Uj(this,t),Object.defineProperty(n,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t,n,r){n.src&&!n.status&&(n.status=zT);var o=ar.createCard("image",KT.fromLake(n),r);e.setNode(o)}}])}(Lj);function zj(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Wj()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Wj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Wj=function(){return!!e})()}var qj=function(e){function t(){return(0,Ke.A)(this,t),zj(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){var n,r=(null===(n=t.attrs)||void 0===n?void 0:n.value)||{};if(r.src){var o=null;if(r.link){var i={href:r.link};!1!==r.linkExternal&&(i.target="_blank"),o=e.createElement("a",{className:"ne-image-link",attrs:i})}var a=e.createElement("img",{className:"ne-image",attrs:{src:r.src,width:r.width||r.original&&r.original.width}});o?(e.appendChild(o,a),e.setNode(o)):e.setNode(a)}}}])}(lT);Object.defineProperty(qj,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["image"]});var $j=(0,$e.A)((function e(){(0,Ke.A)(this,e)}));function Kj(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Yj()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Yj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Yj=function(){return!!e})()}var Gj=function(e){function t(){return(0,Ke.A)(this,t),Kj(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t,n,r){var o=e.createInlineCard("image",KT.toLake(n),r);e.setNode(o)}}])}($j);function Jj(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Xj()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Xj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Xj=function(){return!!e})()}var Qj=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Jj(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(rt);function Zj(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,eI()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function eI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(eI=function(){return!!e})()}Object.defineProperty(Qj,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze("IUploadKernelService")});var tI=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Zj(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(rt);Object.defineProperty(tI,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze("IMarkdownService")});var nI=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"read",value:function(e,t){var n=t.text.split("|"),r={width:NaN,height:NaN,alignment:"left"};if(n[1]&&["left","right","center"].includes(n[1])&&(r.alignment=n[1]),n[2]){var o=n[2].split("x");o[0]&&(r.width=Number(o[0].trim())),o[1]&&(r.height=Number(o[1].trim()))}return e.setNode(e.createElement("image",{value:{src:t.href,title:t.title,width:isNaN(r.width)?void 0:r.width}})),!0}},{key:"afterRead",value:function(e,t){var n,r=null===(n=e.parent)||void 0===n?void 0:n.getNode();if(r){var o=t.text.split("|"),i={alignment:"left"};o[1]&&["left","right","center"].includes(o[1])&&(i.alignment=o[1]),"left"!==i.alignment&&(null==r?void 0:r.attrs)&&(r.attrs.alignment=i.alignment)}}}])}(),rI=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"write",value:function(e,t){var n,r=(null===(n=t.attrs)||void 0===n?void 0:n.value)||{};return e.append("![".concat(r.title||"","](").concat(r.src,")")),!0}}])}(),oI=(0,$e.A)((function e(){(0,Ke.A)(this,e)})),iI=(0,$e.A)((function e(){(0,Ke.A)(this,e)})),aI=(0,$e.A)((function e(){(0,Ke.A)(this,e)})),lI=(0,$e.A)((function e(){(0,Ke.A)(this,e)})),uI=(0,$e.A)((function e(){(0,Ke.A)(this,e)})),cI=HR({pluginName:"lake"});function sI(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,dI()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function dI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(dI=function(){return!!e})()}var fI=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=sI(this,t),Object.defineProperty(n,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){this._kernel=null}},{key:"read",value:function(e,t){return this._kernel.readData("text/lake",e,t)}},{key:"write",value:function(e,t){var n=e.document.getINode(t);return this._kernel.writeData("text/lake",n,t)}}])}(Ht),hI=o(6147),pI=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:t})}),[{key:"from",get:function(){var e;return null===(e=this._option)||void 0===e?void 0:e.from}},{key:"createElement",value:function(){return gd.createElement.apply(gd,arguments)}},{key:"setAttribute",value:function(){return gd.setAttribute.apply(gd,arguments)}},{key:"removeAttribute",value:function(){return gd.removeAttribute.apply(gd,arguments)}}])}();function vI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var mI=function(){function e(t,n){(0,Ke.A)(this,e),Object.defineProperty(this,"lakeReader",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_inode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_parent",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_attrs",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_stopped",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_state",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_children",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_ignoreInheritedAttr",{enumerable:!0,configurable:!0,writable:!0,value:["id"]}),n&&(this._attrs=Object.assign({},n))}return(0,$e.A)(e,[{key:"node",get:function(){return this._node}},{key:"inode",get:function(){return this._inode}},{key:"parent",get:function(){return this._parent}},{key:"isStopped",value:function(){return this._stopped}},{key:"stop",value:function(){this._stopped=!0}},{key:"getChildContext",value:function(t){var n=new e(this.lakeReader);return n._parent=this,n._inode=t||null,n._attrs=this.getInheritedAttrs(),n._state=Object.assign({},this._state),this._children.push(n),n}},{key:"readByNodes",value:function(e){return this.lakeReader.readByNodes(e,this._attrs)}},{key:"setNode",value:function(e){this._setNode(e)}},{key:"setText",value:function(e,t){this._setNode(ar.createTextNode(e,void 0,t))}},{key:"hasState",value:function(e){return ir(this._state,e)}},{key:"clearState",value:function(e){delete this._state[e]}},{key:"setState",value:function(e,t){this._state[e]=t}},{key:"ignoreInheritedAttrs",value:function(e){if("string"==typeof e)this._ignoreInheritedAttr.push(e);else if(Array.isArray(e)){var t;(t=this._ignoreInheritedAttr).push.apply(t,(0,ln.A)(e))}}},{key:"getInheritedAttrs",value:function(){var e,t=Object.assign({},this._attrs),n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return vI(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vI(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(this._ignoreInheritedAttr);try{for(n.s();!(e=n.n()).done;)delete t[e.value]}catch(e){n.e(e)}finally{n.f()}return t}},{key:"getState",value:function(e,t){return ir(this._state,e)?this._state[e]:t}},{key:"setAttr",value:function(e,t){bt.fatal(!this._node,"plugins/lake-data-source/src/kernel/lib/context/lake-read-context.ts:115"),this._attrs[e]=t}},{key:"createElement",value:function(){return ar.createElement.apply(ar,arguments)}},{key:"createCard",value:function(){return ar.createCard.apply(ar,arguments)}},{key:"createTextNode",value:function(){return ar.createTextNode.apply(ar,arguments)}},{key:"_setNode",value:function(e){bt.fatal(null===this._node,"plugins/lake-data-source/src/kernel/lib/context/lake-read-context.ts:132"),this._node=e}},{key:"close",value:function(e){var t=this,n=this._node,r=[];if(this._children.forEach((function(t){t.close(e).forEach((function(e){r.push(e)}))})),!n)return r;Object.keys(this._attrs).forEach((function(e){ar.setAttribute(n,e,t._attrs[e])}));var o=e.getNodeSchema(n.name);if(null==o?void 0:o.category.includes(qe.Block)){var i=r[r.length-1];i&&"text"===i.type&&i.data.endsWith("\n")&&(i.data=i.data.substring(0,i.data.length-1))}return r.forEach((function(e){ar.appendChild(n,e)})),[n]}}])}();function gI(e,t){var n=new mI(e,t);return n.setNode(ar.createFragment()),n}var bI=o(7413);function yI(e){var t={};return e?(e.split(";").forEach((function(e){var n=e.split(":"),r=(0,bI.A)(n),o=r[0],i=r.slice(1),a=o.trim(),l=i.join(":").trim();a&&l&&(t[a]=l)})),t):t}function wI(e){for(var t=/(name|content)="([^"]*?)"/g,n=null,r={name:"",value:""};n=t.exec(e);)"content"===n[1]?r.value=n[2]:r.name=n[2];return r}var AI=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e),Object.defineProperty(this,"_lists",{enumerable:!0,configurable:!0,writable:!0,value:{}})}),[{key:"addToList",value:function(e,t){t.attrs.list=e;var n=this._lists,r=function(e){var t;return(null===(t=e.attrs)||void 0===t?void 0:t["data-lake-indent"])||0}(t);n[e]||(n[e]={});var o=function(e){var t;return Math.max(parseInt(null===(t=e.attrs)||void 0===t?void 0:t.start,10)||0,0)}(t);0===o?delete t.attrs.start:t.attrs.start=o;var i=n[e];if(r<function(e){var t=Object.keys(e).map((function(e){return Number(e)})).filter(Boolean);return Math.min.apply(Math,(0,ln.A)(t))}(i)){var a=Pr();return t.attrs.list=a,void(this._lists[a]=(0,Ha.A)({},r,[t]))}if(i[r])if(o===this._getNextStart(i[r])){i[r].push(t);var l=i[r][0].attrs.start;l?t.attrs.start=l:delete t.attrs.start}else{var u=Pr();t.attrs.list=u,this._lists[u]=(0,Ha.A)({},r,[t])}else if(0!==o){var c=Pr();t.attrs.list=c,this._lists[c]=(0,Ha.A)({},r,[t])}else i[r]=[t],t.attrs.fid=Pr()}},{key:"_getNextStart",value:function(e){var t=e[0].attrs.start,n=void 0===t?0:t;return e.reduce((function(e,t){var n;return e+((null===(n=t.children)||void 0===n?void 0:n.length)||0)}),n)}}])}();var kI=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_nodeReaders",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_nodePreReaders",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_attrReaders",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_styleReaders",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_cardPreReaders",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_cardReaders",{enumerable:!0,configurable:!0,writable:!0,value:{}})}),[{key:"destroy",value:function(){delete this.kernel,delete this._nodeReaders,delete this._nodePreReaders,delete this._attrReaders,delete this._styleReaders,delete this._cardReaders,delete this._cardPreReaders}},{key:"registerNodePreReader",value:function(e,t){var n=this;Array.isArray(e)||(e=[e]),e.forEach((function(e){n._nodePreReaders[e]||(n._nodePreReaders[e]=[]),n._nodePreReaders[e].push(t)}))}},{key:"registerNodeReader",value:function(e,t){var n=this;Array.isArray(e)||(e=[e]),e.forEach((function(e){n._nodeReaders[e]||(n._nodeReaders[e]=[]),n._nodeReaders[e].push(t)}))}},{key:"registerAttrReader",value:function(e,t){var n=this;"string"==typeof e&&(e=[e]),e.forEach((function(e){n._attrReaders[e]||(n._attrReaders[e]=[]),n._attrReaders[e].push(t)}))}},{key:"registerStyleReader",value:function(e,t){var n=this;"string"==typeof e&&(e=[e]),e.forEach((function(e){n._styleReaders[e]||(n._styleReaders[e]=[]),n._styleReaders[e].push(t)}))}},{key:"registerCardPreReader",value:function(e,t){this._cardPreReaders[e]=t}},{key:"registerCardReader",value:function(e,t){var n=this;Array.isArray(e)||(e=[e]),e.forEach((function(e){n._cardReaders[e]=t}))}},{key:"read",value:function(e,t,n){var r=this._parseLakeAsHTML(t),o=r.nodes,i=r.meta,a=gI(this);return this._walkNodes(a,o,n),a.close(e),ar.createFragment(a.node.children,{meta:i})}},{key:"readByNodes",value:function(e,t){var n;if(!e.length)return[];var r=gI(this,t);return this._walkNodes(r,e),r.close(this.kernel),(null===(n=r.node)||void 0===n?void 0:n.children)||[]}},{key:"_parseLakeAsHTML",value:function(e){var t={};e=function(e,t){return e?(e=function(e,t){return e.replace(/^(<meta[^>]*?>)*/,(function(e){return function(e,t){for(var n,r=/<meta([^>]*?)>/g;n=r.exec(e);){var o=wI(n[1]),i=o.name,a=o.value;i&&a&&(t[i]=a)}}(e,t),""}))}(e=e.replace(/^<!doctype[^>]*?>/,"").replace(/<(focus|anchor|cursor)( ?\/)?>/gi,""),t),e=function(e){return(e=(e=e.replace(/\r/gi,"").replace(/<\/br>/gi,"").replace(/<br\s*\/>/gi,"<br>")).replace(/\n*<br>\n*/gi,"<br>")).replace(/\n+/g," ")}(e=function(e){return e.replace(/<card [^>]*?><\/card>/g,(function(e){var t=/\bname="table"[\s\S]*?\bvalue="data:([^"]*?)"[^>]*?><\/card>$/.exec(e);if(!t)return e;try{var n=JSON.parse(decodeURIComponent(t[1]));if(!n.html||!n.html.startsWith("<table "))return"";var r=[];return n.id&&r.push("id=".concat(n.id)),n.hideBorder&&r.push('hide-border="true"'),r.push('margin="'.concat(!1!==n.margin,'"')),n.widthMode&&r.push('width-mode="'.concat(n.widthMode,'"')),n.html.replace(/^<table /,"<table ".concat(r.join(" ")," "))}catch(e){console.error(e)}return""}))}(e))):""}(e,t);var n={type:wt.Element,name:"#root",children:[]},r=[],o=[],i=[],a=[],l=n,u=!1,c=0,s=new hI.Parser({onopentag:function(e,t){if(u)c++;else{var n,s=function(e,t){if("card"===e){var n=t.name,r=t.type,o=t.value,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(t,["name","type","value"]);return{name:n,type:r?r.toLowerCase():void 0,value:o,attrs:i}}return t["data-ready-card"]&&t["data-card-value"]?{name:t["data-ready-card"],value:t["data-card-value"]}:null}(e,t);if(s){u=!0,bt.fatal(0===c,"plugins/lake-data-source/src/kernel/lib/lake-reader.ts:211");var d,f=s.value;if(f){f=f.replace(/^data:/,"");try{d=JSON.parse(decodeURIComponent(f))}catch(e){}}else d={};n={type:wt.Card,cardType:s.type,name:s.name,attrs:s.attrs},d&&(n.value=d),(null==d?void 0:d.id)&&(n.id=d.id,delete d.id),t.style&&(n.style=yI(t.style),delete t.style)}else n={type:wt.Element,name:e,attrs:t,children:[]},t.style&&(n.style=yI(t.style),delete t.style);"br"===e?r.push({node:n,parentNode:l}):"ul"===e||"ol"===e?o.push({node:n,parentNode:l}):"a"===e&&i.push({node:n,parentNode:l}),l.children||(l.children=[]),l.children.push(n),a.push(l),l=n}},ontext:function(e){if(!u){l.children||(l.children=[]);var t=l.children[l.children.length-1];"text"===(null==t?void 0:t.type)?t.data+=e:l.children.push({name:"#text",type:wt.Text,data:e})}},onclosetag:function(e){u&&c>0?c--:(bt.fatal(l.name===e||"card"===l.type,"plugins/lake-data-source/src/kernel/lib/lake-reader.ts:316"),"card"===l.type&&(u=!1),l=a.pop())}},{decodeEntities:!0,lowerCaseTags:!0,lowerCaseAttributeNames:!0,recognizeSelfClosing:!0});return s.write(e),s.end(),bt.fatal(0===a.length,"plugins/lake-data-source/src/kernel/lib/lake-reader.ts:335"),r.forEach((function(e){var t=e.node,n=e.parentNode,r=n.children.indexOf(t);if(r===n.children.length-1&&hf[n.name])n.children.length-=1;else{var o=n.children[r-1];o&&"text"===o.type?(n.children.splice(r,1),o.data+="\n"):n.children[r]={type:wt.Text,name:"#text",data:"\n"}}})),function(e,t){var n=t.filter((function(e){var t,n,r=e.node,o=e.parentNode;return!(null===(t=r.attrs)||void 0===t?void 0:t.list)&&(r.children=null===(n=r.children)||void 0===n?void 0:n.filter((function(e){var t="li"===e.name;if(!t){var n=o.children.indexOf(r);o.children.splice(n,0,e)}return t})),!0)})),r=new AI;n.forEach((function(e,t){var o;!function(e,t,n){var r=t.node;if(n&&function(e,t){var n,r=e.node,o=e.parentNode;if(o!==t.parentNode)return!1;var i=o.children,a=i.indexOf(r),l=i.indexOf(t.node);if(-1===a||-1===l)return!1;bt.fatal(l<a,"plugins/lake-data-source/src/kernel/lib/helpers/reflow-list.ts:175");for(var u=a-1;u>=l;u--){var c=i[u];if(c===t.node)return!0;if("element"!==c.type||(null===(n=c.children)||void 0===n?void 0:n.length))return!1}return!1}(t,n)){var o=n.node.attrs.list;bt.fatal(o,"plugins/lake-data-source/src/kernel/lib/helpers/reflow-list.ts:152"),e.addToList(o,r)}else e.addToList(Pr(),r)}(r,e,n[t-1]);var i=e.node,a=i.attrs,l=a.list,u=a.start;null===(o=i.children)||void 0===o||o.forEach((function(e){e.attrs.list=l,u?e.attrs.start=u:delete e.attrs.start}))}))}(0,o),i.forEach((function(e){var t,n,r=e.node,o=e.parentNode,i=[],a=!1;if(Array.from(r.children||[]).forEach((function(e){var t;if("code"===e.name){var n=e,o=r.children.indexOf(n);if(r.children.splice(o,1),null===(t=n.children)||void 0===t?void 0:t.length){var l=Jn(r);l.children=(0,ln.A)(n.children),n.children=[l],a=!0,i.push(n)}}else if(a){var u=r.children.indexOf(e);r.children.splice(u,1);var c=Jn(r);c.children=[e],i.push(c)}})),i.length){var l=o.children.indexOf(r);(t=o.children).splice.apply(t,[l+1,0].concat(i)),(null===(n=r.children)||void 0===n?void 0:n.length)||function(e,t){var n=e.children.indexOf(t);-1!==n&&e.children.splice(n,1)}(o,r)}})),{nodes:n.children||[],meta:t}}},{key:"_walkNodes",value:function(e,t,n){var r=this;t.forEach((function(t){var o;if("text"===t.type){if(!(null===(o=t.data)||void 0===o?void 0:o.trim())&&e.node&&ar.isFragmentNode(e.node))return;return r._walkTextNode(e,t)}return"card"===t.type?r._walkCardNode(e,t,n):r._walkElement(e,t,n)}))}},{key:"_walkTextNode",value:function(e,t){var n,r,o,i=e.getChildContext(t),a=t.data.replace(/[\u200B\uFEFF]/g,"");e&&e.inode&&"span"===e.inode.name&&1===(null===(n=e.inode.children)||void 0===n?void 0:n.length)&&(o=null===(r=e.inode.attrs)||void 0===r?void 0:r.id),o&&!bf(o)&&(o=void 0),i.setText(a||"",o)}},{key:"_walkElement",value:function(e,t,n){var r=this,o=t.name,i=this._nodePreReaders[o];if(i)for(var a=new pI(n),l=0,u=i.length;l<u;l++)if(!1===i[l].read(a,t))return;var c=e.getChildContext(t),s=t.style,d=t.attrs||{},f=d.id;d["data-lake-id"]&&!mf[t.name]&&(f=d["data-lake-id"]),f&&bf(f)&&c.setAttr("id",f),s&&Object.keys(s).forEach((function(e){var n=r._styleReaders[e];n&&n.forEach((function(n){n.read(c,e,s[e],t)}))})),Object.keys(d).forEach((function(e){var n=r._attrReaders[e];n&&n.forEach((function(n){n.read(c,e,d[e],t)}))}));var h=this._nodeReaders[o];h&&(h.some((function(e){return!1===e.read(c,t)})),c.isStopped())||t.children&&this._walkNodes(c,t.children,n)}},{key:"_walkCardNode",value:function(e,t,n){var r=this,o=this._cardPreReaders[t.name];if(!o||!1!==o.read(new pI(n),t.name,t.value||{},t.id)){var i=e.getChildContext(t),a=this._cardReaders[t.name]||this._cardReaders["*"],l=t.style,u=t.attrs||{};if(a){var c=t.value;"object"===(0,Gn.A)(t.value)&&(t.value=Object.assign({},t.value)),t.value&&(delete t.value.margin,"image"!==t.name&&delete t.value.height),l&&Object.keys(l).forEach((function(e){var n=r._styleReaders[e];n&&n.forEach((function(n){n.read(i,e,l[e],t)}))})),Object.keys(u).forEach((function(e){var n=r._attrReaders[e];n&&n.forEach((function(n){n.read(i,e,u[e],t)}))}));var s=bf(t.id)?t.id:void 0;a.read(i,t.name,t.value||{},s),function(e,t){if(e.node){var n=t||{},r=n.margin,o=n.height,i=n.widthMode;e.node.attrs||(e.node.attrs={});var a=e.node.attrs.value;o&&"image"!==e.node.name&&(a.__height=o),r&&(!0===r||r.top&&r.bottom?a.__spacing=Nl:r.top?a.__spacing=Ol:r.bottom&&(a.__spacing=xl)),i&&(a.__widthMode=i===Dl?Dl:El)}}(i,c)}}}}])}(),_I=HR({pluginName:"meta",attr:{meta:"meta"},service:{IMetaService:"IMetaService"}});function CI(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,NI()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function NI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(NI=function(){return!!e})()}var OI=function(e){function t(){var e;return(0,Ke.A)(this,t),e=CI(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(rt);Object.defineProperty(OI,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze(_I.service.IMetaService)});var xI=function(){function e(t,n,r){(0,Ke.A)(this,e),Object.defineProperty(this,"_parentContext",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_inode",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"option",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"_children",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_wrapNode",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_classNames",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"_mainNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_contentNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_attrs",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_style",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_virtual",{enumerable:!0,configurable:!0,writable:!0,value:!1})}return(0,$e.A)(e,[{key:"destroy",value:function(){}},{key:"previousSiblingContext",get:function(){if(!this._parentContext)return null;var e=this._parentContext._children,t=e.indexOf(this);return bt.fatal(-1!==t,"plugins/lake-data-source/src/kernel/lib/context/lake-write-context.ts:34"),e[t-1]||null}},{key:"nextSiblingContext",get:function(){if(!this._parentContext)return null;var e=this._parentContext._children,t=e.indexOf(this);return bt.fatal(-1!==t,"plugins/lake-data-source/src/kernel/lib/context/lake-write-context.ts:47"),e[t+1]||null}},{key:"inode",get:function(){return this._inode}},{key:"mainNode",get:function(){return this._mainNode}},{key:"contentNode",get:function(){return this._contentNode||this._mainNode}},{key:"setVirtual",value:function(e){this._virtual=!0,this._handleAppend=e}},{key:"reset",value:function(){this._children=[],this._attrs=null,this._style=null,this._classNames.clear(),this._mainNode=null,this._contentNode=null}},{key:"setNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;this._mainNode=e,this._contentNode=t}},{key:"replaceNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;this._mainNode=e,this._contentNode=t}},{key:"wrapNode",value:function(e){bt.fatal(this._mainNode,"plugins/lake-data-source/src/kernel/lib/context/lake-write-context.ts:91"),this._wrapNode.push(e)}},{key:"setAttr",value:function(e,t){this._attrs||(this._attrs={}),this._attrs[e]=t}},{key:"setStyle",value:function(e,t){this._style||(this._style={}),this._style[e]=t}},{key:"hasStyle",value:function(e){var t;return!!(null===(t=this._style)||void 0===t?void 0:t[e])}},{key:"getStyle",value:function(e){var t;return(null===(t=this._style)||void 0===t?void 0:t[e])||null}},{key:"removeStyle",value:function(e){this._style&&delete this._style[e]}},{key:"addClassName",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t){t&&e._classNames.add(t)}))}},{key:"newChildContext",value:function(t){var n=new e(this,t,this.option);return this._children.push(n),n}},{key:"close",value:function(){if(this._attrs||this._style||this._classNames.size>0){var e=Object.assign({},this._attrs);this._mainNode?gd.updateAttribute(this._mainNode,{attrs:e,style:this._style,className:Array.from(this._classNames)}):this._virtual||(this._mainNode=gd.createElement("span",{attrs:e,style:this._style,className:Array.from(this._classNames)}))}}},{key:"_appendTo",value:function(e){this._virtual?this._handleAppend(e):this._mainNode&&(this._wrapNode.length&&this._wrapNode.forEach((function(t){gd.appendChild(e,t),e=t})),gd.appendChild(e,this._mainNode)),e=this._contentNode||this._mainNode||e,this._children.forEach((function(t){t._appendTo(e)}))}},{key:"_handleAppend",value:function(e){throw new Error("invalid invoke")}},{key:"isLikeEmpty",value:function(e){return gd.isLikeEmpty(e)}},{key:"createElement",value:function(){return gd.createElement.apply(gd,arguments)}},{key:"createInlineCard",value:function(e,t,n,r){return this._createCardElement("inline",e,t,n,r)}},{key:"createBlockCard",value:function(e,t,n,r){return this._createCardElement("block",e,t,n,r)}},{key:"appendChild",value:function(e,t){return gd.appendChild(e,t)}},{key:"toHTML",value:function(){bt.fatal(this._mainNode,"plugins/lake-data-source/src/kernel/lib/context/lake-write-context.ts:234"),this.close();var e=this.createElement("*");return this._appendTo(e),e.children.map((function(e){return gd.toHTML(e)})).join("")}},{key:"_createCardElement",value:function(e,t,n,r,o){return n&&"object"===(0,Gn.A)(n)&&r&&(n.id=r),gd.createElement("card",{attrs:Object.assign(Object.assign({type:e,name:t},o),{value:n})})}}])}(),EI=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_nodeWriters",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_attrWriters",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_cardWriters",{enumerable:!0,configurable:!0,writable:!0,value:{}})}),[{key:"destroy",value:function(){delete this._kernel,delete this._nodeWriters,delete this._cardWriters,delete this._attrWriters}},{key:"registerNodeWriter",value:function(e,t){var n=this;"string"==typeof e?this._nodeWriters[e]=t:e.forEach((function(e){n._nodeWriters[e]=t}))}},{key:"registerAttrWriter",value:function(e,t){var n=this;"string"==typeof e&&(e=[e]),e.forEach((function(e){n._attrWriters[e]=t}))}},{key:"registerCardWriter",value:function(e,t){var n=this;Array.isArray(e)||(e=[e]),e.forEach((function(e){n._cardWriters[e]=t}))}},{key:"getNodeWriter",value:function(e){return this._nodeWriters[e]||null}},{key:"getCardWriter",value:function(e){return this._cardWriters[e]||null}},{key:"getAttrWriter",value:function(e){return this._attrWriters[e]||null}},{key:"write",value:function(e,t,n){var r,o=this;bt.fatal(ar.isFragmentNode(t),"plugins/lake-data-source/src/kernel/lib/lake-writer.ts:78");var i,a=gd.createElement("#root"),l=new xI(null,t,n);null===(r=t.children)||void 0===r||r.forEach((function(t){DI(l,e,o,t)})),l.close(),l._appendTo(a),i=a.children&&0!==a.children.length?a.children.map((function(e){return gd.toHTML(e)})).join(""):"<p><br /></p>";var u=this._kernel,c=[];if(n&&n.includeMeta){c.push('<!doctype lake><meta name="doc-version" content="1" />');var s=u.getService(OI.ID);s&&c.push(s.toXML())}return c.join("")+i}}])}();function DI(e,t,n,r){var o,i,a;bt.fatal(!ar.isFragmentNode(r),"plugins/lake-data-source/src/kernel/lib/lake-writer.ts:123");var l=e.newChildContext(r),u=r.name,c=r.attrs,s=r.id;if("br"===u)return l.setNode(l.createElement("br")),void l.close();var d=t.getNodeSchema(u),f=n.getCardWriter(u);if(d.category.includes(qe.Card)){if(f&&(f.write(l,u,(null===(o=r.attrs)||void 0===o?void 0:o.value)||{},r.id),l.mainNode)){var h=null===(i=l.mainNode.attrs)||void 0===i?void 0:i.value;if(null==h)return void(null===(a=l.mainNode.attrs)||void 0===a||delete a.value);!function(e,t){if(null==t?void 0:t.value){var n=t.value,r=n.__spacing,o=n.__height,i=n.__widthMode,a=null;r===Nl?a={top:!0,bottom:!0}:r===Ol?a={top:!0}:r===xl&&(a={bottom:!0}),a&&(e.margin=a),o&&(e.height=o),i&&(e.widthMode=i)}}(h,c),l.mainNode.attrs.value="data:".concat(encodeURIComponent(JSON.stringify(h)))}return r.attrs&&Object.keys(r.attrs).forEach((function(e){PI(l,n,e,r.attrs[e],r)})),void l.close()}s&&(l.setAttr("data-lake-id",s),l.setAttr("id",s));var p=n.getNodeWriter(u);if("text"===d.type)l.setNode(gd.createTextNode(r.data||"​"));else if(p&&(p.write(l,r),d.category.includes(qe.Block)))if(bt.fatal(l.contentNode,"plugins/lake-data-source/src/kernel/lib/lake-writer.ts:195"),ar.isLikeEmpty(r))!function(e){for(var t;e;){var n=null===(t=e.children)||void 0===t?void 0:t[e.children.length-1];if(!n)break;if(n.type===wt.Text)break;e=n}ar.appendChild(e,ar.createElement("br"))}(r);else{var v=function(e){var t=e.children||[],n=t[t.length-1];return n&&"text"===n.type?n:null}(r);v&&v.type===wt.Text&&v.data.endsWith("\n")&&(v.data+="\n")}r.attrs&&(r.attrs.color&&PI(l,n,"color",r.attrs.color,r),Object.keys(r.attrs).forEach((function(e){"color"!==e&&PI(l,n,e,r.attrs[e],r)}))),ar.isElementNode(r)&&r.children&&r.children.forEach((function(e){DI(l,t,n,e)})),p&&p.leaveNode(l,r),l.close()}function PI(e,t,n,r,o){var i=t.getAttrWriter(n);i&&i.write(e,n,r,o)}function RI(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,SI()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function SI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(SI=function(){return!!e})()}var TI=function(e){function t(){var e;return(0,Ke.A)(this,t),e=RI(this,t,arguments),Object.defineProperty(e,"lakeReader",{enumerable:!0,configurable:!0,writable:!0,value:new kI(e.kernel)}),Object.defineProperty(e,"lakeWriter",{enumerable:!0,configurable:!0,writable:!0,value:new EI(e.kernel)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){this.lakeReader.destroy(),this.lakeWriter.destroy()}},{key:"registerLakeAttrReader",value:function(e,t){this.lakeReader.registerAttrReader(e,t)}},{key:"registerLakeCardPreReader",value:function(e,t){this.lakeReader.registerCardPreReader(e,t)}},{key:"registerLakeCardReader",value:function(e,t){this.lakeReader.registerCardReader(e,t)}},{key:"registerLakeNodePreReader",value:function(e,t){this.lakeReader.registerNodePreReader(e,t)}},{key:"registerLakeNodeReader",value:function(e,t){this.lakeReader.registerNodeReader(e,t)}},{key:"registerLakeStyleReader",value:function(e,t){this.lakeReader.registerStyleReader(e,t)}},{key:"registerLakeNodeWriter",value:function(e,t){this.lakeWriter.registerNodeWriter(e,t)}},{key:"registerLakeCardWriter",value:function(e,t){this.lakeWriter.registerCardWriter(e,t)}},{key:"registerLakeAttrWriter",value:function(e,t){this.lakeWriter.registerAttrWriter(e,t)}}])}(_S);function jI(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,II()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function II(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(II=function(){return!!e})()}var BI=function(e){function t(){var e;return(0,Ke.A)(this,t),e=jI(this,t,arguments),Object.defineProperty(e,"_dataSource",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){this._dataSource=new fI(e),e.registerDataSource("text/lake",this._dataSource),e.registerWriter("text/lake",this.service.lakeWriter),e.registerReader("text/lake",this.service.lakeReader),this.service.registerLakeNodePreReader("title",{read:function(){return!1}})}},{key:"destroy",value:function(){var e;Tr((0,Je.A)(t.prototype),"destroy",this).call(this),this._dataSource.destroy(),null===(e=this.service)||void 0===e||e.destroy()}}])}(ct);function MI(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,FI()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function FI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(FI=function(){return!!e})()}Object.defineProperty(BI,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:cI.pluginName}),Object.defineProperty(BI,"Service",{enumerable:!0,configurable:!0,writable:!0,value:TI});var LI=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=MI(this,t),Object.defineProperty(n,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t){var n=t.attrs,r=n.src,o=n._$neUploadTaskId,i=n._$neImageSrc,a="";if("string"==typeof r&&("string"==typeof i?a=i:(r&&!this.plugin.option.isCaptureImageURL(r)||this.plugin.option.useOriginSrc(r))&&(a=r),a||o)){var l;if(a)l=ar.createCard("image",KT.createValueByURL({from:"paste",originalURL:r,ratio:this.plugin.option.ratio,src:a}));else{var u=Dr(9);l=ar.createCard("image",KT.createWillUploadValue({type:"url",from:"paste",ratio:this.plugin.option.ratio,originalURL:r,taskId:o,clientId:this.plugin.kernel.id}),u),this.plugin.registerTask(o,u)}e.setNode(l)}}}])}(lI);function UI(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,VI()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function VI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(VI=function(){return!!e})()}var HI=function(e){function t(){return(0,Ke.A)(this,t),UI(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t,n){var r=e.newJob(),o=r.getNodeById(t);if(!(o&&o.isConnected&&o.isCardNode()&&o.parentNode))return e.cancelJob(r),!1;var i=wr.breakLine(r,r.newPosition(o.parentNode,o.offset+1));return i=wr.insertText(r,i,n),r.setSelection([r.newRange(i)]),e.commitJob(r),!0}}])}(gt);function zI(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,WI()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function WI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(WI=function(){return!!e})()}Object.defineProperty(HI,"ID",{enumerable:!0,configurable:!0,writable:!0,value:QT.command.insertAfterImage});var qI=function(e){function t(){var e;return(0,Ke.A)(this,t),e=zI(this,t,arguments),Object.defineProperty(e,"_taskMap",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(e,"_uploadImageByURLHandler",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var n,r,o,i,a,l,u,c,s,d,f=this,h=e.requireService(Qj.ID);e.registerInlineCard(t.cardName),null===(n=e.getService(wS.ID))||void 0===n||n.registerHTMLNodeReader(Rj.NodeNames,new Rj(this,e)),null===(r=e.getService(wS.ID))||void 0===r||r.registerHTMLNodeReader(jj.NodeNames,new jj),null===(o=e.getService(wS.ID))||void 0===o||o.registerNodeHTMLWriter(qj.NodeNames,new qj),null===(i=e.getService(_S.ID))||void 0===i||i.registerLakeCardReader(QT.cardName,new Hj(e)),null===(a=e.getService(RT.ID))||void 0===a||a.registerINodeCardReader(QT.cardName,new Fj(e)),null===(l=e.getService(_S.ID))||void 0===l||l.registerLakeCardWriter(QT.cardName,new Gj),null===(u=e.getService(ET.ID))||void 0===u||u.registerFileReader(h.getFileAcceptUtil().getImageFileAccept(this.option.accept),new xj(this,e)),null===(c=e.getService(tI.ID))||void 0===c||c.registerMarkdownReader("image",new nI),null===(s=e.getService(tI.ID))||void 0===s||s.registerMarkdownWriter("image",new rI),null===(d=e.getService(_S.ID))||void 0===d||d.registerLakeNodeReader("img",new LI(this)),e.extendMethods({setUploadImageByURLHandler:function(e){f._uploadImageByURLHandler=e}}),this._initMarkdownKey()}},{key:"destroy",value:function(){delete this._taskMap,delete this._uploadImageByURLHandler,Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}},{key:"_initMarkdownKey",value:function(){var e,t=this;null===(e=this.kernel.getService(DS.ID))||void 0===e||e.registerMarkdownMatcher(CS.whiteSpace,new IT(this.editing,{match:function(e){if(!t._uploadImageByURLHandler)return null;var n,r=/\!\[([^\]]*?)\]\(([^\]]+?)\)$/.exec(e);return r?(n=r[2],yh.isBase64ImageURL(n)||yh.isFullHttpURL(n)?r:null):null}},(function(e,n,r,o){var i,a=o.matched,l=e.newPosition(r,a.index),u=a[2],c=t._uploadImageByURLHandler(u);bt.fatal(c.taskId||c.url,"plugins/image/src/kernel/index.ts:181"),i=c.taskId?KT.createWillUploadValue({type:"url",from:"markdown",ratio:t.option.ratio,originalURL:u,taskId:c.taskId,clientId:t.kernel.id}):KT.createValueByURL({from:"markdown",ratio:t.option.ratio,originalURL:u,src:c.url});var s=Ai.insertCardNode(e,e.newSelection(e.newRange(l)),"image",i).cardNode;e.setSelection(e.newSelection(e.newRange(e.newPosition(s.parentNode,s.offset+1))))})))}},{key:"registerTask",value:function(e,t){this._taskMap[e]=t}},{key:"getNodeIdByTaskId",value:function(e){return this._taskMap[e]}}])}(ct);Object.defineProperty(qI,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:"image"}),Object.defineProperty(qI,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:XT}),Object.defineProperty(qI,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[tj,oj,lj,_j,gj,wj,HI]}),Object.defineProperty(qI,"cardName",{enumerable:!0,configurable:!0,writable:!0,value:QT.cardName});var $I="left",KI="center",YI="right",GI="justify",JI="distributed",XI=[$I,KI,YI,GI,JI],QI="text-align",ZI="text-align",eB="center",tB="ne-alignment";const nB={targets:[qe.Block],values:XI.slice()};var rB=HR({pluginName:"alignment",attr:{alignment:"alignment"},toolbar:{alignment:"alignment"},command:{alignment:"alignment"}});function oB(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,iB()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function iB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(iB=function(){return!!e})()}var aB=function(e){function t(){var e;return(0,Ke.A)(this,t),e=oB(this,t,arguments),Object.defineProperty(e,"attrName",{enumerable:!0,configurable:!0,writable:!0,value:rB.attr.alignment}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Cl);function lB(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,uB()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function uB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(uB=function(){return!!e})()}Object.defineProperty(aB,"ID",{enumerable:!0,configurable:!0,writable:!0,value:rB.command.alignment});var cB=function(e){function t(){return(0,Ke.A)(this,t),lB(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"readNode",value:function(e,t){t.name===eB&&e.addAttr(rB.attr.alignment,KI)}}])}(Ej);Object.defineProperty(cB,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[eB]});var sB=(0,$e.A)((function e(){(0,Ke.A)(this,e)}));function dB(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,fB()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function fB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(fB=function(){return!!e})()}var hB=function(e){function t(){return(0,Ke.A)(this,t),dB(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"readStyle",value:function(e,t,n){switch(n){case $I:case YI:case KI:case GI:case JI:e.addAttr(rB.attr.alignment,n)}}}])}(sB);Object.defineProperty(hB,"StyleNames",{enumerable:!0,configurable:!0,writable:!0,value:[QI]});var pB=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"read",value:function(e,t,n){e.setAttr(rB.attr.alignment,n)}}])}();Object.defineProperty(pB,"styleNames",{enumerable:!0,configurable:!0,writable:!0,value:ZI});var vB=(0,$e.A)((function e(){(0,Ke.A)(this,e)}));function mB(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,gB()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function gB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(gB=function(){return!!e})()}var bB=function(e){function t(){return(0,Ke.A)(this,t),mB(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t,n){e.addStyle(QI,n)}}])}(vB);Object.defineProperty(bB,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:rB.attr.alignment});var yB=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"write",value:function(e,t,n){e.setStyle(ZI,n)}}])}();function wB(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,AB()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function AB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(AB=function(){return!!e})()}Object.defineProperty(yB,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:rB.attr.alignment});var kB=function(e){function t(){return(0,Ke.A)(this,t),wB(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerAttr(rB.attr.alignment,nB)}},{key:"afterInit",value:function(){var e=this.kernel,t=e.getService(wS.ID);t&&(t.registerHTMLNodeReader(cB.NodeNames,new cB),t.registerHTMLStyleReader(hB.StyleNames,new hB));var n=e.getService(wS.ID);n&&n.registerAttrHTMLWriter(bB.AttrNames,new bB);var r=e.getService(_S.ID);r&&r.registerLakeStyleReader(pB.styleNames,new pB);var o=e.getService(_S.ID);o&&o.registerLakeAttrWriter(yB.AttrNames,new yB)}}])}(ct);Object.defineProperty(kB,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:rB.pluginName}),Object.defineProperty(kB,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[aB]});var _B=function(){return(0,$e.A)((function e(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,Ke.A)(this,e),Object.defineProperty(this,"_editing",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_patternStr",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"_handler",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"_skipSpace",{enumerable:!0,configurable:!0,writable:!0,value:o})}),[{key:"destroy",value:function(){delete this._editing}},{key:"match",value:function(e){var t=this._doMatch(e);if(!t)return null;for(var n=t.start,r=t.end.node;r;){if(CB(r))return null;if(r===n.node)break;var o=r.previousSibling;if(!(null==o?void 0:o.isTextNode()))return null;r=o}return t}},{key:"_getLastIndexSkipSpace",value:function(e,t,n){for(;n>=0;){var r=e.lastIndexOf(t,n);if(r<0)return r;if(" "!==e[r+t.length])return r;n=r-1}return-1}},{key:"_doMatch",value:function(e){var t=this._patternStr,n=t.length,r=e[e.length-1];if(!r)return null;if(!r.text.endsWith(t))return null;if(this._skipSpace&&r.text.endsWith(" "+t))return null;var o=e.map((function(e){return e?e.text:" "})).join(""),i=this._skipSpace?this._getLastIndexSkipSpace(o,t,o.length-n-1):o.lastIndexOf(t,o.length-n-1);if(-1===i||i+n+n>=o.length)return null;for(var a=0,l=0;a<e.length;a++){var u=e[a],c=u?u.text:" ";if(u){if(l+c.length>i)return{start:{node:u.fragments[0].start.node,offset:u.fragments[0].start.offset+i-l},end:{node:r.fragments[0].end.node,offset:r.fragments[0].end.offset}};l+=c.length}else l+=c.length}return null}},{key:"exec",value:function(e){var t=this._editing.newJob(We.User),n=e.start,r=e.end,o=this._patternStr.length;if(n.node===r.node){var i=n.node,a=i.data.substring(0,n.offset),l=i.data.substring(r.offset),u=i.data.substring(n.offset+o,r.offset-o);t.setTextNodeData(i,a+u+l),this._handler(t,t.newRange(t.newPosition(i,a.length),t.newPosition(i,a.length+u.length)))}else{var c=n.node.data.substring(0,n.offset)+n.node.data.substring(n.offset+o),s=r.node.data.substring(0,r.offset-o)+r.node.data.substring(r.offset);t.setTextNodeData(n.node,c),t.setTextNodeData(r.node,s),this._handler(t,t.newRange(t.newPosition(n.node,n.offset),t.newPosition(r.node,r.offset-o)))}this._editing.commitJob(t)}}])}();function CB(e){return!!Ut.closest(e,qe.InlineBox)}const NB={bold:{targets:[qe.Text],values:[!0]},italic:{targets:[qe.Text],values:[!0]},underline:{targets:[qe.Text],values:[!0]},strikethrough:{targets:[qe.Text],values:[!0]},emoji:{targets:[qe.Text],values:[!0],allowClone:!1}};var OB=HR({pluginName:"basicTextStyle",attr:{bold:"bold",italic:"italic",underline:"underline",strikethrough:"strikethrough"},toolbar:{bold:"bold",italic:"italic",underline:"underline",strikethrough:"strikethrough"},command:{bold:"bold",italic:"italic",underline:"underline",strikethrough:"strikethrough"},service:{IBasicTextStyleKernelService:"IBasicTextStyleKernelService"}});function xB(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function EB(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,DB()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function DB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(DB=function(){return!!e})()}var PB=function(e){function t(){var e;return(0,Ke.A)(this,t),e=EB(this,t,arguments),Object.defineProperty(e,"attrName",{enumerable:!0,configurable:!0,writable:!0,value:OB.attr.bold}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){var n=e.getSelection();if(wi.allBlockNodeHasCategory(n,qe.Heading))return st;var r,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return xB(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xB(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(this.plugin.service.boldDisableHandlers);try{for(o.s();!(r=o.n()).done;)if((0,r.value)(n))return st}catch(e){o.e(e)}finally{o.f()}return Tr((0,Je.A)(t.prototype),"getState",this).call(this,e)}},{key:"getValue",value:function(e){return Tr((0,Je.A)(t.prototype),"getValue",this).call(this,e,qe.Heading)}},{key:"execute",value:function(e){return Tr((0,Je.A)(t.prototype),"execute",this).call(this,e,qe.Heading)}}])}(zl);function RB(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,SB()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function SB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(SB=function(){return!!e})()}Object.defineProperty(PB,"ID",{enumerable:!0,configurable:!0,writable:!0,value:OB.command.bold});var TB=function(e){function t(){var e;return(0,Ke.A)(this,t),e=RB(this,t,arguments),Object.defineProperty(e,"attrName",{enumerable:!0,configurable:!0,writable:!0,value:OB.attr.italic}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(zl);function jB(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,IB()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function IB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(IB=function(){return!!e})()}Object.defineProperty(TB,"ID",{enumerable:!0,configurable:!0,writable:!0,value:OB.command.italic});var BB=function(e){function t(){var e;return(0,Ke.A)(this,t),e=jB(this,t,arguments),Object.defineProperty(e,"attrName",{enumerable:!0,configurable:!0,writable:!0,value:OB.attr.strikethrough}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(zl);function MB(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,FB()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function FB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(FB=function(){return!!e})()}Object.defineProperty(BB,"ID",{enumerable:!0,configurable:!0,writable:!0,value:OB.command.strikethrough});var LB=function(e){function t(){var e;return(0,Ke.A)(this,t),e=MB(this,t,arguments),Object.defineProperty(e,"attrName",{enumerable:!0,configurable:!0,writable:!0,value:OB.attr.underline}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(zl);function UB(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,VB()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function VB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(VB=function(){return!!e})()}Object.defineProperty(LB,"ID",{enumerable:!0,configurable:!0,writable:!0,value:OB.command.underline});var HB=function(e){function t(){return(0,Ke.A)(this,t),UB(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"readNode",value:function(e,t){switch(t.name){case"strong":case"b":e.addAttr(OB.attr.bold,!0);break;case"i":case"em":e.addAttr(OB.attr.italic,!0);break;case"u":case"ins":e.addAttr(OB.attr.underline,!0);break;case"del":case"s":e.addAttr(OB.attr.strikethrough,!0)}}}])}(Ej);function zB(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,WB()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function WB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(WB=function(){return!!e})()}Object.defineProperty(HB,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["strong","b","i","em","u","ins","s","del"]});var qB=function(e){function t(){return(0,Ke.A)(this,t),zB(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"readStyle",value:function(e,t,n){switch(t){case"font-weight":(n>=500||"bold"===n||"bolder"===n)&&e.addAttr(OB.attr.bold,!0);break;case"font-style":"italic"!==n&&"oblique"!==n||e.addAttr(OB.attr.italic,!0);break;case"text-decoration-line":case"text-decoration":var r="string"==typeof n?n.split(/\s+/g):[];r.includes("underline")&&e.addAttr(OB.attr.underline,!0),r.includes("line-through")&&e.addAttr(OB.attr.strikethrough,!0)}}}])}(sB);Object.defineProperty(qB,"StyleNames",{enumerable:!0,configurable:!0,writable:!0,value:["font-weight","font-style","text-decoration","text-decoration-line"]});var $B=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"read",value:function(e,t){var n;switch(t.name){case"strong":case"b":n=OB.attr.bold;break;case"em":case"i":n=OB.attr.italic;break;case"u":case"ins":n=OB.attr.underline;break;case"del":n=OB.attr.strikethrough;break;default:return bt.fatal(!1,"plugins/basic-text-style/src/kernel/readers/lake-basic-text-style-node-reader.ts:32"),!1}return e.setAttr(n,!0),!1}}])}();function KB(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,YB()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function YB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(YB=function(){return!!e})()}var GB=function(e){function t(){return(0,Ke.A)(this,t),KB(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t,n){if(n){switch(t){case OB.attr.bold:return void e.wrapNode(e.createElement("strong"));case OB.attr.italic:return void e.wrapNode(e.createElement("em"))}var r=e.inode.attrs,o=r.underline,i=r.strikethrough;o&&i?e.addStyle("text-decoration","underline line-through"):o?e.addStyle("text-decoration","underline"):i&&e.addStyle("text-decoration","line-through")}}}])}(vB);Object.defineProperty(GB,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:[OB.attr.bold,OB.attr.italic,OB.attr.underline,OB.attr.strikethrough]});var JB=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"write",value:function(e,t){var n;switch(t){case OB.attr.bold:n="strong";break;case OB.attr.italic:n="em";break;case OB.attr.underline:n="u";break;case OB.attr.strikethrough:n="del";break;default:return void bt.fatal(!1,"plugins/basic-text-style/src/kernel/writers/lake-basic-text-style-attr-writer.ts:36")}"u"!==n&&"del"!==n||!e.hasStyle("color")||(e.wrapNode(gd.createElement("span",{style:{color:e.getStyle("color")}})),e.removeStyle("color")),e.wrapNode(gd.createElement(n))}}])}();Object.defineProperty(JB,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:[OB.attr.bold,OB.attr.italic,OB.attr.underline,OB.attr.strikethrough]});var XB=0,QB=1,ZB=2;const eM={MATH:{PLUGIN_NAME:"math",NODE_NAME:"math",UI_NAME:"math",OPTION_NAME:"math"},MENTION:{PLUGIN_NAME:"mention",NODE_NAME:"mention",UI_NAME:"mention",OPTION_NAME:"mention"},CODEBLOCK:{PLUGIN_NAME:"codeblock",NODE_NAME:"codeblock",UI_NAME:"codeblock",OPTION_NAME:"codeblock"},TEXT_DIAGRAM:{PLUGIN_NAME:"textDiagram",NODE_NAME:"textDiagram",UI_NAME:"text-diagram",OPTION_NAME:"textDiagram"},EMOJI:{PLUGIN_NAME:"emoji",NODE_NAME:"emoji",UI_NAME:"emoji",OPTION_NAME:"emoji",COMMAND:"emoji"},UNICODE_EMOJI:{PLUGIN_NAME:"unicodeEmoji",NODE_NAME:"unicodeEmoji",UI_NAME:"unicodeEmoji",OPTION_NAME:"unicodeEmoji",COMMAND:"unicodeEmoji"},CALENDAR:{NODE_NAME:"calendar",UI_NAME:"calendar",OPTION_NAME:"calendar",LAKE_NAME:"calendar"},VOTE:{NODE_NAME:"vote",UI_NAME:"vote",OPTION_NAME:"vote",LAKE_NAME:"vote"},FILE:{NODE_NAME:"file",UI_NAME:"file",OPTION_NAME:"file",LAKE_NAME:"file"},LOCKED_TEXT:{NODE_NAME:"lockedtext",UI_NAME:"lockedtext",OPTION_NAME:"lockedtext",LAKE_NAME:"lockedtext"},LOCAL_DOC:{NODE_NAME:"localdoc",UI_NAME:"localdoc",OPTION_NAME:"localdoc",LAKE_NAME:"localdoc"},AUDIO:{NODE_NAME:"audio",UI_NAME:"audio",OPTION_NAME:"audio"},VIDEO:{NODE_NAME:"video",UI_NAME:"video",OPTION_NAME:"video"},TRANSFER:{NODE_NAME:"transfer",UI_NAME:"transfer",OPTION_NAME:"transfer",LAKE_NAME:"transfer"},IFRAME_QUERY_FLAG:"_isCardInner",THREE:{NODE_NAME:"three",UI_NAME:"three",PLUGIN_NAME:"three",LAKE_NAME:"three"}};var tM,nM="about:blank",rM="lark",oM="yuque",iM="card",aM="before",lM="after",uM="inline",cM="clean";!function(e){e.INLINE="inline",e.CLEAN="clean"}(tM||(tM={}));var sM,dM=1e3,fM=100,hM=10,pM="app",vM="default",mM="simple",gM="note",bM="small",yM={DEFAULT:"default",SIMPLE:"simple",NOTE:"note",SMALL:"small"};function wM(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,AM()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function AM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(AM=function(){return!!e})()}!function(e){e.audio="audio",e.localDoc="localDoc",e.file="file",e.image="image",e.video="video",e.all="*"}(sM||(sM={}));var kM,_M=function(e){function t(){var e;return(0,Ke.A)(this,t),e=wM(this,t,arguments),Object.defineProperty(e,"_$inited",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"sidebarRootNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"closed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"close",value:function(){}},{key:"init",value:function(){}},{key:"destroy",value:function(){this.closed=!0,this.removeAllListeners()}},{key:"isPermanent",value:function(){return!1}}])}(it);!function(e){e.default="",e.dark="dark"}(kM||(kM={}));var CM=["cardSelect","|","undo","redo","formatPainter","clearFormat","|","style","fontsize","bold","italic","strikethrough","underline","mixedTextStyle","|","color","bgColor","|","alignment","unorderedList","orderedList","indent","lineHeight","|","taskList","link","quote","hr","|","search","translate","toc","materialLibrary"],NM=["cardSelect","undo","redo","style","bold","taskList","orderedList","unorderedList","link","quote","alignment","indent"],OM=["cardSelect","|","undo","redo","formatPainter","clearFormat","|","style","fontsize","bold","italic","strikethrough","underline","mixedTextStyle","|","color","bgColor","tableCellBgColor","tableBorderVisible","|","alignment","tableVerticalAlign","tableMergeCell","|","unorderedList","orderedList","indent","lineHeight","|","taskList","link","quote","hr","|","search","translate","toc","materialLibrary"];function xM(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,EM()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function EM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(EM=function(){return!!e})()}var DM=function(e){function t(){var e;return(0,Ke.A)(this,t),e=xM(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),Object.defineProperty(e,"boldDisableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(rt);function PM(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,RM()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function RM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(RM=function(){return!!e})()}Object.defineProperty(DM,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze(OB.service.IBasicTextStyleKernelService)});var SM=function(e){function t(){return(0,Ke.A)(this,t),PM(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"registerBoldDisableHandler",value:function(e){this.boldDisableHandlers.push(e)}},{key:"destroy",value:function(){this.boldDisableHandlers=[]}}])}(DM);function TM(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,jM()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function jM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(jM=function(){return!!e})()}var IM={"**":"bold",__:"bold","~~":"strikethrough",_:"italic","*":"italic","++":"underline"},BM=function(e){function t(){return(0,Ke.A)(this,t),TM(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerAttr(NB),this._initMarkdownShortcutKey()}},{key:"afterInit",value:function(){var e=this.kernel,t=e.getService(wS.ID);t&&(t.registerHTMLNodeReader(HB.NodeNames,new HB),t.registerHTMLStyleReader(qB.StyleNames,new qB));var n=e.getService(wS.ID);n&&n.registerAttrHTMLWriter(GB.AttrNames,new GB);var r=e.getService(_S.ID);r&&r.registerLakeNodeReader(["strong","b","em","i","del","u","ins"],new $B);var o=e.getService(_S.ID);o&&o.registerLakeAttrWriter(JB.AttrNames,new JB)}},{key:"_initMarkdownShortcutKey",value:function(){var e=this,t=this.kernel.getService(DS.ID);t&&Object.keys(IM).forEach((function(n){t.registerMarkdownMatcher(CS.whiteSpace,new _B(e.editing,n,(function(t,r){e._handlerMarkdown(t,IM[n],r)}),!0))}))}},{key:"_handlerMarkdown",value:function(e,t,n){var r=e.createInheritTextNode("",n.end);n=Go.setAttribute(e,n,t,!0),e.insertNodeByPosition(n.end,r),e.setSelection([e.newRange(e.newPosition(r,0))])}}])}(ct);Object.defineProperty(BM,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:OB.pluginName}),Object.defineProperty(BM,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[PB,TB,LB,BB]}),Object.defineProperty(BM,"Service",{enumerable:!0,configurable:!0,writable:!0,value:SM});const MM={targets:[qe.Text],values:function(){return!0}};var FM=HR({pluginName:"bgColor",attr:{bgColor:"bgColor"},toolbar:{bgColor:"bgColor"},command:{bgColor:"bgColor",clearBgColor:"clearBgColor"}});function LM(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,UM()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function UM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(UM=function(){return!!e})()}var VM=function(e){function t(){var e;return(0,Ke.A)(this,t),e=LM(this,t,arguments),Object.defineProperty(e,"attrName",{enumerable:!0,configurable:!0,writable:!0,value:FM.attr.bgColor}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}($l);function HM(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,zM()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function zM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(zM=function(){return!!e})()}Object.defineProperty(VM,"ID",{enumerable:!0,configurable:!0,writable:!0,value:FM.command.bgColor});var WM=function(e){function t(){var e;return(0,Ke.A)(this,t),e=HM(this,t,arguments),Object.defineProperty(e,"attrName",{enumerable:!0,configurable:!0,writable:!0,value:FM.attr.bgColor}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e){return Tr((0,Je.A)(t.prototype),"execute",this).call(this,e,null)}}])}($l);Object.defineProperty(WM,"ID",{enumerable:!0,configurable:!0,writable:!0,value:FM.command.clearBgColor});var qM={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},$M="background-color";function KM(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,YM()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function YM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(YM=function(){return!!e})()}var GM={table:!0,tbody:!0,thead:!0,tfoot:!0,tr:!0,th:!0,td:!0},JM=function(e){function t(){return(0,Ke.A)(this,t),KM(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"readStyle",value:function(e,t,n,r){var o=r.name;n&&"rgb(255, 255, 255)"!==n&&"#fff"!==n&&(qM[null==n?void 0:n.toLowerCase()]&&(n=qM[n.toLowerCase()]),(n.startsWith("rgb(")||n.startsWith("#")&&(7===n.length||4===n.length))&&(GM[o]?e.addAttr("cellBgColor",n):e.addAttr(FM.attr.bgColor,n)))}}])}(sB);Object.defineProperty(JM,"StyleNames",{enumerable:!0,configurable:!0,writable:!0,value:["background-color","background"]});var XM=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"read",value:function(e,t,n){e.setAttr(FM.attr.bgColor,n)}}])}();function QM(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,ZM()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function ZM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ZM=function(){return!!e})()}Object.defineProperty(XM,"StyleNames",{enumerable:!0,configurable:!0,writable:!0,value:$M});var eF=function(e){function t(){return(0,Ke.A)(this,t),QM(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t,n){n&&e.addStyle("background-color",n)}}])}(vB);Object.defineProperty(eF,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:[FM.attr.bgColor]});var tF=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"write",value:function(e,t,n){e.setStyle($M,n)}}])}();function nF(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,rF()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function rF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rF=function(){return!!e})()}Object.defineProperty(tF,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:[FM.attr.bgColor]});var oF=function(e){function t(){return(0,Ke.A)(this,t),nF(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerAttr(FM.attr.bgColor,MM)}},{key:"afterInit",value:function(){var e=this.kernel,t=e.getService(wS.ID),n=e.getService(wS.ID),r=e.getService(_S.ID),o=e.getService(_S.ID);t&&t.registerHTMLStyleReader(JM.StyleNames,new JM),n&&n.registerAttrHTMLWriter(eF.AttrNames,new eF),r&&r.registerLakeStyleReader(XM.StyleNames,new XM),o&&o.registerLakeAttrWriter(tF.AttrNames,new tF)}}])}(ct);Object.defineProperty(oF,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:FM.pluginName}),Object.defineProperty(oF,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[VM,WM]});var iF=HR({pluginName:"breakLine",command:{breakLine:"breakLine"}});function aF(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,lF()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function lF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(lF=function(){return!!e})()}var uF=function(e){function t(){return(0,Ke.A)(this,t),aF(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){var t=e.getSelection();return wi.isUnbreakable(t)?pt.UNAVAILABLE:pt.NOT_EXECUTED}},{key:"execute",value:function(e){var t=e.newJob();if(this.getState(t)===pt.UNAVAILABLE)return e.cancelJob(t),!1;var n=t.getSelection();n.collapsed||(n=wi.deleteContent(t,n)),bt.fatal(n.collapsed,"plugins/break-line/src/kernel/break-line-command.ts:37");var r=wr.breakLine(t,n.firstRange.start);return t.setSelection([t.newRange(r)]),e.commitJob(t),!0}}])}(gt);function cF(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,sF()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function sF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(sF=function(){return!!e})()}Object.defineProperty(uF,"ID",{enumerable:!0,configurable:!0,writable:!0,value:iF.command.breakLine});var dF=function(e){function t(){return(0,Ke.A)(this,t),cF(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){}}])}(ct);function fF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function hF(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,pF()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function pF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pF=function(){return!!e})()}Object.defineProperty(dF,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:iF.pluginName}),Object.defineProperty(dF,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[uF]});var vF=function(e){function t(){return(0,Ke.A)(this,t),hF(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t,n){var r=e.newJob(),o=r.getNodesByName(t);bt.fatal(Array.isArray(o),"plugins/card/src/kernel/commands/card-batch-apply-command.ts:13");var i,a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return fF(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fF(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(o);try{for(a.s();!(i=a.n()).done;){var l=i.value;l&&l.isConnected&&l.isCardNode()&&r.setAttribute(l,"value",Object.assign(Object.assign({},l.attrs.value),n))}}catch(e){a.e(e)}finally{a.f()}return e.commitJob(r),!0}}])}(gt);function mF(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,gF()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function gF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(gF=function(){return!!e})()}Object.defineProperty(vF,"ID",{enumerable:!0,configurable:!0,writable:!0,value:dj.command.cardBatchApply});var bF=function(e){function t(){return(0,Ke.A)(this,t),mF(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(){return dt}},{key:"getValue",value:function(e,t){return!!t&&e.getNodesByName(t).some((function(e){return e.isConnected}))}},{key:"execute",value:function(e,t){return this.getValue(e.job,t)}}])}(gt);function yF(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,wF()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function wF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wF=function(){return!!e})()}Object.defineProperty(bF,"ID",{enumerable:!0,configurable:!0,writable:!0,value:dj.command.cardIsExist});var AF=function(e){function t(){return(0,Ke.A)(this,t),yF(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(){return dt}},{key:"getValue",value:function(e,t){var n=e.getNodeById(t);return n&&n.isConnected&&n.isCardNode()?n.attrs.value:null}}])}(gt);function kF(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,_F()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function _F(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_F=function(){return!!e})()}Object.defineProperty(AF,"ID",{enumerable:!0,configurable:!0,writable:!0,value:dj.command.cardValue});var CF=function(e){function t(){return(0,Ke.A)(this,t),kF(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t){var n=e.newJob(),r=n.getNodeById(t),o=n.getSelection();if(r&&r.hasCategory(qe.Card)&&1===o.rangeCount){var i=n.newSelection(Vt.selectNodeContents(r));i=wi.deleteContent(n,i,!0,!0),n.setSelection(i),e.commitJob(n)}else e.cancelJob(n)}}])}(gt);function NF(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,OF()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function OF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(OF=function(){return!!e})()}Object.defineProperty(CF,"ID",{enumerable:!0,configurable:!0,writable:!0,value:dj.command.deleteCard});var xF=function(e){function t(){return(0,Ke.A)(this,t),NF(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:iM,r=e.newJob(),o=r.getNodeById(t);return o&&o.isConnected&&o.isCardNode()?(n===iM?r.setSelection(r.newSelection(r.newRange(r.newPosition(o,0)))):n===lM?r.setSelection(r.newSelection(r.newRange(r.newPosition(o.parentNode,o.offset+1)))):n===aM&&r.setSelection(r.newSelection(r.newRange(r.newPosition(o.parentNode,o.offset)))),e.commitJob(r),!0):(e.cancelJob(r),!1)}}])}(gt);function EF(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,DF()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function DF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(DF=function(){return!!e})()}Object.defineProperty(xF,"ID",{enumerable:!0,configurable:!0,writable:!0,value:dj.command.focusCard});var PF=function(e){function t(){return(0,Ke.A)(this,t),EF(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this._execute(e,t,n,r)}}])}(sj);function RF(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,SF()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function SF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(SF=function(){return!!e})()}Object.defineProperty(PF,"ID",{enumerable:!0,configurable:!0,writable:!0,value:dj.command.insertCard});var TF=function(e){function t(){return(0,Ke.A)(this,t),RF(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t,n,r){bt.fatal("boolean"==typeof t,"plugins/card/src/kernel/commands/set-card-value-command.ts:17");var o=e.newJob(t?We.Auto:We.User),i=o.getNodeById(n);return i&&i.isConnected&&i.hasCategory(qe.Card)?(o.setAttribute(i,"value",r),e.commitJob(o),!0):(e.cancelJob(o),!1)}}])}(gt);function jF(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,IF()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function IF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(IF=function(){return!!e})()}Object.defineProperty(TF,"ID",{enumerable:!0,configurable:!0,writable:!0,value:dj.command.setCardValue});var BF=function(e){function t(){return(0,Ke.A)(this,t),jF(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e){e.setVirtual((function(){})),e._handleAppend=function(){}}}])}(vT);function MF(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,FF()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function FF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(FF=function(){return!!e})()}Object.defineProperty(BF,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["hole","rootCardHole"]});var LF=function(e){function t(){return(0,Ke.A)(this,t),MF(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t;null===(t=e.getService(_S.ID))||void 0===t||t.registerLakeNodeWriter(BF.NodeNames,new BF)}}])}(ct);function UF(e,t){return wi.replaceBlockNode(e,t,null,!1)}Object.defineProperty(LF,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:dj.pluginName}),Object.defineProperty(LF,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[TF,PF,xF,CF,AF,pj,bF,vF]});var VF=HR({pluginName:"clearFormat",toolbar:{clearFormat:"clearFormat"},command:{clearFormat:"clearFormat"}});function HF(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,zF()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function zF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(zF=function(){return!!e})()}var WF=function(e){function t(){return(0,Ke.A)(this,t),HF(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){var t=e.getSelection();return wi.isInCard(t)||wi.isInHole(t)?st:dt}},{key:"execute",value:function(e){var t=e.newJob(),n=function(e,t){if(t.isCardSelection)return t;if(t.isTableSelection)return UF(e,t);var n=t.firstRange;if(n.collapsed){if(!Ut.closest(n.start.node,qe.Block)){bt.fatal(n.start.node.hasCategory([qe.Root,qe.LikeRoot]),"plugins/clear-format/src/kernel/helper/clear-format.ts:26");var r=wr.makeSureAtInput(e,n.start);return UF(e,e.newSelection(e.newRange(r)))}return UF(e,t)}var o=n.start.node,i=n.end.node,a=Ut.closest(o,qe.Block),l=Ut.closest(i,qe.Block);return a&&a===l?function(e,t){var n=Go.splitTextContent(e,t.firstRange);return Go.walkRange(n,(function(t){if(t.isTextNode()||t.hasCategory(qe.InlineCard)){var n=t.attrs;Object.keys(n).forEach((function(n){e.removeAttribute(t,n)}))}})),t.cloneByRange(n)}(e,t):UF(e,t)}(t,t.getSelection());return t.setSelection(n),!0}}])}(gt);function qF(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,$F()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function $F(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($F=function(){return!!e})()}Object.defineProperty(WF,"ID",{enumerable:!0,configurable:!0,writable:!0,value:VF.command.clearFormat});var KF=function(e){function t(){return(0,Ke.A)(this,t),qF(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){}}])}(ct);function YF(e,t){return t.cloneByRange(t.ranges.map((function(t){var n=t.start,r=n.node,o=n.offset,i=t.end;if(!t.collapsed&&r.isElement()&&r.childCount===o){var a=function(e){for(bt(e.isElement(),"plugins/clipboard/src/common/reduce-selection.ts:48");e&&!e.isRootNode();){if(e.nextSibling)return e.nextSibling;e=e.parent}return null}(r);if(a){var l=Vt.createAt(new At(a,0),i);return Hn(l),xa(e,l)}}return t})))}Object.defineProperty(KF,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:VF.pluginName}),Object.defineProperty(KF,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[WF]});var GF=HR({pluginName:"clipboard",command:{copy:"copy",cut:"cut",paste:"paste"}});function JF(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,XF()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function XF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(XF=function(){return!!e})()}var QF=function(e){function t(){return(0,Ke.A)(this,t),JF(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){var t=e.getSelection();return t.isCardSelection?pt.NOT_EXECUTED:t.collapsed?pt.UNAVAILABLE:pt.NOT_EXECUTED}},{key:"getValue",value:function(){return!1}},{key:"execute",value:function(e,t,n){var r=e.job;if(t){var o=r.newPosition(t.start.node,t.start.offset),i=r.newPosition(t.end.node,t.end.offset);return this._copyBySelection(r,r.newSelection(r.newRange(o,i)),n)}return this.getState(r)===pt.UNAVAILABLE?null:this._copyBySelection(r,r.getSelection(),n)}},{key:"_copyBySelection",value:function(e,t,n){t.isCardSelection||(t=t.cloneByRange(t.ranges.map((function(t){return Go.enlargeRangeContainsBlockNode(e,t)}))));var r=wi.extractINode(e,YF(e,t));if(!r)return{};var o=this.kernel,i=o.getSupportedWriterTypes(),a={};return i.forEach((function(e){if("text/markdown"!==e&&"text/aone"!==e){var t=o.writeData(e,r,Object.assign(Object.assign({mode:tM.INLINE},n),{since:"copy"}));a[e]="string"==typeof t?t:JSON.stringify(t)}})),a}}])}(gt);function ZF(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,eL()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function eL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(eL=function(){return!!e})()}Object.defineProperty(QF,"ID",{enumerable:!0,configurable:!0,writable:!0,value:GF.command.copy});var tL=function(e){function t(){return(0,Ke.A)(this,t),ZF(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){var t=e.getSelection();return t.isCardSelection?pt.NOT_EXECUTED:t.collapsed?pt.UNAVAILABLE:pt.NOT_EXECUTED}},{key:"getValue",value:function(){return!1}},{key:"execute",value:function(e){var t=e.newJob();if(this.getState(t)===pt.UNAVAILABLE)return!1;var n=this._extractINode(t);if(!n)return null;var r=this.kernel,o=r.getSupportedWriterTypes(),i={};o.forEach((function(e){if("text/markdown"!==e&&"text/aone"!==e){var t=r.writeData(e,n,{since:"copy",mode:tM.INLINE});i[e]="string"==typeof t?t:JSON.stringify(t)}}));var a=wi.deleteContent(t,t.getSelection());return t.setSelection(a),e.commitJob(t),i}},{key:"_extractINode",value:function(e){var t,n=e.getSelection();return t=n.isCardSelection?n:n.cloneByRange(n.ranges.map((function(t){return Go.enlargeRangeContainsBlockNode(e,t)}))),wi.extractINode(e,YF(e,t))}}])}(gt);function nL(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,rL()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function rL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rL=function(){return!!e})()}Object.defineProperty(tL,"ID",{enumerable:!0,configurable:!0,writable:!0,value:GF.command.cut});var oL=["text/ne-inode","text/lake","text/html","text/plain","Files"],iL=function(e){function t(){return(0,Ke.A)(this,t),nL(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(){return pt.NOT_EXECUTED}},{key:"getValue",value:function(){return!1}},{key:"execute",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];bt.fatal(t.types.indexOf,"payload.types is not array like","plugins/clipboard/src/kernel/commands/paste-command.ts:34"),bt.fatal("function"==typeof t.getData,"payload.getData is not a function","plugins/clipboard/src/kernel/commands/paste-command.ts:35");for(var o=e.newJob(),i=this.kernel,a=i.getSupportedReaderTypes(),l=t.types,u=null,c=0,s=oL.length;c<s;c++){var d=oL[c],f=t.getData(d);if(f&&-1!==l.indexOf(d)&&-1!==a.indexOf(d)){u=i.readData(d,f,{from:MT,clipboardPayload:t,self:n,forceText:r});break}}return!!u&&(o.setSelection(wi.insertINode(o,o.getSelection(),u)),e.commitJob(o),!0)}}])}(gt);function aL(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,lL()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function lL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(lL=function(){return!!e})()}Object.defineProperty(iL,"ID",{enumerable:!0,configurable:!0,writable:!0,value:GF.command.paste});var uL=function(e){function t(){return(0,Ke.A)(this,t),aL(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){}}])}(ct);Object.defineProperty(uL,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:GF.pluginName}),Object.defineProperty(uL,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[QF,tL,iL]});var cL="code",sL="code",dL={contentFontsize:{targets:[sL],values:function(e){return"number"==typeof e&&(!!Number.isFinite(e)&&e>=0)}}};const fL={code:{parents:[qe.Block],category:[qe.Inline,qe.InlineBox,qe.TextContainer],children:[qe.Text,qe.Inline]}};var hL=HR({pluginName:"code",cardName:"code",cardSelect:"code",command:{code:"code"}});function pL(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,vL()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function vL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vL=function(){return!!e})()}var mL=function(e){function t(){var e;return(0,Ke.A)(this,t),e=pL(this,t,arguments),Object.defineProperty(e,"_nodeName",{enumerable:!0,configurable:!0,writable:!0,value:cL}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){var n=e.getSelection();if(wi.isUnbreakable(n))return st;var r=n.firstRange.commonAncestorContainer;if(Ut.closest(r,"code"))return ft;if(!n.isCollapsed){var o=n.firstRange,i=Go.shrinkRange(e,o,!0);return Ut.closest(i.commonAncestorContainer,"code")?ft:Tr((0,Je.A)(t.prototype),"getState",this).call(this,e)}var a=n.firstRange;if(!a.collapsed)return st;var l=a.start.node,u=l.isTextNode()?l.parentNode:l;return(null==u?void 0:u.hasCategory([qe.Root,qe.LikeRoot]))?e.acceptNode(e.defaultElementName,"code")?dt:st:u&&e.acceptNode(u.nodeName,"code")?dt:st}},{key:"execute",value:function(e,t){var n=e.newJob();if(this.getState(n)===st)return e.cancelJob(n),!1;var r,o=n.getSelection();r=o.collapsed?o.firstRange:Go.shrinkRange(n,o.firstRange,!0);var i=Ut.closest(r.commonAncestorContainer,"code");if(i){var a=Go.unwrapInlineNode(n,r,i);return n.setSelection([a]),e.commitJob(n),!0}var l=n.createElement("code");if(o.collapsed){var u=o.firstRange;if(u.start.node.hasCategory([qe.Root,qe.LikeRoot])){var c=n.createElement(n.defaultElementName);n.insertNodeByPosition(u.start,c),u=n.newRange(n.newPosition(c,0))}var s=n.createInheritTextNode(t||"",u.start);n.appendChild(l,s),wr.insertInlineNode(n,u.start,l),n.setSelection(o.cloneByRange(n.newRange(n.newPosition(s,s.dataLength))))}else Go.wrapInlineNode(n,o.firstRange,l),bt.fatal(l.isConnected,"plugins/code/src/kernel/commands/code-command.ts:166"),n.setSelection(o.cloneByRange(Vt.selectNodeContents(l)));return e.commitJob(n),!0}}])}(Ul);Object.defineProperty(mL,"ID",{enumerable:!0,configurable:!0,writable:!0,value:hL.command.code});var gL=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"read",value:function(e){return e.setNode(ar.createElement("code")),!1}}])}();function bL(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,yL()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function yL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(yL=function(){return!!e})()}Object.defineProperty(gL,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[cL]});var wL=function(e){function t(){return(0,Ke.A)(this,t),bL(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e){var t;e.isInlineMode()&&(t={fontFamily:"SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace",backgroundColor:"rgba(0, 0, 0, 0.06)",border:"1px solid rgba(0, 0, 0, 0.08)",borderRadius:"2px",padding:"0px 2px"}),e.setNode(e.createElement(cL,{className:"ne-code",style:t}))}}])}(lT);function AL(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,kL()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function kL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(kL=function(){return!!e})()}Object.defineProperty(wL,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[cL]});var _L=function(e){function t(){return(0,Ke.A)(this,t),AL(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e){e.setNode(e.createElement(sL))}}])}(vT);Object.defineProperty(_L,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[sL]});var CL=HR({pluginName:"markdownDataSource"});function NL(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,OL()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function OL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(OL=function(){return!!e})()}var xL=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=NL(this,t),Object.defineProperty(n,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n._kernel=e,n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t){return this._kernel.readData("text/markdown",e,t)}},{key:"write",value:function(e,t){var n=e.document.getINode(t);return this._kernel.writeData("text/markdown",n,t)}}])}(Ht);function EL(e){return(e.match(/(<\w+(\s|>)|<\/[^\/>]+>|<\w+\/>)/g)||[]).map((function(e){return e.replace(/\s$/g,">")}))}var DL=["br","img","input","hr","meta","link","base","area","col","command","embed","keygen","param","source","track","wbr"],PL=["address","article","aside","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hr","li","main","nav","noscript","ol","p","pre","section","table","tfoot","ul","video"];function RL(e){return e.trim().replace(/<\/?|\/?>/g,"")}function SL(e){for(var t=e.length-1;t>=0;t--){var n=RL(e[t]);if(PL.includes(n))return!0;if(!DL.includes(n))return!1}return!1}function TL(e){for(var t=[],n=null,r=0;r<e.length;r++){var o=e[r];DL.includes(RL(o))||o.endsWith("/>")||("/"===o[1]&&(null==n?void 0:n.slice(1))===o.slice(2)?(t.pop(),n=t[t.length-1]||null):(t.push(o),n=o))}return t}var jL=/[&<>"']/,IL=new RegExp(jL.source,"g"),BL=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,ML=new RegExp(BL.source,"g"),FL={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},LL=function(e){return FL[e]};function UL(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){if(jL.test(e))return e.replace(IL,LL)}else if(BL.test(e))return e.replace(ML,LL);return e}var VL=/(^|[^\[])\^/g;function HL(e,t){var n="string"==typeof e?e:e.source;t=t||"";var r={replace:function(e,t){var o="string"==typeof t?t:t.source;return o=o.replace(VL,"$1"),n=n.replace(e,o),r},getRegex:function(){return new RegExp(n,t)}};return r}var zL={exec:function(){}};function WL(e,t){var n=e.replace(/\|/g,(function(e,t,n){for(var r=!1,o=t;--o>=0&&"\\"===n[o];)r=!r;return r?"|":" |"})).split(/ \|/),r=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),"number"==typeof t)if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n}function qL(e){return e?e.trimEnd?e.trimEnd():e.replace(/\s*$/,""):""}function $L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.length;if(0===r)return"";for(var o=0;o<r;){var i=e.charAt(r-o-1);if(i!==t||n){if(i===t||!n)break;o++}else o++}return e.slice(0,r-o)}var KL=new RegExp(""),YL={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,alertFlag:/^ {0,3}(\:{3}([^:\n]*)(?:\n|$))/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:zL,lheading:/^((?:(?!^bull ).|\n(?!\n|bull ))+?)\n {0,3}(={2,}|-{2,}) *(?:\n+|$)/,math:/^ *(\$\$)(?!\$)([\s\S]*?[^\\](\\\\)*)\1 *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|alertFlag|math|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,bullet:KL,listItemStart:KL,_tag:"",_comment:KL,paragraph:KL};YL.def=HL(YL.def).replace("label",YL._label).replace("title",YL._title).getRegex(),YL.bullet=/(?:[*+-]|\d{1,9}[.)])/,YL.listItemStart=HL(/^( *)(bull) */).replace("bull",YL.bullet).getRegex(),YL.list=HL(YL.list).replace(/bull/g,YL.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+YL.def.source+")").getRegex(),YL._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul|sub|sup|a",YL._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,YL.html=HL(YL.html,"i").replace("comment",YL._comment).replace("tag",YL._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),YL.lheading=HL(YL.lheading).replace(/bull/g,YL.bullet).getRegex(),YL.paragraph=HL(YL._paragraph).replace("hr",YL.hr).replace("alertFlag",/ {0,3}\:{3}/).replace("math",/ *(\$\$)(?!\$)/).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",YL._tag).getRegex(),YL.blockquote=HL(YL.blockquote).replace("paragraph",YL.paragraph).getRegex(),YL.normal=Object.assign({},YL),YL.gfm=Object.assign(Object.assign({},YL.normal),{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),YL.gfm.table=HL(YL.gfm.table).replace("hr",YL.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",YL._tag).getRegex(),YL.gfm.paragraph=HL(YL._paragraph).replace("hr",YL.hr).replace("alertFlag",/ {0,3}\:{3}(?:\w*\s*\n|\s*$)/).replace("math",/ *(\$\$)(?!\$)/).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",YL.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",YL._tag).getRegex(),YL.pedantic=Object.assign(Object.assign({},YL.normal),{html:HL("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",YL._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:zL,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:HL(YL.normal._paragraph).replace("hr",YL.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",YL.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var GL={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:zL,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,emoji:/^\:([\w_]+?)\:/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,rDelimAst:/^[^_*]*?__[^_*]*?\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\*)[punct](\*+)(?=[\s]|$)|[^punct\s](\*+)(?!\*)(?=[punct\s]|$)|(?!\*)[punct\s](\*+)(?=[^punct\s])|[\s](\*+)(?!\*)(?=[punct])|(?!\*)[punct](\*+)(?!\*)(?=[punct])|[^punct\s](\*+)(?=[^punct\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\s]|$)|[^punct\s](_+)(?!_)(?=[punct\s]|$)|(?!_)[punct\s](_+)(?=[^punct\s])|[\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])/},math:/^(\$)(?!\$)([\s\S]*?[^\\](\\\\)*)\1/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:zL,text:/^(`+|[^`]|\$+)(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_\$]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^((?![*_])[\spunctuation])/,_punctuation:"",blockSkip:KL,anyPunctuation:KL,_escapes:KL,_comment:KL,_scheme:KL,_email:KL,_attribute:KL,_label:KL,_href:KL,_title:KL},JL=function(){try{return new RegExp("\\p{P}","u"),!0}catch(e){return!1}}();function XL(e,t,n,r){var o=t.href,i=t.title?UL(t.title):null,a=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){r.state.inLink=!0;var l={type:"link",raw:n,href:o,title:i,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,l}return{type:"image",raw:n,href:o,title:i,text:UL(a)}}GL._punctuation=JL?"\\p{P}$+<=>`^|~":"$+<=>`^|~",GL.punctuation=HL(GL.punctuation,JL?"u":"").replace(/punctuation/g,GL._punctuation).getRegex(),GL.blockSkip=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,GL.anyPunctuation=/\\[punct]/g,GL._escapes=/\\([punct])/g,GL._comment=HL(YL._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),GL.emStrong.lDelim=HL(GL.emStrong.lDelim,"u").replace(/punct/g,GL._punctuation).getRegex(),GL.emStrong.rDelimAst=HL(GL.emStrong.rDelimAst,"gu").replace(/punct/g,GL._punctuation).getRegex(),GL.emStrong.rDelimUnd=HL(GL.emStrong.rDelimUnd,"gu").replace(/punct/g,GL._punctuation).getRegex(),GL.anyPunctuation=HL(GL.anyPunctuation,"gu").replace(/punct/g,GL._punctuation).getRegex(),GL._escapes=HL(GL._escapes,"gu").replace(/punct/g,GL._punctuation).getRegex(),GL._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,GL._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,GL.autolink=HL(GL.autolink).replace("scheme",GL._scheme).replace("email",GL._email).getRegex(),GL._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,GL.tag=HL(GL.tag).replace("comment",GL._comment).replace("attribute",GL._attribute).getRegex(),GL._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,GL._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,GL._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,GL.link=HL(GL.link).replace("label",GL._label).replace("href",GL._href).replace("title",GL._title).getRegex(),GL.reflink=HL(GL.reflink).replace("label",GL._label).replace("ref",YL._label).getRegex(),GL.nolink=HL(GL.nolink).replace("ref",YL._label).getRegex(),GL.reflinkSearch=HL(GL.reflinkSearch,"g").replace("reflink",GL.reflink).replace("nolink",GL.nolink).getRegex(),GL.normal=Object.assign({},GL),GL.pedantic=Object.assign(Object.assign({},GL.normal),{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:HL(/^!?\[(label)\]\((.*?)\)/).replace("label",GL._label).getRegex(),reflink:HL(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",GL._label).getRegex()}),GL.gfm=Object.assign(Object.assign({},GL.normal),{escape:HL(GL.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,sub:/^(~)(?=[^\s~])([^\n]*?[^\s~])\1(?=[^~]|$)/,sup:/^(\^)(?=[^\s^])([^\n]*?[^\s^])\1(?=[^^]|$)/,mark:/^(\==)(?=[^\s=])([^\n]*?[^\s=])\1(?=[^=]|$)/,text:/^([`~^=]+|[^`~^=])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~^=-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~^=_\$]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~^=-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~^=-]+@)))/}),GL.gfm.url=HL(GL.gfm.url,"i").replace("email",GL.gfm._extended_email).getRegex(),GL.breaks=Object.assign(Object.assign({},GL.gfm),{br:HL(GL.br).replace("{2,}","*").getRegex(),text:HL(GL.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var QL=function(){return(0,$e.A)((function e(t,n){(0,Ke.A)(this,e),Object.defineProperty(this,"lexer",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"rules",{enumerable:!0,configurable:!0,writable:!0,value:{block:YL.gfm,inline:GL.gfm}})}),[{key:"space",value:function(e){var t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}},{key:"code",value:function(e){var t=this.rules.block.code.exec(e);if(t){var n=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:$L(n,"\n")}}}},{key:"fences",value:function(e){var t=this.rules.block.fences.exec(e);if(t){var n=t[0],r=function(e,t){var n=e.match(/^(\s+)(?:```)/);if(null===n)return t;var r=n[1];return t.split("\n").map((function(e){var t=e.match(/^\s+/);return null===t?e:(0,tn.A)(t,1)[0].length>=r.length?e.slice(r.length):e})).join("\n")}(n,t[3]||"");return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline._escapes,"$1"):t[2],text:r}}}},{key:"alertFlag",value:function(e){var t=this.rules.block.alertFlag.exec(e);if(t){var n=t[0];return{type:"alert",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline._escapes,"$1"):t[2],text:n}}}},{key:"heading",value:function(e){var t=this.rules.block.heading.exec(e);if(t){var n=t[2].trim();if(/#$/.test(n)){var r=$L(n,"#");this.options.pedantic?n=r.trim():r&&!/ $/.test(r)||(n=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}},{key:"hr",value:function(e){var t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}},{key:"blockquote",value:function(e){var t=this.rules.block.blockquote.exec(e);if(t){var n=t[0].replace(/^ *>[ \t]?/gm,""),r=this.lexer.state.top;this.lexer.state.top=!0;var o=this.lexer.blockTokens(n);return this.lexer.state.top=r,{type:"blockquote",raw:t[0],tokens:o,text:n}}}},{key:"list",value:function(e){var t=this.rules.block.list.exec(e);if(t){var n,r,o,i,a,l,u,c,s,d,f,h,p=t[1].trim(),v=p.length>1,m={type:"list",raw:"",ordered:v,start:v?+p.slice(0,-1):"",loose:!1,items:[]};p=v?"\\d{1,9}\\".concat(p.slice(-1)):"\\".concat(p),this.options.pedantic&&(p=v?p:"[*+-]");for(var g=new RegExp("^( {0,3}".concat(p,")((?:[\t ][^\\n]*)?(?:\\n|$))"));e&&(h=!1,t=g.exec(e))&&!this.rules.block.hr.test(e);){if(n=t[0],e=e.substring(n.length),c=t[2].split("\n",1)[0].replace(/^\t+/,(function(e){return" ".repeat(3*e.length)})),s=e.split("\n",1)[0],this.options.pedantic?(i=2,f=c.trimLeft()):(i=(i=t[2].search(/[^ ]/))>4?1:i,f=c.slice(i),i+=t[1].length),l=!1,!c&&/^ *$/.test(s)&&(n+=s+"\n",e=e.substring(s.length+1),h=!0),!h)for(var b=new RegExp("^ {0,".concat(Math.min(3,i-1),"}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))")),y=new RegExp("^ {0,".concat(Math.min(3,i-1),"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)")),w=new RegExp("^ {0,".concat(Math.min(3,i-1),"}(?:```|~~~)")),A=new RegExp("^ {0,".concat(Math.min(3,i-1),"}#")),k=new RegExp("^ {0,".concat(Math.min(3,i-1),"}(\\:{3}([^:\\n]*)(?:\\n|$))")),_=new RegExp("^ *(\\$\\$)(?!\\$)");e&&(s=d=e.split("\n",1)[0],this.options.pedantic&&(s=s.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!w.test(s))&&!A.test(s)&&!b.test(s)&&!y.test(e)&&!k.test(e)&&!_.test(e);){if(s.search(/[^ ]/)>=i||!s.trim())f+="\n"+s.slice(i);else{if(l)break;if(c.search(/[^ ]/)>=4)break;if(w.test(c))break;if(A.test(c))break;if(y.test(c))break;f+="\n"+s}l||s.trim()||(l=!0),n+=d+"\n",e=e.substring(d.length+1),c=s.slice(i)}m.loose||(u?m.loose=!0:/\n *\n *$/.test(n)&&(u=!0)),this.options.gfm&&(r=/^\[[ xX]\] /.exec(f))&&(o="[ ] "!==r[0],f=f.replace(/^\[[ xX]\] +/,"")),m.items.push({type:"list_item",raw:n,task:!!r,checked:o,loose:!1,text:f,tokens:[]}),m.raw+=n}m.items[m.items.length-1].raw=qL(n),m.items[m.items.length-1].text=qL(f),m.raw=qL(m.raw);var C=m.items.length;for(a=0;a<C;a++)if(this.lexer.state.top=!1,m.items[a].tokens=this.lexer.blockTokens(m.items[a].text,[]),!m.loose){var N=m.items[a].tokens.filter((function(e){return"space"===e.type})),O=N.length>0&&N.some((function(e){return/\n.*\n/.test(e.raw)}));m.loose=O}if(m.loose)for(a=0;a<C;a++)m.items[a].loose=!0;return m}}},{key:"html",value:function(e){var t=this.rules.block.html.exec(e);if(t){var n={type:"html",block:!0,raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:t[0]};if(this.options.sanitize){var r=this.options.sanitizer?this.options.sanitizer(t[0]):UL(t[0]),o=n;o.type="paragraph",o.text=r,o.tokens=this.lexer.inline(r)}return n}}},{key:"def",value:function(e){var t=this.rules.block.def.exec(e);if(t){var n=t[1].toLowerCase().replace(/\s+/g," "),r=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",o=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline._escapes,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:r,title:o}}}},{key:"table",value:function(e){var t=this.rules.block.table.exec(e);if(t){var n={type:"table",header:WL(t[1]).map((function(e){return{text:e}})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[]},r={type:"table",header:n.header,align:[],rows:[],raw:""};if(n.header.length===n.align.length){r.raw=t[0];var o,i,a,l,u=n.align.length;for(o=0;o<u;o++)/^ *-+: *$/.test(n.align[o])?r.align[o]="right":/^ *:-+: *$/.test(n.align[o])?r.align[o]="center":/^ *:-+ *$/.test(n.align[o])?r.align[o]="left":r.align[o]=null;for(u=n.rows.length,o=0;o<u;o++)r.rows[o]=WL(n.rows[o],n.header.length).map((function(e){return{text:e}}));for(u=r.header.length,i=0;i<u;i++)r.header[i].tokens=this.lexer.inline(n.header[i].text);for(u=n.rows.length,i=0;i<u;i++)for(l=r.rows[i],a=0;a<l.length;a++)l[a].tokens=this.lexer.inline(l[a].text);return r}}}},{key:"lheading",value:function(e){var t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}},{key:"paragraph",value:function(e){var t=this.rules.block.paragraph.exec(e);if(t){var n="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}},{key:"text",value:function(e){var t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}},{key:"escape",value:function(e){var t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:UL(t[1])}}},{key:"tag",value:function(e){var t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):UL(t[0]):t[0]}}},{key:"link",value:function(e){var t=this.rules.inline.link.exec(e);if(t){var n=t[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;var r=$L(n.slice(0,-1),"\\");if((n.length-r.length)%2==0)return}else{var o=function(e,t){if(-1===e.indexOf(t[1]))return-1;for(var n=e.length,r=0,o=0;o<n;o++)if("\\"===e[o])o++;else if(e[o]===t[0])r++;else if(e[o]===t[1]&&--r<0)return o;return-1}(t[2],"()");if(o>-1){var i=(0===t[0].indexOf("!")?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,i).trim(),t[3]=""}}var a=t[2],l="";if(this.options.pedantic){var u=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(a);u&&(a=u[1],l=u[3])}else l=t[3]?t[3].slice(1,-1):"";return a=a.trim(),/^</.test(a)&&(a=this.options.pedantic&&!/>$/.test(n)?a.slice(1):a.slice(1,-1)),XL(t,{href:a?a.replace(this.rules.inline._escapes,"$1"):a,title:l?l.replace(this.rules.inline._escapes,"$1"):l},t[0],this.lexer)}}},{key:"reflink",value:function(e,t){var n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){var r=t[(n[2]||n[1]).replace(/\s+/g," ").toLowerCase()];if(!r){var o=n[0].charAt(0);return{type:"text",raw:o,text:o}}return XL(n,r,n[0],this.lexer)}}},{key:"emoji",value:function(e){var t=this.rules.inline.emoji.exec(e);if(t)return{type:"emoji",raw:t[0],text:t[1]}}},{key:"emStrong",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=this.rules.inline.emStrong.lDelim.exec(e);if(r&&(!r[3]||!n.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDF50-\uDF59\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEC0-\uDED3\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDCD0-\uDCEB\uDCF0-\uDCF9\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])/))&&(!r[1]&&!r[2]||!n||this.rules.inline.punctuation.exec(n))){var o,i,a=r[0].length-1,l=a,u=0,c="*"===r[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(c.lastIndex=0,t=t.slice(-1*e.length+a);null!=(r=c.exec(t));)if(o=r[1]||r[2]||r[3]||r[4]||r[5]||r[6])if(i=o.length,r[3]||r[4])l+=i;else if(!((r[5]||r[6])&&a%3)||(a+i)%3){if(!((l-=i)>0)){i=Math.min(i,i+l+u);var s=e.slice(0,a+r.index+i+1);if(Math.min(a,i)%2){var d=s.slice(1,-1);return{type:"em",raw:s,text:d,tokens:this.lexer.inlineTokens(d)}}var f=s.slice(2,-2);return{type:"strong",raw:s,text:f,tokens:this.lexer.inlineTokens(f)}}}else u+=i}}},{key:"math",value:function(e){var t=this.rules.block.math.exec(e);if(t)return{type:"math",raw:t[0],block:!0,text:t[2].trim()}}},{key:"inlineMath",value:function(e){var t=this.rules.inline.math.exec(e);if(t){var n=t[2],r=/[^ ]/.test(n),o=/^ /.test(n)&&/ $/.test(n);return r&&o&&(n=n.substring(1,n.length-1)),n=UL(n,!0),{type:"math",raw:t[0],block:!1,text:n}}}},{key:"codespan",value:function(e){var t=this.rules.inline.code.exec(e);if(t){var n=t[2].replace(/\n/g," "),r=/[^ ]/.test(n),o=/^ /.test(n)&&/ $/.test(n);return r&&o&&(n=n.substring(1,n.length-1)),n=UL(n,!0),{type:"codespan",raw:t[0],text:n}}}},{key:"br",value:function(e){var t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}},{key:"del",value:function(e){var t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}},{key:"sub",value:function(e){var t=this.rules.inline.sub.exec(e);if(t)return{type:"sub",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}},{key:"sup",value:function(e){var t=this.rules.inline.sup.exec(e);if(t)return{type:"sup",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}},{key:"mark",value:function(e){var t=this.rules.inline.mark.exec(e);if(t)return{type:"mark",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}},{key:"autolink",value:function(e,t){var n,r,o=this.rules.inline.autolink.exec(e);if(o)return r="@"===o[2]?"mailto:"+(n=UL(this.options.mangle?t(o[1]):o[1])):n=UL(o[1]),{type:"link",raw:o[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}},{key:"url",value:function(e,t){var n,r;if(r=this.rules.inline.url.exec(e)){var o,i;if("@"===r[2])i="mailto:"+(o=UL(this.options.mangle?t(r[0]):r[0]));else{var a;do{a=r[0],r[0]=(null===(n=this.rules.inline._backpedal.exec(r[0]))||void 0===n?void 0:n[0])||""}while(a!==r[0]);o=UL(r[0]),i="www."===r[1]?"http://"+r[0]:r[0]}return{type:"link",raw:r[0],text:o,href:i,tokens:[{type:"text",raw:o,text:o}]}}}},{key:"inlineText",value:function(e,t){var n,r=this.rules.inline.text.exec(e);if(r)return n=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):UL(r[0]):r[0]:UL(this.options.smartypants?t(r[0]):r[0]),{type:"text",raw:r[0],text:n}}}])}(),ZL={async:!1,baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!0,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};function eU(e){return e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function tU(e){var t,n,r="",o=e.length;for(t=0;t<o;t++)n=e.charCodeAt(t),Math.random()>.5&&(n="x"+n.toString(16)),r+="&#"+n+";";return r}var nU=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ZL;(0,Ke.A)(this,e),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:{inLink:!1,inRawBlock:!1,top:!0}}),Object.defineProperty(this,"tokens",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inlineQueue",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tokenizer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tokens.links=Object.create(null),this.tokenizer=new QL(this,t)}return(0,$e.A)(e,[{key:"lex",value:function(e){var t;for(e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}},{key:"blockTokens",value:function(e){var t,n,r,o,i=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,(function(e,t,n){return t+"    ".repeat(n.length)}));for(var l,u=function(){if(i.options.extensions&&i.options.extensions.block&&i.options.extensions.block.some((function(n){return!!(t=n(i,e,a))&&(e=e.substring(t.raw.length),a.push(t),!0)})))return 0;if(t=i.tokenizer.space(e))return e=e.substring(t.raw.length),1===t.raw.length&&a.length>0?a[a.length-1].raw+="\n":a.push(t),0;if(t=i.tokenizer.code(e))return e=e.substring(t.raw.length),!(n=a[a.length-1])||"paragraph"!==n.type&&"text"!==n.type?a.push(t):(n.raw+="\n"+t.raw,n.text+="\n"+t.text,i.inlineQueue[i.inlineQueue.length-1].src=n.text),0;if(t=i.tokenizer.alertFlag(e))return e=e.substring(t.raw.length),a.push(t),0;if(t=i.tokenizer.fences(e))return e=e.substring(t.raw.length),a.push(t),0;if(t=i.tokenizer.heading(e))return e=e.substring(t.raw.length),a.push(t),0;if(t=i.tokenizer.hr(e))return e=e.substring(t.raw.length),a.push(t),0;if(t=i.tokenizer.blockquote(e))return e=e.substring(t.raw.length),a.push(t),0;if(t=i.tokenizer.list(e))return e=e.substring(t.raw.length),a.push(t),0;if(t=i.tokenizer.math(e))return e=e.substring(t.raw.length),a.push(t),0;if(t=i.tokenizer.html(e))return e=e.substring(t.raw.length),a.push(t),0;if(t=i.tokenizer.def(e))return e=e.substring(t.raw.length),!(n=a[a.length-1])||"paragraph"!==n.type&&"text"!==n.type?i.tokens.links[t.tag]||(i.tokens.links[t.tag]={href:t.href,title:t.title}):(n.raw+="\n"+t.raw,n.text+="\n"+t.raw,i.inlineQueue[i.inlineQueue.length-1].src=n.text),0;if(t=i.tokenizer.table(e))return e=e.substring(t.raw.length),a.push(t),0;if(t=i.tokenizer.lheading(e))return e=e.substring(t.raw.length),a.push(t),0;if(r=e,i.options.extensions&&i.options.extensions.startBlock){var l,u=1/0,c=e.slice(1);i.options.extensions.startBlock.forEach((function(e){"number"==typeof(l=e(i,c))&&l>=0&&(u=Math.min(u,l))})),u<1/0&&u>=0&&(r=e.substring(0,u+1))}if(i.state.top&&(t=i.tokenizer.paragraph(r)))return n=a[a.length-1],o&&"paragraph"===n.type?(n.raw+="\n"+t.raw,n.text+="\n"+t.text,i.inlineQueue.pop(),i.inlineQueue[i.inlineQueue.length-1].src=n.text):a.push(t),o=r.length!==e.length,e=e.substring(t.raw.length),0;if(t=i.tokenizer.text(e))return e=e.substring(t.raw.length),(n=a[a.length-1])&&"text"===n.type?(n.raw+="\n"+t.raw,n.text+="\n"+t.text,i.inlineQueue.pop(),i.inlineQueue[i.inlineQueue.length-1].src=n.text):a.push(t),0;if(e){var s="Infinite loop on byte: "+e.charCodeAt(0);if(i.options.silent)return console.error(s),1;throw new Error(s)}};e&&(0===(l=u())||1!==l););return this.state.top=!0,a}},{key:"inline",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.inlineQueue.push({src:e,tokens:t}),t}},{key:"inlineTokens",value:function(e){var t,n,r,o,i,a,l=this,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],c=e;if(this.tokens.links){var s=Object.keys(this.tokens.links);if(s.length>0)for(;null!=(o=this.tokenizer.rules.inline.reflinkSearch.exec(c));)s.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(c=c.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(o=this.tokenizer.rules.inline.blockSkip.exec(c));)c=c.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(o=this.tokenizer.rules.inline.anyPunctuation.exec(c));)c=c.slice(0,o.index)+"++"+c.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(var d,f=function(){if(i||(a=""),i=!1,l.options.extensions&&l.options.extensions.inline&&l.options.extensions.inline.some((function(n){return!!(t=n(l,e,u))&&(e=e.substring(t.raw.length),u.push(t),!0)})))return 0;if(t=l.tokenizer.escape(e))return e=e.substring(t.raw.length),u.push(t),0;if(t=l.tokenizer.tag(e))return e=e.substring(t.raw.length),(n=u[u.length-1])&&"text"===t.type&&"text"===n.type?(n.raw+=t.raw,n.text+=t.text):u.push(t),0;if(t=l.tokenizer.link(e))return e=e.substring(t.raw.length),u.push(t),0;if(t=l.tokenizer.reflink(e,l.tokens.links))return e=e.substring(t.raw.length),(n=u[u.length-1])&&"text"===t.type&&"text"===n.type?(n.raw+=t.raw,n.text+=t.text):u.push(t),0;if(t=l.tokenizer.emStrong(e,c,a))return e=e.substring(t.raw.length),u.push(t),0;if(t=l.tokenizer.emoji(e))return e=e.substring(t.raw.length),u.push(t),0;if(t=l.tokenizer.codespan(e))return e=e.substring(t.raw.length),u.push(t),0;if(t=l.tokenizer.inlineMath(e))return e=e.substring(t.raw.length),u.push(t),0;if(t=l.tokenizer.br(e))return e=e.substring(t.raw.length),u.push(t),0;if(t=l.tokenizer.del(e))return e=e.substring(t.raw.length),u.push(t),0;if(t=l.tokenizer.sub(e))return e=e.substring(t.raw.length),u.push(t),0;if(t=l.tokenizer.sup(e))return e=e.substring(t.raw.length),u.push(t),0;if(t=l.tokenizer.mark(e))return e=e.substring(t.raw.length),u.push(t),0;if(t=l.tokenizer.autolink(e,tU))return e=e.substring(t.raw.length),u.push(t),0;if(!l.state.inLink&&(t=l.tokenizer.url(e,tU)))return e=e.substring(t.raw.length),u.push(t),0;if(r=e,l.options.extensions&&l.options.extensions.startInline){var o,s=1/0,d=e.slice(1);l.options.extensions.startInline.forEach((function(e){"number"==typeof(o=e(l,d))&&o>=0&&(s=Math.min(s,o))})),s<1/0&&s>=0&&(r=e.substring(0,s+1))}if(t=l.tokenizer.inlineText(r,eU))return e=e.substring(t.raw.length),"_"!==t.raw.slice(-1)&&(a=t.raw.slice(-1)),i=!0,(n=u[u.length-1])&&"text"===n.type?(n.raw+=t.raw,n.text+=t.text):u.push(t),0;if(e){var f="Infinite loop on byte: "+e.charCodeAt(0);if(l.options.silent)return console.error(f),1;throw new Error(f)}};e&&(0===(d=f())||1!==d););return u}}],[{key:"lex",value:function(t,n){return new e(n).lex(t)}},{key:"lexInline",value:function(t,n){return new e(n).inlineTokens(t)}}])}();function rU(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function oU(e){return"em"===e.type?"<i>".concat(e.tokens.map((function(e){return oU(e)})).join(""),"</i>"):"strong"===e.type?"<b>".concat(e.tokens.map((function(e){return oU(e)})).join(""),"</b>"):"del"===e.type?"<del>".concat(e.tokens.map((function(e){return oU(e)})).join(""),"</del>"):"sub"===e.type?"<sub>".concat(e.tokens.map((function(e){return oU(e)})).join(""),"</sub>"):"sup"===e.type?"<sup>".concat(e.tokens.map((function(e){return oU(e)})).join(""),"</sup>"):"mark"===e.type?'<span style="background-color: #f3bb2f">'.concat(e.tokens.map((function(e){return oU(e)})).join(""),"</span>"):"codespan"===e.type?"<code>".concat(e.text,"</code>"):"image"===e.type?'<img src="'.concat(e.href,'" alt="').concat(e.text,'"/>'):"link"===e.type?'<a href="'.concat(e.href,'">').concat(e.tokens.map((function(e){return oU(e)})).join(""),"</a>"):"math"===e.type?'<div data-type="math" data-text="'.concat(e.text.replace(/\"/g,'\\"'),'"></div>'):"tokens"in e&&e.tokens?e.tokens.map((function(e){return oU(e)})).join(""):"text"===e.type?e.text.replace(/ /g,"&nbsp;"):"text"in e?e.text:e.raw}function iU(e){var t,n,r,o=[],i=null,a=null;e=function(e){for(var t,n=[],r=0;r<e.length;r++){var o=e[r];if("paragraph"===o.type)if(null===(t=o.tokens)||void 0===t?void 0:t.find((function(e){return"html"===e.type&&SL(TL(EL(e.raw)))}))){if(o.tokens.every((function(e){return"html"===e.type}))){n.push.apply(n,(0,ln.A)(o.tokens));continue}var i=o.tokens.map((function(e){return"html"===e.type?"\n"+e.raw:e.raw})).join(""),a=lU(i);n.push.apply(n,(0,ln.A)(a))}else n.push(o);else n.push(o)}return n}(e);var l,u=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return rU(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rU(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(e);try{var c=function(){var e=l.value;if(i&&a)return i.raw+=e.raw,i.text+=oU(e),0===(a=TL(a.concat(EL(e.raw)))).length&&(a=null,i=null),0;if("heading"===e.type&&"html"===(null===(t=o[o.length-1])||void 0===t?void 0:t.type)){var u=o[o.length-1].raw.match(/^[\s\n]*<a name=['"](\w+)['"]>[\s\n]*<\/a>[\s\n]*$/);u&&u[1]&&(o.pop(),e.id=u[1])}if(o.push(e),"html"===e.type&&(i=e,0===(a=TL(EL(e.raw))).length))return a=null,i=null,0;if("text"===e.type&&"html"===(null===(n=o[o.length-2])||void 0===n?void 0:n.type)&&!o[o.length-2].raw.includes("\n")&&"text"===(null===(r=o[o.length-3])||void 0===r?void 0:r.type)&&/^(\*|\_)/.test(e.text))try{var c=o[o.length-2],s=lU(o[o.length-3].text+""+e.text);o.pop(),o.pop(),o.pop(),s[0].tokens.forEach((function(e){var t;"text"===e.type&&""===e.text?o.push(c):("tokens"in e&&(e.tokens=null===(t=e.tokens)||void 0===t?void 0:t.map((function(e){return"text"===e.type&&""===e.text?c:e}))),o.push(e))}))}catch(e){}};for(u.s();!(l=u.n()).done;)c()}catch(e){u.e(e)}finally{u.f()}return o}function aU(e){for(var t=iU(e),n=0;n<t.length;n++){var r=t[n];"tokens"in r&&r.tokens&&(r.tokens=aU(r.tokens)),"rows"in r&&r.rows&&(r.rows=r.rows.map((function(e){return e.map((function(e){return"tokens"in e&&e.tokens&&(e.tokens=aU(e.tokens)),e}))}))),"items"in r&&r.items&&(r.items=r.items.map((function(e){return Object.assign(Object.assign({},e),{tokens:aU(e.tokens)})})))}return t}function lU(e){return aU((new nU).lex(e.replace(/(<\/[^>]+>)\n(?!\n)/g,"$1\n\n")))}function uU(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return cU(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cU(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function cU(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function sU(e){return e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&emsp;/g,String.fromCharCode(8195)).replace(/&ensp;/g,String.fromCharCode(8194))}var dU=function(){function e(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,Ke.A)(this,e),Object.defineProperty(this,"markdownReader",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"option",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"node",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"attrs",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"afterParentReaders",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.kernel=t,this.parent=r}return(0,$e.A)(e,[{key:"appendAfterParentReaders",value:function(e){this.afterParentReaders.includes(e)||this.afterParentReaders.push(e)}},{key:"getOption",value:function(){return this.option}},{key:"makeChildContext",value:function(){return new e(this.kernel,this.markdownReader,this,this.option)}},{key:"addAttr",value:function(e,t){null===this.attrs&&(this.attrs={}),this.attrs[e]=t}},{key:"getAttrs",value:function(){for(var e=this,t={};e&&!e.node;)t=Object.assign(Object.assign({},e.attrs),t),e=e.parent;return t}},{key:"getNode",value:function(){var e;return this.node?this.node:(null===(e=this.parent)||void 0===e?void 0:e.getNode())||null}},{key:"setNode",value:function(e){var t,n=null===(t=this.parent)||void 0===t?void 0:t.getNode();n&&ar.appendChild(n,e),this.node=e}},{key:"createElement",value:function(e,t){return ar.createElement(e,t)}},{key:"createText",value:function(e,t){return ar.createTextNode(e,t)}},{key:"appendChild",value:function(e,t){return ar.appendChild(e,t)}},{key:"appendChildren",value:function(e,t){var n,r=uU(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;ar.appendChild(e,o)}}catch(e){r.e(e)}finally{r.f()}}},{key:"removeChildren",value:function(e){var t;if(null===(t=this.node)||void 0===t?void 0:t.children){var n,r=uU(e);try{for(r.s();!(n=r.n()).done;){var o=n.value,i=this.node.children.indexOf(o);-1!==i&&this.node.children.splice(i,1)}}catch(e){r.e(e)}finally{r.f()}}}},{key:"transform",value:function(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ar.createFragment(),o=new e(this.kernel,this.markdownReader,null,this.option);o.setNode(r);var i=[o];return fU(t,(function(e,t){var r=i[i.length-1];if("br"===e.type)ar.appendChild(r.getNode(),ar.createTextNode("\n",r.getAttrs()));else{if("escape"===e.type)return ar.appendChild(r.getNode(),ar.createTextNode(sU(e.text),r.getAttrs())),!1;if("text"===e.type){if(e.tokens)n.transform(e.tokens,r.getNode());else{var o="br"===(null==t?void 0:t.type)||"html"===(null==t?void 0:t.type)&&/^<\s*\/?\s*br\s*\/?>$/gi.test(t.raw.trim());ar.appendChild(r.getNode(),ar.createTextNode(sU(o?e.raw.replace(/^\s*/g,""):e.raw),r.getAttrs()))}return!1}if("space"===e.type){var a=Math.ceil(e.raw.replace(/ /g,"").length/2);if(a>1)for(var l=0;l<a-1;l+=1)ar.appendChild(r.getNode(),ar.createElement("p"))}}var u=n.markdownReader.getMarkdownReader(e.type);if(u){var c=r.makeChildContext();i.push(c);for(var s=0;s<u.length;s++){var d=u[s];if("read"in d){if(d.afterParentRead&&r.appendAfterParentReaders(d),!1===d.read(c,e))return!1}else if(!1===d(c,e))return!1}}}),(function(e){var t,r=n.markdownReader.getMarkdownReader(e.type);if(!["text","space","escape"].includes(e.type)&&r){var o,a=i.pop(),l=uU(r);try{for(l.s();!(o=l.n()).done;){var u=o.value;a&&"afterRead"in u&&(null===(t=u.afterRead)||void 0===t||t.call(u,a,e))}}catch(e){l.e(e)}finally{l.f()}null==a||a.afterParentReaders.forEach((function(e){var t;null===(t=e.afterParentRead)||void 0===t||t.call(e,a)}))}})),null==o||o.afterParentReaders.forEach((function(e){var t;null===(t=e.afterParentRead)||void 0===t||t.call(e,o)})),r}}])}();function fU(e,t,n){for(var r=0;r<e.length;r++){var o=e[r];!1!==t(o,e[r-1]||null,e[r+1]||null)&&"tokens"in o&&o.tokens&&fU(o.tokens,t,n),n(o)}}var hU=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e),Object.defineProperty(this,"readers",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}),[{key:"read",value:function(e,t,n){return function(e,t,n,r){return new dU(e,t,null,r).transform(n)}(e,this,lU(t.trim()),n)}},{key:"registerMarkdownReader",value:function(e,t){var n=this.readers.get(e);Array.isArray(n)?(n.push(t),this.readers.set(e,n)):this.readers.set(e,[t])}},{key:"getMarkdownReader",value:function(e){return this.readers.get(e)}},{key:"destroy",value:function(){this.readers.clear()}}])}(),pU=function(){return(0,$e.A)((function e(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;(0,Ke.A)(this,e),Object.defineProperty(this,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"node",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"nextNode",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"parentCtx",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"keepInline",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"wrapToString",{enumerable:!0,configurable:!0,writable:!0,value:null})}),[{key:"isInTableCell",value:function(){for(var e=this;e;){if("td"===e.node.name)return!0;e=e.parentCtx}return!1}},{key:"isInQuote",value:function(){for(var e=this;e;){if("quote"===e.node.name)return!0;e=e.parentCtx}return!1}},{key:"writeHTML",value:function(e){this.data.push(this.kernel.writeData("text/html",e,{htmlNoWrap:!0}))}},{key:"forEachChild",value:function(e){this.data.forEach((function(t){"string"!=typeof t&&e(t)}))}},{key:"lastChild",value:function(e){var t=this.data[this.data.length-1];t&&"string"!=typeof t&&e(t)}},{key:"append",value:function(e){this.data.push(e)}},{key:"appendBreakLine",value:function(){this.isInTableCell()?this.append("<br/>"):this.isInQuote()?this.append("\n>\n"):this.append("\n\n")}},{key:"appendFirst",value:function(e){this.data.unshift(e)}},{key:"insertAt",value:function(e,t){this.data.splice(t,0,e)}},{key:"setKeepInline",value:function(e){this.keepInline=e}},{key:"setWrapToString",value:function(e){if(this.wrapToString){var t=this.wrapToString;this.wrapToString=function(n){return e(t(n))}}else this.wrapToString=e}},{key:"wrap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;this.data.unshift(e),this.data.push(t)}},{key:"newLine",value:function(){this.data.push("\n\n")}},{key:"toString",value:function(){var e=this.data.join("");return this.keepInline?e.replace(/[\n\r]/g," "):this.wrapToString?this.wrapToString(e):e}}])}(),vU=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e),Object.defineProperty(this,"writers",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"anyNodeWriters",{enumerable:!0,configurable:!0,writable:!0,value:[]})}),[{key:"isColor",value:function(e){return!!au.parse(e)}},{key:"write",value:function(e,t,n){var r=this,o=new pU(e,t,null);return mU([t],(function(e,t){var o,i,a,l,u,c,s,d,f,h,p=r.writers.get("#text");if(null==p?void 0:p.length)for(var v=0;v<p.length;v++){var m=p[v];if(!1===(null===(o=m.preWrite)||void 0===o?void 0:o.call(m,e,t,n)))return!1}if("#text"===t.name){e.append((null===(i=t.data)||void 0===i?void 0:i.replace(/\n/g,"  \n"))||"");var g="";return(null===(a=t.attrs)||void 0===a?void 0:a.color)&&r.isColor(t.attrs.color)&&(g="color:".concat(t.attrs.color,";")),(null===(l=t.attrs)||void 0===l?void 0:l.bgColor)&&r.isColor(t.attrs.bgColor)&&(g+="background-color:".concat(t.attrs.bgColor,";")),g&&e.wrap('<font style="'.concat(g,'">'),"</font>"),(null===(u=t.attrs)||void 0===u?void 0:u.underline)&&e.wrap("<u>","</u>"),(null===(c=t.attrs)||void 0===c?void 0:c.bold)&&e.wrap("**"),(null===(s=t.attrs)||void 0===s?void 0:s.italic)&&e.wrap("_"),void((null===(d=t.attrs)||void 0===d?void 0:d.strikethrough)&&e.wrap("~~"))}var b=r.writers.get(t.name);if(b)for(var y=0;y<b.length;y++){var w=b[y];if(!1===(null===(h=w.preWrite)||void 0===h?void 0:h.call(w,e,t,n)))return!1}else for(var A=0;A<r.anyNodeWriters.length;A++){var k=r.anyNodeWriters[A];if(!1===(null===(f=k.preWrite)||void 0===f?void 0:f.call(k,e,t,n)))return!1}}),(function(e,t){var o=r.writers.get(t.name);if(o){for(var i=0;i<o.length;i++)if(!1===o[i].write(e,t,n))return!1}else for(var a=0;a<r.anyNodeWriters.length;a++)if(!1===r.anyNodeWriters[a].write(e,t,n))return!1}),o),o.toString()}},{key:"registerMarkdownWriter",value:function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)this.registerMarkdownWriterSingle(e[n],t);else this.registerMarkdownWriterSingle(e,t)}},{key:"registerAnyNodeWriter",value:function(e){this.anyNodeWriters.push(e)}},{key:"registerMarkdownWriterSingle",value:function(e,t){var n=this.writers.get(e);Array.isArray(n)?(n.push(t),this.writers.set(e,n)):this.writers.set(e,[t])}},{key:"destroy",value:function(){}}])}();function mU(e,t,n,r){for(var o=0;o<e.length;o++){var i=e[o],a=new pU(r.kernel,i,e[o+1]||null,r);!1!==t(a,i,e[o+1]||null)&&"children"in i&&i.children&&mU(i.children,t,n,a),n(a,i),r.append(a)}}function gU(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,bU()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function bU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bU=function(){return!!e})()}var yU=function(e){function t(){return(0,Ke.A)(this,t),gU(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"registerMarkdownReader",value:function(e,t){this.plugin.markdownReader.registerMarkdownReader(e,t)}},{key:"registerMarkdownWriter",value:function(e,t){this.plugin.markdownWriter.registerMarkdownWriter(e,t)}},{key:"destroy",value:function(){}}])}(tI);const wU={100:"💯",1234:"🔢",grinning:"😀",smiley:"😃",smile:"😄",grin:"😁",laughing:"😆",satisfied:"😆",sweat_smile:"😅",joy:"😂",rofl:"🤣",relaxed:"☺️",blush:"😊",innocent:"😇",slightly_smiling_face:"🙂",upside_down_face:"🙃",wink:"😉",relieved:"😌",heart_eyes:"😍",kissing_heart:"😘",kissing:"😗",kissing_smiling_eyes:"😙",kissing_closed_eyes:"😚",yum:"😋",stuck_out_tongue_winking_eye:"😜",stuck_out_tongue_closed_eyes:"😝",stuck_out_tongue:"😛",money_mouth_face:"🤑",hugs:"🤗",nerd_face:"🤓",sunglasses:"😎",clown_face:"🤡",cowboy_hat_face:"🤠",smirk:"😏",unamused:"😒",disappointed:"😞",pensive:"😔",worried:"😟",confused:"😕",slightly_frowning_face:"🙁",frowning_face:"☹️",persevere:"😣",confounded:"😖",tired_face:"😫",weary:"😩",triumph:"😤",angry:"😠",rage:"😡",pout:"😡",no_mouth:"😶",neutral_face:"😐",expressionless:"😑",hushed:"😯",frowning:"😦",anguished:"😧",open_mouth:"😮",astonished:"😲",dizzy_face:"😵",flushed:"😳",scream:"😱",fearful:"😨",cold_sweat:"😰",cry:"😢",disappointed_relieved:"😥",drooling_face:"🤤",sob:"😭",sweat:"😓",sleepy:"😪",sleeping:"😴",roll_eyes:"🙄",thinking:"🤔",lying_face:"🤥",grimacing:"😬",zipper_mouth_face:"🤐",nauseated_face:"🤢",sneezing_face:"🤧",mask:"😷",face_with_thermometer:"🤒",face_with_head_bandage:"🤕",smiling_imp:"😈",imp:"👿",japanese_ogre:"👹",japanese_goblin:"👺",hankey:"💩",poop:"💩",shit:"💩",ghost:"👻",skull:"💀",skull_and_crossbones:"☠️",alien:"👽",space_invader:"👾",robot:"🤖",jack_o_lantern:"🎃",smiley_cat:"😺",smile_cat:"😸",joy_cat:"😹",heart_eyes_cat:"😻",smirk_cat:"😼",kissing_cat:"😽",scream_cat:"🙀",crying_cat_face:"😿",pouting_cat:"😾",open_hands:"👐",raised_hands:"🙌",clap:"👏",pray:"🙏",handshake:"🤝","+1":"👍",thumbsup:"👍","-1":"👎",thumbsdown:"👎",fist_oncoming:"👊",facepunch:"👊",punch:"👊",fist_raised:"✊",fist:"✊",fist_left:"🤛",fist_right:"🤜",crossed_fingers:"🤞",v:"✌️",metal:"🤘",ok_hand:"👌",point_left:"👈",point_right:"👉",point_up_2:"👆",point_down:"👇",point_up:"☝️",hand:"✋",raised_hand:"✋",raised_back_of_hand:"🤚",raised_hand_with_fingers_splayed:"🖐",vulcan_salute:"🖖",wave:"👋",call_me_hand:"🤙",muscle:"💪",middle_finger:"🖕",fu:"🖕",writing_hand:"✍️",selfie:"🤳",nail_care:"💅",ring:"💍",lipstick:"💄",kiss:"💋",lips:"👄",tongue:"👅",ear:"👂",nose:"👃",footprints:"👣",eye:"👁",eyes:"👀",speaking_head:"🗣",bust_in_silhouette:"👤",busts_in_silhouette:"👥",baby:"👶",boy:"👦",girl:"👧",man:"👨",woman:"👩",blonde_woman:"👱‍♀",blonde_man:"👱",person_with_blond_hair:"👱",older_man:"👴",older_woman:"👵",man_with_gua_pi_mao:"👲",woman_with_turban:"👳‍♀",man_with_turban:"👳",policewoman:"👮‍♀",policeman:"👮",cop:"👮",construction_worker_woman:"👷‍♀",construction_worker_man:"👷",construction_worker:"👷",guardswoman:"💂‍♀",guardsman:"💂",female_detective:"🕵️‍♀️",male_detective:"🕵",detective:"🕵",woman_health_worker:"👩‍⚕",man_health_worker:"👨‍⚕",woman_farmer:"👩‍🌾",man_farmer:"👨‍🌾",woman_cook:"👩‍🍳",man_cook:"👨‍🍳",woman_student:"👩‍🎓",man_student:"👨‍🎓",woman_singer:"👩‍🎤",man_singer:"👨‍🎤",woman_teacher:"👩‍🏫",man_teacher:"👨‍🏫",woman_factory_worker:"👩‍🏭",man_factory_worker:"👨‍🏭",woman_technologist:"👩‍💻",man_technologist:"👨‍💻",woman_office_worker:"👩‍💼",man_office_worker:"👨‍💼",woman_mechanic:"👩‍🔧",man_mechanic:"👨‍🔧",woman_scientist:"👩‍🔬",man_scientist:"👨‍🔬",woman_artist:"👩‍🎨",man_artist:"👨‍🎨",woman_firefighter:"👩‍🚒",man_firefighter:"👨‍🚒",woman_pilot:"👩‍✈",man_pilot:"👨‍✈",woman_astronaut:"👩‍🚀",man_astronaut:"👨‍🚀",woman_judge:"👩‍⚖",man_judge:"👨‍⚖",mrs_claus:"🤶",santa:"🎅",princess:"👸",prince:"🤴",bride_with_veil:"👰",man_in_tuxedo:"🤵",angel:"👼",pregnant_woman:"🤰",bowing_woman:"🙇‍♀",bowing_man:"🙇",bow:"🙇",tipping_hand_woman:"💁",information_desk_person:"💁",sassy_woman:"💁",tipping_hand_man:"💁‍♂",sassy_man:"💁‍♂",no_good_woman:"🙅",no_good:"🙅",ng_woman:"🙅",no_good_man:"🙅‍♂",ng_man:"🙅‍♂",ok_woman:"🙆",ok_man:"🙆‍♂",raising_hand_woman:"🙋",raising_hand:"🙋",raising_hand_man:"🙋‍♂",woman_facepalming:"🤦‍♀",man_facepalming:"🤦‍♂",woman_shrugging:"🤷‍♀",man_shrugging:"🤷‍♂",pouting_woman:"🙎",person_with_pouting_face:"🙎",pouting_man:"🙎‍♂",frowning_woman:"🙍",person_frowning:"🙍",frowning_man:"🙍‍♂",haircut_woman:"💇",haircut:"💇",haircut_man:"💇‍♂",massage_woman:"💆",massage:"💆",massage_man:"💆‍♂",business_suit_levitating:"🕴",dancer:"💃",man_dancing:"🕺",dancing_women:"👯",dancers:"👯",dancing_men:"👯‍♂",walking_woman:"🚶‍♀",walking_man:"🚶",walking:"🚶",running_woman:"🏃‍♀",running_man:"🏃",runner:"🏃",running:"🏃",couple:"👫",two_women_holding_hands:"👭",two_men_holding_hands:"👬",couple_with_heart_woman_man:"💑",couple_with_heart:"💑",couple_with_heart_woman_woman:"👩‍❤️‍👩",couple_with_heart_man_man:"👨‍❤️‍👨",couplekiss_man_woman:"💏",couplekiss_woman_woman:"👩‍❤️‍💋‍👩",couplekiss_man_man:"👨‍❤️‍💋‍👨",family_man_woman_boy:"👪",family:"👪",family_man_woman_girl:"👨‍👩‍👧",family_man_woman_girl_boy:"👨‍👩‍👧‍👦",family_man_woman_boy_boy:"👨‍👩‍👦‍👦",family_man_woman_girl_girl:"👨‍👩‍👧‍👧",family_woman_woman_boy:"👩‍👩‍👦",family_woman_woman_girl:"👩‍👩‍👧",family_woman_woman_girl_boy:"👩‍👩‍👧‍👦",family_woman_woman_boy_boy:"👩‍👩‍👦‍👦",family_woman_woman_girl_girl:"👩‍👩‍👧‍👧",family_man_man_boy:"👨‍👨‍👦",family_man_man_girl:"👨‍👨‍👧",family_man_man_girl_boy:"👨‍👨‍👧‍👦",family_man_man_boy_boy:"👨‍👨‍👦‍👦",family_man_man_girl_girl:"👨‍👨‍👧‍👧",family_woman_boy:"👩‍👦",family_woman_girl:"👩‍👧",family_woman_girl_boy:"👩‍👧‍👦",family_woman_boy_boy:"👩‍👦‍👦",family_woman_girl_girl:"👩‍👧‍👧",family_man_boy:"👨‍👦",family_man_girl:"👨‍👧",family_man_girl_boy:"👨‍👧‍👦",family_man_boy_boy:"👨‍👦‍👦",family_man_girl_girl:"👨‍👧‍👧",womans_clothes:"👚",shirt:"👕",tshirt:"👕",jeans:"👖",necktie:"👔",dress:"👗",bikini:"👙",kimono:"👘",high_heel:"👠",sandal:"👡",boot:"👢",mans_shoe:"👞",shoe:"👞",athletic_shoe:"👟",womans_hat:"👒",tophat:"🎩",mortar_board:"🎓",crown:"👑",rescue_worker_helmet:"⛑",school_satchel:"🎒",pouch:"👝",purse:"👛",handbag:"👜",briefcase:"💼",eyeglasses:"👓",dark_sunglasses:"🕶",closed_umbrella:"🌂",open_umbrella:"☂️",dog:"🐶",cat:"🐱",mouse:"🐭",hamster:"🐹",rabbit:"🐰",fox_face:"🦊",bear:"🐻",panda_face:"🐼",koala:"🐨",tiger:"🐯",lion:"🦁",cow:"🐮",pig:"🐷",pig_nose:"🐽",frog:"🐸",monkey_face:"🐵",see_no_evil:"🙈",hear_no_evil:"🙉",speak_no_evil:"🙊",monkey:"🐒",chicken:"🐔",penguin:"🐧",bird:"🐦",baby_chick:"🐤",hatching_chick:"🐣",hatched_chick:"🐥",duck:"🦆",eagle:"🦅",owl:"🦉",bat:"🦇",wolf:"🐺",boar:"🐗",horse:"🐴",unicorn:"🦄",bee:"🐝",honeybee:"🐝",bug:"🐛",butterfly:"🦋",snail:"🐌",shell:"🐚",beetle:"🐞",ant:"🐜",spider:"🕷",spider_web:"🕸",turtle:"🐢",snake:"🐍",lizard:"🦎",scorpion:"🦂",crab:"🦀",squid:"🦑",octopus:"🐙",shrimp:"🦐",tropical_fish:"🐠",fish:"🐟",blowfish:"🐡",dolphin:"🐬",flipper:"🐬",shark:"🦈",whale:"🐳",whale2:"🐋",crocodile:"🐊",leopard:"🐆",tiger2:"🐅",water_buffalo:"🐃",ox:"🐂",cow2:"🐄",deer:"🦌",dromedary_camel:"🐪",camel:"🐫",elephant:"🐘",rhinoceros:"🦏",gorilla:"🦍",racehorse:"🐎",pig2:"🐖",goat:"🐐",ram:"🐏",sheep:"🐑",dog2:"🐕",poodle:"🐩",cat2:"🐈",rooster:"🐓",turkey:"🦃",dove:"🕊",rabbit2:"🐇",mouse2:"🐁",rat:"🐀",chipmunk:"🐿",feet:"🐾",paw_prints:"🐾",dragon:"🐉",dragon_face:"🐲",cactus:"🌵",christmas_tree:"🎄",evergreen_tree:"🌲",deciduous_tree:"🌳",palm_tree:"🌴",seedling:"🌱",herb:"🌿",shamrock:"☘️",four_leaf_clover:"🍀",bamboo:"🎍",tanabata_tree:"🎋",leaves:"🍃",fallen_leaf:"🍂",maple_leaf:"🍁",mushroom:"🍄",ear_of_rice:"🌾",bouquet:"💐",tulip:"🌷",rose:"🌹",wilted_flower:"🥀",sunflower:"🌻",blossom:"🌼",cherry_blossom:"🌸",hibiscus:"🌺",earth_americas:"🌎",earth_africa:"🌍",earth_asia:"🌏",full_moon:"🌕",waning_gibbous_moon:"🌖",last_quarter_moon:"🌗",waning_crescent_moon:"🌘",new_moon:"🌑",waxing_crescent_moon:"🌒",first_quarter_moon:"🌓",moon:"🌔",waxing_gibbous_moon:"🌔",new_moon_with_face:"🌚",full_moon_with_face:"🌝",sun_with_face:"🌞",first_quarter_moon_with_face:"🌛",last_quarter_moon_with_face:"🌜",crescent_moon:"🌙",dizzy:"💫",star:"⭐️",star2:"🌟",sparkles:"✨",zap:"⚡️",fire:"🔥",boom:"💥",collision:"💥",comet:"☄",sunny:"☀️",sun_behind_small_cloud:"🌤",partly_sunny:"⛅️",sun_behind_large_cloud:"🌥",sun_behind_rain_cloud:"🌦",rainbow:"🌈",cloud:"☁️",cloud_with_rain:"🌧",cloud_with_lightning_and_rain:"⛈",cloud_with_lightning:"🌩",cloud_with_snow:"🌨",snowman_with_snow:"☃️",snowman:"⛄️",snowflake:"❄️",wind_face:"🌬",dash:"💨",tornado:"🌪",fog:"🌫",ocean:"🌊",droplet:"💧",sweat_drops:"💦",umbrella:"☔️",green_apple:"🍏",apple:"🍎",pear:"🍐",tangerine:"🍊",orange:"🍊",mandarin:"🍊",lemon:"🍋",banana:"🍌",watermelon:"🍉",grapes:"🍇",strawberry:"🍓",melon:"🍈",cherries:"🍒",peach:"🍑",pineapple:"🍍",kiwi_fruit:"🥝",avocado:"🥑",tomato:"🍅",eggplant:"🍆",cucumber:"🥒",carrot:"🥕",corn:"🌽",hot_pepper:"🌶",potato:"🥔",sweet_potato:"🍠",chestnut:"🌰",peanuts:"🥜",honey_pot:"🍯",croissant:"🥐",bread:"🍞",baguette_bread:"🥖",cheese:"🧀",egg:"🥚",fried_egg:"🍳",bacon:"🥓",pancakes:"🥞",fried_shrimp:"🍤",poultry_leg:"🍗",meat_on_bone:"🍖",pizza:"🍕",hotdog:"🌭",hamburger:"🍔",fries:"🍟",stuffed_flatbread:"🥙",taco:"🌮",burrito:"🌯",green_salad:"🥗",shallow_pan_of_food:"🥘",spaghetti:"🍝",ramen:"🍜",stew:"🍲",fish_cake:"🍥",sushi:"🍣",bento:"🍱",curry:"🍛",rice:"🍚",rice_ball:"🍙",rice_cracker:"🍘",oden:"🍢",dango:"🍡",shaved_ice:"🍧",ice_cream:"🍨",icecream:"🍦",cake:"🍰",birthday:"🎂",custard:"🍮",lollipop:"🍭",candy:"🍬",chocolate_bar:"🍫",popcorn:"🍿",doughnut:"🍩",cookie:"🍪",milk_glass:"🥛",baby_bottle:"🍼",coffee:"☕️",tea:"🍵",sake:"🍶",beer:"🍺",beers:"🍻",clinking_glasses:"🥂",wine_glass:"🍷",tumbler_glass:"🥃",cocktail:"🍸",tropical_drink:"🍹",champagne:"🍾",spoon:"🥄",fork_and_knife:"🍴",plate_with_cutlery:"🍽",soccer:"⚽️",basketball:"🏀",football:"🏈",baseball:"⚾️",tennis:"🎾",volleyball:"🏐",rugby_football:"🏉","8ball":"🎱",ping_pong:"🏓",badminton:"🏸",goal_net:"🥅",ice_hockey:"🏒",field_hockey:"🏑",cricket:"🏏",golf:"⛳️",bow_and_arrow:"🏹",fishing_pole_and_fish:"🎣",boxing_glove:"🥊",martial_arts_uniform:"🥋",ice_skate:"⛸",ski:"🎿",skier:"⛷",snowboarder:"🏂",weight_lifting_woman:"🏋️‍♀️",weight_lifting_man:"🏋",person_fencing:"🤺",women_wrestling:"🤼‍♀",men_wrestling:"🤼‍♂",woman_cartwheeling:"🤸‍♀",man_cartwheeling:"🤸‍♂",basketball_woman:"⛹️‍♀️",basketball_man:"⛹",woman_playing_handball:"🤾‍♀",man_playing_handball:"🤾‍♂",golfing_woman:"🏌️‍♀️",golfing_man:"🏌",surfing_woman:"🏄‍♀",surfing_man:"🏄",surfer:"🏄",swimming_woman:"🏊‍♀",swimming_man:"🏊",swimmer:"🏊",woman_playing_water_polo:"🤽‍♀",man_playing_water_polo:"🤽‍♂",rowing_woman:"🚣‍♀",rowing_man:"🚣",rowboat:"🚣",horse_racing:"🏇",biking_woman:"🚴‍♀",biking_man:"🚴",bicyclist:"🚴",mountain_biking_woman:"🚵‍♀",mountain_biking_man:"🚵",mountain_bicyclist:"🚵",running_shirt_with_sash:"🎽",medal_sports:"🏅",medal_military:"🎖","1st_place_medal":"🥇","2nd_place_medal":"🥈","3rd_place_medal":"🥉",trophy:"🏆",rosette:"🏵",reminder_ribbon:"🎗",ticket:"🎫",tickets:"🎟",circus_tent:"🎪",woman_juggling:"🤹‍♀",man_juggling:"🤹‍♂",performing_arts:"🎭",art:"🎨",clapper:"🎬",microphone:"🎤",headphones:"🎧",musical_score:"🎼",musical_keyboard:"🎹",drum:"🥁",saxophone:"🎷",trumpet:"🎺",guitar:"🎸",violin:"🎻",game_die:"🎲",dart:"🎯",bowling:"🎳",video_game:"🎮",slot_machine:"🎰",car:"🚗",red_car:"🚗",taxi:"🚕",blue_car:"🚙",bus:"🚌",trolleybus:"🚎",racing_car:"🏎",police_car:"🚓",ambulance:"🚑",fire_engine:"🚒",minibus:"🚐",truck:"🚚",articulated_lorry:"🚛",tractor:"🚜",kick_scooter:"🛴",bike:"🚲",motor_scooter:"🛵",motorcycle:"🏍",rotating_light:"🚨",oncoming_police_car:"🚔",oncoming_bus:"🚍",oncoming_automobile:"🚘",oncoming_taxi:"🚖",aerial_tramway:"🚡",mountain_cableway:"🚠",suspension_railway:"🚟",railway_car:"🚃",train:"🚋",mountain_railway:"🚞",monorail:"🚝",bullettrain_side:"🚄",bullettrain_front:"🚅",light_rail:"🚈",steam_locomotive:"🚂",train2:"🚆",metro:"🚇",tram:"🚊",station:"🚉",helicopter:"🚁",small_airplane:"🛩",airplane:"✈️",flight_departure:"🛫",flight_arrival:"🛬",rocket:"🚀",artificial_satellite:"🛰",seat:"💺",canoe:"🛶",boat:"⛵️",sailboat:"⛵️",motor_boat:"🛥",speedboat:"🚤",passenger_ship:"🛳",ferry:"⛴",ship:"🚢",anchor:"⚓️",construction:"🚧",fuelpump:"⛽️",busstop:"🚏",vertical_traffic_light:"🚦",traffic_light:"🚥",world_map:"🗺",moyai:"🗿",statue_of_liberty:"🗽",fountain:"⛲️",tokyo_tower:"🗼",european_castle:"🏰",japanese_castle:"🏯",stadium:"🏟",ferris_wheel:"🎡",roller_coaster:"🎢",carousel_horse:"🎠",parasol_on_ground:"⛱",beach_umbrella:"🏖",desert_island:"🏝",mountain:"⛰",mountain_snow:"🏔",mount_fuji:"🗻",volcano:"🌋",desert:"🏜",camping:"🏕",tent:"⛺️",railway_track:"🛤",motorway:"🛣",building_construction:"🏗",factory:"🏭",house:"🏠",house_with_garden:"🏡",houses:"🏘",derelict_house:"🏚",office:"🏢",department_store:"🏬",post_office:"🏣",european_post_office:"🏤",hospital:"🏥",bank:"🏦",hotel:"🏨",convenience_store:"🏪",school:"🏫",love_hotel:"🏩",wedding:"💒",classical_building:"🏛",church:"⛪️",mosque:"🕌",synagogue:"🕍",kaaba:"🕋",shinto_shrine:"⛩",japan:"🗾",rice_scene:"🎑",national_park:"🏞",sunrise:"🌅",sunrise_over_mountains:"🌄",stars:"🌠",sparkler:"🎇",fireworks:"🎆",city_sunrise:"🌇",city_sunset:"🌆",cityscape:"🏙",night_with_stars:"🌃",milky_way:"🌌",bridge_at_night:"🌉",foggy:"🌁",watch:"⌚️",iphone:"📱",calling:"📲",computer:"💻",keyboard:"⌨️",desktop_computer:"🖥",printer:"🖨",computer_mouse:"🖱",trackball:"🖲",joystick:"🕹",clamp:"🗜",minidisc:"💽",floppy_disk:"💾",cd:"💿",dvd:"📀",vhs:"📼",camera:"📷",camera_flash:"📸",video_camera:"📹",movie_camera:"🎥",film_projector:"📽",film_strip:"🎞",telephone_receiver:"📞",phone:"☎️",telephone:"☎️",pager:"📟",fax:"📠",tv:"📺",radio:"📻",studio_microphone:"🎙",level_slider:"🎚",control_knobs:"🎛",stopwatch:"⏱",timer_clock:"⏲",alarm_clock:"⏰",mantelpiece_clock:"🕰",hourglass:"⌛️",hourglass_flowing_sand:"⏳",satellite:"📡",battery:"🔋",electric_plug:"🔌",bulb:"💡",flashlight:"🔦",candle:"🕯",wastebasket:"🗑",oil_drum:"🛢",money_with_wings:"💸",dollar:"💵",yen:"💴",euro:"💶",pound:"💷",moneybag:"💰",credit_card:"💳",gem:"💎",balance_scale:"⚖️",wrench:"🔧",hammer:"🔨",hammer_and_pick:"⚒",hammer_and_wrench:"🛠",pick:"⛏",nut_and_bolt:"🔩",gear:"⚙️",chains:"⛓",gun:"🔫",bomb:"💣",hocho:"🔪",knife:"🔪",dagger:"🗡",crossed_swords:"⚔️",shield:"🛡",smoking:"🚬",coffin:"⚰️",funeral_urn:"⚱️",amphora:"🏺",crystal_ball:"🔮",prayer_beads:"📿",barber:"💈",alembic:"⚗️",telescope:"🔭",microscope:"🔬",hole:"🕳",pill:"💊",syringe:"💉",thermometer:"🌡",toilet:"🚽",potable_water:"🚰",shower:"🚿",bathtub:"🛁",bath:"🛀",bellhop_bell:"🛎",key:"🔑",old_key:"🗝",door:"🚪",couch_and_lamp:"🛋",bed:"🛏",sleeping_bed:"🛌",framed_picture:"🖼",shopping:"🛍",shopping_cart:"🛒",gift:"🎁",balloon:"🎈",flags:"🎏",ribbon:"🎀",confetti_ball:"🎊",tada:"🎉",dolls:"🎎",izakaya_lantern:"🏮",lantern:"🏮",wind_chime:"🎐",email:"✉️",envelope:"✉️",envelope_with_arrow:"📩",incoming_envelope:"📨","e-mail":"📧",love_letter:"💌",inbox_tray:"📥",outbox_tray:"📤",package:"📦",label:"🏷",mailbox_closed:"📪",mailbox:"📫",mailbox_with_mail:"📬",mailbox_with_no_mail:"📭",postbox:"📮",postal_horn:"📯",scroll:"📜",page_with_curl:"📃",page_facing_up:"📄",bookmark_tabs:"📑",bar_chart:"📊",chart_with_upwards_trend:"📈",chart_with_downwards_trend:"📉",spiral_notepad:"🗒",spiral_calendar:"🗓",calendar:"📆",date:"📅",card_index:"📇",card_file_box:"🗃",ballot_box:"🗳",file_cabinet:"🗄",clipboard:"📋",file_folder:"📁",open_file_folder:"📂",card_index_dividers:"🗂",newspaper_roll:"🗞",newspaper:"📰",notebook:"📓",notebook_with_decorative_cover:"📔",ledger:"📒",closed_book:"📕",green_book:"📗",blue_book:"📘",orange_book:"📙",books:"📚",book:"📖",open_book:"📖",bookmark:"🔖",link:"🔗",paperclip:"📎",paperclips:"🖇",triangular_ruler:"📐",straight_ruler:"📏",pushpin:"📌",round_pushpin:"📍",scissors:"✂️",pen:"🖊",fountain_pen:"🖋",black_nib:"✒️",paintbrush:"🖌",crayon:"🖍",memo:"📝",pencil:"📝",pencil2:"✏️",mag:"🔍",mag_right:"🔎",lock_with_ink_pen:"🔏",closed_lock_with_key:"🔐",lock:"🔒",unlock:"🔓",heart:"❤️",yellow_heart:"💛",green_heart:"💚",blue_heart:"💙",purple_heart:"💜",black_heart:"🖤",broken_heart:"💔",heavy_heart_exclamation:"❣️",two_hearts:"💕",revolving_hearts:"💞",heartbeat:"💓",heartpulse:"💗",sparkling_heart:"💖",cupid:"💘",gift_heart:"💝",heart_decoration:"💟",peace_symbol:"☮️",latin_cross:"✝️",star_and_crescent:"☪️",om:"🕉",wheel_of_dharma:"☸️",star_of_david:"✡️",six_pointed_star:"🔯",menorah:"🕎",yin_yang:"☯️",orthodox_cross:"☦️",place_of_worship:"🛐",ophiuchus:"⛎",aries:"♈️",taurus:"♉️",gemini:"♊️",cancer:"♋️",leo:"♌️",virgo:"♍️",libra:"♎️",scorpius:"♏️",sagittarius:"♐️",capricorn:"♑️",aquarius:"♒️",pisces:"♓️",id:"🆔",atom_symbol:"⚛️",accept:"🉑",radioactive:"☢️",biohazard:"☣️",mobile_phone_off:"📴",vibration_mode:"📳",eight_pointed_black_star:"✴️",vs:"🆚",white_flower:"💮",ideograph_advantage:"🉐",secret:"㊙️",congratulations:"㊗️",u6e80:"🈵",a:"🅰️",b:"🅱️",ab:"🆎",cl:"🆑",o2:"🅾️",sos:"🆘",x:"❌",o:"⭕️",stop_sign:"🛑",no_entry:"⛔️",name_badge:"📛",no_entry_sign:"🚫",anger:"💢",hotsprings:"♨️",no_pedestrians:"🚷",do_not_litter:"🚯",no_bicycles:"🚳","non-potable_water":"🚱",underage:"🔞",no_mobile_phones:"📵",no_smoking:"🚭",exclamation:"❗️",heavy_exclamation_mark:"❗️",grey_exclamation:"❕",question:"❓",grey_question:"❔",bangbang:"‼️",interrobang:"⁉️",low_brightness:"🔅",high_brightness:"🔆",part_alternation_mark:"〽️",warning:"⚠️",children_crossing:"🚸",trident:"🔱",fleur_de_lis:"⚜️",beginner:"🔰",recycle:"♻️",white_check_mark:"✅",chart:"💹",sparkle:"❇️",eight_spoked_asterisk:"✳️",negative_squared_cross_mark:"❎",globe_with_meridians:"🌐",diamond_shape_with_a_dot_inside:"💠",m:"Ⓜ️",cyclone:"🌀",zzz:"💤",atm:"🏧",wc:"🚾",wheelchair:"♿️",parking:"🅿️",sa:"🈂️",passport_control:"🛂",customs:"🛃",baggage_claim:"🛄",left_luggage:"🛅",mens:"🚹",womens:"🚺",baby_symbol:"🚼",restroom:"🚻",put_litter_in_its_place:"🚮",cinema:"🎦",signal_strength:"📶",koko:"🈁",symbols:"🔣",information_source:"ℹ️",abc:"🔤",abcd:"🔡",capital_abcd:"🔠",ng:"🆖",ok:"🆗",up:"🆙",cool:"🆒",new:"🆕",free:"🆓",zero:"0️⃣",one:"1️⃣",two:"2️⃣",three:"3️⃣",four:"4️⃣",five:"5️⃣",six:"6️⃣",seven:"7️⃣",eight:"8️⃣",nine:"9️⃣",keycap_ten:"🔟",hash:"#️⃣",asterisk:"*️⃣",arrow_forward:"▶️",pause_button:"⏸",play_or_pause_button:"⏯",stop_button:"⏹",record_button:"⏺",next_track_button:"⏭",previous_track_button:"⏮",fast_forward:"⏩",rewind:"⏪",arrow_double_up:"⏫",arrow_double_down:"⏬",arrow_backward:"◀️",arrow_up_small:"🔼",arrow_down_small:"🔽",arrow_right:"➡️",arrow_left:"⬅️",arrow_up:"⬆️",arrow_down:"⬇️",arrow_upper_right:"↗️",arrow_lower_right:"↘️",arrow_lower_left:"↙️",arrow_upper_left:"↖️",arrow_up_down:"↕️",left_right_arrow:"↔️",arrow_right_hook:"↪️",leftwards_arrow_with_hook:"↩️",arrow_heading_up:"⤴️",arrow_heading_down:"⤵️",twisted_rightwards_arrows:"🔀",repeat:"🔁",repeat_one:"🔂",arrows_counterclockwise:"🔄",arrows_clockwise:"🔃",musical_note:"🎵",notes:"🎶",heavy_plus_sign:"➕",heavy_minus_sign:"➖",heavy_division_sign:"➗",heavy_multiplication_x:"✖️",heavy_dollar_sign:"💲",currency_exchange:"💱",tm:"™️",copyright:"©️",registered:"®️",wavy_dash:"〰️",curly_loop:"➰",loop:"➿",end:"🔚",back:"🔙",on:"🔛",top:"🔝",soon:"🔜",heavy_check_mark:"✔️",ballot_box_with_check:"☑️",radio_button:"🔘",white_circle:"⚪️",black_circle:"⚫️",red_circle:"🔴",large_blue_circle:"🔵",small_red_triangle:"🔺",small_red_triangle_down:"🔻",small_orange_diamond:"🔸",small_blue_diamond:"🔹",large_orange_diamond:"🔶",large_blue_diamond:"🔷",white_square_button:"🔳",black_square_button:"🔲",black_small_square:"▪️",white_small_square:"▫️",black_medium_small_square:"◾️",white_medium_small_square:"◽️",black_medium_square:"◼️",white_medium_square:"◻️",black_large_square:"⬛️",white_large_square:"⬜️",speaker:"🔈",mute:"🔇",sound:"🔉",loud_sound:"🔊",bell:"🔔",no_bell:"🔕",mega:"📣",loudspeaker:"📢",eye_speech_bubble:"👁‍🗨",speech_balloon:"💬",thought_balloon:"💭",right_anger_bubble:"🗯",spades:"♠️",clubs:"♣️",hearts:"♥️",diamonds:"♦️",black_joker:"🃏",flower_playing_cards:"🎴",mahjong:"🀄️",clock1:"🕐",clock2:"🕑",clock3:"🕒",clock4:"🕓",clock5:"🕔",clock6:"🕕",clock7:"🕖",clock8:"🕗",clock9:"🕘",clock10:"🕙",clock11:"🕚",clock12:"🕛",clock130:"🕜",clock230:"🕝",clock330:"🕞",clock430:"🕟",clock530:"🕠",clock630:"🕡",clock730:"🕢",clock830:"🕣",clock930:"🕤",clock1030:"🕥",clock1130:"🕦",clock1230:"🕧",white_flag:"🏳️",black_flag:"🏴",checkered_flag:"🏁",triangular_flag_on_post:"🚩",rainbow_flag:"🏳️‍🌈",afghanistan:"🇦🇫",aland_islands:"🇦🇽",albania:"🇦🇱",algeria:"🇩🇿",american_samoa:"🇦🇸",andorra:"🇦🇩",angola:"🇦🇴",anguilla:"🇦🇮",antarctica:"🇦🇶",antigua_barbuda:"🇦🇬",argentina:"🇦🇷",armenia:"🇦🇲",aruba:"🇦🇼",australia:"🇦🇺",austria:"🇦🇹",azerbaijan:"🇦🇿",bahamas:"🇧🇸",bahrain:"🇧🇭",bangladesh:"🇧🇩",barbados:"🇧🇧",belarus:"🇧🇾",belgium:"🇧🇪",belize:"🇧🇿",benin:"🇧🇯",bermuda:"🇧🇲",bhutan:"🇧🇹",bolivia:"🇧🇴",caribbean_netherlands:"🇧🇶",bosnia_herzegovina:"🇧🇦",botswana:"🇧🇼",brazil:"🇧🇷",british_indian_ocean_territory:"🇮🇴",british_virgin_islands:"🇻🇬",brunei:"🇧🇳",bulgaria:"🇧🇬",burkina_faso:"🇧🇫",burundi:"🇧🇮",cape_verde:"🇨🇻",cambodia:"🇰🇭",cameroon:"🇨🇲",canada:"🇨🇦",canary_islands:"🇮🇨",cayman_islands:"🇰🇾",central_african_republic:"🇨🇫",chad:"🇹🇩",chile:"🇨🇱",cn:"🇨🇳",christmas_island:"🇨🇽",cocos_islands:"🇨🇨",colombia:"🇨🇴",comoros:"🇰🇲",congo_brazzaville:"🇨🇬",congo_kinshasa:"🇨🇩",cook_islands:"🇨🇰",costa_rica:"🇨🇷",cote_divoire:"🇨🇮",croatia:"🇭🇷",cuba:"🇨🇺",curacao:"🇨🇼",cyprus:"🇨🇾",czech_republic:"🇨🇿",denmark:"🇩🇰",djibouti:"🇩🇯",dominica:"🇩🇲",dominican_republic:"🇩🇴",ecuador:"🇪🇨",egypt:"🇪🇬",el_salvador:"🇸🇻",equatorial_guinea:"🇬🇶",eritrea:"🇪🇷",estonia:"🇪🇪",ethiopia:"🇪🇹",eu:"🇪🇺",european_union:"🇪🇺",falkland_islands:"🇫🇰",faroe_islands:"🇫🇴",fiji:"🇫🇯",finland:"🇫🇮",fr:"🇫🇷",french_guiana:"🇬🇫",french_polynesia:"🇵🇫",french_southern_territories:"🇹🇫",gabon:"🇬🇦",gambia:"🇬🇲",georgia:"🇬🇪",de:"🇩🇪",ghana:"🇬🇭",gibraltar:"🇬🇮",greece:"🇬🇷",greenland:"🇬🇱",grenada:"🇬🇩",guadeloupe:"🇬🇵",guam:"🇬🇺",guatemala:"🇬🇹",guernsey:"🇬🇬",guinea:"🇬🇳",guinea_bissau:"🇬🇼",guyana:"🇬🇾",haiti:"🇭🇹",honduras:"🇭🇳",hong_kong:"🇭🇰",hungary:"🇭🇺",iceland:"🇮🇸",india:"🇮🇳",indonesia:"🇮🇩",iran:"🇮🇷",iraq:"🇮🇶",ireland:"🇮🇪",isle_of_man:"🇮🇲",israel:"🇮🇱",it:"🇮🇹",jamaica:"🇯🇲",jp:"🇯🇵",crossed_flags:"🎌",jersey:"🇯🇪",jordan:"🇯🇴",kazakhstan:"🇰🇿",kenya:"🇰🇪",kiribati:"🇰🇮",kosovo:"🇽🇰",kuwait:"🇰🇼",kyrgyzstan:"🇰🇬",laos:"🇱🇦",latvia:"🇱🇻",lebanon:"🇱🇧",lesotho:"🇱🇸",liberia:"🇱🇷",libya:"🇱🇾",liechtenstein:"🇱🇮",lithuania:"🇱🇹",luxembourg:"🇱🇺",macau:"🇲🇴",macedonia:"🇲🇰",madagascar:"🇲🇬",malawi:"🇲🇼",malaysia:"🇲🇾",maldives:"🇲🇻",mali:"🇲🇱",malta:"🇲🇹",marshall_islands:"🇲🇭",martinique:"🇲🇶",mauritania:"🇲🇷",mauritius:"🇲🇺",mayotte:"🇾🇹",mexico:"🇲🇽",micronesia:"🇫🇲",moldova:"🇲🇩",monaco:"🇲🇨",mongolia:"🇲🇳",montenegro:"🇲🇪",montserrat:"🇲🇸",morocco:"🇲🇦",mozambique:"🇲🇿",myanmar:"🇲🇲",namibia:"🇳🇦",nauru:"🇳🇷",nepal:"🇳🇵",netherlands:"🇳🇱",new_caledonia:"🇳🇨",new_zealand:"🇳🇿",nicaragua:"🇳🇮",niger:"🇳🇪",nigeria:"🇳🇬",niue:"🇳🇺",norfolk_island:"🇳🇫",northern_mariana_islands:"🇲🇵",north_korea:"🇰🇵",norway:"🇳🇴",oman:"🇴🇲",pakistan:"🇵🇰",palau:"🇵🇼",palestinian_territories:"🇵🇸",panama:"🇵🇦",papua_new_guinea:"🇵🇬",paraguay:"🇵🇾",peru:"🇵🇪",philippines:"🇵🇭",pitcairn_islands:"🇵🇳",poland:"🇵🇱",portugal:"🇵🇹",puerto_rico:"🇵🇷",qatar:"🇶🇦",reunion:"🇷🇪",romania:"🇷🇴",ru:"🇷🇺",rwanda:"🇷🇼",st_barthelemy:"🇧🇱",st_helena:"🇸🇭",st_kitts_nevis:"🇰🇳",st_lucia:"🇱🇨",st_pierre_miquelon:"🇵🇲",st_vincent_grenadines:"🇻🇨",samoa:"🇼🇸",san_marino:"🇸🇲",sao_tome_principe:"🇸🇹",saudi_arabia:"🇸🇦",senegal:"🇸🇳",serbia:"🇷🇸",seychelles:"🇸🇨",sierra_leone:"🇸🇱",singapore:"🇸🇬",sint_maarten:"🇸🇽",slovakia:"🇸🇰",slovenia:"🇸🇮",solomon_islands:"🇸🇧",somalia:"🇸🇴",south_africa:"🇿🇦",south_georgia_south_sandwich_islands:"🇬🇸",kr:"🇰🇷",south_sudan:"🇸🇸",es:"🇪🇸",sri_lanka:"🇱🇰",sudan:"🇸🇩",suriname:"🇸🇷",swaziland:"🇸🇿",sweden:"🇸🇪",switzerland:"🇨🇭",syria:"🇸🇾",tajikistan:"🇹🇯",tanzania:"🇹🇿",thailand:"🇹🇭",timor_leste:"🇹🇱",togo:"🇹🇬",tokelau:"🇹🇰",tonga:"🇹🇴",trinidad_tobago:"🇹🇹",tunisia:"🇹🇳",tr:"🇹🇷",turkmenistan:"🇹🇲",turks_caicos_islands:"🇹🇨",tuvalu:"🇹🇻",uganda:"🇺🇬",ukraine:"🇺🇦",united_arab_emirates:"🇦🇪",gb:"🇬🇧",uk:"🇬🇧",us:"🇺🇸",us_virgin_islands:"🇻🇮",uruguay:"🇺🇾",uzbekistan:"🇺🇿",vanuatu:"🇻🇺",vatican_city:"🇻🇦",venezuela:"🇻🇪",vietnam:"🇻🇳",wallis_futuna:"🇼🇫",western_sahara:"🇪🇭",yemen:"🇾🇪",zambia:"🇿🇲",zimbabwe:"🇿🇼"};function AU(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,kU()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function kU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(kU=function(){return!!e})()}var _U=function(e){function t(){var e;return(0,Ke.A)(this,t),e=AU(this,t,arguments),Object.defineProperty(e,"_dataSource",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"markdownReader",{enumerable:!0,configurable:!0,writable:!0,value:new hU}),Object.defineProperty(e,"markdownWriter",{enumerable:!0,configurable:!0,writable:!0,value:new vU}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){this._dataSource=new xL(e),e.registerDataSource("text/markdown",this._dataSource),e.registerReader("text/markdown",this.markdownReader),e.registerWriter("text/markdown",this.markdownWriter),this.registerDefaultReader(),this.registerDefaultWriter()}},{key:"registerDefaultReader",value:function(){var e=this,t=this.markdownReader,n=this.kernel.getService(wS.ID);n&&t.registerMarkdownReader("html",(function(t,r){var o,i=n.read(e.kernel,r.text,{}),a=t.getAttrs(),l=Object.keys(a).length>0;return null===(o=i.children)||void 0===o||o.forEach((function(e){var n;l&&(e.attrs=Object.assign(Object.assign({},a),e.attrs),null===(n=e.children)||void 0===n||n.forEach((function e(t){t.children&&t.children.forEach(e),t.attrs&&(t.attrs=Object.assign(Object.assign({},a),t.attrs))}))),t.setNode(e)})),!1})),t.registerMarkdownReader("paragraph",{read:function(e){return e.setNode(e.createElement("p")),!0}}),t.registerMarkdownReader("blockquote",(function(e){return e.setNode(e.createElement("quote")),!0})),t.registerMarkdownReader("heading",(function(e,t){var n=e.createElement("h"+t.depth);return n.id=t.id||"",e.setNode(n),!0})),t.registerMarkdownReader("del",(function(e){return e.addAttr("strikethrough",!0),!0})),t.registerMarkdownReader("em",(function(e){return e.addAttr("italic",!0),!0})),t.registerMarkdownReader("strong",{read:function(e){return e.addAttr("bold",!0),!0}}),t.registerMarkdownReader("sub",{read:function(e){return e.addAttr("sub",!0),!0}}),t.registerMarkdownReader("sup",{read:function(e){return e.addAttr("sup",!0),!0}}),t.registerMarkdownReader("mark",{read:function(e){return e.addAttr("bgColor","#f3bb2f"),!0}}),t.registerMarkdownReader("link",{read:function(e,t){return e.setNode(e.createElement("link",{src:t.href,external:!0})),!0},afterRead:function(e,t){var n,r,o,i;(null===(n=e.node)||void 0===n?void 0:n.children)&&e.node.children.some((function(e){return"image"===e.name&&(i=e),"image"===e.name}))&&e.node.children.every((function(e){return"image"===e.name||!("text"!==e.type||!/^\s*$/.test(e.data||""))}))&&((null===(r=e.parent)||void 0===r?void 0:r.node)&&ar.removeChild(e.parent.node,e.node),(null===(o=null==i?void 0:i.attrs)||void 0===o?void 0:o.value)&&(i.attrs.value.link=t.href),i&&e.setNode(i))}}),t.registerMarkdownReader("code",(function(e,t){if(["plantuml","puml","flowchart","flow","graphviz","mermaid"].includes(t.lang||"")){var n="plantuml"===t.lang||"puml"===t.lang?"puml":"flow"===t.lang?"flowchart":t.lang;return e.setNode(e.createElement("textDiagram",{value:{type:n,code:t.text},cardType:"block"})),!1}return!0})),t.registerMarkdownReader("codespan",(function(e,t){var n=e.createElement("code");return e.appendChild(n,e.createText(t.raw.slice(1,-1))),e.setNode(n),!0})),t.registerMarkdownReader("hr",(function(e){return e.setNode(e.createElement("hr")),!0})),t.registerMarkdownReader("emoji",(function(e,t){return!e.getOption().markdownIgnoreEmoji&&t.text in wU?e.setNode(e.createText(wU[t.text],e.getAttrs())):e.setNode(e.createText(t.raw,e.getAttrs())),!0})),t.registerMarkdownReader("math",(function(e,t){var n=e.createElement("math",{value:{code:t.text},cardType:"inline"});if(t.block){var r=e.createElement("p",{alignment:"center"});e.appendChild(r,n),e.setNode(r)}else e.setNode(n);return!0})),t.registerMarkdownReader("list",(function(e,t){var n=t.ordered?"oli":"uli",r="number"==typeof t.start?t.start-1:null;return t.items.forEach((function(t,o){var i,a=e.createElement(t.task?"tli":n,{level:0,index:(r||0)+o,indexType:0,checked:t.checked});e.transform(t.tokens,a);var l=[];null===(i=a.children)||void 0===i||i.forEach((function(e){["oli","tli","uli"].includes(e.name)&&l.push(e)})),e.setNode(a),l.forEach((function(t){var n;ar.removeChild(a,t),t.attrs.level+=1;var r=null===(n=e.parent)||void 0===n?void 0:n.getNode();r&&e.appendChild(r,t)}))})),!0})),t.registerMarkdownReader("table",(function(e,t){var n=e.createElement("table",{colWidths:t.align.map((function(){return 750/t.align.length})),colCount:t.align.length,rowCount:t.rows.length+1});return[t.header].concat((0,ln.A)(t.rows)).forEach((function(r){var o=e.createElement("tr");e.appendChild(n,o),r.forEach((function(n,r){var i=e.createElement("td",{col:r}),a=e.createElement("p",t.align[r]?{alignment:t.align[r]}:{});e.appendChild(o,i),e.appendChild(i,a),e.transform(n.tokens,a)}))})),e.setNode(n),!0})),t.registerMarkdownReader("alert",{read:function(e,t){for(var n,r,o,i=Array.from((null===(r=null===(n=e.parent)||void 0===n?void 0:n.getNode())||void 0===r?void 0:r.children)||[]),a=i.length-1;a>=0;a--)if("alert"===i[a].name){if(i[a].attrs.selfStart){var l=i.slice(a+1);return null===(o=e.parent)||void 0===o||o.removeChildren(l),e.appendChildren(i[a],l),e.addAttr("selfClose",!0),delete i[a].attrs.selfStart,!1}if(i[a].attrs.selfClose)return e.setNode(e.createElement("alert",{type:t.lang||"info",selfStart:!0})),!1}return e.setNode(e.createElement("alert",{type:t.lang||"info",selfStart:!0})),!1},afterParentRead:function(e){for(var t,n=Array.from((null===(t=null==e?void 0:e.getNode())||void 0===t?void 0:t.children)||[]),r=n.length-1;r>=0;r--)if("alert"===n[r].name){if(n[r].attrs.selfStart){var o=n.slice(r+1);return e.removeChildren(o),e.appendChildren(n[r],o),n[r].attrs.selfClose=!0,void delete n[r].attrs.selfStart}return}}})}},{key:"registerDefaultWriter",value:function(){var e=this.markdownWriter;e.registerAnyNodeWriter({write:function(e,t,n){if("card"===t.type){var r=(null==n?void 0:n.currentURL)||e.kernel.option.currentURL;return e.append("[此处为语雀卡片，点击链接查看](".concat(r,"#").concat(t.id,")\n\n")),!1}return!0}}),e.registerMarkdownWriter("p",{write:function(e){return e.appendBreakLine(),!1}});var t={preWrite:function(e,t,n){var r=parseInt(t.name.slice(1),10);return n&&n.keepHeadingAnchor||e.append("#".repeat(r)+" "),!0},write:function(e,t,n){var r=e.isInTableCell()?"<br/>":"\n";return n&&n.keepHeadingAnchor?e.wrap("<".concat(t.name,' id="').concat(t.id,'">'),"</".concat(t.name,">").concat(r)):e.append(r),!1}};e.registerMarkdownWriter("h1",t),e.registerMarkdownWriter("h2",t),e.registerMarkdownWriter("h3",t),e.registerMarkdownWriter("h4",t),e.registerMarkdownWriter("h5",t),e.registerMarkdownWriter("h6",t),e.registerMarkdownWriter("math",{write:function(e,t,n){return n&&"keepLatexCode"in n&&!n.keepLatexCode&&t.attrs.value.url?e.append("![image](".concat(t.attrs.value.url,")")):e.append("$ ".concat(t.attrs.value.code," $")),!1}}),e.registerMarkdownWriter("quote",{write:function(e){return e.forEachChild((function(e){e.appendFirst("> ")})),e.append("\n"),!1}}),e.registerMarkdownWriter("collapse",{preWrite:function(e,t){return e.writeHTML(ar.createFragment([t])),!1},write:function(e){return e.append("\n"),!1}}),e.registerMarkdownWriter("alert",{write:function(e,t){return e.wrap(":::".concat(t.attrs.type,"\n"),":::\n\n"),!1}})}},{key:"destroy",value:function(){Tr((0,Je.A)(t.prototype),"destroy",this).call(this),this.markdownReader.destroy(),this.markdownWriter.destroy()}}])}(ct);Object.defineProperty(_U,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:CL.pluginName}),Object.defineProperty(_U,"Service",{enumerable:!0,configurable:!0,writable:!0,value:yU});var CU=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"write",value:function(e,t){return e.wrap("`"),!1}}])}();function NU(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,OU()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function OU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(OU=function(){return!!e})()}var xU=function(e){function t(){return(0,Ke.A)(this,t),NU(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"readNode",value:function(e,t){e.setNode(ar.createElement("code"))}}])}(Ej);function EU(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,DU()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function DU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(DU=function(){return!!e})()}Object.defineProperty(xU,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[cL]});var PU=["`","·"],RU=function(e){function t(){var e;return(0,Ke.A)(this,t),e=EU(this,t,arguments),Object.defineProperty(e,"_handleMarkdownMatch",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t){var n=e.createElement("code");Go.wrapInlineNode(e,t,n),e.setSelection([e.newRange(e.newPosition(n.parentNode,n.offset+1))])}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerElement(fL),e.registerAttr(dL),this._watchChange()}},{key:"afterInit",value:function(){var e,t=this.kernel,n=t.getService(_S.ID);n&&n.registerLakeNodeReader(gL.NodeNames,new gL);var r=t.getService(_S.ID);r&&r.registerLakeNodeWriter(_L.NodeNames,new _L);var o=t.getService(wS.ID);o&&(o.registerNodeHTMLWriter(wL.NodeNames,new wL),o.registerHTMLNodeReader(xU.NodeNames,new xU));var i=t.getService(DS.ID);if(null===(e=t.getService(tI.ID))||void 0===e||e.registerMarkdownWriter("code",new CU),i)for(var a=0,l=PU;a<l.length;a++){var u=l[a];i.registerMarkdownMatcher(CS.whiteSpace,new _B(this.editing,u,this._handleMarkdownMatch))}}},{key:"_watchChange",value:function(){var e=this;this.editing.on("nodechange",(function(t){if("attribute"===t.type&&"fontsize"===t.attrName){var n=t.node.closest("code");n&&e._updateContentFontsize(t.job,n)}}))}},{key:"_updateContentFontsize",value:function(e,t){var n=SU(t.children);n>0?e.setAttribute(t,"contentFontsize",n):e.removeAttribute(t,"contentFontsize")}}])}(ct);function SU(e){return e.length?Math.max.apply(Math,(0,ln.A)(e.map((function(e){return e.isTextNode()?e.attrs.fontsize||0:e.isElement()?SU(e.children):0})))):0}Object.defineProperty(RU,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:hL.pluginName}),Object.defineProperty(RU,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[mL]});const TU={targets:[qe.Text,qe.InlineCard],values:function(){return!0}};var jU=HR({pluginName:"color",attr:{color:"color"},toolbar:{color:"color"},command:{color:"color",clearColor:"clearColor"},service:{IColorKernelService:"IColorKernelService"}});function IU(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,BU()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function BU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(BU=function(){return!!e})()}var MU=function(e){function t(){var e;return(0,Ke.A)(this,t),e=IU(this,t,arguments),Object.defineProperty(e,"attrName",{enumerable:!0,configurable:!0,writable:!0,value:jU.attr.color}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){var n,r=e.getSelection();return wi.isInCard(r)&&(null===(n=r.firstRange.commonAncestorContainer)||void 0===n?void 0:n.hasCategory(qe.InlineCard))?dt:Tr((0,Je.A)(t.prototype),"getState",this).call(this,e)}},{key:"execute",value:function(e){return Tr((0,Je.A)(t.prototype),"execute",this).call(this,e,null)}}])}($l);function FU(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function LU(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,UU()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function UU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(UU=function(){return!!e})()}Object.defineProperty(MU,"ID",{enumerable:!0,configurable:!0,writable:!0,value:jU.command.clearColor});var VU=function(e){function t(){var e;return(0,Ke.A)(this,t),e=LU(this,t,arguments),Object.defineProperty(e,"attrName",{enumerable:!0,configurable:!0,writable:!0,value:jU.attr.color}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){var n,r,o=e.getSelection(),i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return FU(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?FU(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(this.plugin.service.colorDisableHandlers);try{for(i.s();!(r=i.n()).done;)if((0,r.value)(o))return st}catch(e){i.e(e)}finally{i.f()}return wi.isInCard(o)&&(null===(n=o.firstRange.commonAncestorContainer)||void 0===n?void 0:n.hasCategory(qe.InlineCard))?dt:Tr((0,Je.A)(t.prototype),"getState",this).call(this,e)}}])}($l);function HU(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,zU()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function zU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(zU=function(){return!!e})()}Object.defineProperty(VU,"ID",{enumerable:!0,configurable:!0,writable:!0,value:jU.command.color});var WU=function(e){function t(){return(0,Ke.A)(this,t),HU(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"readStyle",value:function(e,t,n){n&&e.addAttr(jU.attr.color,n)}}])}(sB);Object.defineProperty(WU,"StyleNames",{enumerable:!0,configurable:!0,writable:!0,value:["color"]});var qU=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"read",value:function(e,t,n){e.setAttr(jU.attr.color,n)}}])}(),$U=[["rgb(154, 240, 212),rgb(114, 191, 244)","rgb(112, 220, 254),rgb(252, 113, 245)","rgb(255, 104, 91),rgb(255, 134, 217)","rgb(255, 133, 114),rgb(255, 215, 124)"]],KU=[["rgb(42, 188, 191),rgb(56, 54, 221)","rgb(34, 73, 254),rgb(199, 74, 168)","rgb(255, 111, 4),rgb(243, 48, 171)","rgb(244, 170, 6),rgb(229, 70, 49)"]],YU={};function GU(e){if(e.startsWith("var"))return[e,void 0];var t=e.split(/,/g);if(t.length<=2)return t;var n=e.split(/\)\s*?,/);return n.length<2?n:[n[0]+")",n[1]]}function JU(e,t){if(!e)return e;if(YU[e])return t.isDark()?YU[e]:e;if(e.includes(",")){var n=GU(e),r=(0,tn.A)(n,2),o=r[0],i=r[1],a=t.toVisualValue(o);return i&&(a="".concat(a,",").concat(t.toVisualValue(i))),a}return t.toVisualValue(e)}function XU(e,t){if(YU[e])return t.isDark()?YU[e]:e;if(e.includes(",")){var n=GU(e),r=(0,tn.A)(n,2),o=r[0],i=r[1],a=t.toPersistentValue(o);return i&&(a="".concat(a,",").concat(t.toPersistentValue(i))),a}return t.toPersistentValue(e)}function QU(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,ZU()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function ZU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ZU=function(){return!!e})()}$U[0].forEach((function(e,t){YU[e]=KU[0][t],YU[KU[0][t]]=e}));var eV=function(e){function t(){return(0,Ke.A)(this,t),QU(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t,n){if(n){var r=GU(n),o=(0,tn.A)(r,1)[0];e.addStyle("color",o)}}}])}(vB);Object.defineProperty(eV,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:[jU.attr.color]});var tV=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"write",value:function(e,t,n){n&&e.setStyle("color",n)}}])}();function nV(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,rV()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function rV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rV=function(){return!!e})()}Object.defineProperty(tV,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:[jU.attr.color]});var oV=function(e){function t(){var e;return(0,Ke.A)(this,t),e=nV(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),Object.defineProperty(e,"colorDisableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(rt);function iV(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,aV()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function aV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(aV=function(){return!!e})()}Object.defineProperty(oV,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze(jU.service.IColorKernelService)});var lV=function(e){function t(){return(0,Ke.A)(this,t),iV(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"registerColorDisableHandler",value:function(e){this.colorDisableHandlers.push(e)}},{key:"destroy",value:function(){this.colorDisableHandlers=[]}}])}(oV);function uV(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,cV()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function cV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(cV=function(){return!!e})()}var sV=function(e){function t(){return(0,Ke.A)(this,t),uV(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"readNode",value:function(e,t){var n;(null===(n=t.attrs)||void 0===n?void 0:n.color)&&e.addAttr("color",t.attrs.color)}}])}(Ej);function dV(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,fV()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function fV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(fV=function(){return!!e})()}Object.defineProperty(sV,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["font"]});var hV=function(e){function t(){return(0,Ke.A)(this,t),dV(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerAttr(jU.attr.color,TU)}},{key:"afterInit",value:function(){var e=this.kernel,t=e.getService(wS.ID);t&&(t.registerHTMLStyleReader(WU.StyleNames,new WU),t.registerHTMLNodeReader(sV.NodeNames,new sV));var n=e.getService(wS.ID);n&&n.registerAttrHTMLWriter(eV.AttrNames,new eV);var r=e.getService(_S.ID);r&&r.registerLakeStyleReader("color",new qU);var o=e.getService(_S.ID);o&&o.registerLakeAttrWriter(tV.AttrNames,new tV)}}])}(ct);Object.defineProperty(hV,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:jU.pluginName}),Object.defineProperty(hV,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[VU,MU]}),Object.defineProperty(hV,"Service",{enumerable:!0,configurable:!0,writable:!0,value:lV});const pV={widthMode:{targets:[qe.WidthModeBox,"table","collapse"],values:[Dl,El]}};var vV=HR({pluginName:"container"});function mV(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,gV()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function gV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(gV=function(){return!!e})()}var bV=function(e){function t(){return(0,Ke.A)(this,t),mV(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){e.setVirtual((function(){}))}}])}(vT);function yV(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,wV()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function wV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wV=function(){return!!e})()}Object.defineProperty(bV,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["alertHole"]});var AV=function(e){function t(){return(0,Ke.A)(this,t),yV(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){e.setVirtual((function(){}))}}])}(vT);function kV(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,_V()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function _V(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_V=function(){return!!e})()}Object.defineProperty(AV,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["containerHole"]});var CV=function(e){function t(){return(0,Ke.A)(this,t),kV(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerAttr(pV);var t=e.getService(_S.ID);t&&(t.registerLakeNodeWriter(AV.NodeNames,new AV),t.registerLakeNodeWriter(bV.NodeNames,new bV))}}])}(ct);Object.defineProperty(CV,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:vV.pluginName});var NV=HR({pluginName:"content",command:{wordCount:"wordCount",wordCountSelection:"wordCountSelection",isEmpty:"isEmpty",getNodeContent:"getNodeContent",insertAtSelection:"insertAtSelection",insertAtPosition:"insertAtPosition"},service:{IContentKernelService:"IContentKernelService"}});function OV(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,xV()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function xV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xV=function(){return!!e})()}var EV=function(e){function t(){return(0,Ke.A)(this,t),OV(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(){return pt.NOT_EXECUTED}},{key:"getValue",value:function(){var e;if(null===(e=this.plugin.service)||void 0===e?void 0:e.isForceHasContent)return!1;var t=this.kernel.model.document.rootNode,n=t.childCount;if(0===n)return!0;if(1===n&&"p"===t.firstChild.nodeName){if(t.firstChild.isEmpty())return!0;if(1===t.firstChild.childCount&&t.firstChild.firstChild.isTextNode()&&t.firstChild.firstChild.isEmpty())return!0}return!1}}])}(gt);function DV(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,PV()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function PV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(PV=function(){return!!e})()}Object.defineProperty(EV,"ID",{enumerable:!0,configurable:!0,writable:!0,value:NV.command.isEmpty});var RV=function(e){function t(){return(0,Ke.A)(this,t),DV(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(){return pt.NOT_EXECUTED}},{key:"getValue",value:function(){return Eh(this.kernel.getDocument("text/plain"))}}])}(gt);function SV(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,TV()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function TV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(TV=function(){return!!e})()}Object.defineProperty(RV,"ID",{enumerable:!0,configurable:!0,writable:!0,value:NV.command.wordCount});var jV=function(e){function t(){var e;return(0,Ke.A)(this,t),e=SV(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(rt);function IV(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,BV()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function BV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(BV=function(){return!!e})()}Object.defineProperty(jV,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze(NV.service.IContentKernelService)});var MV=function(e){function t(){var e;return(0,Ke.A)(this,t),e=IV(this,t,arguments),Object.defineProperty(e,"isForceHasContent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"lockContentNotEmpty",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.isForceHasContent=!0,e.plugin._selfChange()}}),Object.defineProperty(e,"releaseLockContentNotEmpty",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.isForceHasContent=!1,e.plugin._selfChange()}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){}}])}(jV);function FV(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,LV()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function LV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(LV=function(){return!!e})()}var UV=function(e){function t(){return(0,Ke.A)(this,t),FV(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t,n){var r=e.newJob(),o=r.getNodeById(t);if(!o)return"";var i=r.selectNode(o);try{var a=wi.extractINode(r,i),l=this.kernel.writeData(n,a)||"";return e.commitJob(r),l}catch(e){return""}}}])}(gt);function VV(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,HV()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function HV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(HV=function(){return!!e})()}Object.defineProperty(UV,"ID",{enumerable:!0,configurable:!0,writable:!0,value:NV.command.getNodeContent});var zV=function(e){function t(){return(0,Ke.A)(this,t),VV(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t,n){var r=e.newJob(),o=r.getSelection();try{var i=this.kernel.readData(t,n);return r.setSelection(wi.insertINode(r,o,i)),e.commitJob(r),i}catch(e){return null}}}])}(gt);function WV(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,qV()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function qV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qV=function(){return!!e})()}Object.defineProperty(zV,"ID",{enumerable:!0,configurable:!0,writable:!0,value:NV.command.insertAtSelection});var $V=function(e){function t(){return(0,Ke.A)(this,t),WV(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(){return pt.NOT_EXECUTED}},{key:"getValue",value:function(e){var t=wi.extractINode(e,YF(e,e.getSelection()));return t?Eh(this.kernel.writeData("text/plain",t)):0}}])}(gt);function KV(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,YV()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function YV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(YV=function(){return!!e})()}Object.defineProperty($V,"ID",{enumerable:!0,configurable:!0,writable:!0,value:NV.command.wordCountSelection});var GV=function(e){function t(){return(0,Ke.A)(this,t),KV(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t,n,r){var o=e.newJob();try{var i=o.getNodeById(t.id);if(!i||!i.isConnected)throw new Error("Node not found");if(i.isTextNode()&&i.dataLength<t.offset||i.isElement()&&i.childCount<t.offset)throw new Error("Offset out of range");var a=this.kernel.readData(n,r);if(!a)throw new Error("Failed to read data");var l=wr.insertINodeByPosition(o,o.newPosition(i,t.offset),a);return o.setSelection(o.newSelection(o.newRange(l))),e.commitJob(o),a}catch(t){return e.cancelJob(o),null}}}])}(gt);function JV(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,XV()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function XV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(XV=function(){return!!e})()}Object.defineProperty(GV,"ID",{enumerable:!0,configurable:!0,writable:!0,value:NV.command.insertAtPosition});var QV=function(e){function t(){var e;return(0,Ke.A)(this,t),e=JV(this,t,arguments),Object.defineProperty(e,"changeTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){var n=this,r=function(e){n.changeTimer&&clearTimeout(n.changeTimer),n.changeTimer=setTimeout((function(){n._change(),e&&e.mode!==We.OT&&n._selfChange()}))};e.on("document.ready",(function(){t.on(qi,r)})),e.on("document.destroy",(function(){t.off(qi,r)}))}},{key:"destroy",value:function(){Tr((0,Je.A)(t.prototype),"destroy",this).call(this),this.changeTimer&&clearTimeout(this.changeTimer)}},{key:"_change",value:function(){this.kernel.emitEvent("change")}},{key:"_selfChange",value:function(){this.kernel.emitEvent("selfChange")}}])}(ct);Object.defineProperty(QV,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:NV.pluginName}),Object.defineProperty(QV,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[RV,$V,EV,UV,zV,GV]}),Object.defineProperty(QV,"Service",{enumerable:!0,configurable:!0,writable:!0,value:MV});var ZV=HR({pluginName:"delete",command:{delete:"delete",deleteByRange:"deleteByRange",deleteToBlockEnd:"deleteToBlockEnd"}});function eH(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,tH()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function tH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(tH=function(){return!!e})()}var nH=function(e){function t(){return(0,Ke.A)(this,t),eH(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t){bt.fatal(!t.collapsed,"plugins/delete/src/kernel/commands/delete-by-range-command.ts:11");var n=e.newJob(),r=wi.deleteContent(n,n.newSelection(t),!0,!0,!1);n.setSelection(r),e.commitJob(n)}}])}(gt);function rH(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,oH()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function oH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(oH=function(){return!!e})()}Object.defineProperty(nH,"ID",{enumerable:!0,configurable:!0,writable:!0,value:ZV.command.deleteByRange});var iH=function(e){function t(){return(0,Ke.A)(this,t),rH(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.newJob();n=this.plugin.allowDeleteTable?n:this.plugin.allowDeleteTable;var o=r.getSelection();if(o.isCollapsed)do{var i=o.firstRange.start.node.closest(qe.Block);if(!i||i.nodeName!==r.defaultElementName)break;if(!Ut.isLikeEmptyElement(i))break;if(r.document.rootNode.firstChild!==i||1===r.document.rootNode.childCount)break;return r.removeChild(i.parent,i),o=r.newSelection(r.newRange(r.newPosition(r.document.rootNode,0))),r.setSelection(o),void e.commitJob(r)}while(0);o=wi.deleteContent(r,o,!0,t,!1,n),wi.unCollapseAll(r,o),r.setSelection(o),e.commitJob(r)}}])}(gt);function aH(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,lH()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function lH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(lH=function(){return!!e})()}Object.defineProperty(iH,"ID",{enumerable:!0,configurable:!0,writable:!0,value:ZV.command.delete});var uH=function(e){function t(){return(0,Ke.A)(this,t),aH(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e){var t=e.newJob(),n=t.getSelection();if(!n.isCollapsed)return e.cancelJob(t),!1;var r=n.firstRange.start,o=r.node.closest(qe.Block);if(!o)return e.cancelJob(t),!1;var i=wr.alignmentToElement(t,r,qe.Block,"left");if(i.node.hasCategory(qe.Block)&&bt.fatal(i.node===o,"plugins/delete/src/kernel/commands/delete-to-block-end-command.ts:41"),i.node===o&&o.childCount===i.offset)return e.cancelJob(t),!1;var a=t.newRange(i,t.newPosition(o,o.childCount)),l=wi.deleteContent(t,t.newSelection(a),!0,!0,!1);return t.setSelection(l),e.commitJob(t),!0}}])}(gt);function cH(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,sH()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function sH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(sH=function(){return!!e})()}Object.defineProperty(uH,"ID",{enumerable:!0,configurable:!0,writable:!0,value:ZV.command.deleteToBlockEnd});var dH=function(e){function t(){var e;return(0,Ke.A)(this,t),e=cH(this,t,arguments),Object.defineProperty(e,"_allowDeleteTable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){}},{key:"disableDeleteTable",value:function(){this._allowDeleteTable=!1}},{key:"enableDeleteTable",value:function(){this._allowDeleteTable=!0}},{key:"allowDeleteTable",get:function(){return this._allowDeleteTable}}])}(ct);Object.defineProperty(dH,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:ZV.pluginName}),Object.defineProperty(dH,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[iH,nH,uH]});var fH=HR({pluginName:"dropFile",command:{dropFile:"dropFile"}});function hH(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,pH()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function pH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pH=function(){return!!e})()}var vH=function(e){function t(){return(0,Ke.A)(this,t),hH(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(){return pt.NOT_EXECUTED}},{key:"getValue",value:function(){return!1}},{key:"execute",value:function(e,t){var n=e.newJob(),r=this.kernel.readData("Files",t,{from:FT,useMediaCard:this.plugin.option.useMediaCard});if(r){var o=wi.insertINode(n,n.getSelection(),r);n.setSelection(o),e.commitJob(n)}}}])}(gt);Object.defineProperty(vH,"ID",{enumerable:!0,configurable:!0,writable:!0,value:fH.command.dropFile});var mH={useMediaCard:!1},gH=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Object.assign({},mH,t)}),[{key:"useMediaCard",get:function(){return this._option.useMediaCard}}])}();function bH(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,yH()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function yH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(yH=function(){return!!e})()}Object.defineProperty(gH,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:fH.pluginName});var wH=function(e){function t(){return(0,Ke.A)(this,t),bH(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){}}])}(ct);Object.defineProperty(wH,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:fH.pluginName}),Object.defineProperty(wH,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:gH}),Object.defineProperty(wH,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[vH]});var AH=HR({pluginName:"fallbackCard"}),kH="inline",_H="block",CH=(0,Ha.A)((0,Ha.A)({},kH,kH),_H,_H),NH=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"read",value:function(e,t){var n,r,o=CH[null===(n=t.attrs)||void 0===n?void 0:n.cardType]||_H;return e.setNode(ar.createCard(o,{cardName:t.name,cardValue:null===(r=t.attrs)||void 0===r?void 0:r.value},t.id)),!1}},{key:"destroy",value:function(){}}])}();function OH(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,xH()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function xH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xH=function(){return!!e})()}Object.defineProperty(NH,"CardName",{enumerable:!0,configurable:!0,writable:!0,value:"*"});var EH=function(e){function t(){return(0,Ke.A)(this,t),OH(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t,n,r){var o=CH[e.inode.cardType]||_H;e.setNode(ar.createCard(o,{cardName:t,cardValue:n},r))}}])}(Lj);Object.defineProperty(EH,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["*"]});var DH=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"write",value:function(e,t,n,r){(null==n?void 0:n.cardName)&&e.setNode(e.createBlockCard(n.cardName,n.cardValue,r))}}])}();function PH(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,RH()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function RH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(RH=function(){return!!e})()}Object.defineProperty(DH,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["block","inline"]});var SH=function(e){function t(){return(0,Ke.A)(this,t),PH(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerInlineCard("inline"),e.registerBlockCard("block");var t=e.getService(_S.ID);t&&t.registerLakeCardReader(EH.NodeNames,new EH);var n=e.getService(RT.ID);n&&n.registerINodeCardReader(NH.CardName,new NH);var r=e.getService(_S.ID);r&&r.registerLakeCardWriter(DH.NodeNames,new DH)}}])}(ct);Object.defineProperty(SH,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:AH.pluginName});var TH="ms-office",jH="mac-office",IH="mind",BH="desgin",MH="pdf",FH="upload",LH="localdoc",UH=(0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)({},TH,[]),jH,[]),IH,[]),BH,[]),MH,[]),FH,[]),LH,[]),VH=o(7222),HH=o.n(VH),zH={Pending:"pending",Done:"done",Error:"error",Uploading:"uploading",Transfering:"transfering"},WH={Upload:"upload",Transfer:"transfer"},qH="card",$H="embed",KH="title",YH="inline",GH="block";function JH(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,XH()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function XH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(XH=function(){return!!e})()}var QH={src:"",name:"",size:0,ext:"",source:"",status:zH.Pending,download:!1},ZH=function(e){function t(){return(0,Ke.A)(this,t),JH(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"cardAlias",get:function(){return this.getMode()}},{key:"getTaskId",value:function(){return this._cardValue.taskId}},{key:"getTaskType",value:function(){return this._cardValue.taskType}},{key:"getName",value:function(){return this._cardValue.name}},{key:"setName",value:function(e){this._cardValue.name=e}},{key:"getExt",value:function(){return this._cardValue.ext}},{key:"setExt",value:function(e){this._cardValue.ext=e}},{key:"getSrc",value:function(){return this._cardValue.src}},{key:"setSrc",value:function(e){this._cardValue.src=e}},{key:"getStatus",value:function(){return this._cardValue.status}},{key:"setStatus",value:function(e){this._cardValue.status=e}},{key:"getType",value:function(){return this._cardValue.type}},{key:"setType",value:function(e){this._cardValue.type=e}},{key:"getSize",value:function(){return this._cardValue.size}},{key:"setSize",value:function(e){this._cardValue.size=e}},{key:"getMessage",value:function(){return this._cardValue.message||""}},{key:"setMessage",value:function(e){this._cardValue.message=e}},{key:"getMode",value:function(){return this._cardValue.mode||$H}},{key:"setMode",value:function(e){this._cardValue.mode=e}},{key:"getRuntimeMode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];bt.fatal("boolean"==typeof e,"plugins/file/src/kernel/file-card-data.ts:251");var t=this._cardValue.mode;return e&&t===$H?qH:t||$H}},{key:"isEmbedMode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return bt.fatal("boolean"==typeof e,"plugins/file/src/kernel/file-card-data.ts:262"),this.getRuntimeMode(e)===$H}},{key:"isTitleMode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return bt.fatal("boolean"==typeof e,"plugins/file/src/kernel/file-card-data.ts:267"),this.getRuntimeMode(e)===KH}},{key:"isCardMode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return bt.fatal("boolean"==typeof e,"plugins/file/src/kernel/file-card-data.ts:272"),this.getRuntimeMode(e)===qH}},{key:"getDownload",value:function(){return this._cardValue.download}},{key:"setDownload",value:function(e){this._cardValue.download=e}},{key:"isCompleted",value:function(){var e=this.getStatus();return!(!this.getSrc()&&![zH.Done,zH.Error].includes(e)&&this._cardValue.taskId)}},{key:"toJSON",value:function(){return Object.assign({},this._cardValue)}}],[{key:"fromLake",value:function(e,n){var r=n.type;if(HH()(e))return Ww()({},t.DefaultCardValue,{src:e});e.src&&e.status!==zH.Done&&(e.status=zH.Done);var o=e.mode;return r===YH&&(e.mode=KH,e.download=void 0===e.download||e.download),r===GH&&o===KH&&(e.mode=qH),Ww()({},t.DefaultCardValue,e)}},{key:"toLake",value:function(e){return e}},{key:"fromRepository",value:function(e){var t=e.copiedFileInfo,n={};return n.src=t.url,n.size=t.size,n.name=t.filename,n.ext=t.extname,n.status=zH.Done,n.source="transfer",n.mode=qH,Sl.setCardSpacingToValue(Nl,Ww()({},QH,n))}},{key:"fromTransfer",value:function(e,t){var n,r,o,i,a,l,u={};return u.taskId=t.id,u.taskType=WH.Transfer,u.status=zH.Transfering,u.name=null!==(n=null==e?void 0:e.name)&&void 0!==n?n:QH.name,u.size=null!==(r=null==e?void 0:e.size)&&void 0!==r?r:QH.size,u.type=null!==(o=null==e?void 0:e.type)&&void 0!==o?o:QH.type,u.ext=null!==(i=null==e?void 0:e.ext)&&void 0!==i?i:QH.ext,u.mode=null!==(a=null==e?void 0:e.mode)&&void 0!==a?a:QH.mode,u.download=null!==(l=null==e?void 0:e.download)&&void 0!==l?l:QH.download,Ww()({},QH,u)}},{key:"getInitCardValue",value:function(e,t){var n,r,o,i=t.type,a=t.getFileExtname,l={};return e&&(l.taskId=e.id,l.taskType=WH.Upload,e.file&&(l.name=null!==(n=e.file.name)&&void 0!==n?n:QH.name,l.size=null!==(r=e.file.size)&&void 0!==r?r:QH.size,l.type=null!==(o=e.file.type)&&void 0!==o?o:QH.type,l.ext=e.file.ext?e.file.ext:e.file.name?a(e.file.name):QH.ext)),l.download=i===YH,Sl.setCardSpacingToValue(Nl,Ww()({},QH,l))}}])}(Sl);Object.defineProperty(ZH,"DefaultCardValue",{enumerable:!0,configurable:!0,writable:!0,value:QH});var ez=HR({pluginName:"file",cardName:"localdoc",command:{insertFile:"insertFile"},toolbar:"note-file",cardSelect:{file:"file",localFile:"localFile",localDoc:"localDoc",uploadForLocalDoc:"uploadForLocalDoc",officeForLocalDoc:"officeForLocalDoc",macOfficeForLocalDoc:"macOfficeForLocalDoc",mindForLocalDoc:"mindForLocalDoc",designForLocalDoc:"designForLocalDoc",pdfForLocalDoc:"pdfForLocalDoc"},service:{fileKernelService:"IFileKernelService"}});function tz(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,nz()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function nz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nz=function(){return!!e})()}var rz=function(e){function t(){return(0,Ke.A)(this,t),tz(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=ZH.fromLake(t,{type:YH});return this._execute(e,"file",r,n)}}])}(sj);Object.defineProperty(rz,"ID",{enumerable:!0,configurable:!0,writable:!0,value:ez.command.insertFile});var oz={getAttachmentFileAccept:function(e){return[]},getImageFileAccept:function(e){return[]},getAudioFileAccept:function(e){return[]},getVideoFileAccept:function(e){return[]},getLocalDocFileAccept:function(e,t){return bt(t in UH,"plugins/upload/src/public/default-accept-util.ts:52"),[]}},iz={getPreviewUrl:null,getFileDownloadURL:null,accept:null,getFileExtname:function(e){if(!e)return"";var t;if(t="string"==typeof e?e:e.name){if((t=t.toLowerCase()).endsWith(".mindnode.zip"))return"mindnode.zip";if(t.endsWith(".xmind.zip"))return"xmind.zip";if(t.endsWith(".mmap.zip"))return"mmap.zip";if(t.endsWith(".mpp.zip"))return"mpp.zip"}var n=t&&t.split(".").pop()||"",r=e instanceof File&&e.type&&qf[e.type];return r?r.includes(n)?n:r[0]:n},acceptUtil:oz,migrationHost:!1},az=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"getFileExtname",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Ww()({},iz,t),this.getFileExtname=this._option.getFileExtname}),[{key:"accept",get:function(){return this._option.accept}},{key:"acceptUtil",get:function(){return this._option.acceptUtil}},{key:"migrationHost",get:function(){return this._option.migrationHost}},{key:"getPreviewUrl",value:function(e){var t=this._option.getPreviewUrl;return t?t(e):e}},{key:"getFileDownloadURL",value:function(e){var t=this._option.getFileDownloadURL;return t?t(e):e}}])}();function lz(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,uz()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function uz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(uz=function(){return!!e})()}Object.defineProperty(az,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:eM.FILE.OPTION_NAME});var cz=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=lz(this,t),Object.defineProperty(n,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"readFile",value:function(e,t){if((null==t?void 0:t.from)===LT&&"localDoc"===(null==t?void 0:t.category)){var n=e._$neUploadTask;if(n)return ar.createCard("localdoc",ZH.getInitCardValue(n,{type:GH,getFileExtname:this.plugin.option.getFileExtname}))}}}])}(Cj);function sz(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,dz()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function dz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(dz=function(){return!!e})()}var fz=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=sz(this,t),Object.defineProperty(r,"_plugin",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(r,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:n}),r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"readFile",value:function(e){var t,n=null===(t=e.extName)||void 0===t?void 0:t.toLowerCase();if(this._plugin.option.acceptUtil.getAttachmentFileAccept(this._plugin.option.accept).includes("."+n)){var r=e._$neUploadTaskId;if(r)return ar.createCard(eM.FILE.NODE_NAME,ZH.getInitCardValue({id:r,file:e.file},{type:YH,getFileExtname:this._plugin.option.getFileExtname}),Dr(9))}else this._kernel.emitEvent("unSupportFileUpload",e)}}])}(Cj);Object.defineProperty(fz,"FileTypes",{enumerable:!0,configurable:!0,writable:!0,value:"*"});var hz=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"destroy",value:function(){}},{key:"read",value:function(){return!0}}])}();Object.defineProperty(hz,"CardName",{enumerable:!0,configurable:!0,writable:!0,value:eM.LOCAL_DOC.NODE_NAME});var pz=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"destroy",value:function(){}},{key:"read",value:function(){return!0}}])}();Object.defineProperty(pz,"CardName",{enumerable:!0,configurable:!0,writable:!0,value:eM.FILE.NODE_NAME});var vz=o(4455),mz=o.n(vz);function gz(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,bz()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function bz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bz=function(){return!!e})()}var yz=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=gz(this,t),Object.defineProperty(n,"option",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t,n,r){if(this.option.migrationHost){var o=new URL(n.src);o.hostname.endsWith(".yuque.com")&&(o.hostname="string"==typeof this.option.migrationHost?this.option.migrationHost:"yuque.antfin-inc.com",o.pathname="/api/v2/servicify/migration".concat(o.pathname),n.src=o.toString())}mz()(n.collapsed)&&(n.mode=n.collapsed?qH:$H);var i=ar.createCard(eM.LOCAL_DOC.NODE_NAME,ZH.fromLake(n,{type:GH}),r);e.setNode(i)}}])}(Lj);function wz(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Az()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Az(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Az=function(){return!!e})()}var kz=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=wz(this,t),Object.defineProperty(n,"option",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t,n,r){if(this.option.migrationHost){var o=new URL(n.src);o.hostname.endsWith(".yuque.com")&&(o.hostname="string"==typeof this.option.migrationHost?this.option.migrationHost:"yuque.antfin-inc.com",o.pathname="/api/v2/servicify/migration".concat(o.pathname),n.src=o.toString())}var i=ar.createCard(eM.FILE.NODE_NAME,ZH.fromLake(n,{type:YH}),r);e.setNode(i)}}])}(Lj);function _z(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Cz()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Cz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Cz=function(){return!!e})()}var Nz=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=_z(this,t),Object.defineProperty(n,"_plugin",{enumerable:!0,configurable:!0,writable:!0,value:null}),n._plugin=e,n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){var n=ku()(t,"attrs.value",{}),r=n.src,o=n.download,i=n.name;if(r){var a=this._plugin.option,l=o?a.getFileDownloadURL(r):a.getPreviewUrl(r),u=e.createElement("div",{className:"ne-localdoc"}),c=e.createElement("a",{attrs:{href:l}});e.appendChild(c,e.createTextNode(i)),e.appendChild(u,c),e.setNode(u)}}}])}(lT);function Oz(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,xz()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function xz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xz=function(){return!!e})()}var Ez=function(e){function t(){return(0,Ke.A)(this,t),Oz(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){var n=ku()(t,"attrs.value",{}),r=n.src,o=n.name;if(r){var i=e.createElement("a",{className:"ne-card-file",attrs:{href:r}});e.appendChild(i,e.createTextNode("📎"+o)),e.setNode(i)}}}])}(lT),Dz=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"write",value:function(e,t,n,r){var o=e.createBlockCard(eM.LOCAL_DOC.LAKE_NAME,ZH.toLake(n),r);e.setNode(o)}}])}(),Pz=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"write",value:function(e,t,n,r){var o=e.createInlineCard(eM.FILE.LAKE_NAME,ZH.toLake(n),r);e.setNode(o)}}])}(),Rz=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"write",value:function(e,t){var n=ku()(t,"attrs.value",{}),r=n.name,o=n.src,i="[".concat(r,"](").concat(o||"",")");return"inline"===t.cardType?e.append(i):(e.append(i),e.newLine()),!0}}])}();function Sz(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Tz()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Tz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Tz=function(){return!!e})()}var jz=function(e){function t(){return(0,Ke.A)(this,t),Sz(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerInlineCard(t.cardName),e.registerBlockCard(t.blockCardName)}},{key:"afterInit",value:function(){var e,n=this.kernel,r=n.getService(_S.ID);r&&(r.registerLakeCardReader(eM.FILE.UI_NAME,new kz(this.option)),r.registerLakeCardReader(eM.LOCAL_DOC.UI_NAME,new yz(this.option)));var o=n.getService(_S.ID);o&&(o.registerLakeCardWriter(t.cardName,new Pz),o.registerLakeCardWriter(t.blockCardName,new Dz));var i=n.getService(RT.ID);i&&(i.registerINodeCardReader(pz.CardName,new pz),i.registerINodeCardReader(hz.CardName,new hz));var a=n.getService(wS.ID);a&&(a.registerNodeHTMLWriter(t.cardName,new Ez),a.registerNodeHTMLWriter(t.blockCardName,new Nz(this)));var l=n.getService(ET.ID);null==l||l.registerFileReader(fz.FileTypes,new fz(this,this.kernel)),null==l||l.registerFileReader(this.option.acceptUtil.getLocalDocFileAccept(this.option.accept,LH),new cz(this)),null===(e=n.getService(tI.ID))||void 0===e||e.registerMarkdownWriter([t.cardName,t.blockCardName],new Rz)}}])}(ct);function Iz(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Bz()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Bz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Bz=function(){return!!e})()}Object.defineProperty(jz,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:ez.pluginName}),Object.defineProperty(jz,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:az}),Object.defineProperty(jz,"cardName",{enumerable:!0,configurable:!0,writable:!0,value:eM.FILE.NODE_NAME}),Object.defineProperty(jz,"blockCardName",{enumerable:!0,configurable:!0,writable:!0,value:eM.LOCAL_DOC.NODE_NAME}),Object.defineProperty(jz,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[rz]});var Mz=function(e){function t(){return(0,Ke.A)(this,t),Iz(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"registerFileReader",value:function(e,t){this.plugin.fileReaderManager.registerFileReader(e,t)}},{key:"registerPreFileReader",value:function(e,t){this.plugin.fileReaderManager.registerPreFileReader(e,t)}},{key:"destroy",value:function(){}}])}(ET);function Fz(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Lz()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Lz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Lz=function(){return!!e})()}var Uz={checkFileSize:function(){return null},getMessageByCode:function(){}},Vz=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=Fz(this,t),Object.defineProperty(n,"_option",{enumerable:!0,configurable:!0,writable:!0,value:null}),n._option=Ww()({},Uz,e),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"checkFileSize",value:function(e,t){return this._option.checkFileSize(e,t)}},{key:"getErrorMessageByCode",value:function(e){return this._option.getMessageByCode(e)}}])}(it);function Hz(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,zz()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function zz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(zz=function(){return!!e})()}Object.defineProperty(Vz,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"fileReader"});var Wz=function(e){function t(){return(0,Ke.A)(this,t),Hz(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(){return pt.NOT_EXECUTED}},{key:"getValue",value:function(){return!1}},{key:"execute",value:function(e,t,n){var r,o=e.newJob(),i=this.kernel,a=o.getSelection(),l=i.readData("Files",t,n);if(l){var u=this._getSelectionAttrs(o,a);null===(r=l.children)||void 0===r||r.forEach((function(e){e.attrs=Object.assign(Object.assign({},u),e.attrs)})),o.setSelection(wi.insertINode(o,o.getSelection(),l)),e.commitJob(o)}else e.cancelJob(o)}},{key:"_getSelectionAttrs",value:function(e,t){var n,r;if(t.firstRange.start.node.isTextNode())r=t.firstRange.start.node.attrs;else if(t.firstRange.start.node.hasCategory(qe.TextContainer)){var o=t.firstRange.start,i=o.node,a=o.offset;r=null===(n=i.children[t.collapsed?a-1:a])||void 0===n?void 0:n.attrs}return r&&(r=Object.keys(r).reduce((function(t,n){return e.acceptAttr(qe.Text,n,r[n])&&(t[n]=r[n]),t}),{})),r}}])}(pt),qz=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_plugin",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_preReaders",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_readers",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_uploadService",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._plugin=t,this._uploadService=t.kernel.requireService(Qj.ID)}),[{key:"registerPreFileReader",value:function(e,t){Array.isArray(e)||(e=[e]),this._register(this._preReaders,e,t)}},{key:"registerFileReader",value:function(e,t){Array.isArray(e)||(e=[e]),this._register(this._readers,e,t)}},{key:"read",value:function(e,t,n){var r=this,o=this._preReaders,i=this._readers,a=this._getPreReaderContext(),l=t.map((function(e){return{type:e.type,extName:r._uploadService.getFileExtname((e.name||"").toLowerCase()),file:e}})).map((function(e){var t=e.type,l=e.extName,u=r._getReader(o,t,l),c=!0;u&&!1===u.preReadFile(a,e,n)&&(c=!1);var s=r._getReader(o,sM.all);if(c&&s&&!1===s.preReadFile(a,e,n))return null;var d=null,f=r._getReader(i,t,l);if(f&&(d=f.readFile(e,n)),d)return d;var h=r._getReader(i,sM.all);return h?h.readFile(e,n):null})).filter(Boolean);return l.length?ar.createFragment(l):null}},{key:"_getPreReaderContext",value:function(){var e=this;return{checkFileSize:function(t,n){return e._plugin.option.checkFileSize(t,n)},getErrorMessageByCode:function(t,n){return e._plugin.option.getErrorMessageByCode(t)}}}},{key:"_register",value:function(e,t,n){t.forEach((function(t){bt.fatal(!e[t],"already registered "+t,"plugins/file-reader/src/kernel/lib/file-reader-manager.ts:129"),e[t]=n}))}},{key:"_getReader",value:function(e,t,n){return t&&e[t]?e[t]:n?e[n=n.toLowerCase()]||e["."+n]:null}},{key:"destroy",value:function(){this._plugin=null,this._preReaders={},this._readers={}}}])}(),$z=HR({pluginName:"fileReader"});function Kz(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Yz()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Yz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Yz=function(){return!!e})()}var Gz=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Kz(this,t,arguments),Object.defineProperty(e,"_fileReaderManager",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){this._fileReaderManager=new qz(this),e.registerReader("Files",this._fileReaderManager),e.registerCommand("insertFiles",new Wz)}},{key:"fileReaderManager",get:function(){return this._fileReaderManager}}])}(ct);Object.defineProperty(Gz,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:$z.pluginName}),Object.defineProperty(Gz,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:Vz}),Object.defineProperty(Gz,"Service",{enumerable:!0,configurable:!0,writable:!0,value:Mz});var Jz=HR({pluginName:"focus",command:{focus:"focus"}});function Xz(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Qz()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Qz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Qz=function(){return!!e})()}var Zz=function(e){function t(){return(0,Ke.A)(this,t),Xz(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t){if("start"===t||"end"===t){var n,r=e.newJob();n="start"===t?wi.toStart(r.getSelection()):wi.toEnd(r.getSelection()),r.setSelection(n),e.commitJob(r)}}}])}(gt);function eW(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,tW()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function tW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(tW=function(){return!!e})()}Object.defineProperty(Zz,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Jz.command.focus});var nW=function(e){function t(){return(0,Ke.A)(this,t),eW(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){}}])}(ct);Object.defineProperty(nW,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:Jz.pluginName}),Object.defineProperty(nW,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[Zz]});var rW=HR({pluginName:"typography",command:{typography:"typography",paragraphSpacing:"paragraphSpacing"},service:{ITypographyKernelService:"ITypographyKernelService"}});function oW(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,iW()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function iW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(iW=function(){return!!e})()}var aW=function(e){function t(){var e;return(0,Ke.A)(this,t),e=oW(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(rt);Object.defineProperty(aW,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze(rW.service.ITypographyKernelService)});var lW=HR({pluginName:"fontsize",command:{fontsize:"fontsize",defaultFontsize:"defaultFontsize",clearDefaultFontsize:"clearDefaultFontsize"},toolbar:"fontsize"});function uW(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function cW(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,sW()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function sW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(sW=function(){return!!e})()}var dW=function(e){function t(){return(0,Ke.A)(this,t),cW(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e){var t,n,r=e.newJob(),o=r.getSelection(),i=1===o.ranges.length&&(o.firstRange.start.node.isTextNode()||o.firstRange.end.node.isTextNode()),a=[];i&&(a=o.ranges.map((function(e){return ao.markRange(r,e)})));var l=this.plugin.getDefaultFontsize()||(null===(n=null===(t=this.kernel.getService(aW.ID))||void 0===t?void 0:t.getTypographyDetail)||void 0===n?void 0:n.call(t).fontSize)||15;if(this._removeNodesAttribute(r,r.document.getNodesByName("#text"),l),this._removeNodesAttribute(r,r.document.getNodesByCategory(qe.InlineCard),l),i){var u=o.cloneByRange(a.map((function(e){return ao.recoverRange(r,e)})));r.setSelection(u)}return e.commitJob(r),!0}},{key:"_removeNodesAttribute",value:function(e,t,n){t=t.filter((function(e){var t;return(null===(t=e.attrs)||void 0===t?void 0:t.fontsize)===n&&e.isConnected&&e.parent}));var r,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return uW(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?uW(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(t);try{for(o.s();!(r=o.n()).done;){var i=r.value;i.parent&&i.isConnected&&Go.removeAttribute(e,Vt.selectNodeContents(i),["fontsize"])}}catch(e){o.e(e)}finally{o.f()}}}])}(gt);function fW(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,hW()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function hW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(hW=function(){return!!e})()}Object.defineProperty(dW,"ID",{enumerable:!0,configurable:!0,writable:!0,value:lW.command.clearDefaultFontsize});var pW=function(e){function t(){return(0,Ke.A)(this,t),fW(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getValue",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.plugin.getDefaultFontsize();return n?r||void 0:(bt.fatal(this.kernel.hasExtendMethod("getTypographyDetail"),"plugins/fontsize/src/kernel/default-fontsize-command.ts:17"),r||(null===(t=this.kernel.getService(aW.ID))||void 0===t?void 0:t.getTypographyDetail().fontSize))}},{key:"execute",value:function(e,t){return this.plugin.setDefaultFontsize(t)}}])}(gt);Object.defineProperty(pW,"ID",{enumerable:!0,configurable:!0,writable:!0,value:lW.command.defaultFontsize});var vW=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"needPersistent",value:function(){return!1}},{key:"formatValue",value:function(e,t){return e}},{key:"validate",value:function(e,t){return!0}},{key:"isDefault",value:function(e){return void 0===e}},{key:"onPersistent",value:function(e){return e}}])}(),mW=[12,13,14,15,16,19,22,24];function gW(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,bW()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function bW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bW=function(){return!!e})()}var yW=function(e){function t(){return(0,Ke.A)(this,t),gW(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"needPersistent",value:function(){return!0}},{key:"validate",value:function(e){return mW.includes(Number(e))||void 0===e}},{key:"isDefault",value:function(e){return void 0===e}}])}(vW);const wW={targets:[qe.Text,qe.InlineCard],values:function(e){var t=Number(e);return t>=12&&t<=48}};function AW(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,kW()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function kW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(kW=function(){return!!e})()}var _W=function(e){function t(){var e;return(0,Ke.A)(this,t),e=AW(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(rt);function CW(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,NW()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function NW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(NW=function(){return!!e})()}Object.defineProperty(_W,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze("IFontsizeService")});var OW=function(e){function t(){var e;return(0,Ke.A)(this,t),e=CW(this,t,arguments),Object.defineProperty(e,"attrName",{enumerable:!0,configurable:!0,writable:!0,value:"fontsize"}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){var n,r=e.getSelection();return wi.allBlockNodeHasCategory(r,[qe.Heading,St])?st:wi.isInCard(r)&&(null===(n=r.firstRange.commonAncestorContainer)||void 0===n?void 0:n.hasCategory(qe.InlineCard))?dt:Tr((0,Je.A)(t.prototype),"getState",this).call(this,e)}},{key:"getValue",value:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=Tr((0,Je.A)(t.prototype),"getValue",this).call(this,e);if(n)return r;if(null!==r)return r;var o=this.kernel.getService(_W.ID),i=this.kernel.getService(aW.ID);return bt.fatal(o,"plugins/fontsize/src/kernel/fontsize-command.ts:63"),bt.fatal(i,"plugins/fontsize/src/kernel/fontsize-command.ts:64"),this.plugin.getDefaultFontsize()||i.getTypographyDetail().fontSize}},{key:"execute",value:function(e,n){return Tr((0,Je.A)(t.prototype),"execute",this).call(this,e,n,qe.Heading)}}])}($l);Object.defineProperty(OW,"ID",{enumerable:!0,configurable:!0,writable:!0,value:lW.command.fontsize});var xW=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_defaultFontsize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),mW.includes(t)&&(this._defaultFontsize=t)}),[{key:"defaultFontsize",get:function(){return this._defaultFontsize||null}}])}();function EW(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,DW()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function DW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(DW=function(){return!!e})()}Object.defineProperty(xW,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"defaultFontsize"});var PW=function(e){function t(){return(0,Ke.A)(this,t),EW(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getDefaultFontsize",value:function(){return this.plugin.getDefaultFontsize()}},{key:"destroy",value:function(){}}])}(_W),RW=1/2.54,SW=.1*RW,TW=.25*SW,jW=/([a-zA-Z]+)\s*$/;function IW(e){return 72*e}var BW={PC:function(e){return 12*e},CM:function(e){return IW(e*RW)},MM:function(e){return IW(e*SW)},IN:IW,Q:function(e){return IW(e*TW)},PT:function(e){return e}};function MW(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:96;return t=t.toUpperCase(),BW[t]?function(e){return e*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:96)/72}(BW[t](e),n):"PX"===t?e:null}var FW=[12,13,14,15,16,19,22,24,29,32,40,48];function LW(e){if(isNaN(e)||e<=0)return null;if(e>=48)return 48;if(e<=12)return 12;for(var t=0,n=FW.length-1;n>t;)Math.abs(e-FW[t])<=Math.abs(e-FW[n])?n--:t++;return FW[n]}function UW(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,VW()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function VW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(VW=function(){return!!e})()}var HW={px:!0,in:!0,cm:!0,mm:!0,q:!0,pt:!0,pc:!0},zW=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=UW(this,t),Object.defineProperty(n,"_plugin",{enumerable:!0,configurable:!0,writable:!0,value:null}),n._plugin=e,n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"readStyle",value:function(e,t,n){var r=this._formatFontSize(n),o=this._plugin.getDocDefaultFontsize();r&&r!==o&&e.addAttr("fontsize",r)}},{key:"_formatFontSize",value:function(e){var t=function(e){var t=e.match(jW);return t&&t[1]}(e);if(!t)return null;if(!HW[t])return null;var n=parseFloat(e);return Number.isNaN(n)?null:(n>48?n=48:n<12&&(n=12),LW(MW(n,t)||n))}}])}(sB);Object.defineProperty(zW,"StyleNames",{enumerable:!0,configurable:!0,writable:!0,value:["font-size"]});var WW={9:12,10:13,11:14,12:16,14:19,16:22,18:24,22:29,24:32,30:40,36:48,1515:15},qW=/^lake-fontsize-(\d{1,4})$/,$W=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"read",value:function(e,t,n){n.split(" ").forEach((function(t){if(qW.test(t)){var n=WW[RegExp.$1];n&&e.setAttr("fontsize",n)}}))}}])}();function KW(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,YW()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function YW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(YW=function(){return!!e})()}var GW=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=KW(this,t),Object.defineProperty(n,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t,n){var r;if(n){if(e.inode.id){var o=null===(r=this.kernel.document)||void 0===r?void 0:r.getNodeById(e.inode.id);if(null==o?void 0:o.closest(qe.Heading))return}e.addStyle("font-size","".concat(n,"px"))}}}])}(vB);Object.defineProperty(GW,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:["fontsize"]});var JW={};Object.keys(WW).forEach((function(e){JW[WW[e]]=e}));var XW=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"write",value:function(e,t,n){var r=JW[n];r&&e.addClassName("lake-fontsize-".concat(r))}}])}();function QW(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,ZW()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function ZW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ZW=function(){return!!e})()}Object.defineProperty(XW,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:["fontsize"]});var eq=function(e){function t(){return(0,Ke.A)(this,t),QW(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this;e.registerAttr("fontsize",wW),this.editing.on("metachange",(function(e,n){var r=Number(null==e?void 0:e.defaultFontsize)||void 0,o=Number(null==n?void 0:n.defaultFontsize)||void 0;r!==o&&(t.kernel.emitPluginEvent("defaultFontsizeChange",{current:r,old:o}),t.kernel.emitEvent("defaultFontsizeChange",r,o))}))}},{key:"afterInit",value:function(){var e=this.kernel,t=e.getService(OI.ID);t&&t.registerMeta("defaultFontsize",new yW);var n=e.getService(wS.ID);n&&n.registerHTMLStyleReader(zW.StyleNames,new zW(this));var r=e.getService(_S.ID);r&&r.registerLakeAttrReader("class",new $W);var o=e.getService(wS.ID);o&&o.registerAttrHTMLWriter(GW.AttrNames,new GW(e));var i=e.getService(_S.ID);i&&i.registerLakeAttrWriter(XW.AttrNames,new XW)}},{key:"getDocDefaultFontsize",value:function(){var e;return this.getDefaultFontsize()||(null===(e=this.kernel.getService(aW.ID))||void 0===e?void 0:e.getTypographyDetail().fontSize)||15}},{key:"getDefaultFontsize",value:function(){var e;return Number(null===(e=this.kernel.getService(OI.ID))||void 0===e?void 0:e.getMeta("defaultFontsize"))||this.option.defaultFontsize}},{key:"setDefaultFontsize",value:function(e){var t,n;if(mW.includes(e)){var r=this.getDefaultFontsize();if(r===e)return!1;var o=e;e===(null===(t=this.kernel.getService(aW.ID))||void 0===t?void 0:t.getTypographyDetail().fontSize)&&(o=void 0),null===(n=this.kernel.getService(OI.ID))||void 0===n||n.setMeta("defaultFontsize",o),this.kernel.emitPluginEvent("defaultFontsizeChange",{current:o,old:r}),this.kernel.emitEvent("defaultFontsizeChange",o,r)}}}])}(ct);function tq(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,nq()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function nq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nq=function(){return!!e})()}Object.defineProperty(eq,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:lW.pluginName}),Object.defineProperty(eq,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:xW}),Object.defineProperty(eq,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[OW,pW,dW]}),Object.defineProperty(eq,"Service",{enumerable:!0,configurable:!0,writable:!0,value:PW});var rq=function(e){function t(){var e;return(0,Ke.A)(this,t),e=tq(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(rt);function oq(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,iq()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function iq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(iq=function(){return!!e})()}Object.defineProperty(rq,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze("IFormatKernelService")});var aq=function(e){function t(){var e;return(0,Ke.A)(this,t),e=oq(this,t,arguments),Object.defineProperty(e,"ignoreAttrNames",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"registerKeepBlockAttrName",value:function(e){var t=this;Array.isArray(e)?e.forEach((function(e){t.ignoreAttrNames.add(e)})):this.ignoreAttrNames.add(e)}},{key:"getKeepBlockAttrNames",value:function(){return Array.from(this.ignoreAttrNames)}},{key:"destroy",value:function(){this.ignoreAttrNames.clear()}}])}(rq),lq=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_formatData",{enumerable:!0,configurable:!0,writable:!0,value:t}),bt.fatal(t,"plugins/format-painter/src/kernel/paint-format-data.ts:12")}),[{key:"getData",value:function(){return this._formatData}}])}();function uq(e,t,n,r){return t.cloneByRange(t.ranges.map((function(t){return Go.replaceBlockNodeAndContentTextAttr(e,t,n.blockNodeName||void 0,n.blockNodeAttrs||void 0,n.textAttrs||void 0,r)})))}var cq=HR({pluginName:"formatPainter",command:{paintFormat:"paintFormat"},toolbar:"formatPainter"});function sq(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,dq()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function dq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(dq=function(){return!!e})()}var fq=function(e){function t(){return(0,Ke.A)(this,t),sq(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){var t=e.getSelection();return wi.isInCard(t)||wi.isInHole(t)?pt.UNAVAILABLE:pt.NOT_EXECUTED}},{key:"getValue",value:function(e){if(this.getState(e)===pt.UNAVAILABLE)return null;var t=e.getSelection(),n=t.firstRange.start.node,r=Ut.closest(t.firstRange.start.node,qe.Block),o=null,i=null;r&&function(e,t){if(t.isCollapsed)return!0;var n=Go.enlargeRangeInBlockNode(e,t.firstRange);return!(n.start.node!==n.end.node||!n.start.node.hasCategory(qe.Block)||0!==n.start.offset||n.end.offset!==n.end.node.childCount)}(e,t)&&(o=r.nodeName,i=Jn(r.attrs));var a=null;return n.isTextNode()&&(a=Jn(n.attrs)),new lq({blockNodeName:o,blockNodeAttrs:i,textAttrs:a})}},{key:"execute",value:function(e,t){if(!t)return!1;var n=e.newJob(),r=function(e,t,n,r){if(t.isCardSelection)return t;if(wi.isUnbreakable(t))return uq(e,t,n,r);var o=t.firstRange;if(o.collapsed&&o.start.node.hasCategory([qe.Hole,qe.TableHole]))return t;if(o.collapsed){if(!Ut.closest(o.start.node,qe.Block)){bt.fatal(o.start.node.hasCategory([qe.Root,qe.LikeRoot]),"plugins/format-painter/src/kernel/commands/helper/exec-format.ts:40");var i=wr.makeSureAtInput(e,o.start);return uq(e,e.newSelection(e.newRange(i)),n,r)}return uq(e,t,n,r)}var a=o.start.node,l=o.end.node,u=Ut.closest(a,qe.Block),c=Ut.closest(l,qe.Block);return u&&c&&u===c?function(e,t,n){var r=n.textAttrs,o=Go.splitTextContent(e,t.firstRange);return Go.walkRange(o,(function(t){if(t.isTextNode()){var n=t.attrs;Object.keys(n).forEach((function(n){e.removeAttribute(t,n)})),r&&Object.keys(r).forEach((function(n){e.setAttribute(t,n,r[n])}))}})),t.cloneByRange(o)}(e,t,n):uq(e,t,n,r)}(n,n.getSelection(),t.getData(),this.plugin.service.getKeepBlockAttrNames());return n.setSelection(r),e.commitJob(n),!0}}])}(gt);function hq(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,pq()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function pq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pq=function(){return!!e})()}Object.defineProperty(fq,"ID",{enumerable:!0,configurable:!0,writable:!0,value:cq.command.paintFormat});var vq=function(e){function t(){return(0,Ke.A)(this,t),hq(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){}}])}(ct);Object.defineProperty(vq,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:cq.pluginName}),Object.defineProperty(vq,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[fq]}),Object.defineProperty(vq,"Service",{enumerable:!0,configurable:!0,writable:!0,value:aq});const mq={collapsed:{targets:[qe.Heading],values:["true","false"]}};var gq=["color","bgColor","indexType"];function bq(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,yq()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function yq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(yq=function(){return!!e})()}var wq=function(e){function t(){var e;return(0,Ke.A)(this,t),e=bq(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(rt);function Aq(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,kq()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function kq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(kq=function(){return!!e})()}Object.defineProperty(wq,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze("IHeadingKernelService")});var _q=function(e,t){return t},Cq=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Aq(this,t,arguments),Object.defineProperty(e,"_keepAttrNames",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(e,"_valueProcessMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"keepAttrNames",get:function(){return this._keepAttrNames}},{key:"getValueProcess",value:function(e){return this._valueProcessMap.get(e)||_q}},{key:"registerStyleKeepBlockAttrs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_q;this._keepAttrNames.includes(e)||(this._valueProcessMap.set(e,t),this._keepAttrNames.push(e))}},{key:"destroy",value:function(){this._keepAttrNames.length=0}}])}(wq),Nq={anchor:!1,folding:!0},Oq=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Ww()({},Nq,t)}),[{key:"anchor",get:function(){return this._option.anchor}},{key:"folding",get:function(){return this._option.folding}}])}();function xq(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Eq()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Eq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Eq=function(){return!!e})()}Object.defineProperty(Oq,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"heading"});var Dq=function(e){function t(){return(0,Ke.A)(this,t),xq(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){var t=e.getSelection();return t.isCardSelection||t.isTableSelection?pt.UNAVAILABLE:t.firstRange.start.node.closest(qe.Heading)?pt.NOT_EXECUTED:pt.UNAVAILABLE}},{key:"execute",value:function(e){var t=e.newJob();if(this.getState(t)===pt.UNAVAILABLE)return e.cancelJob(t),!1;var n=t.getSelection();n.collapsed||(n=wi.deleteContent(t,n)),bt.fatal(n.collapsed,"plugins/heading/src/kernel/commands/heading-break-line-command.ts:54");var r,o=n.firstRange.start.node.closest(qe.Heading);if("true"===o.attrs.collapsed&&function(e,t){var n=e.node;if(!e.isAtEnd)return!1;for(;n;){if(n===t)return!0;if(!n.parent||n!==n.parent.lastChild)return!1;n=n.parent}return!1}(n.firstRange.start,o)){var i=t.createElement(o.nodeName),a=Ut.getLastNodeBelongsToHeadingNode(o);t.insertAfter(a.parent,i,a),r=t.newPosition(i,0)}else Qt(n.firstRange.start)?r=wr.breakLine(t,n.firstRange.start,!0):("true"===o.attrs.collapsed&&t.setAttribute(o,"collapsed","false"),r=wr.breakLine(t,n.firstRange.start));return t.setSelection([t.newRange(r)]),e.commitJob(t),!0}}])}(gt);function Pq(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Rq(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Sq()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Sq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Sq=function(){return!!e})()}Object.defineProperty(Dq,"ID",{enumerable:!0,configurable:!0,writable:!0,value:"headingBreakLine"});var Tq=function(e){function t(){return(0,Ke.A)(this,t),Rq(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getValue",value:function(e,t){var n=e.getNodeById(t);if(!n||!n.hasCategory(qe.Heading))return!1;var r,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Pq(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pq(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(this.plugin.getOtherSelection());try{for(o.s();!(r=o.n()).done;){var i=r.value.selection.firstRange,a=i.start,l=i.end;if(Ut.isBelongsToHeadingNode(a.node,n)||Ut.isBelongsToHeadingNode(l.node,n))return!1}}catch(e){o.e(e)}finally{o.f()}return!0}},{key:"execute",value:function(){return!0}}])}(gt);function jq(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Iq(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Bq()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Bq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Bq=function(){return!!e})()}Object.defineProperty(Tq,"ID",{enumerable:!0,configurable:!0,writable:!0,value:"headingCollapsable"});var Mq=function(e){function t(){return(0,Ke.A)(this,t),Iq(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t){var n=e.newJob(),r=n.getNodeById(t);if(!r||!r.hasCategory(qe.Heading))return e.cancelJob(n),!1;var o,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return jq(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jq(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(this.plugin.getOtherSelection());try{for(i.s();!(o=i.n()).done;){var a=o.value.selection.firstRange,l=a.start,u=a.end;if(Ut.isBelongsToHeadingNode(l.node,r)||Ut.isBelongsToHeadingNode(u.node,r))return e.cancelJob(n),!1}}catch(e){i.e(e)}finally{i.f()}var c="true"===r.attrs.collapsed;if(n.setAttribute(r,"collapsed",c?"false":"true"),!c){var s=n.getSelection().firstRange,d=s.start,f=s.end;if(Ut.isBelongsToHeadingNode(d.node,r)||Ut.isBelongsToHeadingNode(f.node,r)){var h=n.selectNodeContents(r);n.setSelection([n.newRange(h.firstRange.end)])}}return e.commitJob(n),!0}}])}(gt);function Fq(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Lq(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Uq()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Uq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Uq=function(){return!!e})()}Object.defineProperty(Mq,"ID",{enumerable:!0,configurable:!0,writable:!0,value:"headingCollapsed"});var Vq=function(e){function t(){return(0,Ke.A)(this,t),Lq(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t){var n=e.newJob(),r=n.getNodeById(t);if(!r)return e.cancelJob(n),!1;var o,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Fq(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fq(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(Ut.getAncestorHeadingNodes(r));try{for(i.s();!(o=i.n()).done;){var a=o.value;"true"===a.attrs.collapsed&&n.setAttribute(a,"collapsed","false")}}catch(e){i.e(e)}finally{i.f()}return e.commitJob(n),!0}}])}(gt);function Hq(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,zq()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function zq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(zq=function(){return!!e})()}Object.defineProperty(Vq,"ID",{enumerable:!0,configurable:!0,writable:!0,value:"headingUnfold"});var Wq=function(e){function t(){return(0,Ke.A)(this,t),Hq(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){if(Tr((0,Je.A)(t.prototype),"getState",this).call(this,e)===st)return st;var n=e.getSelection().firstRange,r=n.start,o=n.end;return r.node.closest(qe.OnlyText)||o.node.closest(qe.OnlyText)?st:dt}},{key:"getValue",value:function(e){var t=!1,n=new Set;return wi.fullWalkSelection(e.getSelection(),{enter:function(e){return!t&&(e.hasCategory([qe.Hole])?(t=!0,!1):(e.hasCategory(qe.Block)&&n.add(e.nodeName),n.size>1?(t=!0,!1):void 0))}}),t||n.size>1?"mixed":Array.from(n)[0]||"p"}},{key:"execute",value:function(e,t){var n=this,r=e.newJob(),o=r.getSelection(),i=wi.replaceBlockNode(r,o,(function(e,r){var o={};return Object.keys((null==r?void 0:r.attrs)||{}).forEach((function(i){var a,l;if(null===(a=n.plugin.service)||void 0===a?void 0:a.keepAttrNames.includes(i)){var u=n.plugin.service.getValueProcess(i)(e,null===(l=null==r?void 0:r.attrs)||void 0===l?void 0:l[i]);e.acceptAttr(t,i,u)&&(o[i]=u)}})),(null==r?void 0:r.hasCategory(qe.Heading))?e.createElement(t,o,r.id):e.createElement(t,o)}),!1,gq);return wi.unCollapseAll(r,o),r.setSelection(i),e.commitJob(r),!0}}])}(Bl);Object.defineProperty(Wq,"ID",{enumerable:!0,configurable:!0,writable:!0,value:"style"});var qq=HR({pluginName:"heading",toolbar:{style:"style"},cardSelect:{h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6"}}),$q=o(3346),Kq=o.n($q),Yq=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e),Object.defineProperty(this,"_counters",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}),[{key:"id",value:function(e){if("string"!=typeof e)return"";var t;t=e.length<=64&&/^[\w\s\.\-]+$/.test(e)?e:Kq()(e).slice(0,8);var n=this._counters.get(t)||0;return this._counters.set(t,n+1),n>0&&(t="".concat(t,"-").concat(n)),t.trim().replace(/\s+/g,"-").toLowerCase()}}])}();function Gq(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Jq()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Jq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Jq=function(){return!!e})()}var Xq=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=Gq(this,t),Object.defineProperty(n,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_cacheMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(n,"_headingIdCalculator",{enumerable:!0,configurable:!0,writable:!0,value:null}),n._kernel=e,n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getHeadingIdCalculator",value:function(e){return this._cacheMap.has(e)||(this._headingIdCalculator=new Yq,this._cacheMap.clear(),this._cacheMap.set(e,!0)),this._headingIdCalculator||(this._headingIdCalculator=new Yq),this._headingIdCalculator}},{key:"readNode",value:function(e,t){var n=t.name;e.setNode(ar.createElement(n,{},t.attrs.id)),e.setIgnoreAttrs("bold","fontsize")}},{key:"leaveNode",value:function(e){var t,n=e.getNode();if(n&&!n.id&&e.rootContext){var r=this.getHeadingIdCalculator(e.rootContext),o="";null===(t=null==n?void 0:n.children)||void 0===t||t.forEach((function(e){"text"===e.type?o+=e.data||"":o+=" "})),n.id=r.id(o)}}}])}(Ej);Object.defineProperty(Xq,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["h1","h2","h3","h4","h5","h6"]});var Qq=function(){return(0,$e.A)((function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,Ke.A)(this,e),Object.defineProperty(this,"_allowFolding",{enumerable:!0,configurable:!0,writable:!0,value:t})}),[{key:"destroy",value:function(){}},{key:"read",value:function(e,t){var n;this._allowFolding||null===(n=t.attrs)||void 0===n||delete n.collapsed,e.setNode(t)}}])}();Object.defineProperty(Qq,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["h1","h2","h3","h4","h5","h6"]});var Zq=function(){return(0,$e.A)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,Ke.A)(this,e),Object.defineProperty(this,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_allowFolding",{enumerable:!0,configurable:!0,writable:!0,value:n})}),[{key:"read",value:function(e,t){var n,r={};"true"===(null===(n=t.attrs)||void 0===n?void 0:n.collapsed)&&this._allowFolding&&(r.collapsed="true"),e.setNode(ar.createElement(t.name,r))}}])}();Object.defineProperty(Zq,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["h1","h2","h3","h4","h5","h6"]});var e$,t$="traditional",n$="classic";!function(e){e.TRADITIONAL="traditional",e.CLASSIC="classic"}(e$||(e$={}));const r$=(0,Ha.A)((0,Ha.A)({},e$.TRADITIONAL,{h1:{fontSize:"28px",lineHeight:"36px",margin:"7px 0"},h2:{fontSize:"24px",lineHeight:"32px",margin:"7px 0"},h3:{fontSize:"20",lineHeight:"28px",margin:"7px 0"},h4:{fontSize:"16px",lineHeight:"24px",margin:"7px 0"},h5:{fontSize:"15px",lineHeight:"24px",margin:"7px 0"},h6:{fontSize:"15px",lineHeight:"24px",margin:"7px 0",fontWeight:"normal"}}),e$.CLASSIC,{h1:{fontSize:"28px",lineHeight:"36px",margin:"26px 0 10px 0"},h2:{fontSize:"24px",lineHeight:"32px",margin:"21px 0 5px 0"},h3:{fontSize:"20",lineHeight:"28px",margin:"16px 0 5px 0"},h4:{fontSize:"16px",lineHeight:"24px",margin:"10px 0 5px 0"},h5:{fontSize:"15px",lineHeight:"24px",margin:"8px 0 5px 0"},h6:{fontSize:"15px",lineHeight:"24px",margin:"8px 0 5px 0",fontWeight:"normal"}});function o$(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,i$()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function i$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(i$=function(){return!!e})()}var a$=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=o$(this,t),Object.defineProperty(n,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n._kernel=e,n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){var n,r=t.name;e.isInlineMode()&&(n=this._getTypography()===e$.TRADITIONAL?Object.assign({},r$[e$.TRADITIONAL][r]):Object.assign({},r$[e$.CLASSIC][r])),e.setNode(e.createElement(r,{style:n}))}},{key:"_getTypography",value:function(){return this._kernel.hasExtendMethod("getTypographyName")?this._kernel.getTypographyName():e$.TRADITIONAL}}])}(lT);function l$(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,u$()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function u$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(u$=function(){return!!e})()}Object.defineProperty(a$,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["h1","h2","h3","h4","h5","h6"]});var c$=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,Ke.A)(this,t),e=l$(this,t),Object.defineProperty(e,"_allowFolding",{enumerable:!0,configurable:!0,writable:!0,value:n}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){var n,r=e.createElement(t.name);e.setNode(r),this._allowFolding&&"true"===(null===(n=t.attrs)||void 0===n?void 0:n.collapsed)&&e.setAttr("collapsed","true")}}])}(vT);function s$(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,d$()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function d$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(d$=function(){return!!e})()}Object.defineProperty(c$,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["h1","h2","h3","h4","h5","h6"]});var f$={"#":"h1","##":"h2","###":"h3","####":"h4","#####":"h5","######":"h6"},h$=function(e){function t(){var e;return(0,Ke.A)(this,t),e=s$(this,t,arguments),Object.defineProperty(e,"_selections",{enumerable:!0,configurable:!0,writable:!0,value:[]}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t,n,r=this;e.registerElement((t=this,n={bold:function(e){return!e},fontsize:function(e,n,r){return e||t.getHeadingFontSize(r)}},{h1:{id:qa,parents:["#root",qe.LikeRoot],category:[qe.Block,qe.Heading,qe.AttrContext,qe.Clean,qe.TextContainer,qe.Brick],contextAttr:n},h2:{id:qa,parents:["#root",qe.LikeRoot],category:[qe.Block,qe.Heading,qe.AttrContext,qe.Clean,qe.TextContainer,qe.Brick],contextAttr:n},h3:{id:qa,parents:["#root",qe.LikeRoot],category:[qe.Block,qe.Heading,qe.AttrContext,qe.Clean,qe.TextContainer,qe.Brick],contextAttr:n},h4:{id:qa,parents:["#root",qe.LikeRoot],category:[qe.Block,qe.Heading,qe.AttrContext,qe.Clean,qe.TextContainer,qe.Brick],contextAttr:n},h5:{id:qa,parents:["#root",qe.LikeRoot],category:[qe.Block,qe.Heading,qe.AttrContext,qe.Clean,qe.TextContainer,qe.Brick],contextAttr:n},h6:{id:qa,parents:["#root",qe.LikeRoot],category:[qe.Block,qe.Heading,qe.AttrContext,qe.Clean,qe.TextContainer,qe.Brick],contextAttr:n}})),e.registerAttr(mq),xc(this,this.editing,"collabSelectionChange",(function(e){var t=e.selections;r._selections=t}))}},{key:"afterInit",value:function(){var e=this,t=this.kernel,n=t.getService(wS.ID);n&&n.registerHTMLNodeReader(Xq.NodeNames,new Xq(t));var r=t.getService(wS.ID);r&&r.registerNodeHTMLWriter(a$.NodeNames,new a$(t));var o=t.getService(RT.ID);o&&o.registerINodeNodeReader(Qq.NodeNames,new Qq(this.option.folding));var i=t.getService(_S.ID);i&&i.registerLakeNodeReader(Zq.NodeNames,new Zq(t,this.option.folding));var a=t.getService(_S.ID);a&&a.registerLakeNodeWriter(c$.NodeNames,new c$(this.option.folding));var l=t.getService(DS.ID);l&&Object.keys(f$).forEach((function(t){var n=f$[t];l.registerMarkdownMatcher(CS.whiteSpace,new NS(e.editing,t,(function(t,r,o){var i=t.newSelection([t.newRange(t.newPosition(o,0))]);i=r.nodeName!==n?wi.replaceBlockNode(t,i,(function(t,r){var o={};return Object.keys(null==r?void 0:r.attrs).forEach((function(i){var a,l;if(null===(a=e.service)||void 0===a?void 0:a.keepAttrNames.includes(i)){var u=e.service.getValueProcess(i)(t,null===(l=null==r?void 0:r.attrs)||void 0===l?void 0:l[i]);t.acceptAttr(n,i,u)&&(o[i]=u)}})),(null==r?void 0:r.hasCategory(qe.Heading))?t.createElement(n,o,r.id):t.createElement(n,o)}),!1,gq):wi.replaceBlockNode(t,i,t.createElement("p"),!1,gq),wi.unCollapseAll(t,i),t.setSelection(i)})))}))}},{key:"getOtherSelection",value:function(){return this._selections}},{key:"destroy",value:function(){this._selections=[]}},{key:"getHeadingFontSize",value:function(e){return bt.fatal(this.kernel.hasExtendMethod("getTypographyDetail"),"plugins/heading/src/kernel/index.ts:189"),this.kernel.getTypographyDetail()[e]}}])}(ct);function p$(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,v$()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function v$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v$=function(){return!!e})()}Object.defineProperty(h$,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:qq.pluginName}),Object.defineProperty(h$,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:Oq}),Object.defineProperty(h$,"Service",{enumerable:!0,configurable:!0,writable:!0,value:Cq}),Object.defineProperty(h$,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[Wq,Mq,Tq,Dq,Vq]});var m$=function(e){function t(){var e;return(0,Ke.A)(this,t),e=p$(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(rt);function g$(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,b$()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function b$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b$=function(){return!!e})()}Object.defineProperty(m$,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze("IHistoryService")});var y$=function(e){function t(){var e;return(0,Ke.A)(this,t),e=g$(this,t,arguments),Object.defineProperty(e,"_context",{enumerable:!0,configurable:!0,writable:!0,value:e.plugin._context}),Object.defineProperty(e,"disableHistory",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t,n;null===(n=(t=e._context).destroy)||void 0===n||n.call(t),e.plugin._stack.clear(),delete e._context.destroy}}),Object.defineProperty(e,"lockHistory",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.plugin._stack.lock()}}),Object.defineProperty(e,"unlockHistory",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.plugin._stack.unlock()}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){}}])}(m$),w$=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e),Object.defineProperty(this,"_index",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"_lockIndex",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"_preventForward",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_capacity",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_stack",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_frameClosed",{enumerable:!0,configurable:!0,writable:!0,value:!1})}),[{key:"lock",value:function(){this._preventForward=!0,this._lockIndex=this._index}},{key:"unlock",value:function(){this._preventForward=!1,this._lockIndex=-1}},{key:"clear",value:function(){this._index=-1,this._lockIndex=-1,this._capacity=0,this._stack=[],this._frameClosed=!1}},{key:"canForward",value:function(){return this._index+1<this._capacity&&!this._preventForward}},{key:"canBackward",value:function(){return this._index>-1&&this._index>this._lockIndex}},{key:"add",value:function(e){this._addFrame(e),this._frameClosed=!0}},{key:"append",value:function(e){if(this._frameClosed||-1===this._index)return this._addFrame(e),void(this._frameClosed=!1);var t=this._stack[this._index];t.operations=t.operations.concat(e.operations),t.selection=e.selection}},{key:"closeFrame",value:function(){this._frameClosed=!0}},{key:"_addFrame",value:function(e){this._index++,this._preventForward=!1,this._stack[this._index]=e,this._capacity=this._index+1}},{key:"forward",value:function(){return this.canForward()?(this._frameClosed=!0,this._index++,this._stack[this._index]):null}},{key:"backward",value:function(){if(!this.canBackward())return null;this._frameClosed=!0;var e=this._stack[this._index];return this._index--,e}},{key:"rollback",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(bt.fatal(e>=1,"plugins/history/src/kernel/stack.ts:98"),-1===this._index)return null;this._frameClosed=!0;for(var t=[],n=0;n<e;n++)t.push(this._stack.pop()),this._index--;return this._capacity=this._index+1,t}}])}(),A$=HR({pluginName:"history",command:{redo:"redo",undo:"undo",rollbackHistory:"rollbackHistory"},toolbar:{redo:"redo",undo:"undo"}});function k$(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,_$()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function _$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_$=function(){return!!e})()}var C$=function(e){function t(){return(0,Ke.A)(this,t),k$(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(){return this.plugin._stack.canForward()?pt.NOT_EXECUTED:pt.UNAVAILABLE}},{key:"execute",value:function(e){var t=this.plugin._stack;if(!t.canForward())return!1;var n=t.forward(),r=e.newJob(We.History);return n.operations.forEach((function(e){return e.apply(r)})),r.dangerDirectSetSelection(n.selection),e.commitJob(r),!0}}])}(gt);function N$(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,O$()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function O$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(O$=function(){return!!e})()}Object.defineProperty(C$,"ID",{enumerable:!0,configurable:!0,writable:!0,value:A$.command.redo});var x$=function(e){function t(){var e;return(0,Ke.A)(this,t),e=N$(this,t,arguments),Object.defineProperty(e,"_stack",{enumerable:!0,configurable:!0,writable:!0,value:e.plugin._stack}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(){return this._stack.canBackward()?pt.NOT_EXECUTED:pt.UNAVAILABLE}},{key:"execute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this._stack;if(!n.canBackward())return!1;var r=n.rollback(t),o=e.newJob(We.History);return r.forEach((function(e){e.operations.slice().reverse().forEach((function(e){return e.reverse(o)})),o.dangerDirectSetSelection(e.previousSelection)})),e.commitJob(o),!0}}])}(gt);function E$(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,D$()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function D$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(D$=function(){return!!e})()}Object.defineProperty(x$,"ID",{enumerable:!0,configurable:!0,writable:!0,value:A$.command.rollbackHistory});var P$=function(e){function t(){var e;return(0,Ke.A)(this,t),e=E$(this,t,arguments),Object.defineProperty(e,"_stack",{enumerable:!0,configurable:!0,writable:!0,value:e.plugin._stack}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(){return this._stack.canBackward()?pt.NOT_EXECUTED:pt.UNAVAILABLE}},{key:"execute",value:function(e){var t=this._stack;if(!t.canBackward())return!1;var n=t.backward(),r=e.newJob(We.History);return n.operations.slice().reverse().forEach((function(e){return e.reverse(r)})),r.dangerDirectSetSelection(n.previousSelection),e.commitJob(r),!0}}])}(gt);function R$(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,S$()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function S$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(S$=function(){return!!e})()}Object.defineProperty(P$,"ID",{enumerable:!0,configurable:!0,writable:!0,value:A$.command.undo});var T$=function(e){function t(){var e;return(0,Ke.A)(this,t),e=R$(this,t,arguments),Object.defineProperty(e,"_stack",{enumerable:!0,configurable:!0,writable:!0,value:new w$}),Object.defineProperty(e,"_context",{enumerable:!0,configurable:!0,writable:!0,value:{destroy:function(){}}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){var n=this,r=this._stack,o=this._context;xc(o,e,"document.destroy",(function(){n._stack.clear()})),xc(o,t,"contentchange",(function(e){"user"===e.mode&&(e.isCommitted?r.add({operations:e.operations,selection:e.selection,previousSelection:e.previousSelection}):r.append({operations:e.operations,selection:e.selection,previousSelection:e.previousSelection}))})),xc(o,t,"selectionchange",(function(e){e.pure&&n._stack.closeFrame()}))}},{key:"disable",value:function(){}}])}(ct);Object.defineProperty(T$,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:A$.pluginName}),Object.defineProperty(T$,"Service",{enumerable:!0,configurable:!0,writable:!0,value:y$}),Object.defineProperty(T$,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[C$,P$,x$]});var j$=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_state",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_parentNode",{enumerable:!0,configurable:!0,writable:!0,value:null})}),[{key:"destroy",value:function(){}},{key:"from",get:function(){var e;return null===(e=this._option)||void 0===e?void 0:e.from}},{key:"self",get:function(){var e;return null===(e=this._option)||void 0===e?void 0:e.self}},{key:"parentNode",get:function(){return this._parentNode}},{key:"hasState",value:function(e){return!!this._state[e]}},{key:"getState",value:function(e){return this._state[e]}},{key:"setState",value:function(e,t){this._state[e]=t}}])}();function I$(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,B$()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function B$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(B$=function(){return!!e})()}var M$=function(e){function t(){return(0,Ke.A)(this,t),I$(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getChildContext",value:function(e){var n=new t(Object.assign({},this._option));return n._state=this._state,n._parentNode=e,n}}])}(j$);function F$(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,L$()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function L$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(L$=function(){return!!e})()}var U$=function(e){function t(){var e;return(0,Ke.A)(this,t),e=F$(this,t,arguments),Object.defineProperty(e,"_node",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getChildContext",value:function(e){var n=new t(Object.assign({},this._option));return n._state=this._state,n._parentNode=e,n}},{key:"node",get:function(){return this._node}},{key:"setNode",value:function(e){this._node=e}}])}(j$),V$=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_cardReader",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_cardPreReaders",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_nodePreReaders",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_nodeReaders",{enumerable:!0,configurable:!0,writable:!0,value:{}})}),[{key:"destroy",value:function(){delete this._kernel,delete this._cardReader,delete this._cardPreReaders,delete this._nodePreReaders,delete this._nodeReaders}},{key:"registerNodePreReader",value:function(e,t){var n=this;Array.isArray(e)||(e=[e]),e.forEach((function(e){n._nodePreReaders[e]||(n._nodePreReaders[e]=[]),n._nodePreReaders[e].push(t)}))}},{key:"registerNodeReader",value:function(e,t){var n=this;Array.isArray(e)||(e=[e]),e.forEach((function(e){n._nodeReaders[e]||(n._nodeReaders[e]=[]),n._nodeReaders[e].push(t)}))}},{key:"registerCardPreReader",value:function(e,t){this._cardPreReaders[e]=t}},{key:"registerCardReader",value:function(e,t){this._cardReader[e]=t}},{key:"read",value:function(e,t,n){var r,o,i=this;o="string"==typeof t?JSON.parse(t):t;var a=Array.isArray(o);a||(o=[o]);var l=ar.createFragment(o);return o.map((function(e){return i._walkNode(new M$(n),new U$(n),l,e)})),(null===(r=l.children)||void 0===r?void 0:r.length)?a?(console.warn("Deprecated, fix me"),l.children):l.children[0]:null}},{key:"_walkNode",value:function(e,t,n,r){if(r.id&&!bf(r.id)&&delete r.id,"text"!==r.type)return"card"!==r.type?this._walkElement(e,t,n,r):this._walkCard(e,t,n,r)}},{key:"_walkElement",value:function(e,t,n,r){var o=this,i=r.name,a=this._nodePreReaders[i];if(a&&a.some((function(t){return!1===t.read(e.getChildContext(n),r)})))ar.removeChild(n,r);else{var l=this._nodeReaders[i];l&&l.some((function(e){return!1===e.read(t.getChildContext(n),r)}))?ar.removeChild(n,r):r.children&&r.children.forEach((function(i){o._walkNode(e.getChildContext(n),t.getChildContext(n),r,i)}))}}},{key:"_walkCard",value:function(e,t,n,r){var o=r.name,i=this._cardPreReaders[o];i&&!1===i.read(e.getChildContext(n),r)&&ar.removeChild(n,r);var a=this._cardReader[o]||this._cardReader["*"];if(a){var l=t.getChildContext(n);if(!1===a.read(l,r)||l.node){var u=n.children.indexOf(r);l.node?n.children.splice(u,1,l.node):n.children.splice(u,1)}}else ar.removeChild(n,r)}}])}();function H$(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,z$()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function z$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(z$=function(){return!!e})()}var W$=function(e){function t(){var e;return(0,Ke.A)(this,t),e=H$(this,t,arguments),Object.defineProperty(e,"reader",{enumerable:!0,configurable:!0,writable:!0,value:new V$(e.kernel)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){delete this.reader}},{key:"registerINodeCardPreReader",value:function(e,t){this.reader.registerCardPreReader(e,t)}},{key:"registerINodeCardReader",value:function(e,t){this.reader.registerCardReader(e,t)}},{key:"registerINodeNodePreReader",value:function(e,t){this.reader.registerNodePreReader(e,t)}},{key:"registerINodeNodeReader",value:function(e,t){this.reader.registerNodeReader(e,t)}}])}(RT),q$=HR({pluginName:"hr",cardName:"hr",command:{hr:"hr"},toolbar:"hr",cardSelect:"hr"});function $$(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,K$()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function K$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(K$=function(){return!!e})()}var Y$=function(e){function t(){return(0,Ke.A)(this,t),$$(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){var t=e.getSelection();return wi.isUnbreakable(t)?pt.UNAVAILABLE:pt.NOT_EXECUTED}},{key:"execute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.newJob();if(this.getState(r)===pt.UNAVAILABLE)return e.cancelJob(r),!1;var o=Ai.insertCardNode(r,r.getSelection(),"hr",t),i=o.selection,a=o.cardNode;return n?r.setSelection([r.newRange(r.newPosition(a,0))]):r.setSelection(i),e.commitJob(r),a.id}}])}(gt);function G$(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,J$()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function J$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(J$=function(){return!!e})()}Object.defineProperty(Y$,"ID",{enumerable:!0,configurable:!0,writable:!0,value:q$.command.hr});var X$=function(e){function t(){return(0,Ke.A)(this,t),G$(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"readNode",value:function(e){e.setNode(ar.createCard("hr")),e.freeze()}}])}(Ej);function Q$(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Z$()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Z$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Z$=function(){return!!e})()}Object.defineProperty(X$,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["hr"]});var eK=function(e){function t(){return(0,Ke.A)(this,t),Q$(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Ij);function tK(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,nK()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function nK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nK=function(){return!!e})()}Object.defineProperty(eK,"CardName",{enumerable:!0,configurable:!0,writable:!0,value:"hr"});var rK=function(e){function t(){return(0,Ke.A)(this,t),tK(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t,n,r){var o=ar.createCard("hr",n,r);e.setNode(o)}}])}(Lj);function oK(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,iK()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function iK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(iK=function(){return!!e})()}var aK=function(e){function t(){return(0,Ke.A)(this,t),oK(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e){var t={};e.isInlineMode()&&(t={backgroundColor:"#e8e8e8",border:"1px solid transparent",margin:"18px 0"}),e.setNode(e.createElement("hr",{className:"ne-hr",style:t}))}}])}(lT);function lK(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,uK()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function uK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(uK=function(){return!!e})()}Object.defineProperty(aK,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["hr"]});var cK=function(e){function t(){return(0,Ke.A)(this,t),lK(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t,n,r){var o=e.createBlockCard("hr",n,r);e.setNode(o)}}])}($j),sK=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"write",value:function(e){return e.append("---\n\n"),!0}}])}();function dK(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,fK()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function fK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(fK=function(){return!!e})()}var hK=function(e){function t(){return(0,Ke.A)(this,t),dK(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerBlockCard(t.cardName)}},{key:"afterInit",value:function(){var e,t,n,r,o,i,a,l=this.kernel;null===(e=l.getService(wS.ID))||void 0===e||e.registerHTMLNodeReader(X$.NodeNames,new X$),null===(t=l.getService(W$.ID))||void 0===t||t.registerINodeCardReader(eK.CardName,new eK),null===(n=l.getService(wS.ID))||void 0===n||n.registerNodeHTMLWriter(aK.NodeNames,new aK),null===(r=l.getService(_S.ID))||void 0===r||r.registerLakeCardReader("hr",new rK),null===(o=l.getService(_S.ID))||void 0===o||o.registerLakeCardWriter("hr",new cK),null===(i=l.getService(tI.ID))||void 0===i||i.registerMarkdownWriter("hr",new sK),null===(a=l.getService(DS.ID))||void 0===a||a.registerMarkdownMatcher(CS.enter,new NS(this.editing,/^[-*_—*]{3,6}$/,(function(e,t){var n=Ai.insertCardNode(e,e.newSelection([e.newRange(e.newPosition(t,0))]),"hr",null).cardNode;e.setSelection(e.newSelection(e.newRange(e.newPosition(n.parentNode,n.offset+1))))})))}}])}(ct);function pK(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,vK()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function vK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vK=function(){return!!e})()}Object.defineProperty(hK,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:q$.pluginName}),Object.defineProperty(hK,"cardName",{enumerable:!0,configurable:!0,writable:!0,value:"hr"}),Object.defineProperty(hK,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[Y$]});var mK=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=pK(this,t),Object.defineProperty(n,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n._kernel=e,n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t){return this._kernel.readData("text/html",e,t)}},{key:"write",value:function(e,t){var n=e.document.getINode(t);return this._kernel.writeData("text/html",n,t)}}])}(Ht);function gK(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,bK()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function bK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bK=function(){return!!e})()}var yK=function(e){function t(){return(0,Ke.A)(this,t),gK(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"reader",get:function(){return this.plugin.htmlReader}},{key:"writer",get:function(){return this.plugin.htmlWriter}},{key:"destroy",value:function(){}},{key:"read",value:function(e,t,n){return this.reader.read(e,t,n)}},{key:"registerHTMLAttributeReader",value:function(e,t){this.reader.registerAttrReader(e,t)}},{key:"registerHTMLNodeReader",value:function(e,t){this.reader.registerNodeReader(e,t)}},{key:"registerPreHTMLAttributeReader",value:function(e,t){this.reader.registerPreAttrReader(e,t)}},{key:"registerPreHTMLNodeReader",value:function(e,t){this.reader.registerPreNodeReader(e,t)}},{key:"registerPreHTMLStyleReader",value:function(e,t){this.reader.registerPreStyleReader(e,t)}},{key:"registerHTMLStyleReader",value:function(e,t){this.reader.registerStyleReader(e,t)}},{key:"registerAttrHTMLWriter",value:function(e,t){this.writer.registerAttrWriter(e,t)}},{key:"registerNodeHTMLWriter",value:function(e,t){this.writer.registerNodeWriter(e,t)}},{key:"registerPreTextWriter",value:function(e){this.writer.registerPreTextWriter(e)}}])}(wS),wK=HR({pluginName:"htmlDataSource"});function AK(e,t,n){Array.from(e).forEach((function(r){kK(_K(),{children:e},r,t,n)}))}function kK(e,t,n,r,o){var i,a,l,u,c;if("#text"===n.name){var s=n.data;if(""===s||(null==e?void 0:e.isStrictModel())&&""===s.replace(/\s/g,(function(e){return"\t"===e||"\n"===e||" "===e?e:""}))){var d=t.children.indexOf(n);if(bt.fatal(-1!==d,"plugins/html-data-source/src/kernel/lib/reader/helpers/walk-html-nodes.ts:58"),0===d)return void(null===(i=t.children)||void 0===i||i.splice(d,1));if("#text"!==(null===(l=null===(a=t.children)||void 0===a?void 0:a[d-1])||void 0===l?void 0:l.name))return void(null===(u=t.children)||void 0===u||u.splice(d,1))}}if(!(null===(c=n.attrs)||void 0===c?void 0:c["lake-read-ignore"])){var f=_K(e);r(f,n),f.isStopped()?o(n):n.children?(Array.from(n.children).forEach((function(e){kK(f,n,e,r,o)})),o(n)):o(n)}}function _K(e){var t=!1,n=!e||e.isStrictModel();return{stop:function(){t=!0},isStopped:function(){return t},setStrictMode:function(e){n=!!e},isStrictModel:function(){return n}}}var CK="#block",NK={head:!0,link:!0,meta:!0,script:!0},OK=function(){function e(t,n,r,o){(0,Ke.A)(this,e),Object.defineProperty(this,"_rootContext",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"_strictMode",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_meta",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_inSkipMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_skipNode",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_parentNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_walkContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_state",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_attrs",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_ignoreAttrs",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_mainNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_contentNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_anonymousNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_leaveHook",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_isFreeze",{enumerable:!0,configurable:!0,writable:!0,value:!1}),bt.fatal(n,"plugins/html-data-source/src/kernel/lib/reader/helpers/transform.ts:53"),this._kernel=t,this._parentNode=n,this._walkContext=r}return(0,$e.A)(e,[{key:"theme",get:function(){return this._kernel.theme}},{key:"parentNode",get:function(){return this._parentNode}},{key:"rootContext",get:function(){return this._rootContext}},{key:"newChildContext",value:function(t,n){var r=new e(this._kernel,this._contentNode||this._anonymousNode,t,n);return r._attrs=Object.assign(Object.assign({},this._contentNode?this._contentNode.attrs:{}),this._attrs),r._state=Object.assign({},this._state),r._meta=this._meta,r._skipNode=this._skipNode,r._strictMode=this._strictMode,r}},{key:"setSkipMode",value:function(e){this._inSkipMode=e}},{key:"getSkipMode",value:function(){return this._inSkipMode}},{key:"addSkipNode",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t){e._skipNode.push(t)}))}},{key:"testIsSkipNode",value:function(e){return this._skipNode.indexOf(e)>-1}},{key:"removeSkipNode",value:function(e){var t=this._skipNode.indexOf(e);return t>-1&&this._skipNode.splice(t,1),t>-1}},{key:"getMeta",value:function(e){return this._meta[e]}},{key:"setMeta",value:function(e,t){this._meta[e]=t}},{key:"getState",value:function(e,t){return ir(this._state,e)?this._state[e]:t}},{key:"freeze",value:function(){this._isFreeze=!0}},{key:"setStrictMode",value:function(e){var t;e=!!e,this._strictMode=e,null===(t=this._walkContext)||void 0===t||t.setStrictMode(e)}},{key:"isStrictMode",value:function(){return this._strictMode}},{key:"setIgnoreAttrs",value:function(){var e=this;this._ignoreAttrs||(this._ignoreAttrs=new Set);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t){var n,r;null===(n=e._ignoreAttrs)||void 0===n||n.add(t),(null===(r=e._attrs)||void 0===r?void 0:r[t])&&delete e._attrs[t]}))}},{key:"clearState",value:function(e){delete this._state[e]}},{key:"setState",value:function(e,t){this._state[e]=t}},{key:"addAttr",value:function(e,t){this._ignoreAttrs&&this._ignoreAttrs.has(e)||(this._attrs||(this._attrs={}),this._attrs[e]=t)}},{key:"removeAttr",value:function(e){this._attrs&&delete this._attrs[e]}},{key:"getAttrs",value:function(){return this._attrs}},{key:"getAttr",value:function(e){return this._attrs?this._attrs[e]:this._mainNode&&this._mainNode.attrs?this._mainNode.attrs[e]:void 0}},{key:"setNode",value:function(e,t){this._mainNode=e,this._contentNode=t||e}},{key:"getParentNode",value:function(){return this._parentNode}},{key:"getNode",value:function(){return this._mainNode}},{key:"isAnonymousNode",value:function(e){return e.name===CK}},{key:"isInlineNode",value:function(e){return!hf[e]}},{key:"isBlockNode",value:function(e){return!!hf[e]}},{key:"stop",value:function(){var e;null===(e=this._walkContext)||void 0===e||e.stop()}},{key:"_attachNode",value:function(e){this._mainNode?(this._attrs&&!this._isFreeze&&ar.setAttribute(this._mainNode,this._attrs),this._parentNode&&ar.appendChild(this._parentNode,this._mainNode)):this._addAnonymousNode(e,this._attrs)}},{key:"_addAnonymousNode",value:function(e,t){"#text"===e.name?(this._strictMode&&function(e,t){var n,r,o,i;t.data=null===(r=null===(n=t.data)||void 0===n?void 0:n.replace(/[\r]+/,""))||void 0===r?void 0:r.replace(/\s/g,(function(e){return"\t"===e||"\n"===e||" "===e?e:" "})).replace(/ +/g," ").replace(/\u00a0/g," "),t.data=null===(o=t.data)||void 0===o?void 0:o.replace(/\n +/g,"\n"),function(e){var t=e.getParentNode();if(!t)return!1;var n=(null==t?void 0:t.children)||[];return!(!hf[t.name]||0!==n.length)}(e)&&(t.data=null===(i=t.data)||void 0===i?void 0:i.replace(/^ +/,""))}(this,e),this._anonymousNode=ar.createTextNode(e.data,this._isFreeze?null:t),this._parentNode&&ar.appendChild(this._parentNode,this._anonymousNode)):hf[e.name]?(this._anonymousNode=ar.createElement(CK,this._isFreeze?null:t),this._parentNode&&ar.appendChild(this._parentNode,this._anonymousNode)):this._anonymousNode=this._parentNode}}])}();function xK(e,t,n,r,o){var i=ar.createFragment(),a=function(e,t){var n=new OK(e,t,null,null);return n._mainNode=t,n._contentNode=t,n}(e,i),l=[a];return AK(n,(function(e,n){var i,u=n.name;if("meta"===u&&(null===(i=n.attrs)||void 0===i?void 0:i.name)&&a.setMeta(n.attrs.name,n.attrs.content||""),!NK[u]&&!a.getSkipMode())if(a.testIsSkipNode(n))a.setSkipMode(!0);else{var c=l[l.length-1].newChildContext(e,a);l.push(c);var s=t.getPreNodeReaders(u);s&&s.forEach((function(e){e.readNode(c,n,o)}));var d=n.attrs,f=n.style,h=t.getNodeReaders(u);h&&h.some((function(e){return c._leaveHook=function(){e.leaveNode(c),c.isStrictMode()&&!(null==r?void 0:r.readEmptyLine)&&function(e){var t,n;if(e._parentNode!==(e._mainNode||e._anonymousNode)){var r=e._contentNode||e._mainNode||e._anonymousNode;if(bt.fatal(r,"plugins/html-data-source/src/kernel/lib/reader/helpers/transform.ts:524"),r&&"table"!==r.name&&"tr"!==r.name&&"td"!==r.name&&"th"!==r.name&&"tli"!==r.name&&function(e){var t,n;return ar.isTextNode(e)?0===(null===(t=e.data)||void 0===t?void 0:t.length):!ar.isCardNode(e)&&!(null===(n=e.children)||void 0===n?void 0:n.length)}(r)){var o=null===(n=null===(t=e._parentNode)||void 0===t?void 0:t.children)||void 0===n?void 0:n.indexOf(r);void 0!==o&&o>-1&&e._parentNode.children.splice(o,1)}}}(c)},!1!==e.readNode(c,n)})),d&&Object.keys(d).forEach((function(e){var r=t.getPreAttrReaders(e),o=t.getAttrReaders(e),i=d[e];r&&r.forEach((function(t){i=t.readAttr(c,e,i,n)})),o&&o.some((function(t){return t.readAttr(c,e,i,n)}))})),f&&Object.keys(f).forEach((function(e){var r=t.getPreStyleReaders(e),o=t.getStyleReaders(e),i=f[e];r&&r.forEach((function(t){i=t.readStyle(c,e,i,n)})),o&&o.some((function(t){return t.readStyle(c,e,i,n)}))})),c._attachNode(n)}}),(function(e){if(!NK[e.name])if(a.testIsSkipNode(e))a.setSkipMode(!1);else if(!a.getSkipMode()){var t=l.pop();t._leaveHook&&t._leaveHook()}})),bt.fatal(1===l.length,"plugins/html-data-source/src/kernel/lib/reader/helpers/transform.ts:458"),function(e,t,n){for(var r=ar.createFragment(),o=new EK(t),i=0;i<t.children.length;i++)DK(e,o,r,r,t,t.children[i]);return r.children&&RK(r.children,n),r}(e,i,e.defaultElementName)}var EK=function(){function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),this._rootNode=t}return(0,$e.A)(e,[{key:"getSourceRoot",value:function(){return this._rootNode}},{key:"newChildContext",value:function(t){return new e(t||this._rootNode)}}])}();function DK(e,t,n,r,o,i){if("br"!==i.name){if(r===n||i.name!==CK){var a=ar.cloneNode(i);return ar.appendChild(r,a),void PK(e,t,n,a,i)}if(r.name===CK){var l=ar.cloneNode(i);ar.appendChild(r,l),"element"===i.type&&i.children&&PK(e,t,n,l,i),bt.fatal(o,"plugins/html-data-source/src/kernel/lib/reader/helpers/transform.ts:621");var u=function(e,t){var n=e.children;if(!n)return[];var r=n.indexOf(t);return bt.fatal(-1!==r,"plugins/html-data-source/src/kernel/lib/reader/helpers/transform.ts:675"),r+=1,e.children=n.slice(0,r),n.slice(r)}(o,i);if(u.length){var c=ar.cloneNode(o);ar.appendChild(t.getSourceRoot(),c),u.forEach((function(e){ar.appendChild(c,e)}))}}else if(e.hasCategory(r.name,qe.Block))PK(e,t,n,r,i);else{var s=ar.cloneNode(i);ar.appendChild(r,s),PK(e,t,n,s,i)}}else ar.appendChild(r,ar.createTextNode("\n"))}function PK(e,t,n,r,o){if("element"===o.type&&o.children)for(var i=o.name,a=e.hasCategory(i,[qe.Root,qe.LikeRoot])?o:n,l=t.newChildContext(a),u=0;u<o.children.length;u++)DK(e,l,n,r,o,o.children[u])}function RK(e,t){e.forEach((function(e){if(e.name===CK){if(!e.children||0===e.children.length)return;e.name=t}e.children&&RK(e.children,t)}))}function SK(e){var t=[];return e.forEach((function(e){if("html"===e.name)t=t.concat(SK(e.children)||[]);else if("head"===e.name){var n=(e.children||[]).filter((function(e){return"meta"===e.name}));t=t.concat(n||[])}else"body"===e.name?t=t.concat(e.children||[]):t.push(e)})),t}var TK="#text";function jK(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function IK(e){var t=0,n={children:[]},r=!1;e=e.replace(/<code[^>]*?>[\s\S]+?<\/code>/g,(function(e){return e.replace(/\n/g,"")})).replace(/<pre[^>]*?>[\s\S]+?<\/pre>/g,(function(e){return e.replace(/\n/g,"")})).replace(/\n+/g," ").replace(/<\/br[^>]*?>/g,"").replace(/\uf001/g,"\n").replace(/<br[^>]*?>/g,"\n");var o={},i=new hI.Parser({onopentag:function(e,i){if(vf[e])t++;else if(t)t++;else if("style"!==e){var a=BK(i.style),l=Object.assign(Object.assign(Object.assign({},o[e]||{}),o["."+i.class]||{}),a);if("none"!==l.display){delete i.style;var u={type:"element",name:e,attrs:i,style:l,children:[],parent:n};n.children.push(u),n=u}else t++}else r=!0},ontext:function(e){if(!t&&(e=e.replace(/\u200b/g,"")))if(r){var i,a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return jK(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jK(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}((e=e.replace(/[\r\t\n]/g,"")).matchAll(/([\.|@]?[\w\d]+)\s?{([^}]*)}/g));try{for(a.s();!(i=a.n()).done;){var l=i.value,u=l[1],c=l[2];"string"==typeof u&&"string"==typeof c&&(o[u]=BK(c))}}catch(e){a.e(e)}finally{a.f()}}else{n.children||(n.children=[]);var s=n.children[n.children.length-1];(null==s?void 0:s.name)===TK?s.data+=e:n.children.push({name:TK,data:e,parent:n,type:"text"})}},onclosetag:function(e){t?t--:"style"!==e?n=n.parent:r=!1}},{decodeEntities:!0,lowerCaseTags:!0,lowerCaseAttributeNames:!0});return i.write(e),i.end(),n.children}function BK(e){var t={};return e?(e.toLowerCase().split(";").forEach((function(e){var n=e.split(":"),r=n[0].trim(),o=(2===n.length?n[1]:n.slice(1).join(":")).trim();r&&o&&(t[r]=o)})),t):t}var MK=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"pluginOption",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_nodeReaders",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_attrReaders",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_styleReaders",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_preNodeReaders",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_preAttrReaders",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_preStyleReaders",{enumerable:!0,configurable:!0,writable:!0,value:{}})}),[{key:"read",value:function(e,t,n){return xK(e,this,SK(IK(t.trim())),this.pluginOption,n)}},{key:"destroy",value:function(){this._nodeReaders=null,this._attrReaders=null,this._styleReaders=null,this._preNodeReaders=null,this._preAttrReaders=null,this._preStyleReaders=null}},{key:"registerNodeReader",value:function(e,t){this._addReader(this._nodeReaders,e,t)}},{key:"registerAttrReader",value:function(e,t){this._addReader(this._attrReaders,e,t)}},{key:"registerStyleReader",value:function(e,t){this._addReader(this._styleReaders,e,t)}},{key:"registerPreNodeReader",value:function(e,t){this._addReader(this._preNodeReaders,e,t)}},{key:"registerPreAttrReader",value:function(e,t){this._addReader(this._preAttrReaders,e,t)}},{key:"registerPreStyleReader",value:function(e,t){this._addReader(this._preStyleReaders,e,t)}},{key:"getNodeReaders",value:function(e){return this._getReader(this._nodeReaders,e)}},{key:"getAttrReaders",value:function(e){return this._getReader(this._attrReaders,e)}},{key:"getStyleReaders",value:function(e){return this._getReader(this._styleReaders,e)}},{key:"getPreNodeReaders",value:function(e){return this._getReader(this._preNodeReaders,e)}},{key:"getPreAttrReaders",value:function(e){return this._getReader(this._preAttrReaders,e)}},{key:"getPreStyleReaders",value:function(e){return this._getReader(this._preStyleReaders,e)}},{key:"_addReader",value:function(e,t,n){(t=Array.isArray(t)?t:[t]).forEach((function(t){e[t]||(e[t]=[]),e[t].push(n)}))}},{key:"_getReader",value:function(e,t){return e[t]||null}}])}(),FK={mode:tM.CLEAN},LK=function(){function e(t,n,r){(0,Ke.A)(this,e),Object.defineProperty(this,"_parentContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_inode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_children",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_mainNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_wrapNode",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_contentNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_attrs",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_style",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_virtual",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_state",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._parentContext=t,this._inode=n,this._option=Object.assign(Object.assign({},FK),r||{});var o=this._option.mode;bt.fatal(o===tM.INLINE||o===tM.CLEAN,"plugins/html-data-source/src/kernel/lib/writer/writer-context.ts:43")}return(0,$e.A)(e,[{key:"isInlineMode",value:function(){return this._option.mode===tM.INLINE}},{key:"isCleanMode",value:function(){return this._option.mode===tM.CLEAN}},{key:"isExport",value:function(){return!0===this._option.isExport}},{key:"getExportType",value:function(){return this._option.exportType}},{key:"getDocMaxWidth",value:function(){return this._option.docMaxWidth}},{key:"previousSiblingContext",get:function(){if(!this._parentContext)return null;var e=this._parentContext._children,t=e.indexOf(this);return bt.fatal(-1!==t,"plugins/html-data-source/src/kernel/lib/writer/writer-context.ts:76"),e[t-1]||null}},{key:"currentURL",get:function(){return this._option.currentURL}},{key:"nextSiblingContext",get:function(){if(!this._parentContext)return null;var e=this._parentContext._children,t=e.indexOf(this);return bt.fatal(-1!==t,"plugins/html-data-source/src/kernel/lib/writer/writer-context.ts:93"),e[t+1]||null}},{key:"inode",get:function(){return this._inode}},{key:"mainNode",get:function(){return this._mainNode}},{key:"contentNode",get:function(){return this._contentNode||this._mainNode}},{key:"since",get:function(){return this._option.since}},{key:"setVirtual",value:function(){this._virtual=!0}},{key:"setState",value:function(e,t){this._state[e]=t}},{key:"getState",value:function(e){return this._state[e]}},{key:"setNode",value:function(e,t){this._mainNode=e,this._contentNode=t||e}},{key:"addAttr",value:function(e,t){bt.fatal(this._mainNode===this._contentNode,"plugins/html-data-source/src/kernel/lib/writer/writer-context.ts:134"),this._attrs||(this._attrs={}),this._attrs[e]=t}},{key:"addStyle",value:function(e,t){this._style||(this._style={}),this._style[e]=t}},{key:"wrapNode",value:function(e){bt.fatal(this._mainNode,"plugins/html-data-source/src/kernel/lib/writer/writer-context.ts:152"),this._wrapNode.push(e)}},{key:"newChildContext",value:function(t){var n=new e(this,t,this._option);return n._state=Object.assign({},this._state),this._children.push(n),n}},{key:"clear",value:function(){this._attrs=null,this._style=null,this._mainNode=null,this._contentNode=null}},{key:"close",value:function(){(this._attrs||this._style)&&(this._mainNode?gd.updateAttribute(this._mainNode,{attrs:this._attrs,style:this._style}):this._mainNode=gd.createElement("span",{attrs:this._attrs,style:this._style}))}},{key:"_appendTo",value:function(e){if(this._virtual)this._handleAppend(e);else if(this._mainNode){var t=this._mainNode;this._wrapNode.forEach((function(e){gd.appendChild(e,t),t=e})),gd.appendChild(e,t)}e=this._contentNode||this._mainNode||e,this._children.forEach((function(t){t._appendTo(e)}))}},{key:"_handleAppend",value:function(e){throw new Error("invalid invoke")}},{key:"createIgnoreElement",value:function(e){return gd.createElement(e,{attrs:{"lake-read-ignore":!0}})}},{key:"createElement",value:function(){return gd.createElement.apply(gd,arguments)}},{key:"createTextNode",value:function(){return gd.createTextNode.apply(gd,arguments)}},{key:"createPlainTextNode",value:function(){return gd.createPlainTextNode.apply(gd,arguments)}},{key:"appendChild",value:function(){return gd.appendChild.apply(gd,arguments)}}])}(),UK=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e),Object.defineProperty(this,"_nodeWriters",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_attrWriters",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_preTextWriters",{enumerable:!0,configurable:!0,writable:!0,value:[]})}),[{key:"destroy",value:function(){this._nodeWriters=null,this._attrWriters=null,this._preTextWriters=null}},{key:"write",value:function(e,t,n){var r,o=this;bt.fatal(ar.isFragmentNode(t),"plugins/html-data-source/src/kernel/lib/writer/html-writer.ts:25");var i=gd.createElement("#root"),a=new LK(null,t,n);if(null===(r=t.children)||void 0===r||r.forEach((function(t){VK(a,e,o,t)})),a.close(),a._appendTo(i),!i.children)return"";var l=i.children.map((function(e){return gd.toHTML(e)})).join(""),u="";return e.hasExtendMethod("getTypographyName")&&(u=(u=e.getTypographyName())?' typography="'.concat(u,'"'):""),(null==n?void 0:n.htmlNoWrap)?l:'<div class="lake-content"'.concat(u,">").concat(l,"</div>")}},{key:"registerNodeWriter",value:function(e,t){var n=this;Array.isArray(e)||(e=[e]),e.forEach((function(e){var r;bt.fatal(!(null===(r=n._nodeWriters)||void 0===r?void 0:r[e]),"plugins/html-data-source/src/kernel/lib/writer/html-writer.ts:72"),n._nodeWriters[e]=t}))}},{key:"registerAttrWriter",value:function(e,t){var n=this;Array.isArray(e)||(e=[e]),e.forEach((function(e){bt.fatal(!n._attrWriters[e],"plugins/html-data-source/src/kernel/lib/writer/html-writer.ts:86"),n._attrWriters[e]=t}))}},{key:"registerPreTextWriter",value:function(e){this._preTextWriters.push(e)}},{key:"getNodeWriter",value:function(e){return this._nodeWriters[e]||null}},{key:"getAttrWriter",value:function(e){return this._attrWriters[e]||null}},{key:"getPreTextWriters",value:function(){return this._preTextWriters}}])}();function VK(e,t,n,r){var o;bt.fatal(!ar.isFragmentNode(r),"plugins/html-data-source/src/kernel/lib/writer/html-writer.ts:114");var i=e.newChildContext(r),a=r.name,l=r.id,u=t.getNodeSchema(a),c=n.getNodeWriter(a);if(u){if(l&&(u.category.includes(qe.Block)||u.category.includes(qe.Card)||u.category.includes(qe.Table))&&i.addAttr("id",l),c)c.write(i,r);else if("text"===u.type){null===(o=n.getPreTextWriters())||void 0===o||o.forEach((function(e){e.preWrite({setAttribute:function(e,t){ar.setAttribute(r,e,t)}},r)}));var s=gd.createElement("span",{className:"ne-text"});i.appendChild(s,gd.createTextNode(r.data)),i.setNode(s)}else u.category.includes(qe.Block)&&i.setNode(gd.createElement("div"));var d=r.attrs;d&&Object.keys(d).forEach((function(e){!function(e,t,n,r){var o=t.getAttrWriter(n);o&&o.write(e,n,r)}(i,n,e,d[e])})),ar.isElementNode(r)&&r.children&&r.children.forEach((function(e){VK(i,t,n,e)})),c&&c.leaveNode(i),i.close()}}var HK=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Object.assign({},this._option,t)}),[{key:"readEmptyLine",get:function(){var e;return!!(null===(e=this._option)||void 0===e?void 0:e.readEmptyLine)}}])}();function zK(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,WK()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function WK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(WK=function(){return!!e})()}Object.defineProperty(HK,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:wK.pluginName});var qK=function(e){function t(){var e;return(0,Ke.A)(this,t),e=zK(this,t,arguments),Object.defineProperty(e,"_dataSource",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"htmlReader",{enumerable:!0,configurable:!0,writable:!0,value:new MK(e.option)}),Object.defineProperty(e,"htmlWriter",{enumerable:!0,configurable:!0,writable:!0,value:new UK}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){this._dataSource=new mK(e),e.registerDataSource("text/html",this._dataSource),e.registerReader("text/html",this.htmlReader),e.registerWriter("text/html",this.htmlWriter)}},{key:"destroy",value:function(){Tr((0,Je.A)(t.prototype),"destroy",this).call(this),this.htmlReader.destroy(),this.htmlWriter.destroy()}}])}(ct);Object.defineProperty(qK,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:wK.pluginName}),Object.defineProperty(qK,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:HK}),Object.defineProperty(qK,"Service",{enumerable:!0,configurable:!0,writable:!0,value:yK});for(var $K=8,KK=["columns"],YK=[qe.BlockCard,"alert","table",Rt],GK=[],JK=[],XK=1,QK=2*$K+1;XK<=QK;XK++)GK.push(XK);for(var ZK=1;ZK<=$K;ZK++)JK.push(ZK);const eY={indent:{targets:[qe.Block,qe.Hole,qe.TableHole,"quote"],excludes:[qe.Level],values:GK},textIndent:{targets:[qe.Block],excludes:[qe.Level],values:[!0]},level:{targets:[qe.Level],values:JK},hindent:{targets:YK,excludes:[qe.Level],values:GK}};var tY=HR({pluginName:"indent",command:{indent:"indent",outdent:"outdent",canIndent:"canIndent"},toolbar:"indent"});function nY(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,rY()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function rY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rY=function(){return!!e})()}var oY=function(e){function t(){return(0,Ke.A)(this,t),nY(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getValue",value:function(e,t){var n=e.getNodeById(t);if(!n||KK.includes(n.nodeName))return[];var r=["indent","hindent","level"].find((function(e){return!!n.attrs[e]}));return r?n.attrs[r]>=$K?["canOutdent"]:["canIndent","canOutdent"]:["canIndent"]}},{key:"getState",value:function(e){var t=e.getSelection();if(t.rangeCount>1)return pt.UNAVAILABLE;if(!t.collapsed)return Ut.closest(t.firstRange.commonAncestorContainer,qe.TableCell)?pt.UNAVAILABLE:pt.NOT_EXECUTED;var n=t.firstRange.start,r=n.node;if(0!==n.offset)return pt.UNAVAILABLE;if(r.hasCategory([qe.Block,qe.Hole,qe.TableHole]))return pt.NOT_EXECUTED;for(var o=Ut.closest(r,qe.Block),i=r;i!==o;){if(0!==i.offset)return pt.UNAVAILABLE;i=i.parentNode}return pt.NOT_EXECUTED}}])}(gt);function iY(e){var t,n=Ut.closest(e,[qe.Hole,qe.TableHole,qe.Brick]);return n?(null===(t=n.parent)||void 0===t?void 0:t.hasCategory([qe.TableHole,qe.Hole]))?n.parent:n:null}function aY(e,t,n){var r=iY(t);if(r)return uY(e,r,!1,n)}function lY(e,t){if("number"==typeof e||"number"==typeof t)return"number"!=typeof t?e+1>$K?$K:e+1:t<0?0:t>$K?$K:t}function uY(e,t,n,r){var o=t.nodeName,i=t.attrs,a=void 0===i?{}:i,l=a.level,u=void 0===l?0:l,c=a.indent,s=void 0===c?0:c;if(n&&e.acceptAttr(o,"textIndent",!0)&&!a.textIndent)e.setAttribute(t,"textIndent",!0);else{var d=lY(u,r);if("number"==typeof d)if(e.acceptAttrName(o,"level"))0===d?e.removeAttribute(t,"level"):e.acceptAttr(o,"level",d)&&e.setAttribute(t,"level",d);else{var f=lY(s,r);"number"==typeof f&&(t.hasCategory([qe.Hole,qe.TableHole])&&t.firstChild&&!e.acceptAttrName(t.firstChild.nodeName,"hindent")||e.acceptAttrName(o,"indent")&&(0===f?(e.removeAttribute(t,"indent"),function(e,t){t.hasCategory([qe.Hole,qe.TableHole])&&t.firstChild&&e.removeAttribute(t.firstChild,"hindent")}(e,t)):e.acceptAttr(o,"indent",f)&&(e.setAttribute(t,"indent",f),function(e,t,n){var r;t.hasCategory([qe.Hole,qe.TableHole])&&t.firstChild&&e.acceptAttr(t.firstChild.nodeName,"hindent",n)&&(e.setAttribute(t.firstChild,"hindent",n),t.firstChild.hasCategory(qe.BlockCard)&&(null===(r=t.firstChild.attrs)||void 0===r?void 0:r.value)?e.setAttribute(t.firstChild,"value",Object.assign(Object.assign({},t.firstChild.attrs.value),{__widthMode:El})):e.removeAttribute(t.firstChild,"widthMode"))}(e,t,f))))}}}function cY(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function sY(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,dY()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function dY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(dY=function(){return!!e})()}Object.defineProperty(oY,"ID",{enumerable:!0,configurable:!0,writable:!0,value:tY.command.canIndent});var fY=function(e){function t(){return(0,Ke.A)(this,t),sY(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){var t=e.getSelection();if(wi.isUnbreakable(t)||wi.isInHole(t)&&t.firstRange.start.isAtEnd)return pt.UNAVAILABLE;var n=t.firstRange,r=n.start,o=n.end;return r.node.closest(qe.OnlyText)||o.node.closest(qe.OnlyText)?pt.UNAVAILABLE:pt.NOT_EXECUTED}},{key:"execute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=e.newJob();return n?this._executeNode(o,e,n,r):this._executeSelection(o,e,t,r)}},{key:"_executeSelection",value:function(e,t,n,r){if(this.getState(e)===pt.UNAVAILABLE)return t.cancelJob(e),!1;var o=e.getSelection(),i=!1;if(o.collapsed&&o.firstRange.start.node.isRootNode()&&o.firstRange.start.isAtEnd){var a=e.createElement(e.defaultElementName);e.appendChild(o.firstRange.start.node,a),i=!0,o=e.newSelection([e.newRange(e.newPosition(a,0))])}return function(e,t,n,r){if(t.collapsed){var o=iY(t.firstRange.start.node);if(!o)return;uY(e,o,n,r)}else wi.fullWalkSelection(t,{enter:function(t){uY(e,t,!1,r)}})}(e,o,n,r),i&&e.setSelection(o),t.commitJob(e),!0}},{key:"_executeNode",value:function(e,t,n,r){var o,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return cY(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cY(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}("string"==typeof n?[n]:n||[]);try{for(i.s();!(o=i.n()).done;){var a=o.value,l=e.getNodeById(a);if(!l)return t.cancelJob(e),!1;aY(e,l,r)}}catch(e){i.e(e)}finally{i.f()}return t.commitJob(e),!0}}])}(gt);function hY(e,t){var n=iY(t);if(n)return pY(e,n,!1)}function pY(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.nodeName,o=t.attrs,i=void 0===o?{}:o,a=i.level,l=void 0===a?0:a,u=i.indent,c=void 0===u?0:u;if(n&&e.acceptAttrName(r,"textIndent")&&i.textIndent)e.removeAttribute(t,"textIndent");else if(e.acceptAttr(r,"level",l-1||1))l-1==0?e.removeAttribute(t,"level"):e.setAttribute(t,"level",l-1);else{var s=c-1;if(t.hasCategory([qe.Hole,qe.TableHole])&&t.firstChild&&!e.acceptAttr(t.firstChild.nodeName,"hindent",s))return e.removeAttribute(t,"indent"),void e.removeAttribute(t.firstChild,"hindent");e.acceptAttr(r,"indent",s||1)&&(0===s?(e.removeAttribute(t,"indent"),t.hasCategory([qe.Hole,qe.TableHole])&&t.firstChild&&e.removeAttribute(t.firstChild,"hindent")):(e.setAttribute(t,"indent",s),t.hasCategory([qe.Hole,qe.TableHole])&&t.firstChild&&e.acceptAttr(t.firstChild.nodeName,"hindent",s)&&e.setAttribute(t.firstChild,"hindent",s)))}}function vY(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function mY(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,gY()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function gY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(gY=function(){return!!e})()}Object.defineProperty(fY,"ID",{enumerable:!0,configurable:!0,writable:!0,value:tY.command.indent});var bY=function(e){function t(){return(0,Ke.A)(this,t),mY(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){var t=e.getSelection();if(t.rangeCount>1)return pt.UNAVAILABLE;var n=t.firstRange,r=n.start,o=n.end;return r.node.closest(qe.OnlyText)||o.node.closest(qe.OnlyText)?pt.UNAVAILABLE:pt.NOT_EXECUTED}},{key:"execute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=e.newJob();return n?this._executeNode(r,e,n):this._executeSelection(r,e,t)}},{key:"_executeSelection",value:function(e,t,n){return this.getState(e)===pt.UNAVAILABLE?(t.cancelJob(e),!1):(function(e,t,n){if(t.collapsed){var r=iY(t.firstRange.start.node);if(!r)return;pY(e,r,n)}else wi.fullWalkSelection(t,{enter:function(t){pY(e,t)}})}(e,e.getSelection(),n),t.commitJob(e),!0)}},{key:"_executeNode",value:function(e,t,n){var r,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return vY(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vY(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}("string"==typeof n?[n]:n||[]);try{for(o.s();!(r=o.n()).done;){var i=r.value,a=e.getNodeById(i);if(!a)return t.cancelJob(e),!1;hY(e,a)}}catch(e){o.e(e)}finally{o.f()}return t.commitJob(e),!0}}])}(gt);function yY(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,wY()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function wY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wY=function(){return!!e})()}Object.defineProperty(bY,"ID",{enumerable:!0,configurable:!0,writable:!0,value:tY.command.outdent});var AY=function(e){function t(){return(0,Ke.A)(this,t),yY(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t,n){"hindent"===t&&(e.ignoreInheritedAttrs("hindent"),this._readHIndent(e,n))}},{key:"_readHIndent",value:function(e,t){var n=Number.parseInt(t,10);if(t.endsWith("em")&&n>0&&n%2==0){var r=n/2;r>0&&e.setAttr("hindent",r)}}}])}(oI);function kY(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,_Y()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function _Y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_Y=function(){return!!e})()}Object.defineProperty(AY,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:["hindent"]});var CY=function(e){function t(){return(0,Ke.A)(this,t),kY(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t,n){var r;"blockquote"===(null===(r=e.inode)||void 0===r?void 0:r.name)&&e.ignoreInheritedAttrs("indent"),"text-indent"===t?this._readTextIndent(e,n):this._readIndent(e,n)}},{key:"_readTextIndent",value:function(e,t){var n=Number.parseInt(t,10);t.endsWith("em")&&n>0&&e.setAttr("textIndent",!0)}},{key:"_readIndent",value:function(e,t){var n=Number.parseInt(t,10);if(t.endsWith("em")&&n>0&&n%2==0){var r=n/2;r>0&&e.setAttr("indent",r)}}}])}(uI);function NY(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,OY()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function OY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(OY=function(){return!!e})()}Object.defineProperty(CY,"StyleNames",{enumerable:!0,configurable:!0,writable:!0,value:["text-indent","padding-left"]});var xY=function(e){function t(){return(0,Ke.A)(this,t),NY(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t,n){if(n)if("textIndent"!==t){var r=e.inode.attrs,o=(r.indent||0)+(r.level||0);o&&e.addStyle("margin-left","".concat(2*o,"em"))}else e.addStyle("text-indent","2em")}}])}(vB);Object.defineProperty(xY,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:["indent","textIndent"]});var EY=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"write",value:function(e,t,n){switch(t){case"textIndent":e.setStyle("text-indent","2em");break;case"indent":e.setStyle("padding-left",2*n+"em");break;case"hindent":e.setAttr("hindent",2*n+"em")}}}])}();function DY(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,PY()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function PY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(PY=function(){return!!e})()}Object.defineProperty(EY,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:["indent","hindent","textIndent"]});var RY=function(e){function t(){return(0,Ke.A)(this,t),DY(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){var n=this;e.registerAttr(eY),e.extendMethods({genericNodeIndent:aY});var r=e.getService(wS.ID);r&&r.registerAttrHTMLWriter(xY.AttrNames,new xY);var o=e.getService(_S.ID);o&&(o.registerLakeStyleReader(CY.StyleNames,new CY),o.registerLakeAttrReader(AY.AttrNames,new AY));var i=e.getService(_S.ID);i&&i.registerLakeAttrWriter(EY.AttrNames,new EY),xc(this,t,"nodechange",(function(e){if(n.isNeedRemoveHIndent(e)){var t=e.node,r=e.job;r.removeAttribute(t,"hindent"),t.parentNode&&r.removeAttribute(t.parentNode,"indent")}}))}},{key:"isNeedRemoveHIndent",value:function(e){return this.isUpdateCardWidthMode(e)||this.isUpdateNodeWidthMode(e)}},{key:"isUpdateNodeWidthMode",value:function(e){var t=e.node,n=e.job,r=e.type,o=e.subType,i=e.attrName,a=e.value;return"attribute"===r&&["add","update"].includes(o)&&"widthMode"===i&&a===Dl&&n.acceptAttrName(t.nodeName,"hindent")}},{key:"isUpdateCardWidthMode",value:function(e){var t=e.node,n=e.type,r=e.subType,o=e.attrName,i=e.value;return t.hasCategory(qe.BlockCard)&&"attribute"===n&&["add","update"].includes(r)&&"value"===o&&(null==i?void 0:i.__widthMode)===Dl}}])}(ct);Object.defineProperty(RY,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:tY.pluginName}),Object.defineProperty(RY,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[fY,bY,oY]});var SY=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"write",value:function(e,t){return JSON.stringify(t)}},{key:"destroy",value:function(){}}])}(),TY=HR({pluginName:"inodeReader"});function jY(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,IY()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function IY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(IY=function(){return!!e})()}var BY=function(e){function t(){var e;return(0,Ke.A)(this,t),e=jY(this,t,arguments),Object.defineProperty(e,"_writer",{enumerable:!0,configurable:!0,writable:!0,value:new SY}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerReader("text/ne-inode",this.service.reader),e.registerWriter("text/ne-inode",this._writer)}},{key:"destroy",value:function(){this._writer.destroy(),delete this._writer,Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}}])}(ct);Object.defineProperty(BY,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:TY.pluginName}),Object.defineProperty(BY,"Service",{enumerable:!0,configurable:!0,writable:!0,value:W$});var MY=HR({pluginName:"input",command:{input:"input",canInput:"canInput",insertText:"insertText",autoSpacing:"autoSpacing",autoClosing:"autoClosing"}});function FY(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,LY()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function LY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(LY=function(){return!!e})()}var UY=function(e){function t(){return(0,Ke.A)(this,t),FY(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){var t=e.getSelection();return t.firstRange.collapsed&&t.firstRange.start.node.hasCategory(qe.Card)?st:dt}}])}(gt);Object.defineProperty(UY,"ID",{enumerable:!0,configurable:!0,writable:!0,value:MY.command.canInput});var VY={"'":"'",'"':'"',"(":")","[":"]","{":"}","【":"】","‘":"’","“":"”","《":"》","〈":"〉","「":"」","『":"』"};function HY(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,zY()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function zY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(zY=function(){return!!e})()}var WY=[/(\r\n|\n|\r)/m,/(?:[^a-z0-9]|^)([a-z0-9]{2,}):\/\/(?:[a-z_0-9@:.])+?(?:\/\S*?)?(?:[#\s\S]*?)?(?:(?=[\u0100-\uffff\s])|$)/i];function qY(e,t){return e&&t&&(gn.isChineseChar(e)&&gn.isEnAndNumber(t)||gn.isEnAndNumber(e)&&gn.isChineseChar(t))}function $Y(e,t){return gn.isChineseChar(e)&&gn.isChineseChar(t)||gn.isEnAndNumber(e)&&gn.isEnAndNumber(t)}var KY=function(e){function t(){return(0,Ke.A)(this,t),HY(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t){var n,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=(n=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?e.newJob():e.job).getSelection();if(!o||!this.processAutoClosing(e,n,t,i)){if(i.collapsed||(i=n.newSelection(i.firstRange),(i=wi.deleteContent(n,i,!1,!0,!1,!1)).isCollapsed||(bt.fatal(i.isTableSelection&&i.firstRange.start.node.isEmpty(),"plugins/input/src/kernel/input-command.ts:80"),i=n.newSelection(n.newRange(n.newPosition(i.firstRange.start.node,0))))),bt.fatal(i.collapsed,"plugins/input/src/kernel/input-command.ts:90"),1===(null==t?void 0:t.length))return this._execNormalTextInsert(e,t,n,i,r);for(var a=0,l=WY;a<l.length;a++)if(l[a].test(t))return this._execInodeInsert(e,t,n,i);return this._execNormalTextInsert(e,t,n,i,r)}}},{key:"processAutoClosing",value:function(e,t,n,r){if(!VY[n])return!1;if(!r.firstRange.start.node.isTextNode()||!r.firstRange.end.node.isTextNode())return!1;if(r.firstRange.start.node.closest(qe.Block)!==r.firstRange.end.node.closest(qe.Block))return!1;var o=wr.insertText(t,r.firstRange.start,n);if(r.firstRange.start.node===r.firstRange.end.node){var i=wr.insertText(t,t.newPosition(r.firstRange.start.node,r.firstRange.end.offset+1),VY[n]);t.setSelection([t.newRange(t.newPosition(o.node,o.offset-1),i)])}else{var a=wr.insertText(t,r.firstRange.end,VY[n]);t.setSelection([t.newRange(t.newPosition(o.node,o.offset-1),a)])}return e.commitJob(t),!0}},{key:"getPrevChar",value:function(e){var t;if(!e.node.isTextNode())return null;if(e.offset>0){var n=e.node.data[e.offset-1];return{position:new At(e.node,e.offset-1),ch:n}}if(null===(t=e.node.previousSibling)||void 0===t?void 0:t.isTextNode()){var r=e.node.previousSibling.data[e.node.previousSibling.data.length-1];return{position:new At(e.node.previousSibling,e.node.previousSibling.data.length-1),ch:r}}return null}},{key:"getNextChar",value:function(e){var t;if(!e.node.isTextNode())return null;if(e.offset<e.node.dataLength){var n=e.node.data[e.offset];return{position:new At(e.node,e.offset+1),ch:n}}if(null===(t=e.node.nextSibling)||void 0===t?void 0:t.isTextNode()){var r=e.node.nextSibling.data[0];return{position:new At(e.node.nextSibling,0),ch:r}}return null}},{key:"_execNormalTextInsert",value:function(e,t,n,r,o){var i={},a=r.firstRange.start;a.node.hasCategory([qe.Heading])||(i=wr.closestInlineAttrs(a)),i&&(i=Object.keys(i).reduce((function(e,t){return n.acceptAttr(qe.Text,t,i[t])&&(e[t]=i[t]),e}),{}));var l=wr.makeSureAtInput(n,r.firstRange.start);bt.fatal(l.node.hasCategory([qe.TextContainer,qe.Text]),"plugins/input/src/kernel/input-command.ts:249");var u=!1,c=!1;if(o&&l.node.isTextNode()){var s=this.getPrevChar(l),d=this.getNextChar(l);if(s&&qY(s.ch,t[0])&&(u=!0),d&&qY(t[t.length-1],d.ch)&&(c=!0),c&&s&&" "===s.ch){var f=this.getPrevChar(s.position);f&&$Y(f.ch,t[0])&&(l=s.position,c=!1)}if(u&&d&&" "===d.ch){var h=this.getNextChar(d.position);h&&$Y(h.ch,t[t.length-1])&&(l=d.position,u=!1)}c&&(t+=" "),u&&(t=" "+t)}l=l.node.isTextNode()&&Object.keys(i).length!==Object.keys(l.node.attrs).length?wi.insertINode(n,r,ar.createFragment([ar.createTextNode(t,i)])).firstRange.end:wr.insertText(n,l,t,i),c&&(l=n.newPosition(l.node,l.offset-1)),n.setSelection([n.newRange(l)]),e.commitJob(n)}},{key:"_execInodeInsert",value:function(e,t,n,r){var o=this.kernel.readData("text/plain",t);n.setSelection(wi.insertINode(n,r,o)),e.commitJob(n)}}])}(gt);function YY(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,GY()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function GY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(GY=function(){return!!e})()}Object.defineProperty(KY,"ID",{enumerable:!0,configurable:!0,writable:!0,value:MY.command.input});var JY=function(e){function t(){return(0,Ke.A)(this,t),YY(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=e.newJob(),o=n?r.newSelection(r.newRange(r.newPosition(n.node,n.offset))):r.getSelection();if(o.collapsed||(o=r.newSelection(r.newRange(o.firstRange.start))),!r.acceptNode(o.firstRange.start.node.nodeName,"#text"))return!1;wr.insertText(r,o.firstRange.start,t);try{Bo(r,o.firstRange)}catch(e){}return!0}}])}(gt);function XY(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,QY()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function QY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(QY=function(){return!!e})()}Object.defineProperty(JY,"ID",{enumerable:!0,configurable:!0,writable:!0,value:MY.command.insertText});var ZY=function(e){function t(){return(0,Ke.A)(this,t),XY(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){}}])}(ct);function eG(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,tG()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function tG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(tG=function(){return!!e})()}Object.defineProperty(ZY,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:MY.pluginName}),Object.defineProperty(ZY,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[KY,UY,JY]});var nG=function(e){function t(){return(0,Ke.A)(this,t),eG(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){return e.getSelection().rangeCount>1?pt.UNAVAILABLE:pt.NOT_EXECUTED}},{key:"execute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.newJob();if(this.getState(r)===pt.UNAVAILABLE)return e.cancelJob(r),!1;var o=Ai.insertCardNode(r,r.getSelection(),"label",t),i=o.selection,a=o.cardNode;return n?r.setSelection([r.newRange(r.newPosition(a,0))]):r.setSelection(i),e.commitJob(r),a.id}}])}(pt);function rG(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,oG()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function oG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(oG=function(){return!!e})()}var iG=function(e){function t(){return(0,Ke.A)(this,t),rG(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getValue",value:function(e){var t=e.getSelection();if(!wi.isInCard(t))return null;var n=t.firstRange.start.node;return"label"===n.nodeName?n.id:null}}])}(pt);function aG(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,lG()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function lG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(lG=function(){return!!e})()}var uG,cG=function(e){function t(){return(0,Ke.A)(this,t),aG(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Ij);Object.defineProperty(cG,"CardName",{enumerable:!0,configurable:!0,writable:!0,value:"label"});var sG=["color0","color1","color2","color3","color4","color5"],dG=(uG={},(0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)(uG,"label.".concat(sG[0],".bg"),{light:"#F8CED3",dark:"#5B2027"}),"label.".concat(sG[0],".border"),{light:"#F1A2AB",dark:"#741B25"}),"label.".concat(sG[0],".text"),{light:"#70000D",dark:"#E6BCC1"}),"label.".concat(sG[1],".bg"),{light:"#F6E1AC",dark:"#564825"}),"label.".concat(sG[1],".border"),{light:"#F5D480",dark:"#775C18"}),"label.".concat(sG[1],".text"),{light:"#664900",dark:"#EEDEB4"}),"label.".concat(sG[2],".bg"),{light:"#DBF1B7",dark:"#445625"}),"label.".concat(sG[2],".border"),{light:"#C1E77E",dark:"#557915"}),"label.".concat(sG[2],".text"),{light:"#2A4200",dark:"#D5E1C1"}),"label.".concat(sG[3],".bg"),{light:"#EFF0F0",dark:"#292929"}),(0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)(uG,"label.".concat(sG[3],".border"),{light:"#EFF0F0",dark:"#292929"}),"label.".concat(sG[3],".text"),{light:"#262626",dark:"#E2E2E2"}),"label.".concat(sG[4],".bg"),{light:"#C0DDFC",dark:"#253C56"}),"label.".concat(sG[4],".border"),{light:"#81BBF8",dark:"#1D4672"}),"label.".concat(sG[4],".text"),{light:"#00346B",dark:"#B5D0ED"}),"label.".concat(sG[5],".bg"),{light:"#C0CAFC",dark:"#252D56"}),"label.".concat(sG[5],".border"),{light:"#96A7FD",dark:"#1B2A74"}),"label.".concat(sG[5],".text"),{light:"#101E60",dark:"#B5BEED"}));function fG(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,hG()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function hG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(hG=function(){return!!e})()}var pG=function(e){function t(e){return(0,Ke.A)(this,t),fG(this,t,[Ww()({},t.DefaultCardValue,e)])}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getLabel",value:function(){return this._cardValue.label}},{key:"setLabel",value:function(e){this._cardValue.label=e}},{key:"getColorIndex",value:function(){return this._cardValue.colorIndex||0}},{key:"setColorIndex",value:function(e){this._cardValue.colorIndex=e}},{key:"getStyle",value:function(e){var t=e||this._cardValue,n=t.colorIndex,r=t.label;return{background:"var(".concat(du("label.".concat(sG[n],".bg")),")"),color:"var(".concat(du("label.".concat(sG[n],".text")),")"),opacity:r?1:.45}}},{key:"getHtmlStyle",value:function(e,t){var n=e||this._cardValue,r=n.colorIndex,o=n.label,i=Object.assign({},dG);return t&&Object.keys(t).forEach((function(e){if(i[e]){var n=t[e];i[e]="string"==typeof n?{light:n,dark:i[e].dark}:n}})),{background:sT("label.".concat(sG[r],".bg"),i),color:sT("label.".concat(sG[r],".text"),i),opacity:o?1:.45}}}],[{key:"fromLake",value:function(e){var n=Ww()({},t.DefaultCardValue,e);return(null==n?void 0:n.label)&&(n.label=vd.decodeHTML(n.label)),n}},{key:"toLake",value:function(e){return Object.assign(Object.assign({},e),{label:(null==e?void 0:e.label)?vd.encodeHTML(e.label):void 0})}}])}(Sl);function vG(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,mG()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function mG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mG=function(){return!!e})()}Object.defineProperty(pG,"DefaultCardValue",{enumerable:!0,configurable:!0,writable:!0,value:{label:void 0,colorIndex:0}});var gG=function(e){function t(){return(0,Ke.A)(this,t),vG(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t,n,r){var o=e.createCard("label",pG.fromLake(n),r);e.setNode(o)}}])}(Lj);function bG(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,yG()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function yG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(yG=function(){return!!e})()}var wG=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=bG(this,t),Object.defineProperty(n,"customThemeService",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){var n,r,o=(t.attrs||{}).value,i=new pG(void 0===o?{}:o),a=i.getLabel()||sc("设置标签");e.isInlineMode()&&(r=Object.assign(Object.assign({},i.getHtmlStyle(void 0,null===(n=this.customThemeService)||void 0===n?void 0:n.getOption().overrides)),{fontWeight:400,fontSize:"12px",overflow:"hidden",maxWidth:"200px",display:"inline-block",whiteSpace:"nowrap",marginBottom:"-4px",borderRadius:"4px",border:"none",padding:"2px 5px",textOverflow:"ellipsis",lineHeight:"14px",marginLeft:"1px",marginRight:"1px"}));var l=e.createElement("span",{className:"ne-label",attrs:{"data-color":i.getColorIndex()},style:r});e.appendChild(l,e.createTextNode(a)),e.setNode(l)}}])}(lT);function AG(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,kG()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function kG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(kG=function(){return!!e})()}var _G=function(e){function t(){return(0,Ke.A)(this,t),AG(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t,n,r){var o=e.createInlineCard("label",pG.toLake(n),r);e.setNode(o)}}])}($j),CG=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"write",value:function(e,t){var n=ku()(t,"attrs.value",{}),r=n.label,o=n.colorIndex;if(!r)return!0;var i=dG["label.".concat(sG[o],".bg")].light,a=dG["label.".concat(sG[o],".text")].light;return e.append('<font style="background:'.concat(i,";color:").concat(a,'">').concat(r,"</font>")),!1}}])}(),NG=HR({pluginName:"textDataSource",command:{text:"text"},service:{ITextDataSourceKernelService:"ITextDataSourceKernelService"}});function OG(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,xG()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function xG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xG=function(){return!!e})()}var EG=function(e){function t(){var e;return(0,Ke.A)(this,t),e=OG(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(rt);function DG(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,PG()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function PG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(PG=function(){return!!e})()}Object.defineProperty(EG,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze(NG.service.ITextDataSourceKernelService)});var RG=function(e){function t(){return(0,Ke.A)(this,t),DG(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){return e.getSelection().rangeCount>1?st:dt}},{key:"getValue",value:function(e){return this.getState(e)===st?null:Go.getTextContent(e,e.getSelection().firstRange)}}])}(gt);function SG(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,TG()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function TG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(TG=function(){return!!e})()}Object.defineProperty(RG,"ID",{enumerable:!0,configurable:!0,writable:!0,value:NG.command.text});var jG=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=SG(this,t),Object.defineProperty(n,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){this._kernel=null}},{key:"read",value:function(e,t){return this._kernel.readData("text/plain",e,t)}},{key:"write",value:function(e,t){var n=e.document.getINode(t);return this._kernel.writeData("text/plain",n,t)}}])}(Ht);function IG(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,BG()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function BG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(BG=function(){return!!e})()}var MG=function(e){function t(){return(0,Ke.A)(this,t),IG(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){}},{key:"registerTextReader",value:function(e){this.plugin._readerManager.register(e)}},{key:"registerTextWriter",value:function(e,t){this.plugin._textWriterManager.register(e,t)}}])}(EG),FG=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e),Object.defineProperty(this,"_readers",{enumerable:!0,configurable:!0,writable:!0,value:[]})}),[{key:"destroy",value:function(){delete this._readers}},{key:"register",value:function(e){this._readers.push(e)}},{key:"read",value:function(e,t,n){for(var r=this._readers,o=t.replace(/[\u200B\uFEFF]/g,"").replace(/\r\n/g,"\n").replace(/\r/g,"").split("\n").map((function(e){if(!(null==n?void 0:n.forceText))for(var o=0,i=r.length;o<i;o++){var a=r[o].read(e,{originText:t});if(a)return a}return[ar.createTextNode(e)]})),i=[],a=0,l=o.length;a<l;a++)if(0===a||a===l-1&&l>2)o[a].forEach((function(e){i.push(e)}));else{var u=ar.createElement("p");ar.setChildren(u,o[a]),i.push(u)}return ar.createFragment(i)}}])}();function LG(e){var t=[];return t.context=e,t}var UG=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_rootBuffer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_currentBuffer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._rootBuffer=LG({parent:null,offset:-1,index:-1}),this._currentBuffer=this._rootBuffer}),[{key:"rootNode",get:function(){return this._rootNode}},{key:"append",value:function(e){var t=this._currentBuffer.context;-1===t.index&&(t.index=0),this._currentBuffer[t.index]=(this._currentBuffer[t.index]||"")+e}},{key:"newline",value:function(e){this._currentBuffer.context.index++,this._currentBuffer[this._currentBuffer.context.index]=e||""}},{key:"newGroup",value:function(){this._currentBuffer.context.index++;var e=LG({parent:this._currentBuffer,offset:this._currentBuffer.context.index,index:-1});this._currentBuffer[this._currentBuffer.context.index]=e,this._currentBuffer=e}},{key:"closeGroup",value:function(){bt.fatal(this._currentBuffer.context.parent,"plugins/text-data-source/src/kernel/lib/text-builder.ts:70"),this._currentBuffer=this._currentBuffer.context.parent}},{key:"toString",value:function(){return VG(this._rootBuffer)}}])}();function VG(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\n";return e.map((function(e){return"string"==typeof e?e:VG(e,"\n"===t?"\t":"\n")})).join(t)}var HG=function(){return(0,$e.A)((function e(t,n,r,o){(0,Ke.A)(this,e),Object.defineProperty(this,"_writers",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_builder",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"_toText",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"_stopped",{enumerable:!0,configurable:!0,writable:!0,value:!1})}),[{key:"rootNode",get:function(){return this._builder.rootNode}},{key:"write",value:function(e){this._toText(this._writers,this._builder,this._kernel,e)}},{key:"newline",value:function(e){this._builder.newline(e)}},{key:"newGroup",value:function(){this._builder.newGroup()}},{key:"append",value:function(e){this._builder.append(e)}},{key:"closeGroup",value:function(){this._builder.closeGroup()}},{key:"isStop",value:function(){return this._stopped}},{key:"stop",value:function(){this._stopped=!0}}])}();function zG(e,t,n,r){var o,i;if(ar.isFragmentNode(r))null===(o=r.children)||void 0===o||o.forEach((function(r){return zG(e,t,n,r)}));else{var a=n.getNodeSchema(r.name);if(a)if(a.type!==wt.Text){var l=e[r.name];if(l){var u=new HG(e,t,n,zG);return l.write(u,r),void(u.isStop()||ar.isElementNode(r)&&r.children&&r.children.forEach((function(r){zG(e,t,n,r)})))}if(a.type===wt.Element)return a.category.includes(qe.Block)&&t.newline(),void(r.children&&r.children.forEach((function(r){return zG(e,t,n,r)})));bt.fatal(a.type===wt.Card,"plugins/text-data-source/src/kernel/lib/to-text.ts:64"),a.category.includes(qe.BlockCard)&&t.newline()}else t.append((null===(i=r.data)||void 0===i?void 0:i.replace(/\u00a0/g," "))||"")}}var WG=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e),Object.defineProperty(this,"_writers",{enumerable:!0,configurable:!0,writable:!0,value:{}})}),[{key:"destroy",value:function(){delete this._writers}},{key:"write",value:function(e,t){var n=new UG(t);return zG(this._writers,n,e,t),n.toString()}},{key:"register",value:function(e,t){var n=this;Array.isArray(e)?e.forEach((function(e){n._writers[e]=t})):this._writers[e]=t}}])}();function qG(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,$G()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function $G(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($G=function(){return!!e})()}var KG=function(e){function t(){var e;return(0,Ke.A)(this,t),e=qG(this,t,arguments),Object.defineProperty(e,"_dataSource",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_readerManager",{enumerable:!0,configurable:!0,writable:!0,value:new FG}),Object.defineProperty(e,"_textWriterManager",{enumerable:!0,configurable:!0,writable:!0,value:new WG}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this;this._dataSource=new jG(e),e.registerDataSource("text/plain",this._dataSource),e.registerReader("text/plain",this._readerManager),e.registerWriter("text/plain",this._textWriterManager),e.extendMethods({registerTextReader:function(e){t._readerManager.register(e)}}),e.extendMethods({registerTextWriter:function(e,n){t._textWriterManager.register(e,n)}})}},{key:"destroy",value:function(){this._dataSource.destroy(),this._readerManager.destroy(),this._textWriterManager.destroy(),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}}])}(ct);Object.defineProperty(KG,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:NG.pluginName}),Object.defineProperty(KG,"Service",{enumerable:!0,configurable:!0,writable:!0,value:MG}),Object.defineProperty(KG,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[RG]});var YG=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"destroy",value:function(){}}])}();function GG(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,JG()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function JG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(JG=function(){return!!e})()}var XG=function(e){function t(){return(0,Ke.A)(this,t),GG(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){var n=ku()(t,"attrs.value",{}).label;e.append(n||"")}}])}(YG);function QG(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,ZG()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function ZG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ZG=function(){return!!e})()}var eJ=function(e){function t(){return(0,Ke.A)(this,t),QG(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var n,r,o,i,a,l;e.registerInlineCard(t.cardName),e.registerCommand("label",new nG),e.registerCommand("getSelectLabel",new iG),null===(n=e.getService(_S.ID))||void 0===n||n.registerLakeCardReader("label",new gG),null===(r=e.getService(RT.ID))||void 0===r||r.registerINodeCardReader(cG.CardName,new cG),null===(o=e.getService(wS.ID))||void 0===o||o.registerNodeHTMLWriter(t.cardName,new wG(this.kernel.getService(kT.ID))),null===(i=e.getService(_S.ID))||void 0===i||i.registerLakeCardWriter(t.cardName,new _G),null===(a=e.getService(tI.ID))||void 0===a||a.registerMarkdownWriter(t.cardName,new CG),null===(l=e.getService(EG.ID))||void 0===l||l.registerTextWriter(t.cardName,new XG)}}])}(ct);Object.defineProperty(eJ,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:"label"}),Object.defineProperty(eJ,"cardName",{enumerable:!0,configurable:!0,writable:!0,value:"label"});var tJ="fixed",nJ="adapt";function rJ(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,oJ()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function oJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(oJ=function(){return!!e})()}var iJ=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=rJ(this,t),Object.defineProperty(n,"_cachedValue",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"needPersistent",value:function(){return!0}},{key:"validate",value:function(e){return e===tJ||e===nJ}},{key:"beforeSetMeta",value:function(e){this._cachedValue=e}},{key:"getMeta",value:function(){return this._cachedValue}},{key:"isDefault",value:function(e){return void 0===e}}])}(vW);function aJ(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,lJ()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function lJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(lJ=function(){return!!e})()}var uJ=function(e){function t(){var e;return(0,Ke.A)(this,t),e=aJ(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(rt);function cJ(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,sJ()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function sJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(sJ=function(){return!!e})()}Object.defineProperty(uJ,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze("ILayoutService")});var dJ=function(e){function t(){return(0,Ke.A)(this,t),cJ(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"setLayout",value:function(e){this.plugin.setLayout(e)}},{key:"getLayout",value:function(){return this.plugin.getLayout()}},{key:"destroy",value:function(){}}])}(uJ),fJ=HR({pluginName:"layout",command:{layout:"layout"}});function hJ(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,pJ()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function pJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pJ=function(){return!!e})()}var vJ=function(e){function t(){return(0,Ke.A)(this,t),hJ(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(){return dt}},{key:"getValue",value:function(){return this.plugin.getLayout()}},{key:"execute",value:function(e,t){return this.plugin.setLayout(t)}}])}(gt);function mJ(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,gJ()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function gJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(gJ=function(){return!!e})()}Object.defineProperty(vJ,"ID",{enumerable:!0,configurable:!0,writable:!0,value:fJ.command.layout});var bJ=function(){return(0,$e.A)((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tJ;(0,Ke.A)(this,e),Object.defineProperty(this,"_layout",{enumerable:!0,configurable:!0,writable:!0,value:tJ}),this._layout=t}),[{key:"layout",get:function(){return this._layout}}])}();Object.defineProperty(bJ,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"layout"});var yJ=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=mJ(this,t,[e]),Object.defineProperty(r,"kernelOption",{enumerable:!0,configurable:!0,writable:!0,value:n}),r}return(0,Xe.A)(t,e),(0,$e.A)(t)}(bJ);function wJ(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,AJ()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function AJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(AJ=function(){return!!e})()}Object.defineProperty(yJ,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"layout"});var kJ=function(e){function t(){return(0,Ke.A)(this,t),wJ(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this;this.kernel.requireService(OI.ID),e.extendMethods({getLayout:function(){return t.getLayout()},setLayout:function(e){return t.setLayout(e)}})}},{key:"afterInit",value:function(){this.kernel.requireService(OI.ID).registerMeta("viewport",new iJ(this.option.layout))}},{key:"setLayout",value:function(e){if(e===nJ||e===tJ){var t=this.getLayout();this.kernel.requireService(OI.ID).setMeta("viewport",e),t!==e&&(this.kernel.emitEvent("layoutChange",e,t),this.kernel.emitPluginEvent("layoutChange",{current:e,prev:t}))}}},{key:"getLayout",value:function(){return this.kernel.requireService(OI.ID).getMeta("viewport")}}])}(ct);Object.defineProperty(kJ,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:fJ.pluginName}),Object.defineProperty(kJ,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:bJ}),Object.defineProperty(kJ,"Service",{enumerable:!0,configurable:!0,writable:!0,value:dJ}),Object.defineProperty(kJ,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[vJ]});const _J={targets:[qe.Block],values:[1,1.15,1.5,2,2.5,3]};var CJ=HR({pluginName:"lineHeight",command:{lineHeight:"lineHeight"},toolbar:"lineHeight"});function NJ(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,OJ()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function OJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(OJ=function(){return!!e})()}var xJ=function(e){function t(){var e;return(0,Ke.A)(this,t),e=NJ(this,t,arguments),Object.defineProperty(e,"attrName",{enumerable:!0,configurable:!0,writable:!0,value:"lineHeight"}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){if(Tr((0,Je.A)(t.prototype),"getState",this).call(this,e)===st)return st;var n=e.getSelection().firstRange,r=n.start,o=n.end;return r.node.closest(qe.OnlyText)||o.node.closest(qe.OnlyText)?st:dt}}])}($l);Object.defineProperty(xJ,"ID",{enumerable:!0,configurable:!0,writable:!0,value:CJ.command.lineHeight});var EJ={1:1,115:1.15,15:1.5,2:2,25:2.5,3:3},DJ={1:1,1.15:115,1.5:15,2:2,2.5:25,3:3},PJ={1:1,1.15:1.15,1.5:1.5,2:2,2.5:2.5,3:3,default:null};function RJ(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,SJ()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function SJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(SJ=function(){return!!e})()}var TJ=/^lake-lineheight-(\d+)$/,jJ=function(e){function t(){return(0,Ke.A)(this,t),RJ(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t,n){n.split(" ").forEach((function(t){if(TJ.test(t)){var n=EJ[RegExp.$1];n&&e.setAttr("lineHeight",n)}}))}}])}(oI),IJ=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"write",value:function(e,t,n){e.addClassName("lake-lineheight-".concat(DJ[n]))}}])}();function BJ(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,MJ()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function MJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(MJ=function(){return!!e})()}Object.defineProperty(IJ,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:["lineHeight"]});var FJ=function(e){function t(){return(0,Ke.A)(this,t),BJ(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t,n){n&&e.addStyle("line-height",n)}}])}(vB);function LJ(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,UJ()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function UJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(UJ=function(){return!!e})()}Object.defineProperty(FJ,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:["lineHeight"]});var VJ=function(e){function t(){return(0,Ke.A)(this,t),LJ(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerAttr("lineHeight",_J);var t=e.getService(wS.ID);t&&t.registerAttrHTMLWriter(FJ.AttrNames,new FJ);var n=e.getService(_S.ID);n&&n.registerLakeAttrReader("class",new jJ);var r=e.getService(_S.ID);r&&r.registerLakeAttrWriter(IJ.AttrNames,new IJ)}}])}(ct);Object.defineProperty(VJ,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:CJ.pluginName}),Object.defineProperty(VJ,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[xJ]});var HJ=o(2746),zJ=o.n(HJ);const WJ={src:{targets:["link"],values:function(e){return"string"==typeof e}},external:{targets:["link"],values:[!0,!1]}};function qJ(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,$J()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function $J(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($J=function(){return!!e})()}var KJ=function(e){function t(){var e;return(0,Ke.A)(this,t),e=qJ(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(rt);function YJ(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,GJ()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function GJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(GJ=function(){return!!e})()}Object.defineProperty(KJ,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze("ILinkKernelService")});var JJ=function(e){function t(){var e;return(0,Ke.A)(this,t),e=YJ(this,t,arguments),Object.defineProperty(e,"linkTextReadProxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"isValidURL",value:function(e){return this.plugin.option.isValidURL(e)}},{key:"transformURL",value:function(e){return this.plugin.option.transformURL(e)}},{key:"registerTextReadProxy",value:function(e){this.linkTextReadProxy=e}},{key:"getTextReadProxy",value:function(){return this.linkTextReadProxy}},{key:"destroy",value:function(){}}])}(KJ);const XJ={link:{parents:[qe.TextContainer],excludes:["link"],category:[qe.Inline,qe.TextContainer],children:[qe.Text]}};var QJ=HR({pluginName:"link",node:"link",toolbar:"link",command:{link:"link",unlink:"unlink",insertLink:"insertLink",linkText:"linkText",updateLink:"updateLink",cardToLink:"cardToLink",selectionPureLink:"selectionPureLink"},cardSelect:"link"});function ZJ(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,eX()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function eX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(eX=function(){return!!e})()}var tX=function(e){function t(){return(0,Ke.A)(this,t),ZJ(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=e.newJob(),l=a.getNodeById(t);if(!l)return e.cancelJob(a),!1;if(bt.fatal(l.isCardNode(),"plugins/link/src/kernel/commands/card-to-link-command.ts:26"),!n||!i&&!this.plugin.option.isValidURL(n))return e.cancelJob(a),!1;var u={src:n};o&&(u.external=!0);var c=a.createElement("link",u),s=a.createInheritTextNode(r||n,a.newPosition(l.parentNode,l.offset));if(a.appendChild(c,s),a.hasCategory(l.nodeName,qe.BlockCard)){var d=l.closest(qe.Hole),f=a.createElement(a.defaultElementName);a.appendChild(f,c),a.replaceChild(d.parentNode,f,d)}else a.replaceChild(l.parentNode,c,l);a.setSelection(a.newSelection(a.newRange(a.newPosition(c.parentNode,c.offset+1)))),e.commitJob(a)}}])}(gt);function nX(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,rX()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function rX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rX=function(){return!!e})()}Object.defineProperty(tX,"ID",{enumerable:!0,configurable:!0,writable:!0,value:QJ.command.cardToLink});var oX=function(e){function t(){return(0,Ke.A)(this,t),nX(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){if(Tr((0,Je.A)(t.prototype),"getState",this).call(this,e)===st)return st;var n=e.getSelection(),r=n.firstRange;if(!r.collapsed)return st;var o=n.firstRange,i=o.start,a=o.end;if(i.node.closest(qe.OnlyText)||a.node.closest(qe.OnlyText))return st;var l=r.start.node,u=l.isTextNode()?l.parentNode:l;return u.hasCategory([qe.Root,qe.LikeRoot])?e.acceptNode(e.defaultElementName,"link")?dt:st:u&&e.acceptNode(u.nodeName,"link")?dt:st}},{key:"execute",value:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=e.newJob();if(!n||!t||this.getState(i)===st||!o&&!this.plugin.option.isValidURL(n))return e.cancelJob(i),!1;var a={src:n};r&&(a.external=!0);var l=i.getSelection();bt.fatal(l.isCollapsed,"plugins/link/src/kernel/commands/insert-link-command.ts:87");var u=i.createElement("link",a),c=i.createInheritTextNode(t,l.firstRange.start);return i.appendChild(u,c),wr.insertInlineNode(i,l.firstRange.start,u),i.dangerDirectSetSelection(i.selectNode(u)),e.commitJob(i),u.id}}])}(Bl);function iX(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,aX()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function aX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(aX=function(){return!!e})()}Object.defineProperty(oX,"ID",{enumerable:!0,configurable:!0,writable:!0,value:QJ.command.insertLink});var lX=function(e){function t(){var e;return(0,Ke.A)(this,t),e=iX(this,t,arguments),Object.defineProperty(e,"_nodeName",{enumerable:!0,configurable:!0,writable:!0,value:"link"}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=e.newJob();if(!t||this.getState(o)===st||!r&&!this.plugin.option.isValidURL(t))return e.cancelJob(o),!1;var i={src:t};n&&(i.external=!0);var a=o.createElement("link",i),l=Go.wrapInlineNode(o,o.getSelection().firstRange,a);return Go.walkRange(l,(function(e){e.isTextNode()&&o.removeAttribute(e,"color")})),o.dangerDirectSetSelection(o.selectNode(a)),e.commitJob(o),bt.fatal(a.isConnected,"plugins/link/src/kernel/commands/link-command.ts:60"),a.id}}])}(Ul);function uX(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,cX()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function cX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(cX=function(){return!!e})()}Object.defineProperty(lX,"ID",{enumerable:!0,configurable:!0,writable:!0,value:QJ.command.link});var sX=function(e){function t(){return(0,Ke.A)(this,t),uX(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){return this._getLinkNode(e)?dt:st}},{key:"getValue",value:function(e,t){var n=this._getLinkNode(e,t);return n?n.children.map((function(e){var t=e.isTextNode();return bt.fatal(t,"plugins/link/src/kernel/commands/link-text-command.ts:36"),t?e.data:""})).join(""):null}},{key:"_getLinkNode",value:function(e,t){if(t){var n=e.getNodeById(t);return n&&"link"===n.nodeName?n:null}var r=e.getSelection();return r.rangeCount>1?null:r.firstRange.commonAncestorContainer.closest("link")}}])}(gt);function dX(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,fX()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function fX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(fX=function(){return!!e})()}Object.defineProperty(sX,"ID",{enumerable:!0,configurable:!0,writable:!0,value:QJ.command.linkText});var hX=function(e){function t(){return(0,Ke.A)(this,t),dX(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getValue",value:function(e){var t,n,r,o,i=e.getSelection(),a=null==i?void 0:i.firstRange;if(!a||i.rangeCount>1)return null;var l=null===(t=a.start)||void 0===t?void 0:t.node,u=null===(n=a.start)||void 0===n?void 0:n.offset,c=null===(r=a.end)||void 0===r?void 0:r.node,s=null===(o=a.end)||void 0===o?void 0:o.offset;return a.collapsed?this._getLinkNode(l,u-1,!0)||this._getLinkNode(c,s-1,!0):a.collapsed?null:this._getLinkNode(l,u,!0)&&this._getLinkNode(c,s,!1)}},{key:"_getLinkNode",value:function(e,t,n){var r,o;if(!e||"number"!=typeof t)return null;if((null===(r=e.isTextNode)||void 0===r?void 0:r.call(e))&&"link"===(null===(o=e.parent)||void 0===o?void 0:o.nodeName))return e.parent;if(e.hasCategory(qe.TextContainer)){var i=e.children[n?t:t-1];if("link"===(null==i?void 0:i.nodeName))return i}return null}}])}(Bl);function pX(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,vX()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function vX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vX=function(){return!!e})()}Object.defineProperty(hX,"ID",{enumerable:!0,configurable:!0,writable:!0,value:QJ.command.selectionPureLink});var mX=function(e){function t(){return(0,Ke.A)(this,t),pX(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t){var n=e.newJob(),r=n.getNodeById(t);if(this.getState(n)===st||!r||"link"!==r.nodeName)return e.cancelJob(n),!1;var o=Go.unwrapInlineNode(n,n.getSelection().firstRange,r);return n.setSelection(n.newSelection([o])),e.commitJob(n),!0}}])}(Bl);function gX(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,bX()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function bX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bX=function(){return!!e})()}Object.defineProperty(mX,"ID",{enumerable:!0,configurable:!0,writable:!0,value:QJ.command.unlink});var yX=function(e){function t(){return(0,Ke.A)(this,t),gX(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t,n){if(!n.text&&!n.src&&"boolean"!=typeof n.external)return!1;var r=e.newJob(),o=r.getNodeById(t);if(!o||"link"!==o.nodeName)return e.cancelJob(r),!1;if(n.src){if(!this.plugin.option.isValidURL(n.src))return e.cancelJob(r),!1;r.setAttribute(o,"src",n.src)}if(n.text&&this._updateLinkNodeContent(r,o,n.text),"boolean"==typeof n.external)r.setAttribute(o,"external",n.external);else if(n.src){var i=this.plugin.option.isTargetBlankURL(n.src);r.setAttribute(o,"external",i)}return r.dangerDirectSetSelection(r.selectNode(o)),e.commitJob(r),!0}},{key:"_updateLinkNodeContent",value:function(e,t,n){var r=e.createInheritTextNode(n,e.newPosition(t,0));t.children.forEach((function(n){e.removeChild(t,n)})),e.appendChild(t,r)}}])}(gt);Object.defineProperty(yX,"ID",{enumerable:!0,configurable:!0,writable:!0,value:QJ.command.updateLink});var wX={autoCompleteLink:!1,referenceURL:null,protectURL:!1,protocols:["http:","https:","data:","dingtalk:","ftp:","mailto:","fleamarket:","alipays:","qinpai:"],isValidURL:function(e,t){try{var n=new URL(e,"http://localhost/").protocol;return!!t.includes(n)}catch(e){}return!1},sanitizeURL:function(e){return yh.sanitizeUrl(e)},isTargetBlankURL:function(e,t){try{if("necustom:"===new URL(e,"necustom://me.com/").protocol)return!1}catch(e){return!0}try{var n=new URL(e,t),r=new URL(t);if(n.host===r.host)return!1}catch(e){return!0}return!0},transformURL:function(e,t){return e},allowToOpenLocal:function(e,t){return!1}},AX=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Object.assign(Object.assign({},wX),t)}),[{key:"autoCompleteLink",get:function(){return this._option.autoCompleteLink}},{key:"referenceURL",get:function(){return this._option.referenceURL||this.kernelOption.currentURL}},{key:"protectURL",get:function(){return!!this._option.protectURL}},{key:"allowToOpenLocal",value:function(e,t){return this._option.allowToOpenLocal(e,t)}},{key:"isValidURL",value:function(e){return this._option.isValidURL(e,this._option.protocols)}},{key:"sanitizeURL",value:function(e){return this._option.sanitizeURL(e)}},{key:"isTargetBlankURL",value:function(e){return this._option.isTargetBlankURL(e,this.referenceURL)}},{key:"transformURL",value:function(e){return this._option.transformURL(e,this.referenceURL)}}])}();function kX(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,_X()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function _X(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_X=function(){return!!e})()}Object.defineProperty(AX,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"link"});var CX=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=kX(this,t),Object.defineProperty(n,"_plugin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n._plugin=e,n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t){var n=t.attrs;(null==n?void 0:n.href)&&(this._plugin.option.protectURL&&!this._plugin.option.isValidURL(null==n?void 0:n.href)||e.setNode(ar.createElement("link",{src:n.href,external:"_blank"===n.target})))}}])}(lI);function NX(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,OX()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function OX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(OX=function(){return!!e})()}var xX=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=NX(this,t),Object.defineProperty(n,"_plugin",{enumerable:!0,configurable:!0,writable:!0,value:null}),n._plugin=e,n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"readNode",value:function(e,t){var n=t.attrs,r=t.children,o=this._extractLinkText(r)||(null==n?void 0:n.name),i=this._plugin.option,a=i.transformURL(null==n?void 0:n.href);if((null==n?void 0:n.href)&&i.isValidURL(null==n?void 0:n.href))if(o){e.stop();var l=ar.createElement("link",{src:a,external:i.isTargetBlankURL(a)});ar.appendChild(l,ar.createTextNode(o,e.getAttrs())),e.setNode(l)}else e.setState("link",a)}},{key:"_extractLinkText",value:function(e){var t=this;return(null==e?void 0:e.length)?e.map((function(e){return"#text"===e.name?e.data:e.children?t._extractLinkText(e.children):""})).join("").replace(/[\u200B\uFEFF]/g,"").trim():""}}])}(Ej);Object.defineProperty(xX,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["a"]});var EX={http:!0,https:!0},DX=/(?:[^a-z0-9]|^)([a-z0-9]{2,}):\/\/(?:[a-z_0-9@:.])+?(?:\/\S*?)?(?:[#\s\S]*?)?(?:(?=[\u0100-\uffff\s])|$)/gi,PX=function(){return(0,$e.A)((function e(t,n){(0,Ke.A)(this,e),Object.defineProperty(this,"pluginOption",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"service",{enumerable:!0,configurable:!0,writable:!0,value:n})}),[{key:"read",value:function(e,t){for(var n,r,o,i=[];o=DX.exec(e);)if(EX[o[1].toLowerCase()]){var a=o[0],l=o.index;/^[^a-z0-9]/i.test(o[0])&&(l+=1,a=a.substring(1)),this.pluginOption.isValidURL(a)&&i.push({index:l,url:a})}if(0===i.length)return null;var u=null===(r=null===(n=this.service)||void 0===n?void 0:n.getTextReadProxy())||void 0===r?void 0:r(i,t.originText,e);return(null==u?void 0:u.length)?u:this._generateLinkNode(i,e)}},{key:"_generateLinkNode",value:function(e,t){var n=[],r=0,o=this.pluginOption;return e.forEach((function(e){var i=e.url,a=e.index;a>r&&n.push(ar.createTextNode(t.substring(r,a)));var l=o.transformURL(i),u=ar.createElement("link",{external:o.isTargetBlankURL(l),src:l});ar.appendChild(u,ar.createTextNode(i)),n.push(u),r=a+i.length})),r<t.length&&n.push(ar.createTextNode(t.substring(r))),n}}])}();function RX(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,SX()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function SX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(SX=function(){return!!e})()}var TX=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=RX(this,t),Object.defineProperty(n,"_plugin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n._plugin=e,n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){var n,r,o=null===(n=t.attrs)||void 0===n?void 0:n.src;if(o){var i=o,a=this._plugin.option,l=a.autoCompleteLink,u=a.referenceURL;if(!(null==o?void 0:o.startsWith("#"))&&!/^[a-z0-9]+:\/\//i.test(o)&&l&&u)try{i=new URL(o,u).toString()}catch(e){}else if(u&&(null==o?void 0:o.startsWith("#")))try{var c=new URL(o,u);c.pathname=c.pathname.replace(/\/edit$/,""),i=c.toString()}catch(e){}var s={href:i,"data-href":o};(null===(r=t.attrs)||void 0===r?void 0:r.external)&&(s.target="_blank"),e.setNode(e.createElement("a",{attrs:s,className:"ne-link"}))}}}])}(lT);function jX(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,IX()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function IX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(IX=function(){return!!e})()}Object.defineProperty(TX,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["link"]});var BX=function(e){function t(){return(0,Ke.A)(this,t),jX(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){var n=t.attrs,r=void 0===n?{}:n,o={href:r.src};r.external&&(o.target="_blank"),e.setNode(e.createElement("a",{attrs:o}))}}])}(vT);Object.defineProperty(BX,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["link"]});var MX=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"write",value:function(e,t){var n;return e.appendFirst("["),e.append("](".concat((null===(n=t.attrs)||void 0===n?void 0:n.src)||"",")")),!0}}])}(),FX=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_plugin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._plugin=t}),[{key:"read",value:function(e,t){var n;if(e.from===MT&&!e.self){var r=null===(n=t.attrs)||void 0===n?void 0:n.src;if("string"==typeof r)return r.startsWith("#")?this.updateNodeWithFullSrc(e,t):this.updateNodeWithHash(e,t)}}},{key:"updateNodeWithFullSrc",value:function(e,t){var n,r;try{if(!(r=e._option.clipboardPayload).getData)throw new Error("getData is not existed")}catch(e){return void console.error(e)}var o=r.getData("text/html");if("string"==typeof o){var i=decodeURIComponent((null===(n=o.match(/<ne-clipboard[^>]+(?:source=")([^"]+)"/))||void 0===n?void 0:n[1])||"").split("#")[0];i&&ar.setAttribute(t,{src:i+t.attrs.src})}}},{key:"updateNodeWithHash",value:function(e,t){var n,r=this._plugin.option.transformURL(null===(n=t.attrs)||void 0===n?void 0:n.src);r.startsWith("#")&&ar.setAttribute(t,{src:r})}},{key:"destroy",value:function(){}}])}(),LX=HR({pluginName:"kernelAssistant",service:{IKernelAssistantService:"IKernelAssistantService"}});function UX(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,VX()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function VX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(VX=function(){return!!e})()}var HX=function(e){function t(){var e;return(0,Ke.A)(this,t),e=UX(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(rt);function zX(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,WX()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function WX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(WX=function(){return!!e})()}Object.defineProperty(HX,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze(LX.service.IKernelAssistantService)});var qX=function(e){function t(){var e;return(0,Ke.A)(this,t),e=zX(this,t,arguments),Object.defineProperty(e,"nodeAttrProcessor",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t){return e.closest("link")?zJ()(t,["color","bgColor"]):t}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t,n,r=this;e.registerElement(XJ),e.registerAttr(WJ),e.extendMethods({isValidURL:function(){var e;return(e=r.option).isValidURL.apply(e,arguments)},transformURL:function(){var e;return(e=r.option).transformURL.apply(e,arguments)}});var o=e.getService(wS.ID);o&&o.registerHTMLNodeReader(xX.NodeNames,new xX(this));var i=e.getService(wS.ID);i&&i.registerNodeHTMLWriter(TX.NodeNames,new TX(this));var a=e.getService(EG.ID);a&&a.registerTextReader(new PX(this.option,this.service));var l=e.getService(_S.ID);l&&l.registerLakeNodeReader("a",new CX(this));var u=e.getService(_S.ID);u&&u.registerLakeNodeWriter(BX.NodeNames,new BX);var c=e.getService(W$.ID);c&&c.registerINodeNodePreReader(QJ.node,new FX(this)),null===(t=e.getService(tI.ID))||void 0===t||t.registerMarkdownWriter("link",new MX),null===(n=e.getService(HX.ID))||void 0===n||n.registerBeforeInsertTextInheritAttrs(this.nodeAttrProcessor),this._initMarkdownKey()}},{key:"_initMarkdownKey",value:function(){var e=this.kernel.getService(DS.ID);e&&e.registerMarkdownMatcher(CS.whiteSpace,new IT(this.editing,{match:/\[(.+?)]\(([\S]+?)\)$/,exclude:/!\[(.+?)]\(([\S]+?)\)$/},(function(e,t,n,r){var o=r.matched,i=e.newPosition(n,o.index),a=o[1],l=o[2],u=e.createElement("link",{src:l}),c=e.createInheritTextNode(a,i);e.appendChild(u,c),wr.insertInlineNode(e,i,u),e.setSelection(e.newSelection(e.newRange(e.newPosition(u.parentNode,u.offset+1))))})))}}])}(ct);Object.defineProperty(qX,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:QJ.pluginName}),Object.defineProperty(qX,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:AX}),Object.defineProperty(qX,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[lX,mX,oX,sX,yX,tX,hX]}),Object.defineProperty(qX,"Service",{enumerable:!0,configurable:!0,writable:!0,value:JJ});var $X=HR({pluginName:"list",node:{oli:"oli",uli:"uli",tli:"tli"},domNode:{oli:"ne-oli","oli-i":"ne-oli-i","oli-c":"ne-oli-c",tli:"ne-tli","tli-i":"ne-tli-i","tli-c":"ne-tli-c",uli:"ne-uli","uli-i":"ne-uli-i","uli-c":"ne-uli-c"},attr:{list:"list",fid:"fid",level:"level",index:"index",start:"start",indexStyle:"indexStyle",indexType:"indexType",parentIndex:"parentIndex",checked:"checked",version:"version"},service:{listDataProcessService:"IListDataProcessService"},command:{orderedList:"orderedList",unorderedList:"unorderedList",taskList:"taskList",orderedListIndexType:"orderedListIndexType",orderedListIndexQuery:"orderedListIndexQuery",taskStatus:"taskStatus"},toolbar:{orderedList:"orderedList",unorderedList:"unorderedList",taskList:"taskList",notetaskList:"notetaskList","note-taskList-black":"note-taskList-black"},cardSelect:{orderedList:"orderedList",unorderedList:"unorderedList",taskList:"taskList"}});function KX(e,t,n,r){var o={configurable:!0,enumerable:!0};return o[e]=r,Object.defineProperty(t,n,o)}for(var YX=8,GX=["bold","italic","fontsize","color"],JX="headingIndexTypeChange",XX=[$X.node.oli,$X.node.tli,$X.node.uli],QX={orderedList:$X.node.oli,unorderedList:$X.node.uli,taskList:$X.node.tli},ZX=(0,Ha.A)((0,Ha.A)((0,Ha.A)({},$X.node.oli,{mainIcon:"editor-main-ordered-list",icon:"t-order-list"}),$X.node.uli,{mainIcon:"editor-main-unordered-list",icon:"t-unorder-list"}),$X.node.tli,{mainIcon:"editor-main-task-list",icon:"t-task-list"}),eQ=KX("get",KX("get",KX("get",{},$X.node.oli,(function(){return sc("有序列表")})),$X.node.uli,(function(){return sc("无序列表")})),$X.node.tli,(function(){return sc("任务列表")})),tQ=[],nQ=1;nQ<=YX;nQ++)tQ.push(nQ);const rQ=(0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)({},$X.attr.list,{targets:[qe.Level]}),$X.attr.fid,{targets:[qe.Level]}),$X.attr.level,{targets:[qe.Level],values:tQ}),$X.attr.index,{targets:[qe.Level]}),$X.attr.start,{targets:[qe.Level]}),$X.attr.indexStyle,{targets:[qe.Level]}),$X.attr.indexType,{targets:[qe.Level,qe.Heading]}),$X.attr.parentIndex,{targets:[qe.Level]}),$X.attr.checked,{targets:[$X.node.tli],values:[!0],cleanByBreakLine:!0}),$X.attr.version,{targets:[$X.node.tli],cleanByBreakLine:!0});function oQ(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,iQ()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function iQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(iQ=function(){return!!e})()}var aQ=function(e){function t(){var e;return(0,Ke.A)(this,t),e=oQ(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(rt);function lQ(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,uQ()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function uQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(uQ=function(){return!!e})()}Object.defineProperty(aQ,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze($X.service.listDataProcessService)});var cQ=function(e){function t(){var e;return(0,Ke.A)(this,t),e=lQ(this,t,arguments),Object.defineProperty(e,"_processer",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"registerProcesser",value:function(e){bt.fatal(null===this._processer,"plugins/list/src/kernel/list-data-process-service.ts:9"),this._processer=e}},{key:"getProcesser",value:function(){return this._processer}},{key:"destroy",value:function(){}}])}(aQ);const sQ=(0,Ha.A)((0,Ha.A)((0,Ha.A)({},$X.node.oli,{parents:["#root",qe.LikeRoot],category:[qe.Block,qe.Sticky,qe.DisallowEmpty,qe.Level,qe.TextContainer,qe.Brick],standardAttrs:[$X.attr.list,$X.attr.level,$X.attr.start,$X.attr.fid,$X.attr.index,$X.attr.indexStyle,$X.attr.checked]}),$X.node.uli,{parents:["#root",qe.LikeRoot],category:[qe.Block,qe.Sticky,qe.DisallowEmpty,qe.Level,qe.TextContainer,qe.Brick],standardAttrs:[$X.attr.list,$X.attr.level,$X.attr.start,$X.attr.fid,$X.attr.index,$X.attr.indexStyle,$X.attr.checked]}),$X.node.tli,{parents:["#root",qe.LikeRoot],category:[qe.Block,qe.Sticky,qe.Clean,qe.DisallowEmpty,qe.Level,qe.TextContainer,qe.Brick],standardAttrs:[$X.attr.list,$X.attr.level,$X.attr.start,$X.attr.fid,$X.attr.index,$X.attr.indexStyle,$X.attr.checked]});var dQ=0,fQ=2;function hQ(){return dQ}function pQ(e){dQ=e}function vQ(){return fQ}function mQ(e){fQ=e}function gQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function bQ(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,yQ()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function yQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(yQ=function(){return!!e})()}var wQ=[qe.Heading],AQ=function(e){function t(){return(0,Ke.A)(this,t),bQ(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getValue",value:function(e,t){var n,r=t?e.getNodeById(t):e.getSelection().firstRange.start.node.closest(qe.Block);return(null==r?void 0:r.hasCategory(wQ))&&null!==(n=r.attrs.indexType)&&void 0!==n?n:null}},{key:"getState",value:function(e){return Tr((0,Je.A)(t.prototype),"getState",this).call(this,e)===st?st:t.isHeadingSelection(e.getSelection())?dt:st}},{key:"execute",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vQ(),r=arguments.length>2?arguments[2]:void 0,o=e.newJob(),i=null;if(r){if(!(null==(i=o.getNodeById(r))?void 0:i.hasCategory(wQ)))return e.cancelJob(o),!1;if(!(null==i?void 0:i.hasCategory(wQ)))return e.cancelJob(o),!1;i.attrs.indexType===n?o.removeAttribute(i,"indexType"):t.setBlockNodeIndexType(o,i,n)}else{if(this.getState(o)===st)return e.cancelJob(o),!1;var a=t.isHeadingSelection(o.getSelection());bt.fatal(a,"plugins/list/src/kernel/commands/index-type-command.ts:82");var l,u=a.every((function(e){return e.attrs.indexType===n})),c=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return gQ(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gQ(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(a);try{for(c.s();!(l=c.n()).done;){var s=l.value;u?o.removeAttribute(s,"indexType"):t.setBlockNodeIndexType(o,s,n)}}catch(e){c.e(e)}finally{c.f()}}return o.setSelection(o.getSelection()),e.commitJob(o),!0}}],[{key:"isHeadingSelection",value:function(e){var t,n,r,o,i=e.firstRange,a=i.start,l=i.end;a.node.isRootNode()&&l.node.isRootNode()?(r=a.node.children[a.offset],o=l.node.children[l.offset]||l.node.children[l.offset-1]):(r=a.node.closest(qe.Block),o=l.node.closest(qe.Block));var u=new Set;if((null==r?void 0:r.hasCategory(qe.Heading))&&(null===(t=r.parent)||void 0===t?void 0:t.isRootNode())&&(null==o?void 0:o.hasCategory(qe.Heading))&&(null===(n=o.parentNode)||void 0===n?void 0:n.isRootNode())){var c=r;for(u.add(c);c&&c!==o;){if(u.add(c),!c.hasCategory(qe.Heading))return null;c=c.nextSibling}return u.add(o),Array.from(u)}return null}},{key:"setBlockNodeIndexType",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vQ();e.setAttribute(t,"indexType",n),mQ(n),e.document.getNodesByCategory(qe.Heading).filter((function(e){var t;return e.isConnected&&(null===(t=e.parentNode)||void 0===t?void 0:t.isRootNode())})).forEach((function(r){r!==t&&"number"==typeof r.attrs.indexType&&r.attrs.indexType!==n&&e.setAttribute(r,"indexType",n)}))}},{key:"getCurrentIndexType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vQ();return e.document.getNodesByCategory(qe.Heading).filter((function(e){var t;return e.isConnected&&(null===(t=e.parentNode)||void 0===t?void 0:t.isRootNode())})).find((function(e){return"number"==typeof e.attrs.indexType&&(t=e.attrs.indexType,!0)})),t}}])}(Ml);function kQ(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,_Q()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function _Q(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_Q=function(){return!!e})()}var CQ=function(e){function t(){var e;return(0,Ke.A)(this,t),e=kQ(this,t,arguments),Object.defineProperty(e,"nodeName",{enumerable:!0,configurable:!0,writable:!0,value:$X.node.oli}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getValue",value:function(e,t){var n=this.nodeName,r=e.getNodeById(t);if(!r||r.nodeName!==n)return null;var o=r.attrs.list,i=e.getNodesByName(n).filter((function(e){return e.isConnected}));if(i.find((function(e){return e.attrs.list===o&&Ut.compare(e,r).preceding})))return[!0,!1,r.attrs.indexType];var a={},l=i.find((function(e){var t=e.attrs.list;return!a[t]&&t!==o&&(a[t]=e,Ut.compare(e,r).preceding)}));return[r.attrs.start,!!l,r.attrs.indexType]}},{key:"execute",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.newJob(),o=this.nodeName,i=r.getNodeById(t);if(!i||i.nodeName!==o)return e.cancelJob(r),!1;var a=i.attrs.list;if(i.attrs.fid,n){var l=r.getNodesByName(o).filter((function(e){return e.attrs.list===a&&Ut.compare(e,i).following})),u=Pr();return r.removeAttribute(i,$X.attr.fid),r.removeAttribute(i,$X.attr.start),r.setAttribute(i,$X.attr.list,u),l.forEach((function(e){r.removeAttribute(e,$X.attr.fid),r.setAttribute(e,$X.attr.list,u)})),e.commitJob(r),!0}var c=r.getNodesByName(o).filter((function(e){return e.isConnected})),s={};c.forEach((function(e){var t=e.attrs.list;s[t]||t===a||(s[t]=e)}));var d=Object.values(s).filter((function(e){return e.isConnected&&Ut.compare(e,i).preceding})).sort((function(e,t){var n=Ut.compare(e,t);return n.preceding?-1:(bt.fatal(n.following,"plugins/list/src/kernel/commands/list-ordered-index-command.ts:109"),1)}));if(0===d.length)return e.cancelJob(r),!1;var f=d[d.length-1].attrs.list;return r.removeAttribute(i,$X.attr.fid),r.setAttribute(i,$X.attr.list,f),c.forEach((function(e){e.attrs.list===a&&(r.removeAttribute(e,$X.attr.fid),r.setAttribute(e,$X.attr.list,f))})),e.commitJob(r),!0}}])}(Bl);function NQ(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,OQ()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function OQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(OQ=function(){return!!e})()}Object.defineProperty(CQ,"ID",{enumerable:!0,configurable:!0,writable:!0,value:$X.command.orderedListIndexQuery});var xQ=function(e){function t(){var e;return(0,Ke.A)(this,t),e=NQ(this,t,arguments),Object.defineProperty(e,"nodeName",{enumerable:!0,configurable:!0,writable:!0,value:$X.node.oli}),Object.defineProperty(e,"categories",{enumerable:!0,configurable:!0,writable:!0,value:[$X.node.oli,qe.Heading]}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getValueByHeading",value:function(e){var t=e.firstRange,n=t.start,r=t.end,o=n.node.closest(qe.Block);return o&&o.hasCategory(qe.Heading)&&o===r.node.closest(qe.Block)&&o.attrs.indexType||null}},{key:"getValue",value:function(e){var t=new Set,n=!1,r=e.getSelection(),o=r.firstRange.start.node.closest([qe.Block]);return o&&o.hasCategory(qe.Heading)?this.getValueByHeading(r):(wi.fullWalkSelection(r,{enter:function(e){return!n&&(e.hasCategory(qe.TextContainer)?(bt.fatal(e.isElement(),"plugins/list/src/kernel/commands/list-ordered-type-command.ts:52"),e.hasCategory("oli")?t.add(e.attrs.indexType):Ut.isLikeEmptyElement(e)||(n=!0),!1):void 0)}}),n||1!==t.size?null:Array.from(t)[0])}},{key:"execute",value:function(e,t,n){var r=e.newJob(),o=this.categories,i=r.getNodeById(t);return i&&i.hasCategory(o)&&"number"==typeof n?(pQ(n),r.setAttribute(i,$X.attr.indexType,n),e.commitJob(r),!0):(e.cancelJob(r),!1)}}])}(Bl);function EQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function DQ(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,PQ()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function PQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(PQ=function(){return!!e})()}Object.defineProperty(xQ,"ID",{enumerable:!0,configurable:!0,writable:!0,value:$X.command.orderedListIndexType});var RQ=function(e){function t(e,n,r,o){var i;return(0,Ke.A)(this,t),i=DQ(this,t,[e,n,r]),Object.defineProperty(i,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(i,"editing",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(i,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(i,"_nodeName",{enumerable:!0,configurable:!0,writable:!0,value:o}),i}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){if(Tr((0,Je.A)(t.prototype),"getState",this).call(this,e)===st)return st;var n=e.getSelection().firstRange,r=n.start,o=n.end;return r.node.closest(qe.OnlyText)||o.node.closest(qe.OnlyText)?st:this.getValue(e)===this._nodeName?ft:dt}},{key:"getValue",value:function(e){var t=this._getNodes(e);if(!t)return null;var n=new Set;return t.forEach((function(e){return n.add(e.nodeName)})),1!==n.size?null:Array.from(n)[0]}},{key:"execute",value:function(e,n){var r=this,o=e.newJob(),i=o.getSelection();if(this._nodeName===$X.node.oli){var a=AQ.isHeadingSelection(i);if(a){void 0===n&&(n=vQ());var l,u=a.every((function(e){return e.attrs.indexType===n})),c=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return EQ(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?EQ(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(a);try{for(c.s();!(l=c.n()).done;){var s=l.value;u?o.removeAttribute(s,"indexType"):AQ.setBlockNodeIndexType(o,s,n)}}catch(e){c.e(e)}finally{c.f()}return o.setSelection(i),void e.commitJob(o)}void 0!==n&&pQ(n)}void 0===n&&(n=hQ());var d=i;if(this.getState(o)===t.NOT_EXECUTED)d=wi.replaceBlockNode(o,i,o.createElement(this._nodeName,this._nodeName===$X.node.oli?{list:Pr(),indexType:n}:{list:Pr()}),(function(e,t,o){var i=function(e,t,n){TQ(e,t,n,jQ)}(e,t,o);return r._nodeName===$X.node.oli&&e.setAttribute(t,$X.attr.indexType,n),i}),!0);else{var f=this._getNodes(o);f&&f[0].nodeName===$X.node.oli&&f[0].attrs.indexType!==n?f.forEach((function(e){o.setAttribute(e,$X.attr.indexType,n)})):d=wi.replaceBlockNode(o,i,o.createElement(o.defaultElementName),SQ,!0)}return o.setSelection(d),e.commitJob(o),!0}},{key:"_getNodes",value:function(e){var t=this._nodeName,n=new Set,r=!1;return wi.fullWalkSelection(e.getSelection(),{enter:function(e){return!r&&(e.hasCategory(qe.TextContainer)?(bt.fatal(e.isElement(),"plugins/list/src/kernel/commands/list-command.ts:167"),e.hasCategory(t)?n.add(e):Ut.isLikeEmptyElement(e)||(r=!0),!1):void 0)}}),r?null:Array.from(n)}}])}(Bl);function SQ(e,t,n){TQ(e,t,n,IQ)}function TQ(e,t,n,r){if(n.attrs){var o=Object.assign({},n.attrs);r(e,o,t),Object.keys(o).forEach((function(n){var r=o[n];e.acceptAttr(t.nodeName,n,r)&&e.setAttribute(t,n,r)}))}}function jQ(e,t,n){var r=(t.textIndent||0)+(t.indent||0);0!==r&&(e.setAttribute(n,$X.attr.level,r),delete t.textIndent,delete t.indent)}function IQ(e,t,n){t.level&&(e.setAttribute(n,"indent",t.level),delete t.level)}function BQ(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,MQ()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function MQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(MQ=function(){return!!e})()}var FQ=function(e){function t(e,n,r){var o;return(0,Ke.A)(this,t),o=BQ(this,t,[e,n,r,$X.node.oli]),Object.defineProperty(o,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(o,"editing",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(o,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:r}),o}return(0,Xe.A)(t,e),(0,$e.A)(t)}(RQ);function LQ(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,UQ()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function UQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(UQ=function(){return!!e})()}Object.defineProperty(FQ,"ID",{enumerable:!0,configurable:!0,writable:!0,value:$X.command.orderedList});var VQ=function(e){function t(){return(0,Ke.A)(this,t),LQ(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t,n,r){var o=e.newJob(),i=o.getNodeById(t);if(!i||i.nodeName!==$X.node.tli)return!1;var a=n;if(void 0===n)a=!i.attrs.checked;else if(i.attrs.checked===n)return!0;return a?o.setAttribute(i,$X.attr.checked,a):o.removeAttribute(i,$X.attr.checked),o.setAttribute(i,$X.attr.version,r||+new Date),e.commitJob(o),!0}}])}(gt);function HQ(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,zQ()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function zQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(zQ=function(){return!!e})()}Object.defineProperty(VQ,"ID",{enumerable:!0,configurable:!0,writable:!0,value:$X.command.taskStatus});var WQ=function(e){function t(e,n,r){var o;return(0,Ke.A)(this,t),o=HQ(this,t,[e,n,r,$X.node.tli]),Object.defineProperty(o,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(o,"editing",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(o,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:r}),o}return(0,Xe.A)(t,e),(0,$e.A)(t)}(RQ);function qQ(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,$Q()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function $Q(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($Q=function(){return!!e})()}Object.defineProperty(WQ,"ID",{enumerable:!0,configurable:!0,writable:!0,value:$X.command.taskList});var KQ=function(e){function t(e,n,r){var o;return(0,Ke.A)(this,t),o=qQ(this,t,[e,n,r,$X.node.uli]),Object.defineProperty(o,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(o,"editing",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(o,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:r}),o}return(0,Xe.A)(t,e),(0,$e.A)(t)}(RQ);Object.defineProperty(KQ,"ID",{enumerable:!0,configurable:!0,writable:!0,value:$X.command.unorderedList});var YQ={个:1,十:10,百:100,千:1e3,万:1e4},GQ={零:0,一:1,二:2,三:3,四:4,五:5,六:6,七:7,八:8,九:9};function JQ(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,XQ()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function XQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(XQ=function(){return!!e})()}var QQ={enableDynamic:!1,allFromStart:!1,onAfterKernelPluginInit:function(){},onAfterViewerPluginInit:function(){},getInitialHeadingIndex:function(){return[Number.MAX_VALUE]}},ZQ=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Ww()({},QQ,t)}),[{key:"enableDynamic",get:function(){return this._option.enableDynamic}},{key:"allFromStart",get:function(){return this._option.allFromStart}},{key:"getInitialHeadingIndex",get:function(){return this._option.getInitialHeadingIndex}},{key:"onAfterKernelPluginInit",get:function(){return this._option.onAfterKernelPluginInit}},{key:"onAfterViewerPluginInit",get:function(){return this._option.onAfterViewerPluginInit}}])}();Object.defineProperty(ZQ,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"list"});var eZ=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=JQ(this,t,[e]),Object.defineProperty(r,"kernelOption",{enumerable:!0,configurable:!0,writable:!0,value:n}),r}return(0,Xe.A)(t,e),(0,$e.A)(t)}(ZQ);Object.defineProperty(eZ,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"list"});var tZ=["零","一","二","三","四","五","六","七","八","九"],nZ=["","十","百","千","万"];function rZ(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e>1e4)return rZ(Math.floor(e/1e4))+"万"+rZ(e%1e4,e%1e4<1e3);for(var n=e.toString(),r="",o=0;o<n.length;o++){var i=parseInt(n[o]);if(0===i){if(t)continue;t=!0}else t&&(r+="零"),t=!1,r+=tZ[i],r+=nZ[n.length-o-1]}return r}function oZ(e){return rZ(e).replace(/^一十/,"十")}var iZ=97,aZ=[["","ⅰ","ⅱ","ⅲ","ⅳ","ⅴ","ⅵ","ⅶ","ⅷ","ⅸ"],["","X","XX","XXX","XL","L","LX","LXX","LXXX","XC"],["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM"],["","M","MM","MMM"]];function lZ(e,t){return 0==(t=(t||0)%3)?function(e){return e+1+""}(e):1===t?uZ(e):function(e){var t=[];return e+=1,t.push(aZ[3][Math.floor(e/1e3)%10]),t.push(aZ[2][Math.floor(e/100)%10]),t.push(aZ[1][Math.floor(e/10)%10]),t.push(aZ[0][e%10]),t.join("")}(e)}function uZ(e){if(e<26)return String.fromCodePoint(iZ+e);var t=String.fromCodePoint(iZ+e%26);return uZ(Math.floor(e/26)-1)+t}function cZ(e,t,n){for(var r=[].concat((0,ln.A)(n),[e]);r.length<t+1;)r.unshift(0);return r.map((function(e){return(e||0)+1})).join(".")}var sZ=0,dZ=1,fZ=2;function hZ(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:sZ;return r===sZ?lZ(e,t):r===dZ?function(e,t){return e+=1,0==(t=(t||0)%3)?oZ(e):1===t?"(".concat(oZ(e),")"):e+""}(e,t):r===fZ?cZ(e,t,n):lZ(e,t)}function pZ(e,t,n){for(var r=n,o=0;o<e.length;o++)r=t(r,"number"==typeof e[o]?e[o]:0,o,e);return r}function vZ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var mZ=function(){return(0,$e.A)((function e(t,n){(0,Ke.A)(this,e),Object.defineProperty(this,"iKernel",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"iEditing",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"_nodes",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"_hasChangeIndexType",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"shouldReCompute",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"idToInfoMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),this.compute()}),[{key:"startWork",value:function(){var e=this;this.compute();var t=this.iKernel,n=this.iEditing;xc(this,n,"nodechange",(function(t){var n,r,o,i,a,l=t.node,u=t.type,c=t.attrName;l.isTextNode()||l.hasCategory(qe.InlineCard)?"attribute"===u&&GX.includes(c)?(null===(n=l.parent)||void 0===n?void 0:n.firstChild)===l&&(null===(r=l.parent)||void 0===r?void 0:r.hasCategory(qe.Heading))&&(e._hasChangeIndexType=!0):"insert"!==u&&"remove"!==u||(null===(o=l.parent)||void 0===o?void 0:o.firstChild)===l&&(null===(i=l.parent)||void 0===i?void 0:i.hasCategory(qe.Heading))&&(e._hasChangeIndexType=!0):l.hasCategory(qe.Heading)&&("insert"===u&&(null===(a=l.parentNode)||void 0===a?void 0:a.isRootNode())||"remove"===u?(e._nodes.add(l),e.shouldReCompute=!0):"attribute"===u&&"indexType"===c&&(e.shouldReCompute=!0,e._hasChangeIndexType=!0))})),xc(this,n,"beforecontentchange",(function(){if(e._nodes.size>0){var r=n.newJob(We.Auto);try{var o=r.document.getNodesByCategory(qe.Heading).filter((function(e){var t;return e.isConnected&&(null===(t=e.parentNode)||void 0===t?void 0:t.isRootNode())})).sort((function(e,t){return Ut.compare(e,t).preceding?-1:1}));e.newNodeAddIndexType(r,o),n.commitJob(r),e._hasChangeIndexType=!1,t.emitPluginEvent(JX,!0)}catch(e){n.cancelJob(r)}e._nodes.clear()}e._hasChangeIndexType&&(e._hasChangeIndexType=!1,t.emitPluginEvent(JX,!0))})),xc(this,t,"contentchange",(function(){e.shouldReCompute&&(e.shouldReCompute=!1,e.compute())}))}},{key:"getHeadingIndexInfo",value:function(e){return e&&this.idToInfoMap.get(e)||null}},{key:"newNodeAddIndexType",value:function(e,t){this._nodes.forEach((function(n){var r;if(null===(r=n.parent)||void 0===r?void 0:r.isRootNode())for(var o=Number(n.nodeName.slice(1))||0,i=t.indexOf(n),a=t[i-1];a;){if((Number(a.nodeName.slice(1))||0)<=o)return void("number"==typeof a.attrs.indexType&&e.setAttribute(n,"indexType",a.attrs.indexType));a=t[(i-=1)-1]}else"number"==typeof n.attrs.indexType&&e.removeAttribute(n,"indexType")}))}},{key:"destroy",value:function(){}},{key:"compute",value:function(){var e=this;if(this.iKernel.document){this.idToInfoMap.clear();var t,n=[0,0,0,0,0,0],r=[],o=Number.MAX_VALUE,i=[],a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return vZ(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vZ(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(this.iKernel.document.rootNode.children);try{for(a.s();!(t=a.n()).done;){var l=t.value;if(l.hasCategory(qe.Heading)){var u=Number(l.nodeName.slice(1))-1;r=r.slice(0,u+1),"number"==typeof l.attrs.indexType&&(n[u]=1,o=Math.min(u,o),"number"==typeof r[u]?r[u]++:r[u]=0,i.push({headingIndex:r.slice(0),headingLevel:u,node:l}))}}}catch(e){a.e(e)}finally{a.f()}for(var c=n.reduce((function(e,t,n){return t&&(e[n]=e._currentIndex++),e}),{_currentIndex:0}),s=function(){var t=f[d],r=t.node,i=t.headingIndex,a=t.headingLevel,l=pZ(i,(function(e,t,r){return n[r]&&r<=a&&e.push(t),e}),[]);e.idToInfoMap.set(r.id,{index:i[a],indexType:r.attrs.indexType,level:a-o,parentIndex:i.slice(o,a),symbol:e._getIndexText(l[c[a]],r.attrs.indexType,c[a],l.slice(0,c[a]))})},d=0,f=i;d<f.length;d++)s()}}},{key:"_getIndexText",value:function(e,t,n,r){try{return function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:sZ;return r===sZ?lZ(e,t)+". ":r===dZ?function(e,t){return e+=1,0==(t=(t||0)%3)?oZ(e)+"、":1===t?"(".concat(oZ(e),") "):e+". "}(e,t):r===fZ?cZ(e,t,n)+". ":void 0}(e,n,r,t)||""}catch(e){console.error(e)}return""}}])}(),gZ=function(){return(0,$e.A)((function e(t,n){(0,Ke.A)(this,e),Object.defineProperty(this,"_fid",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_level",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_indexType",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_parentNodes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_nodes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this._fid=t||Pr(),this._parentNodes=(n||[]).slice(0,-1)}),[{key:"updateTopNodes",value:function(e){this._parentNodes=(e||[]).slice(0,-1)}},{key:"level",get:function(){return this._level}},{key:"addNode",value:function(e){bt.fatal(!this._nodes.includes(e),"plugins/list/src/kernel/lib/list-fragment.ts:31"),0===this._nodes.length&&(this._level=e.attrs.level||0,this._indexType=e.attrs.indexType||0),this._nodes.push(e)}},{key:"reset",value:function(e,t){var n,r,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this._fid,a=(null===(r=null===(n=this._nodes[0])||void 0===n?void 0:n.attrs)||void 0===r?void 0:r.start)||0,l=o?a:0,u=this._parentNodes.map((function(e){return e.getAttribute($X.attr.index)}));this._nodes.forEach((function(n,r){var o,c;e.setAttribute(n,$X.attr.fid,i),e.setAttribute(n,$X.attr.indexType,t),o=u,c=n.attrs.parentIndex,!!Array.isArray(c)&&o.length===c.length&&!!o.every((function(e,t){return e===c[t]}))||e.setAttribute(n,$X.attr.parentIndex,u),a?e.setAttribute(n,$X.attr.start,a):e.removeAttribute(n,$X.attr.start),e.setAttribute(n,$X.attr.index,l+r)}))}}])}(),bZ=function(){return(0,$e.A)((function e(t,n,r){(0,Ke.A)(this,e),Object.defineProperty(this,"_listId",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_type",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"_allResetFromStart",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"_indexType",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_nodes",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),bt.fatal(t,"plugins/list/src/kernel/lib/list.ts:16"),bt.fatal(n===$X.node.uli||n===$X.node.oli||n===$X.node.tli,"plugins/list/src/kernel/lib/list.ts:17")}),[{key:"id",get:function(){return this._listId}},{key:"addNode",value:function(e){0===this._nodes.size&&(this._indexType=e.attrs.indexType||0),this._nodes.add(e)}},{key:"isEmpty",value:function(){return 0===this._nodes.size}},{key:"removeNode",value:function(e){this._nodes.delete(e)}},{key:"acceptNode",value:function(e){return e.nodeName===this._type}},{key:"setNewIndexType",value:function(e){this._indexType=e}},{key:"reset",value:function(e){var t=this,n=this._listId,r=this._allResetFromStart,o=Array.from(this._nodes).filter((function(e){var t;return e.isConnected&&(null===(t=e.attrs)||void 0===t?void 0:t.list)===n}));o.sort((function(e,t){var n=Ut.compare(e,t);return n.preceding?-1:(bt.fatal(n.following,"plugins/list/src/kernel/lib/list.ts:64"),1)}));var i=[],a=[],l=[];o.forEach((function(e){var t=e.attrs,n=t.level,r=void 0===n?0:n,o=t.fid;l.splice(r,Number.MAX_VALUE),l[r]=e;var u=yZ(a);if(!u)return u=new gZ(o,l.slice(0)),i.push(u),a.push(u),void u.addNode(e);for(;a.length&&r<u.level;)a.pop(),u=yZ(a);if(!u||r<u.level)return bt.fatal(0===a.length,"plugins/list/src/kernel/lib/list.ts:95"),u=new gZ(o,l.slice(0)),i.push(u),a.push(u),void u.addNode(e);r===u.level?(u.updateTopNodes(l.slice(0)),u.addNode(e)):(u=new gZ(o,l.slice(0)),i.push(u),a.push(u),u.addNode(e))})),i.forEach((function(n,o){n.reset(e,t._indexType,r||0===o)}))}}])}();function yZ(e){return e[e.length-1]||null}function wZ(e,t,n){var r,o=[];if(AZ(t,o),0!==o.length){var i=Object.assign({},null===(r=t.attrs)||void 0===r?void 0:r.indexStyle);n.forEach((function(e){var t=new Set;o.forEach((function(n){var r;t.add(null===(r=n.attrs)||void 0===r?void 0:r[e])}));var n=Array.from(t);0===n.length?delete i[e]:1===n.length&&(n[0]?i[e]=n[0]:delete i[e])})),0===i.size?e.removeAttribute(t,$X.attr.indexStyle):e.setAttribute(t,$X.attr.indexStyle,i)}else e.removeAttribute(t,$X.attr.indexStyle)}function AZ(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.isTextNode()||e.isCardNode()&&e.hasCategory(qe.InlineCard)?t.push(e):e.isElement()&&e.children.forEach((function(e){return AZ(e,t)})),t}var kZ=function(){return(0,$e.A)((function e(t,n,r){var o=this;(0,Ke.A)(this,e),Object.defineProperty(this,"_allResetFromStart",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"iKernel",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"iEditing",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"_lists",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_allowContinue",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_change",{enumerable:!0,configurable:!0,writable:!0,value:new Map});var i=new Map;xc(this,this.iEditing,"nodechange",(function(e){var t=e.node,n=e.type,r=e.attrName,a=e.value;if(t.isTextNode()||t.hasCategory(qe.InlineCard)){if("attribute"===n&&GX.includes(r)){var l=Ut.closest(t,[$X.node.oli,$X.node.uli]);l&&i.set(l,Object.assign(Object.assign({},i.get(l)),(0,Ha.A)({},r,!0)))}else if("insert"===n||"remove"===n){var u=Ut.closest(t,[$X.node.oli,$X.node.uli]);u&&i.set(u,"*")}}else{var c=t.nodeName;c!==$X.node.oli&&c!==$X.node.uli||"insert"===n&&i.set(t,"*"),t.hasCategory(qe.Level)&&("list"===r&&e.oldValue?o.addChange({node:t,type:"updateList",value:a,oldValue:e.oldValue}):"indexType"===r?o.addChange({node:t,type:r,value:a}):"insert"!==n&&"remove"!==n&&"attribute"!==n||o.addChange({node:t,type:n}))}})),xc(this,this.iEditing,"operationRollback",(function(){i.clear(),o.clear()})),xc(this,this.iEditing,"beforecontentchange",(function(){var e;if(i.size>0&&(i.forEach((function(e,t){"*"===e?o._resetListIndexStyle(t,GX):o._resetListIndexStyle(t,Object.keys(e))})),i.clear()),null===(e=o.hasChange)||void 0===e?void 0:e.call(o)){var t=o.iEditing.newJob(We.Auto);o.applyChange(t),o.iEditing.commitJob(t)}}))}),[{key:"destroy",value:function(){this._change.clear(),this._change=null,this._lists=null}},{key:"startWork",value:function(){this._allowContinue=!0}},{key:"_resetListIndexStyle",value:function(e,t){var n=this.iEditing,r=n.newJob(We.Auto);wZ(r,e,t),n.commitJob(r)}},{key:"addChange",value:function(e){var t=e.node,n=e.type,r=e.value,o=e.oldValue;"updateList"===n?this._change.set(t,Object.assign(Object.assign({},this._change.get(t)),(0,Ha.A)({},n,[r,o]))):this._change.set(t,Object.assign(Object.assign({},this._change.get(t)),(0,Ha.A)({},n,"number"!=typeof r||r)))}},{key:"hasChange",value:function(){return this._change.size>0}},{key:"clear",value:function(){this._change.clear()}},{key:"applyChange",value:function(e){var t=this._lists;try{(function(e,t){var n=t._change,r=t._lists,o=new Set,i=[];return n.forEach((function(e,n){var a,l,u,c=(n.attrs||{}).list;if(c&&o.add(c),e.updateList){var s=(0,tn.A)(e.updateList,2),d=s[0],f=s[1];f&&(o.add(f),null===(a=r[f])||void 0===a||a.removeNode(n)),d&&(o.add(d),r[d]||(r[d]=new bZ(d,n.nodeName,t._allResetFromStart)),r[d].addNode(n))}c&&ir(e,$X.attr.indexType)&&(null===(l=r[c])||void 0===l||l.setNewIndexType(e.indexType)),!c||n.isConnected?e.insert&&i.push(n):null===(u=r[c])||void 0===u||u.removeNode(n)})),t._allowContinue&&function(e,t,n,r){var o=t._lists;n=n.sort((function(e,t){var n=Ut.compare(e,t);return n.preceding?-1:(bt.fatal(n.following,"plugins/list/src/kernel/lib/list-manager.ts:277"),1)})).filter((function(t){var n=(t.attrs||{}).list;if(n&&o[n]){if(o[n].acceptNode(t))return!1;var i=Pr();e.setAttribute(t,$X.attr.list,i),r.add(i)}return!0}));var i={};n.forEach((function(t){var n,a,l,u=t.previousSibling,c=t.nextSibling,s=t.attrs,d=(void 0===s?{}:s).list;if(d||(d=Pr(),e.setAttribute(t,$X.attr.list,d)),i[d])e.setAttribute(t,$X.attr.list,i[d]);else{var f;if((null==u?void 0:u.nodeName)===t.nodeName&&(null===(n=null==u?void 0:u.attrs)||void 0===n?void 0:n.list))f=u.attrs.list;else{if((null==c?void 0:c.nodeName)!==t.nodeName||!(null===(a=null==c?void 0:c.attrs)||void 0===a?void 0:a.list))return;f=c.attrs.list}bt.fatal(f,"plugins/list/src/kernel/lib/list-manager.ts:335"),null===(l=o[d])||void 0===l||l.removeNode(t),i[d]=f,e.setAttribute(t,$X.attr.list,f),r.add(f)}})),n.forEach((function(t){var n;(null===(n=t.attrs)||void 0===n?void 0:n.list)||e.setAttribute(t,$X.attr.list,Pr())}))}(e,t,i,o),function(e,t,n,r){var o=t._lists;r.forEach((function(e){var r,i=(null===(r=e.attrs)||void 0===r?void 0:r.list)||Pr();i&&(o[i]||(o[i]=new bZ(i,e.nodeName,t._allResetFromStart),n.add(i)),o[i].addNode(e))})),n.forEach((function(t){var n;null===(n=o[t])||void 0===n||n.reset(e)}))}(e,t,o,i),o})(e,this).forEach((function(e){var n;(null===(n=t[e])||void 0===n?void 0:n.isEmpty())&&delete t[e]}))}finally{this._change.clear()}}}])}();function _Z(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,CZ()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function CZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(CZ=function(){return!!e})()}var NZ=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=_Z(this,t),Object.defineProperty(n,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t,n){var r;if(Number.isNaN(n)||e.addAttr("data-lake-index-type",n),e.mainNode.name){var o=e.inode.id,i=null===(r=this.plugin._indexTypeManager)||void 0===r?void 0:r.getHeadingIndexInfo(o);if(i){var a=e.createIgnoreElement("span");e.appendChild(a,e.createTextNode(null==i?void 0:i.symbol)),e.appendChild(e.mainNode,a)}}}}])}(vB);function OZ(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,xZ()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function xZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xZ=function(){return!!e})()}Object.defineProperty(NZ,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:["indexType"]});var EZ={1:"lower-alpha",2:"lower-roman"},DZ={1:"circle",2:"square"},PZ={oli:"ne-ol",uli:"ne-ul",tli:"ne-tl"},RZ=function(e){function t(){return(0,Ke.A)(this,t),OZ(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){e.setVirtual();var n=function(e,t){var n=e.previousSiblingContext,r=t.name,o=t.attrs,i=void 0===o?{}:o;if(!n||!n._listNode)return null;var a=n._listNode;return r===$X.node.oli&&"ol"!==a.name?null:r!==$X.node.uli&&r!==$X.node.tli||"ul"===a.name?((n.inode.attrs?n.inode.attrs.level:0)||0)!==(i.level||0)||a._id!==i.list?null:a:null}(e,t);n?this._appendToList(e,t,n):this._createNewList(e,t)}},{key:"_createNewList",value:function(e,t){var n=t.id,r=t.name,o=(null==t?void 0:t.attrs)||{},i={};r===$X.node.oli&&o.index>0&&(bt.fatal(o.list!==n&&Number.isInteger(o.index),"plugins/list/src/kernel/writers/html-list-node-writer.ts:60"),i.start=o.index+1),o.level>0&&(i["ne-level"]=o.level),o.indexType>0&&(i["data-index-type"]=o.indexType);var a=e.createElement(r===$X.node.oli?"ol":"ul",{attrs:i,style:SZ(e,t),className:PZ[r]});a._id=o.list,e._listNode=a,this._appendListItem(e,t,a),e._handleAppend=function(t){var n=o.level||0;if(n){var i=e.createElement(r===$X.node.oli?"ol":"ul",{className:"ne-list-wrap",style:SZ(e,{name:"wrap"})});e.appendChild(t,i);for(var l=1;l<n;l++){var u=e.createElement(r===$X.node.oli?"ol":"ul",{className:"ne-list-wrap",style:SZ(e,{name:"wrap"})});e.appendChild(i,u),i=u}e.appendChild(i,a)}else e.appendChild(t,a)}}},{key:"_appendToList",value:function(e,t,n){this._appendListItem(e,t,n),e._handleAppend=function(){}}},{key:"_appendListItem",value:function(e,t,n){var r,o=t.name,i=e.createElement("li");o===$X.node.tli&&(i=e.createElement("li",{attrs:{checked:null===(r=t.attrs)||void 0===r?void 0:r.checked}})),e.setNode(i),e._listNode=n,e.appendChild(n,i)}}])}(lT);function SZ(e,t){var n={},r=t.name,o=t.attrs,i=void 0===o?{}:o,a=null==i?void 0:i.level,l=(null==i?void 0:i.indexType)||0;if(!e.isInlineMode())return n;n.margin="0",n["padding-left"]="23px";var u=a%3;return 0!==l&&r===$X.node.oli?1===l?n.listStyle=0===u||1===u?"simp-chinese-informal":"decimal":2===l&&(n.listStyle="decimal"):r===$X.node.tli?(n.padding="0",n.listStyle="none"):r===$X.node.oli?a&&0!==u&&(n.listStyle=EZ[u]):r===$X.node.uli?a&&0!==u&&(n.listStyle=DZ[u]):"wrap"===r&&(n.listStyle="none"),n}Object.defineProperty(RZ,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[$X.node.oli,$X.node.uli,$X.node.tli]});var TZ=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"write",value:function(e,t,n){["oli","uli","tli"].includes(e.inode.name||"")?Number(n)>0&&e.setAttr("data-lake-index-type",n):Number(n)>=0&&e.setAttr("data-lake-index-type",n)}}])}();function jZ(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,IZ()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function IZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(IZ=function(){return!!e})()}Object.defineProperty(TZ,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:["indexType"]});var BZ=function(e){function t(){return(0,Ke.A)(this,t),jZ(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){e.setVirtual((function(){}));var n=function(e,t){var n,r,o=e.previousSiblingContext,i=t.attrs,a=void 0===i?{}:i;if(!o||!o._listNode)return null;var l=o._listNode;return(null===(n=l.attrs)||void 0===n?void 0:n.list)!==a.list||((null===(r=o.inode.attrs)||void 0===r?void 0:r.level)||0)!==(a.level||0)?null:l}(e,t);n?this._appendToList(e,t,n):this._createNewList(e,t)}},{key:"_createNewList",value:function(e,t){var n=t.name,r=t.attrs,o=void 0===r?{}:r,i={};i.list=o.list?o.list:Pr(),0!==o.index&&(i.start=o.index+1),o.level>0&&(i["data-lake-indent"]=o.level),delete o.indent,delete o.textIndent;var a=e.createElement(n===$X.node.oli?"ol":"ul",{attrs:i,style:{},className:n===$X.node.tli?["lake-list"]:void 0});e._listNode=a;var l=MZ(e,t);e.setNode(l),e.appendChild(a,l),e.setVirtual((function(t){e.appendChild(t,a)}))}},{key:"_appendToList",value:function(e,t,n){var r,o,i=MZ(e,t);null===(r=t.attrs)||void 0===r||delete r.indent,null===(o=t.attrs)||void 0===o||delete o.textIndent,e._listNode=n,e.setNode(i),e.appendChild(n,i),e.setVirtual((function(){}))}}])}(vT);function MZ(e,t){var n=t.name,r=t.attrs,o=void 0===r?{}:r,i={};o.fid&&(i.fid=o.fid),o.version&&(i.version=o.version);var a=e.createElement("li",{className:n===$X.node.tli?["lake-list-node","lake-list-task"]:void 0,attrs:i});return n===$X.node.tli&&e.appendChild(a,e.createElement("card",{attrs:{type:"inline",name:"checkbox",value:"data:".concat(!(!t.attrs||!t.attrs.checked))}})),a}function FZ(e){return 0==(e=(e||0)%3)?"●":1===e?"○":"■"}function LZ(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,UZ()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function UZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(UZ=function(){return!!e})()}Object.defineProperty(BZ,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[$X.node.oli,$X.node.uli,$X.node.tli]});var VZ=[$X.node.oli,$X.node.uli,$X.node.tli],HZ=["[ ]","[X]"],zZ=function(e){function t(){return(0,Ke.A)(this,t),LZ(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){var n,r=t.name,o=t.attrs,i=void 0===o?{}:o,a=i.level,l="  ".repeat(void 0===a?0:a),u="";switch(r){case $X.node.oli:u=this._getOrderListCounterText(i);break;case $X.node.uli:u=this._getUnorderListCounterText(i);break;case $X.node.tli:u=this._getTaskListCounterText(i);break;default:u=""}1===(null===(n=e.rootNode.children)||void 0===n?void 0:n.length)?e.newline("".concat(l)):e.newline("".concat(l).concat(u))}},{key:"_getOrderListCounterText",value:function(e){var t=e.level,n=void 0===t?0:t,r=e.index,o=void 0===r?0:r,i=e.parentIndex,a=void 0===i?[]:i,l=e.indexType;return"".concat(function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:sZ;return r===sZ?lZ(e,t)+".":r===dZ?function(e,t){return e+=1,0==(t=(t||0)%3)?oZ(e)+"、":1===t?"(".concat(oZ(e),")"):e+"."}(e,t):r===fZ?cZ(e,t,n)+".":void 0}(o,n,a,void 0===l?0:l)," ")}},{key:"_getUnorderListCounterText",value:function(e){var t=e.level;return"".concat(FZ(void 0===t?0:t)," ")}},{key:"_getTaskListCounterText",value:function(e){var t=e.checked,n=HZ[Number(void 0!==t&&t)%HZ.length];return"".concat(n," ")}}])}(YG);Object.defineProperty(zZ,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:VZ});var WZ=(0,$e.A)((function e(){(0,Ke.A)(this,e)}));function qZ(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,$Z()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function $Z(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($Z=function(){return!!e})()}var KZ=function(e){function t(){return(0,Ke.A)(this,t),qZ(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"readAttr",value:function(e,t,n,r){e.addAttr("indexType",Number(n)||0),["h1","h2","h3","h4","h5","h6"].includes(r.name||"")&&mQ(Number(n)||0)}}])}(WZ);function YZ(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,GZ()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function GZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(GZ=function(){return!!e})()}Object.defineProperty(KZ,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:["data-lake-index-type"]});var JZ=function(e){function t(){return(0,Ke.A)(this,t),YZ(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"readNode",value:function(e){var t=e.getAttr($X.attr.level);e.addAttr($X.attr.list,Pr()),t>=0?e.addAttr($X.attr.level,1+t):e.addAttr($X.attr.level,0)}}])}(Ej);function XZ(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,QZ()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function QZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(QZ=function(){return!!e})()}Object.defineProperty(JZ,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["ul","ol"]});var ZZ=function(e){function t(){return(0,Ke.A)(this,t),XZ(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"readNode",value:function(e,t){var n,r,o,i;if(t.parent){var a=((null===(n=t.parent.attrs)||void 0===n?void 0:n.class)||"").split(/\s+/),l=t.parent.name;if(a.includes("ne-tl"))e.setNode(ar.createElement($X.node.tli,{checked:"true"===(null===(r=t.attrs)||void 0===r?void 0:r.checked)}));else if(a.includes("task-list")){var u=null===(o=t.children)||void 0===o?void 0:o[0],c="input"===(null==u?void 0:u.name)&&!!(null===(i=u.attrs)||void 0===i?void 0:i.checked);e.setNode(ar.createElement($X.node.tli,{checked:c}))}else a.includes("ne-ol")||"ol"===l?e.setNode(ar.createElement($X.node.oli)):e.setNode(ar.createElement($X.node.uli));var s=e.getAttr($X.attr.level);s&&e.addAttr(s,s)}}}])}(Ej);function e0(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,t0()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function t0(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(t0=function(){return!!e})()}Object.defineProperty(ZZ,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["li"]});var n0=function(e){function t(){return(0,Ke.A)(this,t),e0(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(){}}])}(Lj);function r0(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,o0()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function o0(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(o0=function(){return!!e})()}Object.defineProperty(n0,"CardNames",{enumerable:!0,configurable:!0,writable:!0,value:["checkbox"]});var i0=function(e){function t(){return(0,Ke.A)(this,t),r0(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t,n){var r=Number.parseInt(n,10);if(n.endsWith("em")&&r>0&&r%2==0){var o=r/2;o>0&&e.setState("listIndent",o)}}}])}(uI);Object.defineProperty(i0,"StyleNames",{enumerable:!0,configurable:!0,writable:!0,value:["margin-left"]});var a0=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"read",value:function(e,t,n){var r;e.setAttr("indexType",Number(n)||0),["h1","h2","h3","h4","h5","h6"].includes((null===(r=e.node)||void 0===r?void 0:r.name)||"")&&mQ(Number(n)||0)}}])}();function l0(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,u0()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function u0(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(u0=function(){return!!e})()}Object.defineProperty(a0,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:["data-lake-index-type"]});var c0=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=l0(this,t),Object.defineProperty(n,"processService",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t){var n,r,o,i,a=e.getState("listType"),l=e.getState("listId");a||(bt.fatal(!l,"plugins/list/src/kernel/readers/lake/lake-list-item-node-reader.ts:22"),a="ul",l=Pr());var u={id:null===(n=t.attrs)||void 0===n?void 0:n.id,list:l,fid:null===(r=t.attrs)||void 0===r?void 0:r.fid},c=e.getState("listStart");c&&(u.start=c);var s=function(e){return(e.getState("listIndent")||0)+(e.getState("listLevel")||0)}(e);s&&(u.level=s);var d="ol"===a?$X.node.oli:$X.node.uli;if((null===(i=null===(o=t.attrs)||void 0===o?void 0:o.class)||void 0===i?void 0:i.indexOf("lake-list-task"))>=0){d=$X.node.tli;var f=function(e,t){var n,r=e.children,o=void 0===r?[]:r,i=null===(n=e.attrs)||void 0===n?void 0:n.version;if(!o[0]||"checkbox"!==o[0].name)return{checked:!1,version:i};var a=o[0];o.splice(0,1);var l={checked:a.value+""=="true",version:i},u=t.getProcesser();if(u){var c=u(e);c&&(l.checked=c.checked,l.version=c.version)}return l}(t,this.processService),h=f.checked,p=f.version;u.checked=h,u.version=p}var v=ar.createElement(d,u);e.setNode(v)}}])}(lI);function s0(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,d0()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function d0(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(d0=function(){return!!e})()}var f0=function(e){function t(){return(0,Ke.A)(this,t),s0(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t){var n=t.name,r=t.attrs,o=void 0===r?{}:r,i=Number.parseInt(o["data-lake-indent"],10),a=Math.max(Number.parseInt(o.start,10)-1||0,0);i>0&&e.setState("listLevel",i),bt.fatal(o.list,"plugins/list/src/kernel/readers/lake/lake-list-node-reader.ts:20"),e.setState("listStart",a),e.setState("listId",o.list),e.setState("listType",n)}}])}(lI),h0=(0,$e.A)((function e(){(0,Ke.A)(this,e)}));function p0(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,v0()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function v0(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v0=function(){return!!e})()}var m0=function(e){function t(){return(0,Ke.A)(this,t),p0(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"readNode",value:function(e,t){if(t.parent)try{return this.readEverNoteTaskList(e,t)}catch(e){return}}},{key:"readEverNoteTaskList",value:function(e,t){for(var n,r,o,i,a,l,u,c,s,d,f=0,h=null,p="",v=[];t.children&&f<t.children.length;){var m=t.children[f];if((null===(n=e.getMeta("exporter-version"))||void 0===n?void 0:n.includes("YXBJ"))&&"img"===m.name&&(null===(o=null===(r=m.attrs)||void 0===r?void 0:r.src)||void 0===o?void 0:o.includes("en_todo"))){v.push(m),h=m;break}if("input"===m.name){h=m;break}if("#text"===m.name)p+=m.data||"";else{if("span"!==m.name)break;p+=(null===(a=null===(i=m.children)||void 0===i?void 0:i[0])||void 0===a?void 0:a.data)||""}v.push(m),f++}try{for(f=((null===(l=t.children)||void 0===l?void 0:l.length)||0)-1;null===(u=t.children)||void 0===u?void 0:u[f];){var g=t.children[f];if(!g||"br"!==g.name){if("#text"===g.name){g.data=(null===(c=g.data)||void 0===c?void 0:c.replace(/\n$/,""))||"";break}break}v.push(g),f--}}catch(e){}if(/^\s*$/.test(p)){var b=Math.floor(p.length/4);return!h||"input"!==h.name&&"img"!==h.name?void 0:(e.addSkipNode.apply(e,v),e.setNode(ar.createElement($X.node.tli,{checked:!!(null===(s=h.attrs)||void 0===s?void 0:s.checked)})),void(b>0&&"td"!==(null===(d=t.parent)||void 0===d?void 0:d.name)&&e.addAttr("level",Math.min(b,8))))}}}])}(h0);Object.defineProperty(m0,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["div"]});var g0=[$X.node.oli,$X.node.uli,$X.node.tli],b0=["+","-","*"],y0=["[ ]","[x]"],w0=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"write",value:function(e,t){var n=t.name,r=t.attrs,o=void 0===r?{}:r,i=o.level,a="    ".repeat(void 0===i?0:i),l="";switch(n){case $X.node.oli:l=this._getOrderListCounterText(o);break;case $X.node.uli:l=this._getUnorderListCounterText(o);break;case $X.node.tli:l=this._getTaskListCounterText(o);break;default:l=""}return e.appendFirst("".concat(a).concat(l)),e.isInTableCell()?e.append("<br/>"):(e.append("\n"),e.nextNode&&[$X.node.oli,$X.node.uli,$X.node.tli].includes(e.nextNode.name)||(e.isInQuote()?e.append(">\n"):e.append("\n"))),!0}},{key:"_getOrderListCounterText",value:function(e){var t=e.index;return"".concat((void 0===t?0:t)+1,". ")}},{key:"_getUnorderListCounterText",value:function(e){var t=e.level;return"".concat(b0[(void 0===t?0:t)%3]," ")}},{key:"_getTaskListCounterText",value:function(e){var t=e.checked,n=y0[Number(void 0!==t&&t)%y0.length];return"- ".concat(n," ")}}])}();function A0(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,k0()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function k0(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(k0=function(){return!!e})()}Object.defineProperty(w0,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:g0});var _0={"-":$X.node.uli,"+":$X.node.uli,"*":$X.node.uli,"[]":$X.node.tli,"[x]":$X.node.tli},C0=function(e){function t(){var e;return(0,Ke.A)(this,t),e=A0(this,t,arguments),Object.defineProperty(e,"_indexTypeManager",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_listManager",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerElement(sQ),e.registerAttr(rQ),e.registerCommand("indexType",new AQ),this._initEvent(),this._initMarkdownKey();var t=e.getService(_S.ID);t&&t.registerLakeCardReader(n0.CardNames,new n0)}},{key:"afterInit",value:function(){var e,t,n=this.kernel;this.option.onAfterKernelPluginInit&&this.option.onAfterKernelPluginInit(n,this),null===(e=n.getService(wq.ID))||void 0===e||e.registerStyleKeepBlockAttrs("indexType",(function(e,t){return AQ.getCurrentIndexType(e,t)}));var r=n.getService(rq.ID);r&&r.registerKeepBlockAttrName([$X.attr.list,$X.attr.fid,$X.attr.index]);var o=n.getService(wS.ID);o&&(o.registerPreHTMLNodeReader(m0.NodeNames,new m0),o.registerHTMLNodeReader(JZ.NodeNames,new JZ),o.registerHTMLNodeReader(ZZ.NodeNames,new ZZ),o.registerHTMLAttributeReader(KZ.AttrNames,new KZ));var i=n.getService(_S.ID);i&&(i.registerLakeNodeReader(["ol","ul"],new f0),i.registerLakeNodeReader("li",new c0(this.service)),i.registerLakeStyleReader(i0.StyleNames,new i0),i.registerLakeAttrReader(a0.AttrNames,new a0));var a=n.getService(wS.ID);a&&(a.registerNodeHTMLWriter(RZ.NodeNames,new RZ),a.registerAttrHTMLWriter(NZ.AttrNames,new NZ(this)));var l=n.getService(_S.ID);l&&(l.registerLakeNodeWriter(BZ.NodeNames,new BZ),l.registerLakeAttrWriter(TZ.AttrNames,new TZ));var u=n.getService(EG.ID);u&&u.registerTextWriter(zZ.NodeNames,new zZ),null===(t=n.getService(tI.ID))||void 0===t||t.registerMarkdownWriter(w0.NodeNames,new w0)}},{key:"_initEvent",value:function(){var e=this,t=this.kernel;t.on("document.create",(function(){e._indexTypeManager=new mZ(e.kernel,e.editing),e._listManager=new kZ(e.option.allFromStart,e.kernel,e.editing)})),t.on("document.ready",(function(){var t,n;null===(t=e._listManager)||void 0===t||t.startWork(),null===(n=e._indexTypeManager)||void 0===n||n.startWork()})),t.on("document.destroy",(function(){e._listManager&&(e._listManager.destroy(),e._listManager=null),e._indexTypeManager&&(e._indexTypeManager.destroy(),e._indexTypeManager=null)}))}},{key:"_initMarkdownKey",value:function(){var e=this,t=this.kernel,n=t.getService(DS.ID);n&&(Object.keys(_0).forEach((function(r){n.registerMarkdownMatcher(CS.whiteSpace,new NS(e.editing,r,(function(t,n,o,i){e._handlerMarkdown(t,_0[r],n,i.matchedText,0)}),[t.defaultElementName]))})),n.registerMarkdownMatcher(CS.whiteSpace,new NS(this.editing,/^\d{1,3}\.$/,(function(t,n,r,o){if(n.hasCategory(qe.Heading))return AQ.setBlockNodeIndexType(t,n,AQ.getCurrentIndexType(t,2)),void t.setSelection(t.newSelection(t.newRange(t.newPosition(n,0))));e._handlerMarkdown(t,$X.node.oli,n,o.matchedText,0)}),[t.defaultElementName,qe.Heading])),n.registerMarkdownMatcher(CS.whiteSpace,new NS(this.editing,/^[一二三四五六七八九十零百千万]+、$/,(function(t,n,r,o){try{if(n.hasCategory(qe.Heading))return AQ.setBlockNodeIndexType(t,n,AQ.getCurrentIndexType(t,1)),void t.setSelection(t.newSelection(t.newRange(t.newPosition(n,0))));var i=function(e){e+="个";for(var t=0,n=Number.MAX_VALUE,r=0;r<e.length;r+=2){var o=e[r];if("个"===o)return t;if("十"!==o)if("零"!==o){if(!GQ[o])throw new Error("not valid nums ".concat(o," index=").concat(r));var i=e[r+1];if(!YQ[i])throw new Error("not valid unit ".concat(i," index=").concat(r+1));if(YQ[i]>=n)throw new Error("not valid unit ".concat(i," index=").concat(r+1));n=YQ[i],t+=GQ[o]*YQ[i]}else r-=1;else r-=1,t+=10}return t}(o.matchedText.slice(0,-1));e._handlerMarkdown(t,$X.node.oli,n,"".concat(i,"."),1)}catch(e){}}),[t.defaultElementName,qe.Heading])))}},{key:"destroy",value:function(){this._listManager&&(this._listManager.destroy(),this._listManager=null),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}},{key:"_handlerMarkdown",value:function(e,t,n,r,o){var i,a,l;if(t===$X.node.tli&&"[x]"===r)l={checked:!0};else if(t===$X.node.oli&&(l={indexType:o},pQ(o),"1."!==r)){var u=Number.parseInt(r,10)-1;Number.isInteger(u)&&u>0&&(l.start=u)}var c=e.createElement(t,l),s=wi.replaceBlockNode(e,e.newSelection(e.newRange(e.newPosition(n,0))),c,!0,!0),d=s.firstRange.start.node.firstChild;if((null==d?void 0:d.isTextNode())&&" "===d.data[0]&&e.setTextNodeData(d,d.data.slice(1)),(null==d?void 0:d.isTextNode())&&0===d.dataLength){var f=d.parentNode;e.removeChild(d.parentNode,d),s=e.newSelection(e.newRange(e.newPosition(f,0)))}e.setSelection(s);try{var h=s.firstRange.start.node;if(t!==$X.node.oli||(null===(i=h.previousSibling)||void 0===i?void 0:i.nodeName)===$X.node.oli||(null===(a=h.nextSibling)||void 0===a?void 0:a.nodeName)!==$X.node.oli)return;var p=h.nextSibling.attrs.list,v=e.getNodesByName($X.node.oli).filter((function(e){return e.isConnected&&e.attrs.list===p&&Ut.compare(e,h).following})),m=Pr();if("number"==typeof h.attrs.start&&0!==h.attrs.start){var g=e.getNodesByName($X.node.oli).filter((function(e){return e.isConnected&&0===(e.attrs.level||0)&&Ut.compare(e,h).preceding})).sort((function(e,t){return Ut.compare(e,t).preceding?-1:1})).pop();g&&(g.attrs.indexType||0)===(h.attrs.indexType||0)&&(m=g.attrs.list)}e.removeAttribute(h,$X.attr.fid),e.setAttribute(h,$X.attr.list,m),v.forEach((function(t){e.removeAttribute(t,$X.attr.fid),e.setAttribute(t,$X.attr.list,m)}))}catch(e){console.error(e)}}}])}(ct);Object.defineProperty(C0,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:$X.pluginName}),Object.defineProperty(C0,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:ZQ}),Object.defineProperty(C0,"Service",{enumerable:!0,configurable:!0,writable:!0,value:cQ}),Object.defineProperty(C0,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[FQ,WQ,KQ,CQ,xQ,VQ]});var N0=HR({pluginName:"mark",node:{mark:"mark"},domNode:{mark:"ne-mark","mark-content":"ne-mark-content"}});const O0=(0,Ha.A)({},N0.node.mark,{parents:[qe.Block],category:[qe.Inline,qe.InlineBox,qe.TextContainer],children:[qe.Text,qe.Inline]});function x0(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,E0()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function E0(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(E0=function(){return!!e})()}var D0=function(e){function t(){return(0,Ke.A)(this,t),x0(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e){e.setNode(ar.createElement("mark"))}}])}(lI);function P0(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,R0()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function R0(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(R0=function(){return!!e})()}var S0=function(e){function t(){return(0,Ke.A)(this,t),P0(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e){var t;e.isInlineMode()&&(t={backgroundColor:"#ff0",padding:"0",margin:"0 1px"}),e.setNode(e.createElement("mark",{className:"ne-mark",style:t}))}}])}(lT);function T0(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,j0()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function j0(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(j0=function(){return!!e})()}Object.defineProperty(S0,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["mark"]});var I0=function(e){function t(){return(0,Ke.A)(this,t),T0(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e){e.setNode(e.createElement("mark"))}}])}(vT);function B0(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,M0()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function M0(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(M0=function(){return!!e})()}Object.defineProperty(I0,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["mark"]});var F0=function(e){function t(){return(0,Ke.A)(this,t),B0(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerElement(O0);var t=e.getService(_S.ID);t&&t.registerLakeNodeReader("mark",new D0);var n=e.getService(_S.ID);n&&n.registerLakeNodeWriter(I0.NodeNames,new I0);var r=e.getService(wS.ID);r&&r.registerNodeHTMLWriter(S0.NodeNames,new S0);var o=e.getService(DS.ID);o&&o.registerMarkdownMatcher(CS.whiteSpace,new _B(this.editing,"==",(function(e,t){var n=e.createElement("mark");Go.wrapInlineNode(e,t,n),e.setSelection([e.newRange(e.newPosition(n.parentNode,n.offset+1))])})))}}])}(ct);function L0(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,U0()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function U0(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(U0=function(){return!!e})()}Object.defineProperty(F0,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:N0.pluginName});var V0=function(e){function t(){var e;return(0,Ke.A)(this,t),e=L0(this,t,arguments),Object.defineProperty(e,"_whiteSpaceMatchers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(e,"_enterMatchers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){delete this.editing,delete this._whiteSpaceMatchers,delete this._enterMatchers}},{key:"registerMarkdownMatcher",value:function(e,t){("whiteSpace"===e?this._whiteSpaceMatchers:this._enterMatchers).push(t)}},{key:"getMarkdownMatchContext",value:function(e,t){var n=t.node,r=Ut.closest(n,qe.Block);if(!r)return null;var o=this.editing.newJob(We.Silent),i=o.newRange(o.newPosition(r,0),t);if(i.collapsed)return null;var a=Go.getTextSections(o,i);return a.length?this._execMatch(e,a[0],t):null}},{key:"_execMatch",value:function(e,t,n){for(var r="whiteSpace"===e?this._whiteSpaceMatchers:this._enterMatchers,o=0,i=r.length;o<i;o++){var a=r[o].match(t,n);if(a)return{matcher:r[o],info:a}}return null}}])}(DS);function H0(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,z0()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function z0(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(z0=function(){return!!e})()}var W0=function(e){function t(){var e;return(0,Ke.A)(this,t),e=H0(this,t,arguments),Object.defineProperty(e,"registerMarkdownMatcher",{enumerable:!0,configurable:!0,writable:!0,value:function(t,n){e.service.registerMarkdownMatcher(t,n)}}),Object.defineProperty(e,"getMarkdownMatchContext",{enumerable:!0,configurable:!0,writable:!0,value:function(t,n){return e.service.getMarkdownMatchContext(t,n)}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){}},{key:"destroy",value:function(){this.service.destroy(),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}}])}(ct);Object.defineProperty(W0,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:OS.pluginName}),Object.defineProperty(W0,"Service",{enumerable:!0,configurable:!0,writable:!0,value:V0});var q0=HR({pluginName:"markdownPasteParse",command:{markdownPasteParse:"markdownPasteParse"}});function $0(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,K0()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function K0(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(K0=function(){return!!e})()}var Y0=function(e){function t(){return(0,Ke.A)(this,t),$0(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t){if(!t)return!1;var n=e.newJob(),r=this.getInode(t);if(!r)return!1;var o=wi.insertINode(n,n.getSelection(),r);return n.setSelection(o),e.commitJob(n),!0}},{key:"getInode",value:function(e){if("string"==typeof e){var t=this.kernel.getSupportedReaderTypes();return bt.fatal(t.includes("text/lake"),"plugins/markdown-paste-parse/src/kernel/commands/markdown-paste-parse-command.ts:36"),this.kernel.readData("text/lake",e)}return e}}])}(gt);function G0(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,J0()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function J0(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(J0=function(){return!!e})()}Object.defineProperty(Y0,"ID",{enumerable:!0,configurable:!0,writable:!0,value:q0.command.markdownPasteParse});var X0=function(e){function t(){return(0,Ke.A)(this,t),G0(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){}}])}(ct);Object.defineProperty(X0,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:q0.pluginName}),Object.defineProperty(X0,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[Y0]});const Q0={targets:[qe.Root]};function Z0(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,e1()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function e1(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(e1=function(){return!!e})()}var t1=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=Z0(this,t),Object.defineProperty(r,"_cacheMetaHandler",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(r,"_metaDescriptor",{enumerable:!0,configurable:!0,writable:!0,value:n}),r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){}},{key:"filter",value:function(e,t){var n=this._metaDescriptor;return t=n.formatValue(t,e),n.needPersistent()?t:(this._cacheMetaHandler(e,t),null)}}])}(Ye);function n1(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,r1()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function r1(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(r1=function(){return!!e})()}var o1=function(e){function t(){return(0,Ke.A)(this,t),n1(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"registerMeta",value:function(e,t){var n=this;bt.fatal(t instanceof vW,"plugins/meta/src/kernel/meta-service-impl.ts:8"),this.kernel.registerMetaFilter(e,new t1((function(e,t){n.plugin.metaStorage[e]=t}),t)),this.plugin.descriptors[e]=t}},{key:"setMeta",value:function(e,t){this.plugin.setMeta(e,t)}},{key:"getMeta",value:function(e){return this.plugin.getMeta(e)}},{key:"toXML",value:function(){var e=this;return Object.keys(this.plugin.descriptors).map((function(t){var n=e.plugin.descriptors[t];if(!n||!n.needPersistent())return null;var r=e.getMeta(t),o=n.onPersistent(r)||r;return o&&!n.isDefault(o)?'<meta name="'.concat(t,'" content="').concat(o,'" />'):null})).filter((function(e){return null!==e})).join("")}},{key:"destroy",value:function(){}}])}(OI);function i1(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,a1()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function a1(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(a1=function(){return!!e})()}var l1=function(e){function t(){var e;return(0,Ke.A)(this,t),e=i1(this,t,arguments),Object.defineProperty(e,"descriptors",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(e,"metaStorage",{enumerable:!0,configurable:!0,writable:!0,value:{}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this;e.registerAttr(_I.attr.meta,Q0),e.on("document.create",(function(){t.metaStorage={}})),this.editing.on("nodechange",(function(e){var n=e.node,r=e.type,o=e.job,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["node","type","job"]);n.isRootNode()&&"attribute"===r&&"meta"===i.attrName&&o.mode===We.OT&&t.editing.emit("metachange",i.value,i.oldValue)}))}},{key:"setMeta",value:function(e,t){var n=this.descriptors[e];if(n)if(n.validate(t,e)){var r=this.getMeta(e);if(n.beforeSetMeta&&n.beforeSetMeta(t),n.needPersistent()){var o=this.editing.newJob(We.User),i=o.document.rootNode;o.setAttribute(i,"meta",Object.assign(Object.assign({},(i.attrs||{}).meta),(0,Ha.A)({},e,t))),this.editing.commitJob(o)}else this.metaStorage[e]=t;r!==t&&this.kernel.emitEvent("metaChange",{value:t,oldValue:r})}else console.warn("invalid meta value: ".concat(e,"=").concat(t));else console.warn("invalid meta: ".concat(e))}},{key:"getMeta",value:function(e){var t,n,r,o,i=this.descriptors[e];return i?i.getMeta?i.getMeta():this.metaStorage[e]||(null===(o=null===(r=null===(n=null===(t=this.kernel.document)||void 0===t?void 0:t.rootNode)||void 0===n?void 0:n.attrs)||void 0===r?void 0:r.meta)||void 0===o?void 0:o[e])||null:null}}])}(ct);Object.defineProperty(l1,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:_I.pluginName}),Object.defineProperty(l1,"Service",{enumerable:!0,configurable:!0,writable:!0,value:o1});const u1={parents:[qe.Root,qe.LikeRoot],category:[qe.Block,qe.TextContainer,qe.Brick]};var c1=HR({pluginName:"paragraph",node:{p:"p"},domNode:{p:"ne-p"},command:{plainText:"plainText"},cardSelect:"p"});function s1(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,d1()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function d1(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(d1=function(){return!!e})()}var f1=function(e){function t(){return(0,Ke.A)(this,t),s1(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){if(Tr((0,Je.A)(t.prototype),"getState",this).call(this,e)===st)return st;var n=e.getSelection().firstRange,r=n.start,o=n.end;return r.node.closest(qe.OnlyText)||o.node.closest(qe.OnlyText)?st:dt}},{key:"execute",value:function(e){var t=e.newJob(),n=t.getSelection(),r=wi.replaceBlockNode(t,n,t.createElement(t.defaultElementName),!1,["color","bgColor"]);return wi.unCollapseAll(t,n),t.setSelection(r),e.commitJob(t),!0}}])}(Bl);function h1(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,p1()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function p1(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(p1=function(){return!!e})()}Object.defineProperty(f1,"ID",{enumerable:!0,configurable:!0,writable:!0,value:c1.command.plainText});var v1=function(e){function t(){return(0,Ke.A)(this,t),h1(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"readNode",value:function(e){e.setNode(ar.createElement(c1.node.p))}}])}(Ej);function m1(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,g1()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function g1(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(g1=function(){return!!e})()}Object.defineProperty(v1,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[c1.node.p]});var b1=function(e){function t(){return(0,Ke.A)(this,t),m1(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e){e.setNode(ar.createElement(c1.node.p))}}])}(lI);function y1(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,w1()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function w1(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(w1=function(){return!!e})()}var A1=function(e){function t(){return(0,Ke.A)(this,t),y1(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){var n,r={};e.isInlineMode()&&(r={margin:"0",padding:"0",minHeight:"24px"});var o=e.createElement(c1.node.p,{className:"ne-p",style:r});0===(null===(n=t.children)||void 0===n?void 0:n.length)&&e.appendChild(o,e.createElement("br")),e.setNode(o)}}])}(lT);function k1(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,_1()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function _1(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_1=function(){return!!e})()}Object.defineProperty(A1,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[c1.node.p]});var C1=function(e){function t(){return(0,Ke.A)(this,t),k1(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e){var t=e.createElement(c1.node.p);e.setNode(t)}}])}(vT);function N1(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,O1()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function O1(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(O1=function(){return!!e})()}var x1=function(e){function t(){return(0,Ke.A)(this,t),N1(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerElement(c1.node.p,u1);var t=e.getService(_S.ID);t&&t.registerLakeNodeReader(c1.node.p,new b1);var n=e.getService(wS.ID);n&&n.registerHTMLNodeReader(v1.NodeNames,new v1);var r=e.getService(wS.ID);r&&r.registerNodeHTMLWriter(A1.NodeNames,new A1);var o=e.getService(_S.ID);o&&o.registerLakeNodeWriter(c1.node.p,new C1)}}])}(ct);function E1(e,t,n){var r=gn.size(n);if(0===r)return t.clone();for(var o=t.node,i=t.offset,a=Ut.closest(t.node,qe.Block),l=o,u=i,c=0;c<r;c++){var s=D1(l,u);bt.fatal(s,"plugins/quick-input/src/kernel/helpers/match-descriptor.ts:86"),l=s.node,u=s.offset}bt.fatal(a===l||Ut.compare(a,l).contains,"plugins/quick-input/src/kernel/helpers/match-descriptor.ts:92");var d=e.newPosition(l,u),f=Go.getTextSections(e,e.newRange(d,t));return bt.fatal(1===f.length&&1===f[0].length&&f[0][0].text===n,"plugins/quick-input/src/kernel/helpers/match-descriptor.ts:104"),d}function D1(e,t){if(0===t)return e.hasCategory([qe.Root,qe.LikeRoot])?null:D1(e.parentNode,e.offset);if(e.isTextNode())return{node:e,offset:t-1};var n=e.children[t-1];return n.isCardNode()?null:n.isTextNode()?D1(n,n.dataLength):(bt.fatal(n.isElement(),"plugins/quick-input/src/kernel/helpers/match-descriptor.ts:145"),D1(e,e.childCount))}Object.defineProperty(x1,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:c1.pluginName}),Object.defineProperty(x1,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[f1]});var P1=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"match",value:function(e,t){if(!t.length)return!1;var n,r=e.getSelection().firstRange.start,o=function(e){var t=e.node,n=e.offset;if(t.hasCategory([qe.Root,qe.LikeRoot]))return{text:"",atStart:!0,blockNode:null,position:e};if(!t.hasCategory([qe.TextContainer,qe.Text]))return null;if(t.isTextNode())return function(e,t,n){var r;if(!(null===(r=t.parentNode)||void 0===r?void 0:r.hasCategory(qe.Block)))return null;for(var o=[],i=t.previousSibling,a=!1;;){if(!i){a=!0;break}if(!i.isTextNode())break;o.push(i.data),i=i.previousSibling}var l=o.reverse().join("")+n;return bt.fatal(gn.size(l)>=0,"plugins/quick-input/src/kernel/helpers/get-previous-text-info.ts:112"),{atStart:a,text:l,blockNode:t.parentNode,position:e}}(e,t,gn.substring(t.data,0,n));if(!t.hasCategory(qe.Block))return null;if(0===n)return{text:"",atStart:!0,blockNode:t,position:e.clone()};var r=t.children[n-1];if(bt.fatal(r,"plugins/quick-input/src/kernel/helpers/get-previous-text-info.ts:45"),!r.isTextNode())return{text:"",atStart:!1,blockNode:t,position:e.clone()};for(var o=[],i=!1;r&&r.isTextNode();){if(o.push(r.data),!r.previousSibling){i=!0;break}r=r.previousSibling}var a=o.reverse().join("");return bt.fatal(gn.size(a)>=0,"plugins/quick-input/src/kernel/helpers/get-previous-text-info.ts:72"),{text:a,atStart:i,blockNode:t,position:e}}(r);return!!o&&!!t.some((function(t){var i=t.descriptor,a=t.handler,l=function(e,t,n,r){var o,i=n.atStart,a=n.text,l=n.blockNode,u=n.position;return t.match?t.match(r,l)||!1:!(l&&l.nodeName!==e.defaultElementName&&!(null===(o=t.allowBlock)||void 0===o?void 0:o.call(t,l)))&&!(t.matchPosition&&!t.matchPosition(e,r,l))&&!(t.atStart&&!i)&&!(t.mustEmpty&&l&&!Ut.isLikeEmptyElement(l))&&!(t.pattern&&!t.pattern.test(a))&&{matchedText:a,blockNode:l,start:E1(e,u,a),end:u}}(e,i,o,r);return!!l&&(n={info:l,handler:a},!0)}))&&n}}])}(),R1=HR({pluginName:"quickInput",service:{IQuickInputKernelService:"IQuickInputKernelService",IQuickInputRendererService:"IQuickInputRendererService"}});function S1(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,T1()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function T1(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(T1=function(){return!!e})()}var j1=function(e){function t(){var e;return(0,Ke.A)(this,t),e=S1(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(rt);function I1(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,B1()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function B1(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(B1=function(){return!!e})()}Object.defineProperty(j1,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze(R1.service.IQuickInputKernelService)});var M1=function(e){function t(){return(0,Ke.A)(this,t),I1(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){}},{key:"matchQuickInput",value:function(e){var t=this.editing.newJob(),n=t.getSelection();if(!n.isCollapsed)return!1;var r=n.firstRange.start.node;return!r.closest(qe.OnlyText)&&(r.isTextNode()&&(r=r.parentNode),!!r.hasCategory([qe.Block,qe.Root,qe.LikeRoot])&&P1.match(t,e))}}])}(j1);function F1(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,L1()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function L1(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(L1=function(){return!!e})()}var U1=function(e){function t(){return(0,Ke.A)(this,t),F1(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){}}])}(ct);Object.defineProperty(U1,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:R1.pluginName}),Object.defineProperty(U1,"Service",{enumerable:!0,configurable:!0,writable:!0,value:M1});var V1=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Ww()({},t)}),[{key:"onAfterKernelPluginInit",get:function(){return this._option.onAfterKernelPluginInit}}])}();Object.defineProperty(V1,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"quote"});var H1=HR({pluginName:"quote",node:"quote",domNode:"ne-quote",toolbar:"quote",cardSelect:"quote",command:{quote:"quote"},service:{IQuoteEditingService:"IQuoteEditingService"}});function z1(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,W1()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function W1(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(W1=function(){return!!e})()}var q1=function(e){function t(){var e;return(0,Ke.A)(this,t),e=z1(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(rt);function $1(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,K1()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function K1(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(K1=function(){return!!e})()}Object.defineProperty(q1,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze(H1.service.IQuoteEditingService)});var Y1=function(e){function t(){return(0,Ke.A)(this,t),$1(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){delete this.editing}},{key:"wrapQuote",value:function(e){var t,n=this.editing,r=n.newJob(),o=e.start,i=e.end,a=e.blockNode;Go.deleteContent(r,r.newRange(o,i)),(null===(t=null==a?void 0:a.firstChild)||void 0===t?void 0:t.isTextNode())&&0===a.firstChild.dataLength&&r.removeChild(a,a.firstChild);var l=r.createElement(H1.node);r.replaceChild(a.parentNode,l,a),r.appendChild(l,a),r.setSelection(r.newSelection(r.newRange(r.newPosition(a,0)))),n.commitJob(r)}}])}(q1);const G1=(0,Ha.A)({},H1.node,{parents:[qe.Root,qe.LikeRoot],excludes:[qe.VirtualLikeRoot],category:[qe.LikeRoot,qe.VirtualLikeRoot,qe.Brick]});function J1(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,X1()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function X1(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(X1=function(){return!!e})()}var Q1=function(e){function t(){return(0,Ke.A)(this,t),J1(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){if(Tr((0,Je.A)(t.prototype),"getState",this).call(this,e)===st)return st;var n=e.getSelection(),r=n.firstRange,o=r.start,i=r.end;if(o.node.closest(qe.OnlyText)||i.node.closest(qe.OnlyText))return st;var a=!1,l=[];return wi.fullWalkSelection(n,{enter:function(e){return e.hasCategory([qe.Table,qe.TableHole,qe.Hole])?(a=!0,!1):e.parentNode&&e.parentNode.hasCategory([qe.Root,qe.LikeRoot])?(l.push(e),!1):void 0}}),a?st:!l.length||l.some((function(e){return"quote"!==e.nodeName}))?dt:ft}},{key:"execute",value:function(e){var t=e.newJob(),n=this.getState(t);if(n===st)return e.cancelJob(t),!1;bt.fatal(1===t.getSelection().rangeCount,"plugins/quote/src/kernel/commands/quote-command.ts:86");var r=t.getSelection().firstRange;return r=n===dt?Go.wrapRootNode(t,r,t.createElement("quote")):Go.unwrapNode(t,r,"quote"),t.setSelection(t.newSelection(r)),e.commitJob(t),!0}}])}(Bl);function Z1(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,e2()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function e2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(e2=function(){return!!e})()}Object.defineProperty(Q1,"ID",{enumerable:!0,configurable:!0,writable:!0,value:H1.command.quote});var t2=function(e){function t(){return(0,Ke.A)(this,t),Z1(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t){var n,r=null===(n=null==t?void 0:t.attrs)||void 0===n?void 0:n.class;return!!(null==r?void 0:r.includes("lake-alert"))||(e.setNode(ar.createElement(H1.node)),!1)}}])}(lI);function n2(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,r2()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function r2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(r2=function(){return!!e})()}Object.defineProperty(t2,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["blockquote"]});var o2=function(e){function t(){return(0,Ke.A)(this,t),n2(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e){var t={};e.isInlineMode()&&(t={margin:"5px 0",paddingLeft:"1em",borderLeft:"3px solid #eeeeee"}),e.setNode(e.createElement("div",{className:"ne-quote",style:t}))}}])}(lT);function i2(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,a2()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function a2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(a2=function(){return!!e})()}var l2=function(e){function t(){return(0,Ke.A)(this,t),i2(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e){e.setNode(e.createElement("blockquote"))}}])}(vT);function u2(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,c2()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function c2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c2=function(){return!!e})()}Object.defineProperty(l2,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[H1.node]});var s2=function(e){function t(){return(0,Ke.A)(this,t),u2(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerElement(G1)}},{key:"afterInit",value:function(){var e=this.kernel,t=e.getService(_S.ID);t&&t.registerLakeNodeReader(t2.NodeNames,new t2);var n=e.getService(_S.ID);n&&n.registerLakeNodeWriter(l2.NodeNames,new l2);var r=e.getService(wS.ID);r&&r.registerNodeHTMLWriter(l2.NodeNames,new o2),this.option.onAfterKernelPluginInit&&this.option.onAfterKernelPluginInit(this.kernel)}}])}(ct);Object.defineProperty(s2,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:H1.pluginName}),Object.defineProperty(s2,"Service",{enumerable:!0,configurable:!0,writable:!0,value:Y1}),Object.defineProperty(s2,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[Q1]}),Object.defineProperty(s2,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:V1});var d2=HR({pluginName:"save",command:{save:"save"},toolbar:{save:"save"}});function f2(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,h2()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function h2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h2=function(){return!!e})()}var p2=function(e){function t(){return(0,Ke.A)(this,t),f2(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){return e.getSelection().isCardSelection?pt.UNAVAILABLE:pt.NOT_EXECUTED}}])}(gt);function v2(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,m2()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function m2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m2=function(){return!!e})()}Object.defineProperty(p2,"ID",{enumerable:!0,configurable:!0,writable:!0,value:d2.command.save});var g2=function(e){function t(){return(0,Ke.A)(this,t),v2(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){}}])}(ct);Object.defineProperty(g2,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:d2.pluginName}),Object.defineProperty(g2,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[p2]});var b2=HR({pluginName:"selectAll",command:{selectAll:"selectAll",selectAllDoc:"selectAllDoc"}});function y2(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,w2()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function w2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(w2=function(){return!!e})()}var A2=["alert",Rt],k2=function(e){function t(){return(0,Ke.A)(this,t),y2(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e){var t=e.newJob(),n=t.getSelection(),r=this._trySelectTable(t,n);if(r)return!0;if(this.plugin.isOnlyTableSelect()&&!r)return!1;for(var o=0,i=A2;o<i.length;o++){var a=i[o];if(this._trySelectAllCategory(t,n,a))return!0}if(this._trySelectAllColumn(t,n))return!0;if(this._trySelectAllColumns(t,n))return!0;if(this._trySelectAllCategory(t,n,qe.ContainerHole))return!0;var l=n.firstRange.start.node.rootNode;return t.dangerDirectSetSelection(t.selectNodeContents(l)),!0}},{key:"_trySelectTable",value:function(e,t){var n,r,o=this._getCellNode(t,qe.TableCell),i=o.startCellNode,a=o.endCellNode;if(!i||!a||(n=i,r=a,bt.fatal(n.hasCategory(qe.TableCell),"plugins/selectall/src/kernel/helpers/is-same-table.ts:6"),bt.fatal(r.hasCategory(qe.TableCell),"plugins/selectall/src/kernel/helpers/is-same-table.ts:7"),n!==r&&n.parentNode.parentNode!==r.parentNode.parentNode))return!1;var l=t.firstRange;if(i===a&&!Ut.isLikeEmptyElement(i)&&!function(e,t){bt.fatal(t.isElement(),"plugins/selectall/src/kernel/helpers/is-select-all-contents.ts:5");var n=e.start,r=e.end;return n.node===t&&r.node===t&&0===n.offset&&r.offset===t.childCount}(l,i))return e.dangerDirectSetSelection(e.selectNodeContents(i)),!0;var u=i.parentNode.parentNode;return bt.fatal(u.hasCategory(qe.Table),"plugins/selectall/src/kernel/select-all-command.ts:104"),e.dangerDirectSetSelection(Oa.selectTableCells(e,u)),!0}},{key:"_trySelectAllCategory",value:function(e,t,n){var r=this._getCellNode(t,n),o=r.startCellNode,i=r.endCellNode;if(!o||!i||o!==i)return!1;var a=Go.shrinkRange(e,e.selectNodeContents(i).firstRange);return!a.collapsed&&!Vt.equal(t.firstRange,a)&&(e.dangerDirectSetSelection(e.newSelection([a])),!0)}},{key:"_trySelectAllColumn",value:function(e,t){var n=this._getCellNode(t,Fr),r=n.startCellNode,o=n.endCellNode;if(!r||!o||r!==o)return!1;var i=Go.shrinkRange(e,e.selectNodeContents(o).firstRange);return Vt.equal(t.firstRange,i)?this._trySelectAllColumns(e,t):(e.dangerDirectSetSelection(e.newSelection([i])),!0)}},{key:"_trySelectAllColumns",value:function(e,t){var n=this._getCellNode(t,Mr),r=n.startCellNode,o=n.endCellNode;return!(!r||!o||r!==o||(bt.fatal(r.hasCategory(Mr),"plugins/selectall/src/kernel/select-all-command.ts:172"),e.dangerDirectSetSelection(function(e,t,n){bt.fatal(e.hasCategory(Mr),"plugins/selectall/src/kernel/helpers/select-all-columns.ts:18");var r=e.children.map((function(e){return bt.fatal(e.hasCategory(Fr),"plugins/selectall/src/kernel/helpers/select-all-columns.ts:21"),t.newRange(t.newPosition(e,0),t.newPosition(e,e.childCount))}));if(n.ranges.length===r.length&&n.ranges.every((function(e,t){return Vt.equal(e,r[t])}))){var o=Go.shrinkRange(t,t.selectNodeContents(e.parentNode).firstRange);return t.newSelection([o])}return t.newSelection(r)}(r,e,t)),0))}},{key:"_getCellNode",value:function(e,t){return{startCellNode:Ut.closest(e.firstRange.start.node,t),endCellNode:Ut.closest(e.lastRange.end.node,t)}}}])}(gt);function _2(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,C2()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function C2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(C2=function(){return!!e})()}Object.defineProperty(k2,"ID",{enumerable:!0,configurable:!0,writable:!0,value:b2.command.selectAll});var N2=function(e){function t(){return(0,Ke.A)(this,t),_2(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e){var t=e.newJob(),n=t.getSelection().firstRange.start.node.rootNode;return t.dangerDirectSetSelection(t.selectNodeContents(n)),!0}}])}(gt);function O2(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,x2()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function x2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(x2=function(){return!!e})()}Object.defineProperty(N2,"ID",{enumerable:!0,configurable:!0,writable:!0,value:b2.command.selectAllDoc});var E2=function(e){function t(){var e;return(0,Ke.A)(this,t),e=O2(this,t,arguments),Object.defineProperty(e,"_onlyTableSelect",{enumerable:!0,configurable:!0,writable:!0,value:!1}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this;e.extendMethods({setOnlyTableSelect:function(e){t._onlyTableSelect=e}})}},{key:"isOnlyTableSelect",value:function(){return this._onlyTableSelect}}])}(ct);Object.defineProperty(E2,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:b2.pluginName}),Object.defineProperty(E2,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[k2,N2]});var D2=HR({pluginName:"selection",command:{selection:"selection"},service:{ISelectionRenderService:"ISelectionRenderService"}});function P2(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,R2()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function R2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(R2=function(){return!!e})()}var S2=function(e){function t(){return(0,Ke.A)(this,t),P2(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(){return pt.NOT_EXECUTED}},{key:"getValue",value:function(e){return e.getSelection().cloneSelection()}},{key:"execute",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.newJob(),o=t.ranges.map((function(e){var t=e.start,n=e.end,o=r.newPosition(t.node,t.offset),i=n?r.newPosition(n.node,n.offset):void 0;return function(e,t){var n=t.start,r=t.end;return t.collapsed||!n.node.isCardNode()&&!r.node.isCardNode()?t:(n.node.isCardNode()&&(n=e.newPosition(n.node.parentNode,n.node.offset)),r.node.isCardNode()&&(r=e.newPosition(r.node.parentNode,r.node.offset+1)),e.newRange(n,r))}(r,r.newRange(o,i))}));return n||(o=o.map((function(e){return Go.shrinkBlockNodeBoundary(r,e)}))),r.setSelectionWithoutOptimize(r.newSelection(o,t.anchor,t.focus)),!0}}])}(gt);function T2(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,j2()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function j2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(j2=function(){return!!e})()}Object.defineProperty(S2,"ID",{enumerable:!0,configurable:!0,writable:!0,value:D2.command.selection});var I2=function(e){function t(){return(0,Ke.A)(this,t),T2(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){}}])}(ct);Object.defineProperty(I2,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:D2.pluginName}),Object.defineProperty(I2,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[S2]});var B2=HR({pluginName:"slash",toolbar:{cardSelect:"cardSelect"},command:{insertSlash:"insertSlash",canInsertSlash:"canInsertSlash"},node:{slash:"slash"}});function M2(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,F2()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function F2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(F2=function(){return!!e})()}var L2=function(e){function t(){return(0,Ke.A)(this,t),M2(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){if(Tr((0,Je.A)(t.prototype),"getState",this).call(this,e)===st)return st;var n=e.getSelection();if(!n.isCollapsed)return st;var r=n.firstRange.start.node;return r.closest(qe.OnlyText)?st:r.closest([qe.Block])||r.hasCategory([qe.Root,qe.LikeRoot])?dt:st}}])}(Bl);function U2(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,V2()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function V2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(V2=function(){return!!e})()}Object.defineProperty(L2,"ID",{enumerable:!0,configurable:!0,writable:!0,value:B2.command.canInsertSlash});var H2=function(e){function t(){return(0,Ke.A)(this,t),U2(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t){var n=e.newJob();if(this.getState(n)===st)return e.cancelJob(n),!1;var r=n.getSelection();r.collapsed||(r=wi.deleteContent(n,n.getSelection())),bt.fatal(r.collapsed,"plugins/slash/src/kernel/commands/insert-slash-command.ts:26");var o=Ai.insertCardNode(n,r,B2.node.slash,t).cardNode;return n.setSelection(n.newSelection(n.newRange(n.newPosition(o,0)))),e.commitJob(n),o.id}}])}(L2);function z2(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,W2()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function W2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(W2=function(){return!!e})()}Object.defineProperty(H2,"ID",{enumerable:!0,configurable:!0,writable:!0,value:B2.command.insertSlash});var q2=function(e){function t(){return(0,Ke.A)(this,t),z2(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerInlineCard(B2.node.slash)}}])}(ct);Object.defineProperty(q2,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:B2.pluginName}),Object.defineProperty(q2,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[L2,H2]});const $2={sub:{targets:[qe.Text],values:[!0],cleanByBreakLine:!0},sup:{targets:[qe.Text],values:[!0],cleanByBreakLine:!0}};function K2(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Y2()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Y2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Y2=function(){return!!e})()}var G2=function(e){function t(){var e;return(0,Ke.A)(this,t),e=K2(this,t,arguments),Object.defineProperty(e,"commandName",{enumerable:!0,configurable:!0,writable:!0,value:""}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){if(Tr((0,Je.A)(t.prototype),"getState",this).call(this,e)===st)return st;var n=e.getSelection().firstRange,r=n.commonAncestorContainer;if(n.collapsed){if(!r.hasCategory([qe.Root,qe.LikeRoot])&&!n.commonAncestorContainer.closest(qe.Block))return st}else if(!n.commonAncestorContainer.closest(qe.Block))return st;var o=null,i=this.commandName;return Go.fullWalkRange(n,{enter:function(t){if(!1===o)return!1;if(e.acceptAttr(t.nodeName,i,!0)){if(!t.hasAttribute(i))return o=!1,!1;null===o&&(o=!0)}}}),!0===o?ft:dt}},{key:"execute",value:function(e){var t=e.newJob(),n=this.getState(t);if(n===st)return e.cancelJob(t),!1;var r=t.getSelection(),o=t.getSelection().firstRange;return o=n===dt?Go.setAttribute(t,o,this.commandName,!0):Go.removeAttribute(t,o,this.commandName),o=Go.removeAttribute(t,o,"sub"===this.commandName?"sup":"sub"),t.setSelection(r.cloneByRange(o)),!0}}])}(Bl),J2=HR({pluginName:"subscript",command:{sup:"sup",sub:"sub"},attr:{sup:"sup",sub:"sub"}});function X2(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Q2()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Q2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Q2=function(){return!!e})()}var Z2=function(e){function t(){var e;return(0,Ke.A)(this,t),e=X2(this,t,arguments),Object.defineProperty(e,"commandName",{enumerable:!0,configurable:!0,writable:!0,value:J2.command.sub}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(G2);function e3(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,t3()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function t3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(t3=function(){return!!e})()}Object.defineProperty(Z2,"ID",{enumerable:!0,configurable:!0,writable:!0,value:J2.command.sub});var n3=function(e){function t(){var e;return(0,Ke.A)(this,t),e=e3(this,t,arguments),Object.defineProperty(e,"commandName",{enumerable:!0,configurable:!0,writable:!0,value:J2.command.sup}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(G2);function r3(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,o3()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function o3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(o3=function(){return!!e})()}Object.defineProperty(n3,"ID",{enumerable:!0,configurable:!0,writable:!0,value:J2.command.sup});var i3=function(e){function t(){return(0,Ke.A)(this,t),r3(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t){e.setAttr(t.name,!0)}}])}(lI);function a3(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,l3()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function l3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(l3=function(){return!!e})()}var u3=function(e){function t(){return(0,Ke.A)(this,t),a3(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t,n){n&&e.wrapNode(e.createElement(t))}}])}(vB);Object.defineProperty(u3,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:[J2.attr.sub,J2.attr.sup]});var c3=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"write",value:function(e,t){e.wrapNode(e.createElement(t))}}])}();function s3(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,d3()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function d3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(d3=function(){return!!e})()}Object.defineProperty(c3,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:[J2.attr.sub,J2.attr.sup]});var f3=function(e){function t(){var e;return(0,Ke.A)(this,t),e=s3(this,t,arguments),Object.defineProperty(e,"name",{enumerable:!0,configurable:!0,writable:!0,value:"sub"}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"readNode",value:function(e,t){e.addAttr(t.name,!0),this.name=t.name}}])}(Ej);Object.defineProperty(f3,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["sub","sup"]});var h3=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"write",value:function(e,t){var n,r;return(null===(n=t.attrs)||void 0===n?void 0:n.sub)?(e.wrap("<sub>","</sub>"),!1):!(null===(r=t.attrs)||void 0===r?void 0:r.sup)||(e.wrap("<sup>","</sup>"),!1)}}])}();function p3(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,v3()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function v3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v3=function(){return!!e})()}Object.defineProperty(h3,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["#text"]});var m3={"^":"sup","~":"sub"},g3=function(e){function t(){return(0,Ke.A)(this,t),p3(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this;e.registerAttr($2);var n=e.getService(_S.ID);n&&n.registerLakeNodeReader(["sub","sup"],new i3);var r=e.getService(wS.ID);r&&(r.registerAttrHTMLWriter(u3.AttrNames,new u3),r.registerHTMLNodeReader(f3.NodeNames,new f3));var o=e.getService(_S.ID);o&&o.registerLakeAttrWriter(c3.AttrNames,new c3);var i=e.getService(tI.ID);i&&i.registerMarkdownWriter(h3.NodeNames,new h3);var a=e.getService(DS.ID);a&&Object.keys(m3).forEach((function(e){a.registerMarkdownMatcher(CS.whiteSpace,new _B(t.editing,e,(function(n,r){t._handlerMarkdown(n,m3[e],r)}),!0))}))}},{key:"_handlerMarkdown",value:function(e,t,n){n=Go.setAttribute(e,n,t,!0);var r=e.createTextNode("");e.insertNodeByPosition(n.end,r),e.setSelection([e.newRange(e.newPosition(r,0))])}}])}(ct);Object.defineProperty(g3,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:J2.pluginName}),Object.defineProperty(g3,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[Z2,n3]});var b3=["top","middle","bottom"],y3=["cellBgColor","verticalAlign"],w3=HR({pluginName:"table",toolbar:{tableCellBgColor:"tableCellBgColor",tableMergeCell:"tableMergeCell",tableVerticalAlign:"tableVerticalAlign",tableBorderVisible:"tableBorderVisible"},cardSelect:"table",command:{tableBorderVisible:"tableBorderVisible",tableClearContent:"tableClearContent",tableColumnMoveTo:"tableColumnMoveTo",tableColumnWidth:"tableColumnWidth",tableDeleteColumn:"tableDeleteColumn",tableDeleteRow:"tableDeleteRow",deleteTable:"deleteTable",tableEquallyColumn:"tableEquallyColumn",tableInsertBeforeColumn:"tableInsertBeforeColumn",tableInsertAfterColumn:"tableInsertAfterColumn",tableInsertBeforeRow:"tableInsertBeforeRow",tableInsertAfterRow:"tableInsertAfterRow",tableMergeCell:"tableMergeCell",moveTable:"moveTable",tableRowHeight:"tableRowHeight",tableRowMoveTo:"tableRowMoveTo",tableSpacing:"tableSpacing",tableCellBgColor:"tableCellBgColor",tableSetQueueNo:"tableSetQueueNo",table:"table",tableToggleWidthMode:"tableToggleWidthMode",tableUnmergeCell:"tableUnmergeCell",tableVerticalAlign:"tableVerticalAlign",tableRowHead:"tableRowHead",tableColHead:"tableColHead",tableColumnAdaptation:"tableColumnAdaptation"},attr:{colspan:"colspan",colSpan:"colSpan",col:"col",rowspan:"rowspan",rowSpan:"rowSpan",width:"width",height:"height",cellBgColor:"cellBgColor",verticalAlign:"verticalAlign",colHead:"colHead",rowHead:"rowHead"},node:{tableHole:"tableHole",table:"table",th:"th",td:"td",tr:"tr"}}),A3=w3.node.table,k3=w3.node.tr,_3=w3.node.td;const C3={colWidths:{targets:[A3],values:function(e){return!!Array.isArray(e)&&(0!==e.length&&e.every(O3))}},height:{targets:[k3],values:O3},rowCount:{targets:[A3],values:x3},colCount:{targets:[A3],values:x3},borderVisible:{targets:[A3],values:[!1]},spacing:{targets:[A3],values:[!0,!1]},col:{targets:[_3],values:function(e){return"number"==typeof e&&(!!Number.isInteger(e)&&e>=0)}},rowSpan:{targets:[_3],values:E3},colSpan:{targets:[_3],values:E3},cellBgColor:{targets:[_3],values:function(){return!0}},borderColor:{targets:[_3],values:function(){return!0}},borderStyle:{targets:[_3],values:["solid","dashed"]},verticalAlign:{targets:[_3],values:b3},rowHead:{targets:[A3],values:N3},colHead:{targets:[A3],values:N3},fitWidth:{targets:[A3],values:[!0,!1]}};function N3(e){return"string"==typeof e&&/;/.test(e)}function O3(e){return"number"==typeof e&&!!Number.isFinite(e)&&e>0}function x3(e){return"number"==typeof e&&!!Number.isInteger(e)&&e>0}function E3(e){return"number"==typeof e&&!!Number.isInteger(e)&&e>1}var D3=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Ww()({},t)}),[{key:"onKernelPluginInit",get:function(){return this._option.onKernelPluginInit}},{key:"tableUIInject",get:function(){return this._option.tableUIInject}},{key:"writeTextHooks",get:function(){return this._option.writeTextHooks}}])}();Object.defineProperty(D3,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"table"});const P3=(0,Ha.A)((0,Ha.A)((0,Ha.A)({},A3,{parents:[qe.TableHole],id:qa,category:[qe.Table,qe.WidthModeBox,qe.Brick]}),k3,{parents:[A3],category:[qe.TableRow]}),_3,{parents:[k3],category:[qe.TableCell,qe.LikeRoot]});function R3(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,S3()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function S3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(S3=function(){return!!e})()}var T3=function(e){function t(){return(0,Ke.A)(this,t),R3(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getValue",value:function(e,t){var n;bt.fatal(t,"plugins/table/src/kernel/commands/spacing.ts:15");var r=e.getNodeById(t);return!1!==(null===(n=null==r?void 0:r.attrs)||void 0===n?void 0:n.spacing)}},{key:"execute",value:function(e,t,n){bt.fatal(t,"plugins/table/src/kernel/commands/spacing.ts:23");var r=e.newJob(),o=r.getNodeById(t);return(null==o?void 0:o.hasCategory(qe.Table))?(n?r.removeAttribute(o,"spacing"):r.setAttribute(o,"spacing",!1),e.commitJob(r),!0):(e.cancelJob(r),!1)}}])}(gt);Object.defineProperty(T3,"ID",{enumerable:!0,configurable:!0,writable:!0,value:w3.command.tableSpacing});var j3=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_width",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"_rowCount",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"_colCount",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"_widthList",{enumerable:!0,configurable:!0,writable:!0,value:[]});var n=t.row,r=t.col,o=t.width;this._width=o,this._rowCount=n,this._colCount=r,this._widthList=function(e,t){for(var n=Math.floor(e/t),r=[],o=0;o<t;o++)r.push(n);var i=e%t;return i>0&&(r[r.length-1]+=i),r}(o,r)}),[{key:"toNode",value:function(e){for(var t=e.createElement(A3,{rowCount:this._rowCount,colCount:this._colCount,colWidths:this._widthList}),n=0;n<this._rowCount;n++){for(var r=e.createElement(k3),o=0;o<this._colCount;o++){var i=e.createElement(_3,{col:o});e.appendChild(r,i)}e.appendChild(t,r)}return t}}])}(),I3=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"instance",value:function(e){return new j3({width:e,row:arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,col:arguments.length>2&&void 0!==arguments[2]?arguments[2]:3})}}])}(),B3=750;function M3(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,F3()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function F3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(F3=function(){return!!e})()}var L3=function(e){function t(){return(0,Ke.A)(this,t),M3(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){for(var t=e.getSelection().ranges,n=0,r=t.length;n<r;n++)if(Ut.closest(t[n].commonAncestorContainer,_3))return pt.UNAVAILABLE;return pt.NOT_EXECUTED}},{key:"execute",value:function(e,t){var n=t.width,r=t.row,o=t.col,i=t.widthMode,a=e.newJob();if(this.getState(a)===st)return e.cancelJob(a),!1;var l=I3.instance(n||B3,r,o).toNode(a),u=a.getSelection();u.collapsed||(u=wi.deleteContent(a,u)),bt.fatal(u.collapsed,"plugins/table/src/kernel/commands/table.ts:64"),i&&a.acceptAttr(l.nodeName,"widthMode",i)&&a.setAttribute(l,"widthMode",i);var c=u.firstRange.start,s=c.node.closest(qe.Block);s&&Ut.isLikeEmptyElement(s)&&(c=a.newPosition(s.parentNode,s.offset),a.removeChild(s.parentNode,s));var d=a.createHole("tableHole");a.appendChild(d,l),wr.insertNodes(a,c,[d]);var f=l.firstChild.firstChild;return bt.fatal(f&&f.nodeName===_3&&f.isConnected,"plugins/table/src/kernel/commands/table.ts:88"),a.setSelection([a.newRange(a.newPosition(f,0))]),e.commitJob(a),!0}}])}(gt);function U3(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,V3()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function V3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(V3=function(){return!!e})()}Object.defineProperty(L3,"ID",{enumerable:!0,configurable:!0,writable:!0,value:w3.command.table});var H3=function(e){function t(){return(0,Ke.A)(this,t),U3(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){var t=e.getSelection(),n=Ut.closest(t.ranges[0].commonAncestorContainer,qe.Table);return n?(bt.fatal(n,"plugins/table/src/kernel/commands/border-visible.ts:25"),!1===n.attrs.borderVisible?pt.EXECUTED:pt.NOT_EXECUTED):pt.UNAVAILABLE}},{key:"execute",value:function(e,t){var n=e.newJob(),r=this.getState(n);if(r===pt.UNAVAILABLE)return e.cancelJob(n),!1;var o=n.getSelection(),i=Ut.closest(o.firstRange.start.node,qe.Table);return bt.fatal(i,"plugins/table/src/kernel/commands/border-visible.ts:50"),!0===t?n.removeAttribute(i,"borderVisible"):!1===t||r===pt.NOT_EXECUTED?n.setAttribute(i,"borderVisible",!1):n.removeAttribute(i,"borderVisible"),e.commitJob(n),!0}}])}(gt);function z3(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,W3()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function W3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(W3=function(){return!!e})()}Object.defineProperty(H3,"ID",{enumerable:!0,configurable:!0,writable:!0,value:w3.command.tableBorderVisible});var q3=function(e){function t(){return(0,Ke.A)(this,t),z3(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){var t=e.getSelection();return t.rangeCount>1||Ut.closest(t.firstRange.commonAncestorContainer,qe.TableCell)?dt:pt.UNAVAILABLE}},{key:"execute",value:function(e){var t=e.newJob();if(this.getState(t)===st)return e.cancelJob(t),!1;var n=t.getSelection(),r=n.ranges.map((function(e){var n=Ut.closest(e.commonAncestorContainer,qe.TableCell);return bt.fatal(n,"plugins/table/src/kernel/commands/clear-content.ts:52"),Go.deleteContent(t,Vt.selectNodeContents(n))}));return t.setSelection(n.cloneByRange(r)),e.commitJob(t),!0}}])}(gt);function $3(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,K3()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function K3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(K3=function(){return!!e})()}Object.defineProperty(q3,"ID",{enumerable:!0,configurable:!0,writable:!0,value:w3.command.tableClearContent});var Y3=function(e){function t(){return(0,Ke.A)(this,t),$3(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){var t=e.getSelection();return Oa.isInTable(t)&&Oa.isSelectColumn(t)?pt.NOT_EXECUTED:pt.UNAVAILABLE}},{key:"execute",value:function(e,t){var n=e.newJob();if(this.getState(n)===pt.UNAVAILABLE)return e.cancelJob(n),!1;var r=n.getSelection(),o=Ut.closest(r.firstRange.commonAncestorContainer,qe.Table);return!Number.isInteger(t)||t<0||t>o.attrs.colCount?(e.cancelJob(n),!1):(function(e,t,n){var r=Ut.closest(t.firstRange.commonAncestorContainer,qe.Table);bt.fatal(r,"plugins/table/src/kernel/commands/helpers/move-column.ts:20");var o=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER;t.ranges.forEach((function(e){var t=Ut.closest(e.commonAncestorContainer,qe.TableCell).attrs,n=t.col,r=t.colSpan,a=void 0===r?1:r;o=Math.min(o,n),i=Math.max(i,n+a-1)})),r.children.forEach((function(t){!function(e,t,n,r,o){var i=r-n+1,a=o>n?o-r-1:o-n,l=null,u=t.children.filter((function(t){var u=t.attrs.col;return u===o&&(l=t),u>r?(u<o&&e.setAttribute(t,"col",u-i),!1):u>=n&&u<=r?(e.setAttribute(t,"col",u+a),!0):(u<n&&u>=o&&e.setAttribute(t,"col",u+i),!1)}));bt.fatal(u.length<=i,"plugins/table/src/kernel/commands/helpers/move-column.ts:106"),0===o?u.reverse().forEach((function(n){e.prependChild(t,n)})):l?u.forEach((function(n){e.insertBefore(t,n,l)})):u.forEach((function(n){e.appendChild(t,n)}))}(e,t,o,i,n)}));for(var a=(0,ln.A)(r.attrs.colWidths),l=a.slice(o,i+1),u=o;u<=i;u++)a[u]=null;a.splice.apply(a,[n,0].concat((0,ln.A)(l))),e.setAttribute(r,"colWidths",a.filter((function(e){return null!==e})))}(n,r,t),e.commitJob(n),!0)}}])}(gt);function G3(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,J3()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function J3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(J3=function(){return!!e})()}Object.defineProperty(Y3,"ID",{enumerable:!0,configurable:!0,writable:!0,value:w3.command.tableColumnMoveTo});var X3=function(e){function t(){return(0,Ke.A)(this,t),G3(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t,n,r,o){n=Array.isArray(n)?n:[n];var i=e.newJob(),a=i.getNodeById(t);if(!(null==a?void 0:a.hasCategory(qe.Table)))return!1;var l=a.attrs,u=l.colWidths,c=l.fitWidth,s=[];return(r=Number.parseInt(r+"",10))>0?(c?o.forEach((function(e,t){n.includes(t)?(t+1<o.length&&(o[t+1]+=e-r),s.push(r)):s.push(e)})):u.forEach((function(e,t){n.includes(t)?s.push(r):s.push(e)})),i.setAttribute(a,"colWidths",s),e.commitJob(i),!0):(e.cancelJob(i),!1)}}])}(gt);Object.defineProperty(X3,"ID",{enumerable:!0,configurable:!0,writable:!0,value:w3.command.tableColumnWidth});var Q3=function(){function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_layout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),bt.fatal(t&&"table"===t.nodeName,"plugins/table/src/kernel/commands/helpers/table-layout.ts:26"),this._layout=this._analyzeLayout(t)}return(0,$e.A)(e,[{key:"layout",get:function(){return this._layout}},{key:"_analyzeLayout",value:function(t){for(var n=[],r=0,o=t.childCount;r<o;r++)n.push([]);return t.children.forEach((function(t){var r=t.offset;t.children.forEach((function(t){for(var o=t.attrs,i=o.col,a=o.rowSpan,l=void 0===a?1:a,u=o.colSpan,c=void 0===u?1:u,s=0;s<l;s++)for(var d=0;d<c;d++)n[r+s][i+d]={node:t,row:r,col:i,type:0===s&&0===d?e.TYPE_NODE:e.TYPE_REF}}))})),n}}],[{key:"getLayout",value:function(t){return new e(t)._layout}},{key:"verify",value:function(t){new e(t)._layout.forEach((function(e){var t=0,n=0;e.forEach((function(e){var r=e.type,o=e.col,i=e.node;r===Q3.TYPE_NODE&&(bt.fatal(n===o,"plugins/table/src/kernel/commands/helpers/table-layout.ts:85"),bt.fatal(i.offset===t,"plugins/table/src/kernel/commands/helpers/table-layout.ts:86"),bt.fatal(i.attrs.col===o,"plugins/table/src/kernel/commands/helpers/table-layout.ts:87"),t++),n++}))}))}}])}();function Z3(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return e4(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e4(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function e4(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function t4(e,t,n){var r=n.length,o=n[0].length,i=new Map,a=new Map,l=[];n.forEach((function(n,r){var o=null,u=t.children[r],c=n.map((function(t,n){var l=t.type,c=t.node;if(l===Q3.TYPE_REF){if(c.isConnected)return i.set(c,{rowIndex:r,colIndex:n}),{type:l,node:c};if(!a.has(c)){var s=e.createElement("td",{col:n});return o?e.insertAfter(u,s,o):e.prependChild(u,s),o=s,a.set(c,{mainNode:s,rowIndex:r,colIndex:n}),{type:Q3.TYPE_NODE,node:s}}var d=a.get(c);return bt.fatal(d.mainNode,"plugins/table/src/kernel/commands/helpers/re-layout.ts:73"),a.set(c,{mainNode:d.mainNode,rowIndex:r,colIndex:n}),{type:Q3.TYPE_REF,node:d.mainNode}}return e.setAttribute(c,"col",n),e.removeAttribute(c,"rowSpan"),e.removeAttribute(c,"colSpan"),o=c,bt.fatal(o.parentNode===u,"plugins/table/src/kernel/commands/helpers/re-layout.ts:94"),{type:l,node:c}}));l.push(c)}));var u,c=Z3(i);try{for(c.s();!(u=c.n()).done;){var s=(0,tn.A)(u.value,2),d=s[0],f=s[1],h=f.rowIndex,p=f.colIndex;n4(e,d,h,p,r,o)}}catch(e){c.e(e)}finally{c.f()}var v,m=Z3(a);try{for(m.s();!(v=m.n()).done;){var g=(0,tn.A)(v.value,2)[1],b=g.mainNode,y=g.rowIndex,w=g.colIndex;n4(e,b,y,w,r,o)}}catch(e){m.e(e)}finally{m.f()}return l}function n4(e,t,n,r,o,i){var a=t.parentNode.offset,l=t.attrs.col;if(bt.fatal(a>=0&&a<o&&l>=0&&l<i,"plugins/table/src/kernel/commands/helpers/re-layout.ts:128"),a!==n){var u=n-a+1;bt.fatal(u>1,"plugins/table/src/kernel/commands/helpers/re-layout.ts:137"),e.setAttribute(t,"rowSpan",u)}if(l!==r){var c=r-l+1;bt.fatal(c>1,"plugins/table/src/kernel/commands/helpers/re-layout.ts:143"),e.setAttribute(t,"colSpan",c)}}function r4(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,o4()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function o4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(o4=function(){return!!e})()}Object.defineProperty(Q3,"TYPE_REF",{enumerable:!0,configurable:!0,writable:!0,value:"#ref"}),Object.defineProperty(Q3,"TYPE_NODE",{enumerable:!0,configurable:!0,writable:!0,value:"#node"});var i4=function(e){function t(){return(0,Ke.A)(this,t),r4(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){var t=e.getSelection(),n=Ut.closest(t.firstRange.commonAncestorContainer,qe.TableCell);return n?pi(n,t)?st:dt:st}},{key:"execute",value:function(e){var t=e.newJob();if(this.getState(t)===st)return e.cancelJob(t),!1;var n=t.getSelection(),r=Ut.closest(n.firstRange.start.node,qe.Table);bt.fatal(r,"plugins/table/src/kernel/commands/delete-column.ts:52");var o=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER;return n.ranges.forEach((function(e){var t=Ut.closest(e.start.node,qe.TableCell);o=Math.min(t.attrs.col,o),i=Math.max(t.attrs.col+(t.attrs.colSpan||1),i)})),bt.fatal(!(0===o&&i===r.attrs.colCount),"plugins/table/src/kernel/commands/delete-column.ts:68"),n=function(e,t,n,r){var o=r-n,i=t.attrs,a=i.colWidths,l=i.colCount,u=function(e,t){if((e=(0,ln.A)(e)).length>t)e.length=t;else if(e.length<t)for(var n=e.length;n<t;n++)e.push(100);return e}(a,l);bt.fatal(l>o,"plugins/table/src/kernel/commands/helpers/delete-column.ts:24"),u.splice(n,o),bt.fatal(u.length===l-o,"plugins/table/src/kernel/commands/helpers/delete-column.ts:28"),e.setAttribute(t,"colCount",l-o),e.setAttribute(t,"colWidths",u);var c=Q3.getLayout(t);c.forEach((function(t){t.splice(n,o).forEach((function(t){var n=t.type,r=t.node;n===Q3.TYPE_NODE&&e.removeChild(r.parentNode,r)}))}));var s=t4(e,t,c),d=s[0][n]||s[0][n-1];bt.fatal(d,"plugins/table/src/kernel/commands/helpers/delete-column.ts:49");var f=d.node;return bt.fatal(f&&f.isConnected,"plugins/table/src/kernel/commands/helpers/delete-column.ts:53"),e.newSelection(e.newRange(e.newPosition(f,0)))}(t,r,o,i),t.setSelection(n),e.commitJob(t),!0}}])}(gt);function a4(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return l4(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l4(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function l4(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function u4(e,t){for(var n,r,o=t.children,i=-1,a=t.childCount-1,l=a;l>=0;l--){var u=o[l].children[0];if(!u)return null;if(0===u._attrs.col){if(u.childCount>1||(null===(r=null===(n=u.children)||void 0===n?void 0:n[0])||void 0===r?void 0:r.nodeName)!==e.defaultElementName)return null;var c=u.children[0];if(!c)return null;var s,d="",f=a4(c.children);try{for(f.s();!(s=f.n()).done;){var h=s.value;if("#text"!==h.nodeName)return null;d+=h.data}}catch(e){f.e(e)}finally{f.f()}var p=parseInt(d.trim(),10);if(isNaN(i)||p+""!==d.trim())return null;if(-1===i)i=p;else{if(p!==i-1)return null;i=p}if(1===i)return{startRow:l,endRow:a}}}return null}function c4(e,t){return!t.node.isConnected||!!(t.node.isTextNode()&&t.offset>t.node.dataLength)||t.node.offset>t.node.childCount}function s4(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,o=t.children,i=0;if(o.forEach((function(t,r){r<n||t.children.forEach((function(t,n){n>0||0!==t.attrs.col||(i++,function(e,t,n){if(function(e){if(e.childCount>1)return null;var t=e.children[0];if(!t)return null;var n,r="",o=a4(t.children);try{for(o.s();!(n=o.n()).done;){var i=n.value;if("#text"!==i.nodeName)return null;r+=i.data}}catch(e){o.e(e)}finally{o.f()}return r.trim()}(t)!==n){var r=t.children.slice(0),o=0,i=r[0];(null==i?void 0:i.nodeName)===e.defaultElementName?o=1:(o=0,i=e.createElement("p",{alignment:"center"}));for(var a=o;a<r.length;a++){var l=r[a];e.removeChild(t,l)}if(0===i.childCount)return i.parent!==t&&e.appendChild(t,i),void e.appendChild(i,e.createTextNode(n));var u=i.children[0];o=0,"#text"===(null==u?void 0:u.nodeName)?(o=1,e.setTextNodeData(u,n)):(o=0,u=e.createTextNode(n));for(var c=o;c<i.childCount;c++){var s=i.children[c];e.removeChild(i,s)}i.parent!==t&&e.appendChild(t,i),u.parent!==i&&e.appendChild(i,u);var d=function(e,t){var n=e.getSelection();if(!n)return!1;var r,o=[],i=!1,a=a4(n.ranges);try{for(a.s();!(r=a.n()).done;){var l=r.value;if(l.collapsed){if(c4(0,l.start)){o.push(e.newRange(t,t)),i=!0;continue}}else if(c4(0,l.start)||c4(0,l.end)){o.push(e.newRange(t,t)),i=!0;continue}o.push(l)}}catch(e){a.e(e)}finally{a.f()}return!!i&&o}(e,e.newPosition(u,u.dataLength));d&&e.setSelection(e.newSelection(d))}}(e,t,""+i))}))})),r>=0&&r<n)for(var a=r;a<n;a++){var l=o[a].children[0];if(0===l.attrs.col){var u,c=a4(l.children.slice(0));try{for(c.s();!(u=c.n()).done;){var s=u.value;e.removeChild(l,s)}}catch(e){c.e(e)}finally{c.f()}}}}function d4(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,f4()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function f4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(f4=function(){return!!e})()}Object.defineProperty(i4,"ID",{enumerable:!0,configurable:!0,writable:!0,value:w3.command.tableDeleteColumn});var h4=function(e){function t(){return(0,Ke.A)(this,t),d4(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){var t=e.getSelection(),n=Ut.closest(t.firstRange.commonAncestorContainer,qe.TableCell);return n?pi(n,t)?st:dt:st}},{key:"execute",value:function(e){var t=e.newJob();if(this.getState(t)===st)return e.cancelJob(t),!1;var n=t.getSelection(),r=Ut.closest(n.firstRange.start.node,qe.Table);bt.fatal(r,"plugins/table/src/kernel/commands/delete-row.ts:52");var o=Ut.closest(n.firstRange.start.node,qe.TableCell),i=Ut.closest(n.lastRange.end.node,qe.TableCell),a=o.parentNode.offset,l=i.parentNode.offset+(i.attrs.rowSpan||1);return bt.fatal(!(0===a&&l===r.childCount),"plugins/table/src/kernel/commands/delete-row.ts:68"),n=function(e,t,n,r){var o=r-n,i=t.attrs.rowCount;bt.fatal(i-o>0,"plugins/table/src/kernel/commands/helpers/delete-row.ts:22");var a=u4(e,t);e.setAttribute(t,"rowCount",i-o);for(var l=Q3.getLayout(t),u=(0,ln.A)(t.children),c=n;c<r;c++)e.removeChild(t,u[c]),l[c]=null;var s=t4(e,t,l.filter(Boolean)),d=s[n]||s[n-1];bt.fatal(d,"plugins/table/src/kernel/commands/helpers/delete-row.ts:47");var f=d[0].node;return bt.fatal(f&&f.isConnected,"plugins/table/src/kernel/commands/helpers/delete-row.ts:51"),a&&r>a.startRow&&s4(e,t,n<a.startRow?n:a.startRow),e.newSelection(e.newRange(e.newPosition(f,0)))}(t,r,a,l),t.setSelection(n),e.commitJob(t),!0}}])}(gt);function p4(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,v4()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function v4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v4=function(){return!!e})()}Object.defineProperty(h4,"ID",{enumerable:!0,configurable:!0,writable:!0,value:w3.command.tableDeleteRow});var m4=function(e){function t(){return(0,Ke.A)(this,t),p4(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t){var n=e.newJob(),r=n.getNodeById(t);if(!(null==r?void 0:r.hasCategory(qe.Table)))return!1;var o=wi.deleteContent(n,n.selectNode(r));return bt.fatal(o.collapsed,"plugins/table/src/kernel/commands/delete-table.ts:24"),n.setSelection(o),e.commitJob(n),!0}}])}(gt);function g4(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,b4()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function b4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b4=function(){return!!e})()}Object.defineProperty(m4,"ID",{enumerable:!0,configurable:!0,writable:!0,value:w3.command.deleteTable});var y4=function(e){function t(){return(0,Ke.A)(this,t),g4(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:B3,r=e.newJob(),o=r.getNodeById(t);if(!(null==o?void 0:o.hasCategory(qe.Table)))return!1;var i=o.attrs,a=i.colCount,l=i.colWidths;if(i.widthMode===Dl&&(n=l.reduce((function(e,t){return e+t}),0)),!(n>a))return e.cancelJob(r),!1;var u=this._equallyDividedColumn(n,a);return r.setAttribute(o,"colWidths",u),e.commitJob(r),!0}},{key:"_equallyDividedColumn",value:function(e,t){var n=Math.floor(e/t);bt.fatal(n>0,"plugins/table/src/kernel/commands/equally-column.ts:55");for(var r=e%t,o=[],i=0;i<t;i++)o.push(n);return r>0&&(o[t-1]+=r),o}}])}(gt);Object.defineProperty(y4,"ID",{enumerable:!0,configurable:!0,writable:!0,value:w3.command.tableEquallyColumn});var w4=o(4846),A4=o.n(w4);function k4(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function _4(e,t,n){if(e&&t&&n&&t.children&&0!==t.children.length){var r,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return k4(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k4(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(t.children);try{for(o.s();!(r=o.n()).done;){var i=r.value;if(i){if(i.nodeName===e.defaultElementName){var a=e.createElement(e.defaultElementName,i._attrs||{});return e.appendChild(n,a),_4(e,i,a)}if(i.isTextNode())return void e.appendChild(n,e.createTextNode("",i._attrs||{}))}}}catch(e){o.e(e)}finally{o.f()}}}function C4(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,N4()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function N4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(N4=function(){return!!e})()}var O4=function(e){function t(){var e;return(0,Ke.A)(this,t),e=C4(this,t,arguments),Object.defineProperty(e,"_position",{enumerable:!0,configurable:!0,writable:!0,value:""}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){var t=e.getSelection();return t.rangeCount>1||Ut.closest(t.firstRange.commonAncestorContainer,qe.Table)?dt:pt.UNAVAILABLE}},{key:"execute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=e.newJob();if(this.getState(o)===st)return e.cancelJob(o),!1;var i=o.getSelection();return-1===n&&(n=this._getIndex(i)),function(e,t,n,r,o){var i,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=-1===(i="before"===r?n-1:n)?0:i,u=t.attrs,c=u.colCount,s=u.colWidths,d=(0,ln.A)(s),f=a?80:s[n];bt.fatal(i>=-1&&i<=c,"plugins/table/src/kernel/commands/helpers/insert-column.ts:43");var h=[];if(t.children.forEach((function(e,t){var n=l,r=e.children[n];if(!h[t]){for(;(!r||r.attrs.col>l)&&0!==n;)n--,r=e.children[n];if(r)for(var o=r.attrs.rowSpan,i=void 0===o?1:o,a=t;a<t+i;a++)h[a]=A4()(r.attrs,y3)}})),-1===i)for(var p=0;p<o;p++)d.unshift(f);else if(i===c)for(var v=0;v<o;v++)d.push(f);else for(var m=0;m<o;m++)d.splice(i+1,0,f);if(e.setAttribute(t,"colCount",c+o),e.setAttribute(t,"colWidths",d),-1===i)return t.children.forEach((function(t,n){t.children.forEach((function(t){e.setAttribute(t,"col",t.attrs.col+o)}));for(var r=o-1;r>=0;r--)e.prependChild(t,e.createElement("td",a?{col:r}:Object.assign({col:r},h[n])))})),void(a&&s4(e,t,1));if(i!==c){var g=Q3.getLayout(t),b=new Set;g.forEach((function(t,n){var r=t[i],a=r.type,l=r.node;if(l.attrs.col+(l.attrs.colSpan||1)-1>i){b.has(l)||(b.add(l),e.setAttribute(l,"colSpan",l.attrs.colSpan+o));for(var u=0;u<o;u++)t.splice(i+1,0,{type:Q3.TYPE_REF,node:l})}else if(a===Q3.TYPE_REF){bt.fatal(l.attrs.colSpan>1||l.attrs.rowSpan>1,"plugins/table/src/kernel/commands/helpers/insert-column.ts:173");for(var c=0;c<o;c++)t.splice(i+1,0,{type:Q3.TYPE_NODE,node:null})}else for(var s=0;s<o;s++){var d=e.createElement("td",Object.assign({},h[n]));e.insertAfter(l.parentNode,d,l),_4(e,l,d),t.splice(i+1,0,{type:Q3.TYPE_NODE,node:d})}})),g.forEach((function(n,r){var i=null;bt.fatal(n.length===t.attrs.colCount,"plugins/table/src/kernel/commands/helpers/insert-column.ts:207"),n.forEach((function(n,o){if(n.type===Q3.TYPE_NODE)if(n.node)e.setAttribute(n.node,"col",o),i=n.node;else{var a=e.createElement("td",Object.assign({col:o},h[r]));i?e.insertAfter(t.children[r],a,i):e.prependChild(t.children[r],a),i=a,n.node=a}}));var a=n[n.length-1].node;bt.fatal(a.attrs.col+(a.attrs.colSpan||1)===c+o,"plugins/table/src/kernel/commands/helpers/insert-column.ts:241")}))}else t.children.forEach((function(t,n){for(var r=0;r<o;r++)e.appendChild(t,e.createElement("td",Object.assign({col:c+r},h[n])))}))}(o,Ut.closest(i.firstRange.commonAncestorContainer,qe.Table),n,this._position,t,r),e.commitJob(o),!0}},{key:"_getIndex",value:function(e){if("before"===this._position)return Ut.closest(e.firstRange.start.node,qe.TableCell).attrs.col;var t=Ut.closest(e.lastRange.end.node,qe.TableCell);return t.attrs.col+(t.attrs.colSpan||1)-1}}])}(gt),x4=function(e){function t(){var e;return(0,Ke.A)(this,t),e=C4(this,t,arguments),Object.defineProperty(e,"_position",{enumerable:!0,configurable:!0,writable:!0,value:"before"}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(O4);Object.defineProperty(x4,"ID",{enumerable:!0,configurable:!0,writable:!0,value:w3.command.tableInsertBeforeColumn});var E4=function(e){function t(){var e;return(0,Ke.A)(this,t),e=C4(this,t,arguments),Object.defineProperty(e,"_position",{enumerable:!0,configurable:!0,writable:!0,value:"after"}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(O4);function D4(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,P4()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function P4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(P4=function(){return!!e})()}Object.defineProperty(E4,"ID",{enumerable:!0,configurable:!0,writable:!0,value:w3.command.tableInsertAfterColumn});var R4=function(e){function t(){var e;return(0,Ke.A)(this,t),e=D4(this,t,arguments),Object.defineProperty(e,"_position",{enumerable:!0,configurable:!0,writable:!0,value:""}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){var t=e.getSelection();return t.rangeCount>1||Ut.closest(t.firstRange.commonAncestorContainer,qe.Table)?dt:pt.UNAVAILABLE}},{key:"execute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=e.newJob();if(this.getState(o)===st)return e.cancelJob(o),!1;var i=o.getSelection();-1===n&&(n=this._getSourceRowIndex(i));var a=function(e,t,n,r,o){var i={},a=t.children[n];bt.fatal(a,"plugins/table/src/kernel/commands/helpers/insert-row.ts:24"),a.attrs.height&&(i.height=a.attrs.height);var l=t.attrs.rowCount;bt.fatal(n>=0&&n<=l-1,"plugins/table/src/kernel/commands/helpers/insert-row.ts:34"),e.setAttribute(t,"rowCount",l+o);var u=u4(e,t);if(0===n&&"before"===r||n===l-1&&"after"===r){var c=function(e,t,n,r,o,i){var a=null,l=Q3.getLayout(t)[o],u=e.createElement(k3,i),c=[];l.forEach((function(t,n){if(t.type===Q3.TYPE_NODE){var r=A4()(t.node.attrs,y3);c[n]=e.createElement(_3,Object.assign({col:n},r)),e.appendChild(u,c[n]),_4(e,t.node,c[n])}else{var o=t.node,i=c[o.attrs.col];if(i)bt.fatal(o.attrs.colSpan>1,"plugins/table/src/kernel/commands/helpers/insert-row.ts:120"),e.setAttribute(i,"colSpan",(i.attrs.colSpan||1)+1);else{var a=A4()(o.attrs,y3);c[n]=e.createElement(_3,Object.assign({col:n},a)),e.appendChild(u,c[n]),_4(e,t.node,c[n])}}}));for(var s=0;s<n;s++){var d=0===s?u:e.cloneNode(u,!0);0===s&&(a=u),e[r?"prependChild":"appendChild"](t,d)}return a}(e,t,o,"before"===r,n,i);return!u||0!==u.startRow&&n!==l-1||s4(e,t,u.startRow),c}var s=function(e,t,n,r,o,i){var a=null,l=t.attrs.rowCount,u=Q3.getLayout(t),c=o;r&&(c=o-1),bt.fatal(c>=0&&c<l-1,"plugins/table/src/kernel/commands/helpers/insert-row.ts:178");for(var s=u[c],d=e.createElement(k3,i),f=new Set,h=u[o],p=[],v=0,m=s.length;v<m;v++){var g=s[v].node;if(g.parentNode.offset+(g.attrs.rowSpan||1)-1>c)bt.fatal(g.attrs.rowSpan>1,"plugins/table/src/kernel/commands/helpers/insert-row.ts:197"),f.has(g)||(f.add(g),e.setAttribute(g,"rowSpan",g.attrs.rowSpan+n));else{var b=h[v],y=p[b.node.attrs.col];if(b.type===Q3.TYPE_REF&&y)e.setAttribute(y,"colSpan",(y.attrs.colSpan||1)+1);else{var w=A4()(b.node.attrs,y3);p[v]=e.createElement(_3,Object.assign({col:v},w)),e.appendChild(d,p[v]),_4(e,g,p[v])}}}for(var A=t.children[c],k=0;k<n;k++){var _=void 0;k===n-1?(a=d,_=d):_=e.cloneNode(d,!0),e.insertAfter(t,_,A)}return a}(e,t,o,"before"===r,n,i);return u&&n>=u.startRow&&s4(e,t,u.startRow),s}(o,Ut.closest(i.firstRange.commonAncestorContainer,qe.Table),n,this._position,t);return r&&o.setSelection(Pa(o,o.selectNodeContents(a.firstChild),!0)),e.commitJob(o),!0}},{key:"_getSourceRowIndex",value:function(e){var t=this._position,n=Ut.closest(("before"===t?e.firstRange:e.lastRange).commonAncestorContainer,qe.TableCell);bt.fatal(n,"plugins/table/src/kernel/commands/insert-row.ts:92");var r=n.parentNode;return"before"===t?r.offset:r.offset+(n.attrs.rowSpan||1)-1}}])}(gt),S4=function(e){function t(){var e;return(0,Ke.A)(this,t),e=D4(this,t,arguments),Object.defineProperty(e,"_position",{enumerable:!0,configurable:!0,writable:!0,value:"before"}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(R4);Object.defineProperty(S4,"ID",{enumerable:!0,configurable:!0,writable:!0,value:w3.command.tableInsertBeforeRow});var T4=function(e){function t(){var e;return(0,Ke.A)(this,t),e=D4(this,t,arguments),Object.defineProperty(e,"_position",{enumerable:!0,configurable:!0,writable:!0,value:"after"}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(R4);function j4(e,t,n,r){e[t]||(e[t]=[]);for(var o=n;o<r;o++)bt.fatal(1!==e[t][o],"plugins/table/src/kernel/commands/helpers/reset-position.ts:65"),e[t][o]=1}function I4(e,t,n){B4(n)||n.children.forEach((function(n){e.appendChild(t,n)}))}function B4(e){var t=e.children;return 1===t.length&&!t[0].attrs.alignment&&Ut.isLikeEmptyElement(t[0])}function M4(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,F4()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function F4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(F4=function(){return!!e})()}Object.defineProperty(T4,"ID",{enumerable:!0,configurable:!0,writable:!0,value:w3.command.tableInsertAfterRow});var L4=function(e){function t(){return(0,Ke.A)(this,t),M4(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){var t=e.getSelection(),n=t.ranges;if(t.isTableSelection)return pt.NOT_EXECUTED;var r=Ut.closest(n[0].commonAncestorContainer,qe.TableCell);return r&&(r.attrs.colSpan>1||r.attrs.rowSpan>1)?pt.EXECUTED:pt.UNAVAILABLE}},{key:"execute",value:function(e){var t=e.newJob();if(this.getState(t)===pt.UNAVAILABLE)return e.cancelJob(t),!1;var n=t.getSelection(),r=Ut.closest(n.firstRange.start.node,qe.Table);return bt.fatal(n.rangeCount>1,"plugins/table/src/kernel/commands/merge-cell.ts:52"),bt.fatal(r,"plugins/table/src/kernel/commands/merge-cell.ts:53"),n=function(e,t){var n=t.ranges,r=n.map((function(e){return Ut.closest(e.start.node,qe.TableCell)})),o=r[0],i=o.parentNode.parentNode,a=u4(e,i);B4(o)&&e.removeChild(o,o.firstChild);for(var l=o.parentNode.offset,u=l,c=0,s=1,d=r.length;s<d;s++){var f=Ut.closest(n[s].start.node,qe.TableCell),h=f.attrs,p=h.colSpan,v=void 0===p?1:p,m=h.rowSpan,g=void 0===m?1:m,b=f.parentNode.offset;u=Math.max(b+g-1,u),b===l&&(c+=v),I4(e,o,f),e.removeChild(f.parentNode,f)}return u>l&&e.setAttribute(o,"rowSpan",u-l+1),c>0?e.setAttribute(o,"colSpan",(o.attrs.colSpan||1)+c):a&&u>l&&u>a.startRow&&s4(e,i,Math.min(l,a.startRow)),function(e,t){bt.fatal(t.hasCategory(qe.Table),"plugins/table/src/kernel/commands/helpers/reset-position.ts:6");var n=[];t.children.forEach((function(t){!function(e,t,n){var r=n.offset;t[r]||(t[r]=[]);var o=0;n.children.forEach((function(n){o=function(e,t){for(var n=0,r=e.length;n<r;n++)if(1!==e[n])return n;return e.length}(t[r]);var i=n.attrs,a=i.rowSpan,l=void 0===a?1:a,u=i.colSpan,c=void 0===u?1:u;e.setAttribute(n,"col",o),j4(t,r,o,o+c);for(var s=1;s<l;s++)j4(t,r+s,o,o+c);o+=c}))}(e,n,t)}))}(e,i),Q3.verify(i),e.selectNodeContents(o)}(t,n),t.setSelection(n),e.commitJob(t),!0}}])}(gt);function U4(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,V4()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function V4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(V4=function(){return!!e})()}Object.defineProperty(L4,"ID",{enumerable:!0,configurable:!0,writable:!0,value:w3.command.tableMergeCell});var H4=function(e){function t(){return(0,Ke.A)(this,t),U4(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t,n){var r=e.newJob(),o=r.getNodeById(t);o&&o.isConnected&&o.hasCategory(qe.Table)?(wr.insertNodes(r,n,[o.parentNode]),r.setSelection(r.selectNode(o)),e.commitJob(r)):e.cancelJob(r)}}])}(gt);function z4(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,W4()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function W4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(W4=function(){return!!e})()}Object.defineProperty(H4,"ID",{enumerable:!0,configurable:!0,writable:!0,value:w3.command.moveTable});var q4=function(e){function t(){return(0,Ke.A)(this,t),z4(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t,n,r){n=Array.isArray(n)?n:[n];var o=e.newJob(),i=o.getNodeById(t);return!!(null==i?void 0:i.hasCategory(qe.Table))&&(r=Number.parseInt(r+"",10),n.forEach((function(e){o.setAttribute(i.children[e],"height",r)})),e.commitJob(o),!0)}}])}(gt);function $4(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,K4()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function K4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(K4=function(){return!!e})()}Object.defineProperty(q4,"ID",{enumerable:!0,configurable:!0,writable:!0,value:w3.command.tableRowHeight});var Y4=function(e){function t(){return(0,Ke.A)(this,t),$4(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){var t=e.getSelection();return Oa.isInTable(t)&&Oa.isSelectRow(t)?pt.NOT_EXECUTED:pt.UNAVAILABLE}},{key:"execute",value:function(e,t){var n=e.newJob();if(this.getState(n)===pt.UNAVAILABLE)return e.cancelJob(n),!1;var r=n.getSelection(),o=Ut.closest(r.firstRange.commonAncestorContainer,qe.Table);return!Number.isInteger(t)||t<0||t>o.attrs.rowCount?(e.cancelJob(n),!1):(function(e,t,n){var r=Ut.closest(t.firstRange.commonAncestorContainer,qe.Table);bt.fatal(r,"plugins/table/src/kernel/commands/helpers/move-row.ts:16");var o=r.attrs.rowCount,i=Number.MAX_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER;t.ranges.forEach((function(e){var t=Ut.closest(e.commonAncestorContainer,qe.TableCell).parentNode.offset;i=Math.min(i,t),a=Math.max(a,t)}));var l=r.children.slice(i,a+1);if(n!==o){var u=r.children[n];bt.fatal(u,"plugins/table/src/kernel/commands/helpers/move-row.ts:45"),l.forEach((function(t){e.insertBefore(r,t,u)}))}else l.forEach((function(t){e.appendChild(r,t)}))}(n,r,t),e.commitJob(n),!0)}}])}(gt);function G4(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function J4(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,X4()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function X4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(X4=function(){return!!e})()}Object.defineProperty(Y4,"ID",{enumerable:!0,configurable:!0,writable:!0,value:w3.command.tableRowMoveTo});var Q4=function(e){function t(){return(0,Ke.A)(this,t),J4(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){var t=e.getSelection(),n=t.ranges;return Oa.isInTableHead(t)?pt.UNAVAILABLE:t.isTableSelection||Ut.closest(n[0].commonAncestorContainer,qe.TableCell)?pt.NOT_EXECUTED:pt.UNAVAILABLE}},{key:"getValue",value:function(e){var t=e.getSelection().firstRange.commonAncestorContainer,n=Ut.closest(t,qe.TableCell);return n&&n.attrs.cellBgColor||null}},{key:"execute",value:function(e,t){var n=e.newJob();if(this.getState(n)===pt.UNAVAILABLE)return e.cancelJob(n),!1;var r,o=n.getSelection(),i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return G4(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G4(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(o.ranges);try{for(i.s();!(r=i.n()).done;){var a=r.value.commonAncestorContainer.closest(qe.TableCell);if(!a)return e.cancelJob(n),!1;t?n.setAttribute(a,"cellBgColor",t):n.removeAttribute(a,"cellBgColor")}}catch(e){i.e(e)}finally{i.f()}return n.setSelection(o),e.commitJob(n),!0}}])}(gt);function Z4(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,e5()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function e5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(e5=function(){return!!e})()}Object.defineProperty(Q4,"ID",{enumerable:!0,configurable:!0,writable:!0,value:w3.command.tableCellBgColor});var t5=function(e){function t(){return(0,Ke.A)(this,t),Z4(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getValue",value:function(e,t){bt.fatal(t,"plugins/table/src/kernel/commands/toggle-width-mode.ts:20");var n=e.getNodeById(t);return bt.fatal(n,"plugins/table/src/kernel/commands/toggle-width-mode.ts:24"),this._getValue(n)}},{key:"execute",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;bt.fatal(t,"plugins/table/src/kernel/commands/toggle-width-mode.ts:30");var r=e.newJob(),o=r.getNodeById(t);if(!(null==o?void 0:o.hasCategory(qe.Table)))return e.cancelJob(r),!1;if(n===Dl||n===El)r.setAttribute(o,"widthMode",n);else{var i=this._getValue(o);r.setAttribute(o,"widthMode",i===Dl?El:Dl)}return e.commitJob(r),!0}},{key:"_getValue",value:function(e){var t;return(null===(t=e.attrs)||void 0===t?void 0:t.widthMode)===Dl?Dl:El}}])}(gt);function n5(e,t,n,r){if(bt.fatal(!r.isConnected,"plugins/table/src/kernel/commands/helpers/unmerge-cell.ts:64"),0===n)return e.prependChild(t,r),void bt.fatal(0===r.offset,"plugins/table/src/kernel/commands/helpers/unmerge-cell.ts:69");for(var o=t.children[n-1]||t.lastChild;o;){if(o.attrs.col<n)return void e.insertAfter(t,r,o);o=o.previousSibling}e.prependChild(t,r)}function r5(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,o5()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function o5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(o5=function(){return!!e})()}Object.defineProperty(t5,"ID",{enumerable:!0,configurable:!0,writable:!0,value:w3.command.tableToggleWidthMode});var i5=function(e){function t(){return(0,Ke.A)(this,t),r5(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){var t=e.getSelection().ranges;if(1!==t.length)return pt.UNAVAILABLE;var n=Ut.closest(t[0].commonAncestorContainer,qe.TableCell);return n&&(n.attrs.colSpan>1||n.attrs.rowSpan>1)?pt.NOT_EXECUTED:pt.UNAVAILABLE}},{key:"execute",value:function(e){var t=e.newJob();if(this.getState(t)===pt.UNAVAILABLE)return e.cancelJob(t),!1;var n=t.getSelection(),r=Ut.closest(n.firstRange.commonAncestorContainer,qe.TableCell);return bt.fatal(r,"plugins/table/src/kernel/commands/ummerge-cell.ts:52"),function(e,t){var n=t.parentNode.parentNode;bt.fatal(n,"plugins/table/src/kernel/commands/helpers/unmerge-cell.ts:9");var r=Q3.getLayout(n),o=t.attrs,i=o.rowSpan,a=void 0===i?1:i,l=o.colSpan,u=void 0===l?1:l,c=o.col,s=t.parentNode.offset;e.removeAttribute(t,"colSpan"),e.removeAttribute(t,"rowSpan"),bt.fatal(a>1||u>1,"plugins/table/src/kernel/commands/helpers/unmerge-cell.ts:26");for(var d=0;d<a;d++)for(var f=s+d,h=r[f],p=n.children[f],v=0;v<u;v++){var m=c+v,g=h[m];0===d&&0===v?bt.fatal(g.type===Q3.TYPE_NODE,"plugins/table/src/kernel/commands/helpers/unmerge-cell.ts:39"):(bt.fatal(g.type===Q3.TYPE_REF,"plugins/table/src/kernel/commands/helpers/unmerge-cell.ts:41"),n5(e,p,m,e.createElement(_3,{col:m})))}Q3.verify(n)}(t,r),e.commitJob(t),!0}}])}(gt);function a5(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,l5()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function l5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(l5=function(){return!!e})()}Object.defineProperty(i5,"ID",{enumerable:!0,configurable:!0,writable:!0,value:w3.command.tableUnmergeCell});var u5=function(e){function t(){return(0,Ke.A)(this,t),a5(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){var t=e.getSelection(),n=t.ranges;return t.isTableSelection||Ut.closest(n[0].commonAncestorContainer,qe.TableCell)?pt.NOT_EXECUTED:pt.UNAVAILABLE}},{key:"getValue",value:function(e){var t=e.getSelection(),n=t.ranges;if(t.isTableSelection){for(var r=null,o=0,i=n.length;o<i;o++){var a=Ut.closest(n[o].commonAncestorContainer,qe.TableCell);bt.fatal(a,"plugins/table/src/kernel/commands/vertical-align.ts:54");var l=a.attrs.verticalAlign||"top";if(null===r)r=l;else if(r!==l)return null}return r||"top"}var u=Ut.closest(n[0].commonAncestorContainer,qe.TableCell);return u?u.attrs.verticalAlign||"top":null}},{key:"execute",value:function(e,t){var n=e.newJob();if(this.getState(n)===pt.UNAVAILABLE)return e.cancelJob(n),!1;var r,o=n.getSelection();return r=b3.includes(t)?wi.setAttribute(n,o,"verticalAlign",t):wi.removeAttribute(n,o,"verticalAlign"),n.setSelection(r),e.commitJob(n),!0}}])}(gt);Object.defineProperty(u5,"ID",{enumerable:!0,configurable:!0,writable:!0,value:w3.command.tableVerticalAlign});var c5="#REF",s5=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e),Object.defineProperty(this,"_matrix",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_maxColCount",{enumerable:!0,configurable:!0,writable:!0,value:0})}),[{key:"addRow",value:function(e){this._matrix[e]||(this._matrix[e]=[])}},{key:"addCellNode",value:function(e,t){var n=this._getCellSpan(t),r=n.rowSpan,o=n.colSpan,i=this._addNodeToMatrix(e,t);ar.setAttribute(t,"col",i);for(var a=0;a<r;a++){for(var l=e+a,u=0;u<o;u++)if(0!==a||0!==u){var c=i+u;this._matrix[l]||(this._matrix[l]=[]),this._matrix[l][c]={type:c5,row:e,col:i}}this._maxColCount=Math.max(this._maxColCount,this._matrix[l].length)}}},{key:"fix",value:function(e){var t,n=e.children||[],r=this._maxColCount;if(!r||!n.length)return{rowCount:0,colCount:0};this._removeEmptyRow(e);var o=this._matrix,i=(0,ln.A)((null===(t=null==e?void 0:e.attrs)||void 0===t?void 0:t.colWidths)||[]);bt.fatal(r>0,"plugins/table/src/kernel/helpers/table-matrix.ts:94"),o.forEach((function(t,o){var a,l,u;n[o]||ar.appendChild(e,ar.createElement("tr"));for(var c=-1,s=0,d=r;s<d;s++){var f=t[s];if((null==f?void 0:f.type)!==c5)if(c++,f){if(null===(l=f.attrs)||void 0===l?void 0:l.width){var h=f.attrs.width/((null===(u=f.attrs)||void 0===u?void 0:u.colSpan)||1);i[s]=Math.max(i[s]||0,h)}}else bt.fatal(!(null===(a=n[o].children)||void 0===a?void 0:a[s]),"plugins/table/src/kernel/helpers/table-matrix.ts:117"),ar.setChildByOffset(n[o],c,ar.createElement("td",{col:s}))}}));for(var a=Math.max(Math.floor(B3/r),40),l=0;l<r;l++)i[l]||(i[l]=a);return i.length>r&&(i.length=r),{colCount:r,colWidths:i,rowCount:this._matrix.length}}},{key:"_removeEmptyRow",value:function(e){var t=[];this._matrix=this._matrix.map((function(n,r){var o;return 0===n.length?((null===(o=e.children)||void 0===o?void 0:o[r])&&t.push(e.children[r]),null):n})).filter(Boolean),t.forEach((function(t){ar.removeChild(e,t)}))}},{key:"_addNodeToMatrix",value:function(e,t){if(!this._matrix[e])return this._matrix[e]=[t],0;for(var n=this._matrix[e],r=0,o=n.length;r<o;r++)if(!n[r])return n[r]=t,r;return n.push(t),n.length-1}},{key:"_getCellSpan",value:function(e){var t=e.attrs;return{colSpan:(null==t?void 0:t.colSpan)||1,rowSpan:(null==t?void 0:t.rowSpan)||1}}}])}();function d5(e){var t=e.children,n=void 0===t?[]:t;return!!n&&(n.forEach((function(t){"tr"!==t.name?ar.removeChild(e,t):t.children&&(t.children=t.children.filter((function(e){return"td"===e.name})))})),function(e){var t=e.children;if(!(null==t?void 0:t.length))return!1;var n=new s5;t.forEach((function(e,t){var r=e.children||[];n.addRow(t),r.forEach((function(e){n.addCellNode(t,e)}))}));var r=n.fix(e),o=r.rowCount,i=r.colWidths,a=r.colCount;return 0!==a&&(ar.setAttribute(e,{rowCount:o,colCount:a,colWidths:i}),!0)}(e))}var f5=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"read",value:function(e,t){d5(t)||ar.removeChild(e.parentNode,t)}},{key:"destroy",value:function(){}}])}(),h5=function(){return(0,$e.A)((function e(t,n){(0,Ke.A)(this,e),Object.defineProperty(this,"_readContext",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_tableModelNode",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"_tableNode",{enumerable:!0,configurable:!0,writable:!0,value:null})}),[{key:"parse",value:function(){var e=this,t=this._tableModelNode,n=t.attrs,r=t.children;if(r)return this._tableNode=ar.createElement(A3,{id:n.id,borderVisible:"true"!==n["hide-border"],spacing:"false"!==n.margin,widthMode:n["width-mode"],rowHead:n["row-head"],colHead:n["col-head"],fitWidth:"true"===n["fit-width"]}),r.forEach((function(t){var n=t.name;"colgroup"===n?e._parseColGroup(t):"tbody"===n||"thead"===n?t.children&&t.children.forEach((function(t){"tr"===t.name&&e._parseRow(t)})):"tr"===n&&e._parseRow(t)})),d5(this._tableNode)?this._tableNode:null}},{key:"_parseColGroup",value:function(e){if(e.children){var t=e.children.filter((function(e){return"col"===e.name})).map((function(e){var t=e.attrs,n=void 0===t?{}:t,r=Number.parseInt(n.width,10);return r>0?r:null}));ar.setAttribute(this._tableNode,"colWidths",t)}}},{key:"_parseRow",value:function(e){var t=this,n=e.style,r=e.children,o=e.attrs,i={};n&&n.height&&n.height.endsWith("px")&&(i.height=parseInt(n.height,10)||33),(o["data-lake-id"]||o.id)&&(i.id=o["data-lake-id"]||o.id);var a=ar.createElement(k3,i);r&&r.forEach((function(e){"th"!==e.name&&"td"!==e.name||t._parseCell(a,e)})),ar.appendChild(this._tableNode,a)}},{key:"_parseCell",value:function(e,t){var n={},r=this._readContext.getChildContext(),o=t.attrs,i=t.style;i&&(i.background&&i.background.indexOf(" ")<0&&(n.cellBgColor=i.background),i["background-color"]&&(n.cellBgColor=i["background-color"]),i["vertical-align"]&&(n.verticalAlign=i["vertical-align"]),i["text-align"]&&r.setAttr("alignment",i["text-align"])),o.colspan>1&&(n.colSpan=Number.parseInt(o.colspan,10)),o.rowspan>1&&(n.rowSpan=Number.parseInt(o.rowspan,10)),(o["data-lake-id"]||o.id)&&(n.id=o["data-lake-id"]||o.id);var a=ar.createElement(_3,n);ar.appendChild(e,a),t.children&&ar.setChildren(a,r.readByNodes(t.children))}}])}();function p5(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,v5()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function v5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v5=function(){return!!e})()}var m5=function(e){function t(){return(0,Ke.A)(this,t),p5(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t){e.stop();var n=new h5(e,t).parse();n&&e.setNode(n)}}])}(lI);function g5(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,b5()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function b5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b5=function(){return!!e})()}var y5=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=g5(this,t),Object.defineProperty(n,"hooks",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){var n,r,o,i,a=this;e.stop(),t.children&&(this.tryInjectLine(e,null===(r=null===(n=this.hooks)||void 0===n?void 0:n.onTableStart)||void 0===r?void 0:r.call(n,t)),t.children.forEach((function(t,n){var r,o,i,l;a.tryInjectLine(e,null===(o=null===(r=a.hooks)||void 0===r?void 0:r.onRowStart)||void 0===o?void 0:o.call(r,t,n)),e.newGroup(),t.children&&t.children.forEach((function(t,n){var r,o,i,l;a.tryInjectLine(e,null===(o=null===(r=a.hooks)||void 0===r?void 0:r.onCellStart)||void 0===o?void 0:o.call(r,t,n)),e.newGroup(),t.children&&t.children.forEach((function(t){e.write(t)})),e.closeGroup(),a.tryInjectLine(e,null===(l=null===(i=a.hooks)||void 0===i?void 0:i.onCellEnd)||void 0===l?void 0:l.call(i,t,n))})),e.closeGroup(),a.tryInjectLine(e,null===(l=null===(i=a.hooks)||void 0===i?void 0:i.onRowEnd)||void 0===l?void 0:l.call(i,t,n))})),this.tryInjectLine(e,null===(i=null===(o=this.hooks)||void 0===o?void 0:o.onTableEnd)||void 0===i?void 0:i.call(o,t)))}},{key:"tryInjectLine",value:function(e,t){t&&e.newline(t)}}])}(YG);function w5(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,A5()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function A5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(A5=function(){return!!e})()}var k5=function(e){function t(){return(0,Ke.A)(this,t),w5(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"readAttr",value:function(e,t,n,r){if((n=parseInt(n,10))&&!(n<=0))if("height"!==t){if("td"===r.name||"th"===r.name)switch(t){case"colspan":n>0&&e.addAttr("colSpan",n);break;case"rowspan":n>0&&e.addAttr("rowSpan",n);break;case"width":"td"===r.name&&e.addAttr("width",n);break;default:return}}else{if("tr"!==r.name)return;e.addAttr("height",n)}}}])}(WZ);function _5(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,C5()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function C5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(C5=function(){return!!e})()}Object.defineProperty(k5,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:[w3.attr.colspan,w3.attr.rowspan,w3.attr.width,w3.attr.height]});var N5=function(e){function t(){return(0,Ke.A)(this,t),_5(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"readNode",value:function(e){e.setNode(ar.createElement("td"))}}])}(Ej);Object.defineProperty(N5,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[w3.node.th,w3.node.td]});var O5=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_tableNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rows",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_cols",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_current",{enumerable:!0,configurable:!0,writable:!0,value:null}),this._tableNode=t}),[{key:"_addNode",value:function(e){var t=e.name;if("table"!==t&&"tbody"!==t&&"thead"!==t&&"tfoot"!==t)return"tr"===t?(x5(e),this._rows.push(e),void(this._current=e)):"td"===t||"th"===t?(this._current||(this._current=gd.createElement("tr"),this._rows.push(this._current)),void E5(this._current,e)):void("colgroup"!==t?"col"===t&&(this._cols.push(e),x5(e)):x5(e));x5(e)}},{key:"walk",value:function(){var e=this._tableNode;this._walk(e.children),e.children=[];var t=gd.createElement("colgroup");return E5(e,t),this._cols.forEach((function(e){E5(t,e)})),this._rows.forEach((function(t){E5(e,t)})),e}},{key:"_walk",value:function(e){var t=this;e&&Array.from(e).forEach((function(e){e&&(t._addNode(e),t._walk(e.children))}))}}])}();function x5(e){var t,n=e.parent,r=null===(t=null==n?void 0:n.children)||void 0===t?void 0:t.indexOf(e);void 0!==r&&r>-1&&n.children.splice(r,1),e.parent=null}function E5(e,t){x5(t),e.children||(e.children=[]),e.children.push(t),t.parent=e}function D5(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,P5()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function P5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(P5=function(){return!!e})()}var R5=function(e){function t(){return(0,Ke.A)(this,t),D5(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"readNode",value:function(e,t){var n,r,o;if(t="table"!==(o=t).name?o:new O5(o).walk(),e.setNode(ar.createElement("table")),"colgroup"===(null===(r=null===(n=t.children)||void 0===n?void 0:n[0])||void 0===r?void 0:r.name)){var i=this._parseColWidths(t.children[0]);e.addAttr("colWidths",i)}}},{key:"leaveNode",value:function(e){var t=e.getNode();t&&!d5(t)&&e.parentNode&&t&&ar.removeChild(e.parentNode,t)}},{key:"_parseColWidths",value:function(e){return(e.children||[]).map((function(e){var t;return"col"!==e.name?null:parseInt(null===(t=null==e?void 0:e.attrs)||void 0===t?void 0:t.width,10)||100})).filter(Boolean)}}])}(Ej);function S5(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,T5()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function T5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(T5=function(){return!!e})()}Object.defineProperty(R5,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[w3.node.table]});var j5=function(e){function t(){return(0,Ke.A)(this,t),S5(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"readNode",value:function(e){e.setNode(ar.createElement("tr"))}}])}(Ej);function I5(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,B5()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function B5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(B5=function(){return!!e})()}Object.defineProperty(j5,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[w3.node.tr]});var M5=function(e){function t(){return(0,Ke.A)(this,t),I5(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){var n,r,o,i,a=null===(n=t.attrs)||void 0===n?void 0:n.borderVisible,l=null===(r=t.attrs)||void 0===r?void 0:r.colWidths,u={};e.isInlineMode()&&(u.tableLayout="fixed",u.borderCollapse="collapse",u.border=!1!==a?"1px solid #d9d9d9":"none");var c=l.reduce((function(e,t){return e+t}),0),s=[];if(e.isExport()){l.forEach((function(e,t){s[t]=parseFloat((e/c*100).toFixed(2))}));var d=e.getDocMaxWidth();u.width=d&&c<d?c+"px":"100%"}else u.width=c+"px";var f=e.createElement("table",{className:["ne-table",!1===a?"no-border":null].filter(Boolean),style:u}),h=e.createElement("tbody");e.appendChild(f,h),e.setNode(f,h),e.setState("borderVisible",!1!==a),e.setState("colWidths",l),e.setState("colPercentWidths",s),e.setState("rowHead",null===(o=t.attrs)||void 0===o?void 0:o.rowHead),e.setState("colHead",null===(i=t.attrs)||void 0===i?void 0:i.colHead)}}])}(lT);function F5(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,L5()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function L5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(L5=function(){return!!e})()}Object.defineProperty(M5,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[w3.node.table]});var U5=function(e){function t(){return(0,Ke.A)(this,t),F5(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t,n){if(n)switch(t){case"height":return void e.addStyle(t,"".concat(n,"px"));case"colSpan":e.addAttr("colspan",n);break;case"rowSpan":e.addAttr("rowspan",n);break;case"cellBgColor":e.addStyle("background-color",n)}}}])}(vB);function V5(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,H5()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function H5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(H5=function(){return!!e})()}Object.defineProperty(U5,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:[w3.attr.height,w3.attr.colSpan,w3.attr.rowSpan,w3.attr.cellBgColor]});var z5=function(e){function t(){return(0,Ke.A)(this,t),V5(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){var n={};e.isInlineMode()&&e.getState("borderVisible")&&(n.border="1px solid #d9d9d9"),this.writeRowHead(e,n),this.writeColHead(e,n),e.setNode(e.createElement("td",{style:n,attrs:{width:W5(t,e)}}))}},{key:"writeRowHead",value:function(e,t){var n,r,o=e.getState("rowHead");if(t&&"string"==typeof o&&(null===(r=null===(n=e._parentContext)||void 0===n?void 0:n._parentContext)||void 0===r?void 0:r._children[0])===e._parentContext){var i=this.getTableHeadColor(o)||{},a=i.bg,l=i.text;"string"==typeof a&&"string"==typeof l&&(t.backgroundColor=a,t.color=l)}}},{key:"writeColHead",value:function(e,t){var n,r,o=e.getState("colHead");if(t&&0===(null===(n=e.inode.attrs)||void 0===n?void 0:n.col)&&"string"==typeof o&&(null===(r=e._parentContext)||void 0===r?void 0:r._children[0])===e){var i=this.getTableHeadColor(o)||{},a=i.bg,l=i.text;"string"==typeof a&&"string"==typeof l&&(t.backgroundColor=a,t.color=l)}}},{key:"getTableHeadColor",value:function(e){var t=e.split(";"),n=(0,tn.A)(t,2),r=n[0],o=n[1];if("string"!=typeof r||"string"!=typeof o)return null;var i=GU(r)[0],a=GU(o)[0];return"string"!=typeof i||"string"!=typeof a?null:{bg:i,text:a}}}])}(lT);function W5(e,t){var n,r,o=t.getState("colWidths"),i=t.getState("colPercentWidths");if(o&&o.length){for(var a=null===(n=e.attrs)||void 0===n?void 0:n.col,l=(null===(r=e.attrs)||void 0===r?void 0:r.colSpan)||1,u=0,c=t.isExport()?i:o,s=0;s<l;s++)u+=c[a+s]||0;return t.isExport()&&(u="".concat(u,"%")),u}}function q5(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,$5()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function $5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($5=function(){return!!e})()}Object.defineProperty(z5,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[w3.node.td]});var K5=function(e){function t(){return(0,Ke.A)(this,t),q5(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e){var t=e.createElement("tr",{style:{height:"33px"}});e.setNode(t)}}])}(lT);function Y5(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,G5()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function G5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(G5=function(){return!!e})()}Object.defineProperty(K5,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[w3.node.tr]});var J5=function(e){function t(){return(0,Ke.A)(this,t),Y5(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e){e.setVirtual((function(){}))}}])}(vT);function X5(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Q5()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Q5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Q5=function(){return!!e})()}Object.defineProperty(J5,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[w3.node.tableHole]});var Z5=function(e){function t(){return(0,Ke.A)(this,t),X5(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){var n=t.name,r=t.attrs,o=void 0===r?{}:r;if("table"===n){var i=e.createElement(n),a=function(e,t){var n=t.attrs.colWidths,r=e.createElement("colgroup");return n.forEach((function(t){e.appendChild(r,e.createElement("col",{attrs:{width:t}}))})),r}(e,t),l=e.createElement("tbody");e.appendChild(i,a),e.appendChild(i,l),e.setNode(i,l),e.addClassName("lake-table")}else e.setNode(e.createElement(n));!function(e,t){var n=t.colWidths,r=t.height,o=t.cellBgColor,i=t.verticalAlign,a=t.borderVisible,l=t.rowSpan,u=t.colSpan,c=t.spacing,s=t.widthMode,d=t.rowHead,f=t.colHead,h=t.fitWidth;n&&e.setStyle("width",n.reduce((function(e,t){return e+t}),0)+"px"),r&&e.setStyle("height","".concat(r,"px")),o&&e.setStyle("background-color",o),i&&e.setStyle("vertical-align",i),l&&e.setAttr("rowSpan",l),u&&e.setAttr("colSpan",u),!1===a&&(e.addClassName("lake-no-border"),e.setAttr("hide-border",!0)),void 0!==c&&e.setAttr("margin",!1!==c),void 0!==s&&e.setAttr("width-mode",s),d&&e.setAttr("row-head",d),f&&e.setAttr("col-head",f),h&&e.setAttr("fit-width",h)}(e,o)}}])}(vT);Object.defineProperty(Z5,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[w3.node.table,w3.node.tr,w3.node.td]});var e6=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"write",value:function(e,t){var n=this.getAligns(t).map((function(e){switch(e){case"center":return":---:";case"right":return"---:";case"left":return":---";default:return"---"}})).join(" | ");return e.insertAt("| ".concat(n," |\n"),1),e.newLine(),!1}},{key:"preWrite",value:function(e,t){return function(e){var t=e.children;null==t||t.forEach((function(e,n){var r=e.children;null==r||r.forEach((function(e,o){var i,a,l,u,c=null===(i=e.attrs)||void 0===i?void 0:i.rowSpan;for(null===(a=e.attrs)||void 0===a||delete a.rowSpan;c&&--c;)t[n+c]||(t[n+c]={type:wt.Element,name:"tr",attrs:{},children:[]}),t[n+c].children.splice(o,0,Object.assign(Object.assign({},e),{attrs:Object.assign({},e.attrs),children:[]}));var s=null===(l=e.attrs)||void 0===l?void 0:l.colSpan;null===(u=e.attrs)||void 0===u||delete u.colSpan,s&&r.splice.apply(r,[o+1,0].concat((0,ln.A)(new Array(s-1).fill(Object.assign(Object.assign({},e),{children:[]})))))}))}))}(t),!0}},{key:"getAligns",value:function(e){var t,n=this,r=e.children;return(null==r?void 0:r.length)&&(null===(t=r[0].children)||void 0===t?void 0:t.length)?r[0].children.map((function(e,t){var o=n.getTdAlign(e);return r.every((function(e){var r,i=n.getTdAlign(null===(r=e.children)||void 0===r?void 0:r[t]);return i===o||!i}))&&o||"distributed"})):[]}},{key:"getTdAlign",value:function(e){var t,n;if(!e||!(null===(t=e.children)||void 0===t?void 0:t.length))return null;var r=null===(n=e.children[0].attrs)||void 0===n?void 0:n.alignment;return["center","left","right"].includes(r)?r:"distributed"}}])}(),t6=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"write",value:function(e,t){return e.append("|\n"),!1}}])}(),n6=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"write",value:function(e,t){return e.setKeepInline(!0),e.lastChild((function(e){e.setWrapToString((function(e){return e.replace(/<br\/>$/g," ")}))})),!1}},{key:"preWrite",value:function(e,t){return e.append("| "),!0}}])}();function r6(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,o6()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function o6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(o6=function(){return!!e})()}var i6=function(e){function t(){return(0,Ke.A)(this,t),r6(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t,n){var r=e.newJob(),o=r.getNodeById(t);if(o&&o.isConnected&&o.isElement()&&o.hasCategory(qe.Table)){var i=u4(r,o);n&&"string"==typeof n.bg&&"string"==typeof n.text?(this.setRowHead(r,o,n),0===(null==i?void 0:i.startRow)&&s4(r,o,1,i.startRow)):(this.removeRowHead(r,o),1===(null==i?void 0:i.startRow)&&s4(r,o,0)),e.commitJob(r)}else e.cancelJob(r)}},{key:"removeRowHead",value:function(e,t){if(!t.hasAttribute("rowHead"))return e.getSelection();e.removeAttribute(t,"rowHead")}},{key:"setRowHead",value:function(e,t,n){var r=n.bg,o=n.text;e.setAttribute(t,"rowHead","".concat(r,";").concat(o))}}])}(gt);function a6(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,l6()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function l6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(l6=function(){return!!e})()}Object.defineProperty(i6,"ID",{enumerable:!0,configurable:!0,writable:!0,value:w3.command.tableRowHead});var u6=function(e){function t(){return(0,Ke.A)(this,t),a6(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t,n){var r=e.newJob(),o=r.getNodeById(t);o&&o.isConnected&&o.isElement()&&o.hasCategory(qe.Table)?(n&&"string"==typeof n.bg&&"string"==typeof n.text?this.setColHead(r,o,n):this.removeColHead(r,o),e.commitJob(r)):e.cancelJob(r)}},{key:"removeColHead",value:function(e,t){if(!t.hasAttribute("colHead"))return e.getSelection();e.removeAttribute(t,"colHead")}},{key:"setColHead",value:function(e,t,n){var r=n.bg,o=n.text;e.setAttribute(t,"colHead","".concat(r,";").concat(o))}}])}(gt);function c6(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s6(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s6(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function s6(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function d6(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,f6()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function f6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(f6=function(){return!!e})()}Object.defineProperty(u6,"ID",{enumerable:!0,configurable:!0,writable:!0,value:w3.command.tableColHead});var h6=function(e){function t(){return(0,Ke.A)(this,t),d6(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){var t=e.getSelection();return t.rangeCount>1||Ut.closest(t.firstRange.commonAncestorContainer,qe.Table)?dt:pt.UNAVAILABLE}},{key:"getValue",value:function(e){var t=e.getSelection(),n=Ut.closest(t.firstRange.commonAncestorContainer,qe.Table);return n?u4(e,n):dt}},{key:"execute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e.newJob();if(this.getState(n)===st)return e.cancelJob(n),!1;var r=n.getSelection(),o=Ut.closest(r.firstRange.commonAncestorContainer,qe.Table);if(!o||t>o.children.length)return e.cancelJob(n),!1;var i=u4(n,o);if(s4(n,o,t-1),i&&i.startRow<t-1)for(var a=i.startRow;a<t-1;a++){var l=o.children[a].children[0];if(0===l.attrs.col){var u,c=c6(l.children.slice(0));try{for(c.s();!(u=c.n()).done;){var s=u.value;n.removeChild(l,s)}}catch(e){c.e(e)}finally{c.f()}}}return e.commitJob(n),!0}}])}(gt);function p6(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,v6()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function v6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v6=function(){return!!e})()}Object.defineProperty(h6,"ID",{enumerable:!0,configurable:!0,writable:!0,value:w3.command.tableSetQueueNo});var m6=function(e){function t(){return(0,Ke.A)(this,t),p6(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t){var n=e.newJob(),r=n.getNodeById(t);return!!(null==r?void 0:r.hasCategory(qe.Table))&&(r.attrs.fitWidth?n.removeAttribute(r,"fitWidth"):n.setAttribute(r,"fitWidth",!0),e.commitJob(n),!0)}}])}(gt);function g6(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,b6()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function b6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b6=function(){return!!e})()}Object.defineProperty(m6,"ID",{enumerable:!0,configurable:!0,writable:!0,value:w3.command.tableColumnAdaptation});var y6=function(e){function t(){return(0,Ke.A)(this,t),g6(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){var n,r,o,i,a,l,u=this;e.registerElement(P3),e.registerAttr(C3);var c=e.getService(wS.ID);c&&(c.registerHTMLNodeReader(R5.NodeNames,new R5),c.registerHTMLNodeReader(j5.NodeNames,new j5),c.registerHTMLNodeReader(N5.NodeNames,new N5),c.registerHTMLAttributeReader(k5.AttrNames,new k5));var s=e.getService(wS.ID);s&&(s.registerNodeHTMLWriter(M5.NodeNames,new M5),s.registerNodeHTMLWriter(K5.NodeNames,new K5),s.registerNodeHTMLWriter(z5.NodeNames,new z5),s.registerAttrHTMLWriter(U5.AttrNames,new U5));var d=e.getService(EG.ID);d&&d.registerTextWriter("table",new y5(this.option.writeTextHooks));var f=e.getService(_S.ID);f&&f.registerLakeNodeReader("table",new m5);var h=e.getService(_S.ID);h&&(h.registerLakeNodeWriter(J5.NodeNames,new J5),h.registerLakeNodeWriter(Z5.NodeNames,new Z5));var p=e.getService(RT.ID);if(p&&p.registerINodeNodeReader("table",new f5),null===(n=e.getService(tI.ID))||void 0===n||n.registerMarkdownWriter("table",new e6),null===(r=e.getService(tI.ID))||void 0===r||r.registerMarkdownWriter("tr",new t6),null===(o=e.getService(tI.ID))||void 0===o||o.registerMarkdownWriter("td",new n6),this._initMarkdownKey(),null===(i=e.getService(DM.ID))||void 0===i||i.registerBoldDisableHandler((function(e){return Oa.isInTableHead(e)})),null===(a=e.getService(oV.ID))||void 0===a||a.registerColorDisableHandler((function(e){return Oa.isInTableHead(e)})),this.option.onKernelPluginInit&&this.option.onKernelPluginInit(this.kernel),null===(l=this.option.tableUIInject)||void 0===l?void 0:l.afterPaste){var v=!1,m={};xc(this,t,"beforeExecCommand",(function(e){"paste"===e.commandName&&(v=!0)})),xc(this,t,"afterExecCommand",(function(){v=!1})),xc(this,this.kernel,"commandExecuteError",(function(){v=!1})),xc(this,t,"nodechange",(function(e){var t=e.node,n=e.job,r=e.type;v&&("children"!==r||["table","tr"].includes(t.nodeName)&&(m[t.id]={node:t,job:n}))})),xc(this,t,"beforecontentchange",(function(){var e,t,n,r;if(v){for(var o=0,i=Object.keys(m);o<i.length;o++){var a=i[o],l=m[a],c=l.node,s=l.job;if(c.isConnected)if("table"===c.nodeName)null===(t=null===(e=u.option.tableUIInject)||void 0===e?void 0:e.afterPaste)||void 0===t||t.call(e,c,s);else if("tr"===c.nodeName){var d=c.parent;null===(r=null===(n=u.option.tableUIInject)||void 0===n?void 0:n.afterPaste)||void 0===r||r.call(n,d,s)}}m={}}}))}}},{key:"_initMarkdownKey",value:function(){var e=this.kernel.getService(DS.ID);e&&e.registerMarkdownMatcher(CS.enter,new IT(this.editing,/^\|([^|\n]+\|){2,}$/,(function(e,t,n,r){var o,i=r.matched[0].split("|").filter(Boolean),a=I3.instance(B3,2,i.length).toNode(e);e.setAttribute(a,"widthMode",Dl),t&&(o=e.newPosition(t.parentNode,t.offset),e.removeChild(t.parentNode,t));var l=e.createHole("tableHole");e.appendChild(l,a),e.insertNodeByPosition(o,l);var u=a.firstChild.firstChild;i.forEach((function(t){if(u){var n=e.createElement("p");e.appendChild(n,e.createInheritTextNode(t,o)),e.appendChild(u,n)}u=u.nextSibling}));var c=a.firstChild.nextSibling;e.setSelection([e.newRange(e.newPosition(c,0))])}),(function(e){var t,n=e.node.closest(qe.Block);return!!(null===(t=null==n?void 0:n.parent)||void 0===t?void 0:t.isRootNode())})))}}])}(ct);Object.defineProperty(y6,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:w3.pluginName}),Object.defineProperty(y6,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[H3,q3,Y3,X3,i4,h4,m4,y4,E4,x4,T4,S4,L4,H4,q4,Y4,T3,Q4,L3,t5,i5,u5,i6,u6,h6,m6]}),Object.defineProperty(y6,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:D3});var w6="relax",A6="default";function k6(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,_6()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function _6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_6=function(){return!!e})()}var C6=function(e){function t(){return(0,Ke.A)(this,t),k6(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(){return pt.NOT_EXECUTED}},{key:"getValue",value:function(){return this.plugin.getParagraphSpacing()}},{key:"execute",value:function(e,t){return this.plugin.setParagraphSpacing(t)}}])}(gt);function N6(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,O6()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function O6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(O6=function(){return!!e})()}Object.defineProperty(C6,"ID",{enumerable:!0,configurable:!0,writable:!0,value:rW.command.paragraphSpacing});var x6=function(e){function t(){return(0,Ke.A)(this,t),N6(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"needPersistent",value:function(){return!0}},{key:"validate",value:function(e){return e===w6||e===A6}},{key:"isDefault",value:function(e){return e===A6||void 0===e}}])}(vW);function E6(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,D6()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function D6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(D6=function(){return!!e})()}var P6=function(e){function t(){return(0,Ke.A)(this,t),E6(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(){return pt.NOT_EXECUTED}},{key:"getValue",value:function(){return this.plugin.getTypographyName()}},{key:"execute",value:function(e,t){return this.plugin.setTypography(t)}}])}(gt);function R6(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,S6()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function S6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(S6=function(){return!!e})()}Object.defineProperty(P6,"ID",{enumerable:!0,configurable:!0,writable:!0,value:rW.command.typography});var T6=function(e){function t(){return(0,Ke.A)(this,t),R6(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){}},{key:"getParagraphSpacing",value:function(){return this.plugin.getParagraphSpacing()}},{key:"getTypographyDetail",value:function(){return this.plugin.getTypographyDetail()}},{key:"getTypographyName",value:function(){return this.plugin.getTypographyName()}},{key:"isParagraphSpacingRelax",value:function(){return this.plugin.getParagraphSpacing()===w6}},{key:"setParagraphSpacing",value:function(e){this.plugin.setParagraphSpacing(e)}},{key:"setTypography",value:function(e){this.plugin.setTypography(e)}}])}(aW);function j6(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,I6()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function I6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(I6=function(){return!!e})()}var B6=function(e){function t(){return(0,Ke.A)(this,t),j6(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"needPersistent",value:function(){return!0}},{key:"validate",value:function(e){return e===t$||e===n$}},{key:"isDefault",value:function(e){return e===t$||void 0===e}}])}(vW),M6=function(){return(0,$e.A)((function e(t){if((0,Ke.A)(this,e),Object.defineProperty(this,"_typography",{enumerable:!0,configurable:!0,writable:!0,value:t$}),Object.defineProperty(this,"_paragraphSpacing",{enumerable:!0,configurable:!0,writable:!0,value:A6}),Object.defineProperty(this,"_mustTypography",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),"string"==typeof t)this._setTypography(t);else{var n=t||{};n.typography&&this._setTypography(n.typography),n.paragraphSpacing&&this._setParagraphSpacing(n.paragraphSpacing),n.mustTypography&&this._setMustTypography(n.mustTypography)}}),[{key:"_setMustTypography",value:function(e){this._mustTypography=e!==t$&&e!==n$?void 0:e}},{key:"_setTypography",value:function(e){this._typography=e!==t$&&e!==n$?t$:e}},{key:"_setParagraphSpacing",value:function(e){this._paragraphSpacing=e!==A6&&e!==w6?A6:e}},{key:"typography",get:function(){return this._typography}},{key:"paragraphSpacing",get:function(){return this._paragraphSpacing}},{key:"mustTypography",get:function(){return this._mustTypography}}])}();function F6(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,L6()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function L6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(L6=function(){return!!e})()}Object.defineProperty(M6,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"typography"});var U6=(0,Ha.A)((0,Ha.A)({},t$,{fontSize:14,color:"#262626",lineHeight:1.16,h1:28,h2:24,h3:20,h4:16,h5:14,h6:14}),n$,{fontSize:15,color:"#262626",lineHeight:1.16,h1:28,h2:24,h3:20,h4:16,h5:14,h6:14}),V6=function(e){function t(){return(0,Ke.A)(this,t),F6(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this;this.kernel.requireService(OI.ID),e.extendMethods({isParagraphSpacingRelax:function(){return t.getParagraphSpacing()===w6},getParagraphSpacing:function(){return t.getParagraphSpacing()},getTypographyName:function(){return t.getTypographyName()},getTypographyDetail:function(){return t.getTypographyDetail()}}),this.editing.on("metachange",(function(e,n){var r=null==e?void 0:e.typography,o=null==n?void 0:n.typography;r&&(t.kernel.emitPluginEvent("typographyChange",{current:r,old:o}),t.kernel.emitEvent("typographyChange",r,o))}))}},{key:"afterInit",value:function(){var e=this.kernel.requireService(OI.ID);e.registerMeta("typography",new B6),e.registerMeta("paragraphSpacing",new x6)}},{key:"getParagraphSpacing",value:function(){var e;return(null===(e=this.kernel.getService(OI.ID))||void 0===e?void 0:e.getMeta("paragraphSpacing"))||this.option.paragraphSpacing}},{key:"getTypographyName",value:function(){var e;return this.option.mustTypography||(null===(e=this.kernel.getService(OI.ID))||void 0===e?void 0:e.getMeta("typography"))||this.option.typography}},{key:"getTypographyDetail",value:function(){var e=this.getTypographyName();return U6[e]}},{key:"setParagraphSpacing",value:function(e){if(e===w6||e===A6){var t=this.getParagraphSpacing();t!==e&&(this.kernel.requireService(OI.ID).setMeta("paragraphSpacing",e),this.kernel.emitPluginEvent("paragraphSpacingChange",{current:e,old:t}),this.kernel.emitEvent("paragraphSpacingChange",e,t))}}},{key:"setTypography",value:function(e){if(e===n$||e===t$){var t=this.getTypographyName();if(t===e)return!1;this.kernel.requireService(OI.ID).setMeta("typography",e),this.kernel.emitPluginEvent("typographyChange",{current:e,old:t}),this.kernel.emitEvent("typographyChange",e,t)}}}])}(ct);Object.defineProperty(V6,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:rW.pluginName}),Object.defineProperty(V6,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:M6}),Object.defineProperty(V6,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[P6,C6]}),Object.defineProperty(V6,"Service",{enumerable:!0,configurable:!0,writable:!0,value:T6});var H6,z6=[{value:"agda",syntax:"text/x-agda",name:"Agda",ext:["agda"]},{value:"arkts",syntax:"text/x-arkts",name:"ArkTS",ext:["ets","arkts"]},{value:"bash",syntax:"shell",name:"Bash",ext:["bash"]},{value:"basic",syntax:"vbscript",name:"Basic",ext:["vbs"]},{value:"c",syntax:"text/x-csrc",name:"C",ext:["c","h","ino"]},{value:"cpp",syntax:"text/x-c++src",name:"C++",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"]},{value:"csharp",syntax:"text/x-csharp",name:"C#",ext:["cs"]},{value:"css",syntax:"css",name:"CSS",ext:["css"]},{value:"dart",syntax:"dart",name:"Dart",ext:["dart"]},{value:"diff",syntax:"diff",name:"Diff",ext:["diff","patch"]},{value:"dockerfile",syntax:"dockerfile",name:"Dockerfile"},{value:"erlang",syntax:"erlang",name:"Erlang",ext:["erl"]},{value:"glsl",syntax:"x-shader/x-vertex",name:"Glsl",ext:["glsl"]},{value:"git",syntax:"shell",name:"Git"},{value:"go",syntax:"go",name:"Go",ext:["go"]},{value:"graphql",syntax:"graphql",name:"GraphQL"},{value:"groovy",syntax:"groovy",name:"Groovy",ext:["groovy","gradle"]},{value:"html",syntax:"htmlmixed",name:"HTML",ext:["html","htm","handlebars","hbs"]},{value:"http",syntax:"http",name:"HTTP"},{value:"java",syntax:"text/x-java",name:"Java",ext:["java"]},{value:"javascript",syntax:"text/javascript",name:"JavaScript",ext:["js"]},{value:"json",syntax:"application/json",name:"JSON",ext:["json","map"]},{value:"jsx",syntax:"jsx",name:"JSX",ext:["jsx"]},{value:"katex",syntax:"simplemode",name:"KaTeX"},{value:"kotlin",syntax:"text/x-kotlin",name:"Kotlin",ext:["kt"]},{value:"less",syntax:"css",name:"Less",ext:["less"]},{value:"makefile",syntax:"cmake",name:"Makefile"},{value:"markdown",syntax:"markdown",name:"Markdown",ext:["markdown","md","mkd"]},{value:"matlab",syntax:"octave",name:"MATLAB"},{value:"nginx",syntax:"nginx",name:"Nginx",ext:["conf"]},{value:"objectivec",syntax:"text/x-objectivec",name:"Objective-C",ext:["m"]},{value:"pascal",syntax:"pascal",name:"Pascal",ext:["p","pas"]},{value:"perl",syntax:"perl",name:"Perl",ext:["pl","pm"]},{value:"php",syntax:"text/x-php",name:"PHP",ext:["php","php3","php4","php5","php7","phtml"]},{value:"powershell",syntax:"powershell",name:"PowerShell",ext:["ps1","psd1","psm1"]},{value:"protobuf",syntax:"protobuf",name:"Protobuf",ext:["proto"]},{value:"python",syntax:"python",name:"Python",ext:["build","bzl","py","pyw"]},{value:"r",syntax:"r",name:"R",ext:["r","R"]},{value:"ruby",syntax:"ruby",name:"Ruby",ext:["rb"]},{value:"rust",syntax:"rust",name:"Rust",ext:["rs"]},{value:"scala",syntax:"text/x-scala",name:"Scala",ext:["scala"]},{value:"shell",syntax:"shell",name:"Shell",ext:["sh","ksh"]},{value:"sql",syntax:"text/x-sql",name:"SQL",ext:["sql"]},{value:"plsql",syntax:"text/x-plsql",name:"PL/SQL"},{value:"swift",syntax:"swift",name:"Swift",ext:["swift"]},{value:"typescript",syntax:"text/typescript",name:"TypeScript",ext:["ts"]},{value:"vbnet",syntax:"vb",name:"VB.net",ext:["vb"]},{value:"velocity",syntax:"velocity",name:"Velocity",ext:["vtl"]},{value:"xml",syntax:"xml",name:"XML",ext:["xml","xsl","xsd","svg"]},{value:"yaml",syntax:"yaml",name:"YAML",ext:["yaml","yml"]},{value:"stex",syntax:"text/x-stex",name:"sTeX"},{value:"latex",syntax:"text/x-latex",name:"LaTeX",ext:["text","ltx","tex"]},{value:"systemverilog",syntax:"text/x-systemverilog",name:"SystemVerilog",ext:["sv","svh"]},{value:"sass",name:"Sass",syntax:"text/x-sass",ext:["sass","scss"]},{value:"tcl",syntax:"text/x-tcl",name:"Tcl",ext:["tcl"]},{value:"verilog",syntax:"text/x-verilog",name:"Verilog",ext:["v"]},{value:"vue",syntax:"text/x-vue",name:"Vue"},{value:"lua",syntax:"text/x-lua",name:"Lua",ext:["lua"]},{value:"haskell",syntax:"haskell",name:"Haskell",ext:["hs"]},{value:"properties",syntax:"properties",name:"Properties",ext:["properties","ini","in"]},{value:"toml",syntax:"toml",name:"TOML",ext:["toml"]},{value:"cypher",syntax:"cypher",name:"Cypher",ext:["cyp","cypher"]},{value:"tsx",syntax:"jsx",name:"TSX",ext:["tsx"]},{value:"f#",syntax:"mllike",name:"F#",ext:["fs"]},{value:"ocaml",syntax:"mllike",name:"OCaml",ext:["ml","mli","mll","mly"]},{value:"clojure",syntax:"clojure",name:"Clojure",ext:["clj","cljc","cljx"]},{value:"abap",syntax:"abap",name:"ABAP"},{value:"julia",syntax:"julia",name:"Julia",ext:["jl"]},{value:"cmake",syntax:"cmake",name:"CMake",ext:["cmake"]},{value:"scheme",syntax:"scheme",name:"Scheme",ext:["scm","ss"]},{value:"commonlisp",syntax:"commonlisp",name:"Lisp",ext:["cl","lisp","el"]},{value:"fortran",syntax:"fortran",name:"Fortran",ext:["f90","f95","f03"]},{value:"solidity",syntax:"solidity",name:"Solidity",ext:["sol"]}];z6.sort((function(e,t){var n=e.name.toLowerCase(),r=t.name.toLowerCase();return n===r?0:n<r?-1:1})),z6.unshift({value:"plain",syntax:"simplemode",name:"Plain Text"}),function(e){e.DEFAULT="default",e.DEFAULT_DARDK="dark-default",e.DARCULAR="Darcula",e.NIGHT_OWL="Night Owl",e.ONE_DARK_PRO="One Dark Pro",e.GITHUB="Github Light",e.BRACKET_LIGHTS_PRO="Bracket Lights Pro"}(H6||(H6={}));var W6=[{name:"Yuque Light Pro",value:H6.GITHUB,isDark:!1},{name:"Yuque Light",value:H6.DEFAULT,isDark:!1},{name:H6.BRACKET_LIGHTS_PRO,value:H6.BRACKET_LIGHTS_PRO,isDark:!1},{name:H6.ONE_DARK_PRO,value:H6.ONE_DARK_PRO,isDark:!0},{name:H6.NIGHT_OWL,value:H6.NIGHT_OWL,isDark:!0},{name:H6.DARCULAR,value:H6.DARCULAR,isDark:!0}],q6=H6.DEFAULT,$6=H6.DARCULAR,K6=3e3;function Y6(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,G6()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function G6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(G6=function(){return!!e})()}var J6=function(e){function t(){return(0,Ke.A)(this,t),Y6(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"mode",get:function(){return this._cardValue.mode}},{key:"code",get:function(){return this._cardValue.code}},{key:"heightLimit",get:function(){return this._cardValue.heightLimit}},{key:"autoWrap",get:function(){return this._cardValue.autoWrap}},{key:"lineNumbers",get:function(){return this._cardValue.lineNumbers}},{key:"theme",get:function(){return this._cardValue.theme}},{key:"foldLines",get:function(){return this._cardValue.foldLines}},{key:"lightLines",get:function(){return this._cardValue.lightLines}},{key:"customStyle",get:function(){return this._cardValue.customStyle}},{key:"tabSize",get:function(){return this._cardValue.tabSize}},{key:"collapsed",get:function(){return this._cardValue.collapsed}},{key:"hideToolbar",get:function(){return this._cardValue.hideToolbar}},{key:"name",get:function(){return this._cardValue.name}},{key:"indentWithTab",get:function(){return this._cardValue.indentWithTab}},{key:"isHeightLimit",value:function(){return!this.getCardHeight()}},{key:"update",value:function(e){this._cardValue=Object.assign(Object.assign({},this._cardValue),e),this.afterChange()}}],[{key:"createStandardCardValue",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=e||{mode:"plain",autoWrap:!1,theme:H6.GITHUB},o={mode:r.mode,tabSize:r.tabSize||null,collapsed:!!r.collapsed,indentWithTab:!!r.indentWithTab,name:r.name||"",autoWrap:!!r.autoWrap,hideToolbar:!!r.hideToolbar,lineNumbers:!ir(r,"lineNumbers")||!!r.lineNumbers,lightLines:r.lightLines||[],foldLines:r.foldLines||[],customStyle:r.customStyle||[],code:n||"",theme:r.theme};return o.code&&"object"===(0,Gn.A)(o.code)&&(o=Object.assign(o,o.code)),Sl.setCardSpacingToValue(_l.BOTH,Ww()({},t.DefaultCardValue,o))}},{key:"fromLake",value:function(e){var n=A4()(e,["mode","code","autoWrap","lineNumbers","theme","heightLimit","collapsed","hideToolbar","indentWithTab","name","lightLines","foldLines","customStyle","tabSize"]);return n.code&&"object"===(0,Gn.A)(n.code)&&(n=Object.assign(n,n.code)),n.mode&&(n.mode=(z6.find((function(e){var t,r,o;return[null===(t=e.value)||void 0===t?void 0:t.toLowerCase(),null===(r=e.name)||void 0===r?void 0:r.toLowerCase()].includes(n.mode.toLowerCase())||(null===(o=e.ext)||void 0===o?void 0:o.includes(n.mode.toLowerCase()))}))||z6[0]).value),Ww()({},t.DefaultCardValue,n)}},{key:"toLake",value:function(e){var t=[e.name||""].join(",");return Object.assign(Object.assign({search:t},e),{heightLimit:!0})}},{key:"setCodeTheme",value:function(e,t){e.theme=t}}])}(Sl);Object.defineProperty(J6,"DefaultCardValue",{enumerable:!0,configurable:!0,writable:!0,value:{mode:"plain",code:"",autoWrap:!1,lineNumbers:!0,heightLimit:!0,collapsed:!1,hideToolbar:!1,name:"",tabSize:null,indentWithTab:!1,lightLines:[],foldLines:[],customStyle:[],theme:H6.GITHUB}});const X6=J6;var Q6={LOCAL_STORAGE_KEY:"lake-codeblock",load:function(){var e=null,t=Nf.getItem(this.LOCAL_STORAGE_KEY);if(t)try{e=JSON.parse(t)}catch(e){console.log("invalid data:",t)}return e},save:function(e){var t={mode:e.mode,autoWrap:e.autoWrap,theme:e.theme,indentWithTab:e.indentWithTab,lineNumbers:e.lineNumbers,hideToolbar:e.hideToolbar};Nf.setItem(this.LOCAL_STORAGE_KEY,JSON.stringify(t))},clear:function(){var e;null===(e=Nf.removeItem)||void 0===e||e.call(Nf,this.LOCAL_STORAGE_KEY)}};const Z6=Q6;function e8(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e=e.toLowerCase();var t=z6.find((function(t){var n;return null===(n=t.ext)||void 0===n?void 0:n.includes(e)}));return(null==t?void 0:t.value)||e}function t8(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,n8()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function n8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(n8=function(){return!!e})()}var r8="vscode-editor-data",o8=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e),Object.defineProperty(this,"_lines",{enumerable:!0,configurable:!0,writable:!0,value:[]})}),[{key:"addToLine",value:function(e){this._lines.push(e)}},{key:"newLine",value:function(){this._lines.push("\n")}},{key:"getLines",value:function(){return this._lines.join("").split("\n")}},{key:"enterNode",value:function(e){hf[e.name]&&this._lines.push("\n")}},{key:"leaveNode",value:function(e){}}])}(),i8=function(e){function t(){return(0,Ke.A)(this,t),t8(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"readNode",value:function(e,t,n){var r,o,i=[],a="",l=!0;if("code-block"===t.name){var u=function(e){var t;if("code-block"!==e.name)return null;if(!e.children||"div"!==e.children[0].name||"wolai-pre"!==(null===(t=e.children[0].attrs)||void 0===t?void 0:t.class))return null;var n=e.children[0];if(!n.children)return null;var r={lines:null,lng:null};return n.children.forEach((function(e){var t;if("pre"===e.name){var n=new o8;l8(n,e.children),r.lines=n.getLines()}else if("div"===e.name&&(null===(t=e.attrs)||void 0===t?void 0:t["data-lang"])){var o=e.attrs["data-lang"].toLowerCase();z6.find((function(e){return e.value===o&&(r.lng=e.value),e.value===o}))}})),r}(t);a=null==u?void 0:u.lng,i=null==u?void 0:u.lines}else if("div"===t.name)i=function(e){var t,n,r;return"div"===e.name&&(null===(n=null===(t=e.style)||void 0===t?void 0:t["font-family"])||void 0===n?void 0:n.includes("monospace"))&&"pre"===(null===(r=e.style)||void 0===r?void 0:r["white-space"])&&e.children&&e.children.every((function(e){var t=e.name;return"div"===t||"br"===t||"#text"===t}))?function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n],i=o.name;if("div"===i){var a=a8(o);if(null===a)return null;t.push(a)}else"br"===i?t.push("\n"):"#text"===i&&t.push(o.data)}return t.length>1&&(t[0].trim()||t.shift(),t[t.length-1].trim()||t.pop()),t}(e.children):null}(t),(null==n?void 0:n.clipboardPayload)&&(a=function(e){if(!(null==e?void 0:e.types.includes(r8)))return null;var t="";try{var n=JSON.parse(e.getData(r8));t=n.mode||null}catch(e){console.warn("failed to detect code language",e)}return t&&z6.some((function(e){return e.value===t}))?t:null}(null==n?void 0:n.clipboardPayload));else{var c=t.children,s=new o8;1===(null==c?void 0:c.length)&&"code"===c[0].name?(l=!1,a=function(e){if(!e)return null;Array.isArray(e)||(e=e.split(/\s+/));var t=e.map((function(e){return null==e?void 0:e.split(/\s+/g)})).flat(1).find((function(e){return e&&(e.startsWith("language-")||e.startsWith("lang-"))}));if(!t)return null;var n=t.replace(/lang(uage)?-/,"");return z6.some((function(e){return e.value===n}))?n:null}([null===(r=t.attrs)||void 0===r?void 0:r.class,null===(o=c[0].attrs)||void 0===o?void 0:o.class]),u8(s,c[0].children)):u8(s,c),i=s.getLines()}(null==i?void 0:i.length)&&(e.stop(),l&&1===i.length?(gd.removeAllAttribute(t),gd.removeAllStyle(t),e.setNode(gd.createTextNode(i[0]))):(gd.setAttribute(t,"codeblock","true"),gd.setAttribute(t,"languageMode",a),gd.setChildren(t,[gd.createTextNode(i.join("\n"))])))}}])}(h0);function a8(e){var t,n=e.children;if(!n)return null;for(var r=[],o=0,i=n.length;o<i;o++){if("span"!==n[o].name)return null;var a=null===(t=n[o].children)||void 0===t?void 0:t[0];if(a){if("#text"!==a.name)return null;r.push(a.data)}}return r.join("")}function l8(e,t){null==t||t.forEach((function(t){var n;"#text"===t.name?e.addToLine(t.data):"br"===t.name?e.newLine():(null===(n=t.children)||void 0===n?void 0:n.length)&&(e.enterNode(t),l8(e,t.children),e.leaveNode(t))}))}function u8(e,t){null==t||t.forEach((function(t){var n;if("#text"===t.name){var r=t.data.split("\n");r.forEach((function(t,n){e.addToLine(t.replace(/\u00a0/g," ")),n<r.length-1&&e.newLine()}))}else"br"===t.name?e.newLine():(null===(n=t.children)||void 0===n?void 0:n.length)&&(e.enterNode(t),u8(e,t.children),e.leaveNode(t))}))}function c8(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,s8()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function s8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s8=function(){return!!e})()}Object.defineProperty(i8,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["pre","div","code-block"]});var d8=function(e){function t(){return(0,Ke.A)(this,t),c8(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"readNode",value:function(e,t){var n,r,o;if(null===(n=t.attrs)||void 0===n?void 0:n.codeblock){e.stop();var i=t.children,a=t.attrs.languageMode;bt.fatal(1===(null==i?void 0:i.length)&&"#text"===i[0].name,"plugins/codeblock/src/kernel/readers/codeblock-html-node-reader.ts:27");var l,u,c=null===(o=null===(r=null==i?void 0:i[0].data)||void 0===r?void 0:r.trim())||void 0===o?void 0:o.replace(/[\uFEFF\u200B]/g,""),s=X6.createStandardCardValue(a?{mode:a}:void 0,c);X6.setCodeTheme(s,(l=e.theme,(null==(u=Z6.load())?void 0:u.theme)?u.theme:l===kM.dark?$6:q6)),e.setNode(ar.createCard("codeblock",s))}}}])}(Ej);function f8(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,h8()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function h8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h8=function(){return!!e})()}Object.defineProperty(d8,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["div","pre","code-block"]});var p8=function(e){function t(){return(0,Ke.A)(this,t),f8(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Ij);function v8(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,m8()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function m8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m8=function(){return!!e})()}Object.defineProperty(p8,"CardName",{enumerable:!0,configurable:!0,writable:!0,value:"codeblock"});var g8=function(e){function t(){return(0,Ke.A)(this,t),v8(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t,n,r){var o=e.createCard("codeblock",X6.fromLake(n),r);e.setNode(o)}}])}(Lj);function b8(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,y8()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function y8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(y8=function(){return!!e})()}var w8=function(e){function t(){return(0,Ke.A)(this,t),b8(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){var n,r,o=(null===(r=null===(n=t.attrs)||void 0===n?void 0:n.value)||void 0===r?void 0:r.code)||"";"object"===(0,Gn.A)(o)&&(o=o.code||""),e.newline(o)}}])}(YG);function A8(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,k8()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function k8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(k8=function(){return!!e})()}var _8=function(e){function t(){return(0,Ke.A)(this,t),A8(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){var n=(t.attrs||{}).value||{},r=n.code,o=n.mode;if("object"===(0,Gn.A)(r)&&(r=r.code||""),r){var i;e.isInlineMode()&&(i={border:"1px solid #e8e8e8",borderRadius:"2px",background:"#f9f9f9",padding:"16px",fontSize:"13px",color:"#595959"});var a=e.createElement("pre",{className:Uf("ne-codeblock",o?"language-".concat(o):null),attrs:{"data-language":o},style:i}),l=e.createElement("code");e.appendChild(a,l),e.appendChild(l,e.createPlainTextNode(r)),e.setNode(a)}}}])}(lT);function C8(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,N8()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function N8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(N8=function(){return!!e})()}var O8=function(e){function t(){return(0,Ke.A)(this,t),C8(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t,n,r){var o=e.createInlineCard("codeblock",X6.toLake(n),r);e.setNode(o)}}])}($j);function x8(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,E8()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function E8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(E8=function(){return!!e})()}var D8=function(e){function t(){var e;return(0,Ke.A)(this,t),e=x8(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"isText",value:function(e){return"text"===e.klass}}])}(rt);Object.defineProperty(D8,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze("IAoneService")});var P8=function(){function e(){(0,Ke.A)(this,e)}return(0,$e.A)(e,[{key:"read",value:function(t,n){if(e.nodeType.includes(n.type)){var r=n.nodes;n.nodes=[];var o=r.map((function(e){return t.isText(e)?e.leaves.map((function(e){return e.text})).join(""):""})).join("");return t.setNode(t.createElement(this.typeToName(n.type),{value:{code:o,theme:"dracula"===n.data.theme?"Darcula":"Github Light",mode:this.findMode(n.data.syntax)||"plain"}})),!1}}},{key:"findMode",value:function(e){var t;return e&&(null===(t=z6.find((function(t){return t.syntax===e})))||void 0===t?void 0:t.syntax)||null}},{key:"typeToName",value:function(e){if("code"===e)return"codeblock";bt.fatal(!1,"unknown type: ".concat(e),"plugins/codeblock/src/kernel/readers/code-aone-reader.ts:41")}}])}();function R8(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,S8()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function S8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(S8=function(){return!!e})()}Object.defineProperty(P8,"nodeType",{enumerable:!0,configurable:!0,writable:!0,value:["code"]});var T8=function(e){function t(){var e;return(0,Ke.A)(this,t),e=R8(this,t,arguments),Object.defineProperty(e,"_markdownMatcherPattern",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t=/^(?:```|···)([\w+]*)$/i.exec(e);if(!t)return null;var n=e8(t[1]);return""===n||z6.some((function(e){return e.value===n}))?t:null}}),Object.defineProperty(e,"_markdownMatcherHandler",{enumerable:!0,configurable:!0,writable:!0,value:function(e,n,r,o){var i=o.matchedGroup,a=(0,tn.A)(i,1)[0];a=e8(a);var l=Z6.load()||{},u=a||l.mode||z6[0].value,c=X6.createStandardCardValue(Object.assign(Object.assign({},l),{mode:u})),s=Ai.insertCardNode(e,e.newSelection([e.newRange(e.newPosition(n,0))]),t.cardName,c).cardNode;e.setSelection(e.newSelection(e.newRange(e.newPosition(s,0))))}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerBlockCard(t.cardName)}},{key:"afterInit",value:function(){var e,n,r,o,i,a,l,u,c,s,d,f=this,h=this.kernel;null===(e=h.getService(_S.ID))||void 0===e||e.registerLakeCardReader("codeblock",new g8),null===(n=h.getService(RT.ID))||void 0===n||n.registerINodeCardReader(p8.CardName,new p8),null===(r=h.getService(wS.ID))||void 0===r||r.registerNodeHTMLWriter(t.cardName,new _8),null===(o=h.getService(EG.ID))||void 0===o||o.registerTextWriter(t.cardName,new w8),null===(i=h.getService(_S.ID))||void 0===i||i.registerLakeCardWriter(t.cardName,new O8),null===(a=h.getService(wS.ID))||void 0===a||a.registerPreHTMLNodeReader(i8.NodeNames,new i8),null===(l=h.getService(wS.ID))||void 0===l||l.registerHTMLNodeReader(d8.NodeNames,new d8),null===(u=h.getService(DS.ID))||void 0===u||u.registerMarkdownMatcher(CS.enter,new NS(this.editing,this._markdownMatcherPattern,this._markdownMatcherHandler)),null===(c=h.getService(tI.ID))||void 0===c||c.registerMarkdownReader("code",(function(e,t){return e.setNode(e.createElement("codeblock",{value:{hideToolbar:!0,mode:f.detectLanguage(t.lang),code:t.text}})),!0})),null===(s=h.getService(tI.ID))||void 0===s||s.registerMarkdownWriter("codeblock",{write:function(e,t){var n,r,o;return e.append("```"+((null===(r=null===(n=t.attrs)||void 0===n?void 0:n.value)||void 0===r?void 0:r.mode)||"")+"\n"),e.append((null===(o=t.attrs)||void 0===o?void 0:o.value).code),e.append("\n```\n\n"),!1}}),null===(d=h.getService(D8.ID))||void 0===d||d.registerNodeReader(P8.nodeType,new P8)}},{key:"detectLanguage",value:function(e){var t;return e&&(null===(t=z6.find((function(t){var n;return t.value===e||(null===(n=t.ext)||void 0===n?void 0:n.includes(e))})))||void 0===t?void 0:t.value)||"plain"}}])}(ct);function j8(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,I8()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function I8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(I8=function(){return!!e})()}Object.defineProperty(T8,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:eM.CODEBLOCK.PLUGIN_NAME}),Object.defineProperty(T8,"cardName",{enumerable:!0,configurable:!0,writable:!0,value:eM.CODEBLOCK.NODE_NAME});var B8=function(e){function t(){return(0,Ke.A)(this,t),j8(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){return e.getSelection().rangeCount>1?pt.UNAVAILABLE:pt.NOT_EXECUTED}},{key:"getValue",value:function(e){return e.getNodesByName("mention").filter((function(e){return e.isConnected})).map((function(e){return e.attrs&&e.attrs.value?Object.assign({},e.attrs.value):null})).filter(Boolean)}},{key:"execute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.newJob();if(this.getState(r)===pt.UNAVAILABLE)return e.cancelJob(r),!1;var o=Ai.insertCardNode(r,r.getSelection(),"mention",t),i=o.selection,a=o.cardNode;return n?r.setSelection([r.newRange(r.newPosition(a,0))]):r.setSelection(i),e.commitJob(r),a.id}}])}(pt),M8={origin:null,externalOpen:!1,generateMentionInfo:null},F8=function(){return(0,$e.A)((function e(t){var n=this;(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generateMentionInfo",{enumerable:!0,configurable:!0,writable:!0,value:function(e){if(n._option.generateMentionInfo)return n._option.generateMentionInfo(e);var t=e.login,r=e.name,o=e.nickName;if(t){var i=n._option,a=i.origin,l=i.externalOpen;return a?"boolean"!=typeof l&&(l=!0):a=ku()(window,"location.origin"),{text:"".concat(o||r||t),url:encodeURI("".concat(a,"/").concat(t)),externalOpen:!!l}}return{text:o||r,url:null,externalOpen:!1}}}),this._option=Ww()({},M8,t)}),[{key:"onAfterKernelPluginInit",get:function(){return this._option.onAfterKernelPluginInit}}])}();function L8(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,U8()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function U8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(U8=function(){return!!e})()}Object.defineProperty(F8,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"mention"});var V8=function(e){function t(){return(0,Ke.A)(this,t),L8(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Ij);function H8(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,z8()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function z8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(z8=function(){return!!e})()}Object.defineProperty(V8,"CardName",{enumerable:!0,configurable:!0,writable:!0,value:"mention"});var W8=function(e){function t(){return(0,Ke.A)(this,t),H8(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"setUserInfo",value:function(e){var t=e.login,n=e.nickName,r=e.name,o=e.userid;this._cardValue.login=t,this._cardValue.nickName=n,this._cardValue.name=r,this._cardValue.userid=o}},{key:"getUserInfo",value:function(){return{login:this._cardValue.login,nickName:this._cardValue.nickName,name:this._cardValue.name,userid:this._cardValue.userid}}}],[{key:"fromLake",value:function(e){return Ww()({},t.DefaultCardValue,e)}},{key:"toLake",value:function(e){return Object.assign({},e)}}])}(Sl);function q8(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,$8()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function $8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($8=function(){return!!e})()}Object.defineProperty(W8,"DefaultCardValue",{enumerable:!0,configurable:!0,writable:!0,value:{login:void 0,nickName:void 0,name:void 0,userid:void 0}});var K8=function(e){function t(){return(0,Ke.A)(this,t),q8(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t,n,r){if(n){var o=e.createCard("mention",W8.fromLake(n),r);e.setNode(o)}}}])}(Lj);function Y8(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,G8()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function G8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(G8=function(){return!!e})()}Object.defineProperty(K8,"LakeCardName",{enumerable:!0,configurable:!0,writable:!0,value:"mention"});var J8=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=Y8(this,t),Object.defineProperty(n,"_plugin",{enumerable:!0,configurable:!0,writable:!0,value:null}),n._plugin=e,n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){var n=ku()(t,"attrs.value",{}),r=n.login,o=n.name,i=n.nickName,a=e.createElement("span",{className:"ne-mention"});if(!r)return o||i?(e.appendChild(a,e.createTextNode("@"+(i||o))),void e.setNode(a)):void e.clear();var l=this._plugin.option.generateMentionInfo({login:r,name:o,nickName:i}),u=l.text,c=l.url,s=l.externalOpen,d=e.createElement("a",{attrs:{href:c,target:s?"_blank":void 0}});e.appendChild(d,e.createTextNode("@"+u)),e.appendChild(a,d),e.setNode(a)}}])}(lT);function X8(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Q8()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Q8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Q8=function(){return!!e})()}var Z8=function(e){function t(){return(0,Ke.A)(this,t),X8(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t,n,r){if(n){var o=e.createInlineCard("mention",W8.toLake(n),r,{"data-login":n.login,"data-name":n.name,"data-userid":n.userid});e.setNode(o)}}}])}($j);function e9(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,t9()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function t9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(t9=function(){return!!e})()}var n9=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=e9(this,t),Object.defineProperty(n,"_option",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){var n,r=(null===(n=null==t?void 0:t.attrs)||void 0===n?void 0:n.value)||{},o=this._option.generateMentionInfo(r).text;o&&e.append("@"+o)}}])}(YG),r9=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:t})}),[{key:"write",value:function(e,t){var n=ku()(t,"attrs.value",{}),r=n.login,o=n.name,i=n.nickName;if(!r)return!o&&!i||(e.append("[@".concat(i||o,"]()")),!0);var a=this.plugin.option.generateMentionInfo({login:r,name:o,nickName:i}),l=(a.text,a.url);return a.externalOpen,e.append("[@".concat(i||o,"](").concat(l,")")),!0}}])}();function o9(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,i9()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function i9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(i9=function(){return!!e})()}var a9=function(e){function t(){var e;return(0,Ke.A)(this,t),e=o9(this,t,arguments),Object.defineProperty(e,"isValidMentionPosition",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=t.node,r=t.offset;if(n.hasCategory([qe.Root,qe.LikeRoot]))return!0;if(Ut.closest(n,qe.Inline))return!1;if(n.isTextNode()){var o=e._getPrevText(n,r);return!o||!o.match(/[a-z0-9_]$/)}return bt.fatal(n.isElement()&&n.hasCategory(qe.Block),"plugins/mention/src/kernel/index.ts:107"),!0}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var n,r,o,i,a,l;e.registerInlineCard(t.cardName),e.registerCommand("mention",new B8),e.extendMethods({isValidMentionPosition:this.isValidMentionPosition}),null===(n=e.getService(_S.ID))||void 0===n||n.registerLakeCardReader(K8.LakeCardName,new K8),null===(r=e.getService(RT.ID))||void 0===r||r.registerINodeCardReader(V8.CardName,new V8),null===(o=e.getService(EG.ID))||void 0===o||o.registerTextWriter(t.cardName,new n9(this.option)),null===(i=e.getService(_S.ID))||void 0===i||i.registerLakeCardWriter(t.cardName,new Z8),null===(a=e.getService(wS.ID))||void 0===a||a.registerNodeHTMLWriter(t.cardName,new J8(this)),null===(l=e.getService(tI.ID))||void 0===l||l.registerMarkdownWriter(t.PluginName,new r9(this)),this.option.onAfterKernelPluginInit&&this.option.onAfterKernelPluginInit(this.kernel)}},{key:"_getPrevText",value:function(e,t){bt.fatal(e.isTextNode(),"plugins/mention/src/kernel/index.ts:112");var n=[];return n.push(gn.substring(e.data,0,t)),e.previousSibling&&e.previousSibling.isTextNode()&&(e=e.previousSibling,n.push(e.data)),n.reverse().join("")}}])}(ct);Object.defineProperty(a9,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:"mention"}),Object.defineProperty(a9,"cardName",{enumerable:!0,configurable:!0,writable:!0,value:"mention"}),Object.defineProperty(a9,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:F8});var l9={accept:null,useOriginSrc:function(){return!1}},u9=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Ww()({},l9,t)}),[{key:"accept",get:function(){return this._option.accept}},{key:"name",get:function(){return this._option.name}},{key:"migrationHost",get:function(){return this._option.migrationHost}},{key:"useOriginSrc",value:function(e){var t,n;return(null===(n=(t=this._option).useOriginSrc)||void 0===n?void 0:n.call(t,e))||!1}}])}();Object.defineProperty(u9,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"video"});var c9={Pending:"pending",Uploading:"uploading",Uploaded:"uploaded",Done:"done",Error:"error"};function s9(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,d9()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function d9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(d9=function(){return!!e})()}var f9={status:c9.Pending,name:null,size:null,taskId:null,taskType:"",url:null,cover:null,videoId:null},h9=function(e){function t(){return(0,Ke.A)(this,t),s9(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getTaskId",value:function(){return this._cardValue.taskId}},{key:"getName",value:function(){return this._cardValue.name}},{key:"setName",value:function(e){this._cardValue.name=e}},{key:"getStatus",value:function(){return this._cardValue.status}},{key:"setStatus",value:function(e){this._cardValue.status=e}},{key:"getUrl",value:function(){return this._cardValue.url}},{key:"setUrl",value:function(e){this._cardValue.url=e}},{key:"getCover",value:function(){return this._cardValue.cover}},{key:"setCover",value:function(e){this._cardValue.cover=e}},{key:"getCode",value:function(){return this._cardValue.code}},{key:"setCode",value:function(e){this._cardValue.code=e}},{key:"getMessage",value:function(){return this._cardValue.message}},{key:"setMessage",value:function(e){this._cardValue.message=e}},{key:"getSize",value:function(){return this._cardValue.size}},{key:"setSize",value:function(e){this._cardValue.size=e}},{key:"isCompleted",value:function(){switch(this.getStatus()){case c9.Uploaded:case c9.Done:case c9.Error:return!0;default:return!1}}}],[{key:"getInitCardValue",value:function(e){var n,r,o={};return e&&(o.taskId=e.id,o.taskType="upload",e.file&&(o.name=null!==(n=e.file.name)&&void 0!==n?n:f9.name,o.size=null!==(r=e.file.size)&&void 0!==r?r:f9.size)),Sl.setCardSpacingToValue(Nl,Ww()({},t.DefaultCardValue,o))}},{key:"fromRepository",value:function(e){var t=e.copiedFileInfo,n={status:c9.Uploaded,name:t.filename,size:t.size,url:t.url,videoId:t.video_id};return Sl.setCardSpacingToValue(Nl,Ww()({},f9,n))}},{key:"fromLake",value:function(e){var t=Object.assign({},e);return t.url&&t.status!==c9.Done&&(t.status=c9.Done),Ww()({},f9,t)}},{key:"toLake",value:function(e){return e}}])}(Sl);function p9(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,v9()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function v9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v9=function(){return!!e})()}Object.defineProperty(h9,"DefaultCardValue",{enumerable:!0,configurable:!0,writable:!0,value:f9});var m9=function(e){function t(){return(0,Ke.A)(this,t),p9(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=h9.fromRepository({copiedFileInfo:t});return this._execute(e,"video",r,n)}}])}(sj);function g9(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,b9()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function b9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b9=function(){return!!e})()}Object.defineProperty(m9,"ID",{enumerable:!0,configurable:!0,writable:!0,value:"insertVideo"});var y9=function(e){function t(){return(0,Ke.A)(this,t),g9(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Ij);function w9(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,A9()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function A9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(A9=function(){return!!e})()}Object.defineProperty(y9,"CardName",{enumerable:!0,configurable:!0,writable:!0,value:"video"});var k9=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=w9(this,t),Object.defineProperty(n,"option",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t,n,r){if("function"==typeof this.option.migrationHost)n.url=this.option.migrationHost(n);else if(this.option.migrationHost&&!n.url&&n.videoId&&"string"==typeof n.videoId){var o="string"==typeof this.option.migrationHost?this.option.migrationHost:"yuque.antfin-inc.com";n.url="https://".concat(o,"/api/v2/servicify/migration/videos/").concat(n.videoId)}var i=e.createCard("video",h9.fromLake(n),r);e.setNode(i)}}])}(Lj);function _9(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,C9()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function C9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(C9=function(){return!!e})()}var N9=function(e){function t(){return(0,Ke.A)(this,t),_9(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"readFile",value:function(e,t){if(("video"===(null==t?void 0:t.category)||"localDoc"===(null==t?void 0:t.category)||(null==t?void 0:t.useMediaCard))&&((null==t?void 0:t.from)===LT||(null==t?void 0:t.useMediaCard))){var n=e._$neUploadTask;if(n)return ar.createCard("video",h9.getInitCardValue(n))}}}])}(Cj);function O9(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,x9()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function x9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(x9=function(){return!!e})()}var E9=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=O9(this,t),Object.defineProperty(n,"_currentUrl",{enumerable:!0,configurable:!0,writable:!0,value:""}),n._currentUrl=e,n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){var n,r,o,i=null===(n=null==t?void 0:t.attrs)||void 0===n?void 0:n.value;if(i&&(null==i?void 0:i.status)===c9.Done){var a=(null==i?void 0:i.name)||"",l=e.createElement("div",{className:"ne-video"}),u=e.createElement("a",{attrs:{href:(null===(o=null===(r=null==t?void 0:t.attrs)||void 0===r?void 0:r.value)||void 0===o?void 0:o.url)||""}});e.appendChild(u,e.createTextNode(a)),e.appendChild(l,e.createTextNode("此处为语雀视频卡片，点击链接查看：")),e.appendChild(l,u),e.setNode(l)}}}])}(lT);function D9(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,P9()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function P9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(P9=function(){return!!e})()}var R9=function(e){function t(){return(0,Ke.A)(this,t),D9(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t,n,r){var o=e.createBlockCard("video",h9.toLake(n),r);e.setNode(o)}}])}($j),S9=(0,$e.A)((function e(){(0,Ke.A)(this,e)}));function T9(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,j9()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function j9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(j9=function(){return!!e})()}var I9=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=T9(this,t),Object.defineProperty(n,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"readNode",value:function(e,t){var n,r,o;if(t.attrs){var i=t.attrs._$neUploadTask,a=t.attrs.src;if(a||(a=null===(o=null===(r=null===(n=t.children)||void 0===n?void 0:n.find((function(e){return"source"===e.name})))||void 0===r?void 0:r.attrs)||void 0===o?void 0:o.src),"string"==typeof a)return this.plugin.option.useOriginSrc(a)?(e.setNode(ar.createCard("video",h9.fromLake({url:a}))),!1):i?(e.setNode(ar.createCard("video",h9.getInitCardValue(i))),!1):void 0}}}])}(Ej);function B9(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,M9()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function M9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(M9=function(){return!!e})()}Object.defineProperty(I9,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["video"]});var F9=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=B9(this,t),Object.defineProperty(n,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t){if(t.attrs&&t.attrs.src){var n=t.attrs,r=n.src,o=n._$neUploadTask;return this.plugin.option.useOriginSrc(r)?(e.setNode(ar.createCard("video",h9.fromLake({url:r}))),!1):o?(e.setNode(ar.createCard("video",h9.getInitCardValue(o))),!1):void 0}}}])}(lI);function L9(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,U9()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function U9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(U9=function(){return!!e})()}var V9=function(e){function t(){return(0,Ke.A)(this,t),L9(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var n,r,o,i,a,l,u;e.registerBlockCard(t.cardName);var c=e.requireService(Qj.ID);null===(n=e.getService(_S.ID))||void 0===n||n.registerLakeCardReader("video",new k9(this.option)),null===(r=e.getService(RT.ID))||void 0===r||r.registerINodeCardReader(y9.CardName,new y9),null===(o=e.getService(ET.ID))||void 0===o||o.registerFileReader(c.getFileAcceptUtil().getVideoFileAccept(this.option.name),new N9),null===(i=e.getService(_S.ID))||void 0===i||i.registerLakeCardWriter("video",new R9),null===(a=e.getService(wS.ID))||void 0===a||a.registerNodeHTMLWriter("video",new E9(e.option.currentURL)),null===(l=e.getService(wS.ID))||void 0===l||l.registerHTMLNodeReader(I9.NodeNames,new I9(this)),null===(u=e.getService(_S.ID))||void 0===u||u.registerLakeNodeReader("video",new F9(this))}}])}(ct);Object.defineProperty(V9,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:"video"}),Object.defineProperty(V9,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:u9}),Object.defineProperty(V9,"cardName",{enumerable:!0,configurable:!0,writable:!0,value:"video"}),Object.defineProperty(V9,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[m9]});var H9=HR({pluginName:"columns",service:{IColumnsKernelService:"IColumnsKernelService"},command:{columns:"columns",columnsWidths:"columnsWidths",columnsAddColumn:"columnsAddColumn",columnDelete:"columnDelete",columnDeleteByIndex:"columnDeleteByIndex",selectColumnEnd:"selectColumnEnd",deleteColumns:"deleteColumns",moveColumns:"moveColumns",moveColumn:"moveColumn",columnsToggleWidthMode:"columnsToggleWidthMode"},node:{columns:"columns",column:"column"},lakeNode:{article:"article"},htmlNode:{article:"article"},domNode:{columns:"ne-columns",column:"ne-column",columnsContent:"ne-columns-content",columnContent:"ne-column-content",columnBorder:"ne-column-border",columnHover:"ne-column-hover",columnController:"ne-column-controller"},attr:{width:"width"},cardSelect:{columns:"columns",columns2:"columns2",columns3:"columns3",columns4:"columns4",columns5:"columns5",columns6:"columns6"}});const z9={width:{targets:[H9.node.column],values:function(e){return"number"==typeof e}}};function W9(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,q9()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function q9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(q9=function(){return!!e})()}var $9=function(e){function t(){var e;return(0,Ke.A)(this,t),e=W9(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(rt);function K9(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Y9()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Y9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Y9=function(){return!!e})()}Object.defineProperty($9,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze(H9.service.IColumnsKernelService)});var G9=function(e){function t(){return(0,Ke.A)(this,t),K9(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"reAlignColumnWidth",value:function(e,t){var n=e.children.map((function(e){return Number(e.attrs.width)*(1-1/t)})),r=0,o=0;do{for(var i=0;i<n.length;i++)n[i]<=Ur?(r+=Ur-n[i],n[i]=Ur):n[i]-r<Ur?(r-=n[i]-Ur,n[i]=Ur):(n[i]-=r,r=0);o++}while(r>0&&o<10);return bt.fatal(0===r,"plugins/columns/src/kernel/columns-kernel-service.ts:36"),n}},{key:"destroy",value:function(){}}])}($9);const J9={columns:{parents:[qe.ContainerHole],excludes:[qe.VirtualLikeRoot],category:[Mr,qe.WidthModeBox,qe.Brick],children:[Fr]},column:{parents:[Mr],category:[qe.LikeRoot,Fr]}};function X9(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Q9()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Q9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Q9=function(){return!!e})()}var Z9=function(e){function t(){return(0,Ke.A)(this,t),X9(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t,n){var r=e.newJob(),o=r.getSelection(),i=r.getNodeById(t);if((null==i?void 0:i.nodeName)!==Mr||isNaN(n)||n<0||n>=i.childCount)return e.cancelJob(r),!1;var a=i.children[n];if(bt.fatal(a&&a.nodeName===Fr,"plugins/columns/src/kernel/commands/column-delete-by-index-command.ts:37"),i.childCount<2)return e.cancelJob(r),!1;if(2===i.childCount){for(var l=i.parentNode.parentNode,u=this._isSelectionInColumnNode(r,o,a),c=r.newPosition(l,Math.max(0,i.parentNode.offset-1)),s=0;s<i.childCount;s++){var d=i.children[s];if(d!==a)for(var f=0;f<d.childCount;f++){var h=d.children[f];r.insertBefore(l,h,i.parentNode),c=r.newPosition(h,h.childCount),f--}}return r.removeChild(l,i.parentNode),u&&r.setSelection([r.newRange(c)]),e.commitJob(r),!0}for(var p=this._isSelectionInColumnNode(r,o,a),v=a.previousSibling?r.newPosition(a.previousSibling,a.previousSibling.childCount):r.newPosition(a.nextSibling,0),m=i.childCount-1,g=a.attrs.width||0,b=0;b<i.childCount;b++){var y=i.children[b];y!==a&&r.setAttribute(i.children[b],H9.attr.width,y.attrs.width+g/m)}return r.removeChild(i,a),p&&r.setSelection([r.newRange(v)]),e.commitJob(r),!0}},{key:"_isSelectionInColumnNode",value:function(e,t,n){return t.ranges.find((function(e){var t=e.start,r=e.end;return t.node.closest(Fr)===n||r.node.closest(Fr)===n}))}}])}(gt);function e7(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,t7()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function t7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(t7=function(){return!!e})()}Object.defineProperty(Z9,"ID",{enumerable:!0,configurable:!0,writable:!0,value:H9.command.columnDeleteByIndex});var n7=function(e){function t(){return(0,Ke.A)(this,t),e7(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t){var n,r,o,i,a,l=e.newJob(),u=l.getSelection(),c=l.getNodeById(t);if((null==c?void 0:c.nodeName)!==Mr||!u.collapsed||0!==(null===(r=null===(n=u.firstRange)||void 0===n?void 0:n.start)||void 0===r?void 0:r.offset)||(null===(a=null===(i=null===(o=u.firstRange)||void 0===o?void 0:o.start)||void 0===i?void 0:i.node)||void 0===a?void 0:a.closest([qe.AlertHole,"quote"])))return e.cancelJob(l),!1;var s=u.firstRange.start.node.closest(Fr);if(!s||s.childCount>1||s.firstChild&&!Ut.isLikeEmptyElement(s.firstChild))return e.cancelJob(l),!1;if(c.childCount<=2){if(c.children.every((function(e){return Ut.isLikeEmptyElement(e)}))){var d=wi.deleteContent(l,l.selectNode(c));return bt.fatal(d.collapsed,"plugins/columns/src/kernel/commands/column-delete-command.ts:65"),l.setSelection(d),e.commitJob(l),!0}for(var f=c.parentNode.parentNode,h=l.newPosition(f,Math.max(0,c.parentNode.offset-1)),p=0;p<c.childCount;p++){var v=c.children[p];if(v!==s)for(var m=0;m<v.childCount;m++){var g=v.children[m];l.insertBefore(f,g,c.parentNode),h=l.newPosition(g,g.childCount),m--}}return l.removeChild(f,c.parentNode),l.setSelection([l.newRange(h)]),e.commitJob(l),!0}for(var b=s.previousSibling?l.newPosition(s.previousSibling,s.previousSibling.childCount):l.newPosition(s.nextSibling,0),y=c.childCount-1,w=Number(s.attrs.width),A=0;A<c.childCount;A++){var k=c.children[A];k!==s&&l.setAttribute(c.children[A],H9.attr.width,Number(k.attrs.width)+w/y)}return l.removeChild(c,s),l.setSelection([l.newRange(b)]),e.commitJob(l),!0}}])}(gt);function r7(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,o7()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function o7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(o7=function(){return!!e})()}Object.defineProperty(n7,"ID",{enumerable:!0,configurable:!0,writable:!0,value:H9.command.columnDelete});var i7=function(e){function t(){return(0,Ke.A)(this,t),r7(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t,n,r){var o=e.newJob(),i=o.getNodeById(t);if(null===i||i.nodeName!==Mr||n<0||n>=i.childCount||r<0||r>i.childCount)return e.cancelJob(o),!1;var a=i.children[n];return r===i.childCount?(o.removeChild(i,a),o.appendChild(i,a)):o.insertBefore(i,a,i.children[r]),e.commitJob(o),!0}}])}(gt);function a7(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,l7()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function l7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(l7=function(){return!!e})()}Object.defineProperty(i7,"ID",{enumerable:!0,configurable:!0,writable:!0,value:H9.command.moveColumn});var u7=function(e){function t(){return(0,Ke.A)(this,t),a7(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t){var n=e.newJob(),r=n.getNodeById(t);if((null==r?void 0:r.nodeName)!==Fr)return e.cancelJob(n),!1;var o=r.lastChild;if(!o||o.hasCategory(qe.Hole)){var i=n.createElement(n.defaultElementName);n.appendChild(r,i),n.setSelection([n.newRange(n.newPosition(i,0))])}else if(o){var a=Vt.selectNodeContents(o).end;n.setSelection([n.newRange(a)])}return e.commitJob(n),!0}}])}(gt);function c7(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,s7()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function s7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s7=function(){return!!e})()}Object.defineProperty(u7,"ID",{enumerable:!0,configurable:!0,writable:!0,value:H9.command.selectColumnEnd});var d7=function(e){function t(){return(0,Ke.A)(this,t),c7(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getValue",value:function(e,t){var n=e.getNodeById(t);return(null==n?void 0:n.nodeName)!==Mr?-1:n.childCount}},{key:"execute",value:function(e,t,n){var r=e.newJob(),o=r.getNodeById(t);if((null==o?void 0:o.nodeName)!==Mr||n<0||o.childCount>=Lr)return e.cancelJob(r),!1;for(var i=o.childCount+1,a=r.createElement(Fr,{width:1/i}),l=this.plugin.service.reAlignColumnWidth(o,i),u=0;u<l.length;u++){var c=l[u];r.setAttribute(o.children[u],H9.attr.width,c)}n>=o.childCount?r.appendChild(o,a):r.insertBefore(o,a,o.children[n]);var s=r.createElement(r.defaultElementName);return r.appendChild(a,s),r.setSelection([r.newRange(r.newPosition(s,0))]),e.commitJob(r),!0}}])}(gt);function f7(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,h7()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function h7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h7=function(){return!!e})()}Object.defineProperty(d7,"ID",{enumerable:!0,configurable:!0,writable:!0,value:H9.command.columnsAddColumn});var p7=function(e){function t(){return(0,Ke.A)(this,t),f7(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){var t=e.getSelection();return wi.isUnbreakable(t)?pt.UNAVAILABLE:pt.NOT_EXECUTED}},{key:"execute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=e.newJob();if(this.getState(n)===pt.UNAVAILABLE)return e.cancelJob(n),!1;var r=n.getSelection();r.collapsed||(r=wi.deleteContent(n,r)),bt.fatal(r.collapsed,"plugins/columns/src/kernel/commands/columns-command.ts:44");var o=r.firstRange.start,i=o.node.closest(qe.Block);i&&Ut.isLikeEmptyElement(i)&&(o=n.newPosition(i.parentNode,i.offset),n.removeChild(i.parentNode,i));var a=n.createElement("containerHole"),l=n.createElement(H9.node.columns);n.appendChild(a,l);for(var u=0;u<t;u++){var c=n.createElement(H9.node.column,{width:1/t}),s=n.createElement(n.defaultElementName);n.appendChild(l,c),n.appendChild(c,s)}return wr.insertNodes(n,o,[a]),n.setSelection([n.newRange(n.newPosition(l.firstChild.firstChild,0))]),e.commitJob(n),!0}}])}(gt);function v7(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,m7()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function m7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m7=function(){return!!e})()}Object.defineProperty(p7,"ID",{enumerable:!0,configurable:!0,writable:!0,value:H9.command.columns});var g7=function(e){function t(){return(0,Ke.A)(this,t),v7(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t){var n=e.newJob(),r=n.getNodeById(t);if((null==r?void 0:r.nodeName)!==Mr)return e.cancelJob(n),!1;var o=wi.deleteContent(n,n.selectNode(r));return bt.fatal(o.collapsed,"plugins/columns/src/kernel/commands/columns-delete-command.ts:26"),n.setSelection(o),e.commitJob(n),!0}}])}(gt);function b7(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,y7()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function y7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(y7=function(){return!!e})()}Object.defineProperty(g7,"ID",{enumerable:!0,configurable:!0,writable:!0,value:H9.command.deleteColumns});var w7=function(e){function t(){return(0,Ke.A)(this,t),b7(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t,n){var r=e.newJob(),o=r.getNodeById(t);o&&o.isConnected&&(null==o?void 0:o.nodeName)===Mr?(wr.insertNodes(r,n,[o.parentNode]),r.setSelection(r.selectNode(o)),e.commitJob(r)):e.cancelJob(r)}}])}(gt);function A7(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,k7()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function k7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(k7=function(){return!!e})()}Object.defineProperty(w7,"ID",{enumerable:!0,configurable:!0,writable:!0,value:H9.command.moveColumns});var _7=function(e){function t(){return(0,Ke.A)(this,t),A7(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t,n){var r=e.newJob(),o=r.getNodeById(t);if((null==o?void 0:o.nodeName)!==Mr)return e.cancelJob(r),!1;bt.fatal(o.children.length===n.length,"plugins/columns/src/kernel/commands/columns-widths-command.ts:20");for(var i=0,a=n.length;i<a;i++){var l=n[i];r.setAttribute(o.children[i],"width",l)}return e.commitJob(r),!0}}])}(gt);function C7(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,N7()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function N7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(N7=function(){return!!e})()}Object.defineProperty(_7,"ID",{enumerable:!0,configurable:!0,writable:!0,value:H9.command.columnsWidths});var O7=function(e){function t(){return(0,Ke.A)(this,t),C7(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getValue",value:function(e,t){bt.fatal(t,"plugins/columns/src/kernel/commands/toggle-width-mode.ts:17");var n=e.getNodeById(t);return bt.fatal(n,"plugins/columns/src/kernel/commands/toggle-width-mode.ts:21"),this._getValue(n)}},{key:"execute",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;bt.fatal(t,"plugins/columns/src/kernel/commands/toggle-width-mode.ts:31");var r=e.newJob(),o=r.getNodeById(t);if(null===o||o.nodeName!==Mr)return e.cancelJob(r),!1;if(n===Dl||n===El)r.setAttribute(o,"widthMode",n);else{var i=this._getValue(o);r.setAttribute(o,"widthMode",i===Dl?El:Dl)}return e.commitJob(r),!0}},{key:"_getValue",value:function(e){var t;return(null===(t=e.attrs)||void 0===t?void 0:t.widthMode)===Dl?Dl:El}}])}(gt);function x7(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,E7()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function E7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(E7=function(){return!!e})()}Object.defineProperty(O7,"ID",{enumerable:!0,configurable:!0,writable:!0,value:H9.command.columnsToggleWidthMode});var D7=function(e){function t(){return(0,Ke.A)(this,t),x7(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t){if(t&&t.attrs&&t.attrs.class&&t.attrs.class.includes("lake-columns")){var n=ar.createElement(H9.node.columns,{widthMode:t.attrs.widthmode||void 0});return e.setNode(n),!1}if(t&&t.attrs&&t.attrs.class&&t.attrs.class.includes("lake-column-item")){var r=t.style.width.replace(/%$/,""),o=ar.createElement(H9.node.column,{width:parseFloat(r)/100||0});return e.setNode(o),!1}return!0}}])}(lI);function P7(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,R7()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function R7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(R7=function(){return!!e})()}Object.defineProperty(D7,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[H9.lakeNode.article]});var S7=function(e){function t(){return(0,Ke.A)(this,t),P7(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){var n=null==t?void 0:t.name;if(n===H9.node.columns){var r=((null==t?void 0:t.attrs)||{}).widthMode;e.setNode(e.createElement(H9.htmlNode.article,{className:"lake-columns",style:{display:"flex"},widthMode:r}))}else if(n===H9.node.column){var o=((null==t?void 0:t.attrs)||{width:0}).width;e.setNode(e.createElement(H9.htmlNode.article,{className:"lake-column-item",style:{flex:o},width:(100*o).toFixed(6)+"%"}))}}}])}(lT);function T7(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,j7()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function j7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(j7=function(){return!!e})()}Object.defineProperty(S7,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[Mr,Fr]});var I7=function(e){function t(){return(0,Ke.A)(this,t),T7(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){var n=null==t?void 0:t.name;if(n===Mr){var r=((null==t?void 0:t.attrs)||{}).widthMode;e.setNode(ar.createElement(H9.lakeNode.article)),e.addClassName("lake-columns"),e.setAttr("widthMode",r)}else if(n===Fr){var o=((null==t?void 0:t.attrs)||{width:0}).width;e.setNode(ar.createElement(H9.lakeNode.article)),e.addClassName("lake-column-item"),e.setStyle("width",(100*o).toFixed(6)+"%")}}}])}(vT);function B7(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,M7()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function M7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(M7=function(){return!!e})()}Object.defineProperty(I7,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[H9.node.columns,H9.node.column]});var F7=function(e){function t(){return(0,Ke.A)(this,t),B7(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerElement(J9),e.registerAttr(z9)}},{key:"afterInit",value:function(){var e,t,n;null===(e=this.kernel.getService(_S.ID))||void 0===e||e.registerLakeNodeReader(D7.NodeNames,new D7),null===(t=this.kernel.getService(_S.ID))||void 0===t||t.registerLakeNodeWriter(I7.NodeNames,new I7),null===(n=this.kernel.getService(wS.ID))||void 0===n||n.registerNodeHTMLWriter(S7.NodeNames,new S7)}}])}(ct);Object.defineProperty(F7,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:H9.pluginName}),Object.defineProperty(F7,"Service",{enumerable:!0,configurable:!0,writable:!0,value:G9}),Object.defineProperty(F7,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[p7,_7,d7,n7,Z9,u7,g7,w7,i7,O7]});const L7={open:{targets:[Rt],values:["true","false"]}},U7=(0,Ha.A)((0,Ha.A)({},Rt,{parents:[qe.ContainerHole],excludes:[qe.VirtualLikeRoot],category:[qe.LikeRoot,qe.WidthModeBox,Rt,qe.Brick]}),St,{parents:[Rt],category:[qe.Block,St,qe.AttrContext,qe.Clean,qe.TextContainer,qe.OnlyText],children:[qe.Text]});var V7=HR({pluginName:"collapse",node:"collapse",command:{collapse:"collapse",moveCollapse:"moveCollapse",deleteCollapse:"deleteCollapse",collapseOpen:"collapseOpen",collspseClosable:"collspseClosable",collapseBreakLine:"collapseBreakLine",collapseToggleWidthMode:"collapseToggleWidthMode",tryUnfoldCollapse:"tryUnfoldCollapse"},cardSelect:"collapse"});function H7(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,z7()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function z7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(z7=function(){return!!e})()}var W7=function(e){function t(){return(0,Ke.A)(this,t),H7(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){var t=e.getSelection();return wi.isUnbreakable(t)?pt.UNAVAILABLE:t.firstRange.start.node.closest(Rt)?pt.NOT_EXECUTED:pt.UNAVAILABLE}},{key:"execute",value:function(e){var t=e.newJob();if(this.getState(t)===pt.UNAVAILABLE)return e.cancelJob(t),!1;var n=t.getSelection();n.collapsed||(n=wi.deleteContent(t,n)),bt.fatal(n.collapsed,"plugins/collapse/src/kernel/commands/collapse-break-line-command.ts:53");var r=n.firstRange.start,o=r.node,i=r.offset,a=o.closest(Rt),l=o.closest([qe.Block,qe.Hole,qe.TableHole]);if(null===a||null===l)return e.cancelJob(t),!1;var u,c=l.hasCategory(St),s=!!c&&(o.isTextNode()&&i===o.dataLength&&o===l.lastChild||o.hasCategory(St)&&o.childCount===i);return u=c&&s&&2===a.childCount&&Ut.isLikeEmptyElement(a.lastChild)?t.newPosition(a.lastChild,0):wr.breakLine(t,n.firstRange.start),"false"===a.attrs.open&&t.setAttribute(a,"open","true"),t.setSelection([t.newRange(u)]),e.commitJob(t),!0}}])}(gt);function q7(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function $7(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,K7()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function K7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(K7=function(){return!!e})()}Object.defineProperty(W7,"ID",{enumerable:!0,configurable:!0,writable:!0,value:V7.command.collapseBreakLine});var Y7=function(e){function t(){return(0,Ke.A)(this,t),$7(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getValue",value:function(e,t){var n=e.getNodeById(t);if((null==n?void 0:n.nodeName)!==Rt)return pt.NOT_EXECUTED;var r,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return q7(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q7(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(this.plugin.getOtherSelection());try{for(o.s();!(r=o.n()).done;){var i=r.value.selection.firstRange,a=i.start,l=i.end;if(a.node.closest(Rt)===n||l.node.closest(Rt)===n)return pt.UNAVAILABLE}}catch(e){o.e(e)}finally{o.f()}return pt.NOT_EXECUTED}},{key:"execute",value:function(){return!0}}])}(gt);function G7(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,J7()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function J7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(J7=function(){return!!e})()}Object.defineProperty(Y7,"ID",{enumerable:!0,configurable:!0,writable:!0,value:V7.command.collspseClosable});var X7=function(e){function t(){return(0,Ke.A)(this,t),G7(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){var t=e.getSelection();return wi.isUnbreakable(t)?pt.UNAVAILABLE:pt.NOT_EXECUTED}},{key:"execute",value:function(e){var t=e.newJob();if(this.getState(t)===pt.UNAVAILABLE)return e.cancelJob(t),!1;var n=t.getSelection();n.collapsed||(n=wi.deleteContent(t,n)),bt.fatal(n.collapsed,"plugins/collapse/src/kernel/commands/collapse-command.ts:50");var r=n.firstRange.start,o=r.node.closest([qe.Block,qe.Root]);if(null===o)return e.cancelJob(t),!1;!o.isRootNode()&&Ut.isLikeEmptyElement(o)&&(r=t.newPosition(o.parentNode,o.offset),t.removeChild(o.parentNode,o));var i=t.createHole("containerHole"),a=t.createElement(Rt,{open:"true"}),l=t.createElement(St),u=t.createElement(t.defaultElementName);return t.appendChild(a,l),t.appendChild(a,u),t.appendChild(i,a),wr.insertNodes(t,r,[i]),t.setSelection([t.newRange(t.newPosition(l,0))]),e.commitJob(t),!0}}])}(gt);function Q7(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Z7()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Z7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Z7=function(){return!!e})()}Object.defineProperty(X7,"ID",{enumerable:!0,configurable:!0,writable:!0,value:V7.command.collapse});var eee=function(e){function t(){return(0,Ke.A)(this,t),Q7(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t){var n=e.newJob(),r=n.getNodeById(t);if((null==r?void 0:r.nodeName)!==Rt)return e.cancelJob(n),!1;var o=wi.deleteContent(n,n.selectNode(r));return bt.fatal(o.collapsed,"plugins/collapse/src/kernel/commands/collapse-delete-command.ts:25"),n.setSelection(o),e.commitJob(n),!0}}])}(gt);function tee(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,nee()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function nee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nee=function(){return!!e})()}Object.defineProperty(eee,"ID",{enumerable:!0,configurable:!0,writable:!0,value:V7.command.deleteCollapse});var ree=function(e){function t(){return(0,Ke.A)(this,t),tee(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t,n){var r=e.newJob(),o=r.getNodeById(t);o&&o.isConnected&&(null==o?void 0:o.nodeName)===Rt?(wr.insertNodes(r,n,[o.parentNode]),r.setSelection(r.selectNode(o)),e.commitJob(r)):e.cancelJob(r)}}])}(gt);function oee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function iee(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,aee()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function aee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(aee=function(){return!!e})()}Object.defineProperty(ree,"ID",{enumerable:!0,configurable:!0,writable:!0,value:V7.command.moveCollapse});var lee=function(e){function t(){return(0,Ke.A)(this,t),iee(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"canSetClose",value:function(e,t){var n=e.getNodeById(t);if((null==n?void 0:n.nodeName)!==Rt)return pt.NOT_EXECUTED;var r,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return oee(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oee(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(this.plugin.getOtherSelection());try{for(o.s();!(r=o.n()).done;){var i=r.value.selection.firstRange,a=i.start,l=i.end;if(a.node.closest(Rt)===n||l.node.closest(Rt)===n)return pt.UNAVAILABLE}}catch(e){o.e(e)}finally{o.f()}return pt.NOT_EXECUTED}},{key:"execute",value:function(e,t){var n=e.newJob();if(this.canSetClose(n,t)===pt.UNAVAILABLE)return e.cancelJob(n),!1;var r=n.getNodeById(t);if((null==r?void 0:r.nodeName)!==Rt)return e.cancelJob(n),!1;var o="true"===r.attrs.open;if(n.setAttribute(r,"open",o?"false":"true"),o){var i=n.getSelection().firstRange,a=i.start,l=i.end;if(a.node.closest(Rt)===r||l.node.closest(Rt)===r){var u=n.selectNodeContents(r.children[0]);n.setSelection([n.newRange(u.firstRange.end)])}}return e.commitJob(n),!0}}])}(gt);function uee(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,cee()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function cee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(cee=function(){return!!e})()}Object.defineProperty(lee,"ID",{enumerable:!0,configurable:!0,writable:!0,value:V7.command.collapseOpen});var see=function(e){function t(){return(0,Ke.A)(this,t),uee(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getValue",value:function(e,t){bt.fatal(t,"plugins/collapse/src/kernel/commands/toggle-width-mode.ts:20");var n=e.getNodeById(t);return bt.fatal(n,"plugins/collapse/src/kernel/commands/toggle-width-mode.ts:24"),this._getValue(n)}},{key:"execute",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;bt.fatal(t,"plugins/collapse/src/kernel/commands/toggle-width-mode.ts:30");var r=e.newJob(),o=r.getNodeById(t);if(null===o||o.nodeName!==Rt)return e.cancelJob(r),!1;if(n===Dl||n===El)r.setAttribute(o,"widthMode",n);else{var i=this._getValue(o);r.setAttribute(o,"widthMode",i===Dl?El:Dl)}return e.commitJob(r),!0}},{key:"_getValue",value:function(e){var t;return(null===(t=e.attrs)||void 0===t?void 0:t.widthMode)===Dl?Dl:El}}])}(gt);function dee(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,fee()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function fee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(fee=function(){return!!e})()}Object.defineProperty(see,"ID",{enumerable:!0,configurable:!0,writable:!0,value:V7.command.collapseToggleWidthMode});var hee=function(e){function t(){return(0,Ke.A)(this,t),dee(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t){var n,r,o,i;if(t&&t.attrs&&(null===(r=null===(n=t.attrs.class)||void 0===n?void 0:n.includes)||void 0===r?void 0:r.call(n,"lake-collapse"))){var a=ar.createElement(Rt,{open:t.attrs.open||"true",widthMode:t.attrs.widthmode||void 0});e.setNode(a);var l=!0,u=[];return null===(o=t.children)||void 0===o||o.forEach((function(e){l&&"#text"===e.name&&/^\s*$/.test(e.data)?u.push(e):(e.name,l=!1)})),t.children=null===(i=t.children)||void 0===i?void 0:i.filter((function(e){return!u.includes(e)})),!1}return!0}}])}(lI);function pee(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,vee()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function vee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vee=function(){return!!e})()}Object.defineProperty(hee,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["details"]});var mee=function(e){function t(){return(0,Ke.A)(this,t),pee(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t){var n,r;if(null===(r=null===(n=null==t?void 0:t.attrs)||void 0===n?void 0:n.class)||void 0===r?void 0:r.includes("lake-summary")){var o=ar.createElement(St);return e.setNode(o),!1}return!0}}])}(lI);function gee(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,bee()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function bee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bee=function(){return!!e})()}Object.defineProperty(mee,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[St]});var yee=function(e){function t(){return(0,Ke.A)(this,t),gee(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){var n=e.createElement("details",{className:["lake-collapse"]});e.setNode(n)}}])}(lT);function wee(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Aee()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Aee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Aee=function(){return!!e})()}Object.defineProperty(yee,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[Rt]});var kee=function(e){function t(){return(0,Ke.A)(this,t),wee(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e){var t=e.createElement(St);e.setNode(t)}}])}(lT);function _ee(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Cee()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Cee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Cee=function(){return!!e})()}Object.defineProperty(kee,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[St]});var Nee=function(e){function t(){return(0,Ke.A)(this,t),_ee(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){var n=(null==t?void 0:t.attrs)||{},r=n.open,o=n.widthMode;e.setNode(ar.createElement("details")),e.addClassName("lake-collapse"),e.setAttr("open",r),e.setAttr("widthMode",o)}}])}(vT);function Oee(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,xee()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function xee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xee=function(){return!!e})()}Object.defineProperty(Nee,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[Rt]});var Eee=function(e){function t(){return(0,Ke.A)(this,t),Oee(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e){e.setNode(ar.createElement(St)),e.addClassName("lake-summary")}}])}(vT);function Dee(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Pee()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Pee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Pee=function(){return!!e})()}Object.defineProperty(Eee,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[St]});var Ree=function(e){function t(){return(0,Ke.A)(this,t),Dee(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t){if(!t)return!1;var n=e.newJob(),r=n.getNodeById(t);if(!r)return e.cancelJob(n),!1;var o=r.closest(Rt);return(null==o?void 0:o.nodeName)!==Rt?(e.cancelJob(n),!1):(n.setAttribute(o,"open","true"),e.commitJob(n),!0)}}])}(gt);function See(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Tee(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Tee(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function Tee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function jee(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Iee()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Iee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Iee=function(){return!!e})()}function Bee(e){var t,n,r;if(e)return(null===(t=e.isEmpty)||void 0===t?void 0:t.call(e))||(null===(r=null===(n=e.children)||void 0===n?void 0:n.every)||void 0===r?void 0:r.call(n,(function(e){var t,n;return(null===(t=e.isTextNode)||void 0===t?void 0:t.call(e))&&(null===(n=e.isEmpty)||void 0===n?void 0:n.call(e))})))}Object.defineProperty(Ree,"ID",{enumerable:!0,configurable:!0,writable:!0,value:V7.command.tryUnfoldCollapse});var Mee=function(e){function t(){var e;return(0,Ke.A)(this,t),e=jee(this,t,arguments),Object.defineProperty(e,"_selections",{enumerable:!0,configurable:!0,writable:!0,value:[]}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){var n=this;e.registerElement(U7),e.registerAttr(L7);var r={};xc(this,t,"nodechange",(function(e){var t=e.node,n=e.job;"children"!==e.type||t.nodeName===Rt&&(r[t.id]={node:t,job:n})})),xc(this,t,"beforecontentchange",(function(){for(var e=0,t=Object.keys(r);e<t.length;e++){var n=t[e],o=r[n],i=o.node,a=o.job;if(i.isConnected){var l=a.getSelection().firstRange,u=l.start,c=l.end,s=null,d=-1,f=null,h=-1,p=i;if(!p||!p.isElement())return;var v=p.firstChild;if(v&&v.nodeName!==St&&0===v.childCount&&(1===p.childCount||2===p.childCount&&Bee(p.lastChild)))a.removeChild(p,v),a.replaceChild(p.parent.parent,v,p.parent);else{if(v&&v.nodeName!==St){var m,g=a.createElement(St),b=See(v.children);try{for(b.s();!(m=b.n()).done;){var y=m.value;if(!y.isTextNode())break;a.appendChild(g,y)}}catch(e){b.e(e)}finally{b.f()}0===v.childCount&&a.removeChild(p,v),a.prependChild(p,g),u.node===v&&(s=g,d=u.offset,u.offset>g.childCount&&(bt.fatal(v.childCount>=u.offset-g.childCount,"plugins/collapse/src/kernel/index.ts:144"),s=v,d=u.offset-g.childCount)),c.node===v&&(f=g,h=c.offset,c.offset>g.childCount&&(bt.fatal(v.childCount>=c.offset-g.childCount,"plugins/collapse/src/kernel/index.ts:156"),f=v,h=c.offset-g.childCount))}for(var w=1;w<p.children.length;w++){var A=p.children[w];if(A.nodeName===St){var k,_=a.createElement(a.defaultElementName),C=See(A.children);try{for(C.s();!(k=C.n()).done;){var N=k.value;a.appendChild(_,N)}}catch(e){C.e(e)}finally{C.f()}a.replaceChild(p,_,A),u.node===v&&(s=_,d=u.offset),c.node===v&&(f=_,h=c.offset)}}if(s||f){var O=s?a.newPosition(s,d):u,x=f?a.newPosition(f,h):c;a.setSelection([a.newRange(O,x)])}}}}r={}})),xc(this,t,"collabSelectionChange",(function(e){var t=e.selections;n._selections=t}))}},{key:"getOtherSelection",value:function(){return this._selections}},{key:"afterInit",value:function(){var e=this.kernel.getService(_S.ID);e&&(e.registerLakeNodeWriter(Nee.NodeNames,new Nee),e.registerLakeNodeWriter(Eee.NodeNames,new Eee));var t=this.kernel.getService(_S.ID);t&&(t.registerLakeNodeReader(hee.NodeNames,new hee),t.registerLakeNodeReader(mee.NodeNames,new mee));var n=this.kernel.getService(wS.ID);n&&(n.registerNodeHTMLWriter(yee.NodeNames,new yee),n.registerNodeHTMLWriter(kee.NodeNames,new kee))}},{key:"destroy",value:function(){Tr((0,Je.A)(t.prototype),"destroy",this).call(this),this._selections=[]}}])}(ct);function Fee(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Lee()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Lee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Lee=function(){return!!e})()}Object.defineProperty(Mee,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:V7.pluginName}),Object.defineProperty(Mee,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[X7,ree,eee,lee,Y7,W7,see,Ree]});var Uee=function(e){function t(){return(0,Ke.A)(this,t),Fee(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"readNode",value:function(e,t){var n,r;return!("math"!==(null===(n=t.attrs)||void 0===n?void 0:n["data-type"])||!(null===(r=t.attrs)||void 0===r?void 0:r["data-text"])||(e.stop(),e.setNode(ar.createCard("math",{code:t.attrs["data-text"]})),0))}}])}(Ej);function Vee(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Hee()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Hee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Hee=function(){return!!e})()}Object.defineProperty(Uee,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["div"]});var zee=function(e){function t(){return(0,Ke.A)(this,t),Vee(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Ij);function Wee(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,qee()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function qee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qee=function(){return!!e})()}Object.defineProperty(zee,"CardName",{enumerable:!0,configurable:!0,writable:!0,value:eM.MATH.NODE_NAME});var $ee=function(e){function t(){return(0,Ke.A)(this,t),Wee(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"code",get:function(){return this._cardValue.code}},{key:"url",get:function(){return this._cardValue.url}},{key:"update",value:function(e){this._cardValue=Object.assign(Object.assign({},this._cardValue),e),this.afterChange()}},{key:"isEmpty",value:function(){return""===(this.code||"").trim()}},{key:"needGenPreviewImg",value:function(){return!this.isEmpty()&&!this.url}},{key:"toGraph",value:function(){return{type:"latex",code:this.code,url:this.url}}}],[{key:"fromLake",value:function(e){return{code:e.code,url:e.src}}},{key:"toLake",value:function(e){return{code:ku()(e,"code"),src:ku()(e,"url")}}}])}(Sl);Object.defineProperty($ee,"DefaultCardValue",{enumerable:!0,configurable:!0,writable:!0,value:{code:"",url:null}});const Kee=$ee;function Yee(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Gee()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Gee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Gee=function(){return!!e})()}var Jee=function(e){function t(){return(0,Ke.A)(this,t),Yee(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t,n,r){if(n){var o=ar.createCard("math",Kee.fromLake(n),r);e.setNode(o)}}}])}(Lj);function Xee(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Qee()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Qee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Qee=function(){return!!e})()}var Zee=function(e){function t(){return(0,Ke.A)(this,t),Xee(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"writeAsInlineCode",value:function(e,t){var n=e.createElement("span",{className:"ne-math",style:{padding:"0 2px",border:"1px solid #e8e8e8",borderRadius:"2px",background:"#f9f9f9"}});e.appendChild(n,e.createTextNode(t)),e.setNode(n)}},{key:"writeAsImage",value:function(e,t){var n=e.createElement("span",{className:"ne-math"}),r=e.createElement("img",{attrs:{src:t}});e.appendChild(n,r),e.setNode(n)}},{key:"write",value:function(e,t){var n=(t.attrs||{}).value||{},r=n.code,o=n.url;r&&(o?this.writeAsImage(e,o):this.writeAsInlineCode(e,r))}}])}(lT);const ete=Zee;function tte(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,nte()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function nte(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nte=function(){return!!e})()}var rte=function(e){function t(){return(0,Ke.A)(this,t),tte(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t,n,r){if(n){var o=e.createInlineCard("math",Kee.toLake(n),r);e.setNode(o)}}}])}($j);function ote(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,ite()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function ite(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ite=function(){return!!e})()}var ate=function(e){function t(){return(0,Ke.A)(this,t),ote(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){var n=((t.attrs||{}).value||{}).code;n&&e.append("$".concat(String(n).trim(),"$"))}}])}(YG);function lte(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,ute()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function ute(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ute=function(){return!!e})()}var cte=function(e){function t(){var e;return(0,Ke.A)(this,t),e=lte(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(rt);function ste(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,dte()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function dte(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(dte=function(){return!!e})()}Object.defineProperty(cte,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze("ITOCKernelService")});var fte=function(e){function t(){return(0,Ke.A)(this,t),ste(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t,n,r,o,i,a,l;e.registerInlineCard(eM.MATH.NODE_NAME),null===(t=e.getService(_S.ID))||void 0===t||t.registerLakeCardReader(eM.MATH.NODE_NAME,new Jee),null===(n=e.getService(RT.ID))||void 0===n||n.registerINodeCardReader(zee.CardName,new zee),null===(r=e.getService(wS.ID))||void 0===r||r.registerHTMLNodeReader(Uee.NodeNames,new Uee),null===(o=e.getService(_S.ID))||void 0===o||o.registerLakeCardWriter(eM.MATH.NODE_NAME,new rte),null===(i=e.getService(wS.ID))||void 0===i||i.registerNodeHTMLWriter(eM.MATH.NODE_NAME,new ete),null===(a=e.getService(EG.ID))||void 0===a||a.registerTextWriter([eM.MATH.NODE_NAME],new ate);var u=e.getService(cte.ID);null==u||u.registerCardToText(eM.MATH.NODE_NAME,(function(e){var t,n;return bt.fatal(e.nodeName===eM.MATH.NODE_NAME,"plugins/math/src/kernel/index.ts:70"),"$".concat((null===(n=null===(t=e.cardValue)||void 0===t?void 0:t.code)||void 0===n?void 0:n.trim())||"","$")})),null===(l=e.getService(DS.ID))||void 0===l||l.registerMarkdownMatcher(CS.whiteSpace,new _B(this.editing,"$",(function(e,t){var n,r=Ai.insertCardNode(e,e.newSelection([t]),eM.MATH.NODE_NAME,{code:null===(n=Go.getTextContent(e,t))||void 0===n?void 0:n.trim()}).cardNode;e.setSelection(e.newSelection(e.newRange(e.newPosition(r.parentNode,r.offset+1))))})))}}])}(ct);Object.defineProperty(fte,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:eM.MATH.PLUGIN_NAME});var hte=HR({pluginName:"thirdparty",cardName:"thirdparty",command:{linkToThirdparty:"linkToThirdparty"},cardSelect:{thirdparty:"thirdparty",bilibili:"bilibili",canva:"canva",juejin:"juejin",codepen:"codepen",figma:"figma",amap:"amap",jinshuju:"jinshuju",modao:"modao",music163:"music163",processon:"processon",ali:"ali",taobao:"taobao",xiami:"xiami",ximalaya:"ximalaya",youku:"youku",youtube:"youtube",yida:"yida",everest:"everest"}});function pte(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,vte()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function vte(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vte=function(){return!!e})()}var mte=function(e){function t(){return(0,Ke.A)(this,t),pte(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t,n){var r=e.newJob(),o=r.getNodeById(t);if(!o||"link"!==o.nodeName)return e.cancelJob(r),!1;var i=r.selectNode(o);i=wi.deleteContent(r,i),bt.fatal(i.collapsed,"plugins/thirdparty/src/kernel/commands/link-to-thirdparty-command.ts:31");var a=Ai.insertCardNode(r,i,"thirdparty",n).cardNode;r.setSelection([r.newRange(r.newPosition(a.parentNode,a.offset+1))]),e.commitJob(r)}}])}(gt);function gte(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,bte()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function bte(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bte=function(){return!!e})()}Object.defineProperty(mte,"ID",{enumerable:!0,configurable:!0,writable:!0,value:hte.command.linkToThirdparty});var yte=function(e){function t(){return(0,Ke.A)(this,t),gte(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Ij);function wte(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Ate()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Ate(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ate=function(){return!!e})()}Object.defineProperty(yte,"CardName",{enumerable:!0,configurable:!0,writable:!0,value:"thirdparty"});var kte=function(e){function t(){var e;return(0,Ke.A)(this,t),e=wte(this,t,arguments),Object.defineProperty(e,"_status",{enumerable:!0,configurable:!0,writable:!0,value:t.STATUS_PENDING}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){this.removeAllListeners()}},{key:"id",get:function(){return this._id}},{key:"abort",value:function(){}},{key:"getStatus",value:function(){return this._status}},{key:"isPending",value:function(){return this._status===t.STATUS_PENDING}},{key:"isRunning",value:function(){return this._status===t.STATUS_RUNNING}},{key:"isSuccess",value:function(){return this._status===t.STATUS_SUCCESS}},{key:"isAborted",value:function(){return this._status===t.STATUS_ABORTED}},{key:"isError",value:function(){return this._status===t.STATUS_ERROR}},{key:"isTimeout",value:function(){return this._status===t.STATUS_TIMEOUT}},{key:"isCompleted",value:function(){return this.isSuccess()||this.isError()||this.isAborted()}},{key:"emit",value:function(e){var n;switch(e){case t.EVENT_START:this._status=t.STATUS_RUNNING;break;case t.EVENT_SUCCESS:this._status=t.STATUS_SUCCESS;break;case t.EVENT_ERROR:this._status=t.STATUS_ERROR;break;case t.EVENT_ABORTED:this._status=t.STATUS_ABORTED;break;case t.EVENT_TIMEOUT:this._status=t.STATUS_TIMEOUT}for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return(n=Tr((0,Je.A)(t.prototype),"emit",this)).call.apply(n,[this,e].concat(o)),!1}},{key:"on",value:function(e,n){return e===t.EVENT_TIMEOUT&&this.isTimeout()?setTimeout((function(){n()}),100):Tr((0,Je.A)(t.prototype),"on",this).call(this,e,n),this}}])}(it);function _te(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Cte()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Cte(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Cte=function(){return!!e})()}Object.defineProperty(kte,"STATUS_PENDING",{enumerable:!0,configurable:!0,writable:!0,value:"pending"}),Object.defineProperty(kte,"STATUS_RUNNING",{enumerable:!0,configurable:!0,writable:!0,value:"running"}),Object.defineProperty(kte,"STATUS_SUCCESS",{enumerable:!0,configurable:!0,writable:!0,value:"success"}),Object.defineProperty(kte,"STATUS_ERROR",{enumerable:!0,configurable:!0,writable:!0,value:"error"}),Object.defineProperty(kte,"STATUS_ABORTED",{enumerable:!0,configurable:!0,writable:!0,value:"aborted"}),Object.defineProperty(kte,"STATUS_TIMEOUT",{enumerable:!0,configurable:!0,writable:!0,value:"timeout"}),Object.defineProperty(kte,"EVENT_START",{enumerable:!0,configurable:!0,writable:!0,value:"start"}),Object.defineProperty(kte,"EVENT_PROGRESS",{enumerable:!0,configurable:!0,writable:!0,value:"progress"}),Object.defineProperty(kte,"EVENT_SUCCESS",{enumerable:!0,configurable:!0,writable:!0,value:"success"}),Object.defineProperty(kte,"EVENT_ERROR",{enumerable:!0,configurable:!0,writable:!0,value:"error"}),Object.defineProperty(kte,"EVENT_ABORTED",{enumerable:!0,configurable:!0,writable:!0,value:"aborted"}),Object.defineProperty(kte,"EVENT_TIMEOUT",{enumerable:!0,configurable:!0,writable:!0,value:"timeout"});var Nte={parallel:5},Ote=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=_te(this,t),Object.defineProperty(n,"_options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_taskIds",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(n,"_tasks",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(n,"_completedTasks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(n,"_runningTasks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(n,"_pendingTasks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(n,"_failureTasks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),n._options=Object.assign(Object.assign({},Nte),e),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"hasTask",value:function(e){return this._taskIds.has(e)}},{key:"getTask",value:function(e){return this._tasks[e]}},{key:"isCompleted",value:function(){return this._pendingTasks.length+this._runningTasks.length===0}},{key:"addTask",value:function(e){var t=this;this._taskIds.add(e.id),this._pendingTasks.push(e),this._tasks[e.id]=e,setTimeout((function(){t._checkFinish()}),100)}},{key:"_checkFinish",value:function(){var e=this._pendingTasks.length,t=this._runningTasks.length;0!==e||0!==t?e>0&&t<this._options.parallel&&this._runTask(this._pendingTasks.shift()):this._finish()}},{key:"_runTask",value:function(e){this._runningTasks.push(e),this._updateProgress(),function(e,t,n,r){new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,Cc().mark((function t(){return Cc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.run();case 2:setTimeout((function(){e.destroy()}),1e4),t.t0=e.getStatus(),t.next=t.t0===kte.STATUS_SUCCESS?6:t.t0===kte.STATUS_ERROR||t.t0===kte.STATUS_ABORTED?8:10;break;case 6:return this._handleSuccess(e),t.abrupt("break",11);case 8:return this._handleFailure(e),t.abrupt("break",11);case 10:bt("invalid task status","framework/infra/src/task-manager/task-thread.ts:96");case 11:case"end":return t.stop()}}),t,this)})))}},{key:"_updateProgress",value:function(){var e=this._completedTasks.length,t=this._runningTasks.length,n=this._pendingTasks.length,r=this._failureTasks.length;this.emit("progress",{completed:e,running:t,pending:n,failure:r,total:e+t+n})}},{key:"_handleSuccess",value:function(e){var t=this._runningTasks.indexOf(e);-1!==t&&this._runningTasks.splice(t,1),this._completedTasks.push(e),this._updateProgress(),this._checkFinish()}},{key:"_handleFailure",value:function(e){var t=this._runningTasks.indexOf(e);-1!==t&&this._runningTasks.splice(t,1),this._failureTasks.push(e),this._updateProgress(),this._checkFinish()}},{key:"_finish",value:function(){}},{key:"_destroy",value:function(){this.removeAllListeners()}}])}(it);function xte(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Ete()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Ete(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ete=function(){return!!e})()}var Dte=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=xte(this,t),Object.defineProperty(n,"_threadOptions",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(n,"_thread",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"_id",{enumerable:!0,configurable:!0,writable:!0,value:""}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){this.removeAllListeners()}},{key:"reset",value:function(e){this._id=e}},{key:"hasTask",value:function(e){return!!this._thread&&this._thread.hasTask(e)}},{key:"getTask",value:function(e){return this._thread?this._thread.getTask(e):null}},{key:"addTask",value:function(e){return this._thread||(this._thread=this._createThread()),this._thread.addTask(e),e}},{key:"isCompleted",value:function(){return!this._thread||this._thread.isCompleted()}},{key:"_createThread",value:function(){var e=this,t=new Ote(this._threadOptions);return t.on("start",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.emit.apply(e,["start"].concat(n))})),t.on("progress",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.emit.apply(e,["progress"].concat(n))})),t.on("finished",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.emit.apply(e,["finished"].concat(n)),e._thread=null})),t}}])}(it);function Pte(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Rte()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Rte(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Rte=function(){return!!e})()}var Ste=function(e){function t(e,n,r){var o;return(0,Ke.A)(this,t),o=Pte(this,t),Object.defineProperty(o,"_clientId",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(o,"_clientAliveChecker",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(o,"_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_checkTimer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),o._id=e,o._startCheck(),o}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){window.clearTimeout(this._checkTimer),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}},{key:"_startCheck",value:function(){this._clientId&&this._runCheck(3)}},{key:"_runCheck",value:function(e){var t=this;e<=0?this._timeout():this._checkTimer=window.setTimeout((function(){t._clientAliveChecker&&t._clientId&&(t._clientAliveChecker(t._clientId)||t._runCheck(e-1))}),1e3)}},{key:"getResourceURL",value:function(){return null}},{key:"run",value:function(){return new Promise((function(){}))}},{key:"_timeout",value:function(){this.emit("timeout")}}])}(kte),Tte=function(){return(0,$e.A)((function e(t,n){(0,Ke.A)(this,e),Object.defineProperty(this,"_taskManager",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_taskAliveChecker",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"_virtualTasks",{enumerable:!0,configurable:!0,writable:!0,value:{}})}),[{key:"destroy",value:function(){this._taskManager=null,this._virtualTasks=null}},{key:"observe",value:function(e,t){if(this._taskManager.hasTask(e))return this._taskManager.getTask(e);if(this._virtualTasks[e])return this._virtualTasks[e];var n=new Ste(e,t,this._taskAliveChecker);return this._virtualTasks[e]=n,n}}])}(),jte=null;function Ite(e){jte||(jte=new DOMParser);try{var t=jte.parseFromString(e,"text/html");if(!t.body)return null;var n=t.body.firstChild;if("IFRAME"!==(null==n?void 0:n.nodeName))return null;if(n)return n.src.startsWith("//")?"http:"+n.src:n.src}catch(e){return null}return null}var Bte="audio",Mte="video",Fte="design",Lte="development",Ute=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"getType",value:function(){return this.prototype.constructor.config.type}},{key:"isAvailable",value:function(){return!1!==this.prototype.constructor.config.available}},{key:"getName",value:function(){return this.prototype.constructor.config.name}},{key:"getExample",value:function(){return this.prototype.constructor.config.example}},{key:"getHelp",value:function(){return this.prototype.constructor.config.help}},{key:"getSimple",value:function(){return this.prototype.constructor.config.simple}},{key:"getLabel",value:function(){return this.prototype.constructor.config.label}},{key:"getKeywords",value:function(){return[]}},{key:"getHeight",value:function(){return this.prototype.constructor.config.height||500}},{key:"getResize",value:function(){return this.prototype.constructor.config.resize}},{key:"getMaximize",value:function(){return this.prototype.constructor.config.maximize}},{key:"getCardSelect",value:function(){var e=this.prototype.constructor,t=e.config,n=e.getKeywords,r=e.getMainSearch,o=n(),i=null==r?void 0:r(),a={type:"TextItem",icon:"card-".concat(t.name),label:t.label,name:t.name,keywords:Array.isArray(o)?o.join(","):o,recordDisable:!0};return i?Object.assign(Object.assign({},a),{mainSearch:i}):a}},{key:"getMatchUrl",value:function(e){}},{key:"isValid",value:function(e){}},{key:"getPlaceholder",value:function(){var e=this.prototype.constructor.config,t=e.label,n=void 0===t?"":t,r=e.simple,o=/^[a-z]+$/i.test(n)?" ".concat(n," "):n,i="".concat(sc("粘贴")).concat(o).concat(sc("链接"));return r&&(i+="，".concat(sc("如")," ").concat(r)),i}},{key:"getIframeAllow",value:function(e){return null}}])}();function Vte(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Hte()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Hte(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Hte=function(){return!!e})()}Object.defineProperty(Ute,"config",{enumerable:!0,configurable:!0,writable:!0,value:{}});var zte=/^(https:\/\/(?:pd|antpim|product)\.alipay\.com\/)(#\/)?(tech\/prod)\/(view|fullview)\/(\S+)$/,Wte=[{id:"riddle",name:"Riddle",domain:["https://riddle.alibaba-inc.com/"],urlPattern:[/^https:\/\/riddle\.alibaba-inc\.com\/riddles\/.+/],toEmbedUrl:function(e){if(e.includes("/iframe"))return e;var t=new URL(e);return t.pathname.endsWith("/iframe")||(t.pathname+="/iframe"),t.toString()}},{id:"deepinsight",name:"DeepInsight",domain:["https://deepinsight.alipay.com/","https://alisis.alipay.com/","https://datainsight.alipay.com/","https://deepinsight.alibaba-inc.com/","https://alisis.alibaba-inc.com/","https://datainsight.alibaba-inc.com/"],urlPattern:[/^https:\/\/(deepinsight|alisis|datainsight)\.(alipay|alibaba-inc)\.com\/(pc|mobile|view|assets)\.htm\?reportId=[^\/]+/]},{id:"openbox",name:"Openbox",domain:["https://herbox-embed.alipay.com/","https://herbox.online/","https://opendocs.antfin-inc.com/","https://opendocs.alipay.com/"],urlPattern:[/^https:\/\/herbox\.online\/p\/.+/,/^https:\/\/herbox-embed\.alipay\.com\/s\/.+/,/^https:\/\/herbox-embed\.alipay\.com\/p\/.+/,/^https:\/\/opendocs.antfin-inc.com\/openbox\/mini\/[a-zA-Z0-9_-]+\/[a-zA-Z0-9_-]+/,/^https:\/\/opendocs.alipay.com\/openbox\/mini\/[a-zA-Z0-9_-]+\/[a-zA-Z0-9_-]+/]},{id:"anymock",name:"Anymock",domain:["https://tools.antfin-inc.com/"],urlPattern:[],toEmbedUrl:function(e){if(!window.location.pathname.endsWith("/edit"))return e;var t=new URL(e);return t.searchParams.set("edit","1"),t.toString()}},{id:"fbi",name:"FBI",domain:["https://fbi.alibaba-inc.com/","https://quark.alibaba-inc.com/","https://fbi-sg.alibaba-inc.com/","https://quark.alibaba.com/","https://sg.fbi.alibaba-inc.com/"],urlPattern:[]},{id:"oneapi",name:"OneAPI",domain:["https://oneapi.alipay.com/"],urlPattern:[/^https:\/\/oneapi\.alipay\.com\/web\/app\/card\//]},{id:"tinyjs",name:"Tinyjs",domain:["http://tinyjs.alibaba.net/"],urlPattern:[/^http:\/\/tinyjs\.alibaba\.net\/static\/(examples|plugins|playground)\//]},{id:"youshu",name:"Youshu",domain:["https://youshu.alibaba-inc.com/"],urlPattern:[/^https:\/\/youshu\.alibaba-inc\.com\/visual\/cardview\.htm/]},{id:"bakery",name:"Bakery",domain:["https://bakery.alipay.com/"],urlPattern:[/^https:\/\/bakery\.alipay\.com\/bakery-preview/,/^https:\/\/bakery\.alipay\.com\/bakery-preview\/miniapp/,/^https:\/\/bakery\.alipay\.com\/bakery-preview\/yuque/]},{id:"pipcook",name:"Pipcook",domain:["https://pipcook.alibaba-inc.com/"],urlPattern:[]},{id:"cap",name:"Cap",domain:["https://cap.alibaba-inc.com","https://c-data.alibaba-inc.com"],urlPattern:[/^https:\/\/cap\.alibaba-inc\.com\?bizLine=(.+)#\!\/dimension\/viewport(\S{0,2048})$/,/^https:\/\/cap\.alibaba-inc\.com\?bizLine=(.+)#\!\/dimension\/form(\S{0,2048})$/,/^https:\/\/c-data\.alibaba-inc\.com\/dimension\/viewport\?bizLine=(\S{0,2048})$/,/^https:\/\/c-data\.alibaba-inc\.com\/dimension\/form\?bizLine=(\S{0,2048})$/]},{id:"dataphin",name:"Dataphin",domain:["https://dataphin.alipay.com/"],urlPattern:[]},{id:"ifcriskmatrixus",name:"Ifcriskmatrixus",domain:["https://ifcriskmatrixus.alipay.com/"],urlPattern:[/^https:\/\/ifcriskmatrixus\.alipay\.com\/horizon\.htm#\/doc\//]},{id:"DONE",name:"done",domain:["https://done.alibaba-inc.com/"],urlPattern:[/^https:\/\/done\.alibaba-inc\.com\/file\/[^\/]{5,30}\/[^\/]{5,30}\/preview/,/^https:\/\/done\.alibaba-inc\.com\/share\/file\/[^\/]{5,30}/]},{id:"LOG",name:"log",domain:["https://log.alipay.com/"],urlPattern:[/^https:\/\/log\.alipay\.com\/index_v4\.htm#\/iterationDetail/]},{id:"ALEX",name:"alex",domain:["https://alex.alipay.com/"],urlPattern:[/^https:\/\/alex\.alipay\.com\/./]},{id:"Langya",name:"langya",domain:["https://langya.alibaba-inc.com/"],urlPattern:[/^https:\/\/langya\.alibaba-inc\.com\/prd/]},{id:"cpxq",name:"产品星球",domain:["https://pd.alipay.com/","https://product.alipay.com/","https://antpim.alipay.com/"],urlPattern:[zte,/^https:\/\/pd\.alipay\.com\/product\/releasenote\?/],toEmbedUrl:function(e){return e.replace(zte,(function(e,t,n,r,o,i){return t+r+"/fullview/"+i}))}},{id:"smallfish",name:"SmallFish",domain:["https://smallfish.antfin-inc.com/"],urlPattern:[/^https:\/\/smallfish\.antfin-inc\.com\/(myapi|jsapi)\/.*?\.html($|\?|#)/i],toEmbedUrl:function(e){try{var t=new URL(e);return t.search="embedded=1",t.toString()}catch(e){return null}}},{id:"easyapi",name:"EasyApi",domain:["https://easy-api.alibaba-inc.com/","https://easy-api.alibaba.net/"],urlPattern:[/^https:\/\/easy-api\.alibaba-inc\.com\/interface\//i,/^https:\/\/easy-api\.alibaba\.net\/interface\//i,/^https:\/\/easy-api\.alibaba-inc\.com\/diff/i,/^https:\/\/easy-api\.alibaba\.net\/diff/i]},{id:"cainiaoui",name:"CaiNiaoUI",domain:["https://cn.alicdn.com/"],urlPattern:[/^https:\/\/cn\.alicdn\.com\/lib\/cn-ui\//i]},{id:"sinan",name:"sinan",domain:["https://sn.alipay.com/"],urlPattern:[/^https:\/\/sn\.alipay\.com\/archcompass\/card\//i]},{id:"wanxiangapi",name:"WanXiangAPI",domain:["https://everything.amap.com/"],urlPattern:[/^https:\/\/everything\.amap\.com\/ApiManage\/list_api\/[^\/]+\/[^\/]+\/detail_api_compact/]},{id:"hybrid",name:"Hybrid",domain:["https://hybrid.antfin-inc.com/"],urlPattern:[/^https:\/\/hybrid\.antfin-inc\.com\/iframe\/preview/i,/^https:\/\/hybrid\.antfin-inc\.com\/preview\/widget/i]},{id:"aistudio",name:"AIStudio",domain:["https://aistudio.alipay.com/"],urlPattern:[/^https:\/\/aistudio\.alipay\.com\/libro\/shared/i]},{id:"dafu",name:"Dafu",domain:["https://dafu.alipay.com"],urlPattern:[/^https:\/\/dafu\.alipay\.com\/riskManageProduction\/riskReport\/work/,/^https:\/\/dafu\.alipay\.com\/riskManageProduction\/riskReport\/[0-9]+/,/^https:\/\/dafu\.alipay\.com\/riskManageProduction\/riskDeployPlan\/work/,/^https:\/\/dafu\.alipay\.com\/riskManageProduction\/riskDeployPlan\/[0-9]+/]},{id:"iablityfactory",name:"IAbilityFactory",domain:["https://iabilityfactoryfront.alipay.com"],urlPattern:[/^https:\/\/iabilityfactoryfront\.alipay\.com\/production/]},{id:"utm",name:"UTM",domain:["https://tools.antfin-inc.com"],urlPattern:[/^https:\/\/tools\.antfin-inc\.com\/utm/]},{id:"hitu",name:"Hitu",domain:["https://hitu.antgroup-inc.cn"],urlPattern:[/^https:\/\/hitu\.antgroup-inc\.cn\/codeblocks\/\w+\?embed=true/]},{id:"urltoolkit",name:"UrlToolKit",domain:["https://alipays.antgroup-inc.cn"],urlPattern:[/^https:\/\/alipays\.antgroup-inc\.cn\/url-toolkit\/simple\/record\?urlSchemeId=\d+/]}];function qte(e){return e?Wte.find((function(t){return!!t.domain.find((function(t){return e.startsWith(t)}))})):null}var $te=function(e){function t(){return(0,Ke.A)(this,t),Vte(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,null,[{key:"getMainSearch",value:function(){return"/nbdsfgj"}},{key:"getKeywords",value:function(){return[sc("内部三方工具"),Wte.map((function(e){return e.name})),"neibudisanfanggongju"]}},{key:"getPlaceholder",value:function(){var e,t=(e=sc("、"),Wte.map((function(e){return e.name})).join(e));return"".concat(sc("粘贴页面链接到此处，支持：")).concat(t)}},{key:"isValid",value:function(e){var t=qte(e);return!!t&&(!(t.urlPattern.length>0)||t.urlPattern.some((function(t){return t.test(e)})))}},{key:"getMatchUrl",value:function(e){if((null==e?void 0:e.startsWith("<iframe"))&&(e=Ite(e)),!t.isValid(e))return null;var n=qte(e);return n?("function"==typeof n.toEmbedUrl&&(e=n.toEmbedUrl(e)),e):null}},{key:"getIframeAllow",value:function(e){var t=qte(e);return t&&"riddle"===t.id?"clipboard-write https://riddle.alibaba-inc.com;":null}}])}(Ute);function Kte(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Yte()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Yte(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Yte=function(){return!!e})()}Object.defineProperty($te,"config",{enumerable:!0,configurable:!0,writable:!0,value:{type:Lte,name:"ali",example:null,simple:null,help:"https://yuque.antfin.com/lark/help/embed_third#FhgMF",get label(){return sc("内部三方工具")},maximize:!0,resize:!0}});var Gte=["https://map.gaode.com/","https://ditu.gaode.com/","https://www.gaode.com/","https://www.amap.com/","https://ditu.amap.com/","https://amap.com/","https://gaode.com/"],Jte=function(e){function t(){return(0,Ke.A)(this,t),Kte(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,null,[{key:"getMainSearch",value:function(){return"/gddt"}},{key:"getKeywords",value:function(){return["gaode","ditu","amap","高德","地图","gd","gaodeditu"]}},{key:"isValid",value:function(e){if(!e)return!1;for(var t=0,n=Gte.length;t<n;t++)if(e.startsWith(Gte[t]))return!0;return!1}},{key:"getMatchUrl",value:function(e){return t.isValid(e)?e:null}}])}(Ute);function Xte(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Qte()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Qte(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Qte=function(){return!!e})()}Object.defineProperty(Jte,"config",{enumerable:!0,configurable:!0,writable:!0,value:{type:"map",name:"amap",example:"https://ditu.amap.com/",simple:"https://ditu.amap.com…",get label(){return sc("高德地图")},maximize:!0,resize:!0}});var Zte=function(e){function t(){return(0,Ke.A)(this,t),Xte(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,null,[{key:"getMainSearch",value:function(){return"/blbl"}},{key:"getKeywords",value:function(){return[t.getName(),"bi","哔哩哔哩","bilibili"]}},{key:"getMatchUrl",value:function(e){var n=t._getMatchUrl(e);if(n)try{var r=new URL(n);r.searchParams.set("autoplay","0"),n=r.toString()}catch(e){}return n}},{key:"_getMatchUrl",value:function(e){if((null==e?void 0:e.startsWith("<iframe"))&&(e=Ite(e)),null==e?void 0:e.startsWith("https://player.bilibili.com/player.html?"))return e;if(null==e?void 0:e.startsWith("http://player.bilibili.com/player.html?"))return e.replace(/^http:/i,"https:");var t=null==e?void 0:e.match(/^https?:\/\/\w+\.bilibili\.com\/video\/av(\d+)/i);if(t){var n=t[1],r=e.match(/p=(\d+)/),o=null;return r&&(o=r[1]),"https://player.bilibili.com/player.html?aid=".concat(n).concat(o?"&p=".concat(o,"&page=").concat(o):"")}try{var i=new URL(e),a=(i.origin+i.pathname).match(/^https?:\/\/\w+\.bilibili\.com\/video\/(bv[^/]+)\/?$/i);if(a){var l=a[1],u=i.searchParams,c=u.get("p"),s=u.get("t");return"https://player.bilibili.com/player.html?bvid=".concat(l).concat(c?"&p=".concat(c,"&page=").concat(c):"").concat(s?"&t=".concat(s):"")}}catch(e){}return null}},{key:"isValid",value:function(e){return e&&e.match(/^https:\w+\.bilibili\.com\//)}}])}(Ute);function ene(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,tne()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function tne(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(tne=function(){return!!e})()}Object.defineProperty(Zte,"config",{enumerable:!0,configurable:!0,writable:!0,value:{type:Mte,name:"bilibili",example:"https://player.bilibili.com/player.html?aid=55895675",simple:"https://www.bilibili.com…",get label(){return sc("哔哩哔哩")},maximize:!1,resize:!1}});var nne=/^(https?:\/\/[\S]+?\.canva\.cn\/design\/)((?:[^/]+\/)+)(view|edit|watch)$/i,rne=function(e){function t(){return(0,Ke.A)(this,t),ene(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,null,[{key:"getMainSearch",value:function(){return"/can"}},{key:"getKeywords",value:function(){return[t.getName(),"canva"]}},{key:"getMatchUrl",value:function(e){var t=e;try{t=new URL(t)}catch(e){return null}t=t.origin+t.pathname;var n=nne.exec(t);if(n&&n[2]){var r=n[2].split("/"),o=n[2];r.length>1&&r[0]&&(o=r[0]+"/");var i="edit"===n[3]?"view":n[3];return n[1]+o+i+"?embed"}return null}},{key:"isValid",value:function(e){return e&&e.match(/^https:\/\/[\w_-~.]+?\.canva\.cn\//)}}])}(Ute);function one(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,ine()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function ine(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ine=function(){return!!e})()}Object.defineProperty(rne,"config",{enumerable:!0,configurable:!0,writable:!0,value:{type:Fte,name:"canva",example:"https://www.canva.cn/design/DAD3c63mhHU/view?embed",simple:"https://www.canva.cn/design/…",label:"Canva",maximize:!0,resize:!0}});var ane=[/^https:\/\/codepen\.io\/[^/]+\/(embed|pen|full)\//],lne=function(e){function t(){return(0,Ke.A)(this,t),one(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,null,[{key:"getMainSearch",value:function(){return"/cod"}},{key:"getKeywords",value:function(){return[t.getName(),"codepen"]}},{key:"isValid",value:function(e){return ane.some((function(t){return t.test(e)}))}},{key:"getMatchUrl",value:function(e){return e?(e.startsWith("<iframe")&&(e=Ite(e)),t.isValid(e)?e.replace("/pen/","/embed/"):null):null}}])}(Ute);function une(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,cne()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function cne(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(cne=function(){return!!e})()}Object.defineProperty(lne,"config",{enumerable:!0,configurable:!0,writable:!0,value:{type:Lte,name:"codepen",example:"https://codepen.io/afc163-1472555193/embed/oNXqWGP",simple:"https://codepen.io/afc163…",label:"CodePen",maximize:!0,resize:!0}});var sne=function(e){function t(){return(0,Ke.A)(this,t),une(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,null,[{key:"getMainSearch",value:function(){return t.getName()}},{key:"getKeywords",value:function(){return[t.getName()]}},{key:"isValid",value:function(e){return null==e?void 0:e.startsWith("https://everest.aliyun-inc.com/open/api/")}},{key:"getMatchUrl",value:function(e){return e?(e.startsWith("<iframe")&&(e=Ite(e)),t.isValid(e)?e:null):null}}])}(Ute);function dne(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,fne()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function fne(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(fne=function(){return!!e})()}Object.defineProperty(sne,"config",{enumerable:!0,configurable:!0,writable:!0,value:{type:Lte,name:"everest",example:"https://everest.aliyun-inc.com/open/api/alicloud_drawio_ppt/anonymous/1234/0.1/en.html",simple:"https://everest.aliyun-inc.com/open/api/...",label:"everest",maximize:!0,resize:!0}});var hne=[/^https:\/\/www\.figma\.com\/embed/],pne=function(e){function t(){return(0,Ke.A)(this,t),dne(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,null,[{key:"getMainSearch",value:function(){return"/fig"}},{key:"getKeywords",value:function(){return[t.getName(),"figma"]}},{key:"isValid",value:function(e){return hne.some((function(t){return t.test(e)}))}},{key:"getMatchUrl",value:function(e){return e?(e.startsWith("<iframe")?e=Ite(e):(null==e?void 0:e.match(/^https:\/\/www\.figma\.com\/(file|proto)\//))&&(e="https://www.figma.com/embed?embed_host=share&url="+encodeURIComponent(e)),t.isValid(e)?e:null):null}}])}(Ute);function vne(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,mne()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function mne(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mne=function(){return!!e})()}Object.defineProperty(pne,"config",{enumerable:!0,configurable:!0,writable:!0,value:{type:Fte,name:"figma",example:"https://www.figma.com/embed?embed_host=share&url=https%3A%2F%2Fwww.figma.com%2Ffile%2FqwccoVDBmt1FZ6U4eGus2p%2F%25E8%25AF%25AD%25E9%259B%2580%25E6%258F%2592%25E5%259B%25BE",simple:"https://www.figma.com…",label:"Figma",maximize:!0,resize:!0}});var gne="?background=white&banner=show&embedded=true&inner_redirect=true",bne=function(e){function t(){return(0,Ke.A)(this,t),vne(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,null,[{key:"getMainSearch",value:function(){return"/jsj"}},{key:"getKeywords",value:function(){return[t.getName(),"jsj",t.getLabel()]}},{key:"isValid",value:function(e){return e&&e.match(/^https:\/\/([^/]+\.)?jinshuju\.(com|net)\//)}},{key:"getMatchUrl",value:function(e){var n,r=!1;if(!e)return null;if(e.startsWith("<iframe")&&(e=Ite(e),r=!0),!t.isValid(e))return null;try{n=new URL(e)}catch(e){return null}var o=n,i=o.pathname,a=o.origin;return i.startsWith("/f/")?r?e:a+i+gne:/^\/forms\/([^/]+)(?:\/[^/]*)?$/.test(i)?a+"/f/"+RegExp.$1+gne:null}}])}(Ute);function yne(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,wne()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function wne(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wne=function(){return!!e})()}Object.defineProperty(bne,"config",{enumerable:!0,configurable:!0,writable:!0,value:{type:"form",name:"jinshuju",example:null,simple:"https://jinshuju.net/f/…",get label(){return sc("金数据")},maximize:!0,resize:!0}});var Ane=function(e){function t(){return(0,Ke.A)(this,t),yne(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,null,[{key:"getMainSearch",value:function(){return"/msjj"}},{key:"getKeywords",value:function(){return[t.getName(),t.getLabel(),"jcode","jj","code","码上掘金"]}},{key:"isValid",value:function(e){return e.match(/^https:\/\/code\.juejin\.cn\/pen\//)}},{key:"getMatchUrl",value:function(e){if(!e)return null;if(!t.isValid(e))return null;try{var n=new URL(e);return"true"!==n.searchParams.get("embed")&&n.searchParams.set("embed","true"),n.toString()}catch(e){return console.error(e),null}}}])}(Ute);function kne(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,_ne()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function _ne(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_ne=function(){return!!e})()}Object.defineProperty(Ane,"config",{enumerable:!0,configurable:!0,writable:!0,value:{type:Lte,name:"juejin",example:"https://code.juejin.cn/pen/7111233570496053255",simple:"https://code.juejin.cn/pen/...",get label(){return sc("码上掘金")},maximize:!1,resize:!1}});var Cne=["https://free.modao.cc/app/","https://org.modao.cc/","https://modao.cc/","https://orgnext.modao.cc"],Nne=["https://free.modao.cc/app/design/"],One=function(e){function t(){return(0,Ke.A)(this,t),kne(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,null,[{key:"getMainSearch",value:function(){return"/md"}},{key:"getKeywords",value:function(){return[t.getName(),t.getLabel(),"md","modao"]}},{key:"isValid",value:function(e){if(!e)return!1;for(var t=0,n=Nne.length;t<n;t++)if(e.startsWith(Nne[t]))return!1;for(var r=0;r<Cne.length;r++){var o=Cne[r];if(e.startsWith(o))return!0}return!1}},{key:"getMatchUrl",value:function(e){if(!e)return null;if(e.startsWith("<iframe")&&(e=Ite(e)),t.isValid(e)){var n=new URL(e,Cne[2]);return e=n.origin+n.pathname,n.pathname.startsWith("/app/")&&(e.endsWith("embed")?e=e.replace("embed","embed/v2"):e.endsWith("/embed/v2")||(e+="/embed/v2")),e+n.hash}}}])}(Ute);function xne(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Ene()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Ene(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ene=function(){return!!e})()}Object.defineProperty(One,"config",{enumerable:!0,configurable:!0,writable:!0,value:{type:Fte,name:"modao",example:"https://free.modao.cc/app/2cd26580a6717a147454df7470e7ec464093cba3/embed/v2#screen=sk71k6d1dfxulzx",simple:"<iframe src=…",get label(){return sc("墨刀")},maximize:!0,resize:!0}});var Dne=/^https?:\/\/music\.163\.com\/(#\/)?song\?id\=(\d+)/i,Pne=/(https?:\/\/y\.music\.163\.com\/m\/song\?(\S*))/i,Rne=function(e){function t(){return(0,Ke.A)(this,t),xne(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,null,[{key:"getMainSearch",value:function(){return"/wyyyy"}},{key:"getKeywords",value:function(){return[t.getName(),t.getLabel(),"wangyiyunyinyue","wy"]}},{key:"isValid",value:function(e){return e.startsWith("http://music.163.com/outchain/player")||e.startsWith("https://music.163.com/outchain/player")}},{key:"getMatchUrl",value:function(e){if(!e)return null;if(e.startsWith("<iframe"))e=(e=Ite(e))&&e.replace("auto=1&","&auto=0&");else if(Dne.test(e))e="https://music.163.com/outchain/player?type=2&id=".concat(RegExp.$2,"&auto=0&height=66");else if(Pne.test(e)){var n=RegExp.$1;try{var r=new URL(n).searchParams.get("id");r&&(e="https://music.163.com/outchain/player?type=2&id=".concat(r,"&auto=0&height=66"))}catch(e){}}return t.isValid(e)?e:null}}])}(Ute);function Sne(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Tne()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Tne(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Tne=function(){return!!e})()}Object.defineProperty(Rne,"config",{enumerable:!0,configurable:!0,writable:!0,value:{type:Bte,name:"music163",simple:"https://music.163.com/song…",example:"https://music.163.com/outchain/player?type=2&id=1420830402&auto=0&height=66",get label(){return sc("网易云音乐")},maximize:!1,resize:!1}});var jne=["www.processon.com","wxmp.processon.com","assets.processon.com","dingtalk.processon.com","feishu.processon.com","weixin.processon.com"],Ine=["/view/link/","/embed/"],Bne=function(e){function t(){return(0,Ke.A)(this,t),Sne(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,null,[{key:"getMainSearch",value:function(){return"/pro"}},{key:"getKeywords",value:function(){return[t.getName(),"processon"]}},{key:"isValid",value:function(e){try{var t=new URL(e),n=t.protocol,r=t.host,o=t.pathname;return("http:"===n||"https:"===n)&&!!jne.includes(r)&&Ine.some((function(e){return o.startsWith(e)}))}catch(e){return!1}}},{key:"getMatchUrl",value:function(e){if((null==e?void 0:e.startsWith("<iframe"))&&(e=Ite(e)),!e)return null;try{var n=new URL(e),r=n.pathname;["/mindmap/","/diagraming/","/apps/"].every((function(e){return r.startsWith(e)&&(n.pathname="/embed/"+n.pathname.slice(e.length)),!0}));var o=n.toString();return t.isValid(o)?o:null}catch(e){return null}}}])}(Ute);function Mne(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Fne()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Fne(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Fne=function(){return!!e})()}Object.defineProperty(Bne,"config",{enumerable:!0,configurable:!0,writable:!0,value:{type:Fte,name:"processon",example:"https://www.processon.com/embed/5d006c43e4b071ad5a206ed2",simple:"https://www.processon.c…",label:"ProcessOn",maximize:!0,resize:!0}});var Lne=function(e){function t(){return(0,Ke.A)(this,t),Mne(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,null,[{key:"getMainSearch",value:function(){return"/tbsp"}},{key:"getKeywords",value:function(){return[t.getName(),t.getLabel(),"tb","taobaoshipin"]}},{key:"isValid",value:function(e){return null==e?void 0:e.startsWith("https://cloud.video.taobao.com/")}},{key:"getMatchUrl",value:function(e){return t.isValid(e)?e:null}}])}(Ute);function Une(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Vne()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Vne(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Vne=function(){return!!e})()}Object.defineProperty(Lne,"config",{enumerable:!0,configurable:!0,writable:!0,value:{type:Mte,name:"taobao",example:null,simple:"https://cloud.video.taobao.com…",get label(){return sc("淘宝视频")},maximize:!1,resize:!1}});var Hne=/https?:\/\/\S*\.xiami\.com\/song\/([^/?#]+)/,zne=function(e){function t(){return(0,Ke.A)(this,t),Une(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,null,[{key:"getMainSearch",value:function(){return"/xm"}},{key:"getKeywords",value:function(){return[t.getName(),t.getLabel(),"xm"]}},{key:"isValid",value:function(e){return e.startsWith("https://h5.xiami.com/app")||e.startsWith("http://h5.xiami.com/app")||e.startsWith("https://www.xiami.com/webapp/")}},{key:"getMatchUrl",value:function(e){return e?(e.startsWith("<iframe")?e=(e=Ite(e))&&e.replace("autoPlay=1&",""):Hne.test(e)&&(e="https://www.xiami.com/webapp/embed-player?id="+RegExp.$1),t.isValid(e)?e:null):null}}])}(Ute);function Wne(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,qne()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function qne(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qne=function(){return!!e})()}Object.defineProperty(zne,"config",{enumerable:!0,configurable:!0,writable:!0,value:{type:Bte,name:"xiami",available:!1,example:"https://www.xiami.com/webapp/embed-player?id=1816059093",simple:"https://xiami.com/song/181…",get label(){return sc("虾米")},maximize:!1,resize:!1}});var $ne=function(e){function t(){return(0,Ke.A)(this,t),Wne(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,null,[{key:"getCardSelect",value:function(){return null}},{key:"isValid",value:function(e){return e.startsWith("http://www.ximalaya.com/thirdparty/player/sound/")||e.startsWith("https://www.ximalaya.com/thirdparty/player/sound/")}},{key:"getMatchUrl",value:function(e){return e?(e.startsWith("<iframe")&&(e=Ite(e)),t.isValid(e)?e:null):null}}])}(Ute);function Kne(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Yne()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Yne(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Yne=function(){return!!e})()}Object.defineProperty($ne,"config",{enumerable:!0,configurable:!0,writable:!0,value:{type:Bte,name:"ximalaya",example:null,maximize:!1,resize:!1}});var Gne=[/^https:\/\/[\w-_~]+?\.aliwork\.com\/o\/.+/],Jne=function(e){function t(){return(0,Ke.A)(this,t),Kne(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,null,[{key:"getMainSearch",value:function(){return"/yd"}},{key:"getKeywords",value:function(){return[t.getName(),"yida","yd"]}},{key:"isValid",value:function(e){return Gne.some((function(t){return t.test(e)}))}},{key:"getMatchUrl",value:function(e){return e?(e.startsWith("<iframe")&&(e=Ite(e)),t.isValid(e)?e:null):null}}])}(Ute);function Xne(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Qne()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Qne(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Qne=function(){return!!e})()}Object.defineProperty(Jne,"config",{enumerable:!0,configurable:!0,writable:!0,value:{type:Lte,name:"yida",example:"https://www.aliwork.com/o/open_test1",simple:"https://www.aliwork.com/o/open_test1",get label(){return sc("宜搭")},maximize:!0,resize:!0}});var Zne=function(e){function t(){return(0,Ke.A)(this,t),Xne(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,null,[{key:"getMainSearch",value:function(){return"/yk"}},{key:"getKeywords",value:function(){return[t.getName(),t.getLabel(),"yk","youku"]}},{key:"isValid",value:function(e){return e.match(/^https:.*\.youku\.com\//)}},{key:"getMatchUrl",value:function(e){if(!e)return null;if(e.startsWith("<iframe")&&(e=Ite(e)),null==e?void 0:e.startsWith("https://player.youku.com/embed/"))return e;var t=null==e?void 0:e.match(/^https?:\/\/\w+\.youku\.com\/v_show\/id_([^.]+)/i);return t?"https://player.youku.com/embed/".concat(t[1]):null}}])}(Ute);function ere(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,tre()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function tre(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(tre=function(){return!!e})()}Object.defineProperty(Zne,"config",{enumerable:!0,configurable:!0,writable:!0,value:{type:Mte,name:"youku",example:"https://player.youku.com/embed/XNDc1NDU1MTQwOA==",simple:"https://v.youku.com/v_show…",get label(){return sc("优酷")},maximize:!1,resize:!1}});var nre=function(e){function t(){return(0,Ke.A)(this,t),ere(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,null,[{key:"getCardSelect",value:function(){return null}},{key:"isValid",value:function(e){return e.startsWith("https://www.youtube.com/embed/")}},{key:"getMatchUrl",value:function(e){return e?(e.startsWith("<iframe")&&(e=Ite(e)),t.isValid(e)?e:null):null}}])}(Ute);Object.defineProperty(nre,"config",{enumerable:!0,configurable:!0,writable:!0,value:{type:Mte,name:"youtube",example:null,maximize:!1,resize:!1}});var rre=[/(^|\.)yuque-ali(-pre)?\.(antfin|alibaba)-inc\.com$/,/(^|\.)yuque(-pre)?\.(antfin|alibaba)-inc\.com$/,/(^|\.)yuque(-pre)?\.antgroup-inc\.cn$/,/(^|\.)yuque(-pre)?\.antfin\.com$/,/(^|\.)aliyuque?\.antfin\.com$/,/^lark\.alipay\.com$/,/^bkyuque\.mybank\.cn$/,/\.alipay\.net$/];function ore(e){try{var t=new URL(e).hostname;return!!rre.some((function(e){return e.test(t)}))}catch(e){return!1}}var ire=[/\.yuque\.com$/];function are(e){try{var t=new URL(e).hostname;return!!ire.some((function(e){return e.test(t)}))}catch(e){return!1}}var lre=/^\/[^/]{2,}\/[^/]+$/;function ure(e){if(!are(e)&&!ore(e))return!1;var t=new URL(e,"http://localhost/").pathname;return lre.test(t)}var cre=/^\/[^/]{2,}$/;function sre(e){if(!are(e)&&!ore(e))return!1;try{var t=new URL(e).pathname;return cre.test(t)}catch(e){return!1}}function dre(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var fre,hre=[/^(https?:\/\/)?code\.(alipay|antfin|antfin-inc)\.com\/[^/]+\/[^/]+\/commit\/[^/]+$/,/^(https?:\/\/)?code\.(alipay|antfin|antfin-inc)\.com\/[^/]+\/[^/]+\/pull_requests\/[^/]+$/,/^(https?:\/\/)?yuyan\.antfin-inc\.com\/[^/]+\/[^/]+\/sprints\/.*$/,/^(https?:\/\/)?aone\.(alipay|antfin|antfin-inc)\.com\/v2\/project\/[^/]+\/(task|req|bug)\/[^/]+$/,/^(https?:\/\/)?aone\.(alipay|antfin|antfin-inc)\.com\/(issue|workitem|task|req|bug)\/[^/]+$/,/^(https?:\/\/)?aone\.alipay\.com\/projects\/[^/]+$/,/^(https?:\/\/)?project\.aone\.(alipay|alibaba|alibaba-inc)\.com\/projects\/[^/]+$/,/^(https?:\/\/)?aone\.(alipay|alibaba|alibaba-inc)\.com\/v2\/project\/[^/]+\/sprint\/[^/]+$/,/^(https?:\/\/)?baiyan\.(alipay|antfin)\.com\/(space|project|task)\/.*$/,/^(https?:\/\/)?linke\.alipay\.com\/#\/alipay\/iteration\/detail\/.+/,/^(https?:\/\/)?teambition\.alibaba-inc\.com\/project\/[^/]+\/.+/,/^(https?:\/\/)?teambition\.alibaba-inc\.com\/project\/[^/]+\/sprint\/section\/[^/]+$/,/^(https?:\/\/)?teambition\.alibaba-inc\.com\/project\/[^/]+\/[^/]+\/[^/]+\/[^/]+\/task\/[^/]+$/,/^(https?:\/\/)?(www\.)?yuque\.(antfin|antfin-inc)\.com\/r\/[^/]+\/issues\/[^/]+$/,/^(https?:\/\/)?(www\.)?yuque\.com\/r\/[^/]+\/issues\/[^/]+$/,/^(https?:\/\/)?dataphin\.alipay\.com\/assets\/catalog\/detail\/table\/[^/]+\/.+/,/^(https?:\/\/)?project\.alipay\.com\/(space|assemble)\/[^/]+\/overview.+/,/^(https?:\/\/)?project\.alipay\.com\/project\/[^/]+\/[^/]+\/overview.+/,/^(https?:\/\/)?project\.alipay\.com\/(space|project)\/.+\/(requirement|bug|task).+/,/^(https?:\/\/)?project\.alipay\.com\/workItem.+/,/^(https?:\/\/)?.+\.yuque\.com\/logout(\/)?(\?[^#]+)?(#.+)?$/,/^(https?:\/\/)?.+\.antfin\.com\/logout(\/)?(\?[^#]+)?(#.+)?$/,/^(https?:\/\/)?.+\.antfin-inc\.com\/logout(\/)?(\?[^#]+)?(#.+)?$/,/^(https?:\/\/)?fecodex\.antgroup-inc\.cn\/?.*/,/\|{2}/],pre=/^\/[^/]{2,}$/,vre=/^\/[^/]{2,}\/[^/]+(\/[^/]+)?$/,mre=/\/r\/notes?\/(share\/)?[^/]+$/,gre=/^\/[^/]{2,}\/[^/]+\/artboards\/[^/]+$/,bre=[function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new URL(e,"http://localhost/").pathname;return!!vre.test(r)||!!mre.test(r)||!!gre.test(r)||!!n&&pre.test(r)},function(e,t){var n=new URL(e,"http://localhost").pathname;try{var r=new URL(t);return r.pathname!==n&&r.pathname+"/edit"!==n}catch(e){return!0}},function(e){var t;try{t=new URL(e).pathname}catch(e){return!1}return!(["/dashboard"].some((function(e){return t===e}))||["/settings/applications/","/login/callback","/login/oauth","/sites/","/settings/callback/","/dashboard/","/about/"].some((function(e){return t.startsWith(e)}))||["/topics/"].some((function(e){return t.includes(e)}))||["/invitation","/apply","/settings/basic","/settings/advanced","/settings/lab","/topics/kanban","/settings/logs","/s","/watchers","/stargazers","/new"].some((function(e){return t.endsWith(e)})))}],yre=/(\w\/)([^\s?#]+)/,wre=/\/$/;function Are(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.allowGroupLink,o=void 0!==r&&r,i=n.allowLarkURL,a=void 0!==i&&i,l=n.allowEditURL,u=void 0!==l&&l,c=n.theme,s=void 0===c?void 0:c;if(!e)return{success:!1,message:sc("无效链接"),errorCode:fre.empty};if(e=function(e){try{var t=new URL(e);return"/"!==t.pathname&&(t.pathname=t.pathname.replace(wre,"")),t.toString()}catch(t){return function(e){return e.replace(yre,(function(e,t,n,r){return n&&n.endsWith("/")?t+n.slice(0,-1)+("string"==typeof r?r:""):e}))}(e)}}(e),u&&function(e){if(!ore(e)&&!are(e))return!1;var t=new URL(e,"http://localhost");return!!/^\/[^/]{2,}\/[^/]+(\/[^/]+)?\/edit$/.test(t.pathname)}(e)){var d=new URL(e,"http://localhost/");d.pathname=d.pathname.substring(0,d.pathname.length-5),e=d.toString()}if(function(e){if(!Array.isArray(hre)||!e)return!1;var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return dre(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dre(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(hre);try{for(n.s();!(t=n.n()).done;)if(t.value.test("string"==typeof e?e:e.toString()))return!0}catch(e){n.e(e)}finally{n.f()}return!1}(e))return{isOther:!0,success:!1,message:sc("不支持嵌入该链接"),errorCode:fre.invalid,url:e};if(function(e){return!(!are(e)&&!ore(e))&&/\/join\?token=/.test(e)}(e))return{isOther:!0,success:!1,message:sc("不支持嵌入协作链接，请替换为地址栏链接或分享链接"),errorCode:fre.invalid,url:e};if(!(are(e)||a&&ore(e)||function(e){var t;try{var n=new URL(e).hostname;return(null===(t=null===window||void 0===window?void 0:window.location)||void 0===t?void 0:t.hostname)===n}catch(e){return!1}}(e)))return{success:!1,message:sc("不支持嵌入该链接"),errorCode:fre.invalid};if(!function(e,t,n){return!bre.some((function(r){return!r(e,t,n)}))}(e,t,o))return{success:!1,message:sc("不支持嵌入该链接"),errorCode:fre.invalid};var f=function(e,t,n){if(ore(e)&&ore(t))try{var r=new URL(e).origin,o=new URL(t).origin;e=e.replace(r,o)}catch(e){}try{var i=new URL(e);if(i.searchParams.set("view","doc_embed"),"string"==typeof n&&i.searchParams.set("theme",n),i.hash.length>1){var a=i.hash.substring(1),l=decodeURIComponent(decodeURIComponent(a));l.match(/\s《.+》/)||i.searchParams.set("inner",l)}return i.hash="",i.toString()}catch(e){return null}}(e,t,s);return f?{isBook:ure(e),isGroup:sre(e)&&!!o,success:!0,url:f,errorCode:fre.normal}:{success:!1,message:sc("不支持嵌入该链接"),errorCode:fre.invalid}}function kre(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,_re()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function _re(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_re=function(){return!!e})()}!function(e){e[e.normal=0]="normal",e[e.empty=1001]="empty",e[e.invalid=1002]="invalid"}(fre||(fre={}));var Cre,Nre=function(e){function t(){return(0,Ke.A)(this,t),kre(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,null,[{key:"getCardSelect",value:function(){return null}},{key:"getMatchUrl",value:function(e){if(!e||!t.referenceURL)return null;var n=Are(e,t.referenceURL,{allowLarkURL:!0});return n.success&&n.url?n.url:null}}])}(Ute);Object.defineProperty(Nre,"referenceURL",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(Nre,"config",{enumerable:!0,configurable:!0,writable:!0,value:{type:Lte,name:"yuque"}});var Ore=(Cre={},(0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)(Cre,Zte.config.name,Zte),rne.config.name,rne),Ane.config.name,Ane),lne.config.name,lne),pne.config.name,pne),Jte.config.name,Jte),bne.config.name,bne),One.config.name,One),Rne.config.name,Rne),Bne.config.name,Bne),(0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)(Cre,$te.config.name,$te),Lne.config.name,Lne),zne.config.name,zne),$ne.config.name,$ne),Zne.config.name,Zne),nre.config.name,nre),Jne.config.name,Jne),sne.config.name,sne),Nre.config.name,Nre)),xre=function(){function e(){(0,Ke.A)(this,e)}return(0,$e.A)(e,null,[{key:"getTypeByURL",value:function(t,n){var r=e.matchURL(t,n);return r?r.Service.getName():null}},{key:"isValidEntrance",value:function(e,t){return!!(e&&(t&&t[e]||Ore[e]))}},{key:"matchURL",value:function(e,t){try{for(var n=0,r=Object.values(Object.assign(Object.assign({},Ore),t||{}));n<r.length;n++){var o=r[n],i=o.getMatchUrl(e);if(i)return{Service:o,validUrl:i}}}catch(e){console.warn(e)}return null}}])}();function Ere(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Dre()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Dre(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Dre=function(){return!!e})()}var Pre={deepinsight:"ali",riddle:"ali",herbox:"ali"},Rre=function(e){function t(){return(0,Ke.A)(this,t),Ere(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"cardAlias",get:function(){var e,t=this._cardValue.type;return t&&Object.assign(Object.assign({},Ore),null===(e=this.pluginOption)||void 0===e?void 0:e.services)[t].isAvailable()?t:null}},{key:"getEntrance",value:function(){return this._cardValue.entrance}},{key:"getType",value:function(){return this._cardValue.type}},{key:"setType",value:function(e){this._cardValue.type=e}},{key:"getSrc",value:function(){return this._cardValue.src}},{key:"setSrc",value:function(e){this._cardValue.src=e}},{key:"getEmbedURL",value:function(){var e,t=xre.matchURL(this._cardValue.src||"",null===(e=this.pluginOption)||void 0===e?void 0:e.services);return t?t.validUrl:""}},{key:"getServiceName",value:function(){var e=this._cardValue,t=e.entrance,n=e.type;return e.src?n:t}},{key:"getDetail",value:function(){var e,t=Object.assign(Object.assign({},Ore),null===(e=this.pluginOption)||void 0===e?void 0:e.services)[this.getServiceName()];return bt.fatal(t,"plugins/thirdparty/src/kernel/thirdparty-card-data.ts:189"),{src:this._cardValue.src,example:t.getExample(),help:t.getHelp(),placeholder:t.getPlaceholder()}}},{key:"isAllowMaximize",value:function(){var e;if(!this._cardValue.type)return!1;var t=Object.assign(Object.assign({},Ore),null===(e=this.pluginOption)||void 0===e?void 0:e.services)[this.getServiceName()];return bt.fatal(t,"plugins/thirdparty/src/kernel/thirdparty-card-data.ts:209"),t.getMaximize()}},{key:"isAllowResize",value:function(){var e;if(!this._cardValue.type)return!1;var t=Object.assign(Object.assign({},Ore),null===(e=this.pluginOption)||void 0===e?void 0:e.services)[this.getServiceName()];return bt.fatal(t,"plugins/thirdparty/src/kernel/thirdparty-card-data.ts:224"),t.getResize()}},{key:"isAvailable",value:function(){var e;if(!this._cardValue.type)return!1;var t=Object.assign(Object.assign({},Ore),null===(e=this.pluginOption)||void 0===e?void 0:e.services)[this.getServiceName()];return bt.fatal(t,"plugins/thirdparty/src/kernel/thirdparty-card-data.ts:239"),t.isAvailable()}}],[{key:"fromLake",value:function(e,t,n){var r=ku()(e,"url")||ku()(e,"src"),o=ku()(e,"entrance");o||(o=t),Pre[o]&&(o=Pre[o]);var i=e.type;return r&&!i&&(i=xre.getTypeByURL(r,n)),i||xre.isValidEntrance(o,n)||(console.warn("非法数据",e,t),o="youku",r=""),{entrance:o,src:r,type:i}}},{key:"toLake",value:function(e){var t={entrance:ku()(e,"entrance"),src:ku()(e,"src"),url:ku()(e,"src"),height:e.__height};return(null==e?void 0:e.type)&&(t.type=e.type),t}},{key:"getInitCardValue",value:function(e){return Sl.setCardSpacingToValue(Nl,Ww()({},t.DefaultCardValue,e))}},{key:"createBy",value:function(e,t){var n=xre.matchURL(e,t);if(!n)return null;var r=n.Service.getName();return{src:n.validUrl,type:r,entrance:r}}}])}(Sl);function Sre(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Tre()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Tre(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Tre=function(){return!!e})()}Object.defineProperty(Rre,"DefaultCardValue",{enumerable:!0,configurable:!0,writable:!0,value:{entrance:null,type:null,src:null}});var jre=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=Sre(this,t),Object.defineProperty(n,"customServices",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t,n,r){var o=ar.createCard("thirdparty",Rre.fromLake(n,t,this.customServices),r);e.setNode(o)}}])}(Lj);function Ire(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Bre()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Bre(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Bre=function(){return!!e})()}Object.defineProperty(jre,"CardNames",{enumerable:!0,configurable:!0,writable:!0,value:["thirdparty","riddle","youku","processon"]});var Mre=function(e){function t(){return(0,Ke.A)(this,t),Ire(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t,n,r){var o={};n.type&&(o.alias=n.type);var i=e.createBlockCard("thirdparty",Rre.toLake(n),r,o);e.setNode(i)}}])}($j);function Fre(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Lre()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Lre(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Lre=function(){return!!e})()}var Ure=function(e){function t(){return(0,Ke.A)(this,t),Fre(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){var n,r=(null===(n=t.attrs)||void 0===n?void 0:n.value)||{};if(r.src){var o=e.createElement("div",{className:"ne-thirdparty"}),i=e.createElement("a",{attrs:{href:r.src}});e.appendChild(i,e.createTextNode(r.src)),e.appendChild(o,i),e.setNode(o)}}}])}(lT);Object.defineProperty(Ure,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["thirdparty"]});var Vre=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Object.assign({},t)}),[{key:"editUI",get:function(){return this._option.editUI}},{key:"viewerUI",get:function(){return this._option.viewerUI}},{key:"services",get:function(){return this._option.services}},{key:"recognizeYuque",get:function(){return!!this._option.recognizeYuque}}])}();function Hre(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,zre()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function zre(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(zre=function(){return!!e})()}Object.defineProperty(Vre,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"thirdparty"});var Wre=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=Hre(this,t),Object.defineProperty(r,"customServices",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(r,"bookmarkService",{enumerable:!0,configurable:!0,writable:!0,value:n}),r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t,n,r){var o=n.mode,i=n.src;if("embed"!==o||"string"!=typeof i)if("card"===o&&"string"==typeof i&&this.bookmarkService){var a=this.bookmarkService.createBookmarkNode(n,"block",r);e.setNode(a)}else e.setNode(ar.createCard("block",{cardName:t,cardValue:n},r));else{var l=ar.createCard("thirdparty",Rre.fromLake({src:i,entrance:"yuque"},t,this.customServices),r);e.setNode(l)}}}])}(Lj);function qre(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,$re()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function $re(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($re=function(){return!!e})()}var Kre=function(e){function t(){var e;return(0,Ke.A)(this,t),e=qre(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(rt);function Yre(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Gre()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Gre(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Gre=function(){return!!e})()}Object.defineProperty(Kre,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze("IBookmarkKernelService")});var Jre=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=Yre(this,t),Object.defineProperty(r,"customServices",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(r,"bookmarkService",{enumerable:!0,configurable:!0,writable:!0,value:n}),r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t){var n,r=null===(n=t.attrs)||void 0===n?void 0:n.value;if(!r)return!0;var o=r.mode,i=r.src;if("embed"===o&&"string"==typeof i){var a=ar.createCard("thirdparty",Rre.fromLake({src:i,entrance:"yuque"},"yuque",this.customServices),t.id);return e.setNode(a),!0}if("card"===o&&"string"==typeof i&&this.bookmarkService){var l=this.bookmarkService.createBookmarkNode(r,"block",t.id);return e.setNode(l),!0}return!0}}])}(Ij),Xre=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:t})}),[{key:"write",value:function(e,t){var n=ku()(t,"attrs.value",{}),r=n.src,o=n.type;return!r||(e.append("[".concat(o||"三方卡片","](").concat(r,")\n\n")),!1)}}])}();function Qre(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Zre()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Zre(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Zre=function(){return!!e})()}var eoe=function(e){function t(){return(0,Ke.A)(this,t),Qre(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var n,r,o,i,a,l;e.registerBlockCard(t.cardName),null===(n=e.getService(wS.ID))||void 0===n||n.registerNodeHTMLWriter(Ure.NodeNames,new Ure),null===(r=e.getService(_S.ID))||void 0===r||r.registerLakeCardReader(jre.CardNames,new jre(this.option.services)),this.option.recognizeYuque&&!e.plugins.find((function(e){return"yuque"===e.constructor.PluginName}))&&(Nre.referenceURL=this.kernel.option.currentURL,null===(o=e.getService(_S.ID))||void 0===o||o.registerLakeCardReader("yuque",new Wre({yuque:Nre},e.getService(Kre.ID))),null===(i=e.getService(RT.ID))||void 0===i||i.registerINodeCardReader("yuque",new Jre({yuque:Nre},e.getService(Kre.ID)))),null===(a=e.getService(RT.ID))||void 0===a||a.registerINodeCardReader(yte.CardName,new yte),null===(l=e.getService(_S.ID))||void 0===l||l.registerLakeCardWriter("thirdparty",new Mre)}},{key:"afterInit",value:function(){var e;null===(e=this.kernel.getService(tI.ID))||void 0===e||e.registerMarkdownWriter(t.PluginName,new Xre(this))}}])}(ct);function toe(e,t){var n=[];return e.children&&e.children.forEach((function(e){n=n.concat(toe(e,t))})),t(e,n)}function noe(e,t){bt.fatal(ar.isFragmentNode(t),"plugins/kernel-assistant/src/kernel/helper/normalize-node-tree.ts:35");try{var n=toe(t,(function(t,n){var r;if("ol"===t.name||"ul"===t.name)return n;if(!(null===(r=t.children)||void 0===r?void 0:r.length)&&e.hasCategory(t.name,[qe.TableHole,qe.Hole]))return[];var o=ar.cloneNode(t),i=[o],a=o;return n.forEach((function(t){!e.hasCategory(t.name,[qe.BlockCard,qe.LikeRoot])||e.acceptNode(a.name,t.name)||e.hasCategory(a.name,qe.LikeRoot)?ar.appendChild(a,t):(ar.isEmptyNode(a)&&i.pop(),i.push(t),a=function(e){return"oli"===e.name||"uli"===e.name?ar.createElement("p"):ar.cloneNode(e)}(a),i.push(a))})),i.length>1&&ar.isEmptyNode(a)&&i.pop(),i}));return bt.fatal(1===n.length,"plugins/kernel-assistant/src/kernel/helper/normalize-node-tree.ts:85"),bt.fatal(ar.isFragmentNode(n[0]),"plugins/kernel-assistant/src/kernel/helper/normalize-node-tree.ts:86"),n[0]}catch(e){return console.error(e),t}}function roe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ooe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,ioe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function ioe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ioe=function(){return!!e})()}Object.defineProperty(eoe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:hte.pluginName}),Object.defineProperty(eoe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:Vre}),Object.defineProperty(eoe,"cardName",{enumerable:!0,configurable:!0,writable:!0,value:"thirdparty"}),Object.defineProperty(eoe,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[mte]});var aoe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=ooe(this,t,arguments),Object.defineProperty(e,"beforeInsertTextInheritAttrsProcess",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"processBeforeInsertTextInheritAttrs",value:function(e,t){var n,r=t,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return roe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?roe(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(this.beforeInsertTextInheritAttrsProcess);try{for(o.s();!(n=o.n()).done;)r=(0,n.value)(e,r)}catch(e){o.e(e)}finally{o.f()}return r}},{key:"registerBeforeInsertTextInheritAttrs",value:function(e){this.beforeInsertTextInheritAttrsProcess.add(e)}},{key:"destroy",value:function(){this.beforeInsertTextInheritAttrsProcess.clear()}}])}(HX),loe=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:t})}),[{key:"afterSplitText",value:function(e,t,n){t.attrs.emoji&&e.setAttribute(n,"emoji",!0)}},{key:"createTextNode",value:function(e,t,n){if(!t.data)return[e.createTextNode("",Object.assign({},n),t.id)];var r=t.id;return gn.splitEmoji(t.data).reduce((function(t,o,i){return o&&(t.push(e.createTextNode(o,i%2==1?Object.assign(Object.assign({},n),{emoji:!0}):zJ()(n,"emoji"),r)),r=void 0),t}),[])}},{key:"splitTextNode",value:function(e,t,n){if(!(n>=t.dataLength)){var r=t.parentNode;bt.fatal(r,"plugins/kernel-assistant/src/kernel/helper/text-helper.ts:67");var o=e.createTextNode(t.data.slice(n),t.attrs);e.setTextNodeData(t,t.data.slice(0,n)),e.insertAfter(r,o,t)}}},{key:"insertText",value:function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(t.isTextNode()){var i=!!t.attrs.emoji,a=gn.splitEmoji(r);if(1===a.length){if(i){this.splitTextNode(e,t,n);var l=e.createTextNode(r,zJ()(t.attrs,"emoji"));return e.insertAfter(t.parentNode,l,t),e.newPosition(l,gn.size(r))}return e.setTextNodeData(t,gn.insertString(t.data,n,r)),e.newPosition(t,n+gn.size(r))}this.splitTextNode(e,t,n);for(var u=t.parentNode,c=t,s=0;s<a.length;){var d=s%2==1,f=a[s++];if(!!c.attrs.emoji!==d){var h=e.createTextNode(f,d?Object.assign(Object.assign({},t.attrs),{emoji:!0}):zJ()(t.attrs,"emoji"));e.insertAfter(u,h,c),c=h}else e.setTextNodeData(c,c.data+f)}return e.newPosition(c,gn.size(c.data))}var p=gn.splitEmoji(r),v=t,m=n,g=e.newPosition(t,n);return p.forEach((function(t,n){if(t){var r=e.createTextNode(t,n%2==1?Object.assign(Object.assign({},o),{emoji:!0}):zJ()(o,"emoji"));e.insertByOffset(v,m,r),g=e.newPosition(r,gn.size(t)),m++}})),g}}])}(),uoe=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Object.assign({},t)}),[{key:"supportEmoji",get:function(){return!!this._option.supportEmoji}}])}();function coe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,soe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function soe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(soe=function(){return!!e})()}Object.defineProperty(uoe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:LX.pluginName});var doe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=coe(this,t,arguments),Object.defineProperty(e,"beforeInsertTextInheritAttrs",{enumerable:!0,configurable:!0,writable:!0,value:function(t,n,r){return e.service.processBeforeInsertTextInheritAttrs(n,r)}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.hasExtendMethod("normalizeINodeTree")||e.extendMethods({normalizeINodeTree:noe}),e.hasExtendMethod("beforeInsertTextInheritAttrs")||e.extendMethods({beforeInsertTextInheritAttrs:this.beforeInsertTextInheritAttrs}),!e.hasExtend("text_helper")&&this.option.supportEmoji&&e.extend("text_helper",new loe(e))}}])}(ct);Object.defineProperty(doe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:uoe}),Object.defineProperty(doe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:LX.pluginName}),Object.defineProperty(doe,"Service",{enumerable:!0,configurable:!0,writable:!0,value:aoe});var foe=["columns","tr"];function hoe(e){if(!e)return 0;if(e.isHole())return hoe(e.firstChild);if(e.isTextNode())return Eh(e.data);if(e.isCardNode())return e.hasCategory(qe.BlockCard)||"image"===e.nodeName?300:1;if(e.childCount){var t=0;return e.children.forEach((function(e){if((t+=hoe(e))>=2e3){var n=function(e){var t=e.rootNode,n=e.getPath(),r=t;for(var o in n)if(!poe(r=r.children[n[o]]))return r;return e}(e);throw n}})),t}return 0}function poe(e){return!foe.includes(e.nodeName)}function voe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,moe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function moe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(moe=function(){return!!e})()}var goe=function(e){function t(){return(0,Ke.A)(this,t),voe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getValue",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.kernel.document.rootNode,o=0,i=-1;o<500&&i<9;){var a=i+1,l=r.children[a];if(!l)break;var u=void 0;try{u=hoe(l)}catch(e){if(null==e?void 0:e.getPath)return n.beforePath=e.getPath(),this.kernel.getDocument(t,n);throw e}i=a,o+=u}return n.beforeIndex=i+1,this.kernel.getDocument(t,n)}}])}(pt);function boe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,yoe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function yoe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(yoe=function(){return!!e})()}var woe=function(e){function t(){return(0,Ke.A)(this,t),boe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerCommand("getSummary",new goe)}}])}(ct);Object.defineProperty(woe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:"summary"});var Aoe=HR({pluginName:"aoneDataSource"});function koe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,_oe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function _oe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_oe=function(){return!!e})()}var Coe=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=koe(this,t),Object.defineProperty(n,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n._kernel=e,n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t){return this._kernel.readData("text/aone",e,t)}},{key:"write",value:function(){return""}}])}(Ht);function Noe(e){var t=JSON.parse(e);if(!Array.isArray(t)||t.length<2)throw new Error("not validate ding content");return Ooe(t)}function Ooe(e){var t=(0,bI.A)(e),n=t[0],r=t[1],o=t.slice(2);return"root"===n?{klass:"document",data:e[1],nodes:Array.isArray(o)?o.map(Ooe):[]}:["h1","h2","h3","h4","h5","h6"].includes(n)?{klass:"block",data:e[1],type:Doe(n),nodes:Array.isArray(o)?o.map(Ooe):[]}:["a","img"].includes(n)?{klass:"inline",data:e[1],type:Doe(n),nodes:Array.isArray(o)?o.map(Ooe):[]}:"span"===n?"text"===e[1]["data-type"]?{klass:"text",leaves:Array.isArray(o)?o.map(Ooe):[]}:"leaf"===e[1]["data-type"]?{klass:"leaf",marks:xoe(r),text:"string"==typeof o[0]?o[0]:""}:{klass:"inline",data:r,type:Doe(r["data-type"]||n),nodes:Array.isArray(o)?o.map(Ooe):[]}:{klass:"block",data:e[1],type:Doe(n),nodes:Array.isArray(o)?o.map(Ooe):[]}}function xoe(e){return Object.keys(e).reduce((function(t,n){return e[n]&&t.push({data:{value:e[n]},klass:"mark",type:n}),t}),[])}var Eoe={p:"paragraph",a:"link",img:"image",h1:"heading-1",h2:"heading-2",h3:"heading-3",h4:"heading-4",h5:"heading-5",h6:"heading-6"};function Doe(e){return Eoe[e]||e}var Poe=function(){function e(t,n){(0,Ke.A)(this,e),Object.defineProperty(this,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"node",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"attrs",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isStop",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.kernel=t,this.parent=n}return(0,$e.A)(e,[{key:"addAttr",value:function(e,t){null===this.attrs&&(this.attrs={}),this.attrs[e]=t}},{key:"makeChildContext",value:function(){return new e(this.kernel,this)}},{key:"getNode",value:function(){var e;return this.node?this.node:(null===(e=this.parent)||void 0===e?void 0:e.getNode())||null}},{key:"makeStop",value:function(){this.isStop=!0}},{key:"setNode",value:function(e,t){var n,r=t||(null===(n=this.parent)||void 0===n?void 0:n.getNode());r&&ar.appendChild(r,e),this.node=e}},{key:"setNodes",value:function(e,t){var n,r=t||(null===(n=this.parent)||void 0===n?void 0:n.getNode());r&&e.forEach((function(e){ar.appendChild(r,e)})),this.node=e[e.length-1]}},{key:"createElement",value:function(e,t){return ar.createElement(e,t)}},{key:"createText",value:function(e){return ar.createTextNode(e)}},{key:"appendChild",value:function(e,t){return ar.appendChild(e,t)}},{key:"isText",value:function(e){return"text"===e.klass}}])}();function Roe(e){return"text"===e.klass}function Soe(e){return"block"===e.klass||"inline"===e.klass}function Toe(e,t){var n=t.enter,r=t.leave,o=!1;Roe(e)||(o=n(e)),o||(function(e){return"document"===e.klass}(e)||function(e){return"block"===e.klass}(e)||function(e){return"inline"===e.klass}(e)?e.nodes.forEach((function(e){Toe(e,{enter:n,leave:r})})):Roe(e)&&e.leaves.forEach((function(e){Toe(e,{enter:n,leave:r})}))),Roe(e)||r(e)}function joe(e,t,n){var r=ar.createFragment(),o=new Poe(e,null);o.setNode(r);var i=[o];return Toe(t,{enter:function(e){if(e===t)return!1;var r=i[i.length-1],o=r.makeChildContext();if(i.push(o),function(e){return"leaf"===e.klass}(e)){var a=r.getNode();return e.marks.forEach((function(t){var r=n.markReaders;r&&r.find((function(n){return!1===n.read(o,t,e)}))})),a&&(n.leafReaders.find((function(t){return!1===t.read(o,e)}))||r.appendChild(a,ar.createTextNode(e.text,o.attrs))),o.isStop}if(Soe(e)){var l=n.nodeReaders.get(e.type);return l&&l.find((function(t){return!1===t.read(o,e)})),o.isStop}return!1},leave:function(e){if(e===t)return!1;var r=i.pop();if(r&&Soe(e)){var o=n.nodeReaders.get(e.type);return o&&o.find((function(t){var n;return!1===(null===(n=t.afterRead)||void 0===n?void 0:n.call(t,r,e))})),r.isStop}return!1}}),r}var Ioe={p:"paragraph",a:"link",img:"image",h1:"heading-1",h2:"heading-2",h3:"heading-3",h4:"heading-4",h5:"heading-5",h6:"heading-6"};function Boe(e){return Ioe[e]||e}var Moe=["true","false"];function Foe(e){var t={};return Object.keys(e).forEach((function(n){try{e[n].startsWith("%5B")||e[n].startsWith("%7B")?t[n]=JSON.parse(decodeURIComponent(e[n])):/^\d+$/.test(e[n])?t[n]=parseInt(e[n],10):Moe.includes(e[n])?t[n]="true"===e[n]:t[n]=decodeURIComponent(e[n])}catch(r){t[n]=e[n]}})),t}function Loe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Uoe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Uoe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Uoe=function(){return!!e})()}var Voe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Loe(this,t,arguments),Object.defineProperty(e,"markReaders",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(e,"leafReaders",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(e,"nodeReaders",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"registerIMarkReader",value:function(e){this.markReaders.push(e)}},{key:"registerLeafReader",value:function(e){this.leafReaders.push(e)}},{key:"registerNodeReader",value:function(e,t){var n=this;Array.isArray(e)?e.forEach((function(e){return n._registerNodeReader(e,t)})):this._registerNodeReader(e,t)}},{key:"_registerNodeReader",value:function(e,t){var n=this.nodeReaders.get(e);Array.isArray(n)?(n.push(t),this.nodeReaders.set(e,n)):this.nodeReaders.set(e,[t])}},{key:"read",value:function(e,t){var n,r;return r=(n=t).startsWith("<?xml")||n.includes("<doc>")&&n.includes("</doc>")?function(e){try{return function(e){var t=null,n=null,r=null,o=new hI.Parser({onopentag:function(e,o){var i,a,l,u,c,s;if(r=null,"root"===e)return t={klass:"document",data:Foe(o),nodes:[]},void(n=t);if(["h1","h2","h3","h4","h5","h6"].includes(e)){var d={klass:"block",data:Foe(o),type:Boe(e),nodes:[],parent:t};return null===(i=null==t?void 0:t.nodes)||void 0===i||i.push(d),void(t=d)}if(["a","img"].includes(e)){var f={klass:"inline",data:Foe(o),type:Boe(e),nodes:[],parent:t};return null===(a=null==t?void 0:t.nodes)||void 0===a||a.push(f),void(t=f)}if("span"===e){if("text"===o["data-type"]){var h={klass:"text",leaves:[],parent:t};return null===(l=null==t?void 0:t.nodes)||void 0===l||l.push(h),void(t=h)}if("leaf"===o["data-type"]){var p={klass:"leaf",marks:(s=o,Object.keys(s).reduce((function(e,t){return s[t]&&e.push({data:{value:s[t]},klass:"mark",type:t}),e}),[])),text:"",parent:t};return null===(u=null==t?void 0:t.leaves)||void 0===u||u.push(p),t=p,void(r=p)}}if(t){var v={klass:"block",data:Foe(o),type:Boe(e),nodes:[],parent:t};return null===(c=null==t?void 0:t.nodes)||void 0===c||c.push(v),void(t=v)}},ontext:function(e){r&&(e=e.replace(/\u200b/g,""),r.text=e)},onclosetag:function(e){t&&"root"!==e&&(t=null==t?void 0:t.parent)}},{decodeEntities:!0,lowerCaseTags:!0,lowerCaseAttributeNames:!1,recognizeSelfClosing:!0});return o.write(e),o.end(),n}(e)}catch(e){return console.error(e),null}}(t):Noe(t),bt(r,"read text/aone error, source is null","plugins/aone-data-source/src/kernel/aone-reader.ts:53"),joe(e,r,this)}},{key:"destroy",value:function(){this.markReaders.length=0,this.nodeReaders.clear()}}])}(D8),Hoe=function(){function e(){(0,Ke.A)(this,e)}return(0,$e.A)(e,[{key:"read",value:function(t,n){if(e.nodeType.includes(n.type)){var r={};if(n.data.jc&&(r.alignment=n.data.jc),n.data.ind&&n.data.ind.firstLine&&(r.textIndent=!0),n.data.blockquote)return this.readQuote(t,n,r);if(n.data.list){var o=n.data.list;r.list=o.listId,r.level=o.level||0;var i="uli";return o.isOrdered?i="oli":o.isTaskList&&(i="tli",r.checked=o.isChecked),t.setNode(ar.createElement(i,r)),!1}return t.setNode(ar.createElement(this.typeToName(n.type),r)),!1}}},{key:"typeToName",value:function(e){return"paragraph"===e?"p":"heading-1"===e?"h1":"heading-2"===e?"h2":"heading-3"===e?"h3":"heading-4"===e?"h4":"heading-5"===e?"h5":"heading-6"===e?"h6":void bt.fatal(!1,"unknown type: ".concat(e),"plugins/aone-data-source/src/kernel/readers/p-aone-reader.ts:61")}},{key:"readQuote",value:function(e,t,n){var r,o,i,a=null===(r=e.parent)||void 0===r?void 0:r.getNode();if(a){var l=null===(o=a.children)||void 0===o?void 0:o[((null===(i=a.children)||void 0===i?void 0:i.length)||1)-1];if(l&&"quote"===l.name)e.setNode(e.createElement("p",n),l);else{var u=e.createElement("quote",{});e.appendChild(a,u);var c=e.createElement("p",n);e.setNode(c,u)}return!1}}}])}();Object.defineProperty(Hoe,"nodeType",{enumerable:!0,configurable:!0,writable:!0,value:["paragraph","heading-1","heading-2","heading-3","heading-4","heading-5","heading-6"]});var zoe=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"read",value:function(e,t,n){var r;if("bold"===t.type)e.addAttr("bold",t.data.value);else if("italic"===t.type)e.addAttr("italic",t.data.value);else if("underline"===t.type)e.addAttr("underline",!0);else if("strike"===t.type)e.addAttr("strikethrough",!0);else if("highlight"===t.type){if(/^var\(.+?\)$/.test(t.data.value||""))return!1;e.addAttr("bgColor",t.data.value)}else if("color"===t.type){if(/^var\(.+?\)$/.test(t.data.value||""))return!1;e.addAttr("color",t.data.value)}else if("inlineCode"===t.type)e.addAttr("inlineCode",t.data.value);else if("sz"===t.type)try{var o=(null===(r=n.marks.find((function(e){return"szUnit"===e.type})))||void 0===r?void 0:r.data.value)||"pt",i=LW(MW(t.data.value,o)||0);i&&e.addAttr("fontsize",i)}catch(e){}return!1}}])}(),Woe=function(){function e(){(0,Ke.A)(this,e)}return(0,$e.A)(e,[{key:"read",value:function(t,n){if(e.nodeType.includes(n.type)){var r={};if(n.data.colsWidth&&(r.colWidths=n.data.colsWidth,r.colCount=n.data.colsWidth.length,r.rowCount=n.nodes.length),n.data.h&&(r.height=n.data.h),n.data.colSpan&&n.data.colSpan>1&&(r.colSpan=n.data.colSpan),n.data.rowSpan&&n.data.rowSpan>1&&(r.rowSpan=n.data.rowSpan),n.data.fill&&(r.cellBgColor=n.data.fill),n.data.vAlign?r.verticalAlign=n.data.vAlign:r.verticalAlign="middle",!n.data.hidden)return t.setNode(ar.createElement(this.typeToName(n.type),r)),!1;t.makeStop()}}},{key:"afterRead",value:function(e,t){if("tr"===t.type){var n=e.getNode();if(n&&n.children){var r=0;t.nodes.forEach((function(e,t){var o;if("block"===e.klass&&!e.data.hidden){var i=null===(o=n.children)||void 0===o?void 0:o[r];i&&i.attrs&&(i.attrs.col=t),r++}}))}}return!1}},{key:"typeToName",value:function(e){return"table"===e?"table":"tc"===e?"td":"tr"===e?"tr":void bt.fatal(!1,"unknown type: ".concat(e),"plugins/aone-data-source/src/kernel/readers/table-aone-reader.ts:71")}}])}();Object.defineProperty(Woe,"nodeType",{enumerable:!0,configurable:!0,writable:!0,value:["table","tr","tc"]});var qoe=function(){function e(){(0,Ke.A)(this,e)}return(0,$e.A)(e,[{key:"read",value:function(t,n){if(e.nodeType.includes(n.type)){var r={};return n.data.href&&(r.src=n.data.href),t.setNode(ar.createElement(this.typeToName(n.type),r)),!1}}},{key:"typeToName",value:function(e){if("link"===e)return"link";bt.fatal(!1,"unknown type: ".concat(e),"plugins/aone-data-source/src/kernel/readers/link-aone-reader.ts:22")}}])}();Object.defineProperty(qoe,"nodeType",{enumerable:!0,configurable:!0,writable:!0,value:["link"]});var $oe=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"read",value:function(e,t){var n;if(null===(n=e.attrs)||void 0===n?void 0:n.inlineCode){var r=ar.createElement("code",{});return ar.appendChild(r,ar.createTextNode(t.text,e.attrs)),e.setNode(r),!1}}}])}(),Koe=function(){function e(){(0,Ke.A)(this,e)}return(0,$e.A)(e,[{key:"read",value:function(t,n){var r,o,i;if(e.nodeType.includes(n.type)){n.nodes=[];var a={src:n.data.src,size:n.data.size,name:n.data.name,rotation:n.data.rotation||0,width:n.data.width,height:n.data.height,original:{type:"binary",from:"aone",ratio:1,width:n.data.width,height:n.data.height}};if("link"===(null===(o=null===(r=t.parent)||void 0===r?void 0:r.node)||void 0===o?void 0:o.name)&&(a.link=null===(i=t.parent.node.attrs)||void 0===i?void 0:i.src),n.data.rectClip){var l=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;console.info("input",e,t,n,r);var o={left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:t+e.left+e.right,height:n+e.top+e.bottom};if(0===r)return o;var i=e.top,a=e.left,l=e.bottom,u=e.right;return 90==(r%=360)&&(o.left=i,o.top=u,o.right=l,o.bottom=a,o.width=t+o.left+o.right,o.height=n+o.top+o.bottom),180===r&&(o.left=u,o.top=l,o.right=a,o.bottom=i),270===r&&(o.left=l,o.top=a,o.right=i,o.bottom=u,o.width=t+o.left+o.right,o.height=n+o.top+o.bottom),o}(n.data.rectClip,n.data.width,n.data.height,n.data.rotation||0);a.crop=[l.left/l.width,l.top/l.height,1-l.right/l.width,1-l.bottom/l.height],a.original.width=l.width,a.original.height=l.height,delete a.width,delete a.height}return t.setNode(ar.createElement(this.typeToName(n.type),{value:a})),!1}}},{key:"typeToName",value:function(e){if("image"===e)return"image";bt.fatal(!1,"unknown type: ".concat(e),"plugins/aone-data-source/src/kernel/readers/img-aone-reader.ts:62")}}])}();Object.defineProperty(Koe,"nodeType",{enumerable:!0,configurable:!0,writable:!0,value:["image"]});var Yoe=function(){function e(){(0,Ke.A)(this,e)}return(0,$e.A)(e,[{key:"read",value:function(t,n){if(e.nodeType.includes(n.type))return n.nodes=[],"video"===n.data.type?this.readVideo(t,n):"audio"===n.data.type?this.readAudio(t,n):(t.setNode(t.createElement("localdoc",{value:{src:n.data.src,name:n.data.name,size:n.data.size,status:"done",mode:"card"}})),!1)}},{key:"readVideo",value:function(e,t){return e.setNode(e.createElement("video",{value:{status:"done",name:t.data.name,size:t.data.size,url:t.data.src}})),!1}},{key:"readAudio",value:function(e,t){return e.setNode(e.createElement("audio",{value:{status:"uploaded",audioInfo:{id:t.data.src,fileName:t.data.name,fileSize:t.data.size,url:t.data.src}}})),!1}}])}();Object.defineProperty(Yoe,"nodeType",{enumerable:!0,configurable:!0,writable:!0,value:["embed"]});var Goe=function(){function e(){(0,Ke.A)(this,e)}return(0,$e.A)(e,[{key:"read",value:function(t,n){if(e.nodeType.includes(n.type))return n.nodes=[],t.setNode(ar.createElement(this.typeToName(n.type),{value:{login:n.data.login,nickName:n.data.name,name:n.data.name}})),!1}},{key:"typeToName",value:function(e){if("mention"===e)return"mention";bt.fatal(!1,"unknown type: ".concat(e),"plugins/aone-data-source/src/kernel/readers/mention-aone-reader.ts:28")}}])}();Object.defineProperty(Goe,"nodeType",{enumerable:!0,configurable:!0,writable:!0,value:["mention"]});var Joe=/(?:[^a-z0-9]|^)([a-z0-9]{2,}):\/\/(?:[a-z_0-9@:.])+?(?:\/\S*?)?(?:[#\s\S]*?)?(?:(?=[\u0100-\uffff\s])|$)/i,Xoe=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"read",value:function(e,t){if(Joe.test(t.text)){var n=e.kernel.readData("text/plain",t.text);if(n&&n.children)return e.setNodes(n.children),!1}return e.setNode(ar.createTextNode(t.text,e.attrs)),!1}}])}(),Qoe=[{type:"color3",h:27.62},{type:"warning",h:42.97},{type:"success",h:82.76},{type:"tips",h:150},{type:"color2",h:155.12},{type:"color1",h:182.95},{type:"info",h:211},{type:"color5",h:260.43},{type:"color4",h:324.71},{type:"danger",h:352.86}],Zoe=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"read",value:function(e,t){if("colorBlocks"===t.data.subType){var n=t.data.metadata||{bgcolor:"#ECF9F0"};return e.setNode(ar.createElement("alert",{type:this.getAlertType(n)})),!0}}},{key:"getAlertType",value:function(e){var t=au.parse(e.bgcolor);if(!t)return"info";for(var n=t.h,r=0;r<Qoe.length;r++)if(n<Qoe[r].h){var o=Qoe[r-1]||Qoe[Qoe.length-1];return Math.abs(n-o.h)<Math.abs(Qoe[r].h-n)?o.type:Qoe[r].type}return"info"}}])}();function eie(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,tie()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function tie(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(tie=function(){return!!e})()}Object.defineProperty(Zoe,"nodeType",{enumerable:!0,configurable:!0,writable:!0,value:["container"]});var nie=function(e){function t(){var e;return(0,Ke.A)(this,t),e=eie(this,t,arguments),Object.defineProperty(e,"_dataSource",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){this._dataSource=new Coe(this.kernel),e.registerDataSource("text/aone",this._dataSource),e.registerReader("text/aone",this.service),this.registerDefaultReaders()}},{key:"registerDefaultReaders",value:function(){this.service.registerIMarkReader(new zoe),this.service.registerNodeReader(Hoe.nodeType,new Hoe),this.service.registerNodeReader(Woe.nodeType,new Woe),this.service.registerNodeReader(qoe.nodeType,new qoe),this.service.registerNodeReader(Koe.nodeType,new Koe),this.service.registerNodeReader(Yoe.nodeType,new Yoe),this.service.registerNodeReader(Goe.nodeType,new Goe),this.service.registerNodeReader(Zoe.nodeType,new Zoe),this.service.registerLeafReader(new $oe),this.service.registerLeafReader(new Xoe)}},{key:"destroy",value:function(){var e;Tr((0,Je.A)(t.prototype),"destroy",this).call(this),null===(e=this._dataSource)||void 0===e||e.destroy(),this._dataSource=null}}])}(ct);function rie(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,oie()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function oie(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(oie=function(){return!!e})()}Object.defineProperty(nie,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:Aoe.pluginName}),Object.defineProperty(nie,"Service",{enumerable:!0,configurable:!0,writable:!0,value:Voe});var iie=function(e){function t(){var e;return(0,Ke.A)(this,t),e=rie(this,t,arguments),Object.defineProperty(e,"prefixFNs",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(e,"getToc",{enumerable:!0,configurable:!0,writable:!0,value:function(){return e.plugin.getToc()}}),Object.defineProperty(e,"registerCardToText",{enumerable:!0,configurable:!0,writable:!0,value:function(t,n){e.plugin.cardToTextManager.register(t,n)}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){}},{key:"registerPrefix",value:function(e){this.prefixFNs.push(e)}},{key:"start",value:function(){this.prefixFNs.forEach((function(e){return e.start()}))}},{key:"prefix",value:function(e){var t="";return this.prefixFNs.find((function(n){var r=n.prefix(e);return!!r&&(t=r,!0)})),t||""}}])}(cte),aie=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e),Object.defineProperty(this,"cardToTextFnMap",{enumerable:!0,configurable:!0,writable:!0,value:{}})}),[{key:"register",value:function(e,t){this.cardToTextFnMap[e]=t}},{key:"getText",value:function(e){bt.fatal(e.isCardNode(),"plugins/toc/src/kernel/card-to-text-manager.ts:25");var t=this.cardToTextFnMap[e.nodeName];return t&&t(e)||" "}},{key:"destroy",value:function(){this.cardToTextFnMap={}}}])}();function lie(e,t){var n=[];return uie(n,e,t),n.join("")}function uie(e,t,n){t.isTextNode()?e.push(t.data):t.isCardNode()?e.push(n.getText(t)||" "):(bt.fatal(t.isElement(),"plugins/toc/src/kernel/helpers/get-node-text-content.ts:31"),t.children.forEach((function(t){uie(e,t,n)})))}function cie(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,sie()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function sie(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(sie=function(){return!!e})()}var die={h1:1,h2:2,h3:3,h4:4,h5:5,h6:6},fie=/[\u2170-\u217b]/,hie=function(e){function t(){var e;return(0,Ke.A)(this,t),e=cie(this,t,arguments),Object.defineProperty(e,"_tocNodes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(e,"cardToTextManager",{enumerable:!0,configurable:!0,writable:!0,value:new aie}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){var n=this,r=new Set;e.on("document.destroy",(function(){n._tocNodes=[],r.clear(),n.kernel.emitPluginEvent("tocChange",n.getToc())})),t.on("nodechange",(function(e){var t=e.node,n=e.type;if(!t.isTextNode()||"text"!==n&&"insert"!==n)t.hasCategory(qe.Heading)&&die[t.nodeName]&&("insert"===n||"remove"===n||"attribute"===n&&"collapsed"!==e.attrName)&&r.add(t);else{var o=Ut.closest(t,qe.Heading);o&&die[o.nodeName]&&r.add(o)}})),t.on("operationRollback",(function(){r.clear()})),t.on("aftercontentchange",(function(){if(0!==r.size){var e=Array.from(r);r.clear(),n._refresh(e)}}))}},{key:"destroy",value:function(){this._tocNodes=null,this.cardToTextManager.destroy(),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}},{key:"getToc",value:function(){var e=this,t=Number.MAX_SAFE_INTEGER,n=new Set;this.service.start();var r=this._tocNodes.map((function(r){var o=lie(r,e.cardToTextManager).trim(),i=e.service.prefix(r);if(!o&&!i)return null;var a=die[r.nodeName];return t=Math.min(a,t),n.add(a),{type:r.nodeName,id:r.id,text:i+(fie.test(i)?"":"")+o,level:a}})).filter(Boolean),o={};return Array.from(n).sort().forEach((function(e,t){o[e]=t+1})),r.forEach((function(e){e.depth=o[e.level]||1})),r}},{key:"_updateKernelTocData",value:function(){var e=this.getToc();return this.kernel.setDocExtraContent({toc:e}),e}},{key:"_refresh",value:function(e){var t=this,n=!1;e.forEach((function(e){e.isConnected&&e.parentNode.isRootNode()?e.parentNode.isRootNode()&&(n=!0,t._hasNode(e)?t._tryChangeOrder():t._insertNode(e)):t._removeNode(e)&&(n=!0)}));var r=this._updateKernelTocData();n&&this.kernel.emitPluginEvent("tocChange",r)}},{key:"_tryChangeOrder",value:function(){this._tocNodes.sort((function(e,t){var n=Ut.compare(e,t);return n.following?1:n.preceding?-1:0})),this._updateKernelTocData()}},{key:"_insertNode",value:function(e){if(0===this._tocNodes.length)return this._tocNodes.push(e),void this._updateKernelTocData();for(var t=0,n=this._tocNodes.length;t<n;t++){var r=Ut.compare(this._tocNodes[t],e);if(r.following)return this._tocNodes.splice(t,0,e),void this._updateKernelTocData();bt.fatal(r.preceding,"plugins/toc/src/kernel/index.ts:211")}this._tocNodes.push(e),this._updateKernelTocData()}},{key:"_removeNode",value:function(e){var t=this._tocNodes.indexOf(e);return-1!==t&&(this._tocNodes.splice(t,1),this._updateKernelTocData(),!0)}},{key:"_hasNode",value:function(e){return this._tocNodes.includes(e)}}])}(ct);Object.defineProperty(hie,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:"toc"}),Object.defineProperty(hie,"Service",{enumerable:!0,configurable:!0,writable:!0,value:iie});var pie=HR({pluginName:"customCard",cardName:{customInline:"customInline",customBlock:"customBlock"}});function vie(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,mie()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function mie(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mie=function(){return!!e})()}var gie=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=vie(this,t),Object.defineProperty(r,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(r,"cards",{enumerable:!0,configurable:!0,writable:!0,value:n}),r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t,n,r){var o=this.cards[n.$name];if(!o||!o.editorComponent||!o.viewerComponent){var i=n.$htmlStr;if(i){var a=this.kernel.readData("text/html",i);return void(a&&e.setNode(a))}}this.readCard(e,t,n,r)}},{key:"readCard",value:function(e,t,n,r){var o,i="inline"===(null===(o=e.inode)||void 0===o?void 0:o.cardType)?pie.cardName.customInline:pie.cardName.customBlock;e.setNode(ar.createCard(i,n,r))}}])}(Lj),bie=function(){return(0,$e.A)((function e(t,n){(0,Ke.A)(this,e),Object.defineProperty(this,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"cards",{enumerable:!0,configurable:!0,writable:!0,value:n})}),[{key:"read",value:function(e,t){var n,r,o,i,a=this.cards[null===(r=null===(n=t.attrs)||void 0===n?void 0:n.value)||void 0===r?void 0:r.$name];if(a&&a.editorComponent&&a.viewerComponent)return this.readCard(e,t);var l=null===(i=null===(o=t.attrs)||void 0===o?void 0:o.value)||void 0===i?void 0:i.$htmlStr;if(l){var u=this.kernel.readData("text/html",l);u&&e.setNode(u)}}},{key:"readCard",value:function(e,t){var n,r,o="inline"===(null===(n=t.attrs)||void 0===n?void 0:n.cardType)?pie.cardName.customInline:pie.cardName.customBlock;return e.setNode(ar.createCard(o,(null===(r=t.attrs)||void 0===r?void 0:r.value)||{},t.id)),!1}},{key:"destroy",value:function(){}}])}(),yie=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"write",value:function(e,t,n,r){[pie.cardName.customBlock,pie.cardName.customInline].includes(t)&&(t!==pie.cardName.customInline?e.setNode(e.createBlockCard(t,n,r,{customName:n.$name})):e.setNode(e.createInlineCard(t,n,r,{customName:n.$name})))}}])}();function wie(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Aie()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Aie(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Aie=function(){return!!e})()}var kie=function(e){function t(){return(0,Ke.A)(this,t),wie(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"readNode",value:function(e,t){var n,r,o,i,a,l=null===(n=t.attrs)||void 0===n?void 0:n["data-name"],u=null===(r=t.attrs)||void 0===r?void 0:r["data-value"],c=null===(o=t.attrs)||void 0===o?void 0:o["data-custom-name"];return!!((null===(a=null===(i=t.attrs)||void 0===i?void 0:i.class)||void 0===a?void 0:a.includes("ne-custom-card"))&&l&&u&&c)&&(e.stop(),e.setNode(ar.createCard(l,JSON.parse(decodeURIComponent(u)))),!0)}}])}(Ej);function _ie(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Cie()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Cie(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Cie=function(){return!!e})()}Object.defineProperty(kie,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["div","span"]});var Nie=function(e){function t(e){var n;(0,Ke.A)(this,t);for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return n=_ie(this,t,[].concat(o)),Object.defineProperty(n,"option",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){var n,r,o,i,a=null===(n=t.attrs)||void 0===n?void 0:n.value,l=t.name,u=null===(o=null===(r=t.attrs)||void 0===r?void 0:r.value)||void 0===o?void 0:o.$name,c=e.createElement("inline"===(null===(i=t.attrs)||void 0===i?void 0:i.cardType)?"span":"div",{className:"ne-custom-card",attrs:{"data-name":l,"data-value":encodeURIComponent(JSON.stringify(a)),"data-custom-name":u}}),s=this.getCustomChildNode(u,a);(null==s?void 0:s.length)&&(c.children=s),e.setNode(c)}},{key:"getCustomChildNode",value:function(e,t){var n,r=null===(n=this.option.registry.getCardOption(e))||void 0===n?void 0:n.writeHtml;if("function"!=typeof r)return null;var o=r(t);return"string"!=typeof o?null:IK(o)}}])}(lT);function Oie(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,xie()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function xie(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xie=function(){return!!e})()}var Eie=function(e){function t(e){var n;(0,Ke.A)(this,t);for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return n=Oie(this,t,[].concat(o)),Object.defineProperty(n,"option",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){var n,r,o,i="",a=null===(o=this.option.registry.getCardOption((null===(r=null===(n=t.attrs)||void 0===n?void 0:n.value)||void 0===r?void 0:r.$name)||""))||void 0===o?void 0:o.writeText;if("function"==typeof a){var l=a(t.attrs.value);"string"==typeof l&&(i=l)}t.name===pie.cardName.customInline?e.append(i):e.newline(i)}}])}(YG),Die=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e),Object.defineProperty(this,"cards",{enumerable:!0,configurable:!0,writable:!0,value:{}})}),[{key:"registerCard",value:function(e){this.cards[e.name]=e}},{key:"getCardOption",value:function(e){return this.cards[e]||null}},{key:"getCards",value:function(){return Object.freeze(this.cards)}}])}(),Pie={cards:[]},Rie=function(){return(0,$e.A)((function e(t){var n=this;(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_registry",{enumerable:!0,configurable:!0,writable:!0,value:new Die}),this._option=Object.assign({},Pie,t),this._option.cards.forEach((function(e){n._registry.registerCard(e)}))}),[{key:"cards",get:function(){return this._option.cards}},{key:"registry",get:function(){return this._registry}}])}();function Sie(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Tie()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Tie(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Tie=function(){return!!e})()}Object.defineProperty(Rie,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:pie.pluginName});var jie=function(e){function t(){return(0,Ke.A)(this,t),Sie(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerInlineCard(pie.cardName.customInline),e.registerBlockCard(pie.cardName.customBlock);var t=e.getService(_S.ID),n=e.getService(wS.ID),r=e.getService(EG.ID);t&&t.registerLakeCardReader([pie.cardName.customInline,pie.cardName.customBlock],new gie(this.kernel,this.option.registry.getCards()));var o=e.getService(RT.ID);o&&(o.registerINodeCardReader(pie.cardName.customInline,new bie(this.kernel,this.option.registry.getCards())),o.registerINodeCardReader(pie.cardName.customBlock,new bie(this.kernel,this.option.registry.getCards()))),n&&n.registerHTMLNodeReader(kie.NodeNames,new kie),t&&t.registerLakeCardWriter([pie.cardName.customInline,pie.cardName.customBlock],new yie),n&&n.registerNodeHTMLWriter([pie.cardName.customInline,pie.cardName.customBlock],new Nie(this.option)),r&&r.registerTextWriter([pie.cardName.customInline,pie.cardName.customBlock],new Eie(this.option))}}])}(ct);Object.defineProperty(jie,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:pie.pluginName}),Object.defineProperty(jie,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:Rie});var Iie=HR({pluginName:"search",toolbar:"search",command:{search:"search",replaceText:"replaceText",replaceAll:"replaceAll"},service:{ISearchService:"ISearchService"}});function Bie(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Mie()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Mie(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Mie=function(){return!!e})()}var Fie=function(e){function t(){return(0,Ke.A)(this,t),Bie(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t,n){var r=e.newJob(),o=Go.replaceText(r,t.map((function(e){return r.newRange(r.newPosition(r.getNodeById(e.start.id),e.start.offset),r.newPosition(r.getNodeById(e.end.id),e.end.offset))})),n);r.setSelection([o])}}])}(gt);function Lie(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Uie()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Uie(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Uie=function(){return!!e})()}Object.defineProperty(Fie,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Iie.command.replaceText});var Vie=function(e){function t(){return(0,Ke.A)(this,t),Lie(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t,n){var r=e.newJob();return t.forEach((function(e){var t;return null===(t=e.replaceAll)||void 0===t?void 0:t.call(e,r,n)})),e.commitJob(r),!0}}])}(gt);function Hie(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,zie()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function zie(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(zie=function(){return!!e})()}Object.defineProperty(Vie,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Iie.command.replaceAll});var Wie=function(e){function t(){return(0,Ke.A)(this,t),Hie(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){}}])}(ct);Object.defineProperty(Wie,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:Iie.pluginName}),Object.defineProperty(Wie,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[Fie,Vie]});var qie=HR({pluginName:"monitor"}),$ie=2e4,Kie=5e3,Yie={enable:!0},Gie=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:Yie}),this._option=Ww()(this._option,t)}),[{key:"enable",get:function(){return this._option.enable}},{key:"perfMonitor",get:function(){var e=this._option.perfMonitor;if(e)return e.maxThreshold||(e.maxThreshold=$ie),e.editTimeout||(e.editTimeout=Kie),e}},{key:"userMonitor",get:function(){return this._option.userMonitor}},{key:"errorMonitor",get:function(){return this._option.errorMonitor}},{key:"reportUrl",get:function(){return this._option.reportUrl}},{key:"transferLogBody",value:function(e){return this._option.transferLogBody?this._option.transferLogBody(e):e}}])}();Object.defineProperty(Gie,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:qie.pluginName});var Jie=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e),Object.defineProperty(this,"markGroupData",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}),[{key:"now",value:function(){var e,t;return(null===(e=globalThis.performance)||void 0===e?void 0:e.now())||(null===(t=Date.now)||void 0===t?void 0:t.call(Date))||(new Date).getTime()}},{key:"elementCount",value:function(){var e=globalThis.document;return e?e.all?e.all.length:e.querySelectorAll("*").length:0}},{key:"markGroupStart",value:function(e){this.markGroupData.set(e,{__start:this.now()})}},{key:"markGroup",value:function(e,t){var n=this.markGroupData.get(e);n&&n.__start&&(n[t]=this.now()-n.__start)}},{key:"markGroupEnd",value:function(e){return this.markGroupData.get(e)}},{key:"destroy",value:function(){this.markGroupData=new Map}}])}();function Xie(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Qie()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Qie(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Qie=function(){return!!e})()}var Zie=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Xie(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),Object.defineProperty(e,"performance",{enumerable:!0,configurable:!0,writable:!0,value:new Jie}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(rt);function eae(e,t){var n,r,o,i,a,l;if(t.enable)switch(e.type){case"error":if(!(null===(n=t.errorMonitor)||void 0===n?void 0:n.enable))return;return void(null===(r=t.errorMonitor)||void 0===r||r.sendLog(e));case"perf":if(!(null===(o=t.perfMonitor)||void 0===o?void 0:o.enable))return;return void(null===(i=t.perfMonitor)||void 0===i||i.sendLog(e));case"user":if(!(null===(a=t.userMonitor)||void 0===a?void 0:a.enable))return;return void(null===(l=t.userMonitor)||void 0===l||l.sendLog(e));default:return}}function tae(e,t){if(t.enable&&t.reportUrl){var n=t.transferLogBody(e),r=new FormData;if(Object.keys(n).forEach((function(e){var t=n[e];nae(t),r.append(e,"string"==typeof t?t:JSON.stringify(t))})),globalThis.navigator&&"sendBeacon"in globalThis.navigator)globalThis.navigator.sendBeacon(t.reportUrl,r);else if("fetch"in globalThis){var o=new Headers;o.append("X-Lakex-Monitor",e.type),fetch(t.reportUrl,{method:"POST",body:r,headers:o})}}}function nae(e){"object"===(0,Gn.A)(e)&&Object.keys(e).forEach((function(t){var n=e[t];n instanceof Error?e[t]={name:n.name,message:n.message,stack:n.stack}:nae(n)}))}function rae(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,oae()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function oae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(oae=function(){return!!e})()}Object.defineProperty(Zie,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze("IMonitorKernelService")});var iae=function(e){function t(){return(0,Ke.A)(this,t),rae(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length)eae(t[0],this.plugin.option),tae(t[0],this.plugin.option);else{var r=t[0],o=t[1],i=t[2];this.kernel.emitEvent("monitorLog",{code:r,data:o,error:i})}}},{key:"destroy",value:function(){this.performance.destroy()}}])}(Zie);function aae(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,lae()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function lae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(lae=function(){return!!e})()}var uae=function(e){function t(){var e;return(0,Ke.A)(this,t),e=aae(this,t,arguments),Object.defineProperty(e,"assertRemover",{enumerable:!0,configurable:!0,writable:!0,value:function(){}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){this.option.enable&&(this.monitorCommandError(),this.monitorDocInitError(),this.monitorGeneralError())}},{key:"monitorGeneralError",value:function(){var e,t=this;(null===(e=this.option.errorMonitor)||void 0===e?void 0:e.enable)&&(this.assertRemover=bt.setGlobalLogger((function(e,n,r){t.service.log({type:"error",name:"error",timestamp:Date.now(),data:{rank:r,msg:e,pos:n}})})))}},{key:"monitorCommandError",value:function(){var e,t=this;(null===(e=this.option.errorMonitor)||void 0===e?void 0:e.enable)&&this.kernel.on("commandExecuteError",(function(e){var n=e.error,r=e.detail;t.service.log({type:"error",name:"commandError",timestamp:Date.now(),data:{rank:1,error:n,commandName:r.commandName,args:r.args}})}))}},{key:"monitorDocInitError",value:function(){var e,t=this;(null===(e=this.option.errorMonitor)||void 0===e?void 0:e.enable)&&this.kernel.on("setDocumentError",(function(e){var n=e.error,r=e.detail;try{"string"==typeof r.content?r.content.slice(0,200):JSON.stringify(r.content).slice(0,200)}catch(e){console.error(e)}t.service.log({type:"error",name:"docInitError",timestamp:Date.now(),data:{error:n,rank:0,docType:r.dataType||"",snapshot:""}})}))}},{key:"destroy",value:function(){Tr((0,Je.A)(t.prototype),"destroy",this).call(this),this.assertRemover()}}])}(ct);function cae(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,sae()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function sae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(sae=function(){return!!e})()}Object.defineProperty(uae,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:qie.pluginName}),Object.defineProperty(uae,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:Gie}),Object.defineProperty(uae,"Service",{enumerable:!0,configurable:!0,writable:!0,value:iae});var dae=function(e){function t(){return(0,Ke.A)(this,t),cae(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t){var n=e.newJob(),r=n.getSelection(),o=Ai.insertCardNode(n,r,"bookmark",t).cardNode;n.setSelection([n.newRange(n.newPosition(o.parentNode,o.offset+1))]),e.commitJob(n)}}])}(pt);function fae(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,hae()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function hae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(hae=function(){return!!e})()}var pae=function(e){function t(){return(0,Ke.A)(this,t),fae(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t,n){var r=e.newJob(),o=r.getNodeById(t);if(!o||"link"!==o.nodeName)return e.cancelJob(r),!1;var i=r.selectNode(o);i=wi.deleteContent(r,i),bt.fatal(i.collapsed,"plugins/bookmark/src/kernel/commands/link-to-bookmark-command.ts:27");var a=Ai.insertCardNode(r,i,"bookmark",n).cardNode;r.setSelection([r.newRange(r.newPosition(a.parentNode,a.offset+1))]),e.commitJob(r)}}])}(pt);function vae(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,mae()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function mae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mae=function(){return!!e})()}var gae=function(e){function t(){return(0,Ke.A)(this,t),vae(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t,n){var r=e.newJob(),o=r.getNodeById(t);if(!o||"link"!==o.nodeName)return e.cancelJob(r),!1;var i=r.selectNode(o);i=wi.deleteContent(r,i),bt.fatal(i.collapsed,"plugins/bookmark/src/kernel/commands/link-to-bookmark-inline-command.ts:27");var a=Ai.insertCardNode(r,i,"bookmarkInline",n).cardNode;r.setSelection([r.newRange(r.newPosition(a.parentNode,a.offset+1))]),e.commitJob(r)}}])}(pt);function bae(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,yae()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function yae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(yae=function(){return!!e})()}var wae=function(e){function t(){return(0,Ke.A)(this,t),bae(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Ij);function Aae(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,kae()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function kae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(kae=function(){return!!e})()}Object.defineProperty(wae,"CardName",{enumerable:!0,configurable:!0,writable:!0,value:"bookmark"});var _ae=function(e){function t(){return(0,Ke.A)(this,t),Aae(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Ij);Object.defineProperty(_ae,"CardName",{enumerable:!0,configurable:!0,writable:!0,value:"bookmarkInline"});var Cae="card",Nae="title",Oae="inline",xae="block";function Eae(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Dae()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Dae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Dae=function(){return!!e})()}var Pae=function(e){function t(){return(0,Ke.A)(this,t),Eae(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"cardAlias",get:function(){return this._cardValue.mode}},{key:"getSrc",value:function(){return this._cardValue.src}},{key:"setDetail",value:function(e){this._cardValue.detail=e}},{key:"getDetail",value:function(){return this._cardValue.detail}},{key:"hasDetail",value:function(){return!!this._cardValue.detail}},{key:"getMode",value:function(){return this._cardValue.mode||Cae}},{key:"setMode",value:function(e){this._cardValue.mode=e}},{key:"getRuntimeMode",value:function(){return this._cardValue.mode||Cae}},{key:"isTitleMode",value:function(){return this.getRuntimeMode()===Nae}},{key:"isCardMode",value:function(){return this.getRuntimeMode()===Cae}}],[{key:"createBy",value:function(e,n,r){return bt.fatal(e&&n&&r,"plugins/bookmark/src/kernel/bookmark-card-data.ts:29"),Ww()({},Sl.setCardSpacingToValue(Nl,t.DefaultCardValue),{src:e,text:n,mode:r})}},{key:"fromLake",value:function(e,n){var r=n.type,o=(e=e||{}).mode;return r===Oae&&(e.mode=Nae),r===xae&&o===Nae&&(e.mode=Cae),Ww()({},t.DefaultCardValue,e)}},{key:"toLake",value:function(e){return e}}])}(Sl);function Rae(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Sae()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Sae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Sae=function(){return!!e})()}Object.defineProperty(Pae,"DefaultCardValue",{enumerable:!0,configurable:!0,writable:!0,value:{mode:void 0,src:void 0,text:void 0,detail:void 0}});var Tae=function(e){function t(){return(0,Ke.A)(this,t),Rae(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t,n,r){e.setNode(ar.createCard("bookmark",Pae.fromLake(n,{type:xae}),r))}}])}(Lj);function jae(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Iae()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Iae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Iae=function(){return!!e})()}var Bae=function(e){function t(){return(0,Ke.A)(this,t),jae(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t,n,r){e.setNode(ar.createCard("bookmarkInline",Pae.fromLake(n,{type:Oae}),r))}}])}(Lj);function Mae(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Fae()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Fae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Fae=function(){return!!e})()}var Lae=function(e){function t(){return(0,Ke.A)(this,t),Mae(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){var n=(t.attrs||{}).value||{},r=n.src,o=n.text;r&&e.append(o||r)}}])}(YG);function Uae(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Vae()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Vae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Vae=function(){return!!e})()}Object.defineProperty(Lae,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["bookmark","bookmarkInline"]});var Hae=function(e){function t(){return(0,Ke.A)(this,t),Uae(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){var n,r=(null===(n=t.attrs)||void 0===n?void 0:n.value)||{},o=r.src,i=r.detail;if(o){var a=(null==i?void 0:i.title)||o;if("bookmark"===t.name){var l=e.createElement("div",{className:"ne-bookmark"}),u=e.createElement("a",{attrs:{href:o,target:"_blank"}});return e.appendChild(l,u),e.appendChild(u,e.createTextNode(o)),void e.setNode(l)}var c=e.createElement("span",{className:"ne-bookmark-inline"}),s=e.createElement("a",{attrs:{href:o,target:"_blank"}});e.appendChild(s,e.createTextNode(a||o)),e.appendChild(c,s),e.setNode(c)}}}])}(lT);Object.defineProperty(Hae,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["bookmark","bookmarkInline"]});var zae=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"write",value:function(e,t,n,r){e.setNode(e.createBlockCard("bookmarklink",Pae.toLake(n),r))}}])}(),Wae=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"write",value:function(e,t,n,r){e.setNode(e.createInlineCard("bookmarkInline",Pae.toLake(n),r))}}])}(),qae=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Object.assign({},t)}),[{key:"recognizeYuque",get:function(){return!!this._option.recognizeYuque}}])}();function $ae(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Kae()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Kae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Kae=function(){return!!e})()}Object.defineProperty(qae,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"bookmark"});var Yae=function(e){function t(){return(0,Ke.A)(this,t),$ae(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t,n,r){var o=n.mode,i=n.src;"title"!==o||"string"!=typeof i?e.setNode(ar.createCard("title"===o?"inline":"block",{cardName:t,cardValue:n},r)):e.setNode(ar.createCard("bookmarkInline",Pae.fromLake(n,{type:Oae}),r))}}])}(Lj);function Gae(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Jae()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Jae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Jae=function(){return!!e})()}var Xae=function(e){function t(){return(0,Ke.A)(this,t),Gae(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"createBookmarkNode",value:function(e,t,n){return"block"===t?ar.createCard("bookmark",Pae.fromLake(e,{type:xae}),n):(bt.fatal("inline"===t,"plugins/bookmark/src/kernel/bookmark-kernel-service.ts:27"),ar.createCard("bookmarkInline",Pae.fromLake(e,{type:Oae}),n))}},{key:"destroy",value:function(){}}])}(Kre);function Qae(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Zae()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Zae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Zae=function(){return!!e})()}var ele=function(e){function t(){return(0,Ke.A)(this,t),Qae(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t){var n,r=null===(n=t.attrs)||void 0===n?void 0:n.value;if(!r)return!0;var o=r.mode,i=r.src;return"title"!==o||"string"!=typeof i||(e.setNode(ar.createCard("bookmarkInline",Pae.fromLake(r,{type:Oae}),t.id)),!0)}}])}(Ij);function tle(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,nle()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function nle(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nle=function(){return!!e})()}var rle=function(e){function t(){return(0,Ke.A)(this,t),tle(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerBlockCard("bookmark"),e.registerInlineCard("bookmarkInline"),e.registerCommand("linkToBookmark",new pae),e.registerCommand("linkToBookmarkInline",new gae),e.registerCommand("insertBookmark",new dae)}},{key:"afterInit",value:function(){var e,t,n=this.kernel,r=n.getService(_S.ID);r&&(r.registerLakeCardReader("bookmarklink",new Tae),r.registerLakeCardReader("bookmarkInline",new Bae)),this.option.recognizeYuque&&!n.plugins.find((function(e){return"yuque"===e.constructor.PluginName}))&&(null===(e=n.getService(_S.ID))||void 0===e||e.registerLakeCardReader("yuqueInline",new Yae),null===(t=n.getService(RT.ID))||void 0===t||t.registerINodeCardReader("yuqueInline",new ele));var o=n.getService(RT.ID);o&&(o.registerINodeCardReader(wae.CardName,new wae),o.registerINodeCardReader(_ae.CardName,new _ae));var i=n.getService(_S.ID);i&&(i.registerLakeCardWriter("bookmark",new zae),i.registerLakeCardWriter("bookmarkInline",new Wae));var a=n.getService(EG.ID);a&&a.registerTextWriter(Lae.NodeNames,new Lae);var l=n.getService(wS.ID);l&&l.registerNodeHTMLWriter(Hae.NodeNames,new Hae)}}])}(ct);function ole(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,ile()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function ile(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ile=function(){return!!e})()}Object.defineProperty(rle,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:"bookmark"}),Object.defineProperty(rle,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:qae}),Object.defineProperty(rle,"Service",{enumerable:!0,configurable:!0,writable:!0,value:Xae});var ale=function(e){function t(){return(0,Ke.A)(this,t),ole(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Ij);Object.defineProperty(ale,"CardName",{enumerable:!0,configurable:!0,writable:!0,value:"calendar"});var lle=o(3364),ule=o.n(lle),cle=o(1164),sle=o.n(cle),dle=o(6709),fle=o.n(dle),hle=o(7534),ple=o.n(hle),vle=o(293),mle=o.n(vle),gle=o(7960),ble=o.n(gle),yle=o(2711),wle=o.n(yle),Ale=o(8513),kle=o.n(Ale),_le=o(1132),Cle=o.n(_le),Nle=o(7639),Ole=o.n(Nle);Xf().extend(sle()),Xf().extend(ble()),Xf().extend(ple()),Xf().extend(mle()),Xf().extend(fle()),Xf().extend(sle()),Xf().extend(ule()),Xf().extend(Ole()),Xf().extend(wle()),Xf().extend(kle()),Xf().extend(Cle()),"zhCN"===cc.getLanguage()&&Xf().locale("zh-cn");var xle="01:01:01";function Ele(){var e=Xf()();return Xf()("".concat(e.format("YYYY-MM"),"-01 ").concat(xle))}function Dle(e){return Number.parseInt(e.format("YYYYMMDD"),10)}function Ple(e){return Xf()("".concat(e," ").concat(xle),"YYYYMMDD HH:mm:ss")}var Rle="day",Sle="month",Tle=7,jle=[sc("星期日"),sc("星期一"),sc("星期二"),sc("星期三"),sc("星期四"),sc("星期五"),sc("星期六")],Ile=[{name:sc("蓝色"),line:"calendar.blue.line",border:"calendar.blue.border",background:"calendar.blue.background"},{name:sc("玫红色"),line:"calendar.magenta.line",border:"calendar.magenta.border",background:"calendar.magenta.background"},{name:sc("绿色"),line:"calendar.green.line",border:"calendar.green.border",background:"calendar.green.background"},{name:sc("红色"),line:"calendar.red.line",border:"calendar.red.border",background:"calendar.red.background"},{name:sc("紫色"),line:"calendar.purple.line",border:"calendar.purple.border",background:"calendar.purple.background"},{name:sc("黄色"),line:"calendar.yellow.line",border:"calendar.yellow.border",background:"calendar.yellow.background"}],Ble={"calendar.blue.line":{light:"#117CEE"},"calendar.blue.border":{light:"#81BBF8"},"calendar.blue.background":{light:"#D9EAFC"},"calendar.magenta.line":{light:"#D22D8D"},"calendar.magenta.border":{light:"#F297CC"},"calendar.magenta.background":{light:"#FBDFEF"},"calendar.green.line":{light:"#74B602"},"calendar.green.border":{light:"#C1E77E"},"calendar.green.background":{light:"#E8F7CF"},"calendar.red.line":{light:"#DF2A3F"},"calendar.red.border":{light:"#F1A2AB"},"calendar.red.background":{light:"#FBE4E7"},"calendar.purple.line":{light:"#601BDE"},"calendar.purple.border":{light:"#BA9BF2"},"calendar.purple.background":{light:"#E6DCF9"},"calendar.yellow.line":{light:"#ECAA04"},"calendar.yellow.border":{light:"#F5D480"},"calendar.yellow.background":{light:"#F9EFCD"}},Mle=function(){function e(t){var n=t.title,r=t.desc,o=t.colorIndex,i=t.start,a=t.end;(0,Ke.A)(this,e),Object.defineProperty(this,"_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_title",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_desc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_start",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_end",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_colorIndex",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_startDate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_endDate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._id=Dr(5),this._title=n,this._desc=r,this._start=i,this._end=null!=a?a:i,this._colorIndex=o,this._startDate=Ple(this._start),this._endDate=Ple(this._end),this._order=0}return(0,$e.A)(e,[{key:"id",get:function(){return this._id}},{key:"title",get:function(){return this._title},set:function(e){this._title=e}},{key:"desc",get:function(){return this._desc},set:function(e){this._desc=e}},{key:"colorIndex",get:function(){return this._colorIndex},set:function(e){this._colorIndex=e}},{key:"start",get:function(){return this._start},set:function(e){this._start=e,this._startDate=Ple(this._start)}},{key:"startDate",get:function(){return this._startDate},set:function(e){this._startDate=e,this._start=Dle(this._startDate)}},{key:"end",get:function(){return this._end},set:function(e){this._end=e,this._endDate=Ple(this._end)}},{key:"endDate",get:function(){return this._endDate},set:function(e){this._endDate=e,this._end=Dle(this._endDate)}},{key:"duration",get:function(){return this._endDate.diff(this._startDate,Rle)}},{key:"include",value:function(e){return Xf().isDayjs(e)?e.isBetween(this._startDate,this._endDate,null,"[]"):this._start<=e&&e<=this._end}},{key:"isStartDate",value:function(e){return Xf().isDayjs(e)?e.isSame(this._startDate,Rle):this._start===e}},{key:"isEndDate",value:function(e){return Xf().isDayjs(e)?e.isSame(this._endDate,Rle):this._end===e}},{key:"isSameDaySchedule",value:function(){return this.start===this.end}},{key:"updateValue",value:function(e,t){this[e]=t}},{key:"toJSON",value:function(){return{id:this._id,title:this._title,desc:this._desc,start:this._start,end:this._end,colorIndex:this._colorIndex}}}],[{key:"convert",value:function(t){var n=new e(t);return n._id=t.id,n}},{key:"cloneWithUpdateValue",value:function(t,n,r){var o=e.convert(t);return o.updateValue(n,r),o}}])}();function Fle(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Lle()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Lle(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Lle=function(){return!!e})()}var Ule={currentDate:Dle(Ele()),colorIndex:0,schedules:{}},Vle=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=Fle(this,t,[e]),Object.defineProperty(n,"_startWeekDay",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_calendarDate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_dateRows",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_scheduleList",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_dateScheduleMap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"redoScheduleList",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(n,"undoScheduleList",{enumerable:!0,configurable:!0,writable:!0,value:[]}),n.watchCardValue(),n.watchCardValueProperties(),n.setExtendInfo(),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"watchCardValue",value:function(){var e=this,t=this._cardValue;Object.defineProperty(this,"_cardValue",{get:function(){return t},set:function(n){t=n,e.watchCardValueProperties(),e.setExtendInfo()}})}},{key:"watchCardValueProperties",value:function(){var e=this,t=this._cardValue.schedules;Object.defineProperty(this._cardValue,"schedules",{get:function(){return t},set:function(n){t=n,e.setScheduleExtendInfo()}})}},{key:"setExtendInfo",value:function(){this.setCalendarDate(),this.setDateRows(),this.setScheduleExtendInfo()}},{key:"setScheduleExtendInfo",value:function(){this.setScheduleList(),this.setDateScheduleMap()}},{key:"getCurrentDate",value:function(){return this._cardValue.currentDate}},{key:"setCurrentDate",value:function(e){this._cardValue.currentDate=e}},{key:"getColorIndex",value:function(){return this._cardValue.colorIndex||0}},{key:"setColorIndex",value:function(e){this._cardValue.colorIndex=e}},{key:"getSchedules",value:function(){return this._cardValue.schedules}},{key:"setSchedules",value:function(e,t){this.undoScheduleList.push(this.getSchedules()),this.redoScheduleList=[],this.undoScheduleList.length>20&&this.undoScheduleList.shift(),this._cardValue.schedules=e,t||this.afterChange()}},{key:"undo",value:function(){0!==this.undoScheduleList.length&&(this.redoScheduleList.push(this.getSchedules()),this._cardValue.schedules=this.undoScheduleList.pop(),this.afterChange())}},{key:"redo",value:function(){0!==this.redoScheduleList.length&&(this.undoScheduleList.push(this.getSchedules()),this._cardValue.schedules=this.redoScheduleList.pop(),this.afterChange())}},{key:"setSchedule",value:function(e){var t=e.type,n=e.schedule,r=e.prevSchedule,o=e.sync,i=e.index,a=Ww()({},this.getSchedules()),l=function(e,t){for(var n=-1,r=0;r<e.length;r++)if(e[r].id===t){n=r;break}return n},u=function(e,t){a[e.start]||(a[e.start]=[]),void 0!==t&&-1!==t?a[e.start].splice(t,0,e):a[e.start].push(e)},c=function(e){var t=a[e.start],n=l(t,e.id);a[e.start].splice(n,1)};switch(t){case"add":u(n);break;case"update":if(n.start===r.start){var s=a[n.start],d=l(s||[],n.id);if(s&&-1!==d)a[n.start]=[].concat((0,ln.A)(s.slice(0,d)),[n],(0,ln.A)(s.slice(d+1,s.length))),void 0!==i&&-1!==i&&d!==i&&a[n.start].splice(i,0,a[n.start].splice(d,1)[0]);else{for(var f=Object.keys(a),h="",p=-1,v=0;v<f.length;v++){var m=a[f[v]],g=l(m||[],n.id);if(-1!==g){h=f[v],p=g;break}}""!==h&&-1!==p&&(c({start:h,id:n.id}),u(n))}}else c(r),u(n,i);break;case"delete":c(n)}this.setSchedules(a,o)}},{key:"getStartWeekDay",value:function(){var e;return null!==(e=this._startWeekDay)&&void 0!==e?e:0}},{key:"setStartWeekDay",value:function(e){this._startWeekDay=e}},{key:"getCalendarDate",value:function(){return this._calendarDate}},{key:"setCalendarDate",value:function(){var e=this.getCurrentDate(),t=this.getStartWeekDay(),n=Tle,r=Ple(e),o=r.daysInMonth(),i=Math.abs(r.day()-t),a=r.subtract(i,Rle),l=i+o,u=l%n;l+=0===u?n:n-u%n;var c=a.add(l,Rle);this._calendarDate={startDate:a,endDate:c,totalDayCount:l}}},{key:"getDateRows",value:function(){return this._dateRows||[]}},{key:"setDateRows",value:function(){for(var e=this.getCalendarDate(),t=e.startDate,n=e.totalDayCount,r=Tle,o=[],i=[],a=0;a<=n;a++)0!==a&&a%r==0&&(o.push((0,ln.A)(i)),i=[]),i.push(t.add(a,Rle));this._dateRows=o}},{key:"getScheduleList",value:function(){return this._scheduleList||[]}},{key:"setScheduleList",value:function(){var e=[],t=this.getSchedules();if(t&&0!==Object.keys(t).length){var n=[];if(Object.keys(t).forEach((function(e){var r=t[e];n.push.apply(n,(0,ln.A)(r))})),0!==n.length){var r=this.getCalendarDate(),o=r.startDate,i=r.endDate,a=Dle(o),l=Dle(i);e=n.filter((function(e){return e.start>=a&&e.start<=l||e.end>=a&&e.end<=l||e.start<a&&e.end>l})).map((function(e){return Mle.convert(e)})).sort((function(e,t){return e.start-t.start})),this._scheduleList=e}else this._scheduleList=e}else this._scheduleList=e}},{key:"getDateScheduleMap",value:function(){return this._dateScheduleMap||{}}},{key:"setDateScheduleMap",value:function(){for(var e={},t=this.getDateRows(),n=this.getScheduleList(),r=function(){for(var r={},i=function(){var i=t[o][a],l=Dle(i),u=n.filter((function(e){return e.include(i)}));if(0===a&&0!==o){var c=e[Dle(i.subtract(1,Rle))];u=u.sort((function(e,t){var n,r;return(null!==(n=c[e.id])&&void 0!==n?n:99)-(null!==(r=c[t.id])&&void 0!==r?r:99)}))}e[l]={};var s=[];u.filter((function(t){var n=r[t.id];return!n||(e[l][t.id]=n,s.push(n),!1)})).forEach((function(t){var n=function(e){for(var t=0,n=0;n<e.length&&e.includes(t);n++)t+=1;return t}(s);r[t.id]=n,e[l][t.id]=n,s.push(n)}))},a=0;a<t[o].length;a++)i()},o=0;o<t.length;o++)r();this._dateScheduleMap=e}}],[{key:"getInitCardValue",value:function(){return Sl.setCardSpacingToValue(Nl,Jn(t.DefaultCardValue))}},{key:"fromLake",value:function(e){var n=null==e?void 0:e.currentDate;if(n){var r=String(n);/01$/.test(r)||(e.currentDate=parseInt("".concat(r.slice(0,r.length-2),"01"),10))}return Ww()({},t.DefaultCardValue,e)}},{key:"toLake",value:function(e){return e}}])}(Sl);function Hle(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,zle()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function zle(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(zle=function(){return!!e})()}Object.defineProperty(Vle,"DefaultCardValue",{enumerable:!0,configurable:!0,writable:!0,value:Ule});var Wle=function(e){function t(){return(0,Ke.A)(this,t),Hle(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t,n,r){e.setNode(ar.createCard(eM.CALENDAR.NODE_NAME,Vle.fromLake(n),r))}}])}(Lj);function qle(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,$le()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function $le(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($le=function(){return!!e})()}var Kle=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=qle(this,t),Object.defineProperty(r,"getDocReadURL",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(r,"_currentURL",{enumerable:!0,configurable:!0,writable:!0,value:""}),r._currentURL=e,r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){var n,r=t.id,o=(null===(n=this.getDocReadURL)||void 0===n?void 0:n.call(this,e.currentURL||this._currentURL,r))||"",i=e.createElement("div",{className:"ne-calendar"}),a=e.createElement("a",{attrs:{href:o,target:"_blank"}});e.appendChild(a,e.createTextNode(o)),e.appendChild(i,e.createTextNode("此处为语雀日历卡片，点击链接查看：")),e.appendChild(i,a),e.setNode(i)}}])}(lT),Yle=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"write",value:function(e,t,n,r){e.setNode(e.createBlockCard(eM.CALENDAR.LAKE_NAME,Vle.toLake(n),r))}}])}(),Gle={getDocReadURL:function(e,t){return e}},Jle=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Ww()({},Gle,t)}),[{key:"getDocReadURL",get:function(){return this._option.getDocReadURL}}])}();function Xle(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(Jle,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:eM.CALENDAR.OPTION_NAME});var Qle=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"write",value:function(e,t){var n=t.attrs.value.schedules,r=!1;return Object.keys(n).forEach((function(t){var o,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Xle(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xle(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(n[t]);try{for(i.s();!(o=i.n()).done;){var a=o.value;r=!0,e.append("[".concat(a.start,"~").concat(a.end,"] ").concat(a.title,"  ")),e.append("\n")}}catch(e){i.e(e)}finally{i.f()}})),r&&e.append("\n"),!1}}])}();function Zle(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,eue()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function eue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(eue=function(){return!!e})()}var tue=function(e){function t(){return(0,Ke.A)(this,t),Zle(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerBlockCard(t.cardName)}},{key:"afterInit",value:function(){var e=this.kernel,t=e.getService(_S.ID);t&&t.registerLakeCardReader(eM.CALENDAR.UI_NAME,new Wle);var n=e.getService(RT.ID);n&&n.registerINodeCardReader(ale.CardName,new ale);var r=e.getService(_S.ID);r&&r.registerLakeCardWriter(eM.CALENDAR.NODE_NAME,new Yle);var o=e.getService(wS.ID);o&&o.registerNodeHTMLWriter(eM.CALENDAR.NODE_NAME,new Kle(e.option.currentURL,this.option.getDocReadURL));var i=e.getService(tI.ID);i&&i.registerMarkdownWriter(eM.CALENDAR.NODE_NAME,new Qle)}}])}(ct);function nue(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,rue()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function rue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rue=function(){return!!e})()}Object.defineProperty(tue,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:"calendar"}),Object.defineProperty(tue,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:Jle}),Object.defineProperty(tue,"cardName",{enumerable:!0,configurable:!0,writable:!0,value:eM.CALENDAR.NODE_NAME});var oue=function(e){function t(){return(0,Ke.A)(this,t),nue(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Ij);Object.defineProperty(oue,"CardName",{enumerable:!0,configurable:!0,writable:!0,value:"vote"});var iue="loading",aue="done",lue={QueryDetail:"queryDetail",QueryCheck:"queryCheck",Vote:"vote"},uue="update",cue="delete",sue="single",due={single:"单选",multiple:"多选"},fue=[{name:due.single,value:sue},{name:due.multiple,value:"multiple"}];function hue(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,pue()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function pue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pue=function(){return!!e})()}function vue(){return{id:Dr(),value:""}}var mue={voteId:null,type:fue[0].value,title:"",items:[],deadline:Xf()(Xf()().format("YYYY-MM-DD 00:00:00")).add(2,"day").toISOString()},gue=function(e){function t(){return(0,Ke.A)(this,t),hue(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getVoteId",value:function(){return this._cardValue.voteId}},{key:"setVoteId",value:function(e){this._cardValue.voteId=e}},{key:"getTitle",value:function(){return this._cardValue.title}},{key:"setTitle",value:function(e,t){this._cardValue.title=e,t||this.afterChange()}},{key:"getType",value:function(){return this._cardValue.type}},{key:"setType",value:function(e){this._cardValue.type=e}},{key:"getDeadline",value:function(){return this._cardValue.deadline}},{key:"setDeadline",value:function(e){this._cardValue.deadline=e}},{key:"getItems",value:function(){return this._cardValue.items}},{key:"setItems",value:function(e,t){this._cardValue.items=e,t||this.afterChange()}},{key:"setVote",value:function(e){var t=e.type,n=e.item,r=e.sync,o=(0,ln.A)(this.getItems()),i=function(e){for(var t=-1,n=0;n<o.length;n++)if(o[n].id===e.id){t=n;break}return t};switch(t){case"add":o.push(vue());break;case uue:var a=i(n);o=[].concat((0,ln.A)(o.slice(0,a)),[n],(0,ln.A)(o.slice(a+1,o.length)));break;case cue:var l=i(n);o.splice(l,1)}this.setItems(o,r)}}],[{key:"getInitCardValue",value:function(){return Sl.setCardSpacingToValue(Nl,Object.assign(Object.assign({},Jn(mue)),{voteId:Dr(),items:[vue(),vue()]}))}},{key:"fromLake",value:function(e){return Ww()({},t.DefaultCardValue,{voteId:Dr()},e)}},{key:"toLake",value:function(e){return e}},{key:"fromPaste",value:function(e){var n=Ww()({},t.DefaultCardValue,e);return n.voteId=Dr(),n.items=n.items.map((function(e){return Object.assign(Object.assign({},e),{id:Dr()})})),n}}])}(Sl);function bue(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,yue()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function yue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(yue=function(){return!!e})()}Object.defineProperty(gue,"DefaultCardValue",{enumerable:!0,configurable:!0,writable:!0,value:mue});var wue=function(e){function t(){return(0,Ke.A)(this,t),bue(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t,n,r){var o=ar.createCard(eM.VOTE.NODE_NAME,gue.fromLake(n),r);e.setNode(o)}}])}(Lj);function Aue(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,kue()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function kue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(kue=function(){return!!e})()}var _ue=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=Aue(this,t),Object.defineProperty(r,"writeHtmlUrl",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(r,"_currentUrl",{enumerable:!0,configurable:!0,writable:!0,value:""}),r._currentUrl=e,r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){var n,r=t.id,o=(null===(n=this.writeHtmlUrl)||void 0===n?void 0:n.call(this,e.currentURL||this._currentUrl,r||"",t))||function(e,t){if(!e)return"";var n=new URL(e),r=n.origin,o=n.pathname,i="".concat(r).concat(o.replace(/\/edit$/,""));return t?"".concat(i,"#").concat(t):i}(e.currentURL,r)||"",i=e.createElement("div",{className:"ne-vote"}),a=e.createElement("a",{attrs:{href:o}});e.appendChild(a,e.createTextNode(o)),e.appendChild(i,e.createTextNode("此处为语雀投票卡片，点击链接查看：")),e.appendChild(i,a),e.setNode(i)}}])}(lT);function Cue(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Nue()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Nue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Nue=function(){return!!e})()}var Oue=function(e){function t(){return(0,Ke.A)(this,t),Cue(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t,n,r){var o=e.createBlockCard(eM.VOTE.LAKE_NAME,gue.toLake(n),r);e.setNode(o)}}])}($j),xue=(0,$e.A)((function e(t){var n=this;(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"writeHtmlUrl",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t,r){var o,i;return(null===(i=(o=n._option).writeHtmlUrl)||void 0===i?void 0:i.call(o,e,t,r))||""}}),this._option=Ww()({},t)}));function Eue(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Due()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Due(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Due=function(){return!!e})()}Object.defineProperty(xue,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:eM.VOTE.OPTION_NAME});var Pue=function(e){function t(){return(0,Ke.A)(this,t),Eue(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var n,r,o,i;e.registerBlockCard(t.cardName),null===(n=e.getService(_S.ID))||void 0===n||n.registerLakeCardReader(eM.VOTE.UI_NAME,new wue),null===(r=e.getService(RT.ID))||void 0===r||r.registerINodeCardReader(oue.CardName,new oue),null===(o=e.getService(_S.ID))||void 0===o||o.registerLakeCardWriter(eM.VOTE.NODE_NAME,new Oue),null===(i=e.getService(wS.ID))||void 0===i||i.registerNodeHTMLWriter(eM.VOTE.NODE_NAME,new _ue(e.option.currentURL,this.option.writeHtmlUrl))}}])}(ct);function Rue(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Sue()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Sue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Sue=function(){return!!e})()}Object.defineProperty(Pue,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:"vote"}),Object.defineProperty(Pue,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:xue}),Object.defineProperty(Pue,"cardName",{enumerable:!0,configurable:!0,writable:!0,value:eM.VOTE.NODE_NAME});var Tue=function(e){function t(){return(0,Ke.A)(this,t),Rue(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Ij);function jue(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Iue()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Iue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Iue=function(){return!!e})()}Object.defineProperty(Tue,"CardName",{enumerable:!0,configurable:!0,writable:!0,value:"textDiagram"});var Bue=function(e){function t(){return(0,Ke.A)(this,t),jue(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"type",get:function(){return this._cardValue.type}},{key:"code",get:function(){return this._cardValue.code}},{key:"url",get:function(){return this._cardValue.url}},{key:"collapse",get:function(){return this._cardValue.collapse}},{key:"update",value:function(e){this._cardValue=Object.assign(Object.assign({},this._cardValue),e),this.afterChange()}},{key:"toGraph",value:function(){return{type:this.type,code:this.code||"",url:this.url}}}],[{key:"createStandardCardValue",value:function(e){return Sl.setCardSpacingToValue(Nl,Ww()({},t.DefaultCardValue,e))}},{key:"fromLake",value:function(e,n){return["puml","flowchart","graphviz","mermaid"].includes(n)&&(e.type=n),Ww()({},t.DefaultCardValue,A4()(e,["type","code","url","collapse"]))}},{key:"toLake",value:function(e){var t=["type","code","url"];return e.collapse&&t.push("collapse"),A4()(e,t)}}])}(Sl);Object.defineProperty(Bue,"DefaultCardValue",{enumerable:!0,configurable:!0,writable:!0,value:{type:"puml",code:"",url:null,collapse:!1}});const Mue=Bue;function Fue(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Lue()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Lue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Lue=function(){return!!e})()}var Uue=function(e){function t(){return(0,Ke.A)(this,t),Fue(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t,n,r){var o=e.createCard(eM.TEXT_DIAGRAM.NODE_NAME,Mue.fromLake(n,t),r);e.setNode(o)}}])}(Lj);function Vue(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Hue()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Hue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Hue=function(){return!!e})()}var zue=function(e){function t(){return(0,Ke.A)(this,t),Vue(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"writeAsCode",value:function(e,t,n){var r,o=e.createElement("div",{className:"ne-text-diagram"});e.isInlineMode()&&(r={border:"1px solid #e8e8e8",borderRadius:"2px",background:"#f9f9f9",padding:"16px",fontSize:"13px",color:"#595959"});var i=e.createElement("pre",{attrs:{"data-language":n},style:r});e.appendChild(i,e.createTextNode(t)),e.appendChild(o,i),e.setNode(o)}},{key:"writeAsImage",value:function(e,t){var n=e.createElement("div",{className:"ne-text-diagram"}),r=e.createElement("img",{attrs:{src:t}});e.appendChild(n,r),e.setNode(n)}},{key:"write",value:function(e,t){var n=(t.attrs||{}).value||{},r=n.code,o=n.url,i=n.type;r&&(o?this.writeAsImage(e,o):this.writeAsCode(e,r,i))}}])}(lT);const Wue=zue;function que(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,$ue()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function $ue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($ue=function(){return!!e})()}var Kue=function(e){function t(){return(0,Ke.A)(this,t),que(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t,n,r){var o=e.createBlockCard("diagram",Mue.toLake(n),r);e.setNode(o)}}])}($j),Yue=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"write",value:function(e,t){var n=(t.attrs||{}).value||{},r=n.code,o=n.url,i=n.type;return!!r&&(o?(this.writeAsImage(e,o),!1):(this.writeAsCode(e,r,i),!1))}},{key:"writeAsCode",value:function(e,t,n){e.append("```"+n+"\n"),e.append(t),e.append("\n```\n\n")}},{key:"writeAsImage",value:function(e,t){e.append("![](".concat(t,")\n\n"))}}])}();function Gue(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Jue()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Jue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Jue=function(){return!!e})()}var Xue=function(e){function t(){return(0,Ke.A)(this,t),Gue(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t,n,r,o,i,a,l,u,c;e.registerBlockCard(eM.TEXT_DIAGRAM.NODE_NAME),null===(t=e.getService(_S.ID))||void 0===t||t.registerLakeCardReader("diagram",new Uue),null===(n=e.getService(_S.ID))||void 0===n||n.registerLakeCardReader("puml",new Uue),null===(r=e.getService(_S.ID))||void 0===r||r.registerLakeCardReader("graphviz",new Uue),null===(o=e.getService(_S.ID))||void 0===o||o.registerLakeCardReader("flowchart",new Uue),null===(i=e.getService(_S.ID))||void 0===i||i.registerLakeCardReader("mermaid",new Uue),null===(a=e.getService(RT.ID))||void 0===a||a.registerINodeCardReader(Tue.CardName,new Tue),null===(l=e.getService(_S.ID))||void 0===l||l.registerLakeCardWriter(eM.TEXT_DIAGRAM.NODE_NAME,new Kue),null===(u=e.getService(wS.ID))||void 0===u||u.registerNodeHTMLWriter(eM.TEXT_DIAGRAM.NODE_NAME,new Wue),null===(c=e.getService(tI.ID))||void 0===c||c.registerMarkdownWriter(eM.TEXT_DIAGRAM.NODE_NAME,new Yue)}}])}(ct);Object.defineProperty(Xue,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:eM.TEXT_DIAGRAM.PLUGIN_NAME});var Que={accept:null,getDocReadURL:function(e){return e}},Zue=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Ww()({},Que,t)}),[{key:"accept",get:function(){return this._option.accept}},{key:"getDocReadURL",value:function(e,t){return this._option.getDocReadURL(e,t)}}])}();Object.defineProperty(Zue,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:eM.AUDIO.OPTION_NAME});var ece="error",tce="pending",nce="uploading",rce="uploaded",oce="transcoding",ice="transcoded",ace="copyright";function lce(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,uce()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function uce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(uce=function(){return!!e})()}var cce={status:"pending",audioInfo:{id:null,fileName:null,fileSize:null},allowDownloadInViewer:!1,errorMessage:null,taskId:null},sce=function(e){function t(){return(0,Ke.A)(this,t),lce(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getTaskId",value:function(){return this._cardValue.taskId}},{key:"getAudioInfo",value:function(){return this._cardValue.audioInfo}},{key:"setAudioInfo",value:function(e){this._cardValue.audioInfo=e}},{key:"getStatus",value:function(){return this._cardValue.status}},{key:"setStatus",value:function(e){this._cardValue.status=e}},{key:"getErrorMessage",value:function(){return this._cardValue.errorMessage}},{key:"setErrorMessage",value:function(e){this._cardValue.errorMessage=e}},{key:"getAllowDownloadInViewer",value:function(){return this._cardValue.allowDownloadInViewer}},{key:"setAllowDownloadInViewer",value:function(e){this._cardValue.allowDownloadInViewer=e}},{key:"getFileName",value:function(){var e;return null===(e=this._cardValue.audioInfo)||void 0===e?void 0:e.fileName}},{key:"setFileName",value:function(e){this._cardValue.audioInfo.fileName=e}},{key:"getFileSize",value:function(){var e;return null===(e=this._cardValue.audioInfo)||void 0===e?void 0:e.fileSize}},{key:"setFileSize",value:function(e){this._cardValue.audioInfo.fileSize=e}},{key:"getId",value:function(){var e;return null===(e=this._cardValue.audioInfo)||void 0===e?void 0:e.id}},{key:"setId",value:function(e){this._cardValue.audioInfo.id=e}},{key:"isCompleted",value:function(){var e=this._cardValue,t=e.status,n=e.audioInfo;return!!(null==n?void 0:n.id)||t!==tce&&t!==nce}}],[{key:"getInitCardValue",value:function(e){var t,n,r=Jn(cce);return e&&(r.taskId=e.id,r.audioInfo={},e.file&&(r.audioInfo.fileName=null!==(t=e.file.name)&&void 0!==t?t:cce.audioInfo.fileName,r.audioInfo.fileSize=null!==(n=e.file.size)&&void 0!==n?n:cce.audioInfo.fileSize,r.status=tce)),Sl.setCardSpacingToValue(Nl,r)}},{key:"fromLake",value:function(e){var n=Jn(t.DefaultCardValue);return"done"===e.status||"uploaded"===e.status?n.status=rce:n.status=e.status,n.audioInfo=n.audioInfo||{},n.audioInfo.id=e.audioId,n.audioInfo.fileName=e.fileName,n.audioInfo.fileSize=e.fileSize,n.taskId=e.taskId,n.errorMessage=e.message,n.allowDownloadInViewer=e.download,n}},{key:"toLake",value:function(e){return{status:e.status,audioId:ku()(e,"audioInfo.id"),fileName:ku()(e,"audioInfo.fileName"),fileSize:ku()(e,"audioInfo.fileSize"),taskId:ku()(e,"tasId"),message:ku()(e,"errorMessage"),download:ku()(e,"allowDownloadInViewer")}}},{key:"fromRepository",value:function(e){var t=e.copiedFileInfo,n={status:rce,source:"transfer",audioInfo:{id:t.video_id,fileSize:t.size,fileName:t.filename}};return Sl.setCardSpacingToValue(Nl,Ww()({},cce,n))}}])}(Sl);function dce(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,fce()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function fce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(fce=function(){return!!e})()}Object.defineProperty(sce,"DefaultCardValue",{enumerable:!0,configurable:!0,writable:!0,value:cce});var hce=function(e){function t(){return(0,Ke.A)(this,t),dce(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"readFile",value:function(e,t){if(("audio"===(null==t?void 0:t.category)||"localDoc"===(null==t?void 0:t.category))&&(null==t?void 0:t.from)===LT){var n=e._$neUploadTask;if(n)return ar.createCard("audio",sce.getInitCardValue(n))}}}])}(Cj);function pce(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,vce()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function vce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vce=function(){return!!e})()}var mce=function(e){function t(){return(0,Ke.A)(this,t),pce(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Ij);function gce(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,bce()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function bce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bce=function(){return!!e})()}Object.defineProperty(mce,"CardName",{enumerable:!0,configurable:!0,writable:!0,value:"audio"});var yce=function(e){function t(){return(0,Ke.A)(this,t),gce(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t,n,r){var o=e.createCard("audio",sce.fromLake(n),r);e.setNode(o)}}])}(Lj);function wce(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Ace()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Ace(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ace=function(){return!!e})()}var kce=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=wce(this,t),Object.defineProperty(r,"audioOption",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(r,"_currentUrl",{enumerable:!0,configurable:!0,writable:!0,value:""}),r._currentUrl=e,r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){var n,r,o=null===(n=null==t?void 0:t.attrs)||void 0===n?void 0:n.value;if(o&&(null==o?void 0:o.status)===rce){var i=t.id,a=e.currentURL||this._currentUrl,l=this.audioOption.getDocReadURL(a,i),u=e.createElement("div",{className:"ne-audio"}),c=e.createElement("a",{attrs:{href:l}});e.appendChild(c,e.createTextNode("此处为语雀音频卡片，点击链接查看：")),e.appendChild(u,c),e.setNode(u),e.addAttr("data-audio-src",null===(r=o.audioInfo)||void 0===r?void 0:r.id)}}}])}(lT),_ce=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"write",value:function(e,t,n,r){e.setNode(e.createInlineCard("audio",sce.toLake(n),r))}}])}();function Cce(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Nce()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Nce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Nce=function(){return!!e})()}var Oce=function(e){function t(){return(0,Ke.A)(this,t),Cce(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerBlockCard(t.cardName)}},{key:"afterInit",value:function(){var e=this.kernel,n=e.getService(_S.ID),r=e.getService(Qj.ID);n&&n.registerLakeCardReader("audio",new yce);var o=e.getService(W$.ID);o&&o.registerINodeCardReader(mce.CardName,new mce);var i=e.getService(ET.ID);i&&i.registerFileReader(null==r?void 0:r.getFileAcceptUtil().getAudioFileAccept(this.option.accept),new hce);var a=e.getService(_S.ID);a&&a.registerLakeCardWriter(t.cardName,new _ce);var l=e.getService(wS.ID);l&&l.registerNodeHTMLWriter(t.cardName,new kce(e.option.currentURL,this.option))}}])}(ct);Object.defineProperty(Oce,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:"audio"}),Object.defineProperty(Oce,"cardName",{enumerable:!0,configurable:!0,writable:!0,value:"audio"}),Object.defineProperty(Oce,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:Zue});var xce=HR({pluginName:"dateCard",cardName:"dateCard",cardSelect:"dateCard",command:{dateCard:"dateCard",getSelectDateCard:"getSelectDateCard"},eventName:{openDateCardIdEditor:"openDateCardIdEditor"}});function Ece(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Dce()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Dce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Dce=function(){return!!e})()}var Pce=function(e){function t(){return(0,Ke.A)(this,t),Ece(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(e){return e.getSelection().rangeCount>1?pt.UNAVAILABLE:pt.NOT_EXECUTED}},{key:"execute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.newJob();if(this.getState(r)===pt.UNAVAILABLE)return e.cancelJob(r),!1;var o=Ai.insertCardNode(r,r.getSelection(),xce.cardName,t),i=o.selection,a=o.cardNode;return n?r.setSelection([r.newRange(r.newPosition(a,0))]):r.setSelection(i),e.commitJob(r),a.id}}])}(pt);function Rce(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Sce()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Sce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Sce=function(){return!!e})()}var Tce=function(e){function t(){return(0,Ke.A)(this,t),Rce(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Ij);function jce(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Ice()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Ice(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ice=function(){return!!e})()}Object.defineProperty(Tce,"CardName",{enumerable:!0,configurable:!0,writable:!0,value:xce.cardName});var Bce=function(e){function t(e){return(0,Ke.A)(this,t),e&&void 0===(null==e?void 0:e.date)&&(e.date=Date.now()),jce(this,t,[Ww()({},t.DefaultCardValue,e)])}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getDate",value:function(){return void 0===this._cardValue.date?t.DefaultCardValue.date:this._cardValue.date}},{key:"setDate",value:function(e){this._cardValue.date=e}}],[{key:"fromLake",value:function(e){return Ww()({},t.DefaultCardValue,e)}},{key:"toLake",value:function(e){return Object.assign(Object.assign({},e),{date:e.date})}}])}(Sl);function Mce(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Fce()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Fce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Fce=function(){return!!e})()}Object.defineProperty(Bce,"DefaultCardValue",{enumerable:!0,configurable:!0,writable:!0,value:{date:Date.now()}});var Lce=function(e){function t(){return(0,Ke.A)(this,t),Mce(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t,n,r){var o=e.createCard(xce.cardName,Bce.fromLake(n),r);e.setNode(o)}}])}(Lj);function Uce(e){return e<10?"0".concat(e):e}function Vce(e){var t=new Date,n=new Date(e),r=n.getFullYear(),o=n.getMonth()+1,i=n.getDate();return t.getFullYear()===r?"enUS"===cc.getLanguage()?"".concat(Uce(o),"-").concat(Uce(i)):"".concat(Uce(o),"月").concat(Uce(i),"日"):"enUS"===cc.getLanguage()?"".concat(r,"-").concat(Uce(o),"-").concat(Uce(i)):"".concat(r,"年").concat(Uce(o),"月").concat(Uce(i),"日")}var Hce={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9};function zce(e){for(var t=0,n=0;n<e.length;n++){var r=e[n];if(void 0===Hce[r])return null;t=10*t+Hce[r]}return t}function Wce(e){if(2===e.length){var t=zce(e[0]);if(null===t||t<1||t>12)return null;var n=zce(e[1]);if(null===n||n<1||n>31)return null;var r=new Date,o=r.getFullYear();return r.setFullYear(o,t-1,n)}if(3===e.length){var i=zce(e[0]);if(null===i||i<1||i>12)return null;var a=zce(e.slice(1));if(null===a||a<1||a>31)return null;var l=new Date,u=l.getFullYear();return l.setFullYear(u,i-1,a)}if(4===e.length||5===e.length){if(5===e.length&&"-"!==e[2])return null;var c=zce(e.slice(0,2));if(null===c||c<1||c>12)return null;var s=zce(5===e.length?e.slice(3):e.slice(2));if(null===s||s<1||s>31)return null;var d=new Date,f=d.getFullYear();if(f%100==0&&f%400==0||f%100!=0&&f%4==0){if(2===c&&s>29)return null}else if(2===c&&s>28)return null;return d.setFullYear(f,c-1,s)}return null}function qce(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,$ce()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function $ce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($ce=function(){return!!e})()}var Kce=function(e){function t(){return(0,Ke.A)(this,t),qce(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){var n=ku()(t,"attrs.value",{}).date,r=n?Vce(n):"",o=e.createElement("span",{className:"ne-date-card",attrs:{"data-date":n}});e.appendChild(o,e.createTextNode(r)),e.setNode(o)}}])}(lT);function Yce(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Gce()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Gce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Gce=function(){return!!e})()}var Jce=function(e){function t(){return(0,Ke.A)(this,t),Yce(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t,n,r){var o=e.createInlineCard(xce.cardName,Bce.toLake(n),r);e.setNode(o)}}])}($j),Xce=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"write",value:function(e,t){var n=ku()(t,"attrs.value",{}).date;return e.append(Vce(n)),!0}}])}();function Qce(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Zce()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Zce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Zce=function(){return!!e})()}var ese=function(e){function t(){return(0,Ke.A)(this,t),Qce(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getValue",value:function(e){var t=e.getSelection();if(!wi.isInCard(t))return null;var n=t.firstRange.start.node;return n.nodeName===xce.cardName?n.id:null}}])}(pt);function tse(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,nse()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function nse(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nse=function(){return!!e})()}var rse=function(e){function t(){return(0,Ke.A)(this,t),tse(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"write",value:function(e,t){var n=ku()(t,"attrs.value",{}).date;e.append(Vce(n))}}])}(YG);function ose(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,ise()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function ise(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ise=function(){return!!e})()}var ase=function(e){function t(){return(0,Ke.A)(this,t),ose(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t,n,r,o,i,a;e.registerInlineCard(xce.cardName),e.registerCommand(xce.command.dateCard,new Pce),e.registerCommand(xce.command.getSelectDateCard,new ese),null===(t=e.getService(EG.ID))||void 0===t||t.registerTextWriter(xce.cardName,new rse),null===(n=e.getService(_S.ID))||void 0===n||n.registerLakeCardReader(xce.cardName,new Lce),null===(r=e.getService(RT.ID))||void 0===r||r.registerINodeCardReader(Tce.CardName,new Tce),null===(o=e.getService(wS.ID))||void 0===o||o.registerNodeHTMLWriter(xce.cardName,new Kce),null===(i=e.getService(_S.ID))||void 0===i||i.registerLakeCardWriter(xce.cardName,new Jce),null===(a=e.getService(tI.ID))||void 0===a||a.registerMarkdownWriter(xce.cardName,new Xce)}}])}(ct);Object.defineProperty(ase,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:xce.pluginName});var lse=HR({pluginName:"upload",service:{IUploadEditorService:"IUploadEditorService"}}),use=function(){return(0,$e.A)((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=t}),[{key:"acceptUtil",get:function(){return this._option.acceptUtil||oz}},{key:"getFileExtname",value:function(e){return"function"==typeof this._option.getFileExtname?this._option.getFileExtname(e):function(e){if(!e)return"";var t;if(t="string"==typeof e?e:e.name){if((t=t.toLowerCase()).endsWith(".mindnode.zip"))return"mindnode.zip";if(t.endsWith(".xmind.zip"))return"xmind.zip";if(t.endsWith(".mmap.zip"))return"mmap.zip";if(t.endsWith(".mpp.zip"))return"mpp.zip"}var n=t&&t.split(".").pop()||"",r=e instanceof File&&e.type&&qf[e.type];return r?r.includes(n)?n:r[0]:n}(e)}}])}();function cse(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,sse()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function sse(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(sse=function(){return!!e})()}Object.defineProperty(use,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:lse.pluginName});var dse=function(e){function t(){return(0,Ke.A)(this,t),cse(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getFileAcceptUtil",value:function(){return this.plugin.option.acceptUtil}},{key:"getFileExtname",value:function(e){return this.plugin.option.getFileExtname(e)}},{key:"destroy",value:function(){}}])}(Qj);function fse(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,hse()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function hse(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(hse=function(){return!!e})()}var pse=function(e){function t(){return(0,Ke.A)(this,t),fse(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){}}])}(ct);function vse(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,mse()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function mse(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mse=function(){return!!e})()}Object.defineProperty(pse,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:lse.pluginName}),Object.defineProperty(pse,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:use}),Object.defineProperty(pse,"Service",{enumerable:!0,configurable:!0,writable:!0,value:dse});var gse=function(e){function t(){return(0,Ke.A)(this,t),vse(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){}},{key:"getOption",value:function(){return this.plugin.option}}])}(kT),bse={background:{h:0,s:0,l:1},border:{h:0,s:0,l:.91},active:{h:211,s:1,l:.5},text:{h:0,s:0,l:.15},disabled:{h:0,s:0,l:.5},danger:{h:353,s:1,l:.5},selection:"rgba(27, 162, 227, 0.2)",brand:{h:155,s:100,l:36}},yse={"editor.background":{use:"background",hslOffset:[0,0,0]},"editor.background.primary":{use:"background",hslOffset:[0,0,0]},"editor.background.primary.hover":{use:"background",hslOffset:[0,.03,-.06]},"editor.background.primary.hover.light":{use:"background",hslOffset:[0,.04,-.09]},"editor.background.secondary":{use:"background",hslOffset:[0,0,-.02]},"editor.background.tertiary":{use:"background",hslOffset:[0,.05,-.04]},"editor.overlay.background.tertiary":{use:"background",hslOffset:[0,.05,-.04]},"editor.background.foreground":{use:"background",hslOffset:[0,0,0]},"editor.border.primary":{use:"border",hslOffset:[0,0,0]},"editor.border.secondary":{use:"border",hslOffset:[0,-.01,-.06]},"editor.border.light":{use:"border",hslOffset:[0,0,.06]},"editor.code.background":{use:"border",hslOffset:[0,0,.02]},"editor.table.scrollbar.thumb":{use:"border",hslOffset:[0,0,-.1]},"editor.card.border.hover":{use:"active",hslOffset:[0,-.11,.24]},"editor.card.border.selected":{use:"active",hslOffset:[0,-.1,.07]},"editor.table.bar.active":{use:"active",hslOffset:[0,-.1,.17]},"editor.text.link":{use:"active",hslOffset:[0,-.13,0]},"editor.text.link.hover":{use:"active",hslOffset:[0,-.11,.17]},"editor.column.background.highlight":{use:"active",hslOffset:[0,-.3,.45]},"editor.card.background.hover":{use:"active",hslOffset:[0,-.15,.43]},"editor.background.focus":{use:"active",hslOffset:[0,-.15,.42]},"editor.text.color":{use:"text",hslOffset:[0,0,0]},"editor.text.body":{use:"text",hslOffset:[0,.01,.2]},"editor.text.caption":{use:"text",hslOffset:[0,.02,.4]},"editor.icon.secondary":{use:"text",hslOffset:[0,.01,.2]},"editor.icon.primary":{use:"text",hslOffset:[0,0,-.15]},"editor.text.disable":{use:"disabled",hslOffset:[0,.02,.25]},"editor.table.bar.danger":{use:"danger",hslOffset:[0,-.17,.36]},"editor.text.danger.light":{use:"danger",hslOffset:[0,-.26,-.19]},"editor.text.danger":{use:"danger",hslOffset:[0,-.26,-.02]},"editor.color.theme":{use:"brand",hslOffset:[0,0,0]},"editor.color.theme.light":{use:"brand",hslOffset:[0,-.1,.07]},"editor.cursor":{use:"brand",hslOffset:[0,0,-.07]}},wse={colors:bse,name:"custom",overrides:{}},Ase=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"enable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this._option=Ww()({},wse,t),Object.keys((null==t?void 0:t.colors)||{}).length&&(this.enable=!0)}),[{key:"colors",get:function(){return this._option.colors}},{key:"name",get:function(){return this._option.name}},{key:"overrides",get:function(){return this._option.overrides}}])}();function kse(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,_se()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function _se(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_se=function(){return!!e})()}Object.defineProperty(Ase,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"customTheme"});var Cse=function(e){function t(){return(0,Ke.A)(this,t),kse(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){}}])}(ct);Object.defineProperty(Cse,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:yT.pluginName}),Object.defineProperty(Cse,"Service",{enumerable:!0,configurable:!0,writable:!0,value:gse}),Object.defineProperty(Cse,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:Ase});var Nse=[NT,l1,kB,BM,oF,dF,LF,KF,uL,RU,hV,CV,QV,dH,wH,SH,jz,Gz,nW,eq,vq,h$,T$,hK,qK,qI,RY,BY,ZY,eJ,BI,kJ,VJ,qX,C0,F0,W0,X0,x1,U1,s2,g2,E2,I2,q2,g3,y6,KG,V6,_U,T8,a9,V9,F7,Mee,fte,eoe,doe,woe,nie,hie,jie,Wie,uae,rle,tue,Pue,Xue,Oce,ase,pse,Cse],Ose={all:[".docx",".doc",".dotx",".dot",".rtf",".txt",".html",".htm",".lake",".lakebook",".lakesheet",".lakemind",".lakeshow",".pdf",".xls",".xlsx",".xltx",".xlsm",".xlt",".csv",".pptx",".ppt",".potx",".pot",".ppsx",".pps",".pages",".numbers",".nmbtemplate",".template",".key",".keynote",".kth",".et",".ett",".dps",".dpt",".wps",".wpt",".md",".mark",".markdown",".xmind",".graffle",".gtemplate",".gstencil",".mindnode",".vpp",".mmap",".mm",".mpp",".rp",".rplib",".psd",".sketch",".ai",".eddx",".edx",".drawio",".xd",".dwg",".xmind.zip",".svg",".png",".bmp",".jpg",".jpeg",".gif",".tif",".tiff",".emf",".webp",".heic",".heif",".aep",".c4d",".fbx",".eps",".mp4",".mov",".avi",".wmv",".m4a",".m4v",".webm",".flv",".mkv",".mpg",".ts",".mts",".swf",".3gp",".ogg",".aac",".dv",".f4v",".flac",".rmvb",".vob",".asf",".dat",".m2t",".m3u8",".mj2",".mjpeg",".mpe",".mpeg",".qt",".rm",".mp3",".mpga",".wav",".zip",".rar",".gz",".tgz",".gzip",".7z",".tar",".jar",".dmg",".pkg",".abap",".ada",".adp",".ahk",".as",".as3",".asc",".ascx",".asm",".asp",".awk",".bash",".bash_login",".bash_logout",".bash_profile",".bashrc",".bat",".bib",".bsh",".build",".builder",".c",".c++",".capfile",".cc",".cfc",".cfm",".cfml",".cl",".clj",".cls",".cmake",".cmd",".coffee",".config",".cpp",".cpt",".cpy",".cs",".cshtml",".cson",".csproj",".css",".ctp",".cxx",".dart",".d",".ddl",".di",".diff",".disco",".dml",".dtd",".dtml",".el",".emakefile",".erb",".erl",".f",".f90",".f95",".fs",".fsi",".fsscript",".fsx",".gemfile",".gemspec",".gitconfig",".go",".groovy",".gvy",".hcp",".h",".h++",".haml",".handlebars",".hbs",".hh",".hpp",".hrl",".hs",".htc",".hxx",".idl",".iim",".inc",".inf",".ini",".inl",".ipp",".irbrc",".pug",".jade",".jav",".java",".js",".json",".jsp",".jsx",".l",".less",".lhs",".lisp",".log",".lst",".ltx",".lua",".m",".mak",".make",".manifest",".master",".mkd",".markdn",".mdown",".mkdn",".ml",".mli",".mll",".mly",".mud",".makefile",".nfo",".opml",".osascript",".p",".pas",".patch",".php",".php2",".php3",".php4",".php5",".phtml",".pl",".plx",".perl",".pm",".pod",".pp",".profile",".ps1",".ps1xml",".psd1",".psm1",".pss",".pt",".py",".pyw",".proto",".r",".rake",".rb",".rbx",".rc",".rdf",".re",".reg",".rest",".resw",".resx",".rhtml",".rjs",".rprofile",".rpy",".rs",".rss",".rst",".ruby",".rxml",".s",".sass",".scala",".scm",".sconscript",".sconstruct",".script",".scss",".sgml",".sh",".shtml",".sml",".svn-base",".swift",".sql",".sty",".tcl",".tex",".textile",".tld",".tli",".tmpl",".tpl",".tsx",".vb",".vi",".vim",".vmg",".webpart",".wsp",".wsdl",".xhtml",".xml",".jmx",".xoml",".xsd",".xslt",".yaml",".yaws",".yml",".zsh",".arxml",".vsd",".vsdm",".vsdx",".vss",".vssm",".vst",".vstm",".vstx",".msi",".chm",".sub",".idx",".sst",".son",".srt",".ssa",".ass",".smi",".psb",".pjs",".stl",".tts",".vsf",".zeg",".ipynb",".msg",".caj",".cnf",".rpm",".conf",".mindnode.zip",".mmap.zip"],image:[".svg",".png",".bmp",".jpg",".jpeg",".gif",".tif",".tiff",".emf",".webp",".heic",".heif"],video:[".mp4",".mov",".avi",".wmv",".m4v",".webm",".flv",".mkv",".mpg",".ts",".mts",".swf",".3gp",".ogg",".aac",".dv",".f4v",".rmvb",".vob",".asf",".dat",".m2t",".m3u8",".mj2",".mjpeg",".mpe",".mpeg",".qt",".rm"],audio:[".mp3",".mpga",".wav",".m4a",".flac"],localdoc:[".doc",".docx",".ppt",".pptx",".xls",".xlsm",".xlsx",".dot",".dotx",".pot",".potx",".xlt",".xltx",".pps",".ppsx",".csv",".rtf",".key",".keynote",".pages",".numbers",".xmind",".xmind.zip",".rp",".rplib",".psd",".sketch",".ai",".eddx",".edx",".drawio",".xd",".dwg",".pdf"],msOffice:[".doc",".docx",".ppt",".pptx",".xls",".xlsm",".xlsx",".dot",".dotx",".pot",".potx",".xlt",".xltx",".pps",".ppsx",".csv",".rtf"],macOffice:[".key",".keynote",".pages",".numbers"],mind:[".xmind",".xmind.zip"],design:[".rp",".rplib",".psd",".sketch",".ai",".eddx",".edx",".drawio",".xd",".dwg"],pdf:[".pdf"],upload:[".doc",".docx",".ppt",".pptx",".xls",".xlsm",".xlsx",".dot",".dotx",".pot",".potx",".xlt",".xltx",".pps",".ppsx",".csv",".rtf",".key",".keynote",".pages",".numbers",".xmind",".xmind.zip",".rp",".rplib",".psd",".sketch",".ai",".eddx",".edx",".drawio",".xd",".dwg",".pdf",".mp4",".mov",".avi",".wmv",".m4v",".webm",".flv",".mkv",".mpg",".ts",".mts",".swf",".3gp",".ogg",".aac",".dv",".f4v",".rmvb",".vob",".asf",".dat",".m2t",".m3u8",".mj2",".mjpeg",".mpe",".mpeg",".qt",".rm",".mp3",".mpga",".wav",".m4a",".flac"]},xse={getAttachmentFileAccept:function(){return Ose.all},getImageFileAccept:function(){return Ose.image},getVideoFileAccept:function(){return Ose.video},getAudioFileAccept:function(){return Ose.audio},getLocalDocFileAccept:function(e,t){return(0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)({},TH,Ose.msOffice),jH,Ose.macOffice),IH,Ose.mind),BH,Ose.design),MH,Ose.pdf),FH,Ose.upload),LH,Ose.localdoc)[t]}},Ese={uploadFileURL:"/api/upload",quickUploadUrl:"/api/upload",from:location.href,acceptUtil:xse},Dse=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"check",value:function(e,t){return!0}},{key:"getMessageByCode",value:function(e,t){return e}}])}(),Pse={checkFileSize:Dse.check,getMessageByCode:Dse.getMessageByCode},Rse={uploadFileURL:"/api/upload/image",crawlURL:"/api/upload/image",accept:Ose.image},Sse={protectURL:!0},Tse={multiTypes:!1},jse=HR({pluginName:"autoScroll",service:{IAutoScrollService:"IAutoScrollService"}}),Ise=HR({pluginName:"colorPickerSupport"}),Bse=HR({pluginName:"fullscreen",toolbar:{fullscreen:"fullscreen"}}),Mse=HR({pluginName:"hotKey"}),Fse=HR({pluginName:"mixedTextStyle",toolbar:{mixedTextStyle:"mixedTextStyle"}}),Lse=HR({pluginName:"mobile"}),Use=HR({pluginName:"placeholder"}),Vse=HR({pluginName:"renderAssistant",service:{IVisibilityRenderService:"IVisibilityRenderService"}}),Hse=HR({pluginName:"toolbar",service:{IToolbarEditorService:"IToolbarEditorService"}}),zse=HR({pluginName:"typeWriter"}),Wse=HR({pluginName:"uiSwitch",service:{IUiSwitchEditorService:"IUiSwitchEditorService"}}),qse=HR({pluginName:"viewResizeObserver"}),$se=HR({pluginName:"codeblock",cardName:"codeblock",cardSelect:"codeblock",toolbar:{codeblockClear:"codeblock-clear",codeblockBold:"codeblock-bold",codeblockItalic:"codeblock-italic",codeblockUnderline:"codeblock-underline",codeblockStrikethrough:"codeblock-strikethrough",codeblockColor:"codeblock-color",codeblockBackground:"codeblock-background"}}),Kse=HR({pluginName:"alert",node:"alert",domNode:"ne-alert",cardSelect:"alert"}),Yse=HR({pluginName:"label",cardName:"label",cardSelect:"label"}),Gse=HR({pluginName:"video",cardName:"video",cardSelect:"video"}),Jse=HR({pluginName:"math",cardName:"math",cardSelect:"math"}),Xse=HR({pluginName:"mention",cardName:"mention",cardSelect:"mention"}),Qse=HR({pluginName:"calendar",cardName:"calendar",cardSelect:"calendar"}),Zse=HR({pluginName:"textDiagram",node:"textDiagram",cardSelect:"text-diagram"}),ede=HR({pluginName:"audio",cardName:"audio",cardSelect:"audio"}),tde=HR({pluginName:"vote",cardName:"vote",cardSelect:"vote"}),nde=HR({pluginName:"randomTips",toolbar:"randomTips"}),rde={alert:Kse,alignment:rB,autoScroll:jse,basicTextStyle:OB,bgColor:FM,breakLine:iF,calendar:Qse,card:dj,clearFormat:VF,clipboard:GF,code:hL,color:jU,colorPickerSupport:Ise,container:vV,content:NV,deletePlugin:ZV,dropFile:fH,fallbackCard:AH,file:ez,fileReader:$z,focus:Jz,fontsize:lW,formatPainter:cq,fullscreen:Bse,heading:qq,history:A$,hotKey:Mse,hrCard:q$,htmlDataSource:wK,imageCard:QT,indent:tY,inodeDataSource:TY,lakeDataSource:cI,label:Yse,layout:fJ,lineHeight:CJ,link:QJ,list:$X,mark:N0,markdown:OS,markdownPasteParse:q0,meta:_I,miniToolbar:zR,mixedTextStyle:Fse,mobile:Lse,paragraph:c1,placeholder:Use,quickInput:R1,quote:H1,renderAssistant:Vse,save:d2,selectall:b2,selection:D2,slash:B2,subscript:J2,table:w3,textDataSource:NG,toolbar:Hse,typeWriter:zse,typography:rW,uiSwitch:Wse,upload:lse,viewResizeObserver:qse,codeblock:$se,video:Gse,columns:H9,collapse:V7,math:Jse,thirdparty:hte,search:Iie,mention:Xse,textDiagram:Zse,audio:ede,dateCard:xce,vote:tde,randomTips:nde},ode=Object.values(rde).reduce((function(e,t){var n={};return"string"==typeof(null==t?void 0:t.cardSelect)?n[t.cardSelect]=t.cardSelect:n=Object.assign({},null==t?void 0:t.cardSelect),Object.assign(Object.assign({},e),n)}),{}),ide={get searchPlaceholder(){return sc("请输入搜索内容")},groups:[{type:"icon",show:"slash",items:[ode.p,ode.h1,ode.h2,ode.h3,ode.h4,ode.h5,ode.h6,ode.unorderedList,ode.orderedList,ode.taskList,ode.link,ode.code]},{get title(){return sc("基础")},name:"group-base",type:"column",items:[ode.image,ode.table,ode.file,ode.label]},{get title(){return sc("布局和样式")},name:"group-layout",type:"normal",items:[ode.quote,ode.hr,ode.alert,{name:ode.columns,childMenus:[ode.columns2,ode.columns3,ode.columns4]},ode.collapse]},{get title(){return sc("程序员")},name:"group-files",type:"normal",items:[ode.codeblock,ode.math]},{get title(){return sc("嵌入本地文件")},name:"group-files",type:"normal",items:[ode.localFile,ode.video,ode.audio]},{get title(){return sc("小工具")},name:"group-files",type:"normal",items:[ode.mention,ode.calendar,ode.dateCard]}],recordSelectedItemConfig:{enable:!0,maxNum:3,get title(){return sc("最近使用")},type:"label",itemsConfig:{table:{allowSelector:!0}}}};function ade(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sc("请输入搜索内容");if(!t)return e;"string"==typeof t&&(t=[t]);var r=Object.assign(Object.assign({},e),{searchPlaceholder:n});return r.groups=e.groups.map((function(e){if(t.includes(e.name||""))return null;var n=Object.assign({},e);return n.items=e.items.filter((function(e){return!t.includes("string"==typeof e?e:e.name)})),0===n.items.length?null:n})).filter((function(e){return null!==e})),r}var lde,ude={cardSelect:{general:ide,collapse:ade(ide,["table","collapse","columns","group-datatable"]),table:ade(ide,["table","group-board","group-datatable","codeblock","uml","text-diagram","group-third","collapse","columns","calendar","vote","checkIn","lockedtext"])}},cde="default",sde="table",dde="simple",fde="note",hde={DEFAULT:"default",TABLE:"table",CODEBLOCK:"codeblock",SIMPLE:"simple",NOTE:"note"};!function(e){e.hover="hover",e.never="never",e.focus="focus",e.always="always"}(lde||(lde={}));var pde=Object.values(rde).reduce((function(e,t){var n={};return"string"==typeof(null==t?void 0:t.toolbar)?n[t.toolbar]=t.toolbar:n=Object.assign({},null==t?void 0:t.toolbar),Object.assign(Object.assign({},e),n)}),{}),vde=[["#000000","#262626","#595959","#8C8C8C","#BFBFBF","#D9D9D9","#E9E9E9","#F5F5F5","#FAFAFA","#FFFFFF"],["#F5222D","#FA541C","#FA8C16","#FADB14","#52C41A","#13C2C2","#1890FF","#2F54EB","#722ED1","#EB2F96"],["#FFE8E6","#FFECE0","#FFEFD1","#FCFCCA","#E4F7D2","#D3F5F0","#D4EEFC","#DEE8FC","#EFE1FA","#FAE1EB"],["#FFA39E","#FFBB96","#FFD591","#FFFB8F","#B7EB8F","#87E8DE","#91D5FF","#ADC6FF","#D3ADF7","#FFADD2"],["#FF4D4F","#FF7A45","#FFA940","#FFEC3D","#73D13D","#36CFC9","#40A9FF","#597EF7","#9254DE","#F759AB"],["#CF1322","#D4380D","#D46B08","#D4B106","#389E0D","#08979C","#096DD9","#1D39C4","#531DAB","#C41D7F"],["#820014","#871400","#873800","#614700","#135200","#00474F","#003A8C","#061178","#22075E","#780650"]],mde=function(){for(var e={},t=vde,n=0,r=t.length;n<r;n++)for(var o=0,i=t[n].length;o<i;o++)e[t[n][o]]={y:n,x:o};return e}(),gde=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"getColors",value:function(){return vde}},{key:"getStroke",value:function(e){var t=mde[e];return t&&(2===t.y||3===t.y&&t.x>2&&t.x<5)?vde[4][t.x]:e}}])}(),bde={"zh-cn":{"#000000":"黑色","#262626":"深灰 3","#595959":"深灰 2","#8C8C8C":"深灰 1","#BFBFBF":"灰色","#D9D9D9":"浅灰 4","#E9E9E9":"浅灰 3","#F5F5F5":"浅灰 2","#FAFAFA":"浅灰 1","#FFFFFF":"白色","#F5222D":"红色","#FA541C":"朱红","#FA8C16":"橙色","#FADB14":"黄色","#52C41A":"绿色","#13C2C2":"青色","#1890FF":"浅蓝","#2F54EB":"蓝色","#722ED1":"紫色","#EB2F96":"玫红","#FFE8E6":"红色 1","#FFECE0":"朱红 1","#FFEFD1":"橙色 1","#FCFCCA":"黄色 1","#E4F7D2":"绿色 1","#D3F5F0":"青色 1","#D4EEFC":"浅蓝 1","#DEE8FC":"蓝色 1","#EFE1FA":"紫色 1","#FAE1EB":"玫红 1","#FFA39E":"红色 2","#FFBB96":"朱红 2","#FFD591":"橙色 2","#FFFB8F":"黄色 2","#B7EB8F":"绿色 2","#87E8DE":"青色 2","#91D5FF":"浅蓝 2","#ADC6FF":"蓝色 2","#D3ADF7":"紫色 2","#FFADD2":"玫红 2","#FF4D4F":"红色 3","#FF7A45":"朱红 3","#FFA940":"橙色 3","#FFEC3D":"黄色 3","#73D13D":"绿色 3","#36CFC9":"青色 3","#40A9FF":"浅蓝 3","#597EF7":"蓝色 3","#9254DE":"紫色 3","#F759AB":"玫红 3","#CF1322":"红色 4","#D4380D":"朱红 4","#D46B08":"橙色 4","#D4B106":"黄色 4","#389E0D":"绿色 4","#08979C":"青色 4","#096DD9":"浅蓝 4","#1D39C4":"蓝色 4","#531DAB":"紫色 4","#C41D7F":"玫红 4","#820014":"红色 5","#871400":"朱红 5","#873800":"橙色 5","#614700":"黄色 5","#135200":"绿色 5","#00474F":"青色 5","#003A8C":"浅蓝 5","#061178":"蓝色 5","#22075E":"紫色 5","#780650":"玫红 5","#585A5A":"深灰 2","#8A8F8D":"深灰 1","#D8DAD9":"灰色","#E7E9E8":"浅灰 4","#EFF0F0":"浅灰 3","#F4F5F5":"浅灰 2","#DF2A3F":"红色","#ED740C":"橘橙","#ECAA04":"金盏黄","#FBDE28":"柠檬黄","#74B602":"绿色","#1DC0C9":"青色","#117CEE":"浅蓝","#2F4BDA":"蓝色","#601BDE":"紫色","#D22D8D":"玫红","#FBE4E7":"红色 1","#FDE6D3":"橘橙 1","#F9EFCD":"金盏黄 1","#FBF5CB":"柠檬黄 1","#E8F7CF":"绿色 1","#CEF5F7":"青色 1","#D9EAFC":"浅蓝 1","#D9DFFC":"蓝色 1","#E6DCF9":"紫色 1","#FBDFEF":"玫红 1","#F1A2AB":"红色 2","#F8B881":"橘橙 2","#F5D480":"金盏黄 2","#FCE75A":"柠檬黄 2","#C1E77E":"绿色 2","#81DFE4":"青色 2","#81BBF8":"浅蓝 2","#96A7FD":"蓝色 2","#BA9BF2":"紫色 2","#F297CC":"玫红 2","#E4495B":"红色 3","#F38F39":"橘橙 3","#F3BB2F":"金盏黄 3","#EDCE02":"柠檬黄 3","#8CCF17":"绿色 3","#01B2BC":"青色 3","#2F8EF4":"浅蓝 3","#4861E0":"蓝色 3","#7E45E8":"紫色 3","#E746A4":"玫红 3","#AD1A2B":"红色 4","#C75C00":"橘橙 4","#C99103":"金盏黄 4","#A58F04":"柠檬黄 4","#5C8D07":"绿色 4","#07787E":"青色 4","#0C68CA":"浅蓝 4","#213BC0":"蓝色 4","#4C16B1":"紫色 4","#AE146E":"玫红 4","#70000D":"红色 5","#663000":"橘橙 5","#664900":"金盏黄 5","#665800":"柠檬黄 5","#2A4200":"绿色 5","#004347":"青色 5","#00346B":"浅蓝 5","#101E60":"蓝色 5","#270070":"紫色 5","#5C0036":"玫红 5"},en:{"#000000":"Black","#262626":"Dark Gray 3","#595959":"Dark Gray 2","#8C8C8C":"Dark Gray 1","#BFBFBF":"Gray","#D9D9D9":"Light Gray 4","#E9E9E9":"Light Gray 3","#F5F5F5":"Light Gray 2","#FAFAFA":"Light Gray 1","#FFFFFF":"White","#F5222D":"Red","#FA541C":"Chinese Red","#FA8C16":"Orange","#FADB14":"Yellow","#52C41A":"Green","#13C2C2":"Cyan","#1890FF":"Light Blue","#2F54EB":"Blue","#722ED1":"Purple","#EB2F96":"Magenta","#FFE8E6":"Red 1","#FFECE0":"Chinese Red 1","#FFEFD1":"Orange 1","#FCFCCA":"Yellow 1","#E4F7D2":"Green 1","#D3F5F0":"Cyan 1","#D4EEFC":"Light Blue 1","#DEE8FC":"Blue 1","#EFE1FA":"Purple 1","#FAE1EB":"Magenta 1","#FFA39E":"Red 2","#FFBB96":"Chinese Red 2","#FFD591":"Orange 2","#FFFB8F":"Yellow 2","#B7EB8F":"Green 2","#87E8DE":"Cyan 2","#91D5FF":"Light Blue 2","#ADC6FF":"Blue 2","#D3ADF7":"Purple 2","#FFADD2":"Magenta 2","#FF4D4F":"Red 3","#FF7A45":"Chinese Red 3","#FFA940":"Orange 3","#FFEC3D":"Yellow 3","#73D13D":"Green 3","#36CFC9":"Cyan 3","#40A9FF":"Light Blue 3","#597EF7":"Blue 3","#9254DE":"Purple 3","#F759AB":"Magenta 3","#CF1322":"Red 4","#D4380D":"Chinese Red 4","#D46B08":"Orange 4","#D4B106":"Yellow 4","#389E0D":"Green 4","#08979C":"Cyan 4","#096DD9":"Light Blue 4","#1D39C4":"Blue 4","#531DAB":"Purple 4","#C41D7F":"Magenta 4","#820014":"Red 5","#871400":"Chinese Red 5","#873800":"Orange 5","#614700":"Yellow 5","#135200":"Green 5","#00474F":"Cyan 5","#003A8C":"Light Blue 5","#061178":"Blue 5","#22075E":"Purple 5","#780650":"Magenta 5","#585A5A":"Dark Gray 2","#8A8F8D":"Dark Gray 1","#D8DAD9":"Gray","#E7E9E8":"Light Gray 4","#EFF0F0":"Light Gray 3","#F4F5F5":"Light Gray 2","#DF2A3F":"Red","#ED740C":"Orange","#ECAA04":"Yellow","#FBDE28":"Bright Yellow","#74B602":"Green","#1DC0C9":"Cyan","#117CEE":"Light Blue","#2F4BDA":"Blue","#601BDE":"Purple","#D22D8D":"Magenta","#FBE4E7":"Red 1","#FDE6D3":"Orange 1","#F9EFCD":"Yellow 1","#FBF5CB":"Bright Yellow 1","#E8F7CF":"Green 1","#CEF5F7":"Cyan 1","#D9EAFC":"Light Blue 1","#D9DFFC":"Blue 1","#E6DCF9":"Purple 1","#FBDFEF":"Magenta 1","#F1A2AB":"Red 2","#F8B881":"Orange 2","#F5D480":"Yellow 2","#FCE75A":"Bright Yellow 2","#C1E77E":"Green 2","#81DFE4":"Cyan 2","#81BBF8":"Light Blue 2","#96A7FD":"Blue 2","#BA9BF2":"Purple 2","#F297CC":"Magenta 2","#E4495B":"Red 3","#F38F39":"Orange 3","#F3BB2F":"Yellow 3","#EDCE02":"Bright Yellow 3","#8CCF17":"Green 3","#01B2BC":"Cyan 3","#2F8EF4":"Light Blue 3","#4861E0":"Blue 3","#7E45E8":"Purple 3","#E746A4":"Magenta 3","#AD1A2B":"Red 4","#C75C00":"Orange 4","#C99103":"Yellow 4","#A58F04":"Bright Yellow 4","#5C8D07":"Green 4","#07787E":"Cyan 4","#0C68CA":"Light Blue 4","#213BC0":"Blue 4","#4C16B1":"Purple 4","#AE146E":"Magenta 4","#70000D":"Red 5","#663000":"Orange 5","#664900":"Yellow 5","#665800":"Bright Yellow 5","#2A4200":"Green 5","#004347":"Cyan 5","#00346B":"Light Blue 5","#101E60":"Blue 5","#270070":"Purple 5","#5C0036":"Magenta 5"}};function yde(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,wde()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function wde(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wde=function(){return!!e})()}var Ade=function(e){function t(){var e;return(0,Ke.A)(this,t),e=yde(this,t,arguments),Object.defineProperty(e,"toState",{enumerable:!0,configurable:!0,writable:!0,value:function(e){return au.parse(e)||ru.white}}),Object.defineProperty(e,"getContrastingColor",{enumerable:!0,configurable:!0,writable:!0,value:function(e){return"transparent"===e.toCSSValue()?"rgba(0,0,0,0.4)":(299*e.r+587*e.g+114*e.b)/1e3>=210?"#8C8C8C":"#FFFFFF"}}),Object.defineProperty(e,"onSelect",{enumerable:!0,configurable:!0,writable:!0,value:function(t,n){n.preventDefault(),n.stopPropagation(),e.props.onSelect&&e.props.onSelect(t)}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getColorArray",value:function(e){var t=e.split(/,/g);if(t.length<=2)return t;var n=e.split(/\)\s*?,/);return[n[0]+")",n[1]]}},{key:"render",value:function(){var e,t=this.props,n=t.color,r=t.activeColors,o=t.theme,i=this.getColorArray(n),a=(0,tn.A)(i,2),l=a[0],u=a[1],c=this.toState(l||"#FFFFFF");e="dark"===o?["#000000","#141414","transparent"].indexOf(n)>=0:["#ffffff","#fafafa","transparent"].indexOf(c.toCSSValue())>=0;var s=!1,d={};u?(d.backgroundImage="linear-gradient(90deg, ".concat(l," 0%, ").concat(u," 100%)"),s=!0):d.backgroundColor=n;var f=r&&r.indexOf(n)>=0,h="transparent"===n,p={check:{fill:this.getContrastingColor(c),display:f?"block":"none"}};return Gu().createElement("span",{className:nk()("lake-colorboard-group-item",{"lake-colorboard-group-item-border":e,"lake-colorboard-group-item-border-none":s,"lake-colorboard-group-item-active":f,"lake-colorboard-group-item-special":h}),title:bde[this.props.lang||"zh-cn"][n],onClick:this.onSelect.bind(this,n)},Gu().createElement("span",{style:d},Gu().createElement("svg",{style:p.check,viewBox:"0 0 18 18"},Gu().createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))))}}])}(Gu().Component);function kde(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,_de()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function _de(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_de=function(){return!!e})()}var Cde=function(e){function t(){return(0,Ke.A)(this,t),kde(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){var e=this.props,t=e.data,n=void 0===t?[]:t,r=e.activeColors,o=e.defaultColor,i=e.onSelect,a=e.lang,l=e.theme;return Gu().createElement("span",{className:"lake-colorboard-group"},n.map((function(e){return Gu().createElement(Ade,{color:e,key:e,lang:a,activeColors:r,defaultColor:o,theme:l,onSelect:i})})))}}])}(Gu().Component),Nde=o(4102),Ode={},xde=function(e,t,n,r){var o=e+"-"+t+"-"+n+(r?"-server":"");if(Ode[o])return Ode[o];var i=function(e,t,n,r){if("undefined"==typeof document&&!r)return null;var o=r?new r:document.createElement("canvas");o.width=2*n,o.height=2*n;var i=o.getContext("2d");return i?(i.fillStyle=e,i.fillRect(0,0,o.width,o.height),i.fillStyle=t,i.fillRect(0,0,n,n),i.translate(n,n),i.fillRect(0,0,n,n),o.toDataURL()):null}(e,t,n,r);return Ode[o]=i,i},Ede=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dde=function(e){var t=e.white,n=e.grey,r=e.size,o=e.renderers,i=e.borderRadius,a=e.boxShadow,l=e.children,u=(0,Nde.Ay)({default:{grid:{borderRadius:i,boxShadow:a,absolute:"0px 0px 0px 0px",background:"url("+xde(t,n,r,o.canvas)+") center left"}}});return(0,Yu.isValidElement)(l)?Gu().cloneElement(l,Ede({},l.props,{style:Ede({},l.props.style,u.grid)})):Gu().createElement("div",{style:u.grid})};Dde.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};const Pde=Dde;var Rde=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sde=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Tde(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var jde=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=r=Tde(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleChange=function(e){var t=function(e,t,n,r,o){var i=o.clientWidth,a=o.clientHeight,l="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,u="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,c=l-(o.getBoundingClientRect().left+window.pageXOffset),s=u-(o.getBoundingClientRect().top+window.pageYOffset);if("vertical"===n){var d;if(d=s<0?0:s>a?1:Math.round(100*s/a)/100,t.a!==d)return{h:t.h,s:t.s,l:t.l,a:d,source:"rgb"}}else{var f;if(r!==(f=c<0?0:c>i?1:Math.round(100*c/i)/100))return{h:t.h,s:t.s,l:t.l,a:f,source:"rgb"}}return null}(e,r.props.hsl,r.props.direction,r.props.a,r.container);t&&"function"==typeof r.props.onChange&&r.props.onChange(t,e)},r.handleMouseDown=function(e){r.handleChange(e),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleChange),window.removeEventListener("mouseup",r.handleMouseUp)},Tde(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Sde(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var e=this,t=this.props.rgb,n=(0,Nde.Ay)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:100*t.a+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)"},pointer:{left:0,top:100*t.a+"%"}},overwrite:Rde({},this.props.style)},{vertical:"vertical"===this.props.direction,overwrite:!0});return Gu().createElement("div",{style:n.alpha},Gu().createElement("div",{style:n.checkboard},Gu().createElement(Pde,{renderers:this.props.renderers})),Gu().createElement("div",{style:n.gradient}),Gu().createElement("div",{style:n.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},Gu().createElement("div",{style:n.pointer},this.props.pointer?Gu().createElement(this.props.pointer,this.props):Gu().createElement("div",{style:n.slider}))))}}]),t}(Yu.PureComponent||Yu.Component);const Ide=jde;var Bde=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Mde=[38,40],Fde=1,Lde=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.handleBlur=function(){n.state.blurValue&&n.setState({value:n.state.blurValue,blurValue:null})},n.handleChange=function(e){n.setUpdatedValue(e.target.value,e)},n.handleKeyDown=function(e){var t,r=function(e){return Number(String(e).replace(/%/g,""))}(e.target.value);if(!isNaN(r)&&(t=e.keyCode,Mde.indexOf(t)>-1)){var o=n.getArrowOffset(),i=38===e.keyCode?r+o:r-o;n.setUpdatedValue(i,e)}},n.handleDrag=function(e){if(n.props.dragLabel){var t=Math.round(n.props.value+e.movementX);t>=0&&t<=n.props.dragMax&&n.props.onChange&&n.props.onChange(n.getValueObjectWithLabel(t),e)}},n.handleMouseDown=function(e){n.props.dragLabel&&(e.preventDefault(),n.handleDrag(e),window.addEventListener("mousemove",n.handleDrag),window.addEventListener("mouseup",n.handleMouseUp))},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleDrag),window.removeEventListener("mouseup",n.handleMouseUp)},n.state={value:String(e.value).toUpperCase(),blurValue:String(e.value).toUpperCase()},n.inputId="rc-editable-input-"+Fde++,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Bde(t,[{key:"componentDidUpdate",value:function(e,t){this.props.value===this.state.value||e.value===this.props.value&&t.value===this.state.value||(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(e){return function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},this.props.label,e)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||1}},{key:"setUpdatedValue",value:function(e,t){var n=this.props.label?this.getValueObjectWithLabel(e):e;this.props.onChange&&this.props.onChange(n,t),this.setState({value:e})}},{key:"render",value:function(){var e=this,t=(0,Nde.Ay)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return Gu().createElement("div",{style:t.wrap},Gu().createElement("input",{id:this.inputId,style:t.input,ref:function(t){return e.input=t},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?Gu().createElement("label",{htmlFor:this.inputId,style:t.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t}(Yu.PureComponent||Yu.Component);const Ude=Lde;var Vde=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Hde(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var zde=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=r=Hde(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleChange=function(e){var t=function(e,t,n,r){var o=r.clientWidth,i=r.clientHeight,a="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,l="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,u=a-(r.getBoundingClientRect().left+window.pageXOffset),c=l-(r.getBoundingClientRect().top+window.pageYOffset);if("vertical"===t){var s;if(s=c<0?359:c>i?0:360*(-100*c/i+100)/100,n.h!==s)return{h:s,s:n.s,l:n.l,a:n.a,source:"hsl"}}else{var d;if(d=u<0?0:u>o?359:100*u/o*360/100,n.h!==d)return{h:d,s:n.s,l:n.l,a:n.a,source:"hsl"}}return null}(e,r.props.direction,r.props.hsl,r.container);t&&"function"==typeof r.props.onChange&&r.props.onChange(t,e)},r.handleMouseDown=function(e){r.handleChange(e),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},Hde(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Vde(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.direction,n=void 0===t?"horizontal":t,r=(0,Nde.Ay)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:100*this.props.hsl.h/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-100*this.props.hsl.h/360+100+"%"}}},{vertical:"vertical"===n});return Gu().createElement("div",{style:r.hue},Gu().createElement("div",{className:"hue-"+n,style:r.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},Gu().createElement("style",null,"\n            .hue-horizontal {\n              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\n                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to right, #f00 0%, #ff0\n                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n\n            .hue-vertical {\n              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\n                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,\n                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n          "),Gu().createElement("div",{style:r.pointer},this.props.pointer?Gu().createElement(this.props.pointer,this.props):Gu().createElement("div",{style:r.slider}))))}}]),t}(Yu.PureComponent||Yu.Component);const Wde=zde;var qde=o(3813),$de=o.n(qde);const Kde=function(e,t){return e===t||e!=e&&t!=t},Yde=function(e,t){for(var n=e.length;n--;)if(Kde(e[n][0],t))return n;return-1};var Gde=Array.prototype.splice;function Jde(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Jde.prototype.clear=function(){this.__data__=[],this.size=0},Jde.prototype.delete=function(e){var t=this.__data__,n=Yde(t,e);return!(n<0||(n==t.length-1?t.pop():Gde.call(t,n,1),--this.size,0))},Jde.prototype.get=function(e){var t=this.__data__,n=Yde(t,e);return n<0?void 0:t[n][1]},Jde.prototype.has=function(e){return Yde(this.__data__,e)>-1},Jde.prototype.set=function(e,t){var n=this.__data__,r=Yde(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};const Xde=Jde,Qde="object"==typeof global&&global&&global.Object===Object&&global;var Zde="object"==typeof self&&self&&self.Object===Object&&self;const efe=Qde||Zde||Function("return this")(),tfe=efe.Symbol;var nfe=Object.prototype,rfe=nfe.hasOwnProperty,ofe=nfe.toString,ife=tfe?tfe.toStringTag:void 0;var afe=Object.prototype.toString;var lfe=tfe?tfe.toStringTag:void 0;const ufe=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":lfe&&lfe in Object(e)?function(e){var t=rfe.call(e,ife),n=e[ife];try{e[ife]=void 0;var r=!0}catch(e){}var o=ofe.call(e);return r&&(t?e[ife]=n:delete e[ife]),o}(e):function(e){return afe.call(e)}(e)},cfe=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},sfe=function(e){if(!cfe(e))return!1;var t=ufe(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},dfe=efe["__core-js_shared__"];var ffe,hfe=(ffe=/[^.]+$/.exec(dfe&&dfe.keys&&dfe.keys.IE_PROTO||""))?"Symbol(src)_1."+ffe:"";var pfe=Function.prototype.toString;const vfe=function(e){if(null!=e){try{return pfe.call(e)}catch(e){}try{return e+""}catch(e){}}return""};var mfe=/^\[object .+?Constructor\]$/,gfe=Function.prototype,bfe=Object.prototype,yfe=gfe.toString,wfe=bfe.hasOwnProperty,Afe=RegExp("^"+yfe.call(wfe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const kfe=function(e){return!(!cfe(e)||(t=e,hfe&&hfe in t))&&(sfe(e)?Afe:mfe).test(vfe(e));var t},_fe=function(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return kfe(n)?n:void 0},Cfe=_fe(efe,"Map"),Nfe=_fe(Object,"create");var Ofe=Object.prototype.hasOwnProperty;var xfe=Object.prototype.hasOwnProperty;function Efe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Efe.prototype.clear=function(){this.__data__=Nfe?Nfe(null):{},this.size=0},Efe.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Efe.prototype.get=function(e){var t=this.__data__;if(Nfe){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Ofe.call(t,e)?t[e]:void 0},Efe.prototype.has=function(e){var t=this.__data__;return Nfe?void 0!==t[e]:xfe.call(t,e)},Efe.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Nfe&&void 0===t?"__lodash_hash_undefined__":t,this};const Dfe=Efe,Pfe=function(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map};function Rfe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Rfe.prototype.clear=function(){this.size=0,this.__data__={hash:new Dfe,map:new(Cfe||Xde),string:new Dfe}},Rfe.prototype.delete=function(e){var t=Pfe(this,e).delete(e);return this.size-=t?1:0,t},Rfe.prototype.get=function(e){return Pfe(this,e).get(e)},Rfe.prototype.has=function(e){return Pfe(this,e).has(e)},Rfe.prototype.set=function(e,t){var n=Pfe(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};const Sfe=Rfe;function Tfe(e){var t=this.__data__=new Xde(e);this.size=t.size}Tfe.prototype.clear=function(){this.__data__=new Xde,this.size=0},Tfe.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Tfe.prototype.get=function(e){return this.__data__.get(e)},Tfe.prototype.has=function(e){return this.__data__.has(e)},Tfe.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Xde){var r=n.__data__;if(!Cfe||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Sfe(r)}return n.set(e,t),this.size=n.size,this};const jfe=Tfe,Ife=function(){try{var e=_fe(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Bfe=function(e,t,n){"__proto__"==t&&Ife?Ife(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},Mfe=function(e,t,n){(void 0!==n&&!Kde(e[t],n)||void 0===n&&!(t in e))&&Bfe(e,t,n)},Ffe=function(e,t,n){for(var r=-1,o=Object(e),i=n(e),a=i.length;a--;){var l=i[Lfe?a:++r];if(!1===t(o[l],l,o))break}return e};var Lfe,Ufe="object"==typeof exports&&exports&&!exports.nodeType&&exports,Vfe=Ufe&&"object"==typeof module&&module&&!module.nodeType&&module,Hfe=Vfe&&Vfe.exports===Ufe?efe.Buffer:void 0,zfe=Hfe?Hfe.allocUnsafe:void 0;const Wfe=efe.Uint8Array,qfe=function(e,t){var n,r,o=t?(n=e.buffer,r=new n.constructor(n.byteLength),new Wfe(r).set(new Wfe(n)),r):e.buffer;return new e.constructor(o,e.byteOffset,e.length)};var $fe=Object.create;const Kfe=function(){function e(){}return function(t){if(!cfe(t))return{};if($fe)return $fe(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),Yfe=function(e,t){return function(n){return e(t(n))}},Gfe=Yfe(Object.getPrototypeOf,Object);var Jfe=Object.prototype;const Xfe=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Jfe)},Qfe=function(e){return null!=e&&"object"==typeof e},Zfe=function(e){return Qfe(e)&&"[object Arguments]"==ufe(e)};var ehe=Object.prototype,the=ehe.hasOwnProperty,nhe=ehe.propertyIsEnumerable;const rhe=Zfe(function(){return arguments}())?Zfe:function(e){return Qfe(e)&&the.call(e,"callee")&&!nhe.call(e,"callee")},ohe=Array.isArray,ihe=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},ahe=function(e){return null!=e&&ihe(e.length)&&!sfe(e)};var lhe="object"==typeof exports&&exports&&!exports.nodeType&&exports,uhe=lhe&&"object"==typeof module&&module&&!module.nodeType&&module,che=uhe&&uhe.exports===lhe?efe.Buffer:void 0;const she=(che?che.isBuffer:void 0)||function(){return!1};var dhe=Function.prototype,fhe=Object.prototype,hhe=dhe.toString,phe=fhe.hasOwnProperty,vhe=hhe.call(Object);var mhe={};mhe["[object Float32Array]"]=mhe["[object Float64Array]"]=mhe["[object Int8Array]"]=mhe["[object Int16Array]"]=mhe["[object Int32Array]"]=mhe["[object Uint8Array]"]=mhe["[object Uint8ClampedArray]"]=mhe["[object Uint16Array]"]=mhe["[object Uint32Array]"]=!0,mhe["[object Arguments]"]=mhe["[object Array]"]=mhe["[object ArrayBuffer]"]=mhe["[object Boolean]"]=mhe["[object DataView]"]=mhe["[object Date]"]=mhe["[object Error]"]=mhe["[object Function]"]=mhe["[object Map]"]=mhe["[object Number]"]=mhe["[object Object]"]=mhe["[object RegExp]"]=mhe["[object Set]"]=mhe["[object String]"]=mhe["[object WeakMap]"]=!1;var ghe="object"==typeof exports&&exports&&!exports.nodeType&&exports,bhe=ghe&&"object"==typeof module&&module&&!module.nodeType&&module,yhe=bhe&&bhe.exports===ghe&&Qde.process,whe=function(){try{return bhe&&bhe.require&&bhe.require("util").types||yhe&&yhe.binding&&yhe.binding("util")}catch(e){}}(),Ahe=whe&&whe.isTypedArray;const khe=Ahe?(_he=Ahe,function(e){return _he(e)}):function(e){return Qfe(e)&&ihe(e.length)&&!!mhe[ufe(e)]};var _he;const Che=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]};var Nhe=Object.prototype.hasOwnProperty;const Ohe=function(e,t,n){var r=e[t];Nhe.call(e,t)&&Kde(r,n)&&(void 0!==n||t in e)||Bfe(e,t,n)};var xhe=/^(?:0|[1-9]\d*)$/;const Ehe=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&xhe.test(e))&&e>-1&&e%1==0&&e<t};var Dhe=Object.prototype.hasOwnProperty;const Phe=function(e,t){var n=ohe(e),r=!n&&rhe(e),o=!n&&!r&&she(e),i=!n&&!r&&!o&&khe(e),a=n||r||o||i,l=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],u=l.length;for(var c in e)!t&&!Dhe.call(e,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ehe(c,u))||l.push(c);return l};var Rhe=Object.prototype.hasOwnProperty;const She=function(e){if(!cfe(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=Xfe(e),n=[];for(var r in e)("constructor"!=r||!t&&Rhe.call(e,r))&&n.push(r);return n},The=function(e){return ahe(e)?Phe(e,!0):She(e)},jhe=function(e){return function(e,t,n,r){var o=!n;n||(n={});for(var i=-1,a=t.length;++i<a;){var l=t[i],u=r?r(n[l],e[l],l,n,e):void 0;void 0===u&&(u=e[l]),o?Bfe(n,l,u):Ohe(n,l,u)}return n}(e,The(e))},Ihe=function(e,t,n,r,o,i,a){var l,u=Che(e,n),c=Che(t,n),s=a.get(c);if(s)Mfe(e,n,s);else{var d=i?i(u,c,n+"",e,t,a):void 0,f=void 0===d;if(f){var h=ohe(c),p=!h&&she(c),v=!h&&!p&&khe(c);d=c,h||p||v?ohe(u)?d=u:Qfe(l=u)&&ahe(l)?d=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(u):p?(f=!1,d=function(e,t){if(t)return e.slice();var n=e.length,r=zfe?zfe(n):new e.constructor(n);return e.copy(r),r}(c,!0)):v?(f=!1,d=qfe(c,!0)):d=[]:function(e){if(!Qfe(e)||"[object Object]"!=ufe(e))return!1;var t=Gfe(e);if(null===t)return!0;var n=phe.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&hhe.call(n)==vhe}(c)||rhe(c)?(d=u,rhe(u)?d=jhe(u):cfe(u)&&!sfe(u)||(d=function(e){return"function"!=typeof e.constructor||Xfe(e)?{}:Kfe(Gfe(e))}(c))):f=!1}f&&(a.set(c,d),o(d,c,r,i,a),a.delete(c)),Mfe(e,n,d)}},Bhe=function e(t,n,r,o,i){t!==n&&Ffe(n,(function(a,l){if(i||(i=new jfe),cfe(a))Ihe(t,n,l,r,e,o,i);else{var u=o?o(Che(t,l),a,l+"",t,n,i):void 0;void 0===u&&(u=a),Mfe(t,l,u)}}),The)},Mhe=function(e){return e};var Fhe=Math.max;const Lhe=Ife?function(e,t){return Ife(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:Mhe;var Uhe=Date.now;const Vhe=function(e){var t=0,n=0;return function(){var r=Uhe(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(Lhe),Hhe=function(e,t){return Vhe(function(e,t,n){return t=Fhe(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=Fhe(r.length-t,0),a=Array(i);++o<i;)a[o]=r[t+o];o=-1;for(var l=Array(t+1);++o<t;)l[o]=r[o];return l[t]=n(a),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,l)}}(e,t,Mhe),e+"")},zhe=(Whe=function(e,t,n){Bhe(e,t,n)},Hhe((function(e,t){var n=-1,r=t.length,o=r>1?t[r-1]:void 0,i=r>2?t[2]:void 0;for(o=Whe.length>3&&"function"==typeof o?(r--,o):void 0,i&&function(e,t,n){if(!cfe(n))return!1;var r=typeof t;return!!("number"==r?ahe(n)&&Ehe(t,n.length):"string"==r&&t in n)&&Kde(n[t],e)}(t[0],t[1],i)&&(o=r<3?void 0:o,r=1),e=Object(e);++n<r;){var a=t[n];a&&Whe(e,a,n,o)}return e})));var Whe,qhe=function(e){var t=e.zDepth,n=e.radius,r=e.background,o=e.children,i=e.styles,a=void 0===i?{}:i,l=(0,Nde.Ay)(zhe({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+t+"px "+4*t+"px rgba(0,0,0,.24)",borderRadius:n,background:r}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},a),{"zDepth-1":1===t});return Gu().createElement("div",{style:l.wrap},Gu().createElement("div",{style:l.bg}),Gu().createElement("div",{style:l.content},o))};qhe.propTypes={background:$de().string,zDepth:$de().oneOf([0,1,2,3,4,5]),radius:$de().number,styles:$de().object},qhe.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};const $he=qhe,Khe=function(){return efe.Date.now()};var Yhe=/\s/;var Ghe=/^\s+/;const Jhe=function(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&Yhe.test(e.charAt(t)););return t}(e)+1).replace(Ghe,""):e},Xhe=function(e){return"symbol"==typeof e||Qfe(e)&&"[object Symbol]"==ufe(e)};var Qhe=/^[-+]0x[0-9a-f]+$/i,Zhe=/^0b[01]+$/i,epe=/^0o[0-7]+$/i,tpe=parseInt;const npe=function(e){if("number"==typeof e)return e;if(Xhe(e))return NaN;if(cfe(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=cfe(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Jhe(e);var n=Zhe.test(e);return n||epe.test(e)?tpe(e.slice(2),n?2:8):Qhe.test(e)?NaN:+e};var rpe=Math.max,ope=Math.min;const ipe=function(e,t,n){var r,o,i,a,l,u,c=0,s=!1,d=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function h(t){var n=r,i=o;return r=o=void 0,c=t,a=e.apply(i,n)}function p(e){var n=e-u;return void 0===u||n>=t||n<0||d&&e-c>=i}function v(){var e=Khe();if(p(e))return m(e);l=setTimeout(v,function(e){var n=t-(e-u);return d?ope(n,i-(e-c)):n}(e))}function m(e){return l=void 0,f&&r?h(e):(r=o=void 0,a)}function g(){var e=Khe(),n=p(e);if(r=arguments,o=this,u=e,n){if(void 0===l)return function(e){return c=e,l=setTimeout(v,t),s?h(e):a}(u);if(d)return clearTimeout(l),l=setTimeout(v,t),h(u)}return void 0===l&&(l=setTimeout(v,t)),a}return t=npe(t)||0,cfe(n)&&(s=!!n.leading,i=(d="maxWait"in n)?rpe(npe(n.maxWait)||0,t):i,f="trailing"in n?!!n.trailing:f),g.cancel=function(){void 0!==l&&clearTimeout(l),c=0,r=u=o=l=void 0},g.flush=function(){return void 0===l?a:m(Khe())},g};var ape=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),lpe=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChange=function(e){"function"==typeof n.props.onChange&&n.throttle(n.props.onChange,function(e,t,n){var r=n.getBoundingClientRect(),o=r.width,i=r.height,a="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,l="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,u=a-(n.getBoundingClientRect().left+window.pageXOffset),c=l-(n.getBoundingClientRect().top+window.pageYOffset);u<0?u=0:u>o&&(u=o),c<0?c=0:c>i&&(c=i);var s=u/o,d=1-c/i;return{h:t.h,s,v:d,a:t.a,source:"hsv"}}(e,n.props.hsl,n.container),e)},n.handleMouseDown=function(e){n.handleChange(e);var t=n.getContainerRenderWindow();t.addEventListener("mousemove",n.handleChange),t.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return cfe(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),ipe(e,t,{leading:r,maxWait:t,trailing:o})}((function(e,t,n){e(t,n)}),50),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),ape(t,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var e=this.container,t=window;!t.document.contains(e)&&t.parent!==t;)t=t.parent;return t}},{key:"unbindEventListeners",value:function(){var e=this.getContainerRenderWindow();e.removeEventListener("mousemove",this.handleChange),e.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.style||{},n=t.color,r=t.white,o=t.black,i=t.pointer,a=t.circle,l=(0,Nde.Ay)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-100*this.props.hsv.v+100+"%",left:100*this.props.hsv.s+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:"0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),\n            0 0 1px 2px rgba(0,0,0,.4)",borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:n,white:r,black:o,pointer:i,circle:a}},{custom:!!this.props.style});return Gu().createElement("div",{style:l.color,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},Gu().createElement("style",null,"\n          .saturation-white {\n            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));\n            background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n          }\n          .saturation-black {\n            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));\n            background: linear-gradient(to top, #000, rgba(0,0,0,0));\n          }\n        "),Gu().createElement("div",{style:l.white,className:"saturation-white"},Gu().createElement("div",{style:l.black,className:"saturation-black"}),Gu().createElement("div",{style:l.pointer},this.props.pointer?Gu().createElement(this.props.pointer,this.props):Gu().createElement("div",{style:l.circle}))))}}]),t}(Yu.PureComponent||Yu.Component);const upe=lpe,cpe=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},spe=Yfe(Object.keys,Object);var dpe=Object.prototype.hasOwnProperty;const fpe=function(e){return ahe(e)?Phe(e):function(e){if(!Xfe(e))return spe(e);var t=[];for(var n in Object(e))dpe.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)},hpe=function(e,t){return function(n,r){if(null==n)return n;if(!ahe(n))return e(n,r);for(var o=n.length,i=t?o:-1,a=Object(n);(t?i--:++i<o)&&!1!==r(a[i],i,a););return n}}((function(e,t){return e&&Ffe(e,t,fpe)})),ppe=function(e,t){return(ohe(e)?cpe:hpe)(e,"function"==typeof(n=t)?n:Mhe);var n};function vpe(e){return vpe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vpe(e)}var mpe=/^\s+/,gpe=/\s+$/;function bpe(e,t){if(t=t||{},(e=e||"")instanceof bpe)return e;if(!(this instanceof bpe))return new bpe(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,r=null,o=null,i=null,a=!1,l=!1;return"string"==typeof e&&(e=function(e){e=e.replace(mpe,"").replace(gpe,"").toLowerCase();var t,n=!1;if(Ipe[e])e=Ipe[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=Ype.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=Ype.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=Ype.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=Ype.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=Ype.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=Ype.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=Ype.hex8.exec(e))?{r:Upe(t[1]),g:Upe(t[2]),b:Upe(t[3]),a:Wpe(t[4]),format:n?"name":"hex8"}:(t=Ype.hex6.exec(e))?{r:Upe(t[1]),g:Upe(t[2]),b:Upe(t[3]),format:n?"name":"hex"}:(t=Ype.hex4.exec(e))?{r:Upe(t[1]+""+t[1]),g:Upe(t[2]+""+t[2]),b:Upe(t[3]+""+t[3]),a:Wpe(t[4]+""+t[4]),format:n?"name":"hex8"}:!!(t=Ype.hex3.exec(e))&&{r:Upe(t[1]+""+t[1]),g:Upe(t[2]+""+t[2]),b:Upe(t[3]+""+t[3]),format:n?"name":"hex"}}(e)),"object"==vpe(e)&&(Gpe(e.r)&&Gpe(e.g)&&Gpe(e.b)?(t=function(e,t,n){return{r:255*Fpe(e,255),g:255*Fpe(t,255),b:255*Fpe(n,255)}}(e.r,e.g,e.b),a=!0,l="%"===String(e.r).substr(-1)?"prgb":"rgb"):Gpe(e.h)&&Gpe(e.s)&&Gpe(e.v)?(r=Hpe(e.s),o=Hpe(e.v),t=function(e,t,n){e=6*Fpe(e,360),t=Fpe(t,100),n=Fpe(n,100);var r=Math.floor(e),o=e-r,i=n*(1-t),a=n*(1-o*t),l=n*(1-(1-o)*t),u=r%6;return{r:255*[n,a,i,i,l,n][u],g:255*[l,n,n,a,i,i][u],b:255*[i,i,l,n,n,a][u]}}(e.h,r,o),a=!0,l="hsv"):Gpe(e.h)&&Gpe(e.s)&&Gpe(e.l)&&(r=Hpe(e.s),i=Hpe(e.l),t=function(e,t,n){var r,o,i;function a(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=Fpe(e,360),t=Fpe(t,100),n=Fpe(n,100),0===t)r=o=i=n;else{var l=n<.5?n*(1+t):n+t-n*t,u=2*n-l;r=a(u,l,e+1/3),o=a(u,l,e),i=a(u,l,e-1/3)}return{r:255*r,g:255*o,b:255*i}}(e.h,r,i),a=!0,l="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=Mpe(n),{ok:a,format:e.format||l,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}function ype(e,t,n){e=Fpe(e,255),t=Fpe(t,255),n=Fpe(n,255);var r,o,i=Math.max(e,t,n),a=Math.min(e,t,n),l=(i+a)/2;if(i==a)r=o=0;else{var u=i-a;switch(o=l>.5?u/(2-i-a):u/(i+a),i){case e:r=(t-n)/u+(t<n?6:0);break;case t:r=(n-e)/u+2;break;case n:r=(e-t)/u+4}r/=6}return{h:r,s:o,l}}function wpe(e,t,n){e=Fpe(e,255),t=Fpe(t,255),n=Fpe(n,255);var r,o,i=Math.max(e,t,n),a=Math.min(e,t,n),l=i,u=i-a;if(o=0===i?0:u/i,i==a)r=0;else{switch(i){case e:r=(t-n)/u+(t<n?6:0);break;case t:r=(n-e)/u+2;break;case n:r=(e-t)/u+4}r/=6}return{h:r,s:o,v:l}}function Ape(e,t,n,r){var o=[Vpe(Math.round(e).toString(16)),Vpe(Math.round(t).toString(16)),Vpe(Math.round(n).toString(16))];return r&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function kpe(e,t,n,r){return[Vpe(zpe(r)),Vpe(Math.round(e).toString(16)),Vpe(Math.round(t).toString(16)),Vpe(Math.round(n).toString(16))].join("")}function _pe(e,t){t=0===t?0:t||10;var n=bpe(e).toHsl();return n.s-=t/100,n.s=Lpe(n.s),bpe(n)}function Cpe(e,t){t=0===t?0:t||10;var n=bpe(e).toHsl();return n.s+=t/100,n.s=Lpe(n.s),bpe(n)}function Npe(e){return bpe(e).desaturate(100)}function Ope(e,t){t=0===t?0:t||10;var n=bpe(e).toHsl();return n.l+=t/100,n.l=Lpe(n.l),bpe(n)}function xpe(e,t){t=0===t?0:t||10;var n=bpe(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),bpe(n)}function Epe(e,t){t=0===t?0:t||10;var n=bpe(e).toHsl();return n.l-=t/100,n.l=Lpe(n.l),bpe(n)}function Dpe(e,t){var n=bpe(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,bpe(n)}function Ppe(e){var t=bpe(e).toHsl();return t.h=(t.h+180)%360,bpe(t)}function Rpe(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=bpe(e).toHsl(),r=[bpe(e)],o=360/t,i=1;i<t;i++)r.push(bpe({h:(n.h+i*o)%360,s:n.s,l:n.l}));return r}function Spe(e){var t=bpe(e).toHsl(),n=t.h;return[bpe(e),bpe({h:(n+72)%360,s:t.s,l:t.l}),bpe({h:(n+216)%360,s:t.s,l:t.l})]}function Tpe(e,t,n){t=t||6,n=n||30;var r=bpe(e).toHsl(),o=360/n,i=[bpe(e)];for(r.h=(r.h-(o*t>>1)+720)%360;--t;)r.h=(r.h+o)%360,i.push(bpe(r));return i}function jpe(e,t){t=t||6;for(var n=bpe(e).toHsv(),r=n.h,o=n.s,i=n.v,a=[],l=1/t;t--;)a.push(bpe({h:r,s:o,v:i})),i=(i+l)%1;return a}bpe.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=Mpe(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=wpe(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=wpe(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=ype(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=ype(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return Ape(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,o){var i=[Vpe(Math.round(e).toString(16)),Vpe(Math.round(t).toString(16)),Vpe(Math.round(n).toString(16)),Vpe(zpe(r))];return o&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)&&i[3].charAt(0)==i[3].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0):i.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*Fpe(this._r,255))+"%",g:Math.round(100*Fpe(this._g,255))+"%",b:Math.round(100*Fpe(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*Fpe(this._r,255))+"%, "+Math.round(100*Fpe(this._g,255))+"%, "+Math.round(100*Fpe(this._b,255))+"%)":"rgba("+Math.round(100*Fpe(this._r,255))+"%, "+Math.round(100*Fpe(this._g,255))+"%, "+Math.round(100*Fpe(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(Bpe[Ape(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+kpe(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var o=bpe(e);n="#"+kpe(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return bpe(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(Ope,arguments)},brighten:function(){return this._applyModification(xpe,arguments)},darken:function(){return this._applyModification(Epe,arguments)},desaturate:function(){return this._applyModification(_pe,arguments)},saturate:function(){return this._applyModification(Cpe,arguments)},greyscale:function(){return this._applyModification(Npe,arguments)},spin:function(){return this._applyModification(Dpe,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(Tpe,arguments)},complement:function(){return this._applyCombination(Ppe,arguments)},monochromatic:function(){return this._applyCombination(jpe,arguments)},splitcomplement:function(){return this._applyCombination(Spe,arguments)},triad:function(){return this._applyCombination(Rpe,[3])},tetrad:function(){return this._applyCombination(Rpe,[4])}},bpe.fromRatio=function(e,t){if("object"==vpe(e)){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:Hpe(e[r]));e=n}return bpe(e,t)},bpe.equals=function(e,t){return!(!e||!t)&&bpe(e).toRgbString()==bpe(t).toRgbString()},bpe.random=function(){return bpe.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},bpe.mix=function(e,t,n){n=0===n?0:n||50;var r=bpe(e).toRgb(),o=bpe(t).toRgb(),i=n/100;return bpe({r:(o.r-r.r)*i+r.r,g:(o.g-r.g)*i+r.g,b:(o.b-r.b)*i+r.b,a:(o.a-r.a)*i+r.a})},bpe.readability=function(e,t){var n=bpe(e),r=bpe(t);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)},bpe.isReadable=function(e,t,n){var r,o,i,a,l,u=bpe.readability(e,t);switch(o=!1,(i=n,"AA"!==(a=((i=i||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==a&&(a="AA"),"small"!==(l=(i.size||"small").toLowerCase())&&"large"!==l&&(l="small"),r={level:a,size:l}).level+r.size){case"AAsmall":case"AAAlarge":o=u>=4.5;break;case"AAlarge":o=u>=3;break;case"AAAsmall":o=u>=7}return o},bpe.mostReadable=function(e,t,n){var r,o,i,a,l=null,u=0;o=(n=n||{}).includeFallbackColors,i=n.level,a=n.size;for(var c=0;c<t.length;c++)(r=bpe.readability(e,t[c]))>u&&(u=r,l=bpe(t[c]));return bpe.isReadable(e,l,{level:i,size:a})||!o?l:(n.includeFallbackColors=!1,bpe.mostReadable(e,["#fff","#000"],n))};var Ipe=bpe.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Bpe=bpe.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(Ipe);function Mpe(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Fpe(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function Lpe(e){return Math.min(1,Math.max(0,e))}function Upe(e){return parseInt(e,16)}function Vpe(e){return 1==e.length?"0"+e:""+e}function Hpe(e){return e<=1&&(e=100*e+"%"),e}function zpe(e){return Math.round(255*parseFloat(e)).toString(16)}function Wpe(e){return Upe(e)/255}var qpe,$pe,Kpe,Ype=($pe="[\\s|\\(]+("+(qpe="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+qpe+")[,|\\s]+("+qpe+")\\s*\\)?",Kpe="[\\s|\\(]+("+qpe+")[,|\\s]+("+qpe+")[,|\\s]+("+qpe+")[,|\\s]+("+qpe+")\\s*\\)?",{CSS_UNIT:new RegExp(qpe),rgb:new RegExp("rgb"+$pe),rgba:new RegExp("rgba"+Kpe),hsl:new RegExp("hsl"+$pe),hsla:new RegExp("hsla"+Kpe),hsv:new RegExp("hsv"+$pe),hsva:new RegExp("hsva"+Kpe),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function Gpe(e){return!!Ype.CSS_UNIT.exec(e)}var Jpe=function(e){var t=0,n=0;return ppe(["r","g","b","a","h","s","l","v"],(function(r){e[r]&&(t+=1,isNaN(e[r])||(n+=1),"s"===r||"l"===r)&&/^\d+%$/.test(e[r])&&(n+=1)})),t===n&&e},Xpe=function(e,t){var n=e.hex?bpe(e.hex):bpe(e),r=n.toHsl(),o=n.toHsv(),i=n.toRgb(),a=n.toHex();return 0===r.s&&(r.h=t||0,o.h=t||0),{hsl:r,hex:"000000"===a&&0===i.a?"transparent":"#"+a,rgb:i,hsv:o,oldHue:e.h||t||r.h,source:e.source}},Qpe=function(e){if("transparent"===e)return!0;var t="#"===String(e).charAt(0)?1:0;return e.length!==4+t&&e.length<7+t&&bpe(e).isValid()},Zpe=function(e){if(!e)return"#fff";var t=Xpe(e);return"transparent"===t.hex?"rgba(0,0,0,0.4)":(299*t.rgb.r+587*t.rgb.g+114*t.rgb.b)/1e3>=128?"#000":"#fff"},eve=function(e,t){return bpe(t+" ("+e.replace("°","")+")")._ok},tve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nve=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();const rve=function(e){var t=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.handleChange=function(e,n){if(Jpe(e)){var r=Xpe(e,e.h||t.state.oldHue);t.setState(r),t.props.onChangeComplete&&t.debounce(t.props.onChangeComplete,r,n),t.props.onChange&&t.props.onChange(r,n)}},t.handleSwatchHover=function(e,n){if(Jpe(e)){var r=Xpe(e,e.h||t.state.oldHue);t.props.onSwatchHover&&t.props.onSwatchHover(r,n)}},t.state=tve({},Xpe(e.color,0)),t.debounce=ipe((function(e,t,n){e(t,n)}),100),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),nve(n,[{key:"render",value:function(){var t={};return this.props.onSwatchHover&&(t.onSwatchHover=this.handleSwatchHover),Gu().createElement(e,tve({},this.props,this.state,{onChange:this.handleChange},t))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return tve({},Xpe(e.color,t.oldHue))}}]),n}(Yu.PureComponent||Yu.Component);return t.propTypes=tve({},e.propTypes),t.defaultProps=tve({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),t};var ove=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ive=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function ave(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var lve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};const uve=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=n=ave(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(i))),n.state={focus:!1},n.handleFocus=function(){return n.setState({focus:!0})},n.handleBlur=function(){return n.setState({focus:!1})},ave(n,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),ive(r,[{key:"render",value:function(){return Gu().createElement(t,{onFocus:this.handleFocus,onBlur:this.handleBlur},Gu().createElement(e,ove({},this.props,this.state)))}}]),r}(Gu().Component)}((function(e){var t=e.color,n=e.style,r=e.onClick,o=void 0===r?function(){}:r,i=e.onHover,a=e.title,l=void 0===a?t:a,u=e.children,c=e.focus,s=e.focusStyle,d=void 0===s?{}:s,f="transparent"===t,h=(0,Nde.Ay)({default:{swatch:lve({background:t,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},n,c?d:{})}}),p={};return i&&(p.onMouseOver=function(e){return i(t,e)}),Gu().createElement("div",lve({style:h.swatch,onClick:function(e){return o(t,e)},title:l,tabIndex:0,onKeyDown:function(e){return 13===e.keyCode&&o(t,e)}},p),u,f&&Gu().createElement(Pde,{borderRadius:h.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))}));var cve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sve=function(e){var t=e.rgb,n=e.hsl,r=e.width,o=e.height,i=e.onChange,a=e.direction,l=e.style,u=e.renderers,c=e.pointer,s=e.className,d=void 0===s?"":s,f=(0,Nde.Ay)({default:{picker:{position:"relative",width:r,height:o},alpha:{radius:"2px",style:l}}});return Gu().createElement("div",{style:f.picker,className:"alpha-picker "+d},Gu().createElement(Ide,cve({},f.alpha,{rgb:t,hsl:n,pointer:c,renderers:u,onChange:i,direction:a})))};sve.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:function(e){var t=e.direction,n=(0,Nde.Ay)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return Gu().createElement("div",{style:n.picker})}},rve(sve);const dve=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o};function fve(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Sfe;++t<n;)this.add(e[t])}fve.prototype.add=fve.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},fve.prototype.has=function(e){return this.__data__.has(e)};const hve=fve,pve=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},vve=function(e,t){return e.has(t)},mve=function(e,t,n,r,o,i){var a=1&n,l=e.length,u=t.length;if(l!=u&&!(a&&u>l))return!1;var c=i.get(e),s=i.get(t);if(c&&s)return c==t&&s==e;var d=-1,f=!0,h=2&n?new hve:void 0;for(i.set(e,t),i.set(t,e);++d<l;){var p=e[d],v=t[d];if(r)var m=a?r(v,p,d,t,e,i):r(p,v,d,e,t,i);if(void 0!==m){if(m)continue;f=!1;break}if(h){if(!pve(t,(function(e,t){if(!vve(h,t)&&(p===e||o(p,e,n,r,i)))return h.push(t)}))){f=!1;break}}else if(p!==v&&!o(p,v,n,r,i)){f=!1;break}}return i.delete(e),i.delete(t),f},gve=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n},bve=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n};var yve=tfe?tfe.prototype:void 0,wve=yve?yve.valueOf:void 0;var Ave=Object.prototype.propertyIsEnumerable,kve=Object.getOwnPropertySymbols,_ve=kve?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}(kve(e),(function(t){return Ave.call(e,t)})))}:function(){return[]};const Cve=_ve,Nve=function(e){return function(e,t,n){var r=t(e);return ohe(e)?r:function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}(r,n(e))}(e,fpe,Cve)};var Ove=Object.prototype.hasOwnProperty;const xve=_fe(efe,"DataView"),Eve=_fe(efe,"Promise"),Dve=_fe(efe,"Set"),Pve=_fe(efe,"WeakMap");var Rve="[object Map]",Sve="[object Promise]",Tve="[object Set]",jve="[object WeakMap]",Ive="[object DataView]",Bve=vfe(xve),Mve=vfe(Cfe),Fve=vfe(Eve),Lve=vfe(Dve),Uve=vfe(Pve),Vve=ufe;(xve&&Vve(new xve(new ArrayBuffer(1)))!=Ive||Cfe&&Vve(new Cfe)!=Rve||Eve&&Vve(Eve.resolve())!=Sve||Dve&&Vve(new Dve)!=Tve||Pve&&Vve(new Pve)!=jve)&&(Vve=function(e){var t=ufe(e),n="[object Object]"==t?e.constructor:void 0,r=n?vfe(n):"";if(r)switch(r){case Bve:return Ive;case Mve:return Rve;case Fve:return Sve;case Lve:return Tve;case Uve:return jve}return t});const Hve=Vve;var zve="[object Arguments]",Wve="[object Array]",qve="[object Object]",$ve=Object.prototype.hasOwnProperty;const Kve=function(e,t,n,r,o,i){var a=ohe(e),l=ohe(t),u=a?Wve:Hve(e),c=l?Wve:Hve(t),s=(u=u==zve?qve:u)==qve,d=(c=c==zve?qve:c)==qve,f=u==c;if(f&&she(e)){if(!she(t))return!1;a=!0,s=!1}if(f&&!s)return i||(i=new jfe),a||khe(e)?mve(e,t,n,r,o,i):function(e,t,n,r,o,i,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new Wfe(e),new Wfe(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Kde(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var l=gve;case"[object Set]":var u=1&r;if(l||(l=bve),e.size!=t.size&&!u)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var s=mve(l(e),l(t),r,o,i,a);return a.delete(e),s;case"[object Symbol]":if(wve)return wve.call(e)==wve.call(t)}return!1}(e,t,u,n,r,o,i);if(!(1&n)){var h=s&&$ve.call(e,"__wrapped__"),p=d&&$ve.call(t,"__wrapped__");if(h||p){var v=h?e.value():e,m=p?t.value():t;return i||(i=new jfe),o(v,m,n,r,i)}}return!!f&&(i||(i=new jfe),function(e,t,n,r,o,i){var a=1&n,l=Nve(e),u=l.length;if(u!=Nve(t).length&&!a)return!1;for(var c=u;c--;){var s=l[c];if(!(a?s in t:Ove.call(t,s)))return!1}var d=i.get(e),f=i.get(t);if(d&&f)return d==t&&f==e;var h=!0;i.set(e,t),i.set(t,e);for(var p=a;++c<u;){var v=e[s=l[c]],m=t[s];if(r)var g=a?r(m,v,s,t,e,i):r(v,m,s,e,t,i);if(!(void 0===g?v===m||o(v,m,n,r,i):g)){h=!1;break}p||(p="constructor"==s)}if(h&&!p){var b=e.constructor,y=t.constructor;b==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof y&&y instanceof y||(h=!1)}return i.delete(e),i.delete(t),h}(e,t,n,r,o,i))},Yve=function e(t,n,r,o,i){return t===n||(null==t||null==n||!Qfe(t)&&!Qfe(n)?t!=t&&n!=n:Kve(t,n,r,o,e,i))},Gve=function(e){return e==e&&!cfe(e)},Jve=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}},Xve=function(e){var t=function(e){for(var t=fpe(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,Gve(o)]}return t}(e);return 1==t.length&&t[0][2]?Jve(t[0][0],t[0][1]):function(n){return n===e||function(e,t,n,r){var o=n.length,i=o,a=!r;if(null==e)return!i;for(e=Object(e);o--;){var l=n[o];if(a&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++o<i;){var u=(l=n[o])[0],c=e[u],s=l[1];if(a&&l[2]){if(void 0===c&&!(u in e))return!1}else{var d=new jfe;if(r)var f=r(c,s,u,e,t,d);if(!(void 0===f?Yve(s,c,3,r,d):f))return!1}}return!0}(n,e,t)}};var Qve=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Zve=/^\w*$/;const eme=function(e,t){if(ohe(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Xhe(e))||Zve.test(e)||!Qve.test(e)||null!=t&&e in Object(t)};function tme(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(tme.Cache||Sfe),n}tme.Cache=Sfe;const nme=tme;var rme=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ome=/\\(\\)?/g,ime=function(e){var t=nme(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(rme,(function(e,n,r,o){t.push(r?o.replace(ome,"$1"):n||e)})),t}));const ame=ime;var lme=tfe?tfe.prototype:void 0,ume=lme?lme.toString:void 0;const cme=function e(t){if("string"==typeof t)return t;if(ohe(t))return dve(t,e)+"";if(Xhe(t))return ume?ume.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n},sme=function(e){return null==e?"":cme(e)},dme=function(e,t){return ohe(e)?e:eme(e,t)?[e]:ame(sme(e))},fme=function(e){if("string"==typeof e||Xhe(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},hme=function(e,t){for(var n=0,r=(t=dme(t,e)).length;null!=e&&n<r;)e=e[fme(t[n++])];return n&&n==r?e:void 0},pme=function(e,t){return null!=e&&t in Object(e)},vme=function(e,t){return null!=e&&function(e,t,n){for(var r=-1,o=(t=dme(t,e)).length,i=!1;++r<o;){var a=fme(t[r]);if(!(i=null!=e&&n(e,a)))break;e=e[a]}return i||++r!=o?i:!!(o=null==e?0:e.length)&&ihe(o)&&Ehe(a,o)&&(ohe(e)||rhe(e))}(e,t,pme)},mme=function(e,t){return eme(e)&&Gve(t)?Jve(fme(e),t):function(n){var r=function(e,t,n){var r=null==e?void 0:hme(e,t);return void 0===r?n:r}(n,e);return void 0===r&&r===t?vme(n,e):Yve(t,r,3)}},gme=function(e){return eme(e)?function(e){return function(t){return null==t?void 0:t[e]}}(fme(e)):function(e){return function(t){return hme(t,e)}}(e)},bme=function(e,t){var n=-1,r=ahe(e)?Array(e.length):[];return hpe(e,(function(e,o,i){r[++n]=t(e,o,i)})),r},yme=function(e,t){return(ohe(e)?dve:bme)(e,"function"==typeof(n=t)?n:null==n?Mhe:"object"==typeof n?ohe(n)?mme(n[0],n[1]):Xve(n):gme(n));var n},wme=function(e){var t=e.colors,n=e.onClick,r=e.onSwatchHover,o=(0,Nde.Ay)({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return Gu().createElement("div",{style:o.swatches},yme(t,(function(e){return Gu().createElement(uve,{key:e,color:e,style:o.swatch,onClick:n,onHover:r,focusStyle:{boxShadow:"0 0 4px "+e}})})),Gu().createElement("div",{style:o.clear}))};var Ame=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.hex,o=e.colors,i=e.width,a=e.triangle,l=e.styles,u=void 0===l?{}:l,c=e.className,s=void 0===c?"":c,d="transparent"===r,f=function(e,n){Qpe(e)&&t({hex:e,source:"hex"},n)},h=(0,Nde.Ay)(zhe({default:{card:{width:i,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:r,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:Zpe(r),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+r+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},u),{"hide-triangle":"hide"===a});return Gu().createElement("div",{style:h.card,className:"block-picker "+s},Gu().createElement("div",{style:h.triangle}),Gu().createElement("div",{style:h.head},d&&Gu().createElement(Pde,{borderRadius:"6px 6px 0 0"}),Gu().createElement("div",{style:h.label},r)),Gu().createElement("div",{style:h.body},Gu().createElement(wme,{colors:o,onClick:f,onSwatchHover:n}),Gu().createElement(Ude,{style:{input:h.input},value:r,onChange:f})))};Ame.propTypes={width:$de().oneOfType([$de().string,$de().number]),colors:$de().arrayOf($de().string),triangle:$de().oneOf(["top","hide"]),styles:$de().object},Ame.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}},rve(Ame);var kme="#ffcdd2",_me="#e57373",Cme="#f44336",Nme="#d32f2f",Ome="#b71c1c",xme="#f8bbd0",Eme="#f06292",Dme="#e91e63",Pme="#c2185b",Rme="#880e4f",Sme="#e1bee7",Tme="#ba68c8",jme="#9c27b0",Ime="#7b1fa2",Bme="#4a148c",Mme="#d1c4e9",Fme="#9575cd",Lme="#673ab7",Ume="#512da8",Vme="#311b92",Hme="#c5cae9",zme="#7986cb",Wme="#3f51b5",qme="#303f9f",$me="#1a237e",Kme="#bbdefb",Yme="#64b5f6",Gme="#2196f3",Jme="#1976d2",Xme="#0d47a1",Qme="#b3e5fc",Zme="#4fc3f7",ege="#03a9f4",tge="#0288d1",nge="#01579b",rge="#b2ebf2",oge="#4dd0e1",ige="#00bcd4",age="#0097a7",lge="#006064",uge="#b2dfdb",cge="#4db6ac",sge="#009688",dge="#00796b",fge="#004d40",hge="#c8e6c9",pge="#81c784",vge="#4caf50",mge="#388e3c",gge="#dcedc8",bge="#aed581",yge="#8bc34a",wge="#689f38",Age="#33691e",kge="#f0f4c3",_ge="#dce775",Cge="#cddc39",Nge="#afb42b",Oge="#827717",xge="#fff9c4",Ege="#fff176",Dge="#ffeb3b",Pge="#fbc02d",Rge="#f57f17",Sge="#ffecb3",Tge="#ffd54f",jge="#ffc107",Ige="#ffa000",Bge="#ff6f00",Mge="#ffe0b2",Fge="#ffb74d",Lge="#ff9800",Uge="#f57c00",Vge="#e65100",Hge="#ffccbc",zge="#ff8a65",Wge="#ff5722",qge="#e64a19",$ge="#bf360c",Kge="#d7ccc8",Yge="#a1887f",Gge="#795548",Jge="#5d4037",Xge="#3e2723",Qge="#cfd8dc",Zge="#90a4ae",ebe="#607d8b",tbe="#455a64",nbe="#263238",rbe=function(e){var t=e.color,n=e.onClick,r=e.onSwatchHover,o=e.hover,i=e.active,a=e.circleSize,l=e.circleSpacing,u=(0,Nde.Ay)({default:{swatch:{width:a,height:a,marginRight:l,marginBottom:l,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(a/2+1)+"px "+t,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+t}}},{hover:o,active:i});return Gu().createElement("div",{style:u.swatch},Gu().createElement(uve,{style:u.Swatch,color:t,onClick:n,onHover:r,focusStyle:{boxShadow:u.Swatch.boxShadow+", 0 0 5px "+t}}))};rbe.defaultProps={circleSize:28,circleSpacing:14};const obe=(0,Nde.H8)(rbe);var ibe=function(e){var t=e.width,n=e.onChange,r=e.onSwatchHover,o=e.colors,i=e.hex,a=e.circleSize,l=e.styles,u=void 0===l?{}:l,c=e.circleSpacing,s=e.className,d=void 0===s?"":s,f=(0,Nde.Ay)(zhe({default:{card:{width:t,display:"flex",flexWrap:"wrap",marginRight:-c,marginBottom:-c}}},u)),h=function(e,t){return n({hex:e,source:"hex"},t)};return Gu().createElement("div",{style:f.card,className:"circle-picker "+d},yme(o,(function(e){return Gu().createElement(obe,{key:e,color:e,onClick:h,onSwatchHover:r,active:i===e.toLowerCase(),circleSize:a,circleSpacing:c})})))};ibe.propTypes={width:$de().oneOfType([$de().string,$de().number]),circleSize:$de().number,circleSpacing:$de().number,styles:$de().object},ibe.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[Cme,Dme,jme,Lme,Wme,Gme,ege,ige,sge,vge,yge,Cge,Dge,jge,Lge,Wge,Gge,ebe],styles:{}},rve(ibe);const abe=function(e){return void 0===e};var lbe=o(6086),ube=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),cbe=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.toggleViews=function(){"hex"===n.state.view?n.setState({view:"rgb"}):"rgb"===n.state.view?n.setState({view:"hsl"}):"hsl"===n.state.view&&(1===n.props.hsl.a?n.setState({view:"hex"}):n.setState({view:"rgb"}))},n.handleChange=function(e,t){e.hex?Qpe(e.hex)&&n.props.onChange({hex:e.hex,source:"hex"},t):e.r||e.g||e.b?n.props.onChange({r:e.r||n.props.rgb.r,g:e.g||n.props.rgb.g,b:e.b||n.props.rgb.b,source:"rgb"},t):e.a?(e.a<0?e.a=0:e.a>1&&(e.a=1),n.props.onChange({h:n.props.hsl.h,s:n.props.hsl.s,l:n.props.hsl.l,a:Math.round(100*e.a)/100,source:"rgb"},t)):(e.h||e.s||e.l)&&("string"==typeof e.s&&e.s.includes("%")&&(e.s=e.s.replace("%","")),"string"==typeof e.l&&e.l.includes("%")&&(e.l=e.l.replace("%","")),1==e.s?e.s=.01:1==e.l&&(e.l=.01),n.props.onChange({h:e.h||n.props.hsl.h,s:Number(abe(e.s)?n.props.hsl.s:e.s),l:Number(abe(e.l)?n.props.hsl.l:e.l),source:"hsl"},t))},n.showHighlight=function(e){e.currentTarget.style.background="#eee"},n.hideHighlight=function(e){e.currentTarget.style.background="transparent"},1!==e.hsl.a&&"hex"===e.view?n.state={view:"rgb"}:n.state={view:e.view},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),ube(t,[{key:"render",value:function(){var e=this,t=(0,Nde.Ay)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),n=void 0;return"hex"===this.state.view?n=Gu().createElement("div",{style:t.fields,className:"flexbox-fix"},Gu().createElement("div",{style:t.field},Gu().createElement(Ude,{style:{input:t.input,label:t.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):"rgb"===this.state.view?n=Gu().createElement("div",{style:t.fields,className:"flexbox-fix"},Gu().createElement("div",{style:t.field},Gu().createElement(Ude,{style:{input:t.input,label:t.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),Gu().createElement("div",{style:t.field},Gu().createElement(Ude,{style:{input:t.input,label:t.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),Gu().createElement("div",{style:t.field},Gu().createElement(Ude,{style:{input:t.input,label:t.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),Gu().createElement("div",{style:t.alpha},Gu().createElement(Ude,{style:{input:t.input,label:t.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):"hsl"===this.state.view&&(n=Gu().createElement("div",{style:t.fields,className:"flexbox-fix"},Gu().createElement("div",{style:t.field},Gu().createElement(Ude,{style:{input:t.input,label:t.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),Gu().createElement("div",{style:t.field},Gu().createElement(Ude,{style:{input:t.input,label:t.label},label:"s",value:Math.round(100*this.props.hsl.s)+"%",onChange:this.handleChange})),Gu().createElement("div",{style:t.field},Gu().createElement(Ude,{style:{input:t.input,label:t.label},label:"l",value:Math.round(100*this.props.hsl.l)+"%",onChange:this.handleChange})),Gu().createElement("div",{style:t.alpha},Gu().createElement(Ude,{style:{input:t.input,label:t.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),Gu().createElement("div",{style:t.wrap,className:"flexbox-fix"},n,Gu().createElement("div",{style:t.toggle},Gu().createElement("div",{style:t.icon,onClick:this.toggleViews,ref:function(t){return e.icon=t}},Gu().createElement(lbe.A,{style:t.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return 1!==e.hsl.a&&"hex"===t.view?{view:"rgb"}:null}}]),t}(Gu().Component);cbe.defaultProps={view:"hex"};const sbe=cbe,dbe=function(){var e=(0,Nde.Ay)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return Gu().createElement("div",{style:e.picker})},fbe=function(){var e=(0,Nde.Ay)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return Gu().createElement("div",{style:e.picker})};var hbe=function(e){var t=e.width,n=e.onChange,r=e.disableAlpha,o=e.rgb,i=e.hsl,a=e.hsv,l=e.hex,u=e.renderers,c=e.styles,s=void 0===c?{}:c,d=e.className,f=void 0===d?"":d,h=e.defaultView,p=(0,Nde.Ay)(zhe({default:{picker:{width:t,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+o.r+", "+o.g+", "+o.b+", "+o.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},s),{disableAlpha:r});return Gu().createElement("div",{style:p.picker,className:"chrome-picker "+f},Gu().createElement("div",{style:p.saturation},Gu().createElement(upe,{style:p.Saturation,hsl:i,hsv:a,pointer:fbe,onChange:n})),Gu().createElement("div",{style:p.body},Gu().createElement("div",{style:p.controls,className:"flexbox-fix"},Gu().createElement("div",{style:p.color},Gu().createElement("div",{style:p.swatch},Gu().createElement("div",{style:p.active}),Gu().createElement(Pde,{renderers:u}))),Gu().createElement("div",{style:p.toggles},Gu().createElement("div",{style:p.hue},Gu().createElement(Wde,{style:p.Hue,hsl:i,pointer:dbe,onChange:n})),Gu().createElement("div",{style:p.alpha},Gu().createElement(Ide,{style:p.Alpha,rgb:o,hsl:i,pointer:dbe,renderers:u,onChange:n})))),Gu().createElement(sbe,{rgb:o,hsl:i,hex:l,view:h,onChange:n,disableAlpha:r})))};hbe.propTypes={width:$de().oneOfType([$de().string,$de().number]),disableAlpha:$de().bool,styles:$de().object,defaultView:$de().oneOf(["hex","rgb","hsl"])},hbe.defaultProps={width:225,disableAlpha:!1,styles:{}};const pbe=rve(hbe),vbe=function(e){var t=e.color,n=e.onClick,r=void 0===n?function(){}:n,o=e.onSwatchHover,i=e.active,a=(0,Nde.Ay)({default:{color:{background:t,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:Zpe(t),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:i,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return Gu().createElement(uve,{style:a.color,color:t,onClick:r,onHover:o,focusStyle:{boxShadow:"0 0 4px "+t}},Gu().createElement("div",{style:a.dot}))},mbe=function(e){var t=e.hex,n=e.rgb,r=e.onChange,o=(0,Nde.Ay)({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:t},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),i=function(e,t){e.r||e.g||e.b?r({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,source:"rgb"},t):r({hex:e.hex,source:"hex"},t)};return Gu().createElement("div",{style:o.fields,className:"flexbox-fix"},Gu().createElement("div",{style:o.active}),Gu().createElement(Ude,{style:{wrap:o.HEXwrap,input:o.HEXinput,label:o.HEXlabel},label:"hex",value:t,onChange:i}),Gu().createElement(Ude,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"r",value:n.r,onChange:i}),Gu().createElement(Ude,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"g",value:n.g,onChange:i}),Gu().createElement(Ude,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"b",value:n.b,onChange:i}))};var gbe=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.colors,o=e.hex,i=e.rgb,a=e.styles,l=void 0===a?{}:a,u=e.className,c=void 0===u?"":u,s=(0,Nde.Ay)(zhe({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},l)),d=function(e,n){e.hex?Qpe(e.hex)&&t({hex:e.hex,source:"hex"},n):t(e,n)};return Gu().createElement($he,{style:s.Compact,styles:l},Gu().createElement("div",{style:s.compact,className:"compact-picker "+c},Gu().createElement("div",null,yme(r,(function(e){return Gu().createElement(vbe,{key:e,color:e,active:e.toLowerCase()===o,onClick:d,onSwatchHover:n})})),Gu().createElement("div",{style:s.clear})),Gu().createElement(mbe,{hex:o,rgb:i,onChange:d})))};gbe.propTypes={colors:$de().arrayOf($de().string),styles:$de().object},gbe.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}},rve(gbe);const bbe=(0,Nde.H8)((function(e){var t=e.hover,n=e.color,r=e.onClick,o=e.onSwatchHover,i={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},a=(0,Nde.Ay)({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:i}},{hover:t});return Gu().createElement("div",{style:a.swatch},Gu().createElement(uve,{color:n,onClick:r,onHover:o,focusStyle:i}))}));var ybe=function(e){var t=e.width,n=e.colors,r=e.onChange,o=e.onSwatchHover,i=e.triangle,a=e.styles,l=void 0===a?{}:a,u=e.className,c=void 0===u?"":u,s=(0,Nde.Ay)(zhe({default:{card:{width:t,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},l),{"hide-triangle":"hide"===i,"top-left-triangle":"top-left"===i,"top-right-triangle":"top-right"===i,"bottom-left-triangle":"bottom-left"===i,"bottom-right-triangle":"bottom-right"===i}),d=function(e,t){return r({hex:e,source:"hex"},t)};return Gu().createElement("div",{style:s.card,className:"github-picker "+c},Gu().createElement("div",{style:s.triangleShadow}),Gu().createElement("div",{style:s.triangle}),yme(n,(function(e){return Gu().createElement(bbe,{color:e,key:e,onClick:d,onSwatchHover:o})})))};ybe.propTypes={width:$de().oneOfType([$de().string,$de().number]),colors:$de().arrayOf($de().string),triangle:$de().oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:$de().object},ybe.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}},rve(ybe);var wbe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Abe=function(e){var t=e.width,n=e.height,r=e.onChange,o=e.hsl,i=e.direction,a=e.pointer,l=e.styles,u=void 0===l?{}:l,c=e.className,s=void 0===c?"":c,d=(0,Nde.Ay)(zhe({default:{picker:{position:"relative",width:t,height:n},hue:{radius:"2px"}}},u));return Gu().createElement("div",{style:d.picker,className:"hue-picker "+s},Gu().createElement(Wde,wbe({},d.hue,{hsl:o,pointer:a,onChange:function(e){return r({a:1,h:e.h,l:.5,s:1})},direction:i})))};Abe.propTypes={styles:$de().object},Abe.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:function(e){var t=e.direction,n=(0,Nde.Ay)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return Gu().createElement("div",{style:n.picker})},styles:{}},rve(Abe),rve((function(e){var t=e.onChange,n=e.hex,r=e.rgb,o=e.styles,i=void 0===o?{}:o,a=e.className,l=void 0===a?"":a,u=(0,Nde.Ay)(zhe({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+n,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},i)),c=function(e,n){e.hex?Qpe(e.hex)&&t({hex:e.hex,source:"hex"},n):(e.r||e.g||e.b)&&t({r:e.r||r.r,g:e.g||r.g,b:e.b||r.b,source:"rgb"},n)};return Gu().createElement($he,{styles:i},Gu().createElement("div",{style:u.material,className:"material-picker "+l},Gu().createElement(Ude,{style:{wrap:u.HEXwrap,input:u.HEXinput,label:u.HEXlabel},label:"hex",value:n,onChange:c}),Gu().createElement("div",{style:u.split,className:"flexbox-fix"},Gu().createElement("div",{style:u.third},Gu().createElement(Ude,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"r",value:r.r,onChange:c})),Gu().createElement("div",{style:u.third},Gu().createElement(Ude,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"g",value:r.g,onChange:c})),Gu().createElement("div",{style:u.third},Gu().createElement(Ude,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"b",value:r.b,onChange:c})))))}));const kbe=function(e){var t=e.onChange,n=e.rgb,r=e.hsv,o=e.hex,i=(0,Nde.Ay)({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),a=function(e,o){e["#"]?Qpe(e["#"])&&t({hex:e["#"],source:"hex"},o):e.r||e.g||e.b?t({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,source:"rgb"},o):(e.h||e.s||e.v)&&t({h:e.h||r.h,s:e.s||r.s,v:e.v||r.v,source:"hsv"},o)};return Gu().createElement("div",{style:i.fields},Gu().createElement(Ude,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"h",value:Math.round(r.h),onChange:a}),Gu().createElement(Ude,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"s",value:Math.round(100*r.s),onChange:a}),Gu().createElement(Ude,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"v",value:Math.round(100*r.v),onChange:a}),Gu().createElement("div",{style:i.divider}),Gu().createElement(Ude,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"r",value:n.r,onChange:a}),Gu().createElement(Ude,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"g",value:n.g,onChange:a}),Gu().createElement(Ude,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"b",value:n.b,onChange:a}),Gu().createElement("div",{style:i.divider}),Gu().createElement(Ude,{style:{wrap:i.HEXwrap,input:i.HEXinput,label:i.HEXlabel},label:"#",value:o.replace("#",""),onChange:a}),Gu().createElement("div",{style:i.fieldSymbols},Gu().createElement("div",{style:i.symbol},"°"),Gu().createElement("div",{style:i.symbol},"%"),Gu().createElement("div",{style:i.symbol},"%")))},_be=function(e){var t=e.hsl,n=(0,Nde.Ay)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":t.l>.5});return Gu().createElement("div",{style:n.picker})},Cbe=function(){var e=(0,Nde.Ay)({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return Gu().createElement("div",{style:e.pointer},Gu().createElement("div",{style:e.left},Gu().createElement("div",{style:e.leftInside})),Gu().createElement("div",{style:e.right},Gu().createElement("div",{style:e.rightInside})))},Nbe=function(e){var t=e.onClick,n=e.label,r=e.children,o=e.active,i=(0,Nde.Ay)({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:o});return Gu().createElement("div",{style:i.button,onClick:t},n||r)},Obe=function(e){var t=e.rgb,n=e.currentColor,r=(0,Nde.Ay)({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+t.r+","+t.g+", "+t.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:n,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return Gu().createElement("div",null,Gu().createElement("div",{style:r.label},"new"),Gu().createElement("div",{style:r.swatches},Gu().createElement("div",{style:r.new}),Gu().createElement("div",{style:r.current})),Gu().createElement("div",{style:r.label},"current"))};var xbe=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Ebe=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={currentColor:e.hex},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),xbe(t,[{key:"render",value:function(){var e=this.props,t=e.styles,n=void 0===t?{}:t,r=e.className,o=void 0===r?"":r,i=(0,Nde.Ay)(zhe({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},n));return Gu().createElement("div",{style:i.picker,className:"photoshop-picker "+o},Gu().createElement("div",{style:i.head},this.props.header),Gu().createElement("div",{style:i.body,className:"flexbox-fix"},Gu().createElement("div",{style:i.saturation},Gu().createElement(upe,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:_be,onChange:this.props.onChange})),Gu().createElement("div",{style:i.hue},Gu().createElement(Wde,{direction:"vertical",hsl:this.props.hsl,pointer:Cbe,onChange:this.props.onChange})),Gu().createElement("div",{style:i.controls},Gu().createElement("div",{style:i.top,className:"flexbox-fix"},Gu().createElement("div",{style:i.previews},Gu().createElement(Obe,{rgb:this.props.rgb,currentColor:this.state.currentColor})),Gu().createElement("div",{style:i.actions},Gu().createElement(Nbe,{label:"OK",onClick:this.props.onAccept,active:!0}),Gu().createElement(Nbe,{label:"Cancel",onClick:this.props.onCancel}),Gu().createElement(kbe,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),t}(Gu().Component);Ebe.propTypes={header:$de().string,styles:$de().object},Ebe.defaultProps={header:"Color Picker",styles:{}},rve(Ebe);const Dbe=function(e){var t=e.onChange,n=e.rgb,r=e.hsl,o=e.hex,i=e.disableAlpha,a=(0,Nde.Ay)({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:i}),l=function(e,o){e.hex?Qpe(e.hex)&&t({hex:e.hex,source:"hex"},o):e.r||e.g||e.b?t({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,a:n.a,source:"rgb"},o):e.a&&(e.a<0?e.a=0:e.a>100&&(e.a=100),e.a/=100,t({h:r.h,s:r.s,l:r.l,a:e.a,source:"rgb"},o))};return Gu().createElement("div",{style:a.fields,className:"flexbox-fix"},Gu().createElement("div",{style:a.double},Gu().createElement(Ude,{style:{input:a.input,label:a.label},label:"hex",value:o.replace("#",""),onChange:l})),Gu().createElement("div",{style:a.single},Gu().createElement(Ude,{style:{input:a.input,label:a.label},label:"r",value:n.r,onChange:l,dragLabel:"true",dragMax:"255"})),Gu().createElement("div",{style:a.single},Gu().createElement(Ude,{style:{input:a.input,label:a.label},label:"g",value:n.g,onChange:l,dragLabel:"true",dragMax:"255"})),Gu().createElement("div",{style:a.single},Gu().createElement(Ude,{style:{input:a.input,label:a.label},label:"b",value:n.b,onChange:l,dragLabel:"true",dragMax:"255"})),Gu().createElement("div",{style:a.alpha},Gu().createElement(Ude,{style:{input:a.input,label:a.label},label:"a",value:Math.round(100*n.a),onChange:l,dragLabel:"true",dragMax:"100"})))};var Pbe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rbe=function(e){var t=e.colors,n=e.onClick,r=void 0===n?function(){}:n,o=e.onSwatchHover,i=(0,Nde.Ay)({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!t||!t.length}),a=function(e,t){r({hex:e,source:"hex"},t)};return Gu().createElement("div",{style:i.colors,className:"flexbox-fix"},t.map((function(e){var t="string"==typeof e?{color:e}:e,n=""+t.color+(t.title||"");return Gu().createElement("div",{key:n,style:i.swatchWrap},Gu().createElement(uve,Pbe({},t,{style:i.swatch,onClick:a,onHover:o,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+t.color}})))})))};Rbe.propTypes={colors:$de().arrayOf($de().oneOfType([$de().string,$de().shape({color:$de().string,title:$de().string})])).isRequired};const Sbe=Rbe;var Tbe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jbe=function(e){var t=e.width,n=e.rgb,r=e.hex,o=e.hsv,i=e.hsl,a=e.onChange,l=e.onSwatchHover,u=e.disableAlpha,c=e.presetColors,s=e.renderers,d=e.styles,f=void 0===d?{}:d,h=e.className,p=void 0===h?"":h,v=(0,Nde.Ay)(zhe({default:Tbe({picker:{width:t,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+n.r+","+n.g+","+n.b+","+n.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},f),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},f),{disableAlpha:u});return Gu().createElement("div",{style:v.picker,className:"sketch-picker "+p},Gu().createElement("div",{style:v.saturation},Gu().createElement(upe,{style:v.Saturation,hsl:i,hsv:o,onChange:a})),Gu().createElement("div",{style:v.controls,className:"flexbox-fix"},Gu().createElement("div",{style:v.sliders},Gu().createElement("div",{style:v.hue},Gu().createElement(Wde,{style:v.Hue,hsl:i,onChange:a})),Gu().createElement("div",{style:v.alpha},Gu().createElement(Ide,{style:v.Alpha,rgb:n,hsl:i,renderers:s,onChange:a}))),Gu().createElement("div",{style:v.color},Gu().createElement(Pde,null),Gu().createElement("div",{style:v.activeColor}))),Gu().createElement(Dbe,{rgb:n,hsl:i,hex:r,onChange:a,disableAlpha:u}),Gu().createElement(Sbe,{colors:c,onClick:a,onSwatchHover:l}))};jbe.propTypes={disableAlpha:$de().bool,width:$de().oneOfType([$de().string,$de().number]),styles:$de().object},jbe.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]},rve(jbe);const Ibe=function(e){var t=e.hsl,n=e.offset,r=e.onClick,o=void 0===r?function(){}:r,i=e.active,a=e.first,l=e.last,u=(0,Nde.Ay)({default:{swatch:{height:"12px",background:"hsl("+t.h+", 50%, "+100*n+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:i,first:a,last:l});return Gu().createElement("div",{style:u.swatch,onClick:function(e){return o({h:t.h,s:.5,l:n,source:"hsl"},e)}})},Bbe=function(e){var t=e.onClick,n=e.hsl,r=(0,Nde.Ay)({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),o=.1;return Gu().createElement("div",{style:r.swatches},Gu().createElement("div",{style:r.swatch},Gu().createElement(Ibe,{hsl:n,offset:".80",active:Math.abs(n.l-.8)<o&&Math.abs(n.s-.5)<o,onClick:t,first:!0})),Gu().createElement("div",{style:r.swatch},Gu().createElement(Ibe,{hsl:n,offset:".65",active:Math.abs(n.l-.65)<o&&Math.abs(n.s-.5)<o,onClick:t})),Gu().createElement("div",{style:r.swatch},Gu().createElement(Ibe,{hsl:n,offset:".50",active:Math.abs(n.l-.5)<o&&Math.abs(n.s-.5)<o,onClick:t})),Gu().createElement("div",{style:r.swatch},Gu().createElement(Ibe,{hsl:n,offset:".35",active:Math.abs(n.l-.35)<o&&Math.abs(n.s-.5)<o,onClick:t})),Gu().createElement("div",{style:r.swatch},Gu().createElement(Ibe,{hsl:n,offset:".20",active:Math.abs(n.l-.2)<o&&Math.abs(n.s-.5)<o,onClick:t,last:!0})),Gu().createElement("div",{style:r.clear}))};var Mbe=function(e){var t=e.hsl,n=e.onChange,r=e.pointer,o=e.styles,i=void 0===o?{}:o,a=e.className,l=void 0===a?"":a,u=(0,Nde.Ay)(zhe({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},i));return Gu().createElement("div",{style:u.wrap||{},className:"slider-picker "+l},Gu().createElement("div",{style:u.hue},Gu().createElement(Wde,{style:u.Hue,hsl:t,pointer:r,onChange:n})),Gu().createElement("div",{style:u.swatches},Gu().createElement(Bbe,{hsl:t,onClick:n})))};Mbe.propTypes={styles:$de().object},Mbe.defaultProps={pointer:function(){var e=(0,Nde.Ay)({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return Gu().createElement("div",{style:e.picker})},styles:{}},rve(Mbe);var Fbe=o(7489);const Lbe=function(e){var t=e.color,n=e.onClick,r=void 0===n?function(){}:n,o=e.onSwatchHover,i=e.first,a=e.last,l=e.active,u=(0,Nde.Ay)({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:t,marginBottom:"1px"},check:{color:Zpe(t),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:i,last:a,active:l,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return Gu().createElement(uve,{color:t,style:u.color,onClick:r,onHover:o,focusStyle:{boxShadow:"0 0 4px "+t}},Gu().createElement("div",{style:u.check},Gu().createElement(Fbe.A,null)))},Ube=function(e){var t=e.onClick,n=e.onSwatchHover,r=e.group,o=e.active,i=(0,Nde.Ay)({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return Gu().createElement("div",{style:i.group},yme(r,(function(e,i){return Gu().createElement(Lbe,{key:e,color:e,active:e.toLowerCase()===o,first:0===i,last:i===r.length-1,onClick:t,onSwatchHover:n})})))};var Vbe=function(e){var t=e.width,n=e.height,r=e.onChange,o=e.onSwatchHover,i=e.colors,a=e.hex,l=e.styles,u=void 0===l?{}:l,c=e.className,s=void 0===c?"":c,d=(0,Nde.Ay)(zhe({default:{picker:{width:t,height:n},overflow:{height:n,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},u)),f=function(e,t){return r({hex:e,source:"hex"},t)};return Gu().createElement("div",{style:d.picker,className:"swatches-picker "+s},Gu().createElement($he,null,Gu().createElement("div",{style:d.overflow},Gu().createElement("div",{style:d.body},yme(i,(function(e){return Gu().createElement(Ube,{key:e.toString(),group:e,active:a,onClick:f,onSwatchHover:o})})),Gu().createElement("div",{style:d.clear})))))};Vbe.propTypes={width:$de().oneOfType([$de().string,$de().number]),height:$de().oneOfType([$de().string,$de().number]),colors:$de().arrayOf($de().arrayOf($de().string)),styles:$de().object},Vbe.defaultProps={width:320,height:240,colors:[[Ome,Nme,Cme,_me,kme],[Rme,Pme,Dme,Eme,xme],[Bme,Ime,jme,Tme,Sme],[Vme,Ume,Lme,Fme,Mme],[$me,qme,Wme,zme,Hme],[Xme,Jme,Gme,Yme,Kme],[nge,tge,ege,Zme,Qme],[lge,age,ige,oge,rge],[fge,dge,sge,cge,uge],["#194D33",mge,vge,pge,hge],[Age,wge,yge,bge,gge],[Oge,Nge,Cge,_ge,kge],[Rge,Pge,Dge,Ege,xge],[Bge,Ige,jge,Tge,Sge],[Vge,Uge,Lge,Fge,Mge],[$ge,qge,Wge,zge,Hge],[Xge,Jge,Gge,Yge,Kge],[nbe,tbe,ebe,Zge,Qge],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}},rve(Vbe);var Hbe=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.hex,o=e.colors,i=e.width,a=e.triangle,l=e.styles,u=void 0===l?{}:l,c=e.className,s=void 0===c?"":c,d=(0,Nde.Ay)(zhe({default:{card:{width:i,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},u),{"hide-triangle":"hide"===a,"top-left-triangle":"top-left"===a,"top-right-triangle":"top-right"===a}),f=function(e,n){Qpe(e)&&t({hex:e,source:"hex"},n)};return Gu().createElement("div",{style:d.card,className:"twitter-picker "+s},Gu().createElement("div",{style:d.triangleShadow}),Gu().createElement("div",{style:d.triangle}),Gu().createElement("div",{style:d.body},yme(o,(function(e,t){return Gu().createElement(uve,{key:t,color:e,hex:e,style:d.swatch,onClick:f,onHover:n,focusStyle:{boxShadow:"0 0 4px "+e}})})),Gu().createElement("div",{style:d.hash},"#"),Gu().createElement(Ude,{label:null,style:{input:d.input},value:r.replace("#",""),onChange:f}),Gu().createElement("div",{style:d.clear})))};Hbe.propTypes={width:$de().oneOfType([$de().string,$de().number]),triangle:$de().oneOf(["hide","top-left","top-right"]),colors:$de().arrayOf($de().string),styles:$de().object},Hbe.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}},rve(Hbe);var zbe=function(e){var t=(0,Nde.Ay)({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(e.hsl.h)+", "+Math.round(100*e.hsl.s)+"%, "+Math.round(100*e.hsl.l)+"%)"}}});return Gu().createElement("div",{style:t.picker})};zbe.propTypes={hsl:$de().shape({h:$de().number,s:$de().number,l:$de().number,a:$de().number})},zbe.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};const Wbe=zbe;var qbe=function(e){var t=(0,Nde.Ay)({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(e.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return Gu().createElement("div",{style:t.picker})};qbe.propTypes={hsl:$de().shape({h:$de().number,s:$de().number,l:$de().number,a:$de().number})},qbe.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};const $be=qbe,Kbe=function(e){var t=e.onChange,n=e.rgb,r=e.hsl,o=e.hex,i=e.hsv,a=function(e,n){if(e.hex)Qpe(e.hex)&&t({hex:e.hex,source:"hex"},n);else if(e.rgb){var r=e.rgb.split(",");eve(e.rgb,"rgb")&&t({r:r[0],g:r[1],b:r[2],a:1,source:"rgb"},n)}else if(e.hsv){var o=e.hsv.split(",");eve(e.hsv,"hsv")&&(o[2]=o[2].replace("%",""),o[1]=o[1].replace("%",""),o[0]=o[0].replace("°",""),1==o[1]?o[1]=.01:1==o[2]&&(o[2]=.01),t({h:Number(o[0]),s:Number(o[1]),v:Number(o[2]),source:"hsv"},n))}else if(e.hsl){var i=e.hsl.split(",");eve(e.hsl,"hsl")&&(i[2]=i[2].replace("%",""),i[1]=i[1].replace("%",""),i[0]=i[0].replace("°",""),1==s[1]?s[1]=.01:1==s[2]&&(s[2]=.01),t({h:Number(i[0]),s:Number(i[1]),v:Number(i[2]),source:"hsl"},n))}},l=(0,Nde.Ay)({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),u=n.r+", "+n.g+", "+n.b,c=Math.round(r.h)+"°, "+Math.round(100*r.s)+"%, "+Math.round(100*r.l)+"%",s=Math.round(i.h)+"°, "+Math.round(100*i.s)+"%, "+Math.round(100*i.v)+"%";return Gu().createElement("div",{style:l.wrap,className:"flexbox-fix"},Gu().createElement("div",{style:l.fields},Gu().createElement("div",{style:l.double},Gu().createElement(Ude,{style:{input:l.input,label:l.label},label:"hex",value:o,onChange:a})),Gu().createElement("div",{style:l.column},Gu().createElement("div",{style:l.single},Gu().createElement(Ude,{style:{input:l.input2,label:l.label2},label:"rgb",value:u,onChange:a})),Gu().createElement("div",{style:l.single},Gu().createElement(Ude,{style:{input:l.input2,label:l.label2},label:"hsv",value:s,onChange:a})),Gu().createElement("div",{style:l.single},Gu().createElement(Ude,{style:{input:l.input2,label:l.label2},label:"hsl",value:c,onChange:a})))))};var Ybe=function(e){var t=e.width,n=e.onChange,r=e.rgb,o=e.hsl,i=e.hsv,a=e.hex,l=e.header,u=e.styles,c=void 0===u?{}:u,s=e.className,d=void 0===s?"":s,f=(0,Nde.Ay)(zhe({default:{picker:{width:t,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+r.r+", "+r.g+", "+r.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},c));return Gu().createElement("div",{style:f.picker,className:"google-picker "+d},Gu().createElement("div",{style:f.head},l),Gu().createElement("div",{style:f.swatch}),Gu().createElement("div",{style:f.saturation},Gu().createElement(upe,{hsl:o,hsv:i,pointer:Wbe,onChange:n})),Gu().createElement("div",{style:f.body},Gu().createElement("div",{style:f.controls,className:"flexbox-fix"},Gu().createElement("div",{style:f.hue},Gu().createElement(Wde,{style:f.Hue,hsl:o,radius:"4px",pointer:$be,onChange:n}))),Gu().createElement(Kbe,{rgb:r,hsl:o,hex:a,hsv:i,onChange:n})))};Ybe.propTypes={width:$de().oneOfType([$de().string,$de().number]),styles:$de().object,header:$de().string},Ybe.defaultProps={width:652,styles:{},header:"Color picker"},rve(Ybe);var Gbe=o(5879),Jbe=o.n(Gbe);function Xbe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Qbe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Qbe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Qbe=function(){return!!e})()}var Zbe=function(e){function t(e){var n;(0,Ke.A)(this,t),n=Xbe(this,t,[e]),Object.defineProperty(n,"onSelect",{enumerable:!0,configurable:!0,writable:!0,value:Jbe()((function(e){n.props.onSelect(e)}))}),Object.defineProperty(n,"onChange",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t="rgba(".concat(e.rgb.r,",").concat(e.rgb.g,",").concat(e.rgb.b,",").concat(e.rgb.a,")");n.setState({color:au.parse(t)||ru.white}),n.onSelect(t)}});var r=ru.white;return r=n.props.color&&au.parse(n.props.color)||ru.white,n.state={color:r},n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){return Gu().createElement("div",{className:"lake-rgbpicker-container","data-lake-editor-ui":"colorpicker","data-lake_prevent_click_unselect":"true"},Gu().createElement(pbe,{color:this.state.color.toCSSValue(),onChange:this.onChange,disableAlpha:!1}))}}])}(Gu().Component);function eye(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,tye()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function tye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(tye=function(){return!!e})()}var nye={"zh-cn":{nonFillColor:"无填充色",defaultColor:"默认",moreColor:"更多颜色",usedColors:"最近使用自定义颜色",noColors:"暂无"},en:{nonFillColor:"No fill color",defaultColor:"Default",moreColor:"More colors",usedColors:"Recently used custom colors",noColors:"No colors"}},rye=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=eye(this,t,[e]),Object.defineProperty(n,"toggleRgbaPicker",{enumerable:!0,configurable:!0,writable:!0,value:function(e){e.stopPropagation();for(var t=e.target;t&&!t.classList.contains("lake-more-color");)t=t.parentNode;if(t){var r=!n.state.showPicker;n.setState({showPicker:r,position:null})}}}),Object.defineProperty(n,"onSelect",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n.setState({customColor:null}),n.props.onSelect(e,!1)}}),Object.defineProperty(n,"onCustomSelect",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n.setState({customColor:e}),n.props.onSelect(e,!0)}}),n.state={showPicker:!1,position:null,customColor:null},n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){var e,t=this,n=this.props,r=n.activeColors,o=n.appendColors,i=n.defaultColor,a=n.show,l=n.customColors,u=n.CustomPalette,c=n.theme,s=void 0===c?"light":c,d=u?u.getColors():gde.getColors(),f=this.state.showPicker,h=nye[this.props.lang||"zh-cn"];return Gu().createElement("div",{className:"lake-colorboard","data-lake-editor-ui":"colorpicker","data-lake_prevent_click_unselect":"true",onMouseDown:function(e){var t;"INPUT"!==(null===(t=e.target)||void 0===t?void 0:t.tagName)&&e.preventDefault()}},i&&Gu().createElement("div",{className:"lake-colorboard-default",onClick:function(){return t.onSelect(i)}},Gu().createElement(Ade,{onSelect:this.onSelect,color:i,defaultColor:"#FFFFFF",theme:s,activeColors:[]}),Gu().createElement("span",{style:{marginLeft:8,lineHeight:2}},"transparent"===i?h.nonFillColor:h.defaultColor)),d.map((function(e,n){return Gu().createElement(Cde,{data:e,key:n,lang:t.props.lang,activeColors:r,theme:s,onSelect:t.onSelect})})),o&&o.title&&Gu().createElement("div",{className:"lake-color-history"},o.title),o&&o.map((function(e,n){return Gu().createElement(Cde,{data:e,key:n,lang:t.props.lang,activeColors:r,theme:s,onSelect:t.onSelect})})),Gu().createElement("div",{className:"lake-color-history"},h.usedColors),l&&l.length>0?Gu().createElement(Cde,{data:l.concat().reverse(),key:"customColors",activeColors:r,theme:s,onSelect:this.onSelect}):Gu().createElement("div",{className:"lake-none-custom-color"},h.noColors),Gu().createElement(Qx,{trigger:"click",visible:a&&f,onVisibleChange:function(e){t.setState({showPicker:e})},getPopupContainer:function(){return document.body},overlayInnerStyle:{backgroundColor:"transparent"},align:{points:["tr","tr"],offset:[256,-224]},overlayClassName:"ne-rgba-picker-tooltip ".concat(this.props.themeSelector||""),overlay:Gu().createElement(Zbe,{color:null===(e=this.props.activeColors)||void 0===e?void 0:e[0],position:this.state.position||void 0,onSelect:this.onCustomSelect,container:this.props.container||document.body})},Gu().createElement("div",{className:"lake-more-color"},Gu().createElement("div",{className:"lake-more-color-container",onClick:this.toggleRgbaPicker},Gu().createElement("div",{className:"lake-more-color-preview",style:{backgroundImage:"url(".concat(Fw["color-picker-preview"],")")}}),Gu().createElement("span",null,h.moreColor),Gu().createElement("span",{className:"lake-icon lake-icon-arrow-right"})))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return!e.show&&e.onSaveColor&&t.customColor?(e.onSaveColor(t.customColor),{showPicker:!1,customColor:null}):{}}}])}(Gu().Component);const oye=rye;function iye(e){return Gu().createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 256 256",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},Gu().createElement("g",{id:"icon/填充色",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},Gu().createElement("g",{id:"icon/背景颜色"},Gu().createElement("g",{id:"编组",fill:"currentColor"},Gu().createElement("g",{transform:"translate(119.502295, 137.878331) rotate(-135.000000) translate(-119.502295, -137.878331) translate(48.002295, 31.757731)",id:"矩形"},Gu().createElement("path",{d:"M100.946943,60.8084699 L43.7469427,60.8084699 C37.2852111,60.8084699 32.0469427,66.0467383 32.0469427,72.5084699 L32.0469427,118.70847 C32.0469427,125.170201 37.2852111,130.40847 43.7469427,130.40847 L100.946943,130.40847 C107.408674,130.40847 112.646943,125.170201 112.646943,118.70847 L112.646943,72.5084699 C112.646943,66.0467383 107.408674,60.8084699 100.946943,60.8084699 Z M93.646,79.808 L93.646,111.408 L51.046,111.408 L51.046,79.808 L93.646,79.808 Z",fillRule:"nonzero"}),Gu().createElement("path",{d:"M87.9366521,16.90916 L87.9194966,68.2000001 C87.9183543,69.4147389 86.9334998,70.399264 85.7187607,70.4 L56.9423078,70.4 C55.7272813,70.4 54.7423078,69.4150264 54.7423078,68.2 L54.7423078,39.4621057 C54.7423078,37.2523513 55.5736632,35.1234748 57.0711706,33.4985176 L76.4832996,12.4342613 C78.9534987,9.75382857 83.1289108,9.5834005 85.8093436,12.0535996 C87.1658473,13.303709 87.9372691,15.0644715 87.9366521,16.90916 Z",fillRule:"evenodd"}),Gu().createElement("path",{d:"M131.3,111.241199 L11.7,111.241199 C5.23826843,111.241199 0,116.479467 0,122.941199 L0,200.541199 C0,207.002931 5.23826843,212.241199 11.7,212.241199 L131.3,212.241199 C137.761732,212.241199 143,207.002931 143,200.541199 L143,122.941199 C143,116.479467 137.761732,111.241199 131.3,111.241199 Z M124,130.241 L124,193.241 L19,193.241 L19,130.241 L124,130.241 Z",fillRule:"nonzero"}))),Gu().createElement("path",{d:"M51,218 L205,218 C211.075132,218 216,222.924868 216,229 C216,235.075132 211.075132,240 205,240 L51,240 C44.9248678,240 40,235.075132 40,229 C40,222.924868 44.9248678,218 51,218 Z",id:"矩形",fill:e}))))}function aye(e){return Gu().createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 256 256",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},Gu().createElement("g",{id:"icon/背景颜色",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},Gu().createElement("g",null,Gu().createElement("path",{d:"M157.746212,50.9888527 L75.746212,50.9888527 C61.3868085,50.9888527 49.746212,62.6294492 49.746212,76.9888527 L49.746212,158.988853 C49.746212,173.348256 61.3868085,184.988853 75.746212,184.988853 L157.746212,184.988853 C172.105616,184.988853 183.746212,173.348256 183.746212,158.988853 L183.746212,76.9888527 C183.746212,62.6294492 172.105616,50.9888527 157.746212,50.9888527 Z M75.746212,70.9888527 L157.746212,70.9888527 C161.059921,70.9888527 163.746212,73.6751442 163.746212,76.9888527 L163.746212,158.988853 C163.746212,162.302561 161.059921,164.988853 157.746212,164.988853 L75.746212,164.988853 C72.4325035,164.988853 69.746212,162.302561 69.746212,158.988853 L69.746212,76.9888527 C69.746212,73.6751442 72.4325035,70.9888527 75.746212,70.9888527 Z",id:"矩形",fill:"currentColor",fillRule:"nonzero",transform:"translate(116.746212, 117.988853) rotate(45.000000) translate(-116.746212, -117.988853) "}),Gu().createElement("path",{d:"M201.333333,164 C201.333333,164 188,179.781818 188,189.454545 C188,197.454545 194,204 201.333333,204 C208.666667,204 214.666667,197.454545 214.666667,189.454545 C214.666667,179.781818 201.333333,164 201.333333,164 Z",id:"Path",fill:"currentColor"}),Gu().createElement("path",{d:"M50,219 L206,219 C212.075132,219 217,223.924868 217,230 C217,236.075132 212.075132,241 206,241 L50,241 C43.9248678,241 39,236.075132 39,230 C39,223.924868 43.9248678,219 50,219 Z",id:"矩形",fill:e}),Gu().createElement("polygon",{id:"路径-24",fill:"currentColor",opacity:"0.349999994",points:"43 119.102921 192 119.102921 118.898066 199.102921"}),Gu().createElement("g",{id:"路径-25",fill:"currentColor",fillRule:"nonzero"},Gu().createElement("g",{transform:"translate(99.131915, 19.731915)",id:"路径-23"},Gu().createElement("path",{d:"M-7.07106781,-7.07106781 C-3.23682931,-10.9053063 2.9363852,-10.9750197 6.85567738,-7.28020809 L7.07106781,-7.07106781 L71.0710678,56.9289322 C74.9763107,60.8341751 74.9763107,67.1658249 71.0710678,71.0710678 C67.2368293,74.9053063 61.0636148,74.9750197 57.1443226,71.2802081 L56.9289322,71.0710678 L-7.07106781,7.07106781 C-10.9763107,3.16582489 -10.9763107,-3.16582489 -7.07106781,-7.07106781 Z"}))))))}function lye(e){var t=!1,n="";if(e){var r=function(e){var t=e.split(/,/g);if(t.length<=2)return t;var n=e.split(/\)\s*?,/);return n.length<2?n:[n[0]+")",n[1]]}(e),o=(0,tn.A)(r,2),i=o[0],a=o[1];e=i,n=a||"",t=!!a}return Gu().createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 240 240",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},t&&Gu().createElement("defs",null,Gu().createElement("linearGradient",{id:"fontColorGradient1"},Gu().createElement("stop",{stopColor:e,offset:"0%"}),Gu().createElement("stop",{stopColor:n,offset:"100%"}))),Gu().createElement("g",{id:"icon/字体颜色",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},Gu().createElement("g",{transform:"translate(0.000000, 0.500000)"},Gu().createElement("g",{transform:"translate(39.000000, 17.353553)"},Gu().createElement("path",{d:"M11,201.146447 L167,201.146447 C173.075132,201.146447 178,206.071314 178,212.146447 C178,218.221579 173.075132,223.146447 167,223.146447 L11,223.146447 C4.92486775,223.146447 7.43989126e-16,218.221579 0,212.146447 C-7.43989126e-16,206.071314 4.92486775,201.146447 11,201.146447 Z",id:"矩形",fill:t?"url(#fontColorGradient1)":e,fillRule:"evenodd"}),Gu().createElement("path",{d:"M72.3425855,16.8295583 C75.799482,7.50883712 86.1577877,2.75526801 95.4785089,6.21216449 C100.284516,7.99463061 104.096358,11.7387855 105.968745,16.4968188 L106.112518,16.8745422 L159.385152,161.694068 C161.291848,166.877345 158.635655,172.624903 153.452378,174.531599 C148.358469,176.405421 142.719567,173.872338 140.716873,168.864661 L140.614848,168.598825 L89.211,28.86 L37.3759214,168.623816 C35.4885354,173.712715 29.8981043,176.351047 24.7909589,174.617647 L24.5226307,174.522368 C19.4337312,172.634982 16.7953993,167.044551 18.5287999,161.937406 L18.6240786,161.669077 L72.3425855,16.8295583 Z",id:"路径-21",fill:"currentColor",fillRule:"nonzero"}),Gu().createElement("path",{d:"M121,103.146447 C126.522847,103.146447 131,107.623599 131,113.146447 C131,118.575687 126.673329,122.994378 121.279905,123.142605 L121,123.146447 L55,123.146447 C49.4771525,123.146447 45,118.669294 45,113.146447 C45,107.717207 49.3266708,103.298515 54.7200952,103.150288 L55,103.146447 L121,103.146447 Z",id:"路径-22",fill:"currentColor",fillRule:"nonzero"})))))}function uye(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,cye()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function cye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(cye=function(){return!!e})()}var sye=function(e){function t(){return(0,Ke.A)(this,t),uye(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){var e=Uf(this.props.className,"ne-embed-icon","ne-embed-icon-".concat(this.props.type));return Gu().createElement("span",{className:e},this._getIcon())}},{key:"_getIcon",value:function(){var e=this.props,t=e.type,n=e.fill;return"t-font-color"===t?lye(n):"t-bg-color"===t?iye(n):"t-cell-bg-color"===t?aye(n):null}}])}(Yu.Component);function dye(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,fye()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function fye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(fye=function(){return!!e})()}Object.defineProperty(sye,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{fill:"red"}});var hye=function(e){function t(){return(0,Ke.A)(this,t),dye(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.name,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["className","name"]);return Gu().createElement(Ax,Object.assign({className:Uf(t,"ne-ui-t-button"),"data-ne-type":n},r))}}])}(Yu.Component);function pye(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,vye()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function vye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vye=function(){return!!e})()}var mye=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=pye(this,t,[e]),Object.defineProperty(n,"state",{enumerable:!0,configurable:!0,writable:!0,value:{visible:!1,container:void 0}}),Object.defineProperty(n,"_clickHandler",{enumerable:!0,configurable:!0,writable:!0,value:function(){n.props.onSelect(n.props.color)}}),Object.defineProperty(n,"_selectHandler",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t){t||n.setState({visible:!1}),n.props.onSelect(e)}}),Object.defineProperty(n,"_saveColorHandler",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n.props.onSaveColor(e)}}),n.state=Object.assign({},n.state),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"addTitle",value:function(e){return e.title=sc("渐变色"),e}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.defaultColor,o=t.activeColors,i=t.userColors,a=t.themeName,l=n.includes("bg-color");return Gu().createElement("div",{"data-ne-button-arrow":"true",className:Uf(n,"ne-ui-toolbar-color-button",this.props.disabled?"disabled":"",this.state.visible?"ne-ui-dropdown-open":"")},Zx(this.props.tooltip,Gu().createElement(hye,{key:"show",onClick:this._clickHandler,className:"ne-ui-toolbar-color-show-button",disabled:this.props.disabled},this.props.type?Gu().createElement(sye,{type:this.props.type,fill:this.props.color}):null)),Gu().createElement(Ex,{forceRender:!1,overlay:Gu().createElement(oye,{lang:"enUS"===cc.getLanguage()?"en":"zh-cn",defaultColor:r,activeColors:o,theme:a,customColors:i,show:this.state.visible,onSaveColor:this._saveColorHandler,onSelect:this._selectHandler,container:this.state.container,themeSelector:this.props.themeSelector,appendColors:l?[]:this.addTitle("dark"===a?$U:KU)}),visible:this.state.visible,align:{offset:[-25,3]},onVisibleChange:function(t){e.setState({visible:t})},destroyPopupOnHide:!0,overlayClassName:"ne-ui-toolbar-color-picker-overlay",trigger:["click"],getPopupContainer:function(t){try{var n=t.closest("#ne-toolbar-container");if(n)return e.state.container!==n&&e.setState({container:n}),n}catch(e){}return e.props.popupContainer||t},disabled:this.props.disabled},Zx(this.props.tooltip,Gu().createElement(hye,{key:"dropdown",className:"ne-ui-toolbar-color-dropdown-button",disabled:this.props.disabled},Gu().createElement("span",{className:"ne-ui-toolbar-color-dropdown-arrow",style:{backgroundImage:"url(".concat(Fw["ne-ui-toolbar-arrow-down"],")")}})))))}}])}(Yu.Component);Object.defineProperty(mye,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{onSelect:function(){},onSaveColor:function(){}}});var gye={agentConfig:(0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)({},hde.DEFAULT,{items:[pde.cardSelect,"|",pde.undo,pde.redo,pde.formatPainter,pde.clearFormat,"|",pde.style,pde.fontsize,pde.bold,pde.italic,pde.strikethrough,pde.underline,pde.mixedTextStyle,"|",pde.color,pde.bgColor,"|",pde.alignment,pde.unorderedList,pde.orderedList,pde.indent,pde.lineHeight,"|",pde.taskList,pde.link,pde.quote,pde.hr,pde.search]}),hde.CODEBLOCK,{items:[pde.codeblockClear,pde.codeblockBold,pde.codeblockItalic,pde.codeblockStrikethrough,pde.codeblockUnderline,"|",pde.codeblockColor,pde.codeblockBackground]}),hde.TABLE,{items:[pde.cardSelect,"|",pde.undo,pde.redo,pde.formatPainter,pde.clearFormat,"|",pde.style,pde.fontsize,pde.bold,pde.italic,pde.strikethrough,pde.underline,pde.mixedTextStyle,"|",pde.color,pde.bgColor,pde.tableCellBgColor,pde.tableBorderVisible,"|",pde.alignment,pde.tableVerticalAlign,pde.tableMergeCell,"|",pde.unorderedList,pde.orderedList,pde.indent,pde.lineHeight,"|",pde.taskList,pde.link,pde.quote,pde.hr,pde.search]}),hde.SIMPLE,{items:[pde.cardSelect,"|",pde.undo,pde.redo,"|",pde.bold,pde.italic,pde.strikethrough,pde.underline,pde.fullscreen]}),force:!0,customComponent:{colorButton:mye}},bye={uploadFileURL:"/api/upload/video"},yye={enable:!1};function wye(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Aye()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Aye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Aye=function(){return!!e})()}var kye=function(e){function t(e){var n;return(0,Ke.A)(this,t),(n=wye(this,t,[e])).state={libReady:e.loader.isReady()},n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){var e=this;this.state.libReady||this._load().then((function(){e.setState({libReady:!0})}))}},{key:"render",value:function(){if(this.state.libReady){var e=this.props.getComponentFromLib(this.props.loader.get());return Gu().createElement(e,Object.assign({},this.props.props))}return this.props.children}},{key:"_load",value:function(){return function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,Cc().mark((function e(){return Cc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.loader.load();case 2:case"end":return e.stop()}}),e,this)})))}}])}(Yu.PureComponent);function _ye(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Cye()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Cye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Cye=function(){return!!e})()}var Nye=function(e){function t(){return(0,Ke.A)(this,t),_ye(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"randomColor",value:function(e){var t=["#3988E4","#B97940","#2F9547","#235B9D","#59AF9A"];return e&&t[e.charCodeAt(0)%t.length]||t[0]}},{key:"getAvatarText",value:function(e){var t=String.fromCodePoint(e.codePointAt(0));if(!/[0-9a-zA-Z\u4e00-\u9fa5]/.test(t)){var n=e.match(/[\u4e00-\u9fa5]/);n||(n=e.match(/[0-9a-zA-Z]/)),n&&(t=n[0])}return t}},{key:"renderGroupIcon",value:function(){var e=this.props,t=e.image,n=e.title;return t&&/^https?:\/\//.test(t)?Gu().createElement("span",{className:"ne-uilib-avatar-group"},Gu().createElement("img",{src:encodeURIComponent(t)})):Gu().createElement("span",{className:"ne-uilib-avatar-group ne-uilib-avatar-text-group",style:{backgroundColor:this.randomColor(n)}},Gu().createElement("span",null,vd.encodeHTML(this.getAvatarText(n))))}},{key:"render",value:function(){var e,t=this.props,n=t.type,r=t.targetType;return"group"===n?this.renderGroupIcon():(e=r&&"book"===r.toLowerCase()?"".concat("yuque-repo-","sheet"===n?"sheet":"design"===n?"design":"thread"===n?"thread":"mind"===n?"mind":"doc"):"sheet"===n?"doc-type-sheet":"board"===n?"doc-type-board":"table"===n?"doc-type-table":"doc-type-default",Gu().createElement(SC,{className:"ne-uilib-avatar-icon",type:e}))}}])}(Yu.Component);const Oye={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"};var xye=function(e,t){return Yu.createElement(Ek,(0,ok.A)((0,ok.A)({},e),{},{ref:t,icon:Oye}))};const Eye=Yu.forwardRef(xye);var Dye=function(e){var t,n,r=e.prefixCls,o=e.separator,i=void 0===o?"/":o,a=e.children,l=e.overlay,u=e.dropdownProps,c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["prefixCls","separator","children","overlay","dropdownProps"]),s=(0,Yu.useContext(o_).getPrefixCls)("breadcrumb",r);return n=t="href"in c?Yu.createElement("a",(0,ek.A)({className:"".concat(s,"-link")},c),a):Yu.createElement("span",(0,ek.A)({className:"".concat(s,"-link")},c),a),t=l?Yu.createElement(Ox,(0,ek.A)({overlay:l,placement:"bottomCenter"},u),Yu.createElement("span",{className:"".concat(s,"-overlay-link")},n,Yu.createElement(Eye,null))):n,a?Yu.createElement("span",null,t,i&&Yu.createElement("span",{className:"".concat(s,"-separator")},i)):null};Dye.__ANT_BREADCRUMB_ITEM=!0;const Pye=Dye;var Rye=function(e){var t=e.children,n=(0,Yu.useContext(o_).getPrefixCls)("breadcrumb");return Yu.createElement("span",{className:"".concat(n,"-separator")},t||"/")};Rye.__ANT_BREADCRUMB_SEPARATOR=!0;const Sye=Rye;function Tye(e,t,n,r){var o=n.indexOf(e)===n.length-1,i=function(e,t){if(!e.breadcrumbName)return null;var n=Object.keys(t).join("|"),r=e.breadcrumbName.replace(new RegExp(":(".concat(n,")"),"g"),(function(e,n){return t[n]||e}));return r}(e,t);return o?Yu.createElement("span",null,i):Yu.createElement("a",{href:"#/".concat(r.join("/"))},i)}var jye=function(e,t){return e=(e||"").replace(/^\//,""),Object.keys(t).forEach((function(n){e=e.replace(":".concat(n),t[n])})),e},Iye=function(e){var t,n=e.prefixCls,r=e.separator,o=void 0===r?"/":r,i=e.style,a=e.className,l=e.routes,u=e.children,c=e.itemRender,s=void 0===c?Tye:c,d=e.params,f=void 0===d?{}:d,h=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["prefixCls","separator","style","className","routes","children","itemRender","params"]),p=Yu.useContext(o_),v=p.getPrefixCls,m=p.direction,g=v("breadcrumb",n);if(l&&l.length>0){var b=[];t=l.map((function(e){var t,n=jye(e.path,f);return n&&b.push(n),e.children&&e.children.length&&(t=Yu.createElement(uP,null,e.children.map((function(e){return Yu.createElement(uP.Item,{key:e.path||e.breadcrumbName},s(e,f,l,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=(0,ln.A)(e),o=jye(t,n);return o&&r.push(o),r}(b,e.path,f)))})))),Yu.createElement(Pye,{overlay:t,separator:o,key:n||e.breadcrumbName},s(e,f,l,b))}))}else u&&(t=(0,rE.A)(u).map((function(e,t){return e?(u_(e.type&&(!0===e.type.__ANT_BREADCRUMB_ITEM||!0===e.type.__ANT_BREADCRUMB_SEPARATOR),"Breadcrumb","Only accepts Breadcrumb.Item and Breadcrumb.Separator as it's children"),ux(e,{separator:o,key:t})):e})));var y=nk()(g,(0,Ha.A)({},"".concat(g,"-rtl"),"rtl"===m),a);return Yu.createElement("div",(0,ek.A)({className:y,style:i},h),t)};Iye.Item=Pye,Iye.Separator=Sye;const Bye=Iye,Mye=Ax;function Fye(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Lye()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Lye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Lye=function(){return!!e})()}var Uye=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=Fye(this,t,[e]),Object.defineProperty(n,"state",{enumerable:!0,configurable:!0,writable:!0,value:{refreshCounter:0}}),Object.defineProperty(n,"_props",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_ref",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),n._props=e.props,n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.props.cardData;t&&(this._syncClassName(),sd(this,t,"change",(function(){e._syncClassName(),e.forceUpdate()})))}},{key:"getRef",value:function(){return this._ref.current}},{key:"update",value:function(e){this._props=Object.assign(Object.assign({},this._props),e),this.forceUpdate()}},{key:"render",value:function(){var e=this.props.component;return"function"!=typeof e&&e.type?Gu().createElement(e.type,Object.assign({},this._props,{ref:this._ref}),e.props.children):Gu().createElement(e,Object.assign({},this._props,{ref:this._ref}))}},{key:"_syncClassName",value:function(){var e=this.props.cardContainerNode;if(e){var t=this.props.props.cardData.cardAlias;t?e.setAttribute("data-alias",t):e.removeAttribute("data-alias")}}}])}(Yu.Component),Vye=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"render",value:function(e,t,n,r){var o=null;return!r&&n.classList.contains("ne-card-container")&&(r=n),r&&bt(r.classList.contains("ne-card-container"),r.outerHTML,"framework/uilib/src/card-data-view-helper/index.tsx:35"),t.viewModel&&(t.viewModel=ah(t.viewModel,(function(){null==o||o.setState({refreshCounter:(o.state.refreshCounter||0)+1})}))),Gl().render(Gu().createElement(Uye,{props:t,cardContainerNode:r,component:e,ref:function(e){var n;o=e,null===(n=null==t?void 0:t.$onReady)||void 0===n||n.call(t)}}),n),{getReactRef:function(){return(null==o?void 0:o.getRef())||null},rerender:function(e){null==o||o.update(e)},destroy:function(){o=null,Gl().unmountComponentAtNode(n)}}}},{key:"unmount",value:function(e){Gl().unmountComponentAtNode(e)}}])}(),Hye=o(7619),zye=o.n(Hye),Wye=["data-testid","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onClick","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture"];function qye(e){if("function"==typeof e)try{e=e()}catch(e){return null}return e||null}function $ye(e,t){var n=t.icon,r=t.mainIcon,o=t.iconfont,i=t.mainIconfont;return e&&(r||i)?Gu().createElement(SC,{type:r,iconfont:i}):Gu().isValidElement(n)?n:(bt("string"==typeof n,"card menu icon is not a string","framework/uilib/src/card-menu/items/item-container/utils.tsx:67"),n||o?Gu().createElement(SC,{type:n,iconfont:o}):null)}function Kye(e,t){return Wye.includes(t)}var Yye=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},Gye="ne-menu-item-container",Jye=function(e){e.stopPropagation(),e.preventDefault()};function Xye(e){var t=e.icon,n=e.title,r=e.mainSearch,o=e.describe,i=e.disabled,a=e.isVip,l=e.showRightArrow,u=e.selected,c=e.tooltip,s=e.type,d=e.iconBorder,f=e.className,h=e.children,p=Yye(e,["icon","title","mainSearch","describe","disabled","isVip","showRightArrow","selected","tooltip","type","iconBorder","className","children"]),v=gh.get(hh),m=gh.get(ph),g=Gu().createElement("div",{className:"".concat(Gye,"-icon")},t);return c&&(g=Gu().createElement(Qx,{title:n,overlayClassName:"".concat(Gye,"-tooltip")},g)),Gu().createElement("div",Object.assign({className:nk()(Gye,f,{disabled:i,selected:u,iconBorder:d})},zye()(p,Kye)),g,Gu().createElement("div",{className:"".concat(Gye,"-content")},Gu().createElement("div",{className:"".concat(Gye,"-title")},l&&Gu().createElement("span",{className:"".concat(Gye,"-right")},Gu().createElement(SC,{type:"menu-card-right-arrow"})),r&&Gu().createElement("span",{className:nk()("".concat(Gye,"-key"),{showRightArrow:l})},r),n,a&&v&&!["label"].includes(s)&&Gu().createElement(Qx,{title:v},Gu().createElement("span",{className:nk()("".concat(Gye,"-vip")),onClick:Jye,onMouseDown:Jye},Gu().createElement(m,null)))),o&&Gu().createElement("div",{className:"".concat(Gye,"-describe")},o)),h)}var Qye=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function Zye(e){var t=e.onMouseEnter,n=e.data,r=e.useMainIcon,o=e.onSelect,i=e.selected,a=e.trigger,l=e.onClick,u=e.onFileSelectOpen,c=Qye(e,["onMouseEnter","data","useMainIcon","onSelect","selected","trigger","onClick","onFileSelectOpen"]),s=(0,Yu.useRef)(null),d=(0,Yu.useCallback)((function(e){var t=Array.from(e.target.files);e.target.value="",t.length>0&&o(n,t)}),[o]),f=(0,Yu.useCallback)((function(){var e,t;s.current&&(null===(t=(e=s.current).click)||void 0===t||t.call(e),null==u||u(),"function"==typeof l&&l())}),[s.current]),h=n.label,p=n.description,v=n.mainSearch,m=n.multiple,g=n.accept,b=n.disabled,y=n.iconBorder,w=$ye(r,n);(0,Yu.useEffect)((function(){if(i&&!b)return a.on("select",f),function(){return a.off("select",f)}}),[a,f,i,b]);var A=b?null:Gu().createElement("input",{ref:s,multiple:m,onChange:d,type:"file",accept:String(g)||"*/*"});return Gu().createElement(Xye,Object.assign({},c,{iconBorder:y,selected:i,disabled:b,icon:w,title:h,describe:qye(p),mainSearch:v,onMouseEnter:t,className:"ne-ui-file-item-container",onClick:f}),A)}var ewe="icon",twe="normal",nwe="two-column",rwe="border-icon",owe="label",iwe="submenu",awe=[twe,nwe,rwe,owe,iwe,ewe],lwe="ne-menu-item-group";function uwe(e){var t=nk()(lwe,e.type||twe);return Gu().createElement("div",{className:t},Gu().createElement("div",{className:"".concat(lwe,"-title")},e.title),Gu().createElement("div",{className:"".concat(lwe,"-content")},e.children))}var cwe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function swe(e){var t,n=e.onMouseEnter,r=e.overlayContainer,o=e.data,i=e.type,a=e.useMainIcon,l=e.renderItems,u=e.trigger,c=e.showHover,s=e.selected,d=e.onSelect,f=cwe(e,["onMouseEnter","overlayContainer","data","type","useMainIcon","renderItems","trigger","showHover","selected","onSelect"]),h=(0,Yu.useState)({visible:!1}),p=(0,tn.A)(h,2),v=p[0],m=p[1],g=(0,Yu.useCallback)((function(){d(o,o.value)}),[d]),b=(0,Yu.useCallback)((function(e){c&&m({visible:e})}),[m,c]);(0,Yu.useEffect)((function(){var e=function(e,t){i===t.type&&t.id===o.name&&m({visible:"open"===e})};return u.on("open",e),u.on("close",e),s&&u.on("select",g),function(){u.off("open",e),u.off("close",e),u.off("select",g)}}),[u,s,g]);var y=o.label,w=o.description,A=o.mainSearch,k=o.iconBorder,_=$ye(a,o),C=i!==owe&&(null===(t=o.childMenus)||void 0===t?void 0:t.length),N=Gu().createElement(Xye,Object.assign({},f,{type:i,selected:s,iconBorder:k,icon:_,title:y,mainSearch:A,describe:qye(w),onMouseEnter:n,className:"ne-ui-submenu-item-container",onClick:g}),C&&Gu().createElement("span",{className:"ne-ui-submenu-right"},Gu().createElement(SC,{type:"menu-card-right-arrow"})));if(!C)return N;var O=Gu().createElement(uwe,{type:iwe},l(o.childMenus||[],iwe));return Gu().createElement(bR,Object.assign({trigger:"hover",placement:"rightTop",overlayClassName:nk()("ne-ui-search-submenu-panel",c?"show-hover":"show-selected"),getPopupContainer:function(e){return"function"==typeof r?r(e)||document.body:r||document.body},content:O,onVisibleChange:b},v),N)}function dwe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,fwe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function fwe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(fwe=function(){return!!e})()}var hwe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=dwe(this,t,arguments),Object.defineProperty(e,"state",{enumerable:!0,configurable:!0,writable:!0,value:{row:3,col:3,x:-1,y:-1}}),Object.defineProperty(e,"_handleUpDown",{enumerable:!0,configurable:!0,writable:!0,value:function(t){e.props.inDelegate&&(0===e.state.y&&t&&e.props.trigger.emit("tryoutTrigger"),e.setState({y:Math.min(9,e.state.y+(t?-1:1))}))}}),Object.defineProperty(e,"_handleLeftRight",{enumerable:!0,configurable:!0,writable:!0,value:function(t){e.props.inDelegate&&(0===e.state.x&&t&&e.props.trigger.emit("tryoutTrigger"),e.setState({x:Math.min(9,e.state.x+(t?-1:1))}))}}),Object.defineProperty(e,"_handleSelect",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.props.inDelegate&&e.props.onSelect(e.state.y+1,e.state.x+1)}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){this.props.trigger.on("updown",this._handleUpDown),this.props.trigger.on("leftright",this._handleLeftRight),this.props.trigger.on("enter",this._handleSelect)}},{key:"componentWillUnmount",value:function(){this.props.trigger.off("updown",this._handleUpDown),this.props.trigger.off("leftright",this._handleLeftRight),this.props.trigger.off("enter",this._handleSelect)}},{key:"render",value:function(){for(var e=this,t=this.props.children,n=[],r=this.state,o=r.row,i=r.col,a=r.x,l=r.y,u=Math.min(10,Math.max(o,l+1)+1),c=Math.min(10,Math.max(i,a+1)+1),s=function(t){for(var r=[],o=function(n){r.push(Gu().createElement("div",{key:"".concat(t,"-").concat(n),className:Uf("ne-ui-table-selector-cell",t<=l&&n<=a?"ne-ui-selected":""),onMouseEnter:function(){e._handleHoverIn(t,n)},onClick:function(){e._handleClick(t,n)}}))},i=0;i<c;i++)o(i);n.push(Gu().createElement("div",{key:"row-".concat(t),className:"ne-ui-table-selector-row"},r))},d=0;d<u;d++)s(d);return Gu().createElement("div",{className:"ne-ui-table-selector"},t,n,Gu().createElement("div",{className:"ne-ui-table-selector-counter"},l+1," x ",a+1))}},{key:"_handleHoverIn",value:function(e,t){this.setState({x:t,y:e})}},{key:"_handleClick",value:function(e,t){this.props.onSelect(e+1,t+1)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.inDelegate&&(t.x<0||t.y<0)?{x:0,y:0}:t}}])}(Yu.Component);Object.defineProperty(hwe,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{onSelect:function(){}}});var pwe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},vwe=3,mwe=3;function gwe(e){var t=e.onMouseEnter,n=e.overlayContainer,r=e.trigger,o=e.selected,i=e.showHover,a=e.data,l=e.useMainIcon,u=e.type,c=e.themeSelector,s=e.onSelect,d=pwe(e,["onMouseEnter","overlayContainer","trigger","selected","showHover","data","useMainIcon","type","themeSelector","onSelect"]),f=(0,Yu.useState)(!1),h=(0,tn.A)(f,2),p=h[0],v=h[1],m=(0,Yu.useState)({visible:!1}),g=(0,tn.A)(m,2),b=g[0],y=g[1],w=(0,Yu.useCallback)((function(e,t){s(a,{row:e,col:t})}),[s]),A=(0,Yu.useCallback)((function(e){i&&(e||r.emit("tryoutTrigger"),y({visible:e}))}),[y,i]),k=(0,Yu.useCallback)((function(){v(!0),y({visible:!0}),r.once("tryoutTrigger",(function(){v(!1),y({visible:!1})}))}),[v,r]),_=(0,Yu.useCallback)((function(){s(a,{row:vwe,col:mwe})}),[s]);(0,Yu.useEffect)((function(){if(o)return r.on("select",_),function(){r.off("select",_)}}),[r,_,o]),(0,Yu.useEffect)((function(){if(o)return r.on("delegate",k),function(){r.off("delegate",k)}}),[r,o,k]);var C=a.label,N=a.description,O=a.mainSearch,x=a.iconBorder,E=$ye(l,a),D=Gu().createElement(hwe,{onSelect:w,trigger:r,inDelegate:p},Gu().createElement("div",{className:"ne-ui-selector-title"},C)),P=Gu().createElement(Xye,Object.assign({},d,{type:u,iconBorder:x,selected:o,icon:E,title:C,showRightArrow:u!==owe,mainSearch:O,describe:qye(N),onMouseEnter:t,className:"ne-ui-table-item-container",onClick:_}));return u===owe?P:Gu().createElement(bR,Object.assign({trigger:"hover",placement:"rightTop",overlayClassName:"ne-ui-search-menu-table-selector ".concat(c||""),getPopupContainer:function(e){return"function"==typeof n?n(e)||document.body:n||document.body},content:D,onVisibleChange:A},b),P)}var bwe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function ywe(e){var t=e.onMouseEnter,n=e.data,r=e.useMainIcon,o=e.onSelect,i=e.trigger,a=e.selected,l=bwe(e,["onMouseEnter","data","useMainIcon","onSelect","trigger","selected"]),u=(0,Yu.useCallback)((function(){o(n,n.value)}),[o]);(0,Yu.useEffect)((function(){if(a)return i.on("select",u),function(){return i.off("select",u)}}),[i,u,a]);var c=n.label,s=n.description,d=n.mainSearch,f=n.iconBorder,h=$ye(r,n);return Gu().createElement(Xye,Object.assign({},l,{iconBorder:f,selected:a,icon:h,title:c,mainSearch:d,describe:qye(s),onMouseEnter:t,className:"ne-ui-text-item-container",onClick:u}))}var wwe=o(6319),Awe=o.n(wwe);function kwe(e){return Array.isArray?Array.isArray(e):"[object Array]"===Ewe(e)}function _we(e){return"string"==typeof e}function Cwe(e){return"number"==typeof e}function Nwe(e){return"object"==typeof e}function Owe(e){return null!=e}function xwe(e){return!e.trim().length}function Ewe(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Dwe=e=>`Missing ${e} property in key`,Pwe=e=>`Property 'weight' in key '${e}' must be a positive integer`,Rwe=Object.prototype.hasOwnProperty;class Swe{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach((e=>{let n=Twe(e);t+=n.weight,this._keys.push(n),this._keyMap[n.id]=n,t+=n.weight})),this._keys.forEach((e=>{e.weight/=t}))}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Twe(e){let t=null,n=null,r=null,o=1,i=null;if(_we(e)||kwe(e))r=e,t=jwe(e),n=Iwe(e);else{if(!Rwe.call(e,"name"))throw new Error(Dwe("name"));const a=e.name;if(r=a,Rwe.call(e,"weight")&&(o=e.weight,o<=0))throw new Error(Pwe(a));t=jwe(a),n=Iwe(a),i=e.getFn}return{path:t,id:n,weight:o,src:r,getFn:i}}function jwe(e){return kwe(e)?e:e.split(".")}function Iwe(e){return kwe(e)?e.join("."):e}const Bwe={useExtendedSearch:!1,getFn:function(e,t){let n=[],r=!1;const o=(e,t,i)=>{if(Owe(e))if(t[i]){const a=e[t[i]];if(!Owe(a))return;if(i===t.length-1&&(_we(a)||Cwe(a)||function(e){return!0===e||!1===e||function(e){return Nwe(e)&&null!==e}(e)&&"[object Boolean]"==Ewe(e)}(a)))n.push(function(e){return null==e?"":function(e){if("string"==typeof e)return e;let t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}(a));else if(kwe(a)){r=!0;for(let e=0,n=a.length;e<n;e+=1)o(a[e],t,i+1)}else t.length&&o(a,t,i+1)}else n.push(e)};return o(e,_we(t)?t.split("."):t,0),r?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Mwe={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...Bwe};const Fwe=/[^ ]+/g;class Lwe{constructor({getFn:e=Mwe.getFn,fieldNormWeight:t=Mwe.fieldNormWeight}={}){this.norm=function(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(t){const o=t.match(Fwe).length;if(n.has(o))return n.get(o);const i=1/Math.pow(o,.5*e),a=parseFloat(Math.round(i*r)/r);return n.set(o,a),a},clear(){n.clear()}}}(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach(((e,t)=>{this._keysMap[e.id]=t}))}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,_we(this.docs[0])?this.docs.forEach(((e,t)=>{this._addString(e,t)})):this.docs.forEach(((e,t)=>{this._addObject(e,t)})),this.norm.clear())}add(e){const t=this.size();_we(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!Owe(e)||xwe(e))return;let n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}_addObject(e,t){let n={i:t,$:{}};this.keys.forEach(((t,r)=>{let o=t.getFn?t.getFn(e):this.getFn(e,t.path);if(Owe(o))if(kwe(o)){let e=[];const t=[{nestedArrIndex:-1,value:o}];for(;t.length;){const{nestedArrIndex:n,value:r}=t.pop();if(Owe(r))if(_we(r)&&!xwe(r)){let t={v:r,i:n,n:this.norm.get(r)};e.push(t)}else kwe(r)&&r.forEach(((e,n)=>{t.push({nestedArrIndex:n,value:e})}))}n.$[r]=e}else if(_we(o)&&!xwe(o)){let e={v:o,n:this.norm.get(o)};n.$[r]=e}})),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function Uwe(e,t,{getFn:n=Mwe.getFn,fieldNormWeight:r=Mwe.fieldNormWeight}={}){const o=new Lwe({getFn:n,fieldNormWeight:r});return o.setKeys(e.map(Twe)),o.setSources(t),o.create(),o}function Vwe(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:o=Mwe.distance,ignoreLocation:i=Mwe.ignoreLocation}={}){const a=t/e.length;if(i)return a;const l=Math.abs(r-n);return o?a+l/o:l?1:a}const Hwe=32;function zwe(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const o=e.charAt(n);t[o]=(t[o]||0)|1<<r-n-1}return t}class Wwe{constructor(e,{location:t=Mwe.location,threshold:n=Mwe.threshold,distance:r=Mwe.distance,includeMatches:o=Mwe.includeMatches,findAllMatches:i=Mwe.findAllMatches,minMatchCharLength:a=Mwe.minMatchCharLength,isCaseSensitive:l=Mwe.isCaseSensitive,ignoreLocation:u=Mwe.ignoreLocation}={}){if(this.options={location:t,threshold:n,distance:r,includeMatches:o,findAllMatches:i,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u},this.pattern=l?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const c=(e,t)=>{this.chunks.push({pattern:e,alphabet:zwe(e),startIndex:t})},s=this.pattern.length;if(s>Hwe){let e=0;const t=s%Hwe,n=s-t;for(;e<n;)c(this.pattern.substr(e,Hwe),e),e+=Hwe;if(t){const e=s-Hwe;c(this.pattern.substr(e),e)}}else c(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:n}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let t={isMatch:!0,score:0};return n&&(t.indices=[[0,e.length-1]]),t}const{location:r,distance:o,threshold:i,findAllMatches:a,minMatchCharLength:l,ignoreLocation:u}=this.options;let c=[],s=0,d=!1;this.chunks.forEach((({pattern:t,alphabet:f,startIndex:h})=>{const{isMatch:p,score:v,indices:m}=function(e,t,n,{location:r=Mwe.location,distance:o=Mwe.distance,threshold:i=Mwe.threshold,findAllMatches:a=Mwe.findAllMatches,minMatchCharLength:l=Mwe.minMatchCharLength,includeMatches:u=Mwe.includeMatches,ignoreLocation:c=Mwe.ignoreLocation}={}){if(t.length>Hwe)throw new Error("Pattern length exceeds max of 32.");const s=t.length,d=e.length,f=Math.max(0,Math.min(r,d));let h=i,p=f;const v=l>1||u,m=v?Array(d):[];let g;for(;(g=e.indexOf(t,p))>-1;){let e=Vwe(t,{currentLocation:g,expectedLocation:f,distance:o,ignoreLocation:c});if(h=Math.min(e,h),p=g+s,v){let e=0;for(;e<s;)m[g+e]=1,e+=1}}p=-1;let b=[],y=1,w=s+d;const A=1<<s-1;for(let r=0;r<s;r+=1){let i=0,l=w;for(;i<l;)Vwe(t,{errors:r,currentLocation:f+l,expectedLocation:f,distance:o,ignoreLocation:c})<=h?i=l:w=l,l=Math.floor((w-i)/2+i);w=l;let u=Math.max(1,f-l+1),g=a?d:Math.min(f+l,d)+s,k=Array(g+2);k[g+1]=(1<<r)-1;for(let i=g;i>=u;i-=1){let a=i-1,l=n[e.charAt(a)];if(v&&(m[a]=+!!l),k[i]=(k[i+1]<<1|1)&l,r&&(k[i]|=(b[i+1]|b[i])<<1|1|b[i+1]),k[i]&A&&(y=Vwe(t,{errors:r,currentLocation:a,expectedLocation:f,distance:o,ignoreLocation:c}),y<=h)){if(h=y,p=a,p<=f)break;u=Math.max(1,2*f-p)}}if(Vwe(t,{errors:r+1,currentLocation:f,expectedLocation:f,distance:o,ignoreLocation:c})>h)break;b=k}const k={isMatch:p>=0,score:Math.max(.001,y)};if(v){const e=function(e=[],t=Mwe.minMatchCharLength){let n=[],r=-1,o=-1,i=0;for(let a=e.length;i<a;i+=1){let a=e[i];a&&-1===r?r=i:a||-1===r||(o=i-1,o-r+1>=t&&n.push([r,o]),r=-1)}return e[i-1]&&i-r>=t&&n.push([r,i-1]),n}(m,l);e.length?u&&(k.indices=e):k.isMatch=!1}return k}(e,t,f,{location:r+h,distance:o,threshold:i,findAllMatches:a,minMatchCharLength:l,includeMatches:n,ignoreLocation:u});p&&(d=!0),s+=v,p&&m&&(c=[...c,...m])}));let f={isMatch:d,score:d?s/this.chunks.length:1};return d&&n&&(f.indices=c),f}}class qwe{constructor(e){this.pattern=e}static isMultiMatch(e){return $we(e,this.multiRegex)}static isSingleMatch(e){return $we(e,this.singleRegex)}search(){}}function $we(e,t){const n=e.match(t);return n?n[1]:null}class Kwe extends qwe{constructor(e,{location:t=Mwe.location,threshold:n=Mwe.threshold,distance:r=Mwe.distance,includeMatches:o=Mwe.includeMatches,findAllMatches:i=Mwe.findAllMatches,minMatchCharLength:a=Mwe.minMatchCharLength,isCaseSensitive:l=Mwe.isCaseSensitive,ignoreLocation:u=Mwe.ignoreLocation}={}){super(e),this._bitapSearch=new Wwe(e,{location:t,threshold:n,distance:r,includeMatches:o,findAllMatches:i,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Ywe extends qwe{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t,n=0;const r=[],o=this.pattern.length;for(;(t=e.indexOf(this.pattern,n))>-1;)n=t+o,r.push([t,n-1]);const i=!!r.length;return{isMatch:i,score:i?0:1,indices:r}}}const Gwe=[class extends qwe{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},Ywe,class extends qwe{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class extends qwe{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends qwe{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends qwe{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},class extends qwe{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},Kwe],Jwe=Gwe.length,Xwe=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Qwe=new Set([Kwe.type,Ywe.type]);const Zwe=[];function eAe(e,t){for(let n=0,r=Zwe.length;n<r;n+=1){let r=Zwe[n];if(r.condition(e,t))return new r(e,t)}return new Wwe(e,t)}const tAe="$and",nAe="$path",rAe=e=>!(!e[tAe]&&!e.$or),oAe=e=>({[tAe]:Object.keys(e).map((t=>({[t]:e[t]})))});function iAe(e,t,{auto:n=!0}={}){const r=e=>{let o=Object.keys(e);const i=(e=>!!e[nAe])(e);if(!i&&o.length>1&&!rAe(e))return r(oAe(e));if((e=>!kwe(e)&&Nwe(e)&&!rAe(e))(e)){const r=i?e[nAe]:o[0],a=i?e.$val:e[r];if(!_we(a))throw new Error((e=>`Invalid value for key ${e}`)(r));const l={keyId:Iwe(r),pattern:a};return n&&(l.searcher=eAe(a,t)),l}let a={children:[],operator:o[0]};return o.forEach((t=>{const n=e[t];kwe(n)&&n.forEach((e=>{a.children.push(r(e))}))})),a};return rAe(e)||(e=oAe(e)),r(e)}function aAe(e,t){const n=e.matches;t.matches=[],Owe(n)&&n.forEach((e=>{if(!Owe(e.indices)||!e.indices.length)return;const{indices:n,value:r}=e;let o={indices:n,value:r};e.key&&(o.key=e.key.src),e.idx>-1&&(o.refIndex=e.idx),t.matches.push(o)}))}function lAe(e,t){t.score=e.score}class uAe{constructor(e,t={},n){this.options={...Mwe,...t},this.options.useExtendedSearch,this._keyStore=new Swe(this.options.keys),this.setCollection(e,n)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof Lwe))throw new Error("Incorrect 'index' type");this._myIndex=t||Uwe(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){Owe(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const t=[];for(let n=0,r=this._docs.length;n<r;n+=1){const o=this._docs[n];e(o,n)&&(this.removeAt(n),n-=1,r-=1,t.push(o))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:n,includeScore:r,shouldSort:o,sortFn:i,ignoreFieldNorm:a}=this.options;let l=_we(e)?_we(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return function(e,{ignoreFieldNorm:t=Mwe.ignoreFieldNorm}){e.forEach((e=>{let n=1;e.matches.forEach((({key:e,norm:r,score:o})=>{const i=e?e.weight:null;n*=Math.pow(0===o&&i?Number.EPSILON:o,(i||1)*(t?1:r))})),e.score=n}))}(l,{ignoreFieldNorm:a}),o&&l.sort(i),Cwe(t)&&t>-1&&(l=l.slice(0,t)),function(e,t,{includeMatches:n=Mwe.includeMatches,includeScore:r=Mwe.includeScore}={}){const o=[];return n&&o.push(aAe),r&&o.push(lAe),e.map((e=>{const{idx:n}=e,r={item:t[n],refIndex:n};return o.length&&o.forEach((t=>{t(e,r)})),r}))}(l,this._docs,{includeMatches:n,includeScore:r})}_searchStringList(e){const t=eAe(e,this.options),{records:n}=this._myIndex,r=[];return n.forEach((({v:e,i:n,n:o})=>{if(!Owe(e))return;const{isMatch:i,score:a,indices:l}=t.searchIn(e);i&&r.push({item:e,idx:n,matches:[{score:a,value:e,norm:o,indices:l}]})})),r}_searchLogical(e){const t=iAe(e,this.options),n=(e,t,r)=>{if(!e.children){const{keyId:n,searcher:o}=e,i=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(t,n),searcher:o});return i&&i.length?[{idx:r,item:t,matches:i}]:[]}const o=[];for(let i=0,a=e.children.length;i<a;i+=1){const a=e.children[i],l=n(a,t,r);if(l.length)o.push(...l);else if(e.operator===tAe)return[]}return o},r=this._myIndex.records,o={},i=[];return r.forEach((({$:e,i:r})=>{if(Owe(e)){let a=n(t,e,r);a.length&&(o[r]||(o[r]={idx:r,item:e,matches:[]},i.push(o[r])),a.forEach((({matches:e})=>{o[r].matches.push(...e)})))}})),i}_searchObjectList(e){const t=eAe(e,this.options),{keys:n,records:r}=this._myIndex,o=[];return r.forEach((({$:e,i:r})=>{if(!Owe(e))return;let i=[];n.forEach(((n,r)=>{i.push(...this._findMatches({key:n,value:e[r],searcher:t}))})),i.length&&o.push({idx:r,item:e,matches:i})})),o}_findMatches({key:e,value:t,searcher:n}){if(!Owe(t))return[];let r=[];if(kwe(t))t.forEach((({v:t,i:o,n:i})=>{if(!Owe(t))return;const{isMatch:a,score:l,indices:u}=n.searchIn(t);a&&r.push({score:l,key:e,value:t,idx:o,norm:i,indices:u})}));else{const{v:o,n:i}=t,{isMatch:a,score:l,indices:u}=n.searchIn(o);a&&r.push({score:l,key:e,value:o,norm:i,indices:u})}return r}}uAe.version="6.6.2",uAe.createIndex=Uwe,uAe.parseIndex=function(e,{getFn:t=Mwe.getFn,fieldNormWeight:n=Mwe.fieldNormWeight}={}){const{keys:r,records:o}=e,i=new Lwe({getFn:t,fieldNormWeight:n});return i.setKeys(r),i.setIndexRecords(o),i},uAe.config=Mwe,uAe.parseQuery=iAe,function(...e){Zwe.push(...e)}(class{constructor(e,{isCaseSensitive:t=Mwe.isCaseSensitive,includeMatches:n=Mwe.includeMatches,minMatchCharLength:r=Mwe.minMatchCharLength,ignoreLocation:o=Mwe.ignoreLocation,findAllMatches:i=Mwe.findAllMatches,location:a=Mwe.location,threshold:l=Mwe.threshold,distance:u=Mwe.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:n,minMatchCharLength:r,findAllMatches:i,ignoreLocation:o,location:a,threshold:l,distance:u},this.pattern=t?e:e.toLowerCase(),this.query=function(e,t={}){return e.split("|").map((e=>{let n=e.trim().split(Xwe).filter((e=>e&&!!e.trim())),r=[];for(let e=0,o=n.length;e<o;e+=1){const o=n[e];let i=!1,a=-1;for(;!i&&++a<Jwe;){const e=Gwe[a];let n=e.isMultiMatch(o);n&&(r.push(new e(n,t)),i=!0)}if(!i)for(a=-1;++a<Jwe;){const e=Gwe[a];let n=e.isSingleMatch(o);if(n){r.push(new e(n,t));break}}}return r}))}(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:r}=this.options;e=r?e:e.toLowerCase();let o=0,i=[],a=0;for(let r=0,l=t.length;r<l;r+=1){const l=t[r];i.length=0,o=0;for(let t=0,r=l.length;t<r;t+=1){const r=l[t],{isMatch:u,indices:c,score:s}=r.search(e);if(!u){a=0,o=0,i.length=0;break}if(o+=1,a+=s,n){const e=r.constructor.type;Qwe.has(e)?i=[...i,...c]:i.push(c)}}if(o){let e={isMatch:!0,score:a/o};return n&&(e.indices=i),e}}return{isMatch:!1,score:1}}});var cAe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},sAe="ne-menu-search",dAe=function(e){e.stopPropagation()};function fAe(e){var t=e.className,n=e.onChange,r=e.onUpDown,o=e.onLeftRight,i=e.onSelect,a=e.onCancel,l=e.placeholder,u=e.autoFocus,c=e.onInputRef,s=cAe(e,["className","onChange","onUpDown","onLeftRight","onSelect","onCancel","placeholder","autoFocus","onInputRef"]),d=(0,Yu.useRef)(null),f=(0,Yu.useCallback)((function(e){n(e.target.value)}),[n]),h=(0,Yu.useCallback)((function(e){if(!Ks.hasModifyKey(e)||Ks.isTab(e))return Ks.isEnter(e)?(e.preventDefault(),void i()):Ks.isEscape(e)?(e.preventDefault(),void(null==a||a())):Ks.isArrowUp(e)||Ks.isArrowDown(e)?(e.preventDefault(),void r(Ks.isArrowUp(e))):Ks.isArrowLeft(e)||Ks.isArrowRight(e)?(e.preventDefault(),void o(Ks.isArrowLeft(e))):Ks.isTab(e)?(e.preventDefault(),void o(Ks.onlyShift(e),!0)):void 0}),[r]);return(0,Yu.useEffect)((function(){c&&c(d.current),d.current&&u&&d.current.focus()}),[d.current,u,c]),Gu().createElement("div",{className:nk()(sAe,t),onMouseUp:dAe,onMouseMove:dAe,onMouseDown:dAe,onClick:dAe,"data-testid":"ne-menu-search-box"},Gu().createElement(KP,Object.assign({ref:d,onKeyDown:h,onChange:f,prefix:Gu().createElement(SC,{type:"menu-card-search"}),placeholder:l},s)))}function hAe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,pAe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function pAe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pAe=function(){return!!e})()}fAe.defaultProps={autoFocus:!0,onInputRef:function(){}};var vAe=function(e,t,n){return{id:e,type:t,index:n,left:null,right:null,up:null,down:null}},mAe=Lf(Mf("column",nwe),Mf("normal",twe),Mf("label",owe),Mf("borderIcon",rwe),Mf("icon",ewe),Ff(twe)),gAe=Lf(Mf(nwe,2),Mf(owe,Number.MAX_VALUE),Mf(ewe,6),Ff(1)),bAe=function e(t){return Awe()(t.map((function(t){return t.noSearch?[]:t.items.map((function(n){return"SubMenu"===n.type&&n.childMenus?e([{items:n.childMenus}]):"borderIcon"===t.type?Object.assign(Object.assign({},n),{iconBorder:!0}):n}))})).flat(3),"name")},yAe=function(e,t){if(e!==t){for(var n=0;n<e.length;n++){var r=e[n],o=t[n]||t[t.length-1];o&&(r.down=o)}for(var i=0;i<t.length;i++){var a=t[i],l=e[i]||e[e.length-1];l&&(a.up=l)}var u=e[e.length-1],c=t[0];u&&(u.right?u.tabNext=c:u.right=c),c&&!t[0].left&&(c.left=u)}},wAe=function(e){function t(e){var n;(0,Ke.A)(this,t),n=hAe(this,t,[e]),Object.defineProperty(n,"_children",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(n,"_fuse",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_searchList",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_trigger",{enumerable:!0,configurable:!0,writable:!0,value:new it}),Object.defineProperty(n,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(n,"_contentNodeRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(n,"_firstWalkNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_currentWalkNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"state",{enumerable:!0,configurable:!0,writable:!0,value:{searchValue:"",searchResult:[],showHover:!!n.props.showHover,inDelegate:!1}}),Object.defineProperty(n,"_renderItems",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=n.props,i=o.itemElement,a=o.overlayContainer,l=o.onItemClick,u=Lf((function(e){return e.type||""}),Mf("TextItem",(function(){return ywe})),Mf("FileItem",(function(){return{element:Zye,props:{onFileSelectOpen:n.props.onFileSelectOpen}}})),Mf("TableItem",(function(){return gwe})),Mf("SubMenu",(function(){return{element:swe,props:{renderItems:n._renderItems}}})),Ff((function(e){return console.warn("invalid card-select item type: ",e),null})));return e.map((function(e,o){var c,s,d=null,f={tooltip:t===ewe};if(i)d=i;else{var h=u(e);h&&"element"in h?(f=h.props,d=h.element):d=h}return d?Gu().createElement(d,Object.assign({},f,{themeSelector:n.props.themeSelector,showHover:n.state.showHover,trigger:n._trigger,useMainIcon:r,selected:e.name===(null===(c=n._currentWalkNode)||void 0===c?void 0:c.id)&&t===(null===(s=n._currentWalkNode)||void 0===s?void 0:s.type),isVip:e.isVip,type:t,"data-testid":"card-menu-item-".concat(e.name),overlayContainer:a,data:e,key:"".concat(e.name,"-").concat(o),onSelect:n._debouncSelect,onClick:l})):null}))}}),Object.defineProperty(n,"_handleSearch",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t,r;if(n._fuse){var o=n._fuse.search(e).filter((function(e){return(e.score||-1)<=.25})).map((function(e){return e.item}));e&&n.props.customSearch&&(o=o.concat(n.props.customSearch(e,n._searchList)||[])),e?o.length?n._firstWalkNode=n._buildWalkNode([{items:o}]):n._firstWalkNode=null:n._firstWalkNode=n._buildWalkNode(n.props.config.groups),null===(r=(t=n.props).onSearchResultEmpty)||void 0===r||r.call(t,null===n._firstWalkNode),n._currentWalkNode=n._firstWalkNode,n.setState({searchValue:e,showHover:!1,inDelegate:!1,searchResult:o},n._handleScrollTo)}}}),Object.defineProperty(n,"_handleUpDown",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t;if(!n._handleAixKey("updown",e)&&n._currentWalkNode){var r=function(){if(n._currentWalkNode){var t=e?n._currentWalkNode.up:n._currentWalkNode.down;t&&(n._currentWalkNode=t),n.setState({},n._handleScrollTo)}},o=Array.from(document.querySelectorAll(".ne-menu-item-group.label > .ne-menu-item-group-content > .ne-menu-item-container"));if(e&&(null===(t=n._currentWalkNode.up)||void 0===t?void 0:t.type)===owe&&o.length>2){var i=o[0],a=o[2];ys((function(){return{top:i.getBoundingClientRect().top,y:a.getBoundingClientRect().y}}),(function(e){var t,o=e.y,i=e.top,a=null===(t=n._currentWalkNode)||void 0===t?void 0:t.up;if(o-i>10&&(null==a?void 0:a.type)===owe){for(;2!==(null==a?void 0:a.index)&&(null==a?void 0:a.type)===owe;)a=a.right&&"type"in a.right?a.right:null;if(2===(null==a?void 0:a.index))return n._currentWalkNode=a,void n.setState({},n._handleScrollTo)}r()}))}else n._currentWalkNode.type===owe&&o.length>2?ys((function(){var e=o[0].getBoundingClientRect().top;return{y:o[2].getBoundingClientRect().y,top:e}}),(function(t){if(t.y-t.top>10){if(!e&&n._currentWalkNode&&n._currentWalkNode.index<2){var o=n._currentWalkNode.right;return 2!==o.index&&(o=o.right),n._currentWalkNode=o,void n.setState({},n._handleScrollTo)}if(!e&&n._currentWalkNode&&2===n._currentWalkNode.index){var i=n._currentWalkNode.left.left.down;return i&&(n._currentWalkNode=i),void n.setState({},n._handleScrollTo)}if(e&&n._currentWalkNode&&2===n._currentWalkNode.index){var a=n._currentWalkNode.left.left;return a&&(n._currentWalkNode=a),void n.setState({},n._handleScrollTo)}}r()})):r()}}}),Object.defineProperty(n,"_handleLeftRight",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!n._handleAixKey("leftright",e)&&n._currentWalkNode){var o=!1,i=e?n._currentWalkNode.left:n._currentWalkNode[r?"tabNext":"right"]||n._currentWalkNode.right;i&&("trigger"in i&&i.trigger&&(null===(t=i.node)||void 0===t?void 0:t.type)===owe?n._currentWalkNode=i.node.tabNext:"trigger"in i?(n._trigger.emit(i.trigger,i.trigger,i.triggerNode),"delegate"===i.trigger&&(o=!0),n._currentWalkNode=i.node||i):n._currentWalkNode=i),o&&n._trigger.once("tryoutTrigger",(function(){n.setState({inDelegate:!1})})),n.setState({inDelegate:o},n._handleScrollTo)}}}),Object.defineProperty(n,"_handleSelect",{enumerable:!0,configurable:!0,writable:!0,value:function(){n.state.inDelegate?n._trigger.emit("enter"):n.state.searchResult&&n._currentWalkNode&&n._trigger.emit("select")}}),Object.defineProperty(n,"_handleScrollTo",{enumerable:!0,configurable:!0,writable:!0,value:function(){if(n._contentNodeRef.current){var e=n._contentNodeRef.current,t=n._contentNodeRef.current.querySelector(".selected");t&&ys((function(){var n=e.offsetHeight===e.scrollHeight?e.parentNode:e,r=n.getBoundingClientRect(),o=n.scrollTop,i=n.scrollHeight;return{childRect:t.getBoundingClientRect(),rootRect:r,scrollTop:o,scrollHeight:i,scrollNode:n}}),(function(e){var t=e.childRect,n=e.rootRect,r=e.scrollTop,o=e.scrollHeight,i=e.scrollNode;t.top<n.top&&r>0?i.scrollTop=Math.max(r-(n.top-t.top)-40,0):t.bottom>n.bottom&&o>0&&(i.scrollTop=Math.min(o,r+(t.bottom-n.bottom)+40))}))}}}),Object.defineProperty(n,"_handleDomUpdate",{enumerable:!0,configurable:!0,writable:!0,value:function(){if(n._rootNode.current){var e=n._rootNode.current;ys((function(){return e.offsetWidth}),(function(t){var n=e.classList;t<285?n.contains("with-scroll")&&n.remove("with-scroll"):t>285&&(n.contains("with-scroll")||n.add("with-scroll"))}))}}}),Object.defineProperty(n,"_debouncSelect",{enumerable:!0,configurable:!0,writable:!0,value:Qm()((function(){for(var e,t,r,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];null===(r=(t=n.props).onSelect)||void 0===r||(e=r).call.apply(e,[t].concat(i))}),1e3,{leading:!0,trailing:!1})});var r=e.config.groups,o=bAe(r);return n._searchList=o,n._fuse=new uAe(o,{includeMatches:!0,includeScore:!0,distance:12,keys:["mainSearch","keywords","name","label"]}),n._firstWalkNode=n._buildWalkNode(r),e.showHover||(n._currentWalkNode=n._firstWalkNode),e.selectEmitter&&(e.selectEmitter.on("updown",n._handleUpDown),e.selectEmitter.on("leftright",n._handleLeftRight),e.selectEmitter.on("enter",n._handleSelect),e.selectEmitter.on("search",n._handleSearch)),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){this._handleDomUpdate()}},{key:"componentDidUpdate",value:function(){this._handleDomUpdate()}},{key:"componentWillUnmount",value:function(){this.props.selectEmitter&&(this.props.selectEmitter.off("updown",this._handleUpDown),this.props.selectEmitter.off("leftright",this._handleLeftRight),this.props.selectEmitter.off("enter",this._handleSelect),this.props.selectEmitter.off("search",this._handleSearch))}},{key:"render",value:function(){var e=this,t=this.props,n=t.config,r=t.className,o=t.disableSearch,i=n.searchPlaceholder,a=n.disableSearch,l=n.groups;this.state.searchValue&&(l=this.state.searchResult.length?[{title:sc("搜索结果"),items:this.state.searchResult}]:[]);var u=this._renderGroups(l),c=this.state.showHover;return Gu().createElement("div",{ref:this._rootNode,className:Uf("ne-ui-search-card-menu",r,0===l.length?"empty":"",!0===c?"show-hover":"show-selected"),onMouseDown:function(e){return e.preventDefault()},onMouseMove:function(){return!e.state.showHover&&e.setState({showHover:!0})},onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave},!o&&!a&&Gu().createElement(fAe,{onUpDown:this._handleUpDown,onLeftRight:this._handleLeftRight,onSelect:this._handleSelect,onCancel:this.props.onCancel,placeholder:i,onChange:this._handleSearch,autoFocus:this.props.autoFocus,onFocus:this.props.onFocus,onBlur:this.props.onBlur,onInputRef:this.props.onInputRef}),l.length?Gu().createElement("div",{ref:this._contentNodeRef,className:"ne-ui-card-menu-content"},u):this._renderEmpty())}},{key:"_renderGroups",value:function(e){var t=this;return 0===e.length?this._renderEmpty():e.map((function(e,n){var r=e.title;if("hr"===e.type)return Gu().createElement("div",{key:"hr-".concat(n),className:"ne-ui-search-menu-hr"});var o=mAe(e.type),i=r?Gu().createElement("div",{className:"ne-ui-card-menu-group-title"},sc(r)):null;return Gu().createElement(uwe,{type:o,title:i,key:"group-".concat(n)},t._renderItems(e.items,o,o!==ewe))}))}},{key:"_renderEmpty",value:function(){return this.state.searchValue?Gu().createElement("div",{className:"ne-ui-card-search-empty"},Gu().createElement("div",{className:"empty-result-img",style:{backgroundImage:"url(".concat(Fw[this.props.isDark?"dark-empty-search-empty":"empty-result-img"],")")}}),Gu().createElement("div",{className:"empty-result-text"},sc("暂无匹配的搜索结果"))):Gu().createElement("div",{className:"ne-ui-card-menu-empty"},this.props.emptyTipText)}},{key:"_handleAixKey",value:function(e,t){return this.state.showHover?(this._currentWalkNode=this._firstWalkNode,this.setState({showHover:!1},this._handleScrollTo),!0):this.state.inDelegate?(this._trigger.emit(e,t),!0):!this._currentWalkNode}},{key:"_buildWalkNode",value:function(e){if(0===e.length)return null;var t=null,n=[],r=n,o=n;return e.forEach((function(e){if("hr"!==e.type){var n=mAe(e.type),i=gAe(n);e.items.forEach((function(a,l){var u=l%i,c=l===e.items.length-1||u===i-1,s=vAe(a.name||"",n,l);if(function(e){!t&&(t=e)}(s),s.left=o[o.length-1]||null,s.left&&(s.left.right=s),o.push(s),"TableItem"===a.type)s.right={trigger:"delegate",triggerNode:s,node:s};else if("SubMenu"===a.type&&a.childMenus){var d,f,h=a.childMenus.length;a.childMenus.forEach((function(e,t){var n=vAe(e.name||"",iwe,t);n.left={trigger:"close",triggerNode:s,node:s},d||(d=n,s.right={trigger:"open",triggerNode:s,node:n}),f&&(f.down=n,f.right=n,n.up=f),f=n,t===h-1&&(n.down=d,n.right=d,d.up=n)}))}c&&(yAe(r,o),r=o,o=[])}))}})),yAe(r,n),t}}])}(Yu.Component);Object.defineProperty(wAe,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{showHover:!0,autoFocus:!0,onSelect:function(){},onCancel:function(){},onInputRef:function(){},onSearchResultEmpty:function(){},emptyTipText:sc("无匹配卡片")}});var AAe=function(e){(0,Xe.A)(n,e);var t=(0,Wk.A)(n);function n(e){var r;(0,Ke.A)(this,n),(r=t.call(this,e)).handleChange=function(e){var t=r.props,n=t.disabled,o=t.onChange;n||("checked"in r.props||r.setState({checked:e.target.checked}),o&&o({target:(0,ok.A)((0,ok.A)({},r.props),{},{checked:e.target.checked}),stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},nativeEvent:e.nativeEvent}))},r.saveInput=function(e){r.input=e};var o="checked"in e?e.checked:e.defaultChecked;return r.state={checked:o},r}return(0,$e.A)(n,[{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"render",value:function(){var e,t=this.props,n=t.prefixCls,r=t.className,o=t.style,i=t.name,a=t.id,l=t.type,u=t.disabled,c=t.readOnly,s=t.tabIndex,d=t.onClick,f=t.onFocus,h=t.onBlur,p=t.onKeyDown,v=t.onKeyPress,m=t.onKeyUp,g=t.autoFocus,b=t.value,y=t.required,w=(0,ak.A)(t,["prefixCls","className","style","name","id","type","disabled","readOnly","tabIndex","onClick","onFocus","onBlur","onKeyDown","onKeyPress","onKeyUp","autoFocus","value","required"]),A=Object.keys(w).reduce((function(e,t){return"aria-"!==t.substr(0,5)&&"data-"!==t.substr(0,5)&&"role"!==t||(e[t]=w[t]),e}),{}),k=this.state.checked,_=nk()(n,r,(e={},(0,Ha.A)(e,"".concat(n,"-checked"),k),(0,Ha.A)(e,"".concat(n,"-disabled"),u),e));return Gu().createElement("span",{className:_,style:o},Gu().createElement("input",(0,ek.A)({name:i,id:a,type:l,required:y,readOnly:c,disabled:u,tabIndex:s,className:"".concat(n,"-input"),checked:!!k,onClick:d,onFocus:f,onBlur:h,onKeyUp:m,onKeyDown:p,onKeyPress:v,onChange:this.handleChange,autoFocus:g,ref:this.saveInput,value:b},A)),Gu().createElement("span",{className:"".concat(n,"-inner")}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return"checked"in e?(0,ok.A)((0,ok.A)({},t),{},{checked:e.checked}):null}}]),n}(Yu.Component);AAe.defaultProps={prefixCls:"rc-checkbox",className:"",style:{},type:"checkbox",defaultChecked:!1,onFocus:function(){},onBlur:function(){},onChange:function(){},onKeyDown:function(){},onKeyPress:function(){},onKeyUp:function(){}};const kAe=AAe;var _Ae=Yu.createContext(null),CAe=function(e,t){var n=e.defaultValue,r=e.children,o=e.options,i=void 0===o?[]:o,a=e.prefixCls,l=e.className,u=e.style,c=e.onChange,s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["defaultValue","children","options","prefixCls","className","style","onChange"]),d=Yu.useContext(o_),f=d.getPrefixCls,h=d.direction,p=Yu.useState(s.value||n||[]),v=(0,tn.A)(p,2),m=v[0],g=v[1],b=Yu.useState([]),y=(0,tn.A)(b,2),w=y[0],A=y[1];Yu.useEffect((function(){"value"in s&&g(s.value||[])}),[s.value]);var k=function(){return i.map((function(e){return"string"==typeof e?{label:e,value:e}:e}))},_=f("checkbox",a),C="".concat(_,"-group"),N=(0,tx.A)(s,["value","disabled"]);i&&i.length>0&&(r=k().map((function(e){return Yu.createElement(DAe,{prefixCls:_,key:e.value.toString(),disabled:"disabled"in e?e.disabled:s.disabled,value:e.value,checked:-1!==m.indexOf(e.value),onChange:e.onChange,className:"".concat(C,"-item"),style:e.style},e.label)})));var O={toggleOption:function(e){var t=m.indexOf(e.value),n=(0,ln.A)(m);-1===t?n.push(e.value):n.splice(t,1),"value"in s||g(n);var r=k();null==c||c(n.filter((function(e){return-1!==w.indexOf(e)})).sort((function(e,t){return r.findIndex((function(t){return t.value===e}))-r.findIndex((function(e){return e.value===t}))})))},value:m,disabled:s.disabled,name:s.name,registerValue:function(e){A((function(t){return[].concat((0,ln.A)(t),[e])}))},cancelValue:function(e){A((function(t){return t.filter((function(t){return t!==e}))}))}},x=nk()(C,(0,Ha.A)({},"".concat(C,"-rtl"),"rtl"===h),l);return Yu.createElement("div",(0,ek.A)({className:x,style:u},N,{ref:t}),Yu.createElement(_Ae.Provider,{value:O},r))},NAe=Yu.forwardRef(CAe);const OAe=Yu.memo(NAe);var xAe=function(e,t){var n,r=e.prefixCls,o=e.className,i=e.children,a=e.indeterminate,l=void 0!==a&&a,u=e.style,c=e.onMouseEnter,s=e.onMouseLeave,d=e.skipGroup,f=void 0!==d&&d,h=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["prefixCls","className","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup"]),p=Yu.useContext(o_),v=p.getPrefixCls,m=p.direction,g=Yu.useContext(_Ae),b=Yu.useRef(h.value);Yu.useEffect((function(){null==g||g.registerValue(h.value),u_("checked"in h||!!g||!("value"in h),"Checkbox","`value` is not a valid prop, do you mean `checked`?")}),[]),Yu.useEffect((function(){if(!f)return h.value!==b.current&&(null==g||g.cancelValue(b.current),null==g||g.registerValue(h.value)),function(){return null==g?void 0:g.cancelValue(h.value)}}),[h.value]);var y=v("checkbox",r),w=(0,ek.A)({},h);g&&!f&&(w.onChange=function(){h.onChange&&h.onChange.apply(h,arguments),g.toggleOption&&g.toggleOption({label:i,value:h.value})},w.name=g.name,w.checked=-1!==g.value.indexOf(h.value),w.disabled=h.disabled||g.disabled);var A=nk()((n={},(0,Ha.A)(n,"".concat(y,"-wrapper"),!0),(0,Ha.A)(n,"".concat(y,"-rtl"),"rtl"===m),(0,Ha.A)(n,"".concat(y,"-wrapper-checked"),w.checked),(0,Ha.A)(n,"".concat(y,"-wrapper-disabled"),w.disabled),n),o),k=nk()((0,Ha.A)({},"".concat(y,"-indeterminate"),l));return Yu.createElement("label",{className:A,style:u,onMouseEnter:c,onMouseLeave:s},Yu.createElement(kAe,(0,ek.A)({},w,{prefixCls:y,className:k,ref:t})),void 0!==i&&Yu.createElement("span",null,i))},EAe=Yu.forwardRef(xAe);EAe.displayName="Checkbox";const DAe=EAe;var PAe=DAe;PAe.Group=OAe,PAe.__ANT_CHECKBOX=!0;const RAe=PAe;function SAe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,TAe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function TAe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(TAe=function(){return!!e})()}var jAe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=SAe(this,t,arguments),Object.defineProperty(e,"_fileInputRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"_cancelListen",{enumerable:!0,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(e,"_handleClick",{enumerable:!0,configurable:!0,writable:!0,value:function(){e._fileInputRef.current?e._fileInputRef.current.click():e.props.onSelect(e.props.data)}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){var e=this,t=function(t){t===e.props.data&&e._handleClick()};this.props.eventEmitter.on("selected",t),this._cancelListen=function(){e.props.eventEmitter.off("selected",t)}}},{key:"componentWillUnmount",value:function(){var e;null===(e=this._cancelListen)||void 0===e||e.call(this)}},{key:"render",value:function(){var e=this.props.data,t=e.achromaticIcon,n=e.icon,r=e.iconfont,o=e.label,i=e.remind,a=void 0!==i&&i,l=e.disabled,u=void 0!==l&&l,c=t||n,s=c||r?Gu().createElement(SC,{type:c,iconfont:r,size:18}):null;return Gu().createElement("div",{"data-testid":this.props["data-testid"],onMouseMove:this.props.onMouseMove,onClick:this._handleClick,className:Uf(this.props.className,u?"ne-ui-disabled":"")},this._renderFileInput(),Gu().createElement("div",{className:"ne-ui-command-menu-item-icon"},s),Gu().createElement("div",{className:Uf("ne-ui-command-menu-item-content",a?"ne-ui-remind":"")},Gu().createElement("div",{className:"ne-ui-command-menu-item-label"},o)))}},{key:"_renderFileInput",value:function(){var e=this,t=this.props.data,n=t.type,r=t.multiple,o=t.accept,i=t.disabled;return"FileItem"!==n||i?null:Gu().createElement("input",{ref:this._fileInputRef,multiple:r,onChange:function(t){e._fileChangeHandler(t)},type:"file",accept:o||"*/*"})}},{key:"_fileChangeHandler",value:function(e){var t=Array.from(e.target.files);e.target.value="",t.length>0&&this.props.onSelect(this.props.data,t)}}])}(Yu.Component);function IAe(e,t){if(Array.isArray(e[0]))return e;for(var n=Math.floor(e.length/t),r=e.length%t-1,o=[],i=0,a=0;i<t;i++){var l=i<=r?n+1:n;o.push(e.slice(a,a+=l))}return o}function BAe(e,t){return!(!LAe(e)||!LAe(t))&&e[0]===t[0]&&e[1]===t[1]}function MAe(e,t,n){var r=t,o=(0,tn.A)(t,2),i=o[0],a=o[1],l=e.filter((function(e){return e.length>0}));switch(n){case"up":a>0?r=[i,a-1]:i>0&&(r=[i-1,l[i-1].length-1]);break;case"down":a<l[i].length-1?r=[i,a+1]:i<l.length-1&&(r=[i+1,0]);break;case"right":i<l.length-1&&(r=[i+1,Math.min(a,l[i+1].length-1)]);break;case"left":i>0&&(r=[i-1,a])}return bt(LAe(r),"framework/uilib/src/command-menu/helper.ts:83"),r}function FAe(e,t){if(!LAe(t))return[0,0];var n=e.filter((function(e){return e.length>0})),r=(0,tn.A)(t,2),o=r[0],i=r[1];return o>=n.length&&(o=n.length-1),i>=n[o].length&&(i=n[o].length-1),[o,i]}function LAe(e){return Array.isArray(e)&&2===e.length&&e[0]>=0&&e[1]>=0}function UAe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,VAe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function VAe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(VAe=function(){return!!e})()}Object.defineProperty(jAe,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{onSelect:function(){}}});var HAe=[0,0],zAe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=UAe(this,t,arguments),Object.defineProperty(e,"_scrollNodeRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"_eventEmitter",{enumerable:!0,configurable:!0,writable:!0,value:new it}),Object.defineProperty(e,"state",{enumerable:!0,configurable:!0,writable:!0,value:{selected:HAe,grids:[]}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.selectEmitter;t&&(sd(this,t,"reset",(function(){e.setState({selected:HAe})})),sd(this,t,"moveDown",(function(){e._selectNextPos("down")})),sd(this,t,"moveUp",(function(){e._selectNextPos("up")})),sd(this,t,"moveLeft",(function(){e._selectNextPos("left")})),sd(this,t,"moveRight",(function(){e._selectNextPos("right")})),sd(this,t,"enter",(function(){var t=e.state,n=t.grids,r=t.selected,o=(0,tn.A)(r,2),i=o[0],a=o[1];e._handleSelect(n[i][a])})))}},{key:"componentWillUnmount",value:function(){this._eventEmitter.removeAllListeners()}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.colNum,r=this.state.grids,o=this._renderColumns(r);return Gu().createElement("div",{className:Uf("ne-ui-command-menu",t,"ne-ui-command-menu-column-".concat(n)),onMouseDown:function(e){return e.preventDefault()}},Gu().createElement("div",{ref:this._scrollNodeRef,className:"ne-ui-command-menu-scrollable"},Gu().createElement("div",{className:"ne-ui-command-menu-content"},o)),Gu().createElement("div",{className:"ne-ui-command-menu-info"},this._renderInfo()))}},{key:"_renderInfo",value:function(){var e=this.props.colNum,t=this.state,n=t.grids,r=t.selected,o=(0,tn.A)(r,2),i=o[0],a=o[1],l=n[i][a],u=l.hotkey,c=l.markdown,s=l.description,d=l.disabled,f=void 0!==d&&d,h=l.remark;return f&&h?h():u&&u.text?Gu().createElement(Gu().Fragment,null,this._renderHotkeyInfo(u.text),e>2&&this._renderMarkdownInfo(c||["-",""])):c?this._renderMarkdownInfo(c):s||void 0}},{key:"_renderHotkeyInfo",value:function(e){var t=e.split("+");return Gu().createElement("div",{className:"ne-ui-command-menu-hotkey"},sc("快捷键")+"：",t.map((function(e){return Gu().createElement("span",{key:e,className:"ne-ui-command-menu-hotkey-keys"},e)})))}},{key:"_renderMarkdownInfo",value:function(e){var t=(0,tn.A)(e,2),n=t[0],r=t[1];return Gu().createElement("div",{className:"ne-ui-command-menu-md"},"Markdown：",Gu().createElement("span",{className:"ne-ui-command-menu-md-keys"},n),Gu().createElement("span",{className:"ne-ui-command-menu-md-trigger"},r))}},{key:"_selectNextPos",value:function(e){var t=this.state,n=t.grids,r=t.selected,o=MAe(n,r,e);BAe(o,r)||(this._scrollTo(o),this.setState({selected:o}))}},{key:"_renderColumns",value:function(e){var t=this;return e.map((function(e,n){return Gu().createElement("div",{className:"ne-ui-command-menu-column",key:"column-".concat(n)},t._renderItems(e,n))}))}},{key:"_renderItems",value:function(e,t){var n=this,r=this.state.selected;return e.map((function(e,o){return Gu().createElement(jAe,{className:Uf("ne-ui-command-menu-item",BAe(r,[t,o])?"ne-ui-selected":""),"data-testid":"command-item-".concat(e.name),data:e,eventEmitter:n._eventEmitter,key:"".concat(e.name,"-").concat(o),onMouseMove:function(){return n._handleMouseMove(t,o)},onSelect:n.props.onSelect})}))}},{key:"_handleMouseMove",value:function(e,t){var n=this.state.selected;e===n[0]&&t===n[1]||this.setState({selected:[e,t]})}},{key:"_handleSelect",value:function(e){e.disabled||this._eventEmitter.emit("selected",e)}},{key:"_scrollTo",value:function(e){var t=this._scrollNodeRef.current;if(t){var n=e[1];t.scrollTop=Math.max(34*n+15-83,0)}}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.commands,r=e.colNum,o=t.selected,i=IAe(n,r);return{grids:i,selected:FAe(i,o)}}}])}(Yu.Component);Object.defineProperty(zAe,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{onSelect:function(){},colNum:4}});const WAe=Yk,qAe={placeholder:"请选择时间",rangePlaceholder:["开始时间","结束时间"]};var $Ae={lang:(0,ek.A)({placeholder:"请选择日期",yearPlaceholder:"请选择年份",quarterPlaceholder:"请选择季度",monthPlaceholder:"请选择月份",weekPlaceholder:"请选择周",rangePlaceholder:["开始日期","结束日期"],rangeYearPlaceholder:["开始年份","结束年份"],rangeMonthPlaceholder:["开始月份","结束月份"],rangeWeekPlaceholder:["开始周","结束周"]},{locale:"zh_CN",today:"今天",now:"此刻",backToToday:"返回今天",ok:"确定",timeSelect:"选择时间",dateSelect:"选择日期",weekSelect:"选择周",clear:"清除",month:"月",year:"年",previousMonth:"上个月 (翻页上键)",nextMonth:"下个月 (翻页下键)",monthSelect:"选择月份",yearSelect:"选择年份",decadeSelect:"选择年代",yearFormat:"YYYY年",dayFormat:"D日",dateFormat:"YYYY年M月D日",dateTimeFormat:"YYYY年M月D日 HH时mm分ss秒",previousYear:"上一年 (Control键加左方向键)",nextYear:"下一年 (Control键加右方向键)",previousDecade:"上一年代",nextDecade:"下一年代",previousCentury:"上一世纪",nextCentury:"下一世纪"}),timePickerLocale:(0,ek.A)({},qAe)};$Ae.lang.ok="确 定";const KAe=$Ae;var YAe="${label}不是一个有效的${type}";const GAe={locale:"zh-cn",Pagination:{items_per_page:"条/页",jump_to:"跳至",jump_to_confirm:"确定",page:"页",prev_page:"上一页",next_page:"下一页",prev_5:"向前 5 页",next_5:"向后 5 页",prev_3:"向前 3 页",next_3:"向后 3 页",page_size:"页码"},DatePicker:KAe,TimePicker:qAe,Calendar:KAe,global:{placeholder:"请选择"},Table:{filterTitle:"筛选",filterConfirm:"确定",filterReset:"重置",filterEmptyText:"无筛选项",selectAll:"全选当页",selectInvert:"反选当页",selectNone:"清空所有",selectionAll:"全选所有",sortTitle:"排序",expand:"展开行",collapse:"关闭行",triggerDesc:"点击降序",triggerAsc:"点击升序",cancelSort:"取消排序"},Modal:{okText:"确定",cancelText:"取消",justOkText:"知道了"},Popconfirm:{cancelText:"取消",okText:"确定"},Transfer:{searchPlaceholder:"请输入搜索内容",itemUnit:"项",itemsUnit:"项",remove:"删除",selectCurrent:"全选当页",removeCurrent:"删除当页",selectAll:"全选所有",removeAll:"删除全部",selectInvert:"反选当页"},Upload:{uploading:"文件上传中",removeFile:"删除文件",uploadError:"上传错误",previewFile:"预览文件",downloadFile:"下载文件"},Empty:{description:"暂无数据"},Icon:{icon:"图标"},Text:{edit:"编辑",copy:"复制",copied:"复制成功",expand:"展开"},PageHeader:{back:"返回"},Form:{optional:"（可选）",defaultValidateMessages:{default:"字段验证错误${label}",required:"请输入${label}",enum:"${label}必须是其中一个[${enum}]",whitespace:"${label}不能为空字符",date:{format:"${label}日期格式无效",parse:"${label}不能转换为日期",invalid:"${label}是一个无效日期"},types:{string:YAe,method:YAe,array:YAe,object:YAe,number:YAe,date:YAe,boolean:YAe,integer:YAe,float:YAe,regexp:YAe,email:YAe,url:YAe,hex:YAe},string:{len:"${label}须为${len}个字符",min:"${label}最少${min}个字符",max:"${label}最多${max}个字符",range:"${label}须在${min}-${max}字符之间"},number:{len:"${label}必须等于${len}",min:"${label}最小值为${min}",max:"${label}最大值为${max}",range:"${label}须在${min}-${max}之间"},array:{len:"须为${len}个${label}",min:"最少${min}个${label}",max:"最多${max}个${label}",range:"${label}数量须在${min}-${max}之间"},pattern:{mismatch:"${label}与模式不匹配${pattern}"}}},Image:{preview:"预览"}};var JAe=new RegExp("^(".concat(Vx.join("|"),")(-inverse)?$")),XAe=new RegExp("^(".concat(Ux.join("|"),")$")),QAe=function(e,t){var n,r=e.prefixCls,o=e.className,i=e.style,a=e.children,l=e.icon,u=e.color,c=e.onClose,s=e.closeIcon,d=e.closable,f=void 0!==d&&d,h=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["prefixCls","className","style","children","icon","color","onClose","closeIcon","closable"]),p=Yu.useContext(o_),v=p.getPrefixCls,m=p.direction,g=Yu.useState(!0),b=(0,tn.A)(g,2),y=b[0],w=b[1];Yu.useEffect((function(){"visible"in h&&w(h.visible)}),[h.visible]);var A=function(){return!!u&&(JAe.test(u)||XAe.test(u))},k=(0,ek.A)({backgroundColor:u&&!A()?u:void 0},i),_=A(),C=v("tag",r),N=nk()(C,(n={},(0,Ha.A)(n,"".concat(C,"-").concat(u),_),(0,Ha.A)(n,"".concat(C,"-has-color"),u&&!_),(0,Ha.A)(n,"".concat(C,"-hidden"),!y),(0,Ha.A)(n,"".concat(C,"-rtl"),"rtl"===m),n),o),O=function(e){e.stopPropagation(),null==c||c(e),e.defaultPrevented||"visible"in h||w(!1)},x="onClick"in h||a&&"a"===a.type,E=(0,tx.A)(h,["visible"]),D=l||null,P=D?Yu.createElement(Yu.Fragment,null,D,Yu.createElement("span",null,a)):a,R=Yu.createElement("span",(0,ek.A)({},E,{ref:t,className:N,style:k}),P,f?s?Yu.createElement("span",{className:"".concat(C,"-close-icon"),onClick:O},s):Yu.createElement(y_,{className:"".concat(C,"-close-icon"),onClick:O}):null);return x?Yu.createElement(sx,null,R):R},ZAe=Yu.forwardRef(QAe);ZAe.displayName="Tag",ZAe.CheckableTag=function(e){var t,n=e.prefixCls,r=e.className,o=e.checked,i=e.onChange,a=e.onClick,l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["prefixCls","className","checked","onChange","onClick"]),u=(0,Yu.useContext(o_).getPrefixCls)("tag",n),c=nk()(u,(t={},(0,Ha.A)(t,"".concat(u,"-checkable"),!0),(0,Ha.A)(t,"".concat(u,"-checkable-checked"),o),t),r);return Yu.createElement("span",(0,ek.A)({},l,{className:c,onClick:function(e){null==i||i(!o),null==a||a(e)}}))};const eke=ZAe,tke={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V460h656v380zM184 392V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v136H184z"}}]},name:"calendar",theme:"outlined"};var nke=function(e,t){return Yu.createElement(Ek,(0,ok.A)((0,ok.A)({},e),{},{ref:t,icon:tke}))};const rke=Yu.forwardRef(nke),oke={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"}}]},name:"clock-circle",theme:"outlined"};var ike=function(e,t){return Yu.createElement(Ek,(0,ok.A)((0,ok.A)({},e),{},{ref:t,icon:oke}))};const ake=Yu.forwardRef(ike),lke=Yu.createContext({});var uke={visibility:"hidden"};const cke=function(e){var t=e.prefixCls,n=e.prevIcon,r=void 0===n?"‹":n,o=e.nextIcon,i=void 0===o?"›":o,a=e.superPrevIcon,l=void 0===a?"«":a,u=e.superNextIcon,c=void 0===u?"»":u,s=e.onSuperPrev,d=e.onSuperNext,f=e.onPrev,h=e.onNext,p=e.children,v=Yu.useContext(lke),m=v.hideNextBtn,g=v.hidePrevBtn;return Yu.createElement("div",{className:t},s&&Yu.createElement("button",{type:"button",onClick:s,tabIndex:-1,className:"".concat(t,"-super-prev-btn"),style:g?uke:{}},l),f&&Yu.createElement("button",{type:"button",onClick:f,tabIndex:-1,className:"".concat(t,"-prev-btn"),style:g?uke:{}},r),Yu.createElement("div",{className:"".concat(t,"-view")},p),h&&Yu.createElement("button",{type:"button",onClick:h,tabIndex:-1,className:"".concat(t,"-next-btn"),style:m?uke:{}},i),d&&Yu.createElement("button",{type:"button",onClick:d,tabIndex:-1,className:"".concat(t,"-super-next-btn"),style:m?uke:{}},c))},ske=function(e){var t=e.prefixCls,n=e.generateConfig,r=e.viewDate,o=e.onPrevDecades,i=e.onNextDecades;if(Yu.useContext(lke).hideHeader)return null;var a="".concat(t,"-header"),l=n.getYear(r),u=Math.floor(l/Oke)*Oke,c=u+Oke-1;return Yu.createElement(cke,(0,ek.A)({},e,{prefixCls:a,onSuperPrev:o,onSuperNext:i}),u,"-",c)};function dke(e,t,n,r,o){var i=e.setHour(t,n);return i=e.setMinute(i,r),e.setSecond(i,o)}function fke(e,t,n){if(!n)return t;var r=t;return r=e.setHour(r,e.getHour(n)),r=e.setMinute(r,e.getMinute(n)),e.setSecond(r,e.getSecond(n))}function hke(e,t){var n=e.getYear(t),r=e.getMonth(t)+1,o=e.getEndDate(e.getFixedDate("".concat(n,"-").concat(r,"-01"))),i=e.getDate(o),a=r<10?"0".concat(r):"".concat(r);return"".concat(n,"-").concat(a,"-").concat(i)}function pke(e){for(var t=e.prefixCls,n=e.disabledDate,r=e.onSelect,o=e.picker,i=e.rowNum,a=e.colNum,l=e.prefixColumn,u=e.rowClassName,c=e.baseDate,s=e.getCellClassName,d=e.getCellText,f=e.getCellNode,h=e.getCellDate,p=e.generateConfig,v=e.titleCell,m=e.headerCells,g=Yu.useContext(lke),b=g.onDateMouseEnter,y=g.onDateMouseLeave,w=g.mode,A="".concat(t,"-cell"),k=[],_=0;_<i;_+=1){for(var C=[],N=void 0,O=function(e){var t,i=h(c,_*a+e),u=Uke({cellDate:i,mode:w,disabledDate:n,generateConfig:p});0===e&&(N=i,l&&C.push(l(N)));var m=v&&v(i);C.push(Yu.createElement("td",{key:e,title:m,className:nk()(A,(0,ok.A)((t={},(0,Ha.A)(t,"".concat(A,"-disabled"),u),(0,Ha.A)(t,"".concat(A,"-start"),1===d(i)||"year"===o&&Number(m)%10==0),(0,Ha.A)(t,"".concat(A,"-end"),m===hke(p,i)||"year"===o&&Number(m)%10==9),t),s(i))),onClick:function(){u||r(i)},onMouseEnter:function(){!u&&b&&b(i)},onMouseLeave:function(){!u&&y&&y(i)}},f?f(i):Yu.createElement("div",{className:"".concat(A,"-inner")},d(i))))},x=0;x<a;x+=1)O(x);k.push(Yu.createElement("tr",{key:_,className:u&&u(N)},C))}return Yu.createElement("div",{className:"".concat(t,"-body")},Yu.createElement("table",{className:"".concat(t,"-content")},m&&Yu.createElement("thead",null,Yu.createElement("tr",null,m)),Yu.createElement("tbody",null,k)))}const vke=function(e){var t=Nke-1,n=e.prefixCls,r=e.viewDate,o=e.generateConfig,i="".concat(n,"-cell"),a=o.getYear(r),l=Math.floor(a/Nke)*Nke,u=Math.floor(a/Oke)*Oke,c=u+Oke-1,s=o.setYear(r,u-Math.ceil((12*Nke-Oke)/2));return Yu.createElement(pke,(0,ek.A)({},e,{rowNum:4,colNum:3,baseDate:s,getCellText:function(e){var n=o.getYear(e);return"".concat(n,"-").concat(n+t)},getCellClassName:function(e){var n,r=o.getYear(e),a=r+t;return n={},(0,Ha.A)(n,"".concat(i,"-in-view"),u<=r&&a<=c),(0,Ha.A)(n,"".concat(i,"-selected"),r===l),n},getCellDate:function(e,t){return o.addYear(e,t*Nke)}}))};var mke=new Map;function gke(e,t,n){if(mke.get(e)&&cancelAnimationFrame(mke.get(e)),n<=0)mke.set(e,requestAnimationFrame((function(){e.scrollTop=t})));else{var r=(t-e.scrollTop)/n*10;mke.set(e,requestAnimationFrame((function(){e.scrollTop+=r,e.scrollTop!==t&&gke(e,t,n-10)})))}}function bke(e,t){var n=t.onLeftRight,r=t.onCtrlLeftRight,o=t.onUpDown,i=t.onPageUpDown,a=t.onEnter,l=e.which,u=e.ctrlKey,c=e.metaKey;switch(l){case jE.A.LEFT:if(u||c){if(r)return r(-1),!0}else if(n)return n(-1),!0;break;case jE.A.RIGHT:if(u||c){if(r)return r(1),!0}else if(n)return n(1),!0;break;case jE.A.UP:if(o)return o(-1),!0;break;case jE.A.DOWN:if(o)return o(1),!0;break;case jE.A.PAGE_UP:if(i)return i(-1),!0;break;case jE.A.PAGE_DOWN:if(i)return i(1),!0;break;case jE.A.ENTER:if(a)return a(),!0}return!1}function yke(e,t,n,r){var o=e;if(!o)switch(t){case"time":o=r?"hh:mm:ss a":"HH:mm:ss";break;case"week":o="gggg-wo";break;case"month":o="YYYY-MM";break;case"quarter":o="YYYY-[Q]Q";break;case"year":o="YYYY";break;default:o=n?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD"}return o}function wke(e,t,n){var r="time"===e?8:10,o="function"==typeof t?t(n.getNow()).length:t.length;return Math.max(r,o)+2}var Ake=null,kke=new Set,_ke={year:function(e){return"month"===e||"date"===e?"year":e},month:function(e){return"date"===e?"month":e},quarter:function(e){return"month"===e||"date"===e?"quarter":e},week:function(e){return"date"===e?"week":e},time:null,date:null};function Cke(e,t){return e.some((function(e){return e&&e.contains(t)}))}var Nke=10,Oke=10*Nke;const xke=function(e){var t=e.prefixCls,n=e.onViewDateChange,r=e.generateConfig,o=e.viewDate,i=e.operationRef,a=e.onSelect,l=e.onPanelChange,u="".concat(t,"-decade-panel");i.current={onKeyDown:function(e){return bke(e,{onLeftRight:function(e){a(r.addYear(o,e*Nke),"key")},onCtrlLeftRight:function(e){a(r.addYear(o,e*Oke),"key")},onUpDown:function(e){a(r.addYear(o,e*Nke*3),"key")},onEnter:function(){l("year",o)}})}};var c=function(e){var t=r.addYear(o,e*Oke);n(t),l(null,t)};return Yu.createElement("div",{className:u},Yu.createElement(ske,(0,ek.A)({},e,{prefixCls:t,onPrevDecades:function(){c(-1)},onNextDecades:function(){c(1)}})),Yu.createElement(vke,(0,ek.A)({},e,{prefixCls:t,onSelect:function(e){a(e,"mouse"),l("year",e)}})))};function Eke(e,t){return!e&&!t||!(!e||!t)&&void 0}function Dke(e,t,n){var r=Eke(t,n);return"boolean"==typeof r?r:e.getYear(t)===e.getYear(n)}function Pke(e,t){return Math.floor(e.getMonth(t)/3)+1}function Rke(e,t,n){var r=Eke(t,n);return"boolean"==typeof r?r:Dke(e,t,n)&&Pke(e,t)===Pke(e,n)}function Ske(e,t,n){var r=Eke(t,n);return"boolean"==typeof r?r:Dke(e,t,n)&&e.getMonth(t)===e.getMonth(n)}function Tke(e,t,n){var r=Eke(t,n);return"boolean"==typeof r?r:e.getYear(t)===e.getYear(n)&&e.getMonth(t)===e.getMonth(n)&&e.getDate(t)===e.getDate(n)}function jke(e,t,n,r){var o=Eke(n,r);return"boolean"==typeof o?o:e.locale.getWeek(t,n)===e.locale.getWeek(t,r)}function Ike(e,t,n){return Tke(e,t,n)&&function(e,t,n){var r=Eke(t,n);return"boolean"==typeof r?r:e.getHour(t)===e.getHour(n)&&e.getMinute(t)===e.getMinute(n)&&e.getSecond(t)===e.getSecond(n)}(e,t,n)}function Bke(e,t,n,r){return!!(t&&n&&r)&&!Tke(e,t,r)&&!Tke(e,n,r)&&e.isAfter(r,t)&&e.isAfter(n,r)}function Mke(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;switch(t){case"year":return n.addYear(e,10*r);case"quarter":case"month":return n.addYear(e,r);default:return n.addMonth(e,r)}}function Fke(e,t){var n=t.generateConfig,r=t.locale,o=t.format;return"function"==typeof o?o(e):n.locale.format(r.locale,e,o)}function Lke(e,t){var n=t.generateConfig,r=t.locale,o=t.formatList;return e&&"function"!=typeof o[0]?n.locale.parse(r.locale,e,o):null}function Uke(e){var t=e.cellDate,n=e.mode,r=e.disabledDate,o=e.generateConfig;if(!r)return!1;var i=function(e,n,i){for(var a=n;a<=i;){var l=void 0;switch(e){case"date":if(l=o.setDate(t,a),!r(l))return!1;break;case"month":if(!Uke({cellDate:l=o.setMonth(t,a),mode:"month",generateConfig:o,disabledDate:r}))return!1;break;case"year":if(!Uke({cellDate:l=o.setYear(t,a),mode:"year",generateConfig:o,disabledDate:r}))return!1}a+=1}return!0};switch(n){case"date":case"week":return r(t);case"month":return i("date",1,o.getDate(o.getEndDate(t)));case"quarter":var a=3*Math.floor(o.getMonth(t)/3);return i("month",a,a+2);case"year":return i("month",0,11);case"decade":var l=o.getYear(t),u=Math.floor(l/Nke)*Nke;return i("year",u,u+Nke-1)}}const Vke=function(e){if(Yu.useContext(lke).hideHeader)return null;var t=e.prefixCls,n=e.generateConfig,r=e.locale,o=e.value,i=e.format,a="".concat(t,"-header");return Yu.createElement(cke,{prefixCls:a},o?Fke(o,{locale:r,format:i,generateConfig:n}):" ")},Hke=function(e){var t=e.prefixCls,n=e.units,r=e.onSelect,o=e.value,i=e.active,a=e.hideDisabledOptions,l="".concat(t,"-cell"),u=Yu.useContext(lke).open,c=(0,Yu.useRef)(null),s=(0,Yu.useRef)(new Map),d=(0,Yu.useRef)();return(0,Yu.useLayoutEffect)((function(){var e=s.current.get(o);e&&!1!==u&&gke(c.current,e.offsetTop,120)}),[o]),(0,Yu.useLayoutEffect)((function(){if(u){var e=s.current.get(o);e&&(d.current=function(t,n){var r;return function n(){XN(t)?gke(c.current,e.offsetTop,0):r=(0,BC.A)((function(){n()}))}(),function(){BC.A.cancel(r)}}(e))}return function(){var e;null===(e=d.current)||void 0===e||e.call(d)}}),[u]),Yu.createElement("ul",{className:nk()("".concat(t,"-column"),(0,Ha.A)({},"".concat(t,"-column-active"),i)),ref:c,style:{position:"relative"}},n.map((function(e){var t;return a&&e.disabled?null:Yu.createElement("li",{key:e.value,ref:function(t){s.current.set(e.value,t)},className:nk()(l,(t={},(0,Ha.A)(t,"".concat(l,"-disabled"),e.disabled),(0,Ha.A)(t,"".concat(l,"-selected"),o===e.value),t)),onClick:function(){e.disabled||r(e.value)}},Yu.createElement("div",{className:"".concat(l,"-inner")},e.label))})))};function zke(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0",r=String(e);r.length<t;)r="".concat(n).concat(e);return r}function Wke(e){return null==e?[]:Array.isArray(e)?e:[e]}function qke(e){var t={};return Object.keys(e).forEach((function(n){"data-"!==n.substr(0,5)&&"aria-"!==n.substr(0,5)&&"role"!==n&&"name"!==n||"data-__"===n.substr(0,7)||(t[n]=e[n])})),t}function $ke(e,t){return e?e[t]:null}function Kke(e,t,n){var r=[$ke(e,0),$ke(e,1)];return r[n]="function"==typeof t?t(r[n]):t,r[0]||r[1]?r:null}function Yke(e,t){if(e.length!==t.length)return!0;for(var n=0;n<e.length;n+=1)if(e[n].disabled!==t[n].disabled)return!0;return!1}function Gke(e,t,n,r){for(var o=[],i=e;i<=t;i+=n)o.push({label:zke(i,2),value:i,disabled:(r||[]).includes(i)});return o}const Jke=function(e){var t,n=e.generateConfig,r=e.prefixCls,o=e.operationRef,i=e.activeColumnIndex,a=e.value,l=e.showHour,u=e.showMinute,c=e.showSecond,s=e.use12Hours,d=e.hourStep,f=void 0===d?1:d,h=e.minuteStep,p=void 0===h?1:h,v=e.secondStep,m=void 0===v?1:v,g=e.disabledHours,b=e.disabledMinutes,y=e.disabledSeconds,w=e.hideDisabledOptions,A=e.onSelect,k=[],_="".concat(r,"-content"),C="".concat(r,"-time-panel"),N=a?n.getHour(a):-1,O=N,x=a?n.getMinute(a):-1,E=a?n.getSecond(a):-1,D=function(e,t,r,o){var i=a||n.getNow(),l=Math.max(0,t),u=Math.max(0,r),c=Math.max(0,o);return dke(n,i,s&&e?l+12:l,u,c)},P=Gke(0,23,f,g&&g()),R=(0,l_.A)((function(){return P}),P,Yke);s&&(t=O>=12,O%=12);var S=Yu.useMemo((function(){if(!s)return[!1,!1];var e=[!0,!0];return R.forEach((function(t){var n=t.disabled,r=t.value;n||(r>=12?e[1]=!1:e[0]=!1)})),e}),[s,R]),T=(0,tn.A)(S,2),j=T[0],I=T[1],B=Yu.useMemo((function(){return s?R.filter(t?function(e){return e.value>=12}:function(e){return e.value<12}).map((function(e){var t=e.value%12,n=0===t?"12":zke(t,2);return(0,ok.A)((0,ok.A)({},e),{},{label:n,value:t})})):R}),[s,t,R]),M=Gke(0,59,p,b&&b(N)),F=Gke(0,59,m,y&&y(N,x));function L(e,t,n,r,o){!1!==e&&k.push({node:Yu.cloneElement(t,{prefixCls:C,value:n,active:i===k.length,onSelect:o,units:r,hideDisabledOptions:w}),onSelect:o,value:n,units:r})}o.current={onUpDown:function(e){var t=k[i];if(t)for(var n=t.units.findIndex((function(e){return e.value===t.value})),r=t.units.length,o=1;o<r;o+=1){var a=t.units[(n+e*o+r)%r];if(!0!==a.disabled){t.onSelect(a.value);break}}}},L(l,Yu.createElement(Hke,{key:"hour"}),O,B,(function(e){A(D(t,e,x,E),"mouse")})),L(u,Yu.createElement(Hke,{key:"minute"}),x,M,(function(e){A(D(t,O,e,E),"mouse")})),L(c,Yu.createElement(Hke,{key:"second"}),E,F,(function(e){A(D(t,O,x,e),"mouse")}));var U=-1;return"boolean"==typeof t&&(U=t?1:0),L(!0===s,Yu.createElement(Hke,{key:"12hours"}),U,[{label:"AM",value:0,disabled:j},{label:"PM",value:1,disabled:I}],(function(e){A(D(!!e,O,x,E),"mouse")})),Yu.createElement("div",{className:_},k.map((function(e){return e.node})))},Xke=function(e){var t=e.generateConfig,n=e.format,r=void 0===n?"HH:mm:ss":n,o=e.prefixCls,i=e.active,a=e.operationRef,l=e.showHour,u=e.showMinute,c=e.showSecond,s=e.use12Hours,d=void 0!==s&&s,f=e.onSelect,h=e.value,p="".concat(o,"-time-panel"),v=Yu.useRef(),m=Yu.useState(-1),g=(0,tn.A)(m,2),b=g[0],y=g[1],w=[l,u,c,d].filter((function(e){return!1!==e})).length;return a.current={onKeyDown:function(e){return bke(e,{onLeftRight:function(e){y((b+e+w)%w)},onUpDown:function(e){-1===b?y(0):v.current&&v.current.onUpDown(e)},onEnter:function(){f(h||t.getNow(),"key"),y(-1)}})},onBlur:function(){y(-1)}},Yu.createElement("div",{className:nk()(p,(0,Ha.A)({},"".concat(p,"-active"),i))},Yu.createElement(Vke,(0,ek.A)({},e,{format:r,prefixCls:o})),Yu.createElement(Jke,(0,ek.A)({},e,{prefixCls:o,activeColumnIndex:b,operationRef:v})))},Qke=Yu.createContext({});function Zke(e){var t=e.cellPrefixCls,n=e.generateConfig,r=e.rangedValue,o=e.hoverRangedValue,i=e.isInView,a=e.isSameCell,l=e.offsetCell,u=e.today,c=e.value;return function(e){var s,d=l(e,-1),f=l(e,1),h=$ke(r,0),p=$ke(r,1),v=$ke(o,0),m=$ke(o,1),g=Bke(n,v,m,e);function b(e){return a(h,e)}function y(e){return a(p,e)}var w=a(v,e),A=a(m,e),k=(g||A)&&(!i(d)||y(d)),_=(g||w)&&(!i(f)||b(f));return s={},(0,Ha.A)(s,"".concat(t,"-in-view"),i(e)),(0,Ha.A)(s,"".concat(t,"-in-range"),Bke(n,h,p,e)),(0,Ha.A)(s,"".concat(t,"-range-start"),b(e)),(0,Ha.A)(s,"".concat(t,"-range-end"),y(e)),(0,Ha.A)(s,"".concat(t,"-range-start-single"),b(e)&&!p),(0,Ha.A)(s,"".concat(t,"-range-end-single"),y(e)&&!h),(0,Ha.A)(s,"".concat(t,"-range-start-near-hover"),b(e)&&(a(d,v)||Bke(n,v,m,d))),(0,Ha.A)(s,"".concat(t,"-range-end-near-hover"),y(e)&&(a(f,m)||Bke(n,v,m,f))),(0,Ha.A)(s,"".concat(t,"-range-hover"),g),(0,Ha.A)(s,"".concat(t,"-range-hover-start"),w),(0,Ha.A)(s,"".concat(t,"-range-hover-end"),A),(0,Ha.A)(s,"".concat(t,"-range-hover-edge-start"),k),(0,Ha.A)(s,"".concat(t,"-range-hover-edge-end"),_),(0,Ha.A)(s,"".concat(t,"-range-hover-edge-start-near-range"),k&&a(d,p)),(0,Ha.A)(s,"".concat(t,"-range-hover-edge-end-near-range"),_&&a(f,h)),(0,Ha.A)(s,"".concat(t,"-today"),a(u,e)),(0,Ha.A)(s,"".concat(t,"-selected"),a(c,e)),s}}const e_e=function(e){var t=e.prefixCls,n=e.generateConfig,r=e.prefixColumn,o=e.locale,i=e.rowCount,a=e.viewDate,l=e.value,u=e.dateRender,c=Yu.useContext(Qke),s=c.rangedValue,d=c.hoverRangedValue,f=function(e,t,n){var r=t.locale.getWeekFirstDay(e),o=t.setDate(n,1),i=t.getWeekDay(o),a=t.addDate(o,r-i);return t.getMonth(a)===t.getMonth(n)&&t.getDate(a)>1&&(a=t.addDate(a,-7)),a}(o.locale,n,a),h="".concat(t,"-cell"),p=n.locale.getWeekFirstDay(o.locale),v=n.getNow(),m=[],g=o.shortWeekDays||(n.locale.getShortWeekDays?n.locale.getShortWeekDays(o.locale):[]);r&&m.push(Yu.createElement("th",{key:"empty","aria-label":"empty cell"}));for(var b=0;b<7;b+=1)m.push(Yu.createElement("th",{key:b},g[(b+p)%7]));var y=Zke({cellPrefixCls:h,today:v,value:l,generateConfig:n,rangedValue:r?null:s,hoverRangedValue:r?null:d,isSameCell:function(e,t){return Tke(n,e,t)},isInView:function(e){return Ske(n,e,a)},offsetCell:function(e,t){return n.addDate(e,t)}}),w=u?function(e){return u(e,v)}:void 0;return Yu.createElement(pke,(0,ek.A)({},e,{rowNum:i,colNum:7,baseDate:f,getCellNode:w,getCellText:n.getDate,getCellClassName:y,getCellDate:n.addDate,titleCell:function(e){return Fke(e,{locale:o,format:"YYYY-MM-DD",generateConfig:n})},headerCells:m}))},t_e=function(e){var t=e.prefixCls,n=e.generateConfig,r=e.locale,o=e.viewDate,i=e.onNextMonth,a=e.onPrevMonth,l=e.onNextYear,u=e.onPrevYear,c=e.onYearClick,s=e.onMonthClick;if(Yu.useContext(lke).hideHeader)return null;var d="".concat(t,"-header"),f=r.shortMonths||(n.locale.getShortMonths?n.locale.getShortMonths(r.locale):[]),h=n.getMonth(o),p=Yu.createElement("button",{type:"button",key:"year",onClick:c,tabIndex:-1,className:"".concat(t,"-year-btn")},Fke(o,{locale:r,format:r.yearFormat,generateConfig:n})),v=Yu.createElement("button",{type:"button",key:"month",onClick:s,tabIndex:-1,className:"".concat(t,"-month-btn")},r.monthFormat?Fke(o,{locale:r,format:r.monthFormat,generateConfig:n}):f[h]),m=r.monthBeforeYear?[v,p]:[p,v];return Yu.createElement(cke,(0,ek.A)({},e,{prefixCls:d,onSuperPrev:u,onPrev:a,onNext:i,onSuperNext:l}),m)},n_e=function(e){var t=e.prefixCls,n=e.panelName,r=void 0===n?"date":n,o=e.keyboardConfig,i=e.active,a=e.operationRef,l=e.generateConfig,u=e.value,c=e.viewDate,s=e.onViewDateChange,d=e.onPanelChange,f=e.onSelect,h="".concat(t,"-").concat(r,"-panel");a.current={onKeyDown:function(e){return bke(e,(0,ok.A)({onLeftRight:function(e){f(l.addDate(u||c,e),"key")},onCtrlLeftRight:function(e){f(l.addYear(u||c,e),"key")},onUpDown:function(e){f(l.addDate(u||c,7*e),"key")},onPageUpDown:function(e){f(l.addMonth(u||c,e),"key")}},o))}};var p=function(e){var t=l.addYear(c,e);s(t),d(null,t)},v=function(e){var t=l.addMonth(c,e);s(t),d(null,t)};return Yu.createElement("div",{className:nk()(h,(0,Ha.A)({},"".concat(h,"-active"),i))},Yu.createElement(t_e,(0,ek.A)({},e,{prefixCls:t,value:u,viewDate:c,onPrevYear:function(){p(-1)},onNextYear:function(){p(1)},onPrevMonth:function(){v(-1)},onNextMonth:function(){v(1)},onMonthClick:function(){d("month",c)},onYearClick:function(){d("year",c)}})),Yu.createElement(e_e,(0,ek.A)({},e,{onSelect:function(e){return f(e,"mouse")},prefixCls:t,value:u,viewDate:c,rowCount:6})))};var r_e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}("date","time");const o_e=function(e){var t=e.prefixCls,n=e.operationRef,r=e.generateConfig,o=e.value,i=e.defaultValue,a=e.disabledTime,l=e.showTime,u=e.onSelect,c="".concat(t,"-datetime-panel"),s=Yu.useState(null),d=(0,tn.A)(s,2),f=d[0],h=d[1],p=Yu.useRef({}),v=Yu.useRef({}),m="object"===(0,Gn.A)(l)?(0,ok.A)({},l):{},g=function(e){v.current.onBlur&&v.current.onBlur(e),h(null)};n.current={onKeyDown:function(e){if(e.which===jE.A.TAB){var t=(n=e.shiftKey?-1:1,r=r_e.indexOf(f)+n,r_e[r]||null);return h(t),t&&e.preventDefault(),!0}var n,r;if(f){var o="date"===f?p:v;return o.current&&o.current.onKeyDown&&o.current.onKeyDown(e),!0}return!![jE.A.LEFT,jE.A.RIGHT,jE.A.UP,jE.A.DOWN].includes(e.which)&&(h("date"),!0)},onBlur:g,onClose:g};var b=function(e,t){var n=e;"date"===t&&!o&&m.defaultValue?(n=r.setHour(n,r.getHour(m.defaultValue)),n=r.setMinute(n,r.getMinute(m.defaultValue)),n=r.setSecond(n,r.getSecond(m.defaultValue))):"time"===t&&!o&&i&&(n=r.setYear(n,r.getYear(i)),n=r.setMonth(n,r.getMonth(i)),n=r.setDate(n,r.getDate(i))),u&&u(n,"mouse")},y=a?a(o||null):{};return Yu.createElement("div",{className:nk()(c,(0,Ha.A)({},"".concat(c,"-active"),f))},Yu.createElement(n_e,(0,ek.A)({},e,{operationRef:p,active:"date"===f,onSelect:function(e){b(fke(r,e,l&&"object"===(0,Gn.A)(l)?l.defaultValue:null),"date")}})),Yu.createElement(Xke,(0,ek.A)({},e,{format:void 0},m,y,{defaultValue:void 0,operationRef:v,active:"time"===f,onSelect:function(e){b(e,"time")}})))},i_e=function(e){var t=e.prefixCls,n=e.generateConfig,r=e.locale,o=e.value,i="".concat(t,"-cell"),a="".concat(t,"-week-panel-row");return Yu.createElement(n_e,(0,ek.A)({},e,{panelName:"week",prefixColumn:function(e){return Yu.createElement("td",{key:"week",className:nk()(i,"".concat(i,"-week"))},n.locale.getWeek(r.locale,e))},rowClassName:function(e){return nk()(a,(0,Ha.A)({},"".concat(a,"-selected"),jke(n,r.locale,o,e)))},keyboardConfig:{onLeftRight:null}}))},a_e=function(e){var t=e.prefixCls,n=e.generateConfig,r=e.locale,o=e.viewDate,i=e.onNextYear,a=e.onPrevYear,l=e.onYearClick;if(Yu.useContext(lke).hideHeader)return null;var u="".concat(t,"-header");return Yu.createElement(cke,(0,ek.A)({},e,{prefixCls:u,onSuperPrev:a,onSuperNext:i}),Yu.createElement("button",{type:"button",onClick:l,className:"".concat(t,"-year-btn")},Fke(o,{locale:r,format:r.yearFormat,generateConfig:n})))},l_e=function(e){var t=e.prefixCls,n=e.locale,r=e.value,o=e.viewDate,i=e.generateConfig,a=e.monthCellRender,l=Yu.useContext(Qke),u=l.rangedValue,c=l.hoverRangedValue,s=Zke({cellPrefixCls:"".concat(t,"-cell"),value:r,generateConfig:i,rangedValue:u,hoverRangedValue:c,isSameCell:function(e,t){return Ske(i,e,t)},isInView:function(){return!0},offsetCell:function(e,t){return i.addMonth(e,t)}}),d=n.shortMonths||(i.locale.getShortMonths?i.locale.getShortMonths(n.locale):[]),f=i.setMonth(o,0),h=a?function(e){return a(e,n)}:void 0;return Yu.createElement(pke,(0,ek.A)({},e,{rowNum:4,colNum:3,baseDate:f,getCellNode:h,getCellText:function(e){return n.monthFormat?Fke(e,{locale:n,format:n.monthFormat,generateConfig:i}):d[i.getMonth(e)]},getCellClassName:s,getCellDate:i.addMonth,titleCell:function(e){return Fke(e,{locale:n,format:"YYYY-MM",generateConfig:i})}}))},u_e=function(e){var t=e.prefixCls,n=e.operationRef,r=e.onViewDateChange,o=e.generateConfig,i=e.value,a=e.viewDate,l=e.onPanelChange,u=e.onSelect,c="".concat(t,"-month-panel");n.current={onKeyDown:function(e){return bke(e,{onLeftRight:function(e){u(o.addMonth(i||a,e),"key")},onCtrlLeftRight:function(e){u(o.addYear(i||a,e),"key")},onUpDown:function(e){u(o.addMonth(i||a,3*e),"key")},onEnter:function(){l("date",i||a)}})}};var s=function(e){var t=o.addYear(a,e);r(t),l(null,t)};return Yu.createElement("div",{className:c},Yu.createElement(a_e,(0,ek.A)({},e,{prefixCls:t,onPrevYear:function(){s(-1)},onNextYear:function(){s(1)},onYearClick:function(){l("year",a)}})),Yu.createElement(l_e,(0,ek.A)({},e,{prefixCls:t,onSelect:function(e){u(e,"mouse"),l("date",e)}})))},c_e=function(e){var t=e.prefixCls,n=e.generateConfig,r=e.locale,o=e.viewDate,i=e.onNextYear,a=e.onPrevYear,l=e.onYearClick;if(Yu.useContext(lke).hideHeader)return null;var u="".concat(t,"-header");return Yu.createElement(cke,(0,ek.A)({},e,{prefixCls:u,onSuperPrev:a,onSuperNext:i}),Yu.createElement("button",{type:"button",onClick:l,className:"".concat(t,"-year-btn")},Fke(o,{locale:r,format:r.yearFormat,generateConfig:n})))},s_e=function(e){var t=e.prefixCls,n=e.locale,r=e.value,o=e.viewDate,i=e.generateConfig,a=Yu.useContext(Qke),l=a.rangedValue,u=a.hoverRangedValue,c=Zke({cellPrefixCls:"".concat(t,"-cell"),value:r,generateConfig:i,rangedValue:l,hoverRangedValue:u,isSameCell:function(e,t){return Rke(i,e,t)},isInView:function(){return!0},offsetCell:function(e,t){return i.addMonth(e,3*t)}}),s=i.setDate(i.setMonth(o,0),1);return Yu.createElement(pke,(0,ek.A)({},e,{rowNum:1,colNum:4,baseDate:s,getCellText:function(e){return Fke(e,{locale:n,format:n.quarterFormat||"[Q]Q",generateConfig:i})},getCellClassName:c,getCellDate:function(e,t){return i.addMonth(e,3*t)},titleCell:function(e){return Fke(e,{locale:n,format:"YYYY-[Q]Q",generateConfig:i})}}))},d_e=function(e){var t=e.prefixCls,n=e.operationRef,r=e.onViewDateChange,o=e.generateConfig,i=e.value,a=e.viewDate,l=e.onPanelChange,u=e.onSelect,c="".concat(t,"-quarter-panel");n.current={onKeyDown:function(e){return bke(e,{onLeftRight:function(e){u(o.addMonth(i||a,3*e),"key")},onCtrlLeftRight:function(e){u(o.addYear(i||a,e),"key")},onUpDown:function(e){u(o.addYear(i||a,e),"key")}})}};var s=function(e){var t=o.addYear(a,e);r(t),l(null,t)};return Yu.createElement("div",{className:c},Yu.createElement(c_e,(0,ek.A)({},e,{prefixCls:t,onPrevYear:function(){s(-1)},onNextYear:function(){s(1)},onYearClick:function(){l("year",a)}})),Yu.createElement(s_e,(0,ek.A)({},e,{prefixCls:t,onSelect:function(e){u(e,"mouse")}})))},f_e=function(e){var t=e.prefixCls,n=e.generateConfig,r=e.viewDate,o=e.onPrevDecade,i=e.onNextDecade,a=e.onDecadeClick;if(Yu.useContext(lke).hideHeader)return null;var l="".concat(t,"-header"),u=n.getYear(r),c=Math.floor(u/p_e)*p_e,s=c+p_e-1;return Yu.createElement(cke,(0,ek.A)({},e,{prefixCls:l,onSuperPrev:o,onSuperNext:i}),Yu.createElement("button",{type:"button",onClick:a,className:"".concat(t,"-decade-btn")},c,"-",s))},h_e=function(e){var t=e.prefixCls,n=e.value,r=e.viewDate,o=e.locale,i=e.generateConfig,a=Yu.useContext(Qke),l=a.rangedValue,u=a.hoverRangedValue,c="".concat(t,"-cell"),s=i.getYear(r),d=Math.floor(s/p_e)*p_e,f=d+p_e-1,h=i.setYear(r,d-Math.ceil((12-p_e)/2)),p=Zke({cellPrefixCls:c,value:n,generateConfig:i,rangedValue:l,hoverRangedValue:u,isSameCell:function(e,t){return Dke(i,e,t)},isInView:function(e){var t=i.getYear(e);return d<=t&&t<=f},offsetCell:function(e,t){return i.addYear(e,t)}});return Yu.createElement(pke,(0,ek.A)({},e,{rowNum:4,colNum:3,baseDate:h,getCellText:i.getYear,getCellClassName:p,getCellDate:i.addYear,titleCell:function(e){return Fke(e,{locale:o,format:"YYYY",generateConfig:i})}}))};var p_e=10;const v_e=function(e){var t=e.prefixCls,n=e.operationRef,r=e.onViewDateChange,o=e.generateConfig,i=e.value,a=e.viewDate,l=e.sourceMode,u=e.onSelect,c=e.onPanelChange,s="".concat(t,"-year-panel");n.current={onKeyDown:function(e){return bke(e,{onLeftRight:function(e){u(o.addYear(i||a,e),"key")},onCtrlLeftRight:function(e){u(o.addYear(i||a,e*p_e),"key")},onUpDown:function(e){u(o.addYear(i||a,3*e),"key")},onEnter:function(){c("date"===l?"date":"month",i||a)}})}};var d=function(e){var t=o.addYear(a,10*e);r(t),c(null,t)};return Yu.createElement("div",{className:s},Yu.createElement(f_e,(0,ek.A)({},e,{prefixCls:t,onPrevDecade:function(){d(-1)},onNextDecade:function(){d(1)},onDecadeClick:function(){c("decade",a)}})),Yu.createElement(h_e,(0,ek.A)({},e,{prefixCls:t,onSelect:function(e){c("date"===l?"date":"month",e),u(e,"mouse")}})))};function m_e(e,t,n){return n?Yu.createElement("div",{className:"".concat(e,"-footer-extra")},n(t)):null}function g_e(e){var t,n,r=e.prefixCls,o=e.rangeList,i=void 0===o?[]:o,a=e.components,l=void 0===a?{}:a,u=e.needConfirmButton,c=e.onNow,s=e.onOk,d=e.okDisabled,f=e.showNow,h=e.locale;if(i.length){var p=l.rangeItem||"span";t=Yu.createElement(Yu.Fragment,null,i.map((function(e){var t=e.label,n=e.onClick,o=e.onMouseEnter,i=e.onMouseLeave;return Yu.createElement("li",{key:t,className:"".concat(r,"-preset")},Yu.createElement(p,{onClick:n,onMouseEnter:o,onMouseLeave:i},t))})))}if(u){var v=l.button||"button";c&&!t&&!1!==f&&(t=Yu.createElement("li",{className:"".concat(r,"-now")},Yu.createElement("a",{className:"".concat(r,"-now-btn"),onClick:c},h.now))),n=u&&Yu.createElement("li",{className:"".concat(r,"-ok")},Yu.createElement(v,{disabled:d,onClick:s},h.ok))}return t||n?Yu.createElement("ul",{className:"".concat(r,"-ranges")},t,n):null}const b_e=function(e){var t,n=e.prefixCls,r=void 0===n?"rc-picker":n,o=e.className,i=e.style,a=e.locale,l=e.generateConfig,u=e.value,c=e.defaultValue,s=e.pickerValue,d=e.defaultPickerValue,f=e.disabledDate,h=e.mode,p=e.picker,v=void 0===p?"date":p,m=e.tabIndex,g=void 0===m?0:m,b=e.showNow,y=e.showTime,w=e.showToday,A=e.renderExtraFooter,k=e.hideHeader,_=e.onSelect,C=e.onChange,N=e.onPanelChange,O=e.onMouseDown,x=e.onPickerValueChange,E=e.onOk,D=e.components,P=e.direction,R=e.hourStep,S=void 0===R?1:R,T=e.minuteStep,j=void 0===T?1:T,I=e.secondStep,B=void 0===I?1:I,M="date"===v&&!!y||"time"===v,F=24%S==0,L=60%j==0,U=60%B==0,V=Yu.useContext(lke),H=V.operationRef,z=V.panelRef,W=V.onSelect,q=V.hideRanges,$=V.defaultOpenValue,K=Yu.useContext(Qke),Y=K.inRange,G=K.panelPosition,J=K.rangedValue,X=K.hoverRangedValue,Q=Yu.useRef({}),Z=Yu.useRef(!0),ee=(0,Ix.A)(null,{value:u,defaultValue:c,postState:function(e){return!e&&$&&"time"===v?$:e}}),te=(0,tn.A)(ee,2),ne=te[0],re=te[1],oe=(0,Ix.A)(null,{value:s,defaultValue:d||ne,postState:function(e){var t=l.getNow();return e?!ne&&y?"object"===(0,Gn.A)(y)?fke(l,Array.isArray(e)?e[0]:e,y.defaultValue||t):fke(l,Array.isArray(e)?e[0]:e,c||t):e:t}}),ie=(0,tn.A)(oe,2),ae=ie[0],le=ie[1],ue=function(e){le(e),x&&x(e)},ce=function(e){var t=_ke[v];return t?t(e):e},se=(0,Ix.A)((function(){return"time"===v?"time":ce("date")}),{value:h}),de=(0,tn.A)(se,2),fe=de[0],he=de[1];Yu.useEffect((function(){he(v)}),[v]);var pe,ve=Yu.useState((function(){return fe})),me=(0,tn.A)(ve,2),ge=me[0],be=me[1],ye=function(e,t){(fe===v||arguments.length>2&&void 0!==arguments[2]&&arguments[2])&&(re(e),_&&_(e),W&&W(e,t),!C||Ike(l,e,ne)||(null==f?void 0:f(e))||C(e))},we=function(e){return Q.current&&Q.current.onKeyDown?([jE.A.LEFT,jE.A.RIGHT,jE.A.UP,jE.A.DOWN,jE.A.PAGE_UP,jE.A.PAGE_DOWN,jE.A.ENTER].includes(e.which)&&e.preventDefault(),Q.current.onKeyDown(e)):((0,ck.Ay)(!1,"Panel not correct handle keyDown event. Please help to fire issue about this."),!1)};H&&"right"!==G&&(H.current={onKeyDown:we,onClose:function(){Q.current&&Q.current.onClose&&Q.current.onClose()}}),Yu.useEffect((function(){u&&!Z.current&&le(u)}),[u]),Yu.useEffect((function(){Z.current=!1}),[]);var Ae,ke,_e,Ce=(0,ok.A)((0,ok.A)({},e),{},{operationRef:Q,prefixCls:r,viewDate:ae,value:ne,onViewDateChange:ue,sourceMode:ge,onPanelChange:function(e,t){var n=ce(e||fe);be(fe),he(n),N&&(fe!==n||Ike(l,ae,ae))&&N(t,n)},disabledDate:f});switch(delete Ce.onChange,delete Ce.onSelect,fe){case"decade":pe=Yu.createElement(xke,(0,ek.A)({},Ce,{onSelect:function(e,t){ue(e),ye(e,t)}}));break;case"year":pe=Yu.createElement(v_e,(0,ek.A)({},Ce,{onSelect:function(e,t){ue(e),ye(e,t)}}));break;case"month":pe=Yu.createElement(u_e,(0,ek.A)({},Ce,{onSelect:function(e,t){ue(e),ye(e,t)}}));break;case"quarter":pe=Yu.createElement(d_e,(0,ek.A)({},Ce,{onSelect:function(e,t){ue(e),ye(e,t)}}));break;case"week":pe=Yu.createElement(i_e,(0,ek.A)({},Ce,{onSelect:function(e,t){ue(e),ye(e,t)}}));break;case"time":delete Ce.showTime,pe=Yu.createElement(Xke,(0,ek.A)({},Ce,"object"===(0,Gn.A)(y)?y:null,{onSelect:function(e,t){ue(e),ye(e,t)}}));break;default:pe=y?Yu.createElement(o_e,(0,ek.A)({},Ce,{onSelect:function(e,t){ue(e),ye(e,t)}})):Yu.createElement(n_e,(0,ek.A)({},Ce,{onSelect:function(e,t){ue(e),ye(e,t)}}))}if(q||(Ae=m_e(r,fe,A),ke=g_e({prefixCls:r,components:D,needConfirmButton:M,okDisabled:!ne||f&&f(ne),locale:a,showNow:b,onNow:M&&function(){var e=l.getNow(),t=function(e,t,n,r,o,i){var a=Math.floor(e/r)*r;if(a<e)return[a,60-o,60-i];var l=Math.floor(t/o)*o;return l<t?[a,l,60-i]:[a,l,Math.floor(n/i)*i]}(l.getHour(e),l.getMinute(e),l.getSecond(e),F?S:1,L?j:1,U?B:1),n=dke(l,e,t[0],t[1],t[2]);ye(n,"submit")},onOk:function(){ne&&(ye(ne,"submit",!0),E&&E(ne))}})),w&&"date"===fe&&"date"===v&&!y){var Ne=l.getNow(),Oe="".concat(r,"-today-btn"),xe=f&&f(Ne);_e=Yu.createElement("a",{className:nk()(Oe,xe&&"".concat(Oe,"-disabled")),"aria-disabled":xe,onClick:function(){xe||ye(Ne,"mouse",!0)}},a.today)}return Yu.createElement(lke.Provider,{value:(0,ok.A)((0,ok.A)({},V),{},{mode:fe,hideHeader:"hideHeader"in e?k:V.hideHeader,hidePrevBtn:Y&&"right"===G,hideNextBtn:Y&&"left"===G})},Yu.createElement("div",{tabIndex:g,className:nk()("".concat(r,"-panel"),o,(t={},(0,Ha.A)(t,"".concat(r,"-panel-has-range"),J&&J[0]&&J[1]),(0,Ha.A)(t,"".concat(r,"-panel-has-range-hover"),X&&X[0]&&X[1]),(0,Ha.A)(t,"".concat(r,"-panel-rtl"),"rtl"===P),t)),style:i,onKeyDown:we,onBlur:function(e){Q.current&&Q.current.onBlur&&Q.current.onBlur(e)},onMouseDown:O,ref:z},pe,Ae||ke||_e?Yu.createElement("div",{className:"".concat(r,"-footer")},Ae,ke,_e):null))};var y_e={bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}}};const w_e=function(e){var t,n=e.prefixCls,r=e.popupElement,o=e.popupStyle,i=e.visible,a=e.dropdownClassName,l=e.dropdownAlign,u=e.transitionName,c=e.getPopupContainer,s=e.children,d=e.range,f=e.popupPlacement,h=e.direction,p="".concat(n,"-dropdown");return Yu.createElement(UO,{showAction:[],hideAction:[],popupPlacement:void 0!==f?f:"rtl"===h?"bottomRight":"bottomLeft",builtinPlacements:y_e,prefixCls:p,popupTransitionName:u,popup:r,popupAlign:l,popupVisible:i,popupClassName:nk()(a,(t={},(0,Ha.A)(t,"".concat(p,"-range"),d),(0,Ha.A)(t,"".concat(p,"-rtl"),"rtl"===h),t)),popupStyle:o,getPopupContainer:c},s)};function A_e(e){var t=e.open,n=e.value,r=e.isClickOutside,o=e.triggerOpen,i=e.forwardKeyDown,a=e.onKeyDown,l=e.blurToCancel,u=e.onSubmit,c=e.onCancel,s=e.onFocus,d=e.onBlur,f=(0,Yu.useState)(!1),h=(0,tn.A)(f,2),p=h[0],v=h[1],m=(0,Yu.useState)(!1),g=(0,tn.A)(m,2),b=g[0],y=g[1],w=(0,Yu.useRef)(!1),A=(0,Yu.useRef)(!1),k=(0,Yu.useRef)(!1),_={onMouseDown:function(){v(!0),o(!0)},onKeyDown:function(e){if(a(e,(function(){k.current=!0})),!k.current){switch(e.which){case jE.A.ENTER:return t?!1!==u()&&v(!0):o(!0),void e.preventDefault();case jE.A.TAB:return void(p&&t&&!e.shiftKey?(v(!1),e.preventDefault()):!p&&t&&!i(e)&&e.shiftKey&&(v(!0),e.preventDefault()));case jE.A.ESC:return v(!0),void c()}t||[jE.A.SHIFT].includes(e.which)?p||i(e):o(!0)}},onFocus:function(e){v(!0),y(!0),s&&s(e)},onBlur:function(e){!w.current&&r(document.activeElement)?(l?setTimeout((function(){for(var e=document.activeElement;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;r(e)&&c()}),0):t&&(o(!1),A.current&&u()),y(!1),d&&d(e)):w.current=!1}};return(0,Yu.useEffect)((function(){A.current=!1}),[t]),(0,Yu.useEffect)((function(){A.current=!0}),[n]),(0,Yu.useEffect)((function(){return e=function(e){var n=function(e){var t,n=e.target;return e.composed&&n.shadowRoot&&(null===(t=e.composedPath)||void 0===t?void 0:t.call(e)[0])||n}(e);if(t){var i=r(n);i?b&&!i||o(!1):(w.current=!0,requestAnimationFrame((function(){w.current=!1})))}},!Ake&&"undefined"!=typeof window&&window.addEventListener&&(Ake=function(e){(0,ln.A)(kke).forEach((function(t){t(e)}))},window.addEventListener("mousedown",Ake)),kke.add(e),function(){kke.delete(e),0===kke.size&&(window.removeEventListener("mousedown",Ake),Ake=null)};var e})),[_,{focused:b,typing:p}]}function k_e(e){var t=e.valueTexts,n=e.onTextChange,r=Yu.useState(""),o=(0,tn.A)(r,2),i=o[0],a=o[1],l=Yu.useRef([]);function u(){a(l.current[0])}return l.current=t,Yu.useEffect((function(){t.every((function(e){return e!==i}))&&u()}),[t.join("||")]),[i,function(e){a(e),n(e)},u]}function __e(e,t){var n=t.formatList,r=t.generateConfig,o=t.locale;return(0,l_.A)((function(){if(!e)return[[""],""];for(var t="",i=[],a=0;a<n.length;a+=1){var l=n[a],u=Fke(e,{generateConfig:r,locale:o,format:l});i.push(u),0===a&&(t=u)}return[i,t]}),[e,n],(function(e,t){return e[0]!==t[0]||!nE()(e[1],t[1])}))}function C_e(e,t){var n=t.formatList,r=t.generateConfig,o=t.locale,i=(0,Yu.useState)(null),a=(0,tn.A)(i,2),l=a[0],u=a[1],c=(0,Yu.useRef)(null);function s(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];cancelAnimationFrame(c.current),t?u(e):c.current=requestAnimationFrame((function(){u(e)}))}var d=__e(l,{formatList:n,generateConfig:r,locale:o}),f=(0,tn.A)(d,2)[1];function h(){s(null,arguments.length>0&&void 0!==arguments[0]&&arguments[0])}return(0,Yu.useEffect)((function(){h(!0)}),[e]),(0,Yu.useEffect)((function(){return function(){return cancelAnimationFrame(c.current)}}),[]),[f,function(e){s(e)},h]}function N_e(e){var t,n=e.prefixCls,r=void 0===n?"rc-picker":n,o=e.id,i=e.tabIndex,a=e.style,l=e.className,u=e.dropdownClassName,c=e.dropdownAlign,s=e.popupStyle,d=e.transitionName,f=e.generateConfig,h=e.locale,p=e.inputReadOnly,v=e.allowClear,m=e.autoFocus,g=e.showTime,b=e.picker,y=void 0===b?"date":b,w=e.format,A=e.use12Hours,k=e.value,_=e.defaultValue,C=e.open,N=e.defaultOpen,O=e.defaultOpenValue,x=e.suffixIcon,E=e.clearIcon,D=e.disabled,P=e.disabledDate,R=e.placeholder,S=e.getPopupContainer,T=e.pickerRef,j=e.panelRender,I=e.onChange,B=e.onOpenChange,M=e.onFocus,F=e.onBlur,L=e.onMouseDown,U=e.onMouseUp,V=e.onMouseEnter,H=e.onMouseLeave,z=e.onContextMenu,W=e.onClick,q=e.onKeyDown,$=e.onSelect,K=e.direction,Y=e.autoComplete,G=void 0===Y?"off":Y,J=Yu.useRef(null),X="date"===y&&!!g||"time"===y,Q=Wke(yke(w,y,g,A)),Z=Yu.useRef(null),ee=Yu.useRef(null),te=Yu.useRef(null),ne=(0,Ix.A)(null,{value:k,defaultValue:_}),re=(0,tn.A)(ne,2),oe=re[0],ie=re[1],ae=Yu.useState(oe),le=(0,tn.A)(ae,2),ue=le[0],ce=le[1],se=Yu.useRef(null),de=(0,Ix.A)(!1,{value:C,defaultValue:N,postState:function(e){return!D&&e},onChange:function(e){B&&B(e),!e&&se.current&&se.current.onClose&&se.current.onClose()}}),fe=(0,tn.A)(de,2),he=fe[0],pe=fe[1],ve=__e(ue,{formatList:Q,generateConfig:f,locale:h}),me=(0,tn.A)(ve,2),ge=me[0],be=me[1],ye=k_e({valueTexts:ge,onTextChange:function(e){var t=Lke(e,{locale:h,formatList:Q,generateConfig:f});!t||P&&P(t)||ce(t)}}),we=(0,tn.A)(ye,3),Ae=we[0],ke=we[1],_e=we[2],Ce=function(e){ce(e),ie(e),I&&!Ike(f,oe,e)&&I(e,e?Fke(e,{generateConfig:f,locale:h,format:Q[0]}):"")},Ne=function(e){D&&e||pe(e)},Oe=A_e({blurToCancel:X,open:he,value:Ae,triggerOpen:Ne,forwardKeyDown:function(e){return he&&se.current&&se.current.onKeyDown?se.current.onKeyDown(e):((0,ck.Ay)(!1,"Picker not correct forward KeyDown operation. Please help to fire issue about this."),!1)},isClickOutside:function(e){return!Cke([Z.current,ee.current,te.current],e)},onSubmit:function(){return!(!ue||P&&P(ue)||(Ce(ue),Ne(!1),_e(),0))},onCancel:function(){Ne(!1),ce(oe),_e()},onKeyDown:function(e,t){null==q||q(e,t)},onFocus:M,onBlur:F}),xe=(0,tn.A)(Oe,2),Ee=xe[0],De=xe[1],Pe=De.focused,Re=De.typing;Yu.useEffect((function(){he||(ce(oe),ge.length&&""!==ge[0]?be!==Ae&&_e():ke(""))}),[he,ge]),Yu.useEffect((function(){he||_e()}),[y]),Yu.useEffect((function(){ce(oe)}),[oe]),T&&(T.current={focus:function(){J.current&&J.current.focus()},blur:function(){J.current&&J.current.blur()}});var Se=C_e(Ae,{formatList:Q,generateConfig:f,locale:h}),Te=(0,tn.A)(Se,3),je=Te[0],Ie=Te[1],Be=Te[2],Me=(0,ok.A)((0,ok.A)({},e),{},{className:void 0,style:void 0,pickerValue:void 0,onPickerValueChange:void 0,onChange:null}),Fe=Yu.createElement(b_e,(0,ek.A)({},Me,{generateConfig:f,className:nk()((0,Ha.A)({},"".concat(r,"-panel-focused"),!Re)),value:ue,locale:h,tabIndex:-1,onSelect:function(e){null==$||$(e),ce(e)},direction:K,onPanelChange:function(t,n){var r=e.onPanelChange;Be(!0),null==r||r(t,n)}}));j&&(Fe=j(Fe));var Le,Ue,Ve=Yu.createElement("div",{className:"".concat(r,"-panel-container"),onMouseDown:function(e){e.preventDefault()}},Fe);x&&(Le=Yu.createElement("span",{className:"".concat(r,"-suffix")},x)),v&&oe&&!D&&(Ue=Yu.createElement("span",{onMouseDown:function(e){e.preventDefault(),e.stopPropagation()},onMouseUp:function(e){e.preventDefault(),e.stopPropagation(),Ce(null),Ne(!1)},className:"".concat(r,"-clear"),role:"button"},E||Yu.createElement("span",{className:"".concat(r,"-clear-btn")})));var He="rtl"===K?"bottomRight":"bottomLeft";return Yu.createElement(lke.Provider,{value:{operationRef:se,hideHeader:"time"===y,panelRef:Z,onSelect:function(e,t){("submit"===t||"key"!==t&&!X)&&(Ce(e),Ne(!1))},open:he,defaultOpenValue:O,onDateMouseEnter:Ie,onDateMouseLeave:Be}},Yu.createElement(w_e,{visible:he,popupElement:Ve,popupStyle:s,prefixCls:r,dropdownClassName:u,dropdownAlign:c,getPopupContainer:S,transitionName:d,popupPlacement:He,direction:K},Yu.createElement("div",{ref:te,className:nk()(r,l,(t={},(0,Ha.A)(t,"".concat(r,"-disabled"),D),(0,Ha.A)(t,"".concat(r,"-focused"),Pe),(0,Ha.A)(t,"".concat(r,"-rtl"),"rtl"===K),t)),style:a,onMouseDown:L,onMouseUp:function(){U&&U.apply(void 0,arguments),J.current&&(J.current.focus(),Ne(!0))},onMouseEnter:V,onMouseLeave:H,onContextMenu:z,onClick:W},Yu.createElement("div",{className:nk()("".concat(r,"-input"),(0,Ha.A)({},"".concat(r,"-input-placeholder"),!!je)),ref:ee},Yu.createElement("input",(0,ek.A)({id:o,tabIndex:i,disabled:D,readOnly:p||"function"==typeof Q[0]||!Re,value:je||Ae,onChange:function(e){ke(e.target.value)},autoFocus:m,placeholder:R,ref:J,title:Ae},Ee,{size:wke(y,Q[0],f)},qke(e),{autoComplete:G})),Le,Ue))))}var O_e=function(e){(0,Xe.A)(n,e);var t=(0,Wk.A)(n);function n(){var e;(0,Ke.A)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).pickerRef=Yu.createRef(),e.focus=function(){e.pickerRef.current&&e.pickerRef.current.focus()},e.blur=function(){e.pickerRef.current&&e.pickerRef.current.blur()},e}return(0,$e.A)(n,[{key:"render",value:function(){return Yu.createElement(N_e,(0,ek.A)({},this.props,{pickerRef:this.pickerRef}))}}]),n}(Yu.Component);const x_e=O_e;function E_e(e){var t=e.values,n=e.picker,r=e.defaultDates,o=e.generateConfig,i=Yu.useState((function(){return[$ke(r,0),$ke(r,1)]})),a=(0,tn.A)(i,2),l=a[0],u=a[1],c=Yu.useState(null),s=(0,tn.A)(c,2),d=s[0],f=s[1],h=$ke(t,0),p=$ke(t,1);return[function(e){return l[e]?l[e]:$ke(d,e)||function(e,t,n,r){var o=$ke(e,0),i=$ke(e,1);if(0===t)return o;if(o&&i)switch(function(e,t,n,r){var o=Mke(e,n,r,1);function i(n){return n(e,t)?"same":n(o,t)?"closing":"far"}switch(n){case"year":return i((function(e,t){return function(e,t,n){var r=Eke(t,n);return"boolean"==typeof r?r:Math.floor(e.getYear(t)/10)===Math.floor(e.getYear(n)/10)}(r,e,t)}));case"quarter":case"month":return i((function(e,t){return Dke(r,e,t)}));default:return i((function(e,t){return Ske(r,e,t)}))}}(o,i,n,r)){case"same":case"closing":return o;default:return Mke(i,n,r,-1)}return o}(t,e,n,o)||h||p||o.getNow()},function(e,n){if(e){var r=Kke(d,e,n);u(Kke(l,null,n)||[null,null]);var o=(n+1)%2;$ke(t,o)||(r=Kke(r,e,o)),f(r)}else(h||p)&&f(null)}]}function D_e(e,t){return e&&e[0]&&e[1]&&t.isAfter(e[0],e[1])?[e[1],e[0]]:e}function P_e(e,t,n,r){return!!e||!(!r||!r[t])||!!n[(t+1)%2]}function R_e(e){var t,n,r,o=e.prefixCls,i=void 0===o?"rc-picker":o,a=e.id,l=e.style,u=e.className,c=e.popupStyle,s=e.dropdownClassName,d=e.transitionName,f=e.dropdownAlign,h=e.getPopupContainer,p=e.generateConfig,v=e.locale,m=e.placeholder,g=e.autoFocus,b=e.disabled,y=e.format,w=e.picker,A=void 0===w?"date":w,k=e.showTime,_=e.use12Hours,C=e.separator,N=void 0===C?"~":C,O=e.value,x=e.defaultValue,E=e.defaultPickerValue,D=e.open,P=e.defaultOpen,R=e.disabledDate,S=e.disabledTime,T=e.dateRender,j=e.panelRender,I=e.ranges,B=e.allowEmpty,M=e.allowClear,F=e.suffixIcon,L=e.clearIcon,U=e.pickerRef,V=e.inputReadOnly,H=e.mode,z=e.renderExtraFooter,W=e.onChange,q=e.onOpenChange,$=e.onPanelChange,K=e.onCalendarChange,Y=e.onFocus,G=e.onBlur,J=e.onMouseEnter,X=e.onMouseLeave,Q=e.onOk,Z=e.onKeyDown,ee=e.components,te=e.order,ne=e.direction,re=e.activePickerIndex,oe=e.autoComplete,ie=void 0===oe?"off":oe,ae="date"===A&&!!k||"time"===A,le=(0,Yu.useRef)({}),ue=(0,Yu.useRef)(null),ce=(0,Yu.useRef)(null),se=(0,Yu.useRef)(null),de=(0,Yu.useRef)(null),fe=(0,Yu.useRef)(null),he=(0,Yu.useRef)(null),pe=(0,Yu.useRef)(null),ve=Wke(yke(y,A,k,_)),me=(0,Ix.A)(0,{value:re}),ge=(0,tn.A)(me,2),be=ge[0],ye=ge[1],we=(0,Yu.useRef)(null),Ae=Yu.useMemo((function(){return Array.isArray(b)?b:[b||!1,b||!1]}),[b]),ke=(0,Ix.A)(null,{value:O,defaultValue:x,postState:function(e){return"time"!==A||te?D_e(e,p):e}}),_e=(0,tn.A)(ke,2),Ce=_e[0],Ne=_e[1],Oe=E_e({values:Ce,picker:A,defaultDates:E,generateConfig:p}),xe=(0,tn.A)(Oe,2),Ee=xe[0],De=xe[1],Pe=(0,Ix.A)(Ce,{postState:function(e){var t=e;if(Ae[0]&&Ae[1])return t;for(var n=0;n<2;n+=1)!Ae[n]||$ke(t,n)||$ke(B,n)||(t=Kke(t,p.getNow(),n));return t}}),Re=(0,tn.A)(Pe,2),Se=Re[0],Te=Re[1],je=(0,Ix.A)([A,A],{value:H}),Ie=(0,tn.A)(je,2),Be=Ie[0],Me=Ie[1];(0,Yu.useEffect)((function(){Me([A,A])}),[A]);var Fe=function(e,t,n){var r=e.picker,o=e.locale,i=e.selectedValue,a=e.disabledDate,l=e.disabled,u=e.generateConfig,c=$ke(i,0),s=$ke(i,1);function d(e){return u.locale.getWeekFirstDate(o.locale,e)}function f(e){return 100*u.getYear(e)+u.getMonth(e)}function h(e){return 10*u.getYear(e)+Pke(u,e)}return[Yu.useCallback((function(e){if(a&&a(e))return!0;if(l[1]&&s)return!Tke(u,e,s)&&u.isAfter(e,s);if(t&&s)switch(r){case"quarter":return h(e)>h(s);case"month":return f(e)>f(s);case"week":return d(e)>d(s);default:return!Tke(u,e,s)&&u.isAfter(e,s)}return!1}),[a,l[1],s,t]),Yu.useCallback((function(e){if(a&&a(e))return!0;if(l[0]&&c)return!Tke(u,e,s)&&u.isAfter(c,e);if(n&&c)switch(r){case"quarter":return h(e)<h(c);case"month":return f(e)<f(c);case"week":return d(e)<d(c);default:return!Tke(u,e,c)&&u.isAfter(c,e)}return!1}),[a,l[0],c,n])]}({picker:A,selectedValue:Se,locale:v,disabled:Ae,disabledDate:R,generateConfig:p},le.current[1],le.current[0]),Le=(0,tn.A)(Fe,2),Ue=Le[0],Ve=Le[1],He=(0,Ix.A)(!1,{value:D,defaultValue:P,postState:function(e){return!Ae[be]&&e},onChange:function(e){q&&q(e),!e&&we.current&&we.current.onClose&&we.current.onClose()}}),ze=(0,tn.A)(He,2),We=ze[0],qe=ze[1],$e=We&&0===be,Ke=We&&1===be,Ye=(0,Yu.useState)(0),Ge=(0,tn.A)(Ye,2),Je=Ge[0],Xe=Ge[1];(0,Yu.useEffect)((function(){!We&&ue.current&&Xe(ue.current.offsetWidth)}),[We]);var Qe=Yu.useRef();function Ze(e,t){if(e)clearTimeout(Qe.current),le.current[t]=!0,ye(t),qe(e),We||De(null,t);else if(be===t){qe(e);var n=le.current;Qe.current=setTimeout((function(){n===le.current&&(le.current={})}))}}function et(e){Ze(!0,e),setTimeout((function(){var t=[he,pe][e];t.current&&t.current.focus()}),0)}function tt(e,t){var n=e,r=$ke(n,0),o=$ke(n,1);r&&o&&p.isAfter(r,o)&&("week"===A&&!jke(p,v.locale,r,o)||"quarter"===A&&!Rke(p,r,o)||"week"!==A&&"quarter"!==A&&"time"!==A&&!Tke(p,r,o)?(0===t?(n=[r,null],o=null):(r=null,n=[null,o]),le.current=(0,Ha.A)({},t,!0)):"time"===A&&!1===te||(n=D_e(n,p))),Te(n);var i=n&&n[0]?Fke(n[0],{generateConfig:p,locale:v,format:ve[0]}):"",a=n&&n[1]?Fke(n[1],{generateConfig:p,locale:v,format:ve[0]}):"";K&&K(n,[i,a],{range:0===t?"start":"end"});var l=P_e(r,0,Ae,B),u=P_e(o,1,Ae,B);(null===n||l&&u)&&(Ne(n),!W||Ike(p,$ke(Ce,0),r)&&Ike(p,$ke(Ce,1),o)||W(n,[i,a]));var c=null;0!==t||Ae[1]?1!==t||Ae[0]||(c=0):c=1,null===c||c===be||le.current[c]&&$ke(n,c)||!$ke(n,t)?Ze(!1,t):et(c)}var nt=function(e){return We&&we.current&&we.current.onKeyDown?we.current.onKeyDown(e):((0,ck.Ay)(!1,"Picker not correct forward KeyDown operation. Please help to fire issue about this."),!1)},rt={formatList:ve,generateConfig:p,locale:v},ot=__e($ke(Se,0),rt),it=(0,tn.A)(ot,2),at=it[0],lt=it[1],ut=__e($ke(Se,1),rt),ct=(0,tn.A)(ut,2),st=ct[0],dt=ct[1],ft=function(e,t){var n=Lke(e,{locale:v,formatList:ve,generateConfig:p});n&&!(0===t?Ue:Ve)(n)&&(Te(Kke(Se,n,t)),De(n,t))},ht=k_e({valueTexts:at,onTextChange:function(e){return ft(e,0)}}),pt=(0,tn.A)(ht,3),vt=pt[0],mt=pt[1],gt=pt[2],bt=k_e({valueTexts:st,onTextChange:function(e){return ft(e,1)}}),yt=(0,tn.A)(bt,3),wt=yt[0],At=yt[1],kt=yt[2],_t=(0,Yu.useState)(null),Ct=(0,tn.A)(_t,2),Nt=Ct[0],Ot=Ct[1],xt=(0,Yu.useState)(null),Et=(0,tn.A)(xt,2),Dt=Et[0],Pt=Et[1],Rt=C_e(vt,{formatList:ve,generateConfig:p,locale:v}),St=(0,tn.A)(Rt,3),Tt=St[0],jt=St[1],It=St[2],Bt=C_e(wt,{formatList:ve,generateConfig:p,locale:v}),Mt=(0,tn.A)(Bt,3),Ft=Mt[0],Lt=Mt[1],Ut=Mt[2],Vt=function(e,t){return{blurToCancel:ae,forwardKeyDown:nt,onBlur:G,isClickOutside:function(e){return!Cke([ce.current,se.current,de.current,ue.current],e)},onFocus:function(t){ye(e),Y&&Y(t)},triggerOpen:function(t){Ze(t,e)},onSubmit:function(){tt(Se,e),t()},onCancel:function(){Ze(!1,e),Te(Ce),t()}}},Ht=A_e((0,ok.A)((0,ok.A)({},Vt(0,gt)),{},{open:$e,value:vt,onKeyDown:function(e,t){null==Z||Z(e,t)}})),zt=(0,tn.A)(Ht,2),Wt=zt[0],qt=zt[1],$t=qt.focused,Kt=qt.typing,Yt=A_e((0,ok.A)((0,ok.A)({},Vt(1,kt)),{},{open:Ke,value:wt,onKeyDown:function(e,t){null==Z||Z(e,t)}})),Gt=(0,tn.A)(Yt,2),Jt=Gt[0],Xt=Gt[1],Qt=Xt.focused,Zt=Xt.typing,en=Ce&&Ce[0]?Fke(Ce[0],{locale:v,format:"YYYYMMDDHHmmss",generateConfig:p}):"",nn=Ce&&Ce[1]?Fke(Ce[1],{locale:v,format:"YYYYMMDDHHmmss",generateConfig:p}):"";(0,Yu.useEffect)((function(){We||(Te(Ce),at.length&&""!==at[0]?lt!==vt&&gt():mt(""),st.length&&""!==st[0]?dt!==wt&&kt():At(""))}),[We,at,st]),(0,Yu.useEffect)((function(){Te(Ce)}),[en,nn]),U&&(U.current={focus:function(){he.current&&he.current.focus()},blur:function(){he.current&&he.current.blur(),pe.current&&pe.current.blur()}});var rn=Object.keys(I||{}).map((function(e){var t=I[e],n="function"==typeof t?t():t;return{label:e,onClick:function(){tt(n,null),Ze(!1,be)},onMouseEnter:function(){Ot(n)},onMouseLeave:function(){Ot(null)}}}));function on(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null;We&&Dt&&Dt[0]&&Dt[1]&&p.isAfter(Dt[1],Dt[0])&&(r=Dt);var o=k;if(k&&"object"===(0,Gn.A)(k)&&k.defaultValue){var a=k.defaultValue;o=(0,ok.A)((0,ok.A)({},k),{},{defaultValue:$ke(a,be)||void 0})}var l=null;return T&&(l=function(e,t){return T(e,t,{range:be?"end":"start"})}),Yu.createElement(Qke.Provider,{value:{inRange:!0,panelPosition:t,rangedValue:Nt||Se,hoverRangedValue:r}},Yu.createElement(b_e,(0,ek.A)({},e,n,{dateRender:l,showTime:o,mode:Be[be],generateConfig:p,style:void 0,direction:ne,disabledDate:0===be?Ue:Ve,disabledTime:function(e){return!!S&&S(e,0===be?"start":"end")},className:nk()((0,Ha.A)({},"".concat(i,"-panel-focused"),0===be?!Kt:!Zt)),value:$ke(Se,be),locale:v,tabIndex:-1,onPanelChange:function(e,n){var r,o;0===be&&It(!0),1===be&&Ut(!0),r=Kke(Be,n,be),o=Kke(Se,e,be),Me(r),$&&$(o,r);var i=e;"right"===t&&Be[be]===n&&(i=Mke(i,n,p,-1)),De(i,be)},onOk:null,onSelect:void 0,onChange:void 0,defaultValue:$ke(Se,0===be?1:0)})))}var an=0,ln=0;be&&se.current&&fe.current&&ce.current&&(an=se.current.offsetWidth+fe.current.offsetWidth,ce.current.offsetWidth&&an>ce.current.offsetWidth&&(ln=an));var un,cn,sn="rtl"===ne?{right:an}:{left:an},dn=Yu.createElement("div",{className:nk()("".concat(i,"-range-wrapper"),"".concat(i,"-").concat(A,"-range-wrapper")),style:{minWidth:Je}},Yu.createElement("div",{className:"".concat(i,"-range-arrow"),style:sn}),function(){var e,t=m_e(i,Be[be],z),n=g_e({prefixCls:i,components:ee,needConfirmButton:ae,okDisabled:!$ke(Se,be)||R&&R(Se[be]),locale:v,rangeList:rn,onOk:function(){$ke(Se,be)&&(tt(Se,be),Q&&Q(Se))}});if("time"===A||k)e=on();else{var r=Ee(be),o=Mke(r,A,p),a=Be[be]===A,l=on(!!a&&"left",{pickerValue:r,onPickerValueChange:function(e){De(e,be)}}),u=on("right",{pickerValue:o,onPickerValueChange:function(e){De(Mke(e,A,p,-1),be)}});e="rtl"===ne?Yu.createElement(Yu.Fragment,null,u,a&&l):Yu.createElement(Yu.Fragment,null,l,a&&u)}var c=Yu.createElement(Yu.Fragment,null,Yu.createElement("div",{className:"".concat(i,"-panels")},e),(t||n)&&Yu.createElement("div",{className:"".concat(i,"-footer")},t,n));return j&&(c=j(c)),Yu.createElement("div",{className:"".concat(i,"-panel-container"),style:{marginLeft:ln},ref:ce,onMouseDown:function(e){e.preventDefault()}},c)}());F&&(un=Yu.createElement("span",{className:"".concat(i,"-suffix")},F)),M&&($ke(Ce,0)&&!Ae[0]||$ke(Ce,1)&&!Ae[1])&&(cn=Yu.createElement("span",{onMouseDown:function(e){e.preventDefault(),e.stopPropagation()},onMouseUp:function(e){e.preventDefault(),e.stopPropagation();var t=Ce;Ae[0]||(t=Kke(t,null,0)),Ae[1]||(t=Kke(t,null,1)),tt(t,null),Ze(!1,be)},className:"".concat(i,"-clear")},L||Yu.createElement("span",{className:"".concat(i,"-clear-btn")})));var fn={size:wke(A,ve[0],p)},hn=0,pn=0;se.current&&de.current&&fe.current&&(0===be?pn=se.current.offsetWidth:(hn=an,pn=de.current.offsetWidth));var vn="rtl"===ne?{right:hn}:{left:hn};return Yu.createElement(lke.Provider,{value:{operationRef:we,hideHeader:"time"===A,onDateMouseEnter:function(e){Pt(Kke(Se,e,be)),0===be?jt(e):Lt(e)},onDateMouseLeave:function(){Pt(Kke(Se,null,be)),0===be?It():Ut()},hideRanges:!0,onSelect:function(e,t){var n=Kke(Se,e,be);"submit"===t||"key"!==t&&!ae?(tt(n,be),0===be?It():Ut()):Te(n)},open:We}},Yu.createElement(w_e,{visible:We,popupElement:dn,popupStyle:c,prefixCls:i,dropdownClassName:s,dropdownAlign:f,getPopupContainer:h,transitionName:d,range:!0,direction:ne},Yu.createElement("div",(0,ek.A)({ref:ue,className:nk()(i,"".concat(i,"-range"),u,(t={},(0,Ha.A)(t,"".concat(i,"-disabled"),Ae[0]&&Ae[1]),(0,Ha.A)(t,"".concat(i,"-focused"),0===be?$t:Qt),(0,Ha.A)(t,"".concat(i,"-rtl"),"rtl"===ne),t)),style:l,onClick:function(e){We||he.current.contains(e.target)||pe.current.contains(e.target)||(Ae[0]?Ae[1]||et(1):et(0))},onMouseEnter:J,onMouseLeave:X,onMouseDown:function(e){!We||!$t&&!Qt||he.current.contains(e.target)||pe.current.contains(e.target)||e.preventDefault()}},qke(e)),Yu.createElement("div",{className:nk()("".concat(i,"-input"),(n={},(0,Ha.A)(n,"".concat(i,"-input-active"),0===be),(0,Ha.A)(n,"".concat(i,"-input-placeholder"),!!Tt),n)),ref:se},Yu.createElement("input",(0,ek.A)({id:a,disabled:Ae[0],readOnly:V||"function"==typeof ve[0]||!Kt,value:Tt||vt,onChange:function(e){mt(e.target.value)},autoFocus:g,placeholder:$ke(m,0)||"",ref:he},Wt,fn,{autoComplete:ie}))),Yu.createElement("div",{className:"".concat(i,"-range-separator"),ref:fe},N),Yu.createElement("div",{className:nk()("".concat(i,"-input"),(r={},(0,Ha.A)(r,"".concat(i,"-input-active"),1===be),(0,Ha.A)(r,"".concat(i,"-input-placeholder"),!!Ft),r)),ref:de},Yu.createElement("input",(0,ek.A)({disabled:Ae[1],readOnly:V||"function"==typeof ve[0]||!Zt,value:Ft||wt,onChange:function(e){At(e.target.value)},placeholder:$ke(m,1)||"",ref:pe},Jt,fn,{autoComplete:ie}))),Yu.createElement("div",{className:"".concat(i,"-active-bar"),style:(0,ok.A)((0,ok.A)({},vn),{},{width:pn,position:"absolute"})}),un,cn)))}var S_e=function(e){(0,Xe.A)(n,e);var t=(0,Wk.A)(n);function n(){var e;(0,Ke.A)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).pickerRef=Yu.createRef(),e.focus=function(){e.pickerRef.current&&e.pickerRef.current.focus()},e.blur=function(){e.pickerRef.current&&e.pickerRef.current.blur()},e}return(0,$e.A)(n,[{key:"render",value:function(){return Yu.createElement(R_e,(0,ek.A)({},this.props,{pickerRef:this.pickerRef}))}}]),n}(Yu.Component);const T_e=S_e,j_e=x_e;function I_e(e,t,n){return void 0!==n?n:"year"===e&&t.lang.yearPlaceholder?t.lang.yearPlaceholder:"quarter"===e&&t.lang.quarterPlaceholder?t.lang.quarterPlaceholder:"month"===e&&t.lang.monthPlaceholder?t.lang.monthPlaceholder:"week"===e&&t.lang.weekPlaceholder?t.lang.weekPlaceholder:"time"===e&&t.timePickerLocale.placeholder?t.timePickerLocale.placeholder:t.lang.placeholder}function B_e(e,t,n){return void 0!==n?n:"year"===e&&t.lang.yearPlaceholder?t.lang.rangeYearPlaceholder:"month"===e&&t.lang.monthPlaceholder?t.lang.rangeMonthPlaceholder:"week"===e&&t.lang.weekPlaceholder?t.lang.rangeWeekPlaceholder:"time"===e&&t.timePickerLocale.placeholder?t.timePickerLocale.rangePlaceholder:t.lang.rangePlaceholder}const M_e={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M873.1 596.2l-164-208A32 32 0 00684 376h-64.8c-6.7 0-10.4 7.7-6.3 13l144.3 183H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h695.9c26.8 0 41.7-30.8 25.2-51.8z"}}]},name:"swap-right",theme:"outlined"};var F_e=function(e,t){return Yu.createElement(Ek,(0,ok.A)((0,ok.A)({},e),{},{ref:t,icon:M_e}))};const L_e=Yu.forwardRef(F_e);var U_e={button:function(e){return Yu.createElement(Ax,(0,ek.A)({size:"small",type:"primary"},e))},rangeItem:function(e){return Yu.createElement(eke,(0,ek.A)({color:"blue"},e))}};function V_e(e){var t,n=e.format,r=e.picker,o=e.showHour,i=e.showMinute,a=e.showSecond,l=e.use12Hours,u=(t=n,t?Array.isArray(t)?t:[t]:[])[0],c=(0,ek.A)({},e);return u&&"string"==typeof u&&(u.includes("s")||void 0!==a||(c.showSecond=!1),u.includes("m")||void 0!==i||(c.showMinute=!1),u.includes("H")||u.includes("h")||void 0!==o||(c.showHour=!1),(u.includes("a")||u.includes("A"))&&void 0===l&&(c.use12Hours=!0)),"time"===r?c:("function"==typeof u&&delete c.format,{showTime:c})}function H_e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,z_e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function z_e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(z_e=function(){return!!e})()}var W_e=function(e){var t=function(e){function t(t,n){var r=function(r){(0,Xe.A)(i,r);var o=(0,Wk.A)(i);function i(r){var a;return(0,Ke.A)(this,i),(a=o.call(this,r)).pickerRef=Yu.createRef(),a.focus=function(){a.pickerRef.current&&a.pickerRef.current.focus()},a.blur=function(){a.pickerRef.current&&a.pickerRef.current.blur()},a.renderPicker=function(n){var r=(0,ek.A)((0,ek.A)({},n),a.props.locale),o=a.context,i=o.getPrefixCls,l=o.direction,u=o.getPopupContainer,c=a.props,s=c.prefixCls,d=c.getPopupContainer,f=c.className,h=c.size,p=c.bordered,v=void 0===p||p,m=c.placeholder,g=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(c,["prefixCls","getPopupContainer","className","size","bordered","placeholder"]),b=a.props,y=b.format,w=b.showTime,A=i("picker",s),k={showToday:!0},_={};t&&(_.picker=t);var C=t||a.props.picker;_=(0,ek.A)((0,ek.A)((0,ek.A)({},_),w?V_e((0,ek.A)({format:y,picker:C},w)):{}),"time"===C?V_e((0,ek.A)((0,ek.A)({format:y},a.props),{picker:C})):{});var N=i();return Yu.createElement(m_.Consumer,null,(function(t){var n,o=h||t;return Yu.createElement(j_e,(0,ek.A)({ref:a.pickerRef,placeholder:I_e(C,r,m),suffixIcon:"time"===C?Yu.createElement(ake,null):Yu.createElement(rke,null),clearIcon:Yu.createElement(Bk,null),allowClear:!0,transitionName:"".concat(N,"-slide-up")},k,g,_,{locale:r.lang,className:nk()((n={},(0,Ha.A)(n,"".concat(A,"-").concat(o),o),(0,Ha.A)(n,"".concat(A,"-borderless"),!v),n),f),prefixCls:A,getPopupContainer:d||u,generateConfig:e,prevIcon:Yu.createElement("span",{className:"".concat(A,"-prev-icon")}),nextIcon:Yu.createElement("span",{className:"".concat(A,"-next-icon")}),superPrevIcon:Yu.createElement("span",{className:"".concat(A,"-super-prev-icon")}),superNextIcon:Yu.createElement("span",{className:"".concat(A,"-super-next-icon")}),components:U_e,direction:l}))}))},u_("quarter"!==t,n,"DatePicker.".concat(n," is legacy usage. Please use DatePicker[picker='").concat(t,"'] directly.")),a}return(0,$e.A)(i,[{key:"render",value:function(){return Yu.createElement(Xk,{componentName:"DatePicker",defaultLocale:$k},this.renderPicker)}}]),i}(Yu.Component);return r.contextType=o_,n&&(r.displayName=n),r}return{DatePicker:t(),WeekPicker:t("week","WeekPicker"),MonthPicker:t("month","MonthPicker"),YearPicker:t("year","YearPicker"),TimePicker:t("time","TimePicker"),QuarterPicker:t("quarter","QuarterPicker")}}(e),n=t.DatePicker,r=t.WeekPicker,o=t.MonthPicker,i=t.YearPicker,a=t.TimePicker,l=t.QuarterPicker,u=function(e){var t=function(t){(0,Xe.A)(r,t);var n=(0,Wk.A)(r);function r(){var t;return(0,Ke.A)(this,r),(t=n.apply(this,arguments)).pickerRef=Yu.createRef(),t.focus=function(){t.pickerRef.current&&t.pickerRef.current.focus()},t.blur=function(){t.pickerRef.current&&t.pickerRef.current.blur()},t.renderPicker=function(n){var r=(0,ek.A)((0,ek.A)({},n),t.props.locale),o=t.context,i=o.getPrefixCls,a=o.direction,l=o.getPopupContainer,u=t.props,c=u.prefixCls,s=u.getPopupContainer,d=u.className,f=u.size,h=u.bordered,p=void 0===h||h,v=u.placeholder,m=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(u,["prefixCls","getPopupContainer","className","size","bordered","placeholder"]),g=t.props,b=g.format,y=g.showTime,w=g.picker,A=i("picker",c),k={};k=(0,ek.A)((0,ek.A)((0,ek.A)({},k),y?V_e((0,ek.A)({format:b,picker:w},y)):{}),"time"===w?V_e((0,ek.A)((0,ek.A)({format:b},t.props),{picker:w})):{});var _=i();return Yu.createElement(m_.Consumer,null,(function(n){var o,i=f||n;return Yu.createElement(T_e,(0,ek.A)({separator:Yu.createElement("span",{"aria-label":"to",className:"".concat(A,"-separator")},Yu.createElement(L_e,null)),ref:t.pickerRef,placeholder:B_e(w,r,v),suffixIcon:"time"===w?Yu.createElement(ake,null):Yu.createElement(rke,null),clearIcon:Yu.createElement(Bk,null),allowClear:!0,transitionName:"".concat(_,"-slide-up")},m,k,{className:nk()((o={},(0,Ha.A)(o,"".concat(A,"-").concat(i),i),(0,Ha.A)(o,"".concat(A,"-borderless"),!p),o),d),locale:r.lang,prefixCls:A,getPopupContainer:s||l,generateConfig:e,prevIcon:Yu.createElement("span",{className:"".concat(A,"-prev-icon")}),nextIcon:Yu.createElement("span",{className:"".concat(A,"-next-icon")}),superPrevIcon:Yu.createElement("span",{className:"".concat(A,"-super-prev-icon")}),superNextIcon:Yu.createElement("span",{className:"".concat(A,"-super-next-icon")}),components:U_e,direction:a}))}))},t}return(0,$e.A)(r,[{key:"render",value:function(){return Yu.createElement(Xk,{componentName:"DatePicker",defaultLocale:$k},this.renderPicker)}}]),r}(Yu.Component);return t.contextType=o_,t}(e),c=n;return c.WeekPicker=r,c.MonthPicker=o,c.YearPicker=i,c.RangePicker=u,c.TimePicker=a,c.QuarterPicker=l,c}(o(9898).A),q_e=function(e){function t(){return(0,Ke.A)(this,t),H_e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){return Gu().createElement(W_e,Object.assign({},this.props,{locale:"enUS"===cc.getLanguage()?WAe.DatePicker:GAe.DatePicker}),this.props.children)}}])}(Yu.Component);Object.defineProperty(q_e,"RangePicker",{enumerable:!0,configurable:!0,writable:!0,value:W_e.RangePicker});const $_e=function(e){return Yu.createElement(i_,null,(function(t){var n,r=t.getPrefixCls,o=t.direction,i=e.prefixCls,a=e.type,l=void 0===a?"horizontal":a,u=e.orientation,c=void 0===u?"center":u,s=e.className,d=e.children,f=e.dashed,h=e.plain,p=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["prefixCls","type","orientation","className","children","dashed","plain"]),v=r("divider",i),m=c.length>0?"-".concat(c):c,g=!!d,b=nk()(v,"".concat(v,"-").concat(l),(n={},(0,Ha.A)(n,"".concat(v,"-with-text"),g),(0,Ha.A)(n,"".concat(v,"-with-text").concat(m),g),(0,Ha.A)(n,"".concat(v,"-dashed"),!!f),(0,Ha.A)(n,"".concat(v,"-plain"),!!h),(0,Ha.A)(n,"".concat(v,"-rtl"),"rtl"===o),n),s);return Yu.createElement("div",(0,ek.A)({className:b},p,{role:"separator"}),d&&Yu.createElement("span",{className:"".concat(v,"-inner-text")},d))}))},K_e=function(e){var t=e.actions;return Gu().createElement("div",{className:"ne-embed-nav","data-testid":"ne-embed-nav",onMouseDown:function(e){e.preventDefault()}},Gu().createElement("div",{className:"start-nav"},e.children),Gu().createElement("div",{className:"end-nav"},t.map((function(e,t){return e&&[t>0&&Gu().createElement($_e,{key:t,type:"vertical",className:"ne-embed-nav-divider"}),e]}))))};function Y_e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,G_e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function G_e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(G_e=function(){return!!e})()}var J_e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Y_e(this,t,arguments),Object.defineProperty(e,"handleCopyMessage",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=e.props.message,n=JSON.stringify(t,null," ");n&&(us(n)?mC.success(sc("复制成功")):mC.error(sc("复制失败")))}}),Object.defineProperty(e,"renderCardIcon",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=e.props.cardIcon;return t?Gu().createElement("div",{className:"ne-error-tips-card-icon"},t):null}}),Object.defineProperty(e,"renderContent",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=e.props.children;return Gu().createElement("div",{className:"ne-error-tips-content"},t)}}),Object.defineProperty(e,"renderOperation",{enumerable:!0,configurable:!0,writable:!0,value:function(){return e.props.message?Gu().createElement("div",{className:"ne-error-tips-operation"},Gu().createElement("span",{className:"ne-error-tips-operation-slash"},"|"),Gu().createElement(Qx,{title:sc("复制错误信息")},Gu().createElement("span",{className:"ne-error-tips-operation-icon",onClick:e.handleCopyMessage},Gu().createElement(SC,{type:"exclamation",size:16})))):null}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){var e={width:this.props.block?"100%":"auto"};return Gu().createElement("div",{className:"ne-error-tips",style:e},Gu().createElement("div",{className:"ne-error-tips-wrap"},this.renderCardIcon(),this.renderContent(),this.renderOperation()))}}])}(Yu.Component),X_e=Yu.createContext({labelAlign:"right",vertical:!1,itemRef:function(){}}),Q_e=Yu.createContext({updateItemErrors:function(){}}),Z_e=Yu.createContext({prefixCls:""});function eCe(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function tCe(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function nCe(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var n=getComputedStyle(e,null);return tCe(n.overflowY,t)||tCe(n.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function rCe(e,t,n,r,o,i,a,l){return i<e&&a>t||i>e&&a<t?0:i<=e&&l<=n||a>=t&&l>=n?i-e-r:a>t&&l<n||i<e&&l>n?a-t+o:0}var oCe=function(e,t){var n=window,r=t.scrollMode,o=t.block,i=t.inline,a=t.boundary,l=t.skipOverflowHiddenElements,u="function"==typeof a?a:function(e){return e!==a};if(!eCe(e))throw new TypeError("Invalid target");for(var c,s,d=document.scrollingElement||document.documentElement,f=[],h=e;eCe(h)&&u(h);){if((h=null==(s=(c=h).parentElement)?c.getRootNode().host||null:s)===d){f.push(h);break}null!=h&&h===document.body&&nCe(h)&&!nCe(document.documentElement)||null!=h&&nCe(h,l)&&f.push(h)}for(var p=n.visualViewport?n.visualViewport.width:innerWidth,v=n.visualViewport?n.visualViewport.height:innerHeight,m=window.scrollX||pageXOffset,g=window.scrollY||pageYOffset,b=e.getBoundingClientRect(),y=b.height,w=b.width,A=b.top,k=b.right,_=b.bottom,C=b.left,N="start"===o||"nearest"===o?A:"end"===o?_:A+y/2,O="center"===i?C+w/2:"end"===i?k:C,x=[],E=0;E<f.length;E++){var D=f[E],P=D.getBoundingClientRect(),R=P.height,S=P.width,T=P.top,j=P.right,I=P.bottom,B=P.left;if("if-needed"===r&&A>=0&&C>=0&&_<=v&&k<=p&&A>=T&&_<=I&&C>=B&&k<=j)return x;var M=getComputedStyle(D),F=parseInt(M.borderLeftWidth,10),L=parseInt(M.borderTopWidth,10),U=parseInt(M.borderRightWidth,10),V=parseInt(M.borderBottomWidth,10),H=0,z=0,W="offsetWidth"in D?D.offsetWidth-D.clientWidth-F-U:0,q="offsetHeight"in D?D.offsetHeight-D.clientHeight-L-V:0,$="offsetWidth"in D?0===D.offsetWidth?0:S/D.offsetWidth:0,K="offsetHeight"in D?0===D.offsetHeight?0:R/D.offsetHeight:0;if(d===D)H="start"===o?N:"end"===o?N-v:"nearest"===o?rCe(g,g+v,v,L,V,g+N,g+N+y,y):N-v/2,z="start"===i?O:"center"===i?O-p/2:"end"===i?O-p:rCe(m,m+p,p,F,U,m+O,m+O+w,w),H=Math.max(0,H+g),z=Math.max(0,z+m);else{H="start"===o?N-T-L:"end"===o?N-I+V+q:"nearest"===o?rCe(T,I,R,L,V+q,N,N+y,y):N-(T+R/2)+q/2,z="start"===i?O-B-F:"center"===i?O-(B+S/2)+W/2:"end"===i?O-j+U+W:rCe(B,j,S,F,U+W,O,O+w,w);var Y=D.scrollLeft,G=D.scrollTop;N+=G-(H=Math.max(0,Math.min(G+H/K,D.scrollHeight-R/K+q))),O+=Y-(z=Math.max(0,Math.min(Y+z/$,D.scrollWidth-S/$+W)))}x.push({el:D,top:H,left:z})}return x};function iCe(e){return e===Object(e)&&0!==Object.keys(e).length}function aCe(e){return void 0===e||!1===e?[]:Array.isArray(e)?e:[e]}function lCe(e,t){if(e.length){var n=e.join("_");return t?"".concat(t,"_").concat(n):n}}function uCe(e){return aCe(e).join("_")}function cCe(e){var t=(0,a_.useForm)(),n=(0,tn.A)(t,1)[0],r=Yu.useRef({}),o=Yu.useMemo((function(){return e||(0,ek.A)((0,ek.A)({},n),{__INTERNAL__:{itemRef:function(e){return function(t){var n=uCe(e);t?r.current[n]=t:delete r.current[n]}}},scrollToField:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=lCe(aCe(e),o.__INTERNAL__.name),r=n?document.getElementById(n):null;r&&function(e,t){var n=e.isConnected||e.ownerDocument.documentElement.contains(e);if(iCe(t)&&"function"==typeof t.behavior)return t.behavior(n?oCe(e,t):[]);if(n){var r=function(e){return!1===e?{block:"end",inline:"nearest"}:iCe(e)?e:{block:"start",inline:"nearest"}}(t);(function(e,t){void 0===t&&(t="auto");var n="scrollBehavior"in document.body.style;e.forEach((function(e){var r=e.el,o=e.top,i=e.left;r.scroll&&n?r.scroll({top:o,left:i,behavior:t}):(r.scrollTop=o,r.scrollLeft=i)}))})(oCe(e,r),r.behavior)}}(r,(0,ek.A)({scrollMode:"if-needed",block:"nearest"},t))},getFieldInstance:function(e){var t=uCe(e);return r.current[t]}})}),[e,n]);return[o]}var sCe=function(e,t){var n,r=Yu.useContext(m_),o=Yu.useContext(o_),i=o.getPrefixCls,a=o.direction,l=o.form,u=e.prefixCls,c=e.className,s=void 0===c?"":c,d=e.size,f=void 0===d?r:d,h=e.form,p=e.colon,v=e.labelAlign,m=e.labelCol,g=e.wrapperCol,b=e.hideRequiredMark,y=e.layout,w=void 0===y?"horizontal":y,A=e.scrollToFirstError,k=e.requiredMark,_=e.onFinishFailed,C=e.name,N=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["prefixCls","className","size","form","colon","labelAlign","labelCol","wrapperCol","hideRequiredMark","layout","scrollToFirstError","requiredMark","onFinishFailed","name"]),O=(0,Yu.useMemo)((function(){return void 0!==k?k:l&&void 0!==l.requiredMark?l.requiredMark:!b}),[b,k,l]),x=i("form",u),E=nk()(x,(n={},(0,Ha.A)(n,"".concat(x,"-").concat(w),!0),(0,Ha.A)(n,"".concat(x,"-hide-required-mark"),!1===O),(0,Ha.A)(n,"".concat(x,"-rtl"),"rtl"===a),(0,Ha.A)(n,"".concat(x,"-").concat(f),f),n),s),D=cCe(h),P=(0,tn.A)(D,1)[0],R=P.__INTERNAL__;R.name=C;var S=(0,Yu.useMemo)((function(){return{name:C,labelAlign:v,labelCol:m,wrapperCol:g,vertical:"vertical"===w,colon:p,requiredMark:O,itemRef:R.itemRef}}),[C,v,m,g,w,p,O]);return Yu.useImperativeHandle(t,(function(){return P})),Yu.createElement(v_,{size:f},Yu.createElement(X_e.Provider,{value:S},Yu.createElement(a_.default,(0,ek.A)({id:C},N,{name:C,onFinishFailed:function(e){null==_||_(e);var t={block:"nearest"};A&&e.errorFields.length&&("object"===(0,Gn.A)(A)&&(t=A),P.scrollToField(e.errorFields[0].name,t))},form:P,className:E}))))};const dCe=Yu.forwardRef(sCe);var fCe=o(8498);const hCe=(0,Yu.createContext)({});var pCe=["xxl","xl","lg","md","sm","xs"],vCe={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"},mCe=new Map,gCe=-1,bCe={},yCe={matchHandlers:{},dispatch:function(e){return bCe=e,mCe.forEach((function(e){return e(bCe)})),mCe.size>=1},subscribe:function(e){return mCe.size||this.register(),gCe+=1,mCe.set(gCe,e),e(bCe),gCe},unsubscribe:function(e){mCe.delete(e),mCe.size||this.unregister()},unregister:function(){var e=this;Object.keys(vCe).forEach((function(t){var n=vCe[t],r=e.matchHandlers[n];null==r||r.mql.removeListener(null==r?void 0:r.listener)})),mCe.clear()},register:function(){var e=this;Object.keys(vCe).forEach((function(t){var n=vCe[t],r=function(n){var r=n.matches;e.dispatch((0,ek.A)((0,ek.A)({},bCe),(0,Ha.A)({},t,r)))},o=window.matchMedia(n);o.addListener(r),e.matchHandlers[n]={mql:o,listener:r},r(o)}))}};const wCe=yCe;var ACe,kCe=o(9411),_Ce=function(){return(0,kCe.A)()&&window.document.documentElement};var CCe=(dx("top","middle","bottom","stretch"),dx("start","end","center","space-around","space-between"),Yu.forwardRef((function(e,t){var n,r=e.prefixCls,o=e.justify,i=e.align,a=e.className,l=e.style,u=e.children,c=e.gutter,s=void 0===c?0:c,d=e.wrap,f=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["prefixCls","justify","align","className","style","children","gutter","wrap"]),h=Yu.useContext(o_),p=h.getPrefixCls,v=h.direction,m=Yu.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),g=(0,tn.A)(m,2),b=g[0],y=g[1],w=function(){var e=Yu.useState(!1),t=(0,tn.A)(e,2),n=t[0],r=t[1];return Yu.useEffect((function(){r(function(){if(!_Ce())return!1;if(void 0!==ACe)return ACe;var e=document.createElement("div");return e.style.display="flex",e.style.flexDirection="column",e.style.rowGap="1px",e.appendChild(document.createElement("div")),e.appendChild(document.createElement("div")),document.body.appendChild(e),ACe=1===e.scrollHeight,document.body.removeChild(e),ACe}())}),[]),n}(),A=Yu.useRef(s);Yu.useEffect((function(){var e=wCe.subscribe((function(e){var t=A.current||0;(!Array.isArray(t)&&"object"===(0,Gn.A)(t)||Array.isArray(t)&&("object"===(0,Gn.A)(t[0])||"object"===(0,Gn.A)(t[1])))&&y(e)}));return function(){return wCe.unsubscribe(e)}}),[]);var k,_=p("row",r),C=(k=[0,0],(Array.isArray(s)?s:[s,0]).forEach((function(e,t){if("object"===(0,Gn.A)(e))for(var n=0;n<pCe.length;n++){var r=pCe[n];if(b[r]&&void 0!==e[r]){k[t]=e[r];break}}else k[t]=e||0})),k),N=nk()(_,(n={},(0,Ha.A)(n,"".concat(_,"-no-wrap"),!1===d),(0,Ha.A)(n,"".concat(_,"-").concat(o),o),(0,Ha.A)(n,"".concat(_,"-").concat(i),i),(0,Ha.A)(n,"".concat(_,"-rtl"),"rtl"===v),n),a),O={},x=C[0]>0?C[0]/-2:void 0,E=C[1]>0?C[1]/-2:void 0;if(x&&(O.marginLeft=x,O.marginRight=x),w){var D=(0,tn.A)(C,2);O.rowGap=D[1]}else E&&(O.marginTop=E,O.marginBottom=E);var P=Yu.useMemo((function(){return{gutter:C,wrap:d,supportFlexGap:w}}),[C,d,w]);return Yu.createElement(hCe.Provider,{value:P},Yu.createElement("div",(0,ek.A)({},f,{className:N,style:(0,ek.A)((0,ek.A)({},O),l),ref:t}),u))})));CCe.displayName="Row";const NCe=CCe,OCe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"};var xCe=function(e,t){return Yu.createElement(Ek,(0,ok.A)((0,ok.A)({},e),{},{ref:t,icon:OCe}))};const ECe=Yu.forwardRef(xCe);var DCe=["xs","sm","md","lg","xl","xxl"],PCe=Yu.forwardRef((function(e,t){var n,r=Yu.useContext(o_),o=r.getPrefixCls,i=r.direction,a=Yu.useContext(hCe),l=a.gutter,u=a.wrap,c=a.supportFlexGap,s=e.prefixCls,d=e.span,f=e.order,h=e.offset,p=e.push,v=e.pull,m=e.className,g=e.children,b=e.flex,y=e.style,w=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),A=o("col",s),k={};DCe.forEach((function(t){var n,r={},o=e[t];"number"==typeof o?r.span=o:"object"===(0,Gn.A)(o)&&(r=o||{}),delete w[t],k=(0,ek.A)((0,ek.A)({},k),(n={},(0,Ha.A)(n,"".concat(A,"-").concat(t,"-").concat(r.span),void 0!==r.span),(0,Ha.A)(n,"".concat(A,"-").concat(t,"-order-").concat(r.order),r.order||0===r.order),(0,Ha.A)(n,"".concat(A,"-").concat(t,"-offset-").concat(r.offset),r.offset||0===r.offset),(0,Ha.A)(n,"".concat(A,"-").concat(t,"-push-").concat(r.push),r.push||0===r.push),(0,Ha.A)(n,"".concat(A,"-").concat(t,"-pull-").concat(r.pull),r.pull||0===r.pull),(0,Ha.A)(n,"".concat(A,"-rtl"),"rtl"===i),n))}));var _=nk()(A,(n={},(0,Ha.A)(n,"".concat(A,"-").concat(d),void 0!==d),(0,Ha.A)(n,"".concat(A,"-order-").concat(f),f),(0,Ha.A)(n,"".concat(A,"-offset-").concat(h),h),(0,Ha.A)(n,"".concat(A,"-push-").concat(p),p),(0,Ha.A)(n,"".concat(A,"-pull-").concat(v),v),n),m,k),C={};if(l&&l[0]>0){var N=l[0]/2;C.paddingLeft=N,C.paddingRight=N}if(l&&l[1]>0&&!c){var O=l[1]/2;C.paddingTop=O,C.paddingBottom=O}return b&&(C.flex=function(e){return"number"==typeof e?"".concat(e," ").concat(e," auto"):/^\d+(\.\d+)?(px|em|rem|%)$/.test(e)?"0 0 ".concat(e):e}(b),"auto"!==b||!1!==u||C.minWidth||(C.minWidth=0)),Yu.createElement("div",(0,ek.A)({},w,{style:(0,ek.A)((0,ek.A)({},C),y),className:_,ref:t}),g)}));PCe.displayName="Col";const RCe=PCe;const SCe=function(e){var t,n,r,o,i=e.prefixCls,a=e.label,l=e.htmlFor,u=e.labelCol,c=e.labelAlign,s=e.colon,d=e.required,f=e.requiredMark,h=e.tooltip,p=(t="Form",r=Yu.useContext(Jk),o=Yu.useMemo((function(){var e=Gk.Form,n=t&&r?r[t]:{};return(0,ek.A)((0,ek.A)({},"function"==typeof e?e():e),n||{})}),[t,n,r]),[o]),v=(0,tn.A)(p,1)[0];return a?Yu.createElement(X_e.Consumer,{key:"label"},(function(e){var t,n,r=e.vertical,o=e.labelAlign,p=e.labelCol,m=e.colon,g=u||p||{},b=c||o,y="".concat(i,"-item-label"),w=nk()(y,"left"===b&&"".concat(y,"-left"),g.className),A=a,k=!0===s||!1!==m&&!1!==s;k&&!r&&"string"==typeof a&&""!==a.trim()&&(A=a.replace(/[:|：]\s*$/,""));var _=function(e){return e?"object"!==(0,Gn.A)(e)||Yu.isValidElement(e)?{title:e}:e:null}(h);if(_){var C=_.icon,N=void 0===C?Yu.createElement(ECe,null):C,O=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(_,["icon"]),x=Yu.createElement(Jx,O,Yu.cloneElement(N,{className:"".concat(i,"-item-tooltip")}));A=Yu.createElement(Yu.Fragment,null,A,x)}"optional"!==f||d||(A=Yu.createElement(Yu.Fragment,null,A,Yu.createElement("span",{className:"".concat(i,"-item-optional")},(null==v?void 0:v.optional)||(null===(n=Yk.Form)||void 0===n?void 0:n.optional))));var E=nk()((t={},(0,Ha.A)(t,"".concat(i,"-item-required"),d),(0,Ha.A)(t,"".concat(i,"-item-required-mark-optional"),"optional"===f),(0,Ha.A)(t,"".concat(i,"-item-no-colon"),!k),t));return Yu.createElement(RCe,(0,ek.A)({},g,{className:w}),Yu.createElement("label",{htmlFor:l,className:E,title:"string"==typeof a?a:""},A))})):null};function TCe(){var e=Yu.useReducer((function(e){return e+1}),0);return(0,tn.A)(e,2)[1]}var jCe=[];function ICe(e){var t=e.errors,n=void 0===t?jCe:t,r=e.help,o=e.onDomErrorVisibleChange,i=TCe(),a=Yu.useContext(Z_e),l=a.prefixCls,u=a.status,c=Yu.useContext(o_).getPrefixCls,s=function(e,t,n){var r=Yu.useRef({errors:e,visible:!!e.length}),o=TCe(),i=function(){var n=r.current.visible,i=!!e.length,a=r.current.errors;r.current.errors=e,r.current.visible=i,n!==i?t(i):(a.length!==e.length||a.some((function(t,n){return t!==e[n]})))&&o()};return Yu.useEffect((function(){if(!n){var e=setTimeout(i,10);return function(){return clearTimeout(e)}}}),[e]),n&&i(),[r.current.visible,r.current.errors]}(n,(function(e){e&&Promise.resolve().then((function(){null==o||o(!0)})),i()}),!!r),d=(0,tn.A)(s,2),f=d[0],h=d[1],p=(0,l_.A)((function(){return h}),f,(function(e,t){return t})),v=Yu.useState(u),m=(0,tn.A)(v,2),g=m[0],b=m[1];Yu.useEffect((function(){f&&u&&b(u)}),[f,u]);var y="".concat(l,"-item-explain"),w=c();return Yu.createElement(qC.Ay,{motionDeadline:500,visible:f,motionName:"".concat(w,"-show-help"),onLeaveEnd:function(){null==o||o(!1)},motionAppear:!0,removeOnLeave:!0},(function(e){var t=e.className;return Yu.createElement("div",{className:nk()(y,(0,Ha.A)({},"".concat(y,"-").concat(g),g),t),key:"help"},p.map((function(e,t){return Yu.createElement("div",{key:t,role:"alert"},e)})))}))}var BCe={success:Lk,warning:Tk,error:Bk,validating:Pk};const MCe=function(e){var t=e.prefixCls,n=e.status,r=e.wrapperCol,o=e.children,i=e.help,a=e.errors,l=e.onDomErrorVisibleChange,u=e.hasFeedback,c=e._internalItemRender,s=e.validateStatus,d=e.extra,f="".concat(t,"-item"),h=Yu.useContext(X_e),p=r||h.wrapperCol||{},v=nk()("".concat(f,"-control"),p.className);Yu.useEffect((function(){return function(){l(!1)}}),[]);var m=s&&BCe[s],g=u&&m?Yu.createElement("span",{className:"".concat(f,"-children-icon")},Yu.createElement(m,null)):null,b=(0,ek.A)({},h);delete b.labelCol,delete b.wrapperCol;var y=Yu.createElement("div",{className:"".concat(f,"-control-input")},Yu.createElement("div",{className:"".concat(f,"-control-input-content")},o),g),w=Yu.createElement(Z_e.Provider,{value:{prefixCls:t,status:n}},Yu.createElement(ICe,{errors:a,help:i,onDomErrorVisibleChange:l})),A=d?Yu.createElement("div",{className:"".concat(f,"-extra")},d):null,k=c&&"pro_table_render"===c.mark&&c.render?c.render(e,{input:y,errorList:w,extra:A}):Yu.createElement(Yu.Fragment,null,y,w,A);return Yu.createElement(X_e.Provider,{value:b},Yu.createElement(RCe,(0,ek.A)({},p,{className:v}),k))};var FCe="__SPLIT__",LCe=(dx("success","warning","error","validating",""),Yu.memo((function(e){return e.children}),(function(e,t){return e.value===t.value&&e.update===t.update})));var UCe=dCe;UCe.Item=function(e){var t=e.name,n=e.fieldKey,r=e.noStyle,o=e.dependencies,i=e.prefixCls,a=e.style,l=e.className,u=e.shouldUpdate,c=e.hasFeedback,s=e.help,d=e.rules,f=e.validateStatus,h=e.children,p=e.required,v=e.label,m=e.messageVariables,g=e.trigger,b=void 0===g?"onChange":g,y=e.validateTrigger,w=e.hidden,A=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["name","fieldKey","noStyle","dependencies","prefixCls","style","className","shouldUpdate","hasFeedback","help","rules","validateStatus","children","required","label","messageVariables","trigger","validateTrigger","hidden"]),k=(0,Yu.useRef)(!1),_=(0,Yu.useContext)(o_).getPrefixCls,C=(0,Yu.useContext)(X_e),N=C.name,O=C.requiredMark,x=(0,Yu.useContext)(Q_e).updateItemErrors,E=Yu.useState(!!s),D=(0,tn.A)(E,2),P=D[0],R=D[1],S=function(e){var t=Yu.useState({}),n=(0,tn.A)(t,2),r=n[0],o=n[1],i=(0,Yu.useRef)(null),a=(0,Yu.useRef)([]),l=(0,Yu.useRef)(!1);return Yu.useEffect((function(){return function(){l.current=!0,BC.A.cancel(i.current)}}),[]),[r,function(e){l.current||(null===i.current&&(a.current=[],i.current=(0,BC.A)((function(){i.current=null,o((function(e){var t=e;return a.current.forEach((function(e){t=e(t)})),t}))}))),a.current.push(e))}]}(),T=(0,tn.A)(S,2),j=T[0],I=T[1],B=(0,Yu.useContext)(fCe.A).validateTrigger,M=void 0!==y?y:B;function F(e){k.current||R(e)}var L=function(e){return null===e&&u_(!1,"Form.Item","`null` is passed as `name` property"),!(null==e)}(t),U=(0,Yu.useRef)([]);Yu.useEffect((function(){return function(){k.current=!0,x(U.current.join(FCe),[])}}),[]);var V,H,z=_("form",i),W=r?x:function(e,t,n){I((function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n!==e&&delete r[n],io()(r[e],t)?r:(0,ek.A)((0,ek.A)({},r),(0,Ha.A)({},e,t))}))},q=(V=Yu.useContext(X_e).itemRef,H=Yu.useRef({}),function(e,t){var n=t&&"object"===(0,Gn.A)(t)&&t.ref,r=e.join("_");return H.current.name===r&&H.current.originRef===n||(H.current.name=r,H.current.originRef=n,H.current.ref=(0,LC.K4)(V(e),n)),H.current.ref});function $(t,n,o,i){var u,d;if(r&&!w)return t;var h,p=[];Object.keys(j).forEach((function(e){p=[].concat((0,ln.A)(p),(0,ln.A)(j[e]||[]))})),null!=s?h=aCe(s):(h=o?o.errors:[],h=[].concat((0,ln.A)(h),(0,ln.A)(p)));var v="";void 0!==f?v=f:(null==o?void 0:o.validating)?v="validating":(null===(d=null==o?void 0:o.errors)||void 0===d?void 0:d.length)||p.length?v="error":(null==o?void 0:o.touched)&&(v="success");var m=(u={},(0,Ha.A)(u,"".concat(z,"-item"),!0),(0,Ha.A)(u,"".concat(z,"-item-with-help"),P||!!s),(0,Ha.A)(u,"".concat(l),!!l),(0,Ha.A)(u,"".concat(z,"-item-has-feedback"),v&&c),(0,Ha.A)(u,"".concat(z,"-item-has-success"),"success"===v),(0,Ha.A)(u,"".concat(z,"-item-has-warning"),"warning"===v),(0,Ha.A)(u,"".concat(z,"-item-has-error"),"error"===v),(0,Ha.A)(u,"".concat(z,"-item-is-validating"),"validating"===v),(0,Ha.A)(u,"".concat(z,"-item-hidden"),w),u);return Yu.createElement(NCe,(0,ek.A)({className:nk()(m),style:a,key:"row"},(0,tx.A)(A,["colon","extra","getValueFromEvent","getValueProps","htmlFor","id","initialValue","isListField","labelAlign","labelCol","normalize","preserve","tooltip","validateFirst","valuePropName","wrapperCol","_internalItemRender"])),Yu.createElement(SCe,(0,ek.A)({htmlFor:n,required:i,requiredMark:O},e,{prefixCls:z})),Yu.createElement(MCe,(0,ek.A)({},e,o,{errors:h,prefixCls:z,status:v,onDomErrorVisibleChange:F,validateStatus:v}),Yu.createElement(Q_e.Provider,{value:{updateItemErrors:W}},t)))}var K="function"==typeof h,Y=(0,Yu.useRef)(0);if(Y.current+=1,!L&&!K&&!o)return $(h);var G={};return"string"==typeof v&&(G.label=v),m&&(G=(0,ek.A)((0,ek.A)({},G),m)),Yu.createElement(a_.Field,(0,ek.A)({},e,{messageVariables:G,trigger:b,validateTrigger:M,onReset:function(){F(!1)}}),(function(i,a,l){var c=a.errors,s=aCe(t).length&&a?a.name:[],f=lCe(s,N);if(r){var v=U.current.join(FCe);if(U.current=(0,ln.A)(s),n){var m=Array.isArray(n)?n:[n];U.current=[].concat((0,ln.A)(s.slice(0,-1)),(0,ln.A)(m))}x(U.current.join(FCe),c,v)}var g=void 0!==p?p:!(!d||!d.some((function(e){if(e&&"object"===(0,Gn.A)(e)&&e.required)return!0;if("function"==typeof e){var t=e(l);return t&&t.required}return!1}))),y=(0,ek.A)({},i),w=null;if(u_(!(u&&o),"Form.Item","`shouldUpdate` and `dependencies` shouldn't be used together. See https://ant.design/components/form/#dependencies."),Array.isArray(h)&&L)u_(!1,"Form.Item","`children` is array of render props cannot have `name`."),w=h;else if(K&&(!u&&!o||L))u_(!(!u&&!o),"Form.Item","`children` of render props only work with `shouldUpdate` or `dependencies`."),u_(!L,"Form.Item","Do not use `name` with `children` of render props since it's not a field.");else if(!o||K||L)if(lx(h)){u_(void 0===h.props.defaultValue,"Form.Item","`defaultValue` will not work on controlled Field. You should use `initialValues` of Form instead.");var A=(0,ek.A)((0,ek.A)({},h.props),y);A.id||(A.id=f),(0,LC.f3)(h)&&(A.ref=q(s,h)),new Set([].concat((0,ln.A)(aCe(b)),(0,ln.A)(aCe(M)))).forEach((function(e){A[e]=function(){for(var t,n,r,o,i,a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];null===(r=y[e])||void 0===r||(t=r).call.apply(t,[y].concat(l)),null===(i=(o=h.props)[e])||void 0===i||(n=i).call.apply(n,[o].concat(l))}})),w=Yu.createElement(LCe,{value:y[e.valuePropName||"value"],update:Y.current},ux(h,A))}else K&&(u||o)&&!L?w=h(l):(u_(!s.length,"Form.Item","`name` is only used for validate React element. If you are using Form.Item as layout display, please remove `name` instead."),w=h);else u_(!1,"Form.Item","Must set `name` or use render props when `dependencies` is set.");return $(w,f,a,g)}))},UCe.List=function(e){var t=e.prefixCls,n=e.children,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["prefixCls","children"]);u_(!!r.name,"Form.List","Miss `name` prop.");var o=(0,Yu.useContext(o_).getPrefixCls)("form",t);return Yu.createElement(a_.List,r,(function(e,t,r){return Yu.createElement(Z_e.Provider,{value:{prefixCls:o,status:"error"}},n(e.map((function(e){return(0,ek.A)((0,ek.A)({},e),{fieldKey:e.key})})),t,{errors:r.errors}))}))},UCe.ErrorList=ICe,UCe.useForm=cCe,UCe.Provider=function(e){var t=(0,tx.A)(e,["prefixCls"]);return Yu.createElement(a_.FormProvider,t)},UCe.create=function(){u_(!1,"Form","antd v4 removed `Form.create`. Please remove or use `@ant-design/compatible` instead.")};const VCe=UCe;var HCe={UpArrow:"https://gw.alipayobjects.com/zos/hitu-asset/df50a78b-583a-4014-9d76-d39839508138/hitu-1652949307492-%25E4%25B8%258A%25E7%25AE%25AD%25E5%25A4%25B4.svg",DownArrow:"https://gw.alipayobjects.com/zos/hitu-asset/a6bc2572-56cb-486d-aed5-f50f3e79ad33/hitu-1652949307488-%25E4%25B8%258B%25E7%25AE%25AD%25E5%25A4%25B4.svg",LeftArrow:"https://gw.alipayobjects.com/zos/hitu-asset/72d8e3e8-691a-4540-b275-edab3ac17d0e/hitu-1652949307522-%25E5%25B7%25A6%25E7%25AE%25AD%25E5%25A4%25B4.svg",RightArrow:"https://gw.alipayobjects.com/zos/hitu-asset/a914abc0-ffb1-4cee-b727-995180d447db/hitu-1652949307505-%25E5%258F%25B3%25E7%25AE%25AD%25E5%25A4%25B4.svg",ActionCopy:"https://gw.alipayobjects.com/zos/hitu-asset/a0eb25fc-7a4a-4d52-829f-1c2d8afd6cc0/hitu-1652086152381-action-copy.svg",EditorPaste:"https://gw.alipayobjects.com/zos/hitu-asset/f6d0c9cc-54f8-4ab8-85e1-20246dd21918/hitu-1652085289962-editor-paste.svg",ActionDelete:"https://gw.alipayobjects.com/zos/hitu-asset/292f9777-47a4-449d-9008-e6693a8da80e/hitu-1652086152353-action-delete.svg",EditorLink:"https://gw.alipayobjects.com/zos/hitu-asset/2d1dd84f-8a5e-47f7-80af-5706c0b4feaf/hitu-1652085289665-editor-link.svg",RedDelete:"https://gw.alipayobjects.com/zos/bmw-prod/546be93c-28c6-4b92-b739-95f34a39b7a8.svg",ActionCut:"https://gw.alipayobjects.com/zos/bmw-prod/98e2d7ce-d65a-403c-b3c7-1cf9fc074464.svg",Bookmark:"https://gw.alipayobjects.com/zos/bmw-prod/576bbf05-9256-4fde-b02e-61d6bda903d2.svg",ActionEdit:"https://gw.alipayobjects.com/zos/bmw-prod/84b929e9-4d2a-4f5a-a379-6b8dc9d96f91.svg"};function zCe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,WCe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function WCe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(WCe=function(){return!!e})()}var qCe=function(e){function t(){return(0,Ke.A)(this,t),zCe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){var e=this.props;return Gu().createElement("div",{className:"ne-ui-link-card-view"},Gu().createElement("div",{className:"ne-ui-link-card-view-box"},Gu().createElement("span",{className:"ne-ui-link-card-view-icon"},Gu().createElement(Nye,{targetType:e.targetType,type:e.type,title:e.title,image:e.image})),Gu().createElement("div",{className:"ne-ui-link-card-view-content"},Gu().createElement("div",{className:"ne-ui-link-card-view-title"},e.title),Gu().createElement("div",{className:"ne-ui-link-card-view-desc"},vd.encodeHTML(e.desc)),Gu().createElement("div",{className:"ne-ui-link-card-view-belong"},vd.encodeHTML(e.belong||e.url)||"-"))))}}])}(Yu.Component);function $Ce(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,KCe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function KCe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(KCe=function(){return!!e})()}var YCe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=$Ce(this,t,arguments),Object.defineProperty(e,"_iframeRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){var e=this.props,t={transition:"all 0.3s linear"};return e.height&&(t.height=e.height),Gu().createElement("iframe",{className:"ne-ui-link-embed-view-iframe",src:yh.sanitizeUrl(e.src),frameBorder:"0",allowFullScreen:!0,style:t,ref:this._iframeRef,onLoad:this.props.onLoad})}}])}(Yu.Component);Object.defineProperty(YCe,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{onLoad:function(){}}});const GCe=YCe;function JCe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,XCe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function XCe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(XCe=function(){return!!e})()}var QCe=function(e){function t(){return(0,Ke.A)(this,t),JCe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"renderLoading",value:function(){return Gu().createElement("span",{className:"ne-ui-link-title-view"},Gu().createElement("span",{className:"ne-ui-link-title-view-content"},"内容获取中..."))}},{key:"renderError",value:function(){return Gu().createElement("span",{className:"ne-ui-link-title-view"},Gu().createElement("span",{className:"ne-ui-link-title-view-content"},"未能获取内容"))}},{key:"render",value:function(){var e=this.props;return Gu().createElement("span",{className:"ne-ui-link-title-view"},Gu().createElement("span",{className:"ne-ui-link-title-view-icon"},Gu().createElement(Nye,{targetType:e.targetType,type:e.type,title:e.title,image:e.image})),Gu().createElement("span",{className:"ne-ui-link-title-view-content"},e.title))}}])}(Yu.Component),ZCe=o(7323),eNe="".concat("accept acceptCharset accessKey action allowFullScreen allowTransparency\n    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge\n    charSet checked classID className colSpan cols content contentEditable contextMenu\n    controls coords crossOrigin data dateTime default defer dir disabled download draggable\n    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder\n    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity\n    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media\n    mediaGroup method min minLength multiple muted name noValidate nonce open\n    optimum pattern placeholder poster preload radioGroup readOnly rel required\n    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected\n    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style\n    summary tabIndex target title type useMap value width wmode wrap"," ").concat("onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown\n    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick\n    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown\n    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel\n    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough\n    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata\n    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError").split(/[\s\n]+/),tNe="aria-",nNe="data-";function rNe(e,t){return 0===e.indexOf(t)}function oNe(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=!1===n?{aria:!0,data:!0,attr:!0}:!0===n?{aria:!0}:(0,ok.A)({},n);var r={};return Object.keys(e).forEach((function(n){(t.aria&&("role"===n||rNe(n,tNe))||t.data&&rNe(n,nNe)||t.attr&&eNe.includes(n))&&(r[n]=e[n])})),r}function iNe(e){var t=e.prefixCls,n=e.style,r=e.visible,o=e.maskProps,i=e.motionName;return Yu.createElement(qC.Ay,{key:"mask",visible:r,motionName:i,leavedClassName:"".concat(t,"-mask-hidden")},(function(e){var r=e.className,i=e.style;return Yu.createElement("div",(0,ek.A)({style:(0,ok.A)((0,ok.A)({},i),n),className:nk()("".concat(t,"-mask"),r)},o))}))}function aNe(e,t,n){var r=t;return!r&&n&&(r="".concat(e,"-").concat(n)),r}var lNe=-1;function uNe(e,t){var n=e["page".concat(t?"Y":"X","Offset")],r="scroll".concat(t?"Top":"Left");if("number"!=typeof n){var o=e.document;"number"!=typeof(n=o.documentElement[r])&&(n=o.body[r])}return n}const cNe=Yu.memo((function(e){return e.children}),(function(e,t){return!t.shouldUpdate}));var sNe={width:0,height:0,overflow:"hidden",outline:"none"},dNe=Yu.forwardRef((function(e,t){var n=e.closable,r=e.prefixCls,o=e.width,i=e.height,a=e.footer,l=e.title,u=e.closeIcon,c=e.style,s=e.className,d=e.visible,f=e.forceRender,h=e.bodyStyle,p=e.bodyProps,v=e.children,m=e.destroyOnClose,g=e.modalRender,b=e.motionName,y=e.ariaId,w=e.onClose,A=e.onVisibleChanged,k=e.onMouseDown,_=e.onMouseUp,C=e.mousePosition,N=(0,Yu.useRef)(),O=(0,Yu.useRef)(),x=(0,Yu.useRef)();Yu.useImperativeHandle(t,(function(){return{focus:function(){var e;null===(e=N.current)||void 0===e||e.focus()},changeActive:function(e){var t=document.activeElement;e&&t===O.current?N.current.focus():e||t!==N.current||O.current.focus()}}}));var E,D,P,R=Yu.useState(),S=(0,tn.A)(R,2),T=S[0],j=S[1],I={};function B(){var e=function(e){var t=e.getBoundingClientRect(),n={left:t.left,top:t.top},r=e.ownerDocument,o=r.defaultView||r.parentWindow;return n.left+=uNe(o),n.top+=uNe(o,!0),n}(x.current);j(C?"".concat(C.x-e.left,"px ").concat(C.y-e.top,"px"):"")}void 0!==o&&(I.width=o),void 0!==i&&(I.height=i),T&&(I.transformOrigin=T),a&&(E=Yu.createElement("div",{className:"".concat(r,"-footer")},a)),l&&(D=Yu.createElement("div",{className:"".concat(r,"-header")},Yu.createElement("div",{className:"".concat(r,"-title"),id:y},l))),n&&(P=Yu.createElement("button",{type:"button",onClick:w,"aria-label":"Close",className:"".concat(r,"-close")},u||Yu.createElement("span",{className:"".concat(r,"-close-x")})));var M=Yu.createElement("div",{className:"".concat(r,"-content")},P,D,Yu.createElement("div",(0,ek.A)({className:"".concat(r,"-body"),style:h},p),v),E);return Yu.createElement(qC.Ay,{visible:d,onVisibleChanged:A,onAppearPrepare:B,onEnterPrepare:B,forceRender:f,motionName:b,removeOnLeave:m,ref:x},(function(e,t){var n=e.className,o=e.style;return Yu.createElement("div",{key:"dialog-element",role:"document",ref:t,style:(0,ok.A)((0,ok.A)((0,ok.A)({},o),c),I),className:nk()(r,s,n),onMouseDown:k,onMouseUp:_},Yu.createElement("div",{tabIndex:0,ref:N,style:sNe,"aria-hidden":"true"}),Yu.createElement(cNe,{shouldUpdate:d||f},g?g(M):M),Yu.createElement("div",{tabIndex:0,ref:O,style:sNe,"aria-hidden":"true"}))}))}));dNe.displayName="Content";const fNe=dNe;function hNe(e){var t=e.prefixCls,n=void 0===t?"rc-dialog":t,r=e.zIndex,o=e.visible,i=void 0!==o&&o,a=e.keyboard,l=void 0===a||a,u=e.focusTriggerAfterClose,c=void 0===u||u,s=e.scrollLocker,d=e.title,f=e.wrapStyle,h=e.wrapClassName,p=e.wrapProps,v=e.onClose,m=e.afterClose,g=e.transitionName,b=e.animation,y=e.closable,w=void 0===y||y,A=e.mask,k=void 0===A||A,_=e.maskTransitionName,C=e.maskAnimation,N=e.maskClosable,O=void 0===N||N,x=e.maskStyle,E=e.maskProps,D=(0,Yu.useRef)(),P=(0,Yu.useRef)(),R=(0,Yu.useRef)(),S=Yu.useState(i),T=(0,tn.A)(S,2),j=T[0],I=T[1],B=(0,Yu.useRef)();function M(e){null==v||v(e)}B.current||(B.current="rcDialogTitle".concat(lNe+=1));var F=(0,Yu.useRef)(!1),L=(0,Yu.useRef)(),U=null;return O&&(U=function(e){F.current?F.current=!1:P.current===e.target&&M(e)}),(0,Yu.useEffect)((function(){return i&&I(!0),function(){}}),[i]),(0,Yu.useEffect)((function(){return function(){clearTimeout(L.current)}}),[]),(0,Yu.useEffect)((function(){return j?(null==s||s.lock(),null==s?void 0:s.unLock):function(){}}),[j,s]),Yu.createElement("div",(0,ek.A)({className:"".concat(n,"-root")},oNe(e,{data:!0})),Yu.createElement(iNe,{prefixCls:n,visible:k&&i,motionName:aNe(n,_,C),style:(0,ok.A)({zIndex:r},x),maskProps:E}),Yu.createElement("div",(0,ek.A)({tabIndex:-1,onKeyDown:function(e){if(l&&e.keyCode===jE.A.ESC)return e.stopPropagation(),void M(e);i&&e.keyCode===jE.A.TAB&&R.current.changeActive(!e.shiftKey)},className:nk()("".concat(n,"-wrap"),h),ref:P,onClick:U,role:"dialog","aria-labelledby":d?B.current:null,style:(0,ok.A)((0,ok.A)({zIndex:r},f),{},{display:j?null:"none"})},p),Yu.createElement(fNe,(0,ek.A)({},e,{onMouseDown:function(){clearTimeout(L.current),F.current=!0},onMouseUp:function(){L.current=setTimeout((function(){F.current=!1}))},ref:R,closable:w,ariaId:B.current,prefixCls:n,visible:i,onClose:M,onVisibleChanged:function(e){if(e){var t;(0,MC.A)(P.current,document.activeElement)||(D.current=document.activeElement,null===(t=R.current)||void 0===t||t.focus())}else{if(I(!1),k&&D.current&&c){try{D.current.focus({preventScroll:!0})}catch(e){}D.current=null}j&&(null==m||m())}},motionName:aNe(n,g,b)}))))}var pNe=function(e){var t=e.visible,n=e.getContainer,r=e.forceRender,o=e.destroyOnClose,i=void 0!==o&&o,a=e.afterClose,l=Yu.useState(t),u=(0,tn.A)(l,2),c=u[0],s=u[1];return Yu.useEffect((function(){t&&s(!0)}),[t]),!1===n?Yu.createElement(hNe,(0,ek.A)({},e,{getOpenCount:function(){return 2}})):r||!i||c?Yu.createElement(ZCe.A,{visible:t,forceRender:r,getContainer:n},(function(t){return Yu.createElement(hNe,(0,ek.A)({},e,{destroyOnClose:i,afterClose:function(){null==a||a(),s(!1)}},t))})):null};pNe.displayName="Dialog";const vNe=pNe,mNe=function(e){var t=Yu.useRef(!1),n=Yu.useRef(),r=Yu.useState(!1),o=(0,tn.A)(r,2),i=o[0],a=o[1];Yu.useEffect((function(){var t;if(e.autoFocus){var r=n.current;t=setTimeout((function(){return r.focus()}))}return function(){t&&clearTimeout(t)}}),[]);var l=e.type,u=e.children,c=e.prefixCls,s=e.buttonProps;return Yu.createElement(Ax,(0,ek.A)({},bx(l),{onClick:function(){var n=e.actionFn,r=e.closeModal;if(!t.current)if(t.current=!0,n){var o;if(n.length)o=n(r),t.current=!1;else if(!(o=n()))return void r();!function(n){var r=e.closeModal;n&&n.then&&(a(!0),n.then((function(){r.apply(void 0,arguments)}),(function(e){console.error(e),a(!1),t.current=!1})))}(o)}else r()},loading:i,prefixCls:c},s,{ref:n}),u)},gNe=function(e){var t=e.icon,n=e.onCancel,r=e.onOk,o=e.close,i=e.zIndex,a=e.afterClose,l=e.visible,u=e.keyboard,c=e.centered,s=e.getContainer,d=e.maskStyle,f=e.okText,h=e.okButtonProps,p=e.cancelText,v=e.cancelButtonProps,m=e.direction,g=e.prefixCls,b=e.rootPrefixCls,y=e.bodyStyle,w=e.closable,A=void 0!==w&&w,k=e.closeIcon,_=e.modalRender,C=e.focusTriggerAfterClose;u_(!("string"==typeof t&&t.length>2),"Modal","`icon` is using ReactNode instead of string naming in v4. Please check `".concat(t,"` at https://ant.design/components/icon"));var N=e.okType||"primary",O="".concat(g,"-confirm"),x=!("okCancel"in e)||e.okCancel,E=e.width||416,D=e.style||{},P=void 0===e.mask||e.mask,R=void 0!==e.maskClosable&&e.maskClosable,S=null!==e.autoFocusButton&&(e.autoFocusButton||"ok"),T=nk()(O,"".concat(O,"-").concat(e.type),(0,Ha.A)({},"".concat(O,"-rtl"),"rtl"===m),e.className),j=x&&Yu.createElement(mNe,{actionFn:n,closeModal:o,autoFocus:"cancel"===S,buttonProps:v,prefixCls:"".concat(b,"-btn")},p);return Yu.createElement(TNe,{prefixCls:g,className:T,wrapClassName:nk()((0,Ha.A)({},"".concat(O,"-centered"),!!e.centered)),onCancel:function(){return o({triggerCancel:!0})},visible:l,title:"",footer:"",transitionName:$x(b,"zoom",e.transitionName),maskTransitionName:$x(b,"fade",e.maskTransitionName),mask:P,maskClosable:R,maskStyle:d,style:D,width:E,zIndex:i,afterClose:a,keyboard:u,centered:c,getContainer:s,closable:A,closeIcon:k,modalRender:_,focusTriggerAfterClose:C},Yu.createElement("div",{className:"".concat(O,"-body-wrapper")},Yu.createElement(Z_,{prefixCls:b},Yu.createElement("div",{className:"".concat(O,"-body"),style:y},t,void 0===e.title?null:Yu.createElement("span",{className:"".concat(O,"-title")},e.title),Yu.createElement("div",{className:"".concat(O,"-content")},e.content))),Yu.createElement("div",{className:"".concat(O,"-btns")},j,Yu.createElement(mNe,{type:N,actionFn:r,closeModal:o,autoFocus:"ok"===S,buttonProps:h,prefixCls:"".concat(b,"-btn")},f))))};var bNe=function(e,t){var n=e.afterClose,r=e.config,o=Yu.useState(!0),i=(0,tn.A)(o,2),a=i[0],l=i[1],u=Yu.useState(r),c=(0,tn.A)(u,2),s=c[0],d=c[1],f=Yu.useContext(o_),h=f.direction,p=f.getPrefixCls,v=p("modal"),m=p();function g(){l(!1);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.some((function(e){return e&&e.triggerCancel}));s.onCancel&&r&&s.onCancel()}return Yu.useImperativeHandle(t,(function(){return{destroy:g,update:function(e){d((function(t){return(0,ek.A)((0,ek.A)({},t),e)}))}}})),Yu.createElement(Xk,{componentName:"Modal",defaultLocale:Yk.Modal},(function(e){return Yu.createElement(gNe,(0,ek.A)({prefixCls:v,rootPrefixCls:m},s,{close:g,visible:a,afterClose:n,okText:s.okText||(s.okCancel?e.okText:e.justOkText),direction:h,cancelText:s.cancelText||e.cancelText}))}))};const yNe=Yu.forwardRef(bNe);var wNe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},ANe="";function kNe(e){var t=document.createElement("div");document.body.appendChild(t);var n=(0,ek.A)((0,ek.A)({},e),{close:i,visible:!0});function r(){Yl.unmountComponentAtNode(t)&&t.parentNode&&t.parentNode.removeChild(t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];var a=r.some((function(e){return e&&e.triggerCancel}));e.onCancel&&a&&e.onCancel.apply(e,r);for(var l=0;l<RNe.length;l++)if(RNe[l]===i){RNe.splice(l,1);break}}function o(e){var n=e.okText,r=e.cancelText,o=e.prefixCls,i=wNe(e,["okText","cancelText","prefixCls"]);setTimeout((function(){var e=d_(),a=(0,J_().getPrefixCls)(void 0,ANe),l=o||"".concat(a,"-modal");Yl.render(Yu.createElement(gNe,(0,ek.A)({},i,{prefixCls:l,rootPrefixCls:a,okText:n||(i.okCancel?e.okText:e.justOkText),cancelText:r||e.cancelText})),t)}))}function i(){for(var t=this,i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];o(n=(0,ek.A)((0,ek.A)({},n),{visible:!1,afterClose:function(){"function"==typeof e.afterClose&&e.afterClose(),r.apply(t,a)}}))}return o(n),RNe.push(i),{destroy:i,update:function(e){o(n="function"==typeof e?e(n):(0,ek.A)((0,ek.A)({},n),e))}}}function _Ne(e){return(0,ek.A)((0,ek.A)({icon:Yu.createElement(E_,null),okCancel:!1},e),{type:"warning"})}function CNe(e){return(0,ek.A)((0,ek.A)({icon:Yu.createElement(R_,null),okCancel:!1},e),{type:"info"})}function NNe(e){return(0,ek.A)((0,ek.A)({icon:Yu.createElement(k_,null),okCancel:!1},e),{type:"success"})}function ONe(e){return(0,ek.A)((0,ek.A)({icon:Yu.createElement(N_,null),okCancel:!1},e),{type:"error"})}function xNe(e){return(0,ek.A)((0,ek.A)({icon:Yu.createElement(E_,null),okCancel:!0},e),{type:"confirm"})}var ENe,DNe=0,PNe=Yu.memo(Yu.forwardRef((function(e,t){var n=function(){var e=Yu.useState([]),t=(0,tn.A)(e,2),n=t[0],r=t[1];return[n,Yu.useCallback((function(e){return r((function(t){return[].concat((0,ln.A)(t),[e])})),function(){r((function(t){return t.filter((function(t){return t!==e}))}))}}),[])]}(),r=(0,tn.A)(n,2),o=r[0],i=r[1];return Yu.useImperativeHandle(t,(function(){return{patchElement:i}}),[]),Yu.createElement(Yu.Fragment,null,o)}))),RNe=[];_Ce()&&document.documentElement.addEventListener("click",(function(e){ENe={x:e.pageX,y:e.pageY},setTimeout((function(){ENe=null}),100)}),!0);var SNe=function(e){var t,n=Yu.useContext(o_),r=n.getPopupContainer,o=n.getPrefixCls,i=n.direction,a=function(t){var n=e.onCancel;null==n||n(t)},l=function(t){var n=e.onOk;null==n||n(t)},u=function(t){var n=e.okText,r=e.okType,o=e.cancelText,i=e.confirmLoading;return Yu.createElement(Yu.Fragment,null,Yu.createElement(Ax,(0,ek.A)({onClick:a},e.cancelButtonProps),o||t.cancelText),Yu.createElement(Ax,(0,ek.A)({},bx(r),{loading:i,onClick:l},e.okButtonProps),n||t.okText))},c=e.prefixCls,s=e.footer,d=e.visible,f=e.wrapClassName,h=e.centered,p=e.getContainer,v=e.closeIcon,m=e.focusTriggerAfterClose,g=void 0===m||m,b=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["prefixCls","footer","visible","wrapClassName","centered","getContainer","closeIcon","focusTriggerAfterClose"]),y=o("modal",c),w=o(),A=Yu.createElement(Xk,{componentName:"Modal",defaultLocale:d_()},u),k=Yu.createElement("span",{className:"".concat(y,"-close-x")},v||Yu.createElement(y_,{className:"".concat(y,"-close-icon")})),_=nk()(f,(t={},(0,Ha.A)(t,"".concat(y,"-centered"),!!h),(0,Ha.A)(t,"".concat(y,"-wrap-rtl"),"rtl"===i),t));return Yu.createElement(vNe,(0,ek.A)({},b,{getContainer:void 0===p?r:p,prefixCls:y,wrapClassName:_,footer:void 0===s?A:s,visible:d,mousePosition:ENe,onClose:a,closeIcon:k,focusTriggerAfterClose:g,transitionName:$x(w,"zoom",e.transitionName),maskTransitionName:$x(w,"fade",e.maskTransitionName)}))};SNe.useModal=function(){var e=Yu.useRef(null),t=Yu.useState([]),n=(0,tn.A)(t,2),r=n[0],o=n[1];Yu.useEffect((function(){r.length&&((0,ln.A)(r).forEach((function(e){e()})),o([]))}),[r]);var i=Yu.useCallback((function(t){return function(n){var r;DNe+=1;var i,a=Yu.createRef(),l=Yu.createElement(yNe,{key:"modal-".concat(DNe),config:t(n),ref:a,afterClose:function(){i()}});return i=null===(r=e.current)||void 0===r?void 0:r.patchElement(l),{destroy:function(){function e(){var e;null===(e=a.current)||void 0===e||e.destroy()}a.current?e():o((function(t){return[].concat((0,ln.A)(t),[e])}))},update:function(e){function t(){var t;null===(t=a.current)||void 0===t||t.update(e)}a.current?t():o((function(e){return[].concat((0,ln.A)(e),[t])}))}}}}),[]);return[Yu.useMemo((function(){return{info:i(CNe),success:i(NNe),error:i(ONe),warning:i(_Ne),confirm:i(xNe)}}),[]),Yu.createElement(PNe,{ref:e})]},SNe.defaultProps={width:520,confirmLoading:!1,visible:!1,okType:"primary"};const TNe=SNe;function jNe(e){return kNe(_Ne(e))}var INe=TNe;INe.info=function(e){return kNe(CNe(e))},INe.success=function(e){return kNe(NNe(e))},INe.error=function(e){return kNe(ONe(e))},INe.warning=jNe,INe.warn=jNe,INe.confirm=function(e){return kNe(xNe(e))},INe.destroyAll=function(){for(;RNe.length;){var e=RNe.pop();e&&e()}},INe.config=function(e){var t=e.rootPrefixCls;u_(!1,"Modal","Modal.config is deprecated. Please use ConfigProvider.config instead."),ANe=t};const BNe=INe;function MNe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,FNe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function FNe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(FNe=function(){return!!e})()}var LNe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=MNe(this,t,arguments),Object.defineProperty(e,"state",{enumerable:!0,configurable:!0,writable:!0,value:{selectedIndex:e.props.defaultIndex}}),Object.defineProperty(e,"selectUp",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t,n=e.props.data;n&&n.length&&(t=e.state.selectedIndex<=0?n.length-1:e.state.selectedIndex-1,e.setState({selectedIndex:t},(function(){var t=document.querySelector(".ne-ui-mode-menu-item-selected");e.scrollToItem(t)})))}}),Object.defineProperty(e,"selectDown",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t,n=e.props.data;n&&n.length&&(t=e.state.selectedIndex>=n.length-1?0:e.state.selectedIndex+1,e.setState({selectedIndex:t},(function(){var t=document.querySelector(".ne-ui-link-mode-item-selected");e.scrollToItem(t)})))}}),Object.defineProperty(e,"getSelected",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t,n=e.state.selectedIndex,r=null===(t=e.props.data)||void 0===t?void 0:t[n];return r?{item:r,index:n}:null}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"scrollToItem",value:function(e){if(e){var t=e.parentNode,n=t.getBoundingClientRect(),r=e.getBoundingClientRect();r.bottom>n.bottom?t.scrollTop=t.scrollTop+(r.bottom-n.bottom)+50:r.top<n.top&&(t.scrollTop=t.scrollTop-(n.top-r.top)-50)}}},{key:"render",value:function(){var e;if(!(null===(e=this.props.data)||void 0===e?void 0:e.length))return null;var t=this.props.targetNode;return Gu().createElement(nR,{targetNode:t,boundaryNode:this.props.boundaryNode,uiEmitter:this.props.uiEmitter,visible:!0,placement:["bottomRight","bottomLeft","topRight"],onClose:this.props.onClose,onCancel:this.props.onCancel,allowClose:!1,positionHandle:function(e,n,r,o){var i="function"==typeof t?t():t;if(r.left&&r.left<156&&e.parentElement){var a=e.parentElement.getBoundingClientRect(),l=i.getBoundingClientRect();r.left=l.left-a.left+154}o(e,r)}},this._renderPanel())}},{key:"_renderPanel",value:function(){var e=this;return Gu().createElement("div",{className:"ne-ui-mode-menu-panel","data-testid":"ne-ui-mode-menu-panel"},Gu().createElement("div",{className:"ne-ui-mode-menu-list"},(this.props.data||[]).map((function(t,n){var r=e.state.selectedIndex===n;return Gu().createElement("div",{key:n,className:nk()("ne-ui-mode-menu-item",{"ne-ui-mode-menu-item-selected":r}),onClick:function(){return e.props.onSubmit(t,n)}},Gu().createElement(SC,{type:t.icon,size:16}),Gu().createElement("span",{className:"ne-ui-mode-menu-item-title"},t.text||t.tooltip),e.props.defaultIndex===n?Gu().createElement(SC,{type:"check",size:16}):null)}))))}}])}(Yu.Component);Object.defineProperty(LNe,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{defaultIndex:-1,onClose:function(){},onCancel:function(){},onSubmit:function(){}}});var UNe=o(6491),VNe=Yu.forwardRef((function(e,t){var n=e.height,r=e.offsetY,o=e.offsetX,i=e.children,a=e.prefixCls,l=e.onInnerResize,u=e.innerProps,c=e.rtl,s=e.extra,d={},f={display:"flex",flexDirection:"column"};return void 0!==r&&(d={height:n,position:"relative",overflow:"hidden"},f=(0,ok.A)((0,ok.A)({},f),{},(0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)({transform:"translateY(".concat(r,"px)")},c?"marginRight":"marginLeft",-o),"position","absolute"),"left",0),"right",0),"top",0))),Yu.createElement("div",{style:d},Yu.createElement(fE,{onResize:function(e){e.offsetHeight&&l&&l()}},Yu.createElement("div",(0,ek.A)({style:f,className:nk()((0,Ha.A)({},"".concat(a,"-holder-inner"),a)),ref:t},u),i,s)))}));VNe.displayName="Filler";const HNe=VNe;function zNe(e){var t=e.children,n=e.setRef,r=Yu.useCallback((function(e){n(e)}),[]);return Yu.cloneElement(t,{ref:r})}const WNe="object"===("undefined"==typeof navigator?"undefined":(0,Gn.A)(navigator))&&/Firefox/i.test(navigator.userAgent),qNe=function(e,t,n,r){var o=(0,Yu.useRef)(!1),i=(0,Yu.useRef)(null),a=(0,Yu.useRef)({top:e,bottom:t,left:n,right:r});return a.current.top=e,a.current.bottom=t,a.current.left=n,a.current.right=r,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e?t<0&&a.current.left||t>0&&a.current.right:t<0&&a.current.top||t>0&&a.current.bottom;return n&&r?(clearTimeout(i.current),o.current=!1):r&&!o.current||(clearTimeout(i.current),o.current=!0,i.current=setTimeout((function(){o.current=!1}),50)),!o.current&&r}};var $Ne=function(){function e(){(0,Ke.A)(this,e),(0,Ha.A)(this,"maps",void 0),(0,Ha.A)(this,"id",0),this.maps=Object.create(null)}return(0,$e.A)(e,[{key:"set",value:function(e,t){this.maps[e]=t,this.id+=1}},{key:"get",value:function(e){return this.maps[e]}}]),e}();const KNe=$Ne;var YNe=14/15;function GNe(e,t){return("touches"in e?e.touches[0]:e)[t?"pageX":"pageY"]}var JNe=Yu.forwardRef((function(e,t){var n=e.prefixCls,r=e.rtl,o=e.scrollOffset,i=e.scrollRange,a=e.onStartMove,l=e.onStopMove,u=e.onScroll,c=e.horizontal,s=e.spinSize,d=e.containerSize,f=e.style,h=e.thumbStyle,p=Yu.useState(!1),v=(0,tn.A)(p,2),m=v[0],g=v[1],b=Yu.useState(null),y=(0,tn.A)(b,2),w=y[0],A=y[1],k=Yu.useState(null),_=(0,tn.A)(k,2),C=_[0],N=_[1],O=!r,x=Yu.useRef(),E=Yu.useRef(),D=Yu.useState(!1),P=(0,tn.A)(D,2),R=P[0],S=P[1],T=Yu.useRef(),j=function(){clearTimeout(T.current),S(!0),T.current=setTimeout((function(){S(!1)}),3e3)},I=i-d||0,B=d-s||0,M=Yu.useMemo((function(){return 0===o||0===I?0:o/I*B}),[o,I,B]),F=Yu.useRef({top:M,dragging:m,pageY:w,startTop:C});F.current={top:M,dragging:m,pageY:w,startTop:C};var L=function(e){g(!0),A(GNe(e,c)),N(F.current.top),a(),e.stopPropagation(),e.preventDefault()};Yu.useEffect((function(){var e=function(e){e.preventDefault()},t=x.current,n=E.current;return t.addEventListener("touchstart",e,{passive:!1}),n.addEventListener("touchstart",L,{passive:!1}),function(){t.removeEventListener("touchstart",e),n.removeEventListener("touchstart",L)}}),[]);var U=Yu.useRef();U.current=I;var V=Yu.useRef();V.current=B,Yu.useEffect((function(){if(m){var e,t=function(t){var n=F.current,r=n.dragging,o=n.pageY,i=n.startTop;BC.A.cancel(e);var a=x.current.getBoundingClientRect(),l=d/(c?a.width:a.height);if(r){var s=(GNe(t,c)-o)*l,f=i;!O&&c?f-=s:f+=s;var h=U.current,p=V.current,v=p?f/p:0,m=Math.ceil(v*h);m=Math.max(m,0),m=Math.min(m,h),e=(0,BC.A)((function(){u(m,c)}))}},n=function(){g(!1),l()};return window.addEventListener("mousemove",t,{passive:!0}),window.addEventListener("touchmove",t,{passive:!0}),window.addEventListener("mouseup",n,{passive:!0}),window.addEventListener("touchend",n,{passive:!0}),function(){window.removeEventListener("mousemove",t),window.removeEventListener("touchmove",t),window.removeEventListener("mouseup",n),window.removeEventListener("touchend",n),BC.A.cancel(e)}}}),[m]),Yu.useEffect((function(){return j(),function(){clearTimeout(T.current)}}),[o]),Yu.useImperativeHandle(t,(function(){return{delayHidden:j}}));var H="".concat(n,"-scrollbar"),z={position:"absolute",visibility:R?null:"hidden"},W={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return c?(z.height=8,z.left=0,z.right=0,z.bottom=0,W.height="100%",W.width=s,O?W.left=M:W.right=M):(z.width=8,z.top=0,z.bottom=0,O?z.right=0:z.left=0,W.width="100%",W.height=s,W.top=M),Yu.createElement("div",{ref:x,className:nk()(H,(0,Ha.A)((0,Ha.A)((0,Ha.A)({},"".concat(H,"-horizontal"),c),"".concat(H,"-vertical"),!c),"".concat(H,"-visible"),R)),style:(0,ok.A)((0,ok.A)({},z),f),onMouseDown:function(e){e.stopPropagation(),e.preventDefault()},onMouseMove:j},Yu.createElement("div",{ref:E,className:nk()("".concat(H,"-thumb"),(0,Ha.A)({},"".concat(H,"-thumb-moving"),m)),style:(0,ok.A)((0,ok.A)({},W),h),onMouseDown:L}))}));const XNe=JNe;var QNe=20;function ZNe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=e/(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)*e;return isNaN(t)&&(t=0),t=Math.max(t,QNe),Math.floor(t)}var eOe=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles"],tOe=[],nOe={overflowY:"auto",overflowAnchor:"none"};function rOe(e,t){var n=e.prefixCls,r=void 0===n?"rc-virtual-list":n,o=e.className,i=e.height,a=e.itemHeight,l=e.fullHeight,u=void 0===l||l,c=e.style,s=e.data,d=e.children,f=e.itemKey,h=e.virtual,p=e.direction,v=e.scrollWidth,m=e.component,g=void 0===m?"div":m,b=e.onScroll,y=e.onVirtualScroll,w=e.onVisibleChange,A=e.innerProps,k=e.extraRender,_=e.styles,C=(0,ak.A)(e,eOe),N=Yu.useCallback((function(e){return"function"==typeof f?f(e):null==e?void 0:e[f]}),[f]),O=function(e,t,n){var r=Yu.useState(0),o=(0,tn.A)(r,2),i=o[0],a=o[1],l=(0,Yu.useRef)(new Map),u=(0,Yu.useRef)(new KNe),c=(0,Yu.useRef)();function s(){BC.A.cancel(c.current)}function d(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];s();var t=function(){l.current.forEach((function(e,t){if(e&&e.offsetParent){var n=(0,FC.Ay)(e),r=n.offsetHeight;u.current.get(t)!==r&&u.current.set(t,n.offsetHeight)}})),a((function(e){return e+1}))};e?t():c.current=(0,BC.A)(t)}return(0,Yu.useEffect)((function(){return s}),[]),[function(t,n){var r=e(t);l.current.get(r);n?(l.current.set(r,n),d()):l.current.delete(r)},d,u.current,i]}(N),x=(0,tn.A)(O,4),E=x[0],D=x[1],P=x[2],R=x[3],S=!(!1===h||!i||!a),T=Yu.useMemo((function(){return Object.values(P.maps).reduce((function(e,t){return e+t}),0)}),[P.id,P.maps]),j=S&&s&&(Math.max(a*s.length,T)>i||!!v),I="rtl"===p,B=nk()(r,(0,Ha.A)({},"".concat(r,"-rtl"),I),o),M=s||tOe,F=(0,Yu.useRef)(),L=(0,Yu.useRef)(),U=(0,Yu.useRef)(),V=(0,Yu.useState)(0),H=(0,tn.A)(V,2),z=H[0],W=H[1],q=(0,Yu.useState)(0),$=(0,tn.A)(q,2),K=$[0],Y=$[1],G=(0,Yu.useState)(!1),J=(0,tn.A)(G,2),X=J[0],Q=J[1],Z=function(){Q(!0)},ee=function(){Q(!1)},te={getKey:N};function ne(e){W((function(t){var n=function(e){var t=e;return Number.isNaN(Ae.current)||(t=Math.min(t,Ae.current)),t=Math.max(t,0)}("function"==typeof e?e(t):e);return F.current.scrollTop=n,n}))}var re=(0,Yu.useRef)({start:0,end:M.length}),oe=(0,Yu.useRef)(),ie=function(e,t,n){var r=Yu.useState(e),o=(0,tn.A)(r,2),i=o[0],a=o[1],l=Yu.useState(null),u=(0,tn.A)(l,2),c=u[0],s=u[1];return Yu.useEffect((function(){var r=function(e,t,n){var r,o,i=e.length,a=t.length;if(0===i&&0===a)return null;i<a?(r=e,o=t):(r=t,o=e);var l={__EMPTY_ITEM__:!0};function u(e){return void 0!==e?n(e):l}for(var c=null,s=1!==Math.abs(i-a),d=0;d<o.length;d+=1){var f=u(r[d]);if(f!==u(o[d])){c=d,s=s||f!==u(o[d+1]);break}}return null===c?null:{index:c,multiple:s}}(i||[],e||[],t);void 0!==(null==r?void 0:r.index)&&(null==n||n(r.index),s(e[r.index])),a(e)}),[e]),[c]}(M,N),ae=(0,tn.A)(ie,1)[0];oe.current=ae;var le=Yu.useMemo((function(){if(!S)return{scrollHeight:void 0,start:0,end:M.length-1,offset:void 0};var e;if(!j)return{scrollHeight:(null===(e=L.current)||void 0===e?void 0:e.offsetHeight)||0,start:0,end:M.length-1,offset:void 0};for(var t,n,r,o=0,l=M.length,u=0;u<l;u+=1){var c=M[u],s=N(c),d=P.get(s),f=o+(void 0===d?a:d);f>=z&&void 0===t&&(t=u,n=o),f>z+i&&void 0===r&&(r=u),o=f}return void 0===t&&(t=0,n=0,r=Math.ceil(i/a)),void 0===r&&(r=M.length-1),{scrollHeight:o,start:t,end:r=Math.min(r+1,M.length-1),offset:n}}),[j,S,z,M,R,i]),ue=le.scrollHeight,ce=le.start,se=le.end,de=le.offset;re.current.start=ce,re.current.end=se;var fe=Yu.useState({width:0,height:i}),he=(0,tn.A)(fe,2),pe=he[0],ve=he[1],me=(0,Yu.useRef)(),ge=(0,Yu.useRef)(),be=Yu.useMemo((function(){return ZNe(pe.width,v)}),[pe.width,v]),ye=Yu.useMemo((function(){return ZNe(pe.height,ue)}),[pe.height,ue]),we=ue-i,Ae=(0,Yu.useRef)(we);Ae.current=we;var ke=z<=0,_e=z>=we,Ce=K<=0,Ne=K>=v,Oe=qNe(ke,_e,Ce,Ne),xe=function(){return{x:I?-K:K,y:z}},Ee=(0,Yu.useRef)(xe()),De=(0,UNe._q)((function(e){if(y){var t=(0,ok.A)((0,ok.A)({},xe()),e);Ee.current.x===t.x&&Ee.current.y===t.y||(y(t),Ee.current=t)}}));function Pe(e,t){var n=e;t?((0,Yl.flushSync)((function(){Y(n)})),De()):ne(n)}var Re=function(e){var t=e,n=v?v-pe.width:0;return t=Math.max(t,0),Math.min(t,n)},Se=(0,UNe._q)((function(e,t){t?((0,Yl.flushSync)((function(){Y((function(t){return Re(t+(I?-e:e))}))})),De()):ne((function(t){return t+e}))})),Te=function(e,t,n,r,o,i,a){var l=(0,Yu.useRef)(0),u=(0,Yu.useRef)(null),c=(0,Yu.useRef)(null),s=(0,Yu.useRef)(!1),d=qNe(t,n,r,o),f=(0,Yu.useRef)(null),h=(0,Yu.useRef)(null);return[function(t){if(e){BC.A.cancel(h.current),h.current=(0,BC.A)((function(){f.current=null}),2);var n=t.deltaX,r=t.deltaY,o=t.shiftKey,p=n,v=r;("sx"===f.current||!f.current&&o&&r&&!n)&&(p=r,v=0,f.current="sx");var m=Math.abs(p),g=Math.abs(v);null===f.current&&(f.current=i&&m>g?"x":"y"),"y"===f.current?function(e,t){BC.A.cancel(u.current),l.current+=t,c.current=t,d(!1,t)||(WNe||e.preventDefault(),u.current=(0,BC.A)((function(){var e=s.current?10:1;a(l.current*e),l.current=0})))}(t,v):function(e,t){a(t,!0),WNe||e.preventDefault()}(t,p)}},function(t){e&&(s.current=t.detail===c.current)}]}(S,ke,_e,Ce,Ne,!!v,Se),je=(0,tn.A)(Te,2),Ie=je[0],Be=je[1];!function(e,t,n){var r,o=(0,Yu.useRef)(!1),i=(0,Yu.useRef)(0),a=(0,Yu.useRef)(0),l=(0,Yu.useRef)(null),u=(0,Yu.useRef)(null),c=function(e){if(o.current){var t=Math.ceil(e.touches[0].pageX),r=Math.ceil(e.touches[0].pageY),l=i.current-t,c=a.current-r,s=Math.abs(l)>Math.abs(c);s?i.current=t:a.current=r,n(s,s?l:c)&&e.preventDefault(),clearInterval(u.current),u.current=setInterval((function(){s?l*=YNe:c*=YNe;var e=Math.floor(s?l:c);(!n(s,e,!0)||Math.abs(e)<=.1)&&clearInterval(u.current)}),16)}},s=function(){o.current=!1,r()},d=function(e){r(),1!==e.touches.length||o.current||(o.current=!0,i.current=Math.ceil(e.touches[0].pageX),a.current=Math.ceil(e.touches[0].pageY),l.current=e.target,l.current.addEventListener("touchmove",c,{passive:!1}),l.current.addEventListener("touchend",s,{passive:!0}))};r=function(){l.current&&(l.current.removeEventListener("touchmove",c),l.current.removeEventListener("touchend",s))},(0,QN.A)((function(){return e&&t.current.addEventListener("touchstart",d,{passive:!0}),function(){var e;null===(e=t.current)||void 0===e||e.removeEventListener("touchstart",d),r(),clearInterval(u.current)}}),[e])}(S,F,(function(e,t,n){return!Oe(e,t,n)&&(Ie({preventDefault:function(){},deltaX:e?t:0,deltaY:e?0:t}),!0)})),(0,QN.A)((function(){function e(e){S&&e.preventDefault()}var t=F.current;return t.addEventListener("wheel",Ie,{passive:!1}),t.addEventListener("DOMMouseScroll",Be,{passive:!0}),t.addEventListener("MozMousePixelScroll",e,{passive:!1}),function(){t.removeEventListener("wheel",Ie),t.removeEventListener("DOMMouseScroll",Be),t.removeEventListener("MozMousePixelScroll",e)}}),[S]),(0,QN.A)((function(){if(v){var e=Re(K);Y(e),De({x:e})}}),[pe.width,v]);var Me=function(){var e,t;null===(e=me.current)||void 0===e||e.delayHidden(),null===(t=ge.current)||void 0===t||t.delayHidden()},Fe=function(e,t,n,r,o,i,a,l){var u=Yu.useRef(),c=Yu.useState(null),s=(0,tn.A)(c,2),d=s[0],f=s[1];return(0,QN.A)((function(){if(d&&d.times<10){if(!e.current)return void f((function(e){return(0,ok.A)({},e)}));i();var l=d.targetAlign,u=d.originAlign,c=d.index,s=d.offset,h=e.current.clientHeight,p=!1,v=l,m=null;if(h){for(var g=l||u,b=0,y=0,w=0,A=Math.min(t.length-1,c),k=0;k<=A;k+=1){var _=o(t[k]);y=b;var C=n.get(_);b=w=y+(void 0===C?r:C)}for(var N="top"===g?s:h-s,O=A;O>=0;O-=1){var x=o(t[O]),E=n.get(x);if(void 0===E){p=!0;break}if((N-=E)<=0)break}switch(g){case"top":m=y-s;break;case"bottom":m=w-h+s;break;default:var D=e.current.scrollTop;y<D?v="top":w>D+h&&(v="bottom")}null!==m&&a(m),m!==d.lastTop&&(p=!0)}p&&f((0,ok.A)((0,ok.A)({},d),{},{times:d.times+1,targetAlign:v,lastTop:m}))}}),[d,e.current]),function(e){if(null!=e){if(BC.A.cancel(u.current),"number"==typeof e)a(e);else if(e&&"object"===(0,Gn.A)(e)){var n,r=e.align;n="index"in e?e.index:t.findIndex((function(t){return o(t)===e.key}));var i=e.offset;f({times:0,index:n,offset:void 0===i?0:i,originAlign:r})}}else l()}}(F,M,P,a,N,(function(){return D(!0)}),ne,Me);Yu.useImperativeHandle(t,(function(){return{nativeElement:U.current,getScrollInfo:xe,scrollTo:function(e){var t;(t=e)&&"object"===(0,Gn.A)(t)&&("left"in t||"top"in t)?(void 0!==e.left&&Y(Re(e.left)),Fe(e.top)):Fe(e)}}})),(0,QN.A)((function(){if(w){var e=M.slice(ce,se+1);w(e,M)}}),[ce,se,M]);var Le=function(e,t,n,r){var o=Yu.useMemo((function(){return[new Map,[]]}),[e,n.id,r]),i=(0,tn.A)(o,2),a=i[0],l=i[1];return function(o){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,u=a.get(o),c=a.get(i);if(void 0===u||void 0===c)for(var s=e.length,d=l.length;d<s;d+=1){var f,h=e[d],p=t(h);a.set(p,d);var v=null!==(f=n.get(p))&&void 0!==f?f:r;if(l[d]=(l[d-1]||0)+v,p===o&&(u=d),p===i&&(c=d),void 0!==u&&void 0!==c)break}return{top:l[u-1]||0,bottom:l[c]}}}(M,N,P,a),Ue=null==k?void 0:k({start:ce,end:se,virtual:j,offsetX:K,offsetY:de,rtl:I,getSize:Le}),Ve=function(e,t,n,r,o,i,a,l){var u=l.getKey;return e.slice(t,n+1).map((function(e,n){var l=a(e,t+n,{style:{width:r},offsetX:o}),c=u(e);return Yu.createElement(zNe,{key:c,setRef:function(t){return i(e,t)}},l)}))}(M,ce,se,v,K,E,d,te),He=null;i&&(He=(0,ok.A)((0,Ha.A)({},u?"height":"maxHeight",i),nOe),S&&(He.overflowY="hidden",v&&(He.overflowX="hidden"),X&&(He.pointerEvents="none")));var ze={};return I&&(ze.dir="rtl"),Yu.createElement("div",(0,ek.A)({ref:U,style:(0,ok.A)((0,ok.A)({},c),{},{position:"relative"}),className:B},ze,C),Yu.createElement(fE,{onResize:function(e){ve({width:e.offsetWidth,height:e.offsetHeight})}},Yu.createElement(g,{className:"".concat(r,"-holder"),style:He,ref:F,onScroll:function(e){var t=e.currentTarget.scrollTop;t!==z&&ne(t),null==b||b(e),De()},onMouseEnter:Me},Yu.createElement(HNe,{prefixCls:r,height:ue,offsetX:K,offsetY:de,scrollWidth:v,onInnerResize:D,ref:L,innerProps:A,rtl:I,extra:Ue},Ve))),j&&ue>i&&Yu.createElement(XNe,{ref:me,prefixCls:r,scrollOffset:z,scrollRange:ue,rtl:I,onScroll:Pe,onStartMove:Z,onStopMove:ee,spinSize:ye,containerSize:pe.height,style:null==_?void 0:_.verticalScrollBar,thumbStyle:null==_?void 0:_.verticalScrollBarThumb}),j&&v>pe.width&&Yu.createElement(XNe,{ref:ge,prefixCls:r,scrollOffset:K,scrollRange:v,rtl:I,onScroll:Pe,onStartMove:Z,onStopMove:ee,spinSize:be,containerSize:pe.width,horizontal:!0,style:null==_?void 0:_.horizontalScrollBar,thumbStyle:null==_?void 0:_.horizontalScrollBarThumb}))}var oOe=Yu.forwardRef(rOe);oOe.displayName="List";const iOe=oOe,aOe=function(e){var t,n=e.className,r=e.customizeIcon,o=e.customizeIconProps,i=e.onMouseDown,a=e.onClick,l=e.children;return t="function"==typeof r?r(o):r,Yu.createElement("span",{className:n,onMouseDown:function(e){e.preventDefault(),i&&i(e)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:a,"aria-hidden":!0},void 0!==t?t:Yu.createElement("span",{className:nk()(n.split(/\s+/).map((function(e){return"".concat(e,"-icon")})))},l))};var lOe=function(e,t){var n=e.prefixCls,r=e.id,o=e.flattenOptions,i=e.childrenAsData,a=e.values,l=e.searchValue,u=e.multiple,c=e.defaultActiveFirstOption,s=e.height,d=e.itemHeight,f=e.notFoundContent,h=e.open,p=e.menuItemSelectedIcon,v=e.virtual,m=e.onSelect,g=e.onToggleOpen,b=e.onActiveValue,y=e.onScroll,w=e.onMouseEnter,A="".concat(n,"-item"),k=(0,l_.A)((function(){return o}),[h,o],(function(e,t){return t[0]&&e[1]!==t[1]})),_=Yu.useRef(null),C=function(e){e.preventDefault()},N=function(e){_.current&&_.current.scrollTo({index:e})},O=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=k.length,r=0;r<n;r+=1){var o=(e+r*t+n)%n,i=k[o],a=i.group,l=i.data;if(!a&&!l.disabled)return o}return-1},x=Yu.useState((function(){return O(0)})),E=(0,tn.A)(x,2),D=E[0],P=E[1],R=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];P(e);var n={source:t?"keyboard":"mouse"},r=k[e];r?b(r.data.value,e,n):b(null,-1,n)};Yu.useEffect((function(){R(!1!==c?O(0):-1)}),[k.length,l]),Yu.useEffect((function(){var e,t=setTimeout((function(){if(!u&&h&&1===a.size){var e=Array.from(a)[0],t=k.findIndex((function(t){return t.data.value===e}));R(t),N(t)}}));return h&&(null===(e=_.current)||void 0===e||e.scrollTo(void 0)),function(){return clearTimeout(t)}}),[h]);var S=function(e){void 0!==e&&m(e,{selected:!a.has(e)}),u||g(!1)};if(Yu.useImperativeHandle(t,(function(){return{onKeyDown:function(e){var t=e.which;switch(t){case jE.A.UP:case jE.A.DOWN:var n=0;if(t===jE.A.UP?n=-1:t===jE.A.DOWN&&(n=1),0!==n){var r=O(D+n,n);N(r),R(r,!0)}break;case jE.A.ENTER:var o=k[D];o&&!o.data.disabled?S(o.data.value):S(void 0),h&&e.preventDefault();break;case jE.A.ESC:g(!1),h&&e.stopPropagation()}},onKeyUp:function(){},scrollTo:function(e){N(e)}}})),0===k.length)return Yu.createElement("div",{role:"listbox",id:"".concat(r,"_list"),className:"".concat(A,"-empty"),onMouseDown:C},f);function T(e){var t=k[e];if(!t)return null;var n=t.data||{},o=n.value,l=n.label,u=n.children,c=oNe(n,!0),s=i?u:l;return t?Yu.createElement("div",(0,ek.A)({"aria-label":"string"==typeof s?s:null},c,{key:e,role:"option",id:"".concat(r,"_list_").concat(e),"aria-selected":a.has(o)}),o):null}return Yu.createElement(Yu.Fragment,null,Yu.createElement("div",{role:"listbox",id:"".concat(r,"_list"),style:{height:0,width:0,overflow:"hidden"}},T(D-1),T(D),T(D+1)),Yu.createElement(iOe,{itemKey:"key",ref:_,data:k,height:s,itemHeight:d,fullHeight:!1,onMouseDown:C,onScroll:y,virtual:v,onMouseEnter:w},(function(e,t){var n,r=e.group,o=e.groupOption,l=e.data,u=l.label,c=l.key;if(r)return Yu.createElement("div",{className:nk()(A,"".concat(A,"-group"))},void 0!==u?u:c);var s=l.disabled,d=l.value,f=l.title,h=l.children,v=l.style,m=l.className,g=(0,ak.A)(l,["disabled","value","title","children","style","className"]),b=a.has(d),y="".concat(A,"-option"),w=nk()(A,y,m,(n={},(0,Ha.A)(n,"".concat(y,"-grouped"),o),(0,Ha.A)(n,"".concat(y,"-active"),D===t&&!s),(0,Ha.A)(n,"".concat(y,"-disabled"),s),(0,Ha.A)(n,"".concat(y,"-selected"),b),n)),k=!p||"function"==typeof p||b,_=(i?h:u)||d,C="string"==typeof _||"number"==typeof _?_.toString():void 0;return void 0!==f&&(C=f),Yu.createElement("div",(0,ek.A)({},g,{"aria-selected":b,className:w,title:C,onMouseMove:function(){D===t||s||R(t)},onClick:function(){s||S(d)},style:v}),Yu.createElement("div",{className:"".concat(y,"-content")},_),Yu.isValidElement(p)||b,k&&Yu.createElement(aOe,{className:"".concat(A,"-option-state"),customizeIcon:p,customizeIconProps:{isSelected:b}},b?"✓":null))})))},uOe=Yu.forwardRef(lOe);uOe.displayName="OptionList";const cOe=uOe;var sOe=function(){return null};sOe.isSelectOption=!0;const dOe=sOe;var fOe=function(){return null};fOe.isSelectOptGroup=!0;const hOe=fOe;function pOe(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,rE.A)(e).map((function(e,n){if(!Yu.isValidElement(e)||!e.type)return null;var r=e.type.isSelectOptGroup,o=e.key,i=e.props,a=i.children,l=(0,ak.A)(i,["children"]);return t||!r?function(e){var t=e.key,n=e.props,r=n.children,o=n.value,i=(0,ak.A)(n,["children","value"]);return(0,ok.A)({key:t,value:void 0!==o?o:t,children:r},i)}(e):(0,ok.A)((0,ok.A)({key:"__RC_SELECT_GRP__".concat(null===o?n:o,"__"),label:o},l),{},{options:pOe(a)})})).filter((function(e){return e}))}function vOe(e){return Array.isArray(e)?e:void 0!==e?[e]:[]}var mOe="undefined"!=typeof window&&window.document&&window.document.documentElement,gOe=0;function bOe(e,t){var n,r=e.key;return"value"in e&&(n=e.value),null!=r?r:void 0!==n?n:"rc-index-key-".concat(t)}function yOe(e){var t=(0,ok.A)({},e);return"props"in t||Object.defineProperty(t,"props",{get:function(){return(0,ck.Ay)(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),t}}),t}function wOe(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).prevValueOptions,r=void 0===n?[]:n,o=new Map;return t.forEach((function(e){if(!e.group){var t=e.data;o.set(t.value,t)}})),e.map((function(e){var t=o.get(e);return t||(t=(0,ok.A)({},r.find((function(t){return t._INTERNAL_OPTION_VALUE_===e})))),yOe(t)}))}function AOe(e){return vOe(e).join("")}var kOe=function(e,t){var n,r,o=e.prefixCls,i=e.id,a=e.inputElement,l=e.disabled,u=e.tabIndex,c=e.autoFocus,s=e.autoComplete,d=e.editable,f=e.accessibilityIndex,h=e.value,p=e.maxLength,v=e.onKeyDown,m=e.onMouseDown,g=e.onChange,b=e.onPaste,y=e.onCompositionStart,w=e.onCompositionEnd,A=e.open,k=e.attrs,_=a||Yu.createElement("input",null),C=_,N=C.ref,O=C.props,x=O.onKeyDown,E=O.onChange,D=O.onMouseDown,P=O.onCompositionStart,R=O.onCompositionEnd,S=O.style;return Yu.cloneElement(_,(0,ok.A)((0,ok.A)({id:i,ref:(0,LC.K4)(t,N),disabled:l,tabIndex:u,autoComplete:s||"off",type:"search",autoFocus:c,className:nk()("".concat(o,"-selection-search-input"),null===(n=_)||void 0===n||null===(r=n.props)||void 0===r?void 0:r.className),style:(0,ok.A)((0,ok.A)({},S),{},{opacity:d?null:0}),role:"combobox","aria-expanded":A,"aria-haspopup":"listbox","aria-owns":"".concat(i,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(i,"_list"),"aria-activedescendant":"".concat(i,"_list_").concat(f)},k),{},{value:d?h:"",maxLength:p,readOnly:!d,unselectable:d?null:"on",onKeyDown:function(e){v(e),x&&x(e)},onMouseDown:function(e){m(e),D&&D(e)},onChange:function(e){g(e),E&&E(e)},onCompositionStart:function(e){y(e),P&&P(e)},onCompositionEnd:function(e){w(e),R&&R(e)},onPaste:b}))},_Oe=Yu.forwardRef(kOe);_Oe.displayName="Input";const COe=_Oe;function NOe(e,t){mOe?Yu.useLayoutEffect(e,t):Yu.useEffect(e,t)}var OOe=function(e){e.preventDefault(),e.stopPropagation()};const xOe=function(e){var t=e.id,n=e.prefixCls,r=e.values,o=e.open,i=e.searchValue,a=e.inputRef,l=e.placeholder,u=e.disabled,c=e.mode,s=e.showSearch,d=e.autoFocus,f=e.autoComplete,h=e.accessibilityIndex,p=e.tabIndex,v=e.removeIcon,m=e.maxTagCount,g=e.maxTagTextLength,b=e.maxTagPlaceholder,y=void 0===b?function(e){return"+ ".concat(e.length," ...")}:b,w=e.tagRender,A=e.onToggleOpen,k=e.onSelect,_=e.onInputChange,C=e.onInputPaste,N=e.onInputKeyDown,O=e.onInputMouseDown,x=e.onInputCompositionStart,E=e.onInputCompositionEnd,D=Yu.useRef(null),P=(0,Yu.useState)(0),R=(0,tn.A)(P,2),S=R[0],T=R[1],j=(0,Yu.useState)(!1),I=(0,tn.A)(j,2),B=I[0],M=I[1],F="".concat(n,"-selection"),L=o||"tags"===c?i:"",U="tags"===c||s&&(o||B);function V(e,t,n,r){return Yu.createElement("span",{className:nk()("".concat(F,"-item"),(0,Ha.A)({},"".concat(F,"-item-disabled"),t))},Yu.createElement("span",{className:"".concat(F,"-item-content")},e),n&&Yu.createElement(aOe,{className:"".concat(F,"-item-remove"),onMouseDown:OOe,onClick:r,customizeIcon:v},"×"))}NOe((function(){T(D.current.scrollWidth)}),[L]);var H=Yu.createElement("div",{className:"".concat(F,"-search"),style:{width:S},onFocus:function(){M(!0)},onBlur:function(){M(!1)}},Yu.createElement(COe,{ref:a,open:o,prefixCls:n,id:t,inputElement:null,disabled:u,autoFocus:d,autoComplete:f,editable:U,accessibilityIndex:h,value:L,onKeyDown:N,onMouseDown:O,onChange:_,onPaste:C,onCompositionStart:x,onCompositionEnd:E,tabIndex:p,attrs:oNe(e,!0)}),Yu.createElement("span",{ref:D,className:"".concat(F,"-search-mirror"),"aria-hidden":!0},L," ")),z=Yu.createElement(TE,{prefixCls:"".concat(F,"-overflow"),data:r,renderItem:function(e){var t=e.disabled,n=e.label,r=e.value,i=!u&&!t,a=n;if("number"==typeof g&&("string"==typeof n||"number"==typeof n)){var l=String(a);l.length>g&&(a="".concat(l.slice(0,g),"..."))}var c=function(e){e&&e.stopPropagation(),k(r,{selected:!1})};return"function"==typeof w?function(e,t,n,r,i){return Yu.createElement("span",{onMouseDown:function(e){OOe(e),A(!o)}},w({label:t,value:e,disabled:n,closable:r,onClose:i}))}(r,a,t,i,c):V(a,t,i,c)},renderRest:function(e){return V("function"==typeof y?y(e):y,!1)},suffix:H,itemKey:"key",maxCount:m});return Yu.createElement(Yu.Fragment,null,z,!r.length&&!L&&Yu.createElement("span",{className:"".concat(F,"-placeholder")},l))},EOe=function(e){var t=e.inputElement,n=e.prefixCls,r=e.id,o=e.inputRef,i=e.disabled,a=e.autoFocus,l=e.autoComplete,u=e.accessibilityIndex,c=e.mode,s=e.open,d=e.values,f=e.placeholder,h=e.tabIndex,p=e.showSearch,v=e.searchValue,m=e.activeValue,g=e.maxLength,b=e.onInputKeyDown,y=e.onInputMouseDown,w=e.onInputChange,A=e.onInputPaste,k=e.onInputCompositionStart,_=e.onInputCompositionEnd,C=Yu.useState(!1),N=(0,tn.A)(C,2),O=N[0],x=N[1],E="combobox"===c,D=E||p,P=d[0],R=v||"";E&&m&&!O&&(R=m),Yu.useEffect((function(){E&&x(!1)}),[E,m]);var S=!("combobox"!==c&&!s||!R),T=!P||"string"!=typeof P.label&&"number"!=typeof P.label?void 0:P.label.toString();return Yu.createElement(Yu.Fragment,null,Yu.createElement("span",{className:"".concat(n,"-selection-search")},Yu.createElement(COe,{ref:o,prefixCls:n,id:r,open:s,inputElement:t,disabled:i,autoFocus:a,autoComplete:l,editable:D,accessibilityIndex:u,value:R,onKeyDown:b,onMouseDown:y,onChange:function(e){x(!0),w(e)},onPaste:A,onCompositionStart:k,onCompositionEnd:_,tabIndex:h,attrs:oNe(e,!0),maxLength:E?g:void 0})),!E&&P&&!S&&Yu.createElement("span",{className:"".concat(n,"-selection-item"),title:T},P.label),!P&&!S&&Yu.createElement("span",{className:"".concat(n,"-selection-placeholder")},f))};function DOe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250,t=Yu.useRef(null),n=Yu.useRef(null);return Yu.useEffect((function(){return function(){window.clearTimeout(n.current)}}),[]),[function(){return t.current},function(r){(r||null===t.current)&&(t.current=r),window.clearTimeout(n.current),n.current=window.setTimeout((function(){t.current=null}),e)}]}var POe=function(e,t){var n=(0,Yu.useRef)(null),r=(0,Yu.useRef)(!1),o=e.prefixCls,i=e.multiple,a=e.open,l=e.mode,u=e.showSearch,c=e.tokenWithEnter,s=e.onSearch,d=e.onSearchSubmit,f=e.onToggleOpen,h=e.onInputKeyDown,p=e.domRef;Yu.useImperativeHandle(t,(function(){return{focus:function(){n.current.focus()},blur:function(){n.current.blur()}}}));var v=DOe(0),m=(0,tn.A)(v,2),g=m[0],b=m[1],y=(0,Yu.useRef)(null),w=function(e){!1!==s(e,!0,r.current)&&f(!0)},A={inputRef:n,onInputKeyDown:function(e){var t=e.which;t!==jE.A.UP&&t!==jE.A.DOWN||e.preventDefault(),h&&h(e),t!==jE.A.ENTER||"tags"!==l||r.current||a||d(e.target.value),[jE.A.SHIFT,jE.A.TAB,jE.A.BACKSPACE,jE.A.ESC].includes(t)||f(!0)},onInputMouseDown:function(){b(!0)},onInputChange:function(e){var t=e.target.value;if(c&&y.current&&/[\r\n]/.test(y.current)){var n=y.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");t=t.replace(n,y.current)}y.current=null,w(t)},onInputPaste:function(e){var t=e.clipboardData.getData("text");y.current=t},onInputCompositionStart:function(){r.current=!0},onInputCompositionEnd:function(e){r.current=!1,"combobox"!==l&&w(e.target.value)}},k=i?Yu.createElement(xOe,(0,ek.A)({},e,A)):Yu.createElement(EOe,(0,ek.A)({},e,A));return Yu.createElement("div",{ref:p,className:"".concat(o,"-selector"),onClick:function(e){e.target!==n.current&&(void 0!==document.body.style.msTouchAction?setTimeout((function(){n.current.focus()})):n.current.focus())},onMouseDown:function(e){var t=g();e.target===n.current||t||e.preventDefault(),("combobox"===l||u&&t)&&a||(a&&s("",!0,!1),f())}},k)},ROe=Yu.forwardRef(POe);ROe.displayName="Selector";const SOe=ROe;var TOe=function(e,t){var n=e.prefixCls,r=(e.disabled,e.visible),o=e.children,i=e.popupElement,a=e.containerWidth,l=e.animation,u=e.transitionName,c=e.dropdownStyle,s=e.dropdownClassName,d=e.direction,f=void 0===d?"ltr":d,h=e.dropdownMatchSelectWidth,p=void 0===h||h,v=e.dropdownRender,m=e.dropdownAlign,g=e.getPopupContainer,b=e.empty,y=e.getTriggerDOMNode,w=e.onPopupVisibleChange,A=(0,ak.A)(e,["prefixCls","disabled","visible","children","popupElement","containerWidth","animation","transitionName","dropdownStyle","dropdownClassName","direction","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange"]),k="".concat(n,"-dropdown"),_=i;v&&(_=v(i));var C=Yu.useMemo((function(){return function(e){var t="number"!=typeof e?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:t,adjustY:1}},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:t,adjustY:1}},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:t,adjustY:1}},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:t,adjustY:1}}}}(p)}),[p]),N=l?"".concat(k,"-").concat(l):u,O=Yu.useRef(null);Yu.useImperativeHandle(t,(function(){return{getPopupElement:function(){return O.current}}}));var x=(0,ok.A)({minWidth:a},c);return"number"==typeof p?x.width=p:p&&(x.width=a),Yu.createElement(UO,(0,ek.A)({},A,{showAction:w?["click"]:[],hideAction:w?["click"]:[],popupPlacement:"rtl"===f?"bottomRight":"bottomLeft",builtinPlacements:C,prefixCls:k,popupTransitionName:N,popup:Yu.createElement("div",{ref:O},_),popupAlign:m,popupVisible:r,getPopupContainer:g,popupClassName:nk()(s,(0,Ha.A)({},"".concat(k,"-empty"),b)),popupStyle:x,getTriggerDOMNode:y,onPopupVisibleChange:w}),o)},jOe=Yu.forwardRef(TOe);jOe.displayName="SelectTrigger";const IOe=jOe;var BOe=["removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","tabIndex"];var MOe=function(e){var t=e.prefixCls,n=e.components.optionList,r=e.convertChildrenToData,o=e.flattenOptions,i=e.getLabeledValue,a=e.filterOptions,l=e.isValueDisabled,u=e.findValueOption,c=e.fillOptionsWithMissingValue,s=e.omitDOMProps;function d(e,d){var f,h=e.prefixCls,p=void 0===h?t:h,v=e.className,m=e.id,g=e.open,b=e.defaultOpen,y=e.options,w=e.children,A=e.mode,k=e.value,_=e.defaultValue,C=e.labelInValue,N=e.showSearch,O=e.inputValue,x=e.searchValue,E=e.filterOption,D=e.filterSort,P=e.optionFilterProp,R=void 0===P?"value":P,S=e.autoClearSearchValue,T=void 0===S||S,j=e.onSearch,I=e.allowClear,B=e.clearIcon,M=e.showArrow,F=e.inputIcon,L=e.menuItemSelectedIcon,U=e.disabled,V=e.loading,H=e.defaultActiveFirstOption,z=e.notFoundContent,W=void 0===z?"Not Found":z,q=e.optionLabelProp,$=e.backfill,K=(e.tabIndex,e.getInputElement),Y=e.getRawInputElement,G=e.getPopupContainer,J=e.listHeight,X=void 0===J?200:J,Q=e.listItemHeight,Z=void 0===Q?20:Q,ee=e.animation,te=e.transitionName,ne=e.virtual,re=e.dropdownStyle,oe=e.dropdownClassName,ie=e.dropdownMatchSelectWidth,ae=e.dropdownRender,le=e.dropdownAlign,ue=e.showAction,ce=void 0===ue?[]:ue,se=e.direction,de=e.tokenSeparators,fe=e.tagRender,he=e.onPopupScroll,pe=e.onDropdownVisibleChange,ve=e.onFocus,me=e.onBlur,ge=e.onKeyUp,be=e.onKeyDown,ye=e.onMouseDown,we=e.onChange,Ae=e.onSelect,ke=e.onDeselect,_e=e.onClear,Ce=e.internalProps,Ne=void 0===Ce?{}:Ce,Oe=(0,ak.A)(e,["prefixCls","className","id","open","defaultOpen","options","children","mode","value","defaultValue","labelInValue","showSearch","inputValue","searchValue","filterOption","filterSort","optionFilterProp","autoClearSearchValue","onSearch","allowClear","clearIcon","showArrow","inputIcon","menuItemSelectedIcon","disabled","loading","defaultActiveFirstOption","notFoundContent","optionLabelProp","backfill","tabIndex","getInputElement","getRawInputElement","getPopupContainer","listHeight","listItemHeight","animation","transitionName","virtual","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","showAction","direction","tokenSeparators","tagRender","onPopupScroll","onDropdownVisibleChange","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown","onChange","onSelect","onDeselect","onClear","internalProps"]),xe="RC_SELECT_INTERNAL_PROPS_MARK"===Ne.mark,Ee=s?s(Oe):Oe;BOe.forEach((function(e){delete Ee[e]}));var De=(0,Yu.useRef)(null),Pe=(0,Yu.useRef)(null),Re=(0,Yu.useRef)(null),Se=(0,Yu.useRef)(null),Te=(0,Yu.useMemo)((function(){return(de||[]).some((function(e){return["\n","\r\n"].includes(e)}))}),[de]),je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=Yu.useState(!1),n=(0,tn.A)(t,2),r=n[0],o=n[1],i=Yu.useRef(null),a=function(){window.clearTimeout(i.current)};return Yu.useEffect((function(){return a}),[]),[r,function(t,n){a(),i.current=window.setTimeout((function(){o(t),n&&n()}),e)},a]}(),Ie=(0,tn.A)(je,3),Be=Ie[0],Me=Ie[1],Fe=Ie[2],Le=(0,Yu.useState)(),Ue=(0,tn.A)(Le,2),Ve=Ue[0],He=Ue[1];(0,Yu.useEffect)((function(){var e;He("rc_select_".concat((mOe?(e=gOe,gOe+=1):e="TEST_OR_SSR",e)))}),[]);var ze=m||Ve,We=q;void 0===We&&(We=y?"label":"children");var qe="combobox"!==A&&C,$e="tags"===A||"multiple"===A,Ke=void 0!==N?N:$e||"combobox"===A,Ye=(0,Yu.useState)(!1),Ge=(0,tn.A)(Ye,2),Je=Ge[0],Xe=Ge[1];(0,Yu.useEffect)((function(){Xe(zC())}),[]);var Qe=(0,Yu.useRef)(null);Yu.useImperativeHandle(d,(function(){var e,t,n;return{focus:null===(e=Re.current)||void 0===e?void 0:e.focus,blur:null===(t=Re.current)||void 0===t?void 0:t.blur,scrollTo:null===(n=Se.current)||void 0===n?void 0:n.scrollTo}}));var Ze=(0,Ix.A)(_,{value:k}),et=(0,tn.A)(Ze,2),tt=et[0],nt=et[1],rt=(0,Yu.useMemo)((function(){return function(e,t){var n=t.labelInValue,r=t.combobox,o=new Map;if(void 0===e||""===e&&r)return[[],o];var i=Array.isArray(e)?e:[e],a=i;return n&&(a=i.filter((function(e){return null!==e})).map((function(e){var t=e.key,n=e.value,r=void 0!==n?n:t;return o.set(r,e),r}))),[a,o]}(tt,{labelInValue:qe,combobox:"combobox"===A})}),[tt,qe]),ot=(0,tn.A)(rt,2),it=ot[0],at=ot[1],lt=(0,Yu.useMemo)((function(){return new Set(it)}),[it]),ut=(0,Yu.useState)(null),ct=(0,tn.A)(ut,2),st=ct[0],dt=ct[1],ft=(0,Yu.useState)(""),ht=(0,tn.A)(ft,2),pt=ht[0],vt=ht[1],mt=pt;"combobox"===A&&void 0!==tt?mt=tt:void 0!==x?mt=x:O&&(mt=O);var gt=(0,Yu.useMemo)((function(){var e=y;return void 0===e&&(e=r(w)),"tags"===A&&c&&(e=c(e,tt,We,C)),e||[]}),[y,w,A,tt]),bt=(0,Yu.useMemo)((function(){return o(gt,e)}),[gt]),yt=function(e){var t=Yu.useRef(null),n=Yu.useMemo((function(){var t=new Map;return e.forEach((function(e){var n=e.data.value;t.set(n,e)})),t}),[e]);return t.current=n,function(e){return e.map((function(e){return t.current.get(e)})).filter(Boolean)}}(bt),wt=(0,Yu.useMemo)((function(){if(!mt||!Ke)return(0,ln.A)(gt);var e=a(mt,gt,{optionFilterProp:R,filterOption:"combobox"===A&&void 0===E?function(){return!0}:E});return"tags"===A&&e.every((function(e){return e[R]!==mt}))&&e.unshift({value:mt,label:mt,key:"__RC_SELECT_TAG_PLACEHOLDER__"}),D&&Array.isArray(e)?(0,ln.A)(e).sort(D):e}),[gt,mt,A,Ke,D]),At=(0,Yu.useMemo)((function(){return o(wt,e)}),[wt]);(0,Yu.useEffect)((function(){Se.current&&Se.current.scrollTo&&Se.current.scrollTo(0)}),[mt]);var kt,_t,Ct=(0,Yu.useMemo)((function(){var e=it.map((function(e){var t=yt([e]),n=i(e,{options:t,prevValueMap:at,labelInValue:qe,optionLabelProp:We});return(0,ok.A)((0,ok.A)({},n),{},{disabled:l(e,t)})}));return A||1!==e.length||null!==e[0].value||null!==e[0].label?e:[]}),[tt,gt,A]);kt=Ct,_t=Yu.useRef(kt),Ct=Yu.useMemo((function(){var e=new Map;_t.current.forEach((function(t){var n=t.value,r=t.label;n!==r&&e.set(n,r)}));var t=kt.map((function(t){var n=e.get(t.value);return t.isCacheable&&n?(0,ok.A)((0,ok.A)({},t),{},{label:n}):t}));return _t.current=t,t}),[kt]);var Nt=function(e,t,n){var r=yt([e]),o=u([e],r)[0];if(!Ne.skipTriggerSelect){var a=qe?i(e,{options:r,prevValueMap:at,labelInValue:qe,optionLabelProp:We}):e;t&&Ae?Ae(a,o):!t&&ke&&ke(a,o)}xe&&(t&&Ne.onRawSelect?Ne.onRawSelect(e,o,n):!t&&Ne.onRawDeselect&&Ne.onRawDeselect(e,o,n))},Ot=(0,Yu.useState)([]),xt=(0,tn.A)(Ot,2),Et=xt[0],Dt=xt[1],Pt=function(e){if(!xe||!Ne.skipTriggerChange){var t=yt(e),n=function(e,t){var n=t.optionLabelProp,r=t.labelInValue,o=t.prevValueMap,i=t.options,a=t.getLabeledValue,l=e;return r&&(l=l.map((function(e){return a(e,{options:i,prevValueMap:o,labelInValue:r,optionLabelProp:n})}))),l}(Array.from(e),{labelInValue:qe,options:t,getLabeledValue:i,prevValueMap:at,optionLabelProp:We}),r=$e?n:n[0];if(we&&(0!==it.length||0!==n.length)){var o=u(e,t,{prevValueOptions:Et});Dt(o.map((function(t,n){var r=(0,ok.A)({},t);return Object.defineProperty(r,"_INTERNAL_OPTION_VALUE_",{get:function(){return e[n]}}),r}))),we(r,$e?o:o[0])}nt(r)}},Rt=function(e,t){var n,r=t.selected,o=t.source;U||($e?(n=new Set(it),r?n.add(e):n.delete(e)):(n=new Set).add(e),($e||!$e&&Array.from(it)[0]!==e)&&Pt(Array.from(n)),Nt(e,!$e||r,o),"combobox"===A?(vt(String(e)),dt("")):$e&&!T||(vt(""),dt("")))},St="combobox"===A&&"function"==typeof K&&K()||null,Tt="function"==typeof Y&&Y(),jt=(0,Ix.A)(void 0,{defaultValue:b,value:g}),It=(0,tn.A)(jt,2),Bt=It[0],Mt=It[1],Ft=Bt,Lt=!W&&!wt.length;(U||Lt&&Ft&&"combobox"===A)&&(Ft=!1);var Ut,Vt=!Lt&&Ft,Ht=function(e){var t=void 0!==e?e:!Ft;Bt===t||U||(Mt(t),pe&&pe(t))};Tt&&(Ut=function(e){Ht(e)}),function(e,t,n){var r=Yu.useRef(null);r.current={open:t,triggerOpen:n},Yu.useEffect((function(){function e(e){var t,n=e.target;n.shadowRoot&&e.composed&&(n=e.composedPath()[0]||n),r.current.open&&[De.current,null===(t=Pe.current)||void 0===t?void 0:t.getPopupElement()].filter((function(e){return e})).every((function(e){return!e.contains(n)&&e!==n}))&&r.current.triggerOpen(!1)}return window.addEventListener("mousedown",e),function(){return window.removeEventListener("mousedown",e)}}),[])}(0,Vt,Ht);var zt=function(e,t,n){var r=!0,o=e;dt(null);var i=n?null:function(e,t){if(!t||!t.length)return null;var n=!1,r=function e(t,r){var o=(0,bI.A)(r),i=o[0],a=o.slice(1);if(!i)return[t];var l=t.split(i);return n=n||l.length>1,l.reduce((function(t,n){return[].concat((0,ln.A)(t),(0,ln.A)(e(n,a)))}),[]).filter((function(e){return e}))}(e,t);return n?r:null}(e,de),a=i;if("combobox"===A)t&&Pt([o]);else if(i){o="","tags"!==A&&(a=i.map((function(e){var t=bt.find((function(t){return t.data[We]===e}));return t?t.data.value:null})).filter((function(e){return null!==e})));var l=Array.from(new Set([].concat((0,ln.A)(it),(0,ln.A)(a))));Pt(l),l.forEach((function(e){Nt(e,!0,"input")})),Ht(!1),r=!1}return vt(o),j&&mt!==o&&j(o),r};(0,Yu.useEffect)((function(){Bt&&U&&Mt(!1)}),[U]),(0,Yu.useEffect)((function(){Ft||$e||"combobox"===A||zt("",!1,!1)}),[Ft]);var Wt=DOe(),qt=(0,tn.A)(Wt,2),$t=qt[0],Kt=qt[1],Yt=(0,Yu.useRef)(!1),Gt=[];(0,Yu.useEffect)((function(){return function(){Gt.forEach((function(e){return clearTimeout(e)})),Gt.splice(0,Gt.length)}}),[]);var Jt=(0,Yu.useState)(0),Xt=(0,tn.A)(Jt,2),Qt=Xt[0],Zt=Xt[1],en=void 0!==H?H:"combobox"!==A,nn=(0,Yu.useState)(null),rn=(0,tn.A)(nn,2),on=rn[0],an=rn[1],un=(0,Yu.useState)({}),cn=(0,tn.A)(un,2)[1];NOe((function(){if(Vt){var e,t=Math.ceil(null===(e=De.current)||void 0===e?void 0:e.offsetWidth);on===t||Number.isNaN(t)||an(t)}}),[Vt]);var sn,dn=Yu.createElement(n,{ref:Se,prefixCls:p,id:ze,open:Ft,childrenAsData:!y,options:wt,flattenOptions:At,multiple:$e,values:lt,height:X,itemHeight:Z,onSelect:function(e,t){Rt(e,(0,ok.A)((0,ok.A)({},t),{},{source:"option"}))},onToggleOpen:Ht,onActiveValue:function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).source,r=void 0===n?"keyboard":n;Zt(t),$&&"combobox"===A&&null!==e&&"keyboard"===r&&dt(String(e))},defaultActiveFirstOption:en,notFoundContent:W,onScroll:he,searchValue:mt,menuItemSelectedIcon:L,virtual:!1!==ne&&!1!==ie,onMouseEnter:function(){cn({})}});!U&&I&&(it.length||mt)&&(sn=Yu.createElement(aOe,{className:"".concat(p,"-clear"),onMouseDown:function(){xe&&Ne.onClear&&Ne.onClear(),_e&&_e(),Pt([]),zt("",!1,!1)},customizeIcon:B},"×"));var fn,hn=void 0!==M?M:V||!$e&&"combobox"!==A;hn&&(fn=Yu.createElement(aOe,{className:nk()("".concat(p,"-arrow"),(0,Ha.A)({},"".concat(p,"-arrow-loading"),V)),customizeIcon:F,customizeIconProps:{loading:V,searchValue:mt,open:Ft,focused:Be,showSearch:Ke}}));var pn=nk()(p,v,(f={},(0,Ha.A)(f,"".concat(p,"-focused"),Be),(0,Ha.A)(f,"".concat(p,"-multiple"),$e),(0,Ha.A)(f,"".concat(p,"-single"),!$e),(0,Ha.A)(f,"".concat(p,"-allow-clear"),I),(0,Ha.A)(f,"".concat(p,"-show-arrow"),hn),(0,Ha.A)(f,"".concat(p,"-disabled"),U),(0,Ha.A)(f,"".concat(p,"-loading"),V),(0,Ha.A)(f,"".concat(p,"-open"),Ft),(0,Ha.A)(f,"".concat(p,"-customize-input"),St),(0,Ha.A)(f,"".concat(p,"-show-search"),Ke),f)),vn=Yu.createElement(IOe,{ref:Pe,disabled:U,prefixCls:p,visible:Vt,popupElement:dn,containerWidth:on,animation:ee,transitionName:te,dropdownStyle:re,dropdownClassName:oe,direction:se,dropdownMatchSelectWidth:ie,dropdownRender:ae,dropdownAlign:le,getPopupContainer:G,empty:!gt.length,getTriggerDOMNode:function(){return Qe.current},onPopupVisibleChange:Ut},Tt?Yu.cloneElement(Tt,{ref:(0,LC.K4)(Qe,Tt.props.ref)}):Yu.createElement(SOe,(0,ek.A)({},e,{domRef:Qe,prefixCls:p,inputElement:St,ref:Re,id:ze,showSearch:Ke,mode:A,accessibilityIndex:Qt,multiple:$e,tagRender:fe,values:Ct,open:Ft,onToggleOpen:Ht,searchValue:mt,activeValue:st,onSearch:zt,onSearchSubmit:function(e){if(e&&e.trim()){var t=Array.from(new Set([].concat((0,ln.A)(it),[e])));Pt(t),t.forEach((function(e){Nt(e,!0,"input")})),vt("")}},onSelect:function(e,t){Rt(e,(0,ok.A)((0,ok.A)({},t),{},{source:"selection"}))},tokenWithEnter:Te})));return Tt?vn:Yu.createElement("div",(0,ek.A)({className:pn},Ee,{ref:De,onMouseDown:function(e){var t,n=e.target,r=null===(t=Pe.current)||void 0===t?void 0:t.getPopupElement();if(r&&r.contains(n)){var o=setTimeout((function(){var e,t=Gt.indexOf(o);-1!==t&&Gt.splice(t,1),Fe(),Je||r.contains(document.activeElement)||null===(e=Re.current)||void 0===e||e.focus()}));Gt.push(o)}if(ye){for(var i=arguments.length,a=new Array(i>1?i-1:0),l=1;l<i;l++)a[l-1]=arguments[l];ye.apply(void 0,[e].concat(a))}},onKeyDown:function(e){var t,n=$t(),r=e.which;if(r===jE.A.ENTER&&("combobox"!==A&&e.preventDefault(),Ft||Ht(!0)),Kt(!!mt),r===jE.A.BACKSPACE&&!n&&$e&&!mt&&it.length){var o=function(e,t){var n,r=(0,ln.A)(t);for(n=e.length-1;n>=0&&e[n].disabled;n-=1);var o=null;return-1!==n&&(o=r[n],r.splice(n,1)),{values:r,removedValue:o}}(Ct,it);null!==o.removedValue&&(Pt(o.values),Nt(o.removedValue,!1,"input"))}for(var i=arguments.length,a=new Array(i>1?i-1:0),l=1;l<i;l++)a[l-1]=arguments[l];Ft&&Se.current&&(t=Se.current).onKeyDown.apply(t,[e].concat(a)),be&&be.apply(void 0,[e].concat(a))},onKeyUp:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o;Ft&&Se.current&&(o=Se.current).onKeyUp.apply(o,[e].concat(n)),ge&&ge.apply(void 0,[e].concat(n))},onFocus:function(){Me(!0),U||(ve&&!Yt.current&&ve.apply(void 0,arguments),ce.includes("focus")&&Ht(!0)),Yt.current=!0},onBlur:function(){Me(!1,(function(){Yt.current=!1,Ht(!1)})),U||(mt&&("tags"===A?(zt("",!1,!1),Pt(Array.from(new Set([].concat((0,ln.A)(it),[mt]))))):"multiple"===A&&vt("")),me&&me.apply(void 0,arguments))}}),Be&&!Ft&&Yu.createElement("span",{style:{width:0,height:0,display:"flex",overflow:"hidden",opacity:0},"aria-live":"polite"},"".concat(it.join(", "))),vn,fn,sn)}return Yu.forwardRef(d)}({prefixCls:"rc-select",components:{optionList:cOe},convertChildrenToData:pOe,flattenOptions:function(e){var t=[];return function e(n,r){n.forEach((function(n){r||!("options"in n)?t.push({key:bOe(n,t.length),groupOption:r,data:n}):(t.push({key:bOe(n,t.length),group:!0,data:n}),e(n.options,!0))}))}(e,!1),t},getLabeledValue:function(e,t){var n=t.options,r=t.prevValueMap,o=t.labelInValue,i=t.optionLabelProp,a=wOe([e],n)[0],l={value:e},u=o?r.get(e):void 0;return u&&"object"===(0,Gn.A)(u)&&"label"in u?(l.label=u.label,a&&"string"==typeof u.label&&"string"==typeof a[i]&&u.label.trim()!==a[i].trim()&&(0,ck.Ay)(!1,"`label` of `value` is not same as `label` in Select options.")):a&&i in a?l.label=a[i]:(l.label=e,l.isCacheable=!0),l.key=l.value,l},filterOptions:function(e,t,n){var r,o=n.optionFilterProp,i=n.filterOption,a=[];return!1===i?(0,ln.A)(t):(r="function"==typeof i?i:function(e){return function(t,n){var r=t.toLowerCase();return"options"in n?AOe(n.label).toLowerCase().includes(r):AOe(n[e]).toLowerCase().includes(r)}}(o),t.forEach((function(t){if("options"in t)if(r(e,t))a.push(t);else{var n=t.options.filter((function(t){return r(e,t)}));n.length&&a.push((0,ok.A)((0,ok.A)({},t),{},{options:n}))}else r(e,yOe(t))&&a.push(t)})),a)},isValueDisabled:function(e,t){return wOe([e],t)[0].disabled},findValueOption:wOe,warningProps:function(e){var t=e.mode,n=e.options,r=e.children,o=e.backfill,i=e.allowClear,a=e.placeholder,l=e.getInputElement,u=e.showSearch,c=e.onSearch,s=e.defaultOpen,d=e.autoFocus,f=e.labelInValue,h=e.value,p=e.inputValue,v=e.optionLabelProp,m="multiple"===t||"tags"===t,g=void 0!==u?u:m||"combobox"===t,b=n||pOe(r);if((0,ck.Ay)("tags"!==t||b.every((function(e){return!e.disabled})),"Please avoid setting option to disabled in tags mode since user can always type text as tag."),"tags"===t||"combobox"===t){var y=b.some((function(e){return e.options?e.options.some((function(e){return"number"==typeof("value"in e?e.value:e.key)})):"number"==typeof("value"in e?e.value:e.key)}));(0,ck.Ay)(!y,"`value` of Option should not use number type when `mode` is `tags` or `combobox`.")}if((0,ck.Ay)("combobox"!==t||!v,"`combobox` mode not support `optionLabelProp`. Please set `value` on Option directly."),(0,ck.Ay)("combobox"===t||!o,"`backfill` only works with `combobox` mode."),(0,ck.Ay)("combobox"===t||!l,"`getInputElement` only work with `combobox` mode."),(0,ck.g9)("combobox"!==t||!l||!i||!a,"Customize `getInputElement` should customize clear and placeholder logic instead of configuring `allowClear` and `placeholder`."),c&&!g&&"combobox"!==t&&"tags"!==t&&(0,ck.Ay)(!1,"`onSearch` should work with `showSearch` instead of use alone."),(0,ck.g9)(!s||d,"`defaultOpen` makes Select open without focus which means it will not close by click outside. You can set `autoFocus` if needed."),null!=h){var w=vOe(h);(0,ck.Ay)(!f||w.every((function(e){return"object"===(0,Gn.A)(e)&&("key"in e||"value"in e)})),"`value` should in shape of `{ value: string | number, label?: ReactNode }` when you set `labelInValue` to `true`"),(0,ck.Ay)(!m||Array.isArray(h),"`value` should be array when `mode` is `multiple` or `tags`")}if(r){var A=null;(0,rE.A)(r).some((function(e){if(!Yu.isValidElement(e)||!e.type)return!1;var t=e.type;return!t.isSelectOption&&(t.isSelectOptGroup?!(0,rE.A)(e.props.children).every((function(t){return!(Yu.isValidElement(t)&&e.type&&!t.type.isSelectOption&&(A=t.type,1))})):(A=t,!0))})),A&&(0,ck.Ay)(!1,"`children` should be `Select.Option` or `Select.OptGroup` instead of `".concat(A.displayName||A.name||A,"`.")),(0,ck.Ay)(void 0===p,"`inputValue` is deprecated, please use `searchValue` instead.")}},fillOptionsWithMissingValue:function(e,t,n,r){var o=vOe(t).slice().sort(),i=(0,ln.A)(e),a=new Set;return e.forEach((function(e){e.options?e.options.forEach((function(e){a.add(e.value)})):a.add(e.value)})),o.forEach((function(e){var t,o=r?e.value:e;a.has(o)||i.push(r?(t={},(0,Ha.A)(t,n,e.label),(0,Ha.A)(t,"value",o),t):{value:o})})),i}}),FOe=function(e){(0,Xe.A)(n,e);var t=(0,Wk.A)(n);function n(){var e;return(0,Ke.A)(this,n),(e=t.apply(this,arguments)).selectRef=Yu.createRef(),e.focus=function(){e.selectRef.current.focus()},e.blur=function(){e.selectRef.current.blur()},e}return(0,$e.A)(n,[{key:"render",value:function(){return Yu.createElement(MOe,(0,ek.A)({ref:this.selectRef},this.props))}}]),n}(Yu.Component);FOe.Option=dOe,FOe.OptGroup=hOe;const LOe=FOe,UOe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};var VOe=function(e,t){return Yu.createElement(Ek,(0,ok.A)((0,ok.A)({},e),{},{ref:t,icon:UOe}))};const HOe=Yu.forwardRef(VOe);var zOe="SECRET_COMBOBOX_MODE_DO_NOT_USE",WOe=function(e,t){var n,r,o=e.prefixCls,i=e.bordered,a=void 0===i||i,l=e.className,u=e.getPopupContainer,c=e.dropdownClassName,s=e.listHeight,d=void 0===s?256:s,f=e.listItemHeight,h=void 0===f?24:f,p=e.size,v=e.notFoundContent,m=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["prefixCls","bordered","className","getPopupContainer","dropdownClassName","listHeight","listItemHeight","size","notFoundContent"]),g=Yu.useContext(o_),b=g.getPopupContainer,y=g.getPrefixCls,w=g.renderEmpty,A=g.direction,k=g.virtual,_=g.dropdownMatchSelectWidth,C=Yu.useContext(m_),N=y("select",o),O=y(),x=Yu.useMemo((function(){var e=m.mode;if("combobox"!==e)return e===zOe?"combobox":e}),[m.mode]),E="multiple"===x||"tags"===x;r=void 0!==v?v:"combobox"===x?null:w("Select");var D=function(e){var t=e.suffixIcon,n=e.clearIcon,r=e.menuItemSelectedIcon,o=e.removeIcon,i=e.loading,a=e.multiple,l=e.prefixCls,u=n;n||(u=Yu.createElement(Bk,null));var c=null;if(void 0!==t)c=t;else if(i)c=Yu.createElement(Pk,{spin:!0});else{var s="".concat(l,"-suffix");c=function(e){var t=e.open,n=e.showSearch;return t&&n?Yu.createElement(CP,{className:s}):Yu.createElement(Eye,{className:s})}}return{clearIcon:u,suffixIcon:c,itemIcon:void 0!==r?r:a?Yu.createElement(HOe,null):null,removeIcon:void 0!==o?o:Yu.createElement(y_,null)}}((0,ek.A)((0,ek.A)({},m),{multiple:E,prefixCls:N})),P=D.suffixIcon,R=D.itemIcon,S=D.removeIcon,T=D.clearIcon,j=(0,tx.A)(m,["suffixIcon","itemIcon"]),I=nk()(c,(0,Ha.A)({},"".concat(N,"-dropdown-").concat(A),"rtl"===A)),B=p||C,M=nk()((n={},(0,Ha.A)(n,"".concat(N,"-lg"),"large"===B),(0,Ha.A)(n,"".concat(N,"-sm"),"small"===B),(0,Ha.A)(n,"".concat(N,"-rtl"),"rtl"===A),(0,Ha.A)(n,"".concat(N,"-borderless"),!a),n),l);return Yu.createElement(LOe,(0,ek.A)({ref:t,virtual:k,dropdownMatchSelectWidth:_},j,{transitionName:$x(O,"slide-up",m.transitionName),listHeight:d,listItemHeight:h,mode:x,prefixCls:N,direction:A,inputIcon:P,menuItemSelectedIcon:R,removeIcon:S,clearIcon:T,notFoundContent:r,className:M,getPopupContainer:u||b,dropdownClassName:I}))},qOe=Yu.forwardRef(WOe);qOe.SECRET_COMBOBOX_MODE_DO_NOT_USE=zOe,qOe.Option=dOe,qOe.OptGroup=hOe;const $Oe=qOe;function KOe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,YOe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function YOe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(YOe=function(){return!!e})()}var GOe=function(e){function t(){return(0,Ke.A)(this,t),KOe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["className","children"]);return Gu().createElement($Oe,Object.assign({className:Uf(t,"ne-lang-select"),suffixIcon:Gu().createElement(SC,{type:"arrow-down",size:16})},r),n)}}])}(Yu.Component),JOe=$Oe.Option;const XOe=$_;function QOe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,ZOe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function ZOe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ZOe=function(){return!!e})()}var exe=function(e){function t(){return(0,Ke.A)(this,t),QOe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){var e=this,t=this.props.config,n=t.icon,r=t.onClick,o=t.tooltip,i=Gu().createElement(hye,{onClick:function(){e.props.onClick(),r&&r()},className:Uf("ne-ui-overlay-button",this.props.className)},"string"==typeof n?Gu().createElement(SC,{type:n}):n);return o?Gu().createElement(Qx,{overlayClassName:"ne-ui-overlay-bar-tooltip",title:o,trigger:["hover","click"],placement:"top"},i):i}}])}(Yu.Component);function txe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,nxe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function nxe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nxe=function(){return!!e})()}Object.defineProperty(exe,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{onClick:function(){}}});var rxe=function(e){function t(){return(0,Ke.A)(this,t),txe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){return Gu().createElement("div",{className:Uf("ne-ui-overlay-divider",this.props.className)})}}])}(Yu.Component);function oxe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,ixe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function ixe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ixe=function(){return!!e})()}var axe=function(e){function t(){return(0,Ke.A)(this,t),oxe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){var e=this._renderContent();return Gu().createElement(nR,{placement:this.props.placement,targetNode:this.props.targetNode,uiEmitter:this.props.uiEmitter,onClose:this.props.onClose,offset:0,className:"ne-ui-overlay-bar-wrap",visible:!0},e)}},{key:"_renderContent",value:function(){var e=this,t=this.props.items.map((function(t,n){return"|"===t?Gu().createElement(rxe,{className:"ne-ui-overlay-item",key:"divider-".concat(n)}):"button"===t.type?Gu().createElement(exe,{key:"".concat(t.type).concat(n),className:"ne-ui-overlay-item",onClick:e.props.onClose,config:t}):(bt(!1,"framework/uilib/src/overlay-bar/index.tsx:77"),null)}));return Gu().createElement("div",{className:Uf("ne-ui-overlay",this.props.className),onMouseDown:function(e){return e.preventDefault()}},t)}}])}(Yu.Component);Object.defineProperty(axe,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{onClose:function(){}}});var lxe=void 0,uxe=Yu.forwardRef((function(e,t){var n=(0,Ix.A)(!1,{value:e.visible,defaultValue:e.defaultVisible}),r=(0,tn.A)(n,2),o=r[0],i=r[1],a=function(t,n){var r;i(t),null===(r=e.onVisibleChange)||void 0===r||r.call(e,t,n)},l=function(t){var n;a(!1,t),null===(n=e.onConfirm)||void 0===n||n.call(lxe,t)},u=function(t){var n;a(!1,t),null===(n=e.onCancel)||void 0===n||n.call(lxe,t)},c=Yu.useContext(o_).getPrefixCls,s=e.prefixCls,d=e.placement,f=e.children,h=e.overlayClassName,p=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["prefixCls","placement","children","overlayClassName"]),v=c("popover",s),m=c("popconfirm",s),g=nk()(m,h),b=Yu.createElement(Xk,{componentName:"Popconfirm",defaultLocale:Yk.Popconfirm},(function(t){return function(t,n){var r=e.okButtonProps,o=e.cancelButtonProps,i=e.title,a=e.cancelText,c=e.okText,s=e.okType,d=e.icon;return Yu.createElement("div",{className:"".concat(t,"-inner-content")},Yu.createElement("div",{className:"".concat(t,"-message")},d,Yu.createElement("div",{className:"".concat(t,"-message-title")},pR(i))),Yu.createElement("div",{className:"".concat(t,"-buttons")},Yu.createElement(Ax,(0,ek.A)({onClick:u,size:"small"},o),a||n.cancelText),Yu.createElement(Ax,(0,ek.A)({onClick:l},bx(s),{size:"small"},r),c||n.okText)))}(v,t)})),y=c();return Yu.createElement(Jx,(0,ek.A)({},p,{prefixCls:v,placement:d,onVisibleChange:function(t){e.disabled||a(t)},visible:o,overlay:b,overlayClassName:g,ref:t,transitionName:$x(y,"zoom-big",e.transitionName)}),ux(f,{onKeyDown:function(e){var t,n;Yu.isValidElement(f)&&(null===(n=null==f?void 0:(t=f.props).onKeyDown)||void 0===n||n.call(t,e)),function(e){e.keyCode===jE.A.ESC&&o&&a(!1,e)}(e)}}))}));uxe.defaultProps={placement:"top",trigger:"click",okType:"primary",icon:Yu.createElement(Tk,null),disabled:!1};const cxe=uxe;var sxe=Yu.createContext(null),dxe=sxe.Provider;const fxe=sxe;var hxe=function(e,t){var n,r=Yu.useContext(fxe),o=Yu.useContext(o_),i=o.getPrefixCls,a=o.direction,l=Yu.useRef(),u=(0,LC.K4)(t,l);Yu.useEffect((function(){u_(!("optionType"in e),"Radio","`optionType` is only support in Radio.Group.")}),[]);var c=e.prefixCls,s=e.className,d=e.children,f=e.style,h=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["prefixCls","className","children","style"]),p=i("radio",c),v=(0,ek.A)({},h);r&&(v.name=r.name,v.onChange=function(t){var n,o;null===(n=e.onChange)||void 0===n||n.call(e,t),null===(o=null==r?void 0:r.onChange)||void 0===o||o.call(r,t)},v.checked=e.value===r.value,v.disabled=e.disabled||r.disabled);var m=nk()("".concat(p,"-wrapper"),(n={},(0,Ha.A)(n,"".concat(p,"-wrapper-checked"),v.checked),(0,Ha.A)(n,"".concat(p,"-wrapper-disabled"),v.disabled),(0,Ha.A)(n,"".concat(p,"-wrapper-rtl"),"rtl"===a),n),s);return Yu.createElement("label",{className:m,style:f,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},Yu.createElement(kAe,(0,ek.A)({},v,{prefixCls:p,ref:u})),void 0!==d?Yu.createElement("span",null,d):null)},pxe=Yu.forwardRef(hxe);pxe.displayName="Radio",pxe.defaultProps={type:"radio"};const vxe=pxe;var mxe=Yu.forwardRef((function(e,t){var n=Yu.useContext(o_),r=n.getPrefixCls,o=n.direction,i=Yu.useContext(m_),a=(0,Ix.A)(e.defaultValue,{value:e.value}),l=(0,tn.A)(a,2),u=l[0],c=l[1];return Yu.createElement(dxe,{value:{onChange:function(t){var n=u,r=t.target.value;"value"in e||c(r);var o=e.onChange;o&&r!==n&&o(t)},value:u,disabled:e.disabled,name:e.name}},function(){var n,a=e.prefixCls,l=e.className,c=void 0===l?"":l,s=e.options,d=e.optionType,f=e.buttonStyle,h=void 0===f?"outline":f,p=e.disabled,v=e.children,m=e.size,g=e.style,b=e.id,y=e.onMouseEnter,w=e.onMouseLeave,A=r("radio",a),k="".concat(A,"-group"),_=v;if(s&&s.length>0){var C="button"===d?"".concat(A,"-button"):A;_=s.map((function(e){return"string"==typeof e?Yu.createElement(vxe,{key:e,prefixCls:C,disabled:p,value:e,checked:u===e},e):Yu.createElement(vxe,{key:"radio-group-value-options-".concat(e.value),prefixCls:C,disabled:e.disabled||p,value:e.value,checked:u===e.value,style:e.style},e.label)}))}var N=m||i,O=nk()(k,"".concat(k,"-").concat(h),(n={},(0,Ha.A)(n,"".concat(k,"-").concat(N),N),(0,Ha.A)(n,"".concat(k,"-rtl"),"rtl"===o),n),c);return Yu.createElement("div",(0,ek.A)({},function(e){return Object.keys(e).reduce((function(t,n){return"data-"!==n.substr(0,5)&&"aria-"!==n.substr(0,5)&&"role"!==n||"data-__"===n.substr(0,7)||(t[n]=e[n]),t}),{})}(e),{className:O,style:g,onMouseEnter:y,onMouseLeave:w,id:b,ref:t}),_)}())}));const gxe=Yu.memo(mxe);var bxe=function(e,t){var n=Yu.useContext(fxe),r=Yu.useContext(o_).getPrefixCls,o=e.prefixCls,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["prefixCls"]),a=r("radio-button",o);return n&&(i.checked=e.value===n.value,i.disabled=e.disabled||n.disabled),Yu.createElement(vxe,(0,ek.A)({prefixCls:a},i,{type:"radio",ref:t}))};const yxe=Yu.forwardRef(bxe);var wxe=vxe;wxe.Button=yxe,wxe.Group=gxe;const Axe=wxe;function kxe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,_xe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function _xe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_xe=function(){return!!e})()}var Cxe=function(e){function t(){return(0,Ke.A)(this,t),kxe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){var e=Uf(this.props.className,"ne-ui-select");return Gu().createElement($Oe,{className:e,dropdownClassName:this.props.dropdownClassName,defaultActiveFirstOption:!1,dropdownMatchSelectWidth:this.props.dropdownMatchSelectWidth,getPopupContainer:this.props.getPopupContainer,options:this.props.options,disabled:this.props.disabled,size:this.props.size,value:this.props.value,onChange:this.props.onChange,onDropdownVisibleChange:this.props.onDropdownVisibleChange},this.props.children)}}])}(Yu.Component);function Nxe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Oxe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Oxe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Oxe=function(){return!!e})()}Object.defineProperty(Cxe,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{value:null,onChange:function(){}}}),Object.defineProperty(Cxe,"Option",{enumerable:!0,configurable:!0,writable:!0,value:$Oe.Option});var xxe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},Exe=function(e){function t(){return(0,Ke.A)(this,t),Nxe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children,r=e.onClose,o=xxe(e,["className","children","onClose"]);return Gu().createElement("div",Object.assign({className:Uf("ne-sidebar-header",t)},o),Gu().createElement("div",{className:"ne-sidebar-title"},n),Gu().createElement("button",{type:"button",className:"ne-sidebar-close-btn",onMouseDown:function(e){return e.preventDefault()},onClick:r},Gu().createElement(SC,{type:"close"})))}}])}(Yu.Component);Object.defineProperty(Exe,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{onClose:function(){}}});var Dxe=function(e){function t(){return(0,Ke.A)(this,t),Nxe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.onClickCapture,r=xxe(e,["className","onClickCapture"]);return Gu().createElement("div",Object.assign({onClickCapture:n,className:Uf("ne-sidebar-body",t)},r))}}])}(Yu.Component),Pxe=function(e){function t(){return(0,Ke.A)(this,t),Nxe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=xxe(e,["className"]);return Gu().createElement("div",Object.assign({className:Uf("ne-sidebar-view",t)},n))}}])}(Yu.Component);Object.defineProperty(Pxe,"Header",{enumerable:!0,configurable:!0,writable:!0,value:Exe}),Object.defineProperty(Pxe,"Body",{enumerable:!0,configurable:!0,writable:!0,value:Dxe});var Rxe=(dx("small","default","large"),null),Sxe=function(e){(0,Xe.A)(n,e);var t=(0,Wk.A)(n);function n(e){var r;(0,Ke.A)(this,n),(r=t.call(this,e)).debouncifyUpdateSpinning=function(e){var t=(e||r.props).delay;t&&(r.cancelExistingSpin(),r.updateSpinning=Qm()(r.originalUpdateSpinning,t))},r.updateSpinning=function(){var e=r.props.spinning;r.state.spinning!==e&&r.setState({spinning:e})},r.renderSpin=function(e){var t,n=e.getPrefixCls,o=e.direction,i=r.props,a=i.prefixCls,l=i.className,u=i.size,c=i.tip,s=i.wrapperClassName,d=i.style,f=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(i,["prefixCls","className","size","tip","wrapperClassName","style"]),h=r.state.spinning,p=n("spin",a),v=nk()(p,(t={},(0,Ha.A)(t,"".concat(p,"-sm"),"small"===u),(0,Ha.A)(t,"".concat(p,"-lg"),"large"===u),(0,Ha.A)(t,"".concat(p,"-spinning"),h),(0,Ha.A)(t,"".concat(p,"-show-text"),!!c),(0,Ha.A)(t,"".concat(p,"-rtl"),"rtl"===o),t),l),m=(0,tx.A)(f,["spinning","delay","indicator"]),g=Yu.createElement("div",(0,ek.A)({},m,{style:d,className:v}),function(e,t){var n=t.indicator,r="".concat(e,"-dot");return null===n?null:lx(n)?ux(n,{className:nk()(n.props.className,r)}):lx(Rxe)?ux(Rxe,{className:nk()(Rxe.props.className,r)}):Yu.createElement("span",{className:nk()(r,"".concat(e,"-dot-spin"))},Yu.createElement("i",{className:"".concat(e,"-dot-item")}),Yu.createElement("i",{className:"".concat(e,"-dot-item")}),Yu.createElement("i",{className:"".concat(e,"-dot-item")}),Yu.createElement("i",{className:"".concat(e,"-dot-item")}))}(p,r.props),c?Yu.createElement("div",{className:"".concat(p,"-text")},c):null);if(r.isNestedPattern()){var b=nk()("".concat(p,"-container"),(0,Ha.A)({},"".concat(p,"-blur"),h));return Yu.createElement("div",(0,ek.A)({},m,{className:nk()("".concat(p,"-nested-loading"),s)}),h&&Yu.createElement("div",{key:"loading"},g),Yu.createElement("div",{className:b,key:"container"},r.props.children))}return g};var o=e.spinning,i=function(e,t){return!!e&&!!t&&!isNaN(Number(t))}(o,e.delay);return r.state={spinning:o&&!i},r.originalUpdateSpinning=r.updateSpinning,r.debouncifyUpdateSpinning(e),r}return(0,$e.A)(n,[{key:"componentDidMount",value:function(){this.updateSpinning()}},{key:"componentDidUpdate",value:function(){this.debouncifyUpdateSpinning(),this.updateSpinning()}},{key:"componentWillUnmount",value:function(){this.cancelExistingSpin()}},{key:"cancelExistingSpin",value:function(){var e=this.updateSpinning;e&&e.cancel&&e.cancel()}},{key:"isNestedPattern",value:function(){return!(!this.props||void 0===this.props.children)}},{key:"render",value:function(){return Yu.createElement(i_,null,this.renderSpin)}}],[{key:"setDefaultIndicator",value:function(e){Rxe=e}}]),n}(Yu.Component);Sxe.defaultProps={spinning:!0,size:"default",wrapperClassName:""};const Txe=Sxe;const jxe=Gu().forwardRef((function(e,t){var n=e.className,r=e.justify,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["className","justify"]);return Gu().createElement(Txe,Object.assign({className:nk()("ne-ui-spin",n,{"ne-ui-spin-block":"block"===r}),indicator:Gu().createElement("div",{className:"ne-ui-spin-indicator"}),ref:t},o))}));function Ixe(e){var t=(0,Yu.useRef)(),n=(0,Yu.useRef)(!1);return(0,Yu.useEffect)((function(){return function(){n.current=!0,BC.A.cancel(t.current)}}),[]),function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];n.current||(BC.A.cancel(t.current),t.current=(0,BC.A)((function(){e.apply(void 0,o)})))}}function Bxe(e,t){var n,r=e.prefixCls,o=e.id,i=e.active,a=e.rtl,l=e.tab,u=l.key,c=l.tab,s=l.disabled,d=l.closeIcon,f=e.tabBarGutter,h=e.tabPosition,p=e.closable,v=e.renderWrapper,m=e.removeAriaLabel,g=e.editable,b=e.onClick,y=e.onRemove,w=e.onFocus,A="".concat(r,"-tab");Yu.useEffect((function(){return y}),[]);var k={};"top"===h||"bottom"===h?k[a?"marginRight":"marginLeft"]=f:k.marginTop=f;var _=g&&!1!==p&&!s;function C(e){s||b(e)}var N=Yu.createElement("div",{key:u,ref:t,className:nk()(A,(n={},(0,Ha.A)(n,"".concat(A,"-with-remove"),_),(0,Ha.A)(n,"".concat(A,"-active"),i),(0,Ha.A)(n,"".concat(A,"-disabled"),s),n)),style:k,onClick:C},Yu.createElement("div",{role:"tab","aria-selected":i,id:o&&"".concat(o,"-tab-").concat(u),className:"".concat(A,"-btn"),"aria-controls":o&&"".concat(o,"-panel-").concat(u),"aria-disabled":s,tabIndex:s?null:0,onClick:function(e){e.stopPropagation(),C(e)},onKeyDown:function(e){[jE.A.SPACE,jE.A.ENTER].includes(e.which)&&(e.preventDefault(),C(e))},onFocus:w},c),_&&Yu.createElement("button",{type:"button","aria-label":m||"remove",tabIndex:0,className:"".concat(A,"-remove"),onClick:function(e){var t;e.stopPropagation(),(t=e).preventDefault(),t.stopPropagation(),g.onEdit("remove",{key:u,event:t})}},d||g.removeIcon||"×"));return v&&(N=v(N)),N}const Mxe=Yu.forwardRef(Bxe);var Fxe={width:0,height:0,left:0,top:0},Lxe={width:0,height:0,left:0,top:0,right:0};function Uxe(e,t){var n=e.prefixCls,r=e.editable,o=e.locale,i=e.style;return r&&!1!==r.showAdd?Yu.createElement("button",{ref:t,type:"button",className:"".concat(n,"-nav-add"),style:i,"aria-label":(null==o?void 0:o.addAriaLabel)||"Add tab",onClick:function(e){r.onEdit("add",{event:e})}},r.addIcon||"+"):null}const Vxe=Yu.forwardRef(Uxe);function Hxe(e,t){var n=e.prefixCls,r=e.id,o=e.tabs,i=e.locale,a=e.mobile,l=e.moreIcon,u=void 0===l?"More":l,c=e.moreTransitionName,s=e.style,d=e.className,f=e.editable,h=e.tabBarGutter,p=e.rtl,v=e.onTabClick,m=(0,Yu.useState)(!1),g=(0,tn.A)(m,2),b=g[0],y=g[1],w=(0,Yu.useState)(null),A=(0,tn.A)(w,2),k=A[0],_=A[1],C="".concat(r,"-more-popup"),N="".concat(n,"-dropdown"),O=null!==k?"".concat(C,"-").concat(k):null,x=null==i?void 0:i.dropdownAriaLabel,E=Yu.createElement(zD,{onClick:function(e){var t=e.key,n=e.domEvent;v(t,n),y(!1)},id:C,tabIndex:-1,role:"listbox","aria-activedescendant":O,selectedKeys:[k],"aria-label":void 0!==x?x:"expanded dropdown"},o.map((function(e){return Yu.createElement(rD,{key:e.key,id:"".concat(C,"-").concat(e.key),role:"option","aria-controls":r&&"".concat(r,"-panel-").concat(e.key),disabled:e.disabled},e.tab)})));function D(e){for(var t=o.filter((function(e){return!e.disabled})),n=t.findIndex((function(e){return e.key===k}))||0,r=t.length,i=0;i<r;i+=1){var a=t[n=(n+e+r)%r];if(!a.disabled)return void _(a.key)}}(0,Yu.useEffect)((function(){var e=document.getElementById(O);e&&e.scrollIntoView&&e.scrollIntoView(!1)}),[k]),(0,Yu.useEffect)((function(){b||_(null)}),[b]);var P=(0,Ha.A)({},p?"marginRight":"marginLeft",h);o.length||(P.visibility="hidden",P.order=1);var R=nk()((0,Ha.A)({},"".concat(N,"-rtl"),p)),S=a?null:Yu.createElement(YO,{prefixCls:N,overlay:E,trigger:["hover"],visible:b,transitionName:c,onVisibleChange:y,overlayClassName:R,mouseEnterDelay:.1,mouseLeaveDelay:.1},Yu.createElement("button",{type:"button",className:"".concat(n,"-nav-more"),style:P,tabIndex:-1,"aria-hidden":"true","aria-haspopup":"listbox","aria-controls":C,id:"".concat(r,"-more"),"aria-expanded":b,onKeyDown:function(e){var t=e.which;if(b)switch(t){case jE.A.UP:D(-1),e.preventDefault();break;case jE.A.DOWN:D(1),e.preventDefault();break;case jE.A.ESC:y(!1);break;case jE.A.SPACE:case jE.A.ENTER:null!==k&&v(k,e)}else[jE.A.DOWN,jE.A.SPACE,jE.A.ENTER].includes(t)&&(y(!0),e.preventDefault())}},u));return Yu.createElement("div",{className:nk()("".concat(n,"-nav-operations"),d),style:s,ref:t},S,Yu.createElement(Vxe,{prefixCls:n,locale:i,editable:f}))}const zxe=Yu.forwardRef(Hxe),Wxe=(0,Yu.createContext)(null);var qxe=Math.pow(.995,20);function $xe(e,t){var n=Yu.useRef(e),r=Yu.useState({}),o=(0,tn.A)(r,2)[1];return[n.current,function(e){var r="function"==typeof e?e(n.current):e;r!==n.current&&t(r,n.current),n.current=r,o({})}]}var Kxe=function(e){var t,n=e.position,r=e.prefixCls,o=e.extra;if(!o)return null;var i=o;return"right"===n&&(t=i.right||!i.left&&i||null),"left"===n&&(t=i.left||null),t?Yu.createElement("div",{className:"".concat(r,"-extra-content")},t):null};function Yxe(e,t){var n,r,o=Yu.useContext(Wxe),i=o.prefixCls,a=o.tabs,l=e.className,u=e.style,c=e.id,s=e.animated,d=e.activeKey,f=e.rtl,h=e.extra,p=e.editable,v=e.locale,m=e.tabPosition,g=e.tabBarGutter,b=e.children,y=e.onTabClick,w=e.onTabScroll,A=(0,Yu.useRef)(),k=(0,Yu.useRef)(),_=(0,Yu.useRef)(),C=(0,Yu.useRef)(),N=(r=(0,Yu.useRef)(new Map),[function(e){return r.current.has(e)||r.current.set(e,Yu.createRef()),r.current.get(e)},function(e){r.current.delete(e)}]),O=(0,tn.A)(N,2),x=O[0],E=O[1],D="top"===m||"bottom"===m,P=$xe(0,(function(e,t){D&&w&&w({direction:e>t?"left":"right"})})),R=(0,tn.A)(P,2),S=R[0],T=R[1],j=$xe(0,(function(e,t){!D&&w&&w({direction:e>t?"top":"bottom"})})),I=(0,tn.A)(j,2),B=I[0],M=I[1],F=(0,Yu.useState)(0),L=(0,tn.A)(F,2),U=L[0],V=L[1],H=(0,Yu.useState)(0),z=(0,tn.A)(H,2),W=z[0],q=z[1],$=(0,Yu.useState)(0),K=(0,tn.A)($,2),Y=K[0],G=K[1],J=(0,Yu.useState)(0),X=(0,tn.A)(J,2),Q=X[0],Z=X[1],ee=(0,Yu.useState)(null),te=(0,tn.A)(ee,2),ne=te[0],re=te[1],oe=(0,Yu.useState)(null),ie=(0,tn.A)(oe,2),ae=ie[0],le=ie[1],ue=(0,Yu.useState)(0),ce=(0,tn.A)(ue,2),se=ce[0],de=ce[1],fe=(0,Yu.useState)(0),he=(0,tn.A)(fe,2),pe=he[0],ve=he[1],me=function(e){var t=(0,Yu.useRef)([]),n=(0,Yu.useState)({}),r=(0,tn.A)(n,2)[1],o=(0,Yu.useRef)("function"==typeof e?e():e),i=Ixe((function(){var e=o.current;t.current.forEach((function(t){e=t(e)})),t.current=[],o.current=e,r({})}));return[o.current,function(e){t.current.push(e),i()}]}(new Map),ge=(0,tn.A)(me,2),be=ge[0],ye=ge[1],we=function(e,t,n){return(0,Yu.useMemo)((function(){for(var n,r=new Map,o=t.get(null===(n=e[0])||void 0===n?void 0:n.key)||Fxe,i=o.left+o.width,a=0;a<e.length;a+=1){var l,u=e[a].key,c=t.get(u);c||(c=t.get(null===(l=e[a-1])||void 0===l?void 0:l.key)||Fxe);var s=r.get(u)||(0,ok.A)({},c);s.right=i-s.left-s.width,r.set(u,s)}return r}),[e.map((function(e){return e.key})).join("_"),t,n])}(a,be,U),Ae="".concat(i,"-nav-operations-hidden"),ke=0,_e=0;function Ce(e){return e<ke?ke:e>_e?_e:e}D?f?(ke=0,_e=Math.max(0,U-ne)):(ke=Math.min(0,ne-U),_e=0):(ke=Math.min(0,ae-W),_e=0);var Ne=(0,Yu.useRef)(),Oe=(0,Yu.useState)(),xe=(0,tn.A)(Oe,2),Ee=xe[0],De=xe[1];function Pe(){De(Date.now())}function Re(){window.clearTimeout(Ne.current)}function Se(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=we.get(e)||{width:0,height:0,left:0,right:0,top:0};if(D){var n=S;f?t.right<S?n=t.right:t.right+t.width>S+ne&&(n=t.right+t.width-ne):t.left<-S?n=-t.left:t.left+t.width>-S+ne&&(n=-(t.left+t.width-ne)),M(0),T(Ce(n))}else{var r=B;t.top<-B?r=-t.top:t.top+t.height>-B+ae&&(r=-(t.top+t.height-ae)),T(0),M(Ce(r))}}!function(e,t){var n=(0,Yu.useState)(),r=(0,tn.A)(n,2),o=r[0],i=r[1],a=(0,Yu.useState)(0),l=(0,tn.A)(a,2),u=l[0],c=l[1],s=(0,Yu.useState)(0),d=(0,tn.A)(s,2),f=d[0],h=d[1],p=(0,Yu.useState)(),v=(0,tn.A)(p,2),m=v[0],g=v[1],b=(0,Yu.useRef)(),y=(0,Yu.useRef)(),w=(0,Yu.useRef)(null);w.current={onTouchStart:function(e){var t=e.touches[0],n=t.screenX,r=t.screenY;i({x:n,y:r}),window.clearInterval(b.current)},onTouchMove:function(e){if(o){e.preventDefault();var n=e.touches[0],r=n.screenX,a=n.screenY;i({x:r,y:a});var l=r-o.x,s=a-o.y;t(l,s);var d=Date.now();c(d),h(d-u),g({x:l,y:s})}},onTouchEnd:function(){if(o&&(i(null),g(null),m)){var e=m.x/f,n=m.y/f,r=Math.abs(e),a=Math.abs(n);if(Math.max(r,a)<.1)return;var l=e,u=n;b.current=window.setInterval((function(){Math.abs(l)<.01&&Math.abs(u)<.01?window.clearInterval(b.current):t(20*(l*=qxe),20*(u*=qxe))}),20)}},onWheel:function(e){var n=e.deltaX,r=e.deltaY,o=0,i=Math.abs(n),a=Math.abs(r);i===a?o="x"===y.current?n:r:i>a?(o=n,y.current="x"):(o=r,y.current="y"),t(-o,-o)&&e.preventDefault()}},Yu.useEffect((function(){function t(e){w.current.onTouchMove(e)}function n(e){w.current.onTouchEnd(e)}return document.addEventListener("touchmove",t,{passive:!1}),document.addEventListener("touchend",n,{passive:!1}),e.current.addEventListener("touchstart",(function(e){w.current.onTouchStart(e)}),{passive:!1}),e.current.addEventListener("wheel",(function(e){w.current.onWheel(e)})),function(){document.removeEventListener("touchmove",t),document.removeEventListener("touchend",n)}}),[])}(A,(function(e,t){function n(e,t){e((function(e){return Ce(e+t)}))}if(D){if(ne>=U)return!1;n(T,e)}else{if(ae>=W)return!1;n(M,t)}return Re(),Pe(),!0})),(0,Yu.useEffect)((function(){return Re(),Ee&&(Ne.current=window.setTimeout((function(){De(0)}),100)),Re}),[Ee]);var Te=function(e,t,n,r,o){var i,a,l,u=o.tabs,c=o.tabPosition,s=o.rtl;["top","bottom"].includes(c)?(i="width",a=s?"right":"left",l=Math.abs(t.left)):(i="height",a="top",l=-t.top);var d=t[i],f=r[i],h=d;return n[i]+f>d&&(h=d-f),(0,Yu.useMemo)((function(){if(!u.length)return[0,0];for(var t=u.length,n=t,r=0;r<t;r+=1){var o=e.get(u[r].key)||Lxe;if(o[a]+o[i]>l+h){n=r-1;break}}for(var c=0,s=t-1;s>=0;s-=1)if((e.get(u[s].key)||Lxe)[a]<l){c=s+1;break}return[c,n]}),[e,l,h,c,u.map((function(e){return e.key})).join("_"),s])}(we,{width:ne,height:ae,left:S,top:B},{width:Y,height:Q},{width:se,height:pe},(0,ok.A)((0,ok.A)({},e),{},{tabs:a})),je=(0,tn.A)(Te,2),Ie=je[0],Be=je[1],Me=a.map((function(e){var t=e.key;return Yu.createElement(Mxe,{id:c,prefixCls:i,key:t,rtl:f,tab:e,closable:e.closable,editable:p,active:t===d,tabPosition:m,tabBarGutter:g,renderWrapper:b,removeAriaLabel:null==v?void 0:v.removeAriaLabel,ref:x(t),onClick:function(e){y(t,e)},onRemove:function(){E(t)},onFocus:function(){Se(t),Pe(),f||(A.current.scrollLeft=0),A.current.scrollTop=0}})})),Fe=Ixe((function(){var e,t,n,r,o,i,l,u,c,s=(null===(e=A.current)||void 0===e?void 0:e.offsetWidth)||0,d=(null===(t=A.current)||void 0===t?void 0:t.offsetHeight)||0,f=(null===(n=C.current)||void 0===n?void 0:n.offsetWidth)||0,h=(null===(r=C.current)||void 0===r?void 0:r.offsetHeight)||0,p=(null===(o=_.current)||void 0===o?void 0:o.offsetWidth)||0,v=(null===(i=_.current)||void 0===i?void 0:i.offsetHeight)||0;re(s),le(d),de(f),ve(h);var m=((null===(l=k.current)||void 0===l?void 0:l.offsetWidth)||0)-f,g=((null===(u=k.current)||void 0===u?void 0:u.offsetHeight)||0)-h;V(m),q(g);var b=null===(c=_.current)||void 0===c?void 0:c.className.includes(Ae);G(m-(b?0:p)),Z(g-(b?0:v)),ye((function(){var e=new Map;return a.forEach((function(t){var n=t.key,r=x(n).current;r&&e.set(n,{width:r.offsetWidth,height:r.offsetHeight,left:r.offsetLeft,top:r.offsetTop})})),e}))})),Le=a.slice(0,Ie),Ue=a.slice(Be+1),Ve=[].concat((0,ln.A)(Le),(0,ln.A)(Ue)),He=(0,Yu.useState)(),ze=(0,tn.A)(He,2),We=ze[0],qe=ze[1],$e=we.get(d),Ke=(0,Yu.useRef)();function Ye(){BC.A.cancel(Ke.current)}(0,Yu.useEffect)((function(){var e={};return $e&&(D?(f?e.right=$e.right:e.left=$e.left,e.width=$e.width):(e.top=$e.top,e.height=$e.height)),Ye(),Ke.current=(0,BC.A)((function(){qe(e)})),Ye}),[$e,D,f]),(0,Yu.useEffect)((function(){Se()}),[d,$e,we,D]),(0,Yu.useEffect)((function(){Fe()}),[f,g,d,a.map((function(e){return e.key})).join("_")]);var Ge,Je,Xe,Qe,Ze=!!Ve.length,et="".concat(i,"-nav-wrap");return D?f?(Je=S>0,Ge=S+ne<U):(Ge=S<0,Je=-S+ne<U):(Xe=B<0,Qe=-B+ae<W),Yu.createElement("div",{ref:t,role:"tablist",className:nk()("".concat(i,"-nav"),l),style:u,onKeyDown:function(){Pe()}},Yu.createElement(Kxe,{position:"left",extra:h,prefixCls:i}),Yu.createElement(fE,{onResize:Fe},Yu.createElement("div",{className:nk()(et,(n={},(0,Ha.A)(n,"".concat(et,"-ping-left"),Ge),(0,Ha.A)(n,"".concat(et,"-ping-right"),Je),(0,Ha.A)(n,"".concat(et,"-ping-top"),Xe),(0,Ha.A)(n,"".concat(et,"-ping-bottom"),Qe),n)),ref:A},Yu.createElement(fE,{onResize:Fe},Yu.createElement("div",{ref:k,className:"".concat(i,"-nav-list"),style:{transform:"translate(".concat(S,"px, ").concat(B,"px)"),transition:Ee?"none":void 0}},Me,Yu.createElement(Vxe,{ref:C,prefixCls:i,locale:v,editable:p,style:{visibility:Ze?"hidden":null}}),Yu.createElement("div",{className:nk()("".concat(i,"-ink-bar"),(0,Ha.A)({},"".concat(i,"-ink-bar-animated"),s.inkBar)),style:We}))))),Yu.createElement(zxe,(0,ek.A)({},e,{ref:_,prefixCls:i,tabs:Ve,className:!Ze&&Ae})),Yu.createElement(Kxe,{position:"right",extra:h,prefixCls:i}))}const Gxe=Yu.forwardRef(Yxe);function Jxe(e){var t=e.id,n=e.activeKey,r=e.animated,o=e.tabPosition,i=e.rtl,a=e.destroyInactiveTabPane,l=Yu.useContext(Wxe),u=l.prefixCls,c=l.tabs,s=r.tabPane,d=c.findIndex((function(e){return e.key===n}));return Yu.createElement("div",{className:nk()("".concat(u,"-content-holder"))},Yu.createElement("div",{className:nk()("".concat(u,"-content"),"".concat(u,"-content-").concat(o),(0,Ha.A)({},"".concat(u,"-content-animated"),s)),style:d&&s?(0,Ha.A)({},i?"marginRight":"marginLeft","-".concat(d,"00%")):null},c.map((function(e){return Yu.cloneElement(e.node,{key:e.key,prefixCls:u,tabKey:e.key,id:t,animated:s,active:e.key===n,destroyInactiveTabPane:a})}))))}function Xxe(e){var t=e.prefixCls,n=e.forceRender,r=e.className,o=e.style,i=e.id,a=e.active,l=e.animated,u=e.destroyInactiveTabPane,c=e.tabKey,s=e.children,d=Yu.useState(n),f=(0,tn.A)(d,2),h=f[0],p=f[1];Yu.useEffect((function(){a?p(!0):u&&p(!1)}),[a,u]);var v={};return a||(l?(v.visibility="hidden",v.height=0,v.overflowY="hidden"):v.display="none"),Yu.createElement("div",{id:i&&"".concat(i,"-panel-").concat(c),role:"tabpanel",tabIndex:a?0:-1,"aria-labelledby":i&&"".concat(i,"-tab-").concat(c),"aria-hidden":!a,style:(0,ok.A)((0,ok.A)({},v),o),className:nk()("".concat(t,"-tabpane"),a&&"".concat(t,"-tabpane-active"),r)},(a||h||n)&&s)}var Qxe=0;function Zxe(e,t){var n,r,o=e.id,i=e.prefixCls,a=void 0===i?"rc-tabs":i,l=e.className,u=e.children,c=e.direction,s=e.activeKey,d=e.defaultActiveKey,f=e.editable,h=e.animated,p=void 0===h?{inkBar:!0,tabPane:!1}:h,v=e.tabPosition,m=void 0===v?"top":v,g=e.tabBarGutter,b=e.tabBarStyle,y=e.tabBarExtraContent,w=e.locale,A=e.moreIcon,k=e.moreTransitionName,_=e.destroyInactiveTabPane,C=e.renderTabBar,N=e.onChange,O=e.onTabClick,x=e.onTabScroll,E=(0,ak.A)(e,["id","prefixCls","className","children","direction","activeKey","defaultActiveKey","editable","animated","tabPosition","tabBarGutter","tabBarStyle","tabBarExtraContent","locale","moreIcon","moreTransitionName","destroyInactiveTabPane","renderTabBar","onChange","onTabClick","onTabScroll"]),D=function(e){return(0,rE.A)(e).map((function(e){if(Yu.isValidElement(e)){var t=void 0!==e.key?String(e.key):void 0;return(0,ok.A)((0,ok.A)({key:t},e.props),{},{node:e})}return null})).filter((function(e){return e}))}(u),P="rtl"===c;r=!1===p?{inkBar:!1,tabPane:!1}:!0===p?{inkBar:!0,tabPane:!0}:(0,ok.A)({inkBar:!0,tabPane:!1},"object"===(0,Gn.A)(p)?p:{});var R=(0,Yu.useState)(!1),S=(0,tn.A)(R,2),T=S[0],j=S[1];(0,Yu.useEffect)((function(){j(zC())}),[]);var I=(0,Ix.A)((function(){var e;return null===(e=D[0])||void 0===e?void 0:e.key}),{value:s,defaultValue:d}),B=(0,tn.A)(I,2),M=B[0],F=B[1],L=(0,Yu.useState)((function(){return D.findIndex((function(e){return e.key===M}))})),U=(0,tn.A)(L,2),V=U[0],H=U[1];(0,Yu.useEffect)((function(){var e,t=D.findIndex((function(e){return e.key===M}));-1===t&&(t=Math.max(0,Math.min(V,D.length-1)),F(null===(e=D[t])||void 0===e?void 0:e.key)),H(t)}),[D.map((function(e){return e.key})).join("_"),M,V]);var z=(0,Ix.A)(null,{value:o}),W=(0,tn.A)(z,2),q=W[0],$=W[1],K=m;T&&!["left","right"].includes(m)&&(K="top"),(0,Yu.useEffect)((function(){o||($("rc-tabs-".concat(Qxe)),Qxe+=1)}),[]);var Y,G={id:q,activeKey:M,animated:r,tabPosition:K,rtl:P,mobile:T},J=(0,ok.A)((0,ok.A)({},G),{},{editable:f,locale:w,moreIcon:A,moreTransitionName:k,tabBarGutter:g,onTabClick:function(e,t){null==O||O(e,t),F(e),null==N||N(e)},onTabScroll:x,extra:y,style:b,panes:u});return Y=C?C(J,Gxe):Yu.createElement(Gxe,J),Yu.createElement(Wxe.Provider,{value:{tabs:D,prefixCls:a}},Yu.createElement("div",(0,ek.A)({ref:t,id:o,className:nk()(a,"".concat(a,"-").concat(K),(n={},(0,Ha.A)(n,"".concat(a,"-mobile"),T),(0,Ha.A)(n,"".concat(a,"-editable"),f),(0,Ha.A)(n,"".concat(a,"-rtl"),P),n),l)},E),Y,Yu.createElement(Jxe,(0,ek.A)({destroyInactiveTabPane:_},G,{animated:r}))))}var eEe=Yu.forwardRef(Zxe);eEe.TabPane=Xxe;const tEe=eEe,nEe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"};var rEe=function(e,t){return Yu.createElement(Ek,(0,ok.A)((0,ok.A)({},e),{},{ref:t,icon:nEe}))};const oEe=Yu.forwardRef(rEe);function iEe(e){var t,n=e.type,r=e.className,o=e.size,i=e.onEdit,a=e.hideAdd,l=e.centered,u=e.addIcon,c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["type","className","size","onEdit","hideAdd","centered","addIcon"]),s=c.prefixCls,d=c.moreIcon,f=void 0===d?Yu.createElement(ex,null):d,h=Yu.useContext(o_),p=h.getPrefixCls,v=h.direction,m=p("tabs",s);"editable-card"===n&&(t={onEdit:function(e,t){var n=t.key,r=t.event;null==i||i("add"===e?r:n,e)},removeIcon:Yu.createElement(y_,null),addIcon:u||Yu.createElement(oEe,null),showAdd:!0!==a});var g=p();return u_(!("onPrevClick"in c)&&!("onNextClick"in c),"Tabs","`onPrevClick` and `onNextClick` has been removed. Please use `onTabScroll` instead."),Yu.createElement(m_.Consumer,null,(function(e){var i,a=void 0!==o?o:e;return Yu.createElement(tEe,(0,ek.A)({direction:v,moreTransitionName:"".concat(g,"-slide-up")},c,{className:nk()((i={},(0,Ha.A)(i,"".concat(m,"-").concat(a),a),(0,Ha.A)(i,"".concat(m,"-card"),["card","editable-card"].includes(n)),(0,Ha.A)(i,"".concat(m,"-editable-card"),"editable-card"===n),(0,Ha.A)(i,"".concat(m,"-centered"),l),i),r),editable:t,moreIcon:f,prefixCls:m}))}))}iEe.TabPane=Xxe;const aEe=iEe;function lEe(e,t){e.addEventListener("click",(function(e){var n=function(e){var t;return e.target instanceof HTMLAnchorElement?e.target:e.target instanceof Node&&(null===(t=e.target.parentElement)||void 0===t?void 0:t.closest("a"))||null}(e);if(n&&!n.onclick){var r=n.getAttribute("href"),o=Us.macos?e.metaKey:!!Us.windows&&e.ctrlKey;r&&(e.preventDefault(),e.stopImmediatePropagation(),t(n,r,"_blank"===n.target||o))}}))}function uEe(e){if(!e.search)return Gu().createElement(Gu().Fragment,null,e.children);var t=e.search,n=gn.search(e.children,t.text,t.ignoreCase);if(!n)return Gu().createElement(Gu().Fragment,null,e.children);var r=gn.splitByRanges(e.children,n),o=0;return Gu().createElement(Gu().Fragment,null,r.map((function(e,n){if(n%2==1){var r=o===t.index;return o++,Gu().createElement("span",{key:n,style:{backgroundColor:r?t.activeColor:t.normalColor}},t.text)}return e})))}function cEe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var sEe=function(){return(0,$e.A)((function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#F00",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#ff0";(0,Ke.A)(this,e),Object.defineProperty(this,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"activeColor",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"normalColor",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"drawer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_beforeRanges",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_activeIndex",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"activeNodesIds",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"rangeRects",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),this.drawer=t.createDrawer({hPadding:0}),pc(this,t.domRootNode,"scroll",Qm()((function(e){e.target&&"NE-TABLE-INNER-WRAP"===e.target.tagName&&n.refresh()})),!0),xc(this,t,"activeNodesChange",Qm()((function(e){n.activeNodesIds=e,n._beforeRanges&&n.drawRanges(n._beforeRanges)})))}),[{key:"virtualRendering",get:function(){return!!this.renderer.option.virtualRendering}},{key:"rootNode",get:function(){return this.renderer.domRootNode}},{key:"getPointRange",value:function(e,t){var n,r=this.renderer.domRootNode.getBoundingClientRect(),o=e-r.x,i=t-r.y,a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return cEe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cEe(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(this.rangeRects);try{for(a.s();!(n=a.n()).done;){var l=(0,tn.A)(n.value,2),u=l[0],c=l[1];if(o>=u.x&&o<=u.width+u.x&&i>=u.y&&i<=u.y+u.height)return{rect:new DOMRect(u.x+r.x,u.y+r.y,u.width,u.height),range:c}}}catch(e){a.e(e)}finally{a.f()}return null}},{key:"isNodeActive",value:function(e){var t;if(!e)return!1;if(e.isConnected)return!0;if(!this.virtualRendering)return!0;if(null===this.activeNodesIds)return!0;var n=null===(t=e.closest('[ne-role="render-unit"]'))||void 0===t?void 0:t.getAttribute("id");return this.activeNodesIds.has(n||"")}},{key:"getActiveRange",value:function(){return this._activeIndex&&this._beforeRanges&&this._beforeRanges[this._activeIndex]||null}},{key:"getActiveIndex",value:function(){return this._activeIndex}},{key:"getAllRanges",value:function(){return this._beforeRanges}},{key:"setActive",value:function(e){return"number"!=typeof e?(this._activeIndex=null,this):(bt(this._beforeRanges,"没有可被激活的选区","framework/uilib/src/range-highlighter/index.ts:125"),bt(e>=0&&e<this._beforeRanges.length,"激活选区索引越界","framework/uilib/src/range-highlighter/index.ts:126"),this._activeIndex=e,this)}},{key:"drawRanges",value:function(e){var t=this;this._beforeRanges=e,this.drawer.clear(),this.rangeRects.clear();var n=this.rootNode.getBoundingClientRect();return e.forEach((function(e,r){t.drawHighlight(e,n,r===t._activeIndex?t.activeColor:t.normalColor)})),this}},{key:"drawHighlight",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rootNode.getBoundingClientRect(),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.normalColor,o=this.rootNode.querySelector('[id="'.concat(e.start.node.id,'"]')),i=this.rootNode.querySelector('[id="'.concat(e.end.node.id,'"]'));if(this.isNodeActive(o)&&this.isNodeActive(i)){var a=null==o?void 0:o.firstChild,l=null==i?void 0:i.firstChild;if(a&&l)try{var u=Bp({startContainer:a,startOffset:e.start.offset,endContainer:l,endOffset:e.end.offset});3===u.length&&Math.abs(u[1].height-u[0].height)>u[0].height/2&&u.splice(1,1);var c=u.map((function(r){var o={x:r.x-n.x,y:r.y-n.y,width:r.width,height:r.height};return t.rangeRects.set(o,e),o})).filter((function(e){return e.width>0&&e.height>0}));if(c.length<=0)return;this.drawer.drawRects(c,{fill:r})}catch(e){return}}}},{key:"refresh",value:function(){return this._beforeRanges&&this.drawRanges(this._beforeRanges),this}},{key:"jumpTo",value:function(e,t){var n;if("number"==typeof e){var r=null===(n=this._beforeRanges)||void 0===n?void 0:n[e];if(r)return this._activeIndex=e,this.renderer.execCommand("headingUnfold",r.start.node.id),this.renderer.execCommand("tryUnfoldCollapse",r.start.node.id),t||this.renderer.scrollByNodeId(r.start.node.id),r}}},{key:"jumpNext",value:function(e){var t;if(this._beforeRanges)return this._activeIndex?(t=this._activeIndex+1)>=this._beforeRanges.length&&(t=0):t=0,this.jumpTo(t,e)}},{key:"jumpPrevious",value:function(e){var t;if(this._beforeRanges)return this._activeIndex?(t=this._activeIndex-1)<0&&(t=this._beforeRanges.length-1):t=this._beforeRanges.length-1,this.jumpTo(t,e)}},{key:"destroy",value:function(){this._activeIndex=null,this._beforeRanges=null,this.activeNodesIds=null,this.rangeRects.clear(),this.drawer.destroy()}}])}();function dEe(e){var t=e.item,n=e.current,r=(0,Yu.useCallback)((function(e){t.onClick&&t.onClick(e)}),[t]);return Gu().createElement("div",{className:"ne-color-selector"},HS.map((function(e){var t=e===n;return Gu().createElement("span",{key:e,onClick:function(){return r(e)},className:"color-box color-".concat(e)},t&&Gu().createElement(SC,{type:"check"}))})))}var fEe={onAfterEditorPluginInit:function(e){var t=e.renderer;t.registerBoxUI("alert",{factory:function(n,r){var o=n.getMainDOMNode(),i=r.id,a=UR.generateToolbarItems([{name:"colorSelect",type:"react",onClick:function(t){e.execCommand("alertType",i,t),UR.updateCardToolbar(o,e.overlayContainer,e.editorNode,a,{})},render:function(t,n){return Gu().createElement(dEe,{key:n,current:e.queryCommandValue("alertType",i),item:t})}}]),l=[t.onPluginEvent("alertClick",(function(t){var n=t.alertId;i===n&&UR.updateCardToolbar(o,e.overlayContainer,e.editorNode,a,{})})),t.onPluginEvent("alertFocus",(function(t){var n=t.alertId;i===n&&UR.updateCardToolbar(o,e.overlayContainer,e.editorNode,a,{})})),t.onPluginEvent("alertBlur",(function(e){var t=e.alertId;i===t&&UR.destroyCardToolbar(o)}))];return{destroy:function(){l.forEach((function(e){return e()})),l.length=0}}}})}},hEe={getAttachmentFileAccept:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Ose.all.filter((function(t){return!e||e.includes(t)}))},getImageFileAccept:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Ose.image.filter((function(t){return!e||e.includes(t)}))},getVideoFileAccept:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Ose.video.filter((function(t){return!e||e.includes(t)}))},getAudioFileAccept:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Ose.audio.filter((function(t){return!e||e.includes(t)}))},getLocalDocFileAccept:function(e,t){var n;return null===(n=(0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)({},TH,Ose.msOffice),jH,Ose.macOffice),IH,Ose.mind),BH,Ose.design),MH,Ose.pdf),FH,Ose.upload),LH,Ose.localdoc)[t])||void 0===n?void 0:n.filter((function(t){return!e||e.includes(t)}))}},pEe={acceptUtil:hEe},vEe=o(121),mEe=o.n(vEe),gEe="info",bEe="warning",yEe="danger",wEe="success",AEe="tips",kEe=function(){return[{name:"alignmentLeft",icon:"t-alignment-left",keys:["shift","cmd","L"],text:sc("左对齐"),value:"left",keywords:["左对齐","alignleft","zuoduiqi","left","zdq"]},{name:"alignmentRight",icon:"t-alignment-right",keys:["shift","cmd","R"],text:sc("右对齐"),value:"right",keywords:["右对齐","alignright","youduiqi","right","ydq"]},{name:"alignmentCenter",icon:"t-alignment-center",keys:["shift","cmd","C"],text:sc("居中对齐"),value:"center",keywords:["居中对齐","aligncenter","juzhongduiqi","center","jzdq"]},{name:"alignmentJustify",icon:"t-alignment-justify",keys:["shift","cmd","J"],text:sc("两端对齐"),value:"justify",keywords:["居中对齐","aligncenter","juzhongduiqi","center","jzdq"]},{name:"bold",keys:["cmd","B"],text:sc("粗体"),markdown:["**x**","Space"],keywords:["cuti","ct"]},{name:"italic",keys:["cmd","I"],text:sc("斜体"),markdown:["_x_","Space"],keywords:["xieti","xt"]},{name:"underline",keys:["cmd","U"],text:sc("下划线"),markdown:["++x++","Space"],keywords:["xiahuaxian","xhx"]},{name:"strikethrough",keys:["shift","cmd","X"],text:sc("删除线"),markdown:["~~x~~","Space"],keywords:["shanchuxian","scx"]},{name:"bgColor",keys:["opt","cmd","H"],text:sc("背景颜色"),markdown:["==x==","Space"],keywords:["beijinyanse","bjys"]},{name:"breakLine",keys:["ENTER"],text:sc("换行"),keywords:["huanghang","hh"]},{name:"clearFormat",keys:["cmd","\\"],text:sc("清除格式"),keywords:["qingchugeshi","qcgs"]},{name:"math",text:sc("公式"),markdown:["$x$","Space"],keywords:["sxgs","gs","gongshi","formula","math","latex"]},{name:"code",keys:["cmd","E"],text:sc("行内代码"),markdown:["`x`","Space"],keywords:["hangneidaima","hndm"]},{name:"codeblock",text:sc("代码块"),markdown:["```","Enter"],keywords:["daimakuai","dmk"]},{name:"alert",text:sc("高亮块"),keywords:[gEe,wEe,bEe,yEe,AEe,"alert","gl","glk","高亮","gaoliang","xinxitishi","xxts"],markdown:[":::","Enter"]},{name:gEe,text:sc("信息提示框"),keywords:[gEe,"alert","gl","高亮","gaoliang","xinxitishi","xxts"],markdown:[":::info","Enter"],icon:!1},{name:wEe,text:sc("成功提示框"),keywords:[wEe,"alert","gl","高亮","gaoliang","xxts"],markdown:[":::success","Enter"],icon:!1},{name:bEe,text:sc("告警提示框"),keywords:[bEe,"alert","gl","高亮","gaoliang","xxts"],markdown:[":::warning","Enter"],icon:!1},{name:yEe,text:sc("危险提示框"),keywords:[yEe,"alert","gl","高亮","gaoliang","xxts"],markdown:[":::danger","Enter"],icon:!1},{name:AEe,text:sc("高亮提示框"),keywords:[AEe,"alert","gl","高亮","gaoliang","xxts"],markdown:[":::tips","Enter"],icon:!1},{name:"undo",keys:["cmd","Z"],text:sc("撤销"),keywords:["chexiao","cx"]},{name:"redo",keys:["shift","cmd","Z"],text:sc("重做"),keywords:["chongzuo","cz"]},{name:"paste",keys:["cmd","V"],text:sc("粘贴"),keywords:["zhantie","zt"]},{name:"pasteText",keys:["shift","cmd","V"],text:sc("纯文本粘贴"),keywords:["chunwenbenzhantie","cwbzt"]},{name:"color",keys:["opt","cmd","C"],text:sc("字体颜色"),keywords:["zitiyanse","ztys"]},{name:"fontsizeIncrease",keys:["opt","cmd",187],text:sc("字号加大")},{name:"fontsizeDecrease",keys:["opt","cmd",189],text:sc("字号减小")},{name:"fontsize",keys:["opt","cmd","+ / -"],text:sc("字号调整"),keywords:["zihaotiaozheng","zhtz"]},{name:"formatPainter",keys:["shift","cmd","S"],text:sc("格式刷"),keywords:["geshishua","gss"]},{name:"fullscreen",keys:["shift","cmd","O"],text:sc("全屏")},{name:"paragraph",keys:["opt","cmd",0],text:sc("正文")},{name:"h1",keys:["opt","cmd",1],text:sc("标题1"),keywords:["标题1","heading1","h1","biaoti1","bt1"],markdown:["#","Space"]},{name:"h2",keys:["opt","cmd",2],text:sc("标题2"),keywords:["标题2","heading2","h2","biaoti2","bt2"],markdown:["##","Space"]},{name:"h3",keys:["opt","cmd",3],text:sc("标题3"),keywords:["标题3","heading3","h3","biaoti3","bt3"],markdown:["###","Space"]},{name:"h4",keys:["opt","cmd",4],text:sc("标题4"),keywords:["标题4","heading4","h4","biaoti4","bt4"],markdown:["####","Space"]},{name:"h5",keys:["opt","cmd",5],text:sc("标题5"),markdown:["#####","Space"]},{name:"h6",keys:["opt","cmd",6],text:sc("标题6"),markdown:["######","Space"]},{name:"hr",keys:["opt","cmd","S"],text:sc("插入分割线"),keywords:["分隔线","fengexian","hr","fgx","divider"],markdown:["---","Enter"]},{name:"mention",text:sc("提及某人"),markdown:["@"],keywords:["tijimouren","tjmr"]},{name:"indentForTab",keys:["TAB"],text:sc("增加缩进"),command:"indent",keywords:["zengjiasuojing","zjsj"]},{name:"outdentForTab",keys:["shift","TAB"],text:sc("减少缩进"),command:"outdent",keywords:["jianshaosuojing","jssj"]},{name:"indent",keys:["cmd","]"],text:sc("增加缩进"),command:"indent",keywords:["zengjiasuojing","zjsj"]},{name:"outdent",keys:["cmd","["],text:sc("减少缩进"),command:"outdent",keywords:["jianshaosuojing","jssj"]},{name:"newLine",keys:["shift","ENTER"],text:sc("软换行")},{name:"tab",keys:["*","TAB"],text:sc("")},{name:"lineHeight",keys:["opt","cmd","[ / ]"],text:sc("行高调整"),keywords:["hanggaotiaozheng","hgtz"]},{name:"lineHeightIncrease",keys:["opt","cmd",221],text:sc("增加行高")},{name:"lineHeightDecrease",keys:["opt","cmd",219],text:sc("减少行高")},{name:"link",keys:["cmd","K"],text:sc("链接"),description:sc("可自定义链接标题"),keywords:["lianjie","charulianjie","链接","lj","link"],markdown:["[]()","Space"]},{name:"image",text:sc("图片"),markdown:["![]()","Space"],keywords:["tupian","tp","picture"]},{name:"card",keys:["cmd","/"],text:sc("插入卡片"),markdown:["/"],keywords:["kapian","kp"]},{name:"unorderedList",keys:["shift","cmd","8"],text:sc("无序列表"),mainSearch:"/wxlb",keywords:["无序列表","wuxu","liebiao","ul","wxlb","list"],markdown:["*","Space"]},{name:"orderedList",keys:["shift","cmd","7"],text:sc("有序列表"),mainSearch:"/yxlb",keywords:["有序列表","youxu","liebiao","ol","yxlb","list"],markdown:["1.","Space"]},{name:"taskList",keys:["opt","cmd","T"],text:sc("任务列表"),mainSearch:"/rwlb",keywords:["任务列表","renwu","liebiao","checkbox","todo","rwlb","list","task"],markdown:["[]","Space"]},{name:"openLibrary",keys:["opt","cmd","R"],text:sc("素材库"),keywords:["sucaiku","sck"]},{name:"quote",keys:["shift","cmd","U"],text:sc("引用"),markdown:[">","Space"],keywords:["yingyong","yy"]},{name:"save",keys:["cmd","s"],text:sc("保存"),keywords:["baocun","bc"]},{name:"openSearchPanel",keys:["shift","cmd","F"],text:sc("查找替换"),keywords:["chazhaotihuan","czth"]},{name:"selectAll",keys:["cmd","A"],text:sc("全选")},{name:"slash",keys:["cmd","/"],text:sc("插入卡片"),keywords:["charukapian","crkp"]},{name:"sup",keys:["shift","cmd",190],text:sc("上标"),markdown:["^x^","Space"],keywords:["shangbiao","sb"]},{name:"sub",keys:["shift","cmd",188],text:sc("下标"),markdown:["~x~","Space"],keywords:["xiabiao","xb"]},{name:"toggleBorder",keys:["shift","cmd","\\"],text:sc("隐藏边框"),keywords:["yingcangbiankuang","ycbk"]},{name:"table",text:sc("插入表格"),markdown:["|x|y|","Enter"],keywords:["biaoge","bg"]},{name:"cellBgColor",keys:["opt","cmd","B"],text:sc("单元格背景色"),keywords:["danyuangebeijingse","dygbjs"]},{name:"mergeCell",keys:["shift","cmd",49],text:sc("合并单元格"),keywords:["hebingdanyuange","hbdyg"]},{name:"verticalAlignTop",keys:["opt","shift","cmd","T"],text:sc("顶部对齐"),value:"top",keywords:["dingbuduiqi","dbdq"]},{name:"verticalAlignMiddle",keys:["opt","shift","cmd","C"],text:sc("垂直居中"),value:"middle",keywords:["juzhongduiqi","jzdq"]},{name:"verticalAlignBottom",keys:["opt","shift","cmd","B"],text:sc("底部对齐"),value:"bottom",keywords:["dibuduiqi","dbdj"]},{name:"openTranslatePanel",keys:["opt","cmd","E"],text:sc("翻译"),keywords:["fanyi","fy"]}]},_Ee=kEe(),CEe=mEe()(_Ee,"name");function NEe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,OEe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function OEe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(OEe=function(){return!!e})()}ac.on(ic.CHANGE,(function(){_Ee=kEe(),CEe=mEe()(_Ee,"name")}));var xEe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=NEe(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Dy);Object.defineProperty(xEe,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze("ISlashService")});var EEe=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Ww()({},t)}),[{key:"editUI",get:function(){return this._option.editUI}},{key:"onAfterEditorPluginInit",get:function(){return this._option.onAfterEditorPluginInit}}])}();function DEe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,PEe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function PEe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(PEe=function(){return!!e})()}Object.defineProperty(EEe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"alert"});var REe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=DEe(this,t,arguments),Object.defineProperty(e,"_executeInsert",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t,n=iT.load()||{};null===(t=e.renderer)||void 0===t||t.execCommand("alert",n.type)}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){var n,r=this.option.editUI;r&&t.registerBoxUI((0,Ha.A)({},Kse.node,{factory:function(t){return e.createBoxUIByClazz(r,t)}})),e.onPluginEvent("insertCardByUI:".concat(Kse.node),this._executeInsert),null===(n=e.getService(xEe.ID))||void 0===n||n.registerCardSelect(Kse.cardSelect,Object.assign(Object.assign({},CEe[Kse.cardSelect]),{type:"TextItem",icon:"editor-main-highlight-block",label:sc("高亮块"),description:sc("用彩色背景来高亮提示"),mainSearch:"/glk",name:Kse.cardSelect}))}},{key:"afterInit",value:function(){this.option.onAfterEditorPluginInit&&this.option.onAfterEditorPluginInit(this.editor)}},{key:"destroy",value:function(){Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}}])}(Fh);function SEe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,TEe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function TEe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(TEe=function(){return!!e})()}Object.defineProperty(REe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:Kse.pluginName}),Object.defineProperty(REe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:EEe}),Object.defineProperty(REe,"UI_NAME",{enumerable:!0,configurable:!0,writable:!0,value:Kse.node}),Object.defineProperty(REe,"Colors",{enumerable:!0,configurable:!0,writable:!0,value:cT});var jEe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=SEe(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Dy);function IEe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,BEe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function BEe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(BEe=function(){return!!e})()}Object.defineProperty(jEe,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze(Hse.service.IToolbarEditorService)});var MEe=function(e){function t(e,n,r){var o;return(0,Ke.A)(this,t),o=IEe(this,t),Object.defineProperty(o,"editor",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(o,"_name",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(o,"_disabled",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(o,"_ready",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(o,"pluginContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"toolbarNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),o.pluginContext=r||{},o}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"disabled",get:function(){return this._disabled}},{key:"init",value:function(){}},{key:"disable",value:function(){this._disabled=!0,this.refresh()}},{key:"enable",value:function(){this._disabled=!1,this.refresh()}},{key:"name",get:function(){return this._name}},{key:"uiLayer",get:function(){return this.editor.uiLayer}},{key:"isReady",value:function(){return this._ready}},{key:"refresh",value:function(){this._ready=!0,this.emit("statechange")}},{key:"destroy",value:function(){this.removeAllListeners()}},{key:"close",value:function(){}}],[{key:"getTooltip",value:function(e,t,n){var r=e.renderer;if(n&&r.hasExtendMethod("getHotKeyByName")){var o=r.getHotKeyByName(n);if(o)return[t,o.text]}return[t]}}])}(it);function FEe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,LEe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function LEe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(LEe=function(){return!!e})()}Object.defineProperty(MEe,"Type",{enumerable:!0,configurable:!0,writable:!0,value:"none"});var UEe=function(e){function t(){return(0,Ke.A)(this,t),FEe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"onEvent",value:function(e,t){bt("file"===e,"plugins/image/src/editor/image-toolbar-descriptor.ts:13"),this.editor.emitPluginEvent("insertCardByUI",{item:{type:"FileItem",name:"image"},args:[[t]]})}},{key:"getInitUIState",value:function(){return{disabled:this.disabled,accept:this.pluginContext.getAccept(),className:"ne-ui-toolbar-image",tooltip:MEe.getTooltip(this.editor,sc("图片")),icon:"card-image"}}},{key:"getUIState",value:function(){var e=this.editor;return{disabled:this.disabled||!e.queryCommandEnabled("image")}}}])}(MEe);function VEe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,HEe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function HEe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(HEe=function(){return!!e})()}Object.defineProperty(UEe,"Type",{enumerable:!0,configurable:!0,writable:!0,value:"FileButton"});var zEe=function(e){function t(){return(0,Ke.A)(this,t),VEe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"onEvent",value:function(e){var t,n,r;return function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,Cc().mark((function o(){var i,a;return Cc().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if("click"!==e){o.next=7;break}return o.next=3,null===(r=null===(t=this.pluginContext)||void 0===t?void 0:(n=t.option).customFileSelector)||void 0===r?void 0:r.call(n);case 3:i=o.sent,(a=new File([],"image.png")).path=i,this.editor.emitPluginEvent("insertCardByUI",{item:{type:"FileItem",name:"image"},args:[[a]]});case 7:case"end":return o.stop()}}),o,this)})))}}])}(UEe);function WEe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,qEe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function qEe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qEe=function(){return!!e})()}Object.defineProperty(zEe,"Type",{enumerable:!0,configurable:!0,writable:!0,value:"Button"});var $Ee=function(e){function t(){return(0,Ke.A)(this,t),WEe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getInitUIState",value:function(){return{disabled:this.disabled,icon:"note-image-black",accept:this.pluginContext.getAccept(),className:"ne-ui-toolbar-image",tooltip:MEe.getTooltip(this.editor,sc("图片"))}}}])}(UEe);function KEe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,YEe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function YEe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(YEe=function(){return!!e})()}var GEe=function(e){function t(){return(0,Ke.A)(this,t),KEe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"onEvent",value:function(e){var t,n,r;return function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,Cc().mark((function o(){var i,a;return Cc().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if("click"!==e){o.next=7;break}return o.next=3,null===(r=null===(t=this.pluginContext)||void 0===t?void 0:(n=t.option).customFileSelector)||void 0===r?void 0:r.call(n);case 3:i=o.sent,(a=new File([],"image.png")).path=i,this.editor.emitPluginEvent("insertCardByUI",{item:{type:"FileItem",name:"image"},args:[[a]]});case 7:case"end":return o.stop()}}),o,this)})))}}])}($Ee);function JEe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,XEe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function XEe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(XEe=function(){return!!e})()}Object.defineProperty(GEe,"Type",{enumerable:!0,configurable:!0,writable:!0,value:"Button"});var QEe=function(e){function t(){return(0,Ke.A)(this,t),JEe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getInitUIState",value:function(){return{disabled:this.disabled,icon:"note-image",accept:this.pluginContext.getAccept(),className:"ne-ui-toolbar-image",tooltip:MEe.getTooltip(this.editor,sc("图片"))}}}])}(UEe);function ZEe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,eDe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function eDe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(eDe=function(){return!!e})()}var tDe=function(e){function t(){return(0,Ke.A)(this,t),ZEe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"onEvent",value:function(e){var t,n,r;return function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,Cc().mark((function o(){var i,a;return Cc().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if("click"!==e){o.next=7;break}return o.next=3,null===(r=null===(t=this.pluginContext)||void 0===t?void 0:(n=t.option).customFileSelector)||void 0===r?void 0:r.call(n);case 3:i=o.sent,(a=new File([],"image.png")).path=i,this.editor.emitPluginEvent("insertCardByUI",{item:{type:"FileItem",name:"image"},args:[[a]]});case 7:case"end":return o.stop()}}),o,this)})))}}])}(QEe);function nDe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,rDe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function rDe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rDe=function(){return!!e})()}Object.defineProperty(tDe,"Type",{enumerable:!0,configurable:!0,writable:!0,value:"Button"});var oDe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=nDe(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Dy);function iDe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,aDe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function aDe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(aDe=function(){return!!e})()}Object.defineProperty(oDe,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze(lse.service.IUploadEditorService)});var lDe="file",uDe="url",cDe="base64",sDe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=iDe(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Dy);function dDe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,fDe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function fDe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(fDe=function(){return!!e})()}Object.defineProperty(sDe,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze("IImageEditorService")});var hDe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=dDe(this,t,arguments),Object.defineProperty(e,"_uploadDataMap",{enumerable:!0,configurable:!0,writable:!0,value:new WeakMap}),Object.defineProperty(e,"putImageUploadData",{enumerable:!0,configurable:!0,writable:!0,value:function(t,n){e._uploadDataMap.set(t,n)}}),Object.defineProperty(e,"getImageUploadData",{enumerable:!0,configurable:!0,writable:!0,value:function(t){return e._uploadDataMap.get(t)||null}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){delete this._uploadDataMapl}}])}(sDe),pDe=function(){return(0,$e.A)((function e(t,n){(0,Ke.A)(this,e),Object.defineProperty(this,"_rotation",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_crop",{enumerable:!0,configurable:!0,writable:!0,value:[0,0,1,1]}),Object.defineProperty(this,"_originWidth",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_originHeight",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_scale",{enumerable:!0,configurable:!0,writable:!0,value:1}),this._originWidth=t,this._originHeight=n}),[{key:"originWidth",get:function(){return this._originWidth}},{key:"originHeight",get:function(){return this._originHeight}},{key:"rotation",get:function(){return this._rotation}},{key:"scale",get:function(){return this._scale}},{key:"crop",get:function(){return this._crop}},{key:"normalizeCrop",get:function(){return this._crop.map((function(e){return+e.toFixed(4)}))}},{key:"viewCrop",get:function(){return vDe(this._rotation,this._crop)}},{key:"viewWidth",get:function(){return Math.round(this.opWidth*this.scale)}},{key:"viewHeight",get:function(){return Math.round(this.opHeight*this.scale)}},{key:"scaleWidth",get:function(){return this.scale*this.originWidth}},{key:"scaleHeight",get:function(){return this.scale*this.originHeight}},{key:"scaleRotationWidth",get:function(){return this.scale*this.rotationOriginWidth}},{key:"scaleRotationHeight",get:function(){return this.scale*this.rotationOriginHeight}},{key:"rotationOriginHeight",get:function(){return this._rotation%180==0?this._originHeight:this._originWidth}},{key:"rotationOriginWidth",get:function(){return this._rotation%180==0?this._originWidth:this._originHeight}},{key:"cropLeft",get:function(){return this.originWidth*this.crop[0]}},{key:"cropTop",get:function(){return this.originHeight*this.crop[1]}},{key:"cropHeight",get:function(){return this._originHeight*(this.crop[3]-this.crop[1])}},{key:"cropWidth",get:function(){return this._originWidth*(this.crop[2]-this.crop[0])}},{key:"opHeight",get:function(){return this._rotation%180==0?this.cropHeight:this.cropWidth}},{key:"opWidth",get:function(){return this._rotation%180==0?this.cropWidth:this.cropHeight}},{key:"setRotation",value:function(e){return this._rotation=e%360,this}},{key:"setCrop",value:function(e){return this._crop=e,this}},{key:"setScale",value:function(e){return this._scale=e,this}},{key:"setViewWidth",value:function(e){return this._scale=e/this.opWidth,this}},{key:"setViewCrop",value:function(e){return this._crop=function(e,t){return vDe(360-e,t)}(this.rotation,e),this}},{key:"toTranslate",value:function(){var e=this.crop,t=this.rotation,n=this.originHeight,r=this.originWidth/n,o=(e[2]+e[0])/2,i=(e[3]+e[1])/2;return t%180==0?[-e[0],-e[1],1/(e[2]-e[0]),1/(e[3]-e[1])]:[(e[3]-e[1])/r/2-o,r*(e[2]-e[0])/2-i,r/(e[3]-e[1]),1/r/(e[2]-e[0])]}},{key:"toTranslateStyle",value:function(){var e=this.crop,t=this.rotation,n=this.toTranslate(),r=(0,tn.A)(n,4),o=r[0],i=r[1],a=r[2],l=r[3];return{maxWidth:"".concat(100*a,"%"),width:"".concat(100*a,"%"),height:"".concat(100*l,"%"),transformOrigin:"".concat(50*(e[2]+e[0]),"% ").concat(50*(e[3]+e[1]),"%"),transform:"translate(".concat(100*o,"%, ").concat(100*i,"%) rotate(").concat(360-t,"deg)")}}}],[{key:"equalCrop",value:function(e,t){return e.every((function(e,n){return Math.abs(e-t[n])<1e-6}))}},{key:"toDivInlineStyle",value:function(e){var t=e.getCrop(),n=e.getRotation(),r=e.getDisplayWidth(),o=e.getDisplayHeight(),i=e.getPreviewSrc(),a=n%180==0?"100%":"".concat(o/r*100,"%"),l=n%180==0?"100%":"".concat(r/o*100,"%"),u=1/(t[2]-t[0])*100,c=1/(t[3]-t[1])*100,s=t[0]/(t[0]+1-t[2])*100||0,d=t[1]/(t[1]+1-t[3])*100||0,f=o/r,h=n%180==0?[0,0]:[(1-f)/2/f,(1-1/f)/2/(1/f)],p=(0,tn.A)(h,2),v=p[0],m=p[1];return"width: ".concat(a,";height: ").concat(l,";transform-origin: center;transform: translate(").concat(100*v,"%, ").concat(100*m,"%) rotate(").concat(360-n,"deg);background-image:url(").concat(i,");background-size:").concat(u,"% ").concat(c,"%;background-position:").concat(s,"% ").concat(d,"%;cursor: -webkit-grab;cursor:-moz-grab;cursor: grab;")}}])}();function vDe(e,t){return 90===e?[t[1],1-t[2],t[3],1-t[0]]:180===e?[1-t[2],1-t[3],1-t[0],1-t[1]]:270===e?[1-t[3],t[0],1-t[1],t[2]]:t.slice(0)}var mDe=100;function gDe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,bDe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function bDe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bDe=function(){return!!e})()}var yDe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=gDe(this,t,arguments),Object.defineProperty(e,"state",{enumerable:!0,configurable:!0,writable:!0,value:{loadError:!1}}),Object.defineProperty(e,"_imageRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"shouldComponentUpdate",value:function(e,t){return t.loadError!==this.state.loadError}},{key:"render",value:function(){if(this.props.url&&!this.state.loadError)return this.renderByURL();var e=this.props,t=e.width,n=e.height;return t=isNaN(t)?mDe:t,n=isNaN(n)?60:n,Gu().createElement(Gu().Fragment,null,Gu().createElement("div",{ref:this._imageRef,className:"ne-mock-image",style:{width:t+"px"}},Gu().createElement("div",{className:"ne-mock-image-inner",style:{paddingBottom:Math.round(n/t*1e8)/1e6+"%"}})))}},{key:"renderByURL",value:function(){var e=this,t=this.props,n=t.width,r=t.url,o=t.className;return Gu().createElement("img",{ref:this._imageRef,width:n,className:Uf("ne-local-image",o),src:yh.sanitizeUrl(r),onError:function(){e.setState({loadError:!0})}})}}])}(Yu.Component);function wDe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,ADe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function ADe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ADe=function(){return!!e})()}Object.defineProperty(yDe,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{width:mDe,height:60,type:"tip"}});var kDe=function(e){function t(){return(0,Ke.A)(this,t),wDe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){this.props.onLoaded()}},{key:"render",value:function(){var e=this.props,t=e.width,n=e.height;return t=isNaN(t)?mDe:t,n=isNaN(n)?60:n,Gu().createElement("div",{className:"ne-image-error"},Gu().createElement(yDe,{width:t,height:n,type:"error"}),this.renderErrorImg(),this.renderTip())}},{key:"renderErrorImg",value:function(){return Gu().createElement("img",{src:dh.toDataURL('<?xml version="1.0" encoding="UTF-8"?>\n<svg width="18px" height="16px" viewBox="0 0 18 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g id="页面-2" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="其他卡片" transform="translate(-831.000000, -7078.000000)">\n            <g id="编组-10" transform="translate(729.000000, 7032.000000)">\n                <g id="编组-15" transform="translate(102.000000, 46.000000)">\n                    <g id="image备份">\n                        <rect id="矩形" fill="#000000" fill-rule="nonzero" opacity="0" x="0" y="0" width="16" height="16"></rect>\n                        <path d="M2.125,12.375 L2.125,10.4960156 L4.194125,8.042375 C4.24407812,7.98315625 4.33529688,7.98315625 4.38525,8.042375 L6.63471875,10.7098437 L10.1869531,6.49754687 C10.2369063,6.43832812 10.328125,6.43832812 10.3780781,6.49754687 L13.875,10.64425 L13.875,12.375 L13.875,3.625 L2.125,3.625 L2.125,12.375 Z M1.5,2.5 L14.5,2.5 C14.7761406,2.5 15,2.72385937 15,3 L15,13 C15,13.2761406 14.7761406,13.5 14.5,13.5 L1.5,13.5 C1.22385937,13.5 1,13.2761406 1,13 L1,3 C1,2.72385937 1.22385937,2.5 1.5,2.5 Z M4.75,7 C4.05964063,7 3.5,6.44035937 3.5,5.75 C3.5,5.05964063 4.05964063,4.5 4.75,4.5 C5.44035937,4.5 6,5.05964063 6,5.75 C6,6.44035937 5.44035937,7 4.75,7 Z" id="形状" fill="#8C8C8C"></path>\n                    </g>\n                    <g id="alert-fill" transform="translate(9.000000, 7.000000)">\n                        <path d="M4.870227,0.216197695 L8.94272401,7.35134981 C9.01909103,7.48514349 9.01909206,7.64998385 8.94272672,7.78377851 C8.86636138,7.91757317 8.72523106,8 8.57249701,8 L0.427502991,8 C0.274768942,8 0.133638625,7.91757317 0.0572732809,7.78377851 C-0.0190920629,7.64998385 -0.0190910287,7.48514349 0.0572759941,7.35134981 L4.129773,0.216197695 C4.20614384,0.0824130438 4.34727177,0 4.5,0 C4.65272823,0 4.79385616,0.0824130438 4.870227,0.216197695 Z" id="形状" fill="#F7D844"></path>\n                        <polygon id="路径" fill="#FFFFFF" points="4.07248614 5.8378327 4.07248614 6.70269962 4.92751386 6.70269962 4.92751386 5.8378327"></polygon>\n                        <polygon id="路径" fill="#FFFFFF" points="4.07248614 2.81079846 4.07248614 4.97296577 4.92751386 4.97296577 4.92751386 2.81079846 4.07248614 2.81079846"></polygon>\n                    </g>\n                </g>\n            </g>\n        </g>\n    </g>\n</svg>\n'),width:"16",className:"ne-image-loading-icon"})}},{key:"renderTip",value:function(){var e=this.props,t=e.tip,n=e.width,r=e.height;return t?n<mDe||r<60?null:Gu().createElement("div",{className:"ne-image-tip"},t):null}}])}(Yu.Component);Object.defineProperty(kDe,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{width:mDe,height:60,onLoaded:function(){}}});var _De=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"allowShowUploadingIcon",value:function(e,t){return e>=30&&t>=30}},{key:"allowShowUploadingTip",value:function(e,t){return e>=100&&t>=50}}])}();function CDe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,NDe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function NDe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(NDe=function(){return!!e})()}var ODe=function(e){function t(e){var n;(0,Ke.A)(this,t),n=CDe(this,t,[e]),Object.defineProperty(n,"state",{enumerable:!0,configurable:!0,writable:!0,value:{isUploadFailed:!1,loadError:!1}}),Object.defineProperty(n,"_imgNodeRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(n,"task",{enumerable:!0,configurable:!0,writable:!0,value:null});var r=e.uploadObserver,o=e.taskId,i=e.clientId;return r&&o&&i&&(n.task=r.observe(o,i)),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){var e=this;this.task?(sd(this,this.task,"timeout",(function(){e.props.onUploadFailure("failed to upload")})),sd(this,this.task,"success",(function(t){e.props.onUploadSuccess(t)})),sd(this,this.task,"error",(function(t){e.props.onUploadFailure(t)}))):this.props.onUploadFailure("invalid upload task")}},{key:"componentWillUnmount",value:function(){this.task&&this.task.abort()}},{key:"render",value:function(){var e=this,t=this.props,n=t.width,r=t.height,o=t.autoScale,i=this.state.loadError;if(this.state.isUploadFailed||!this.task||this.task.isError()||this.task.isAborted())return Gu().createElement(kDe,{width:n,height:r,tip:sc("图片上传失败")});var a,l=this.task.getResourceURL(),u={};if(n?u.width=n+"px":o&&(u.zoom=Math.ceil(1/id()*1e4)/100+"%"),l&&!i){var c=yh.sanitizeUrl(l);a=Gu().createElement("img",{ref:this._imgNodeRef,style:u,src:c,className:"ne-image",onLoad:function(t){e.setState({loadError:!1}),n||"blob:"!==yh.getProtocol(c)||e.props.onImageSizeResolved({width:t.target.naturalWidth||t.target.width,height:t.target.naturalHeight||t.target.height})},onError:function(){e.setState({loadError:!0})}})}else a=Gu().createElement(yDe,{width:n,height:r,className:"ne-image"});var s=n||i?Gu().createElement("div",{className:"ne-image-uploading-progress"},Gu().createElement(SC,{type:"icon-loading-desk"}),_De.allowShowUploadingTip(n,r)?sc("上传中"):null):null;return Gu().createElement("div",{className:"ne-uploading-image"},a,s)}}])}(Yu.Component);function xDe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,EDe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function EDe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(EDe=function(){return!!e})()}Object.defineProperty(ODe,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{onUploadSuccess:function(){},onUploadFailure:function(){},onImageSizeResolved:function(){},autoScale:!1}});var DDe=10.5,PDe=[0,0,1,1],RDe={nw:[0,-1.5,-1.5,DDe,DDe],ne:[90,-19.5,-1.5,DDe,DDe],se:[180,-19.5,-19.5,DDe,DDe],sw:[270,-1.5,-19.5,DDe,DDe],n:[0,-17,-1.5,17,1.5],s:[0,-17,-1.5,17,1.5],w:[90,-17,-34,1.5,17],e:[90,-17,-34,1.5,17]},SDe={nw:[0,1],ne:[2,1],se:[2,3],sw:[0,3],n:[-1,1],s:[-1,3],w:[0,-1],e:[2,-1]},TDe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=xDe(this,t,arguments),Object.defineProperty(e,"state",{enumerable:!0,configurable:!0,writable:!0,value:{crop:e.props.defaultCrop}}),Object.defineProperty(e,"_handleEmitChange",{enumerable:!0,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(e,"_handleMoveMouseDown",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=(e.props.crop||e.state.crop).slice(0);IDe(t,(function(t,r){e._moveByXY(n,t,r)}),e._handleEmitChange)}}),Object.defineProperty(e,"_handleCornerMouseDown",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=e.props,r=n.width,o=n.height,i=(n.crop||e.state.crop).slice(0),a=t.target,l=a.getAttribute("face"),u=(0,tn.A)(RDe[l],3),c=u[1],s=u[2],d=(0,tn.A)(SDe[l],2),f=d[0],h=d[1],p=+a.getAttribute("x"),v=+a.getAttribute("y");IDe(t,(function(t,n){var a=i.slice(0),l=(a[2]-a[0])/(a[3]-a[1]);-1!==f&&(i[f]=BDe((p+t-c)/r),(i[2]-i[0])*r<28&&(0===f?i[0]=BDe(i[2]-28/r):i[2]=BDe(i[0]+28/r))),-1!==h&&(i[h]=BDe((v+n-s)/o),(i[3]-i[1])*o<28&&(1===h?i[1]=BDe(i[3]-28/o):i[3]=BDe(i[1]+28/o))),!e.props.shouldKeepRadio()||(i[2]-i[0])/(i[3]-i[1])===l||(function(e,t,n,r){if(-1===t){var o=(e[0]+e[2])/2,i=(e[3]-e[1])/2;e[0]=o-i*r,e[2]=o+i*r;var a=Math.max(0-e[0],e[2]-1,0);return a>0&&(e[0]+=a,e[2]-=a,1===n?e[1]+=a/r*2:e[3]-=a/r*2),e}if(-1===n){var l=(e[1]+e[3])/2,u=(e[2]-e[0])/2;e[1]=l-u/r,e[3]=l+u/r;var c=Math.max(0-e[1],e[3]-1,0);return c>0&&(e[1]+=c,e[3]-=c,0===t?e[0]+=c*r*2:e[2]-=c*r*2),e}var s=e[3]-e[1],d=e[2]-e[0];d>s*r?2===t?e[2]=e[0]+s*r:e[0]=e[2]-s*r:3===n?e[3]=e[1]+d/r:e[1]=e[3]-d/r}(i,f,h,l),function(e,t,n){return!(e[0]<0||e[1]<0||e[2]>1||e[3]>1||(e[3]-e[1])*n<28||(e[2]-e[0])*t<28)}(i,r,o))?e.props.onChange(i):a.forEach((function(e,t){i[t]=e}))}),e._handleEmitChange)}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.width,r=t.height,o=t.crop,i=t.className,a=t.style,l=o||this.state.crop,u=function(e){return[[e[0],e[1],"nw"],[e[0]/2+e[2]/2,e[1],"n"],[e[2],e[1],"ne"],[e[0],e[1]/2+e[3]/2,"w"],[e[2],e[1]/2+e[3]/2,"e"],[e[0],e[3],"sw"],[e[0]/2+e[2]/2,e[3],"s"],[e[2],e[3],"se"]]}(l),c=n*(l[2]-l[0])>76,s=r*(l[3]-l[1])>76;return Gu().createElement(Gu().Fragment,null,Gu().createElement("div",{className:nk()("lake-crop-box",i),style:a},Gu().createElement("svg",{width:n+8,height:r+8},Gu().createElement("defs",null,Gu().createElement("g",{id:"corner"},Gu().createElement("path",{d:"M18.5,-0.5 C19.0522847,-0.5 19.5522847,-0.276142375 19.9142136,0.0857864376 C20.2761424,0.44771525 20.5,0.94771525 20.5,1.5 C20.5,2.05228475 20.2761424,2.55228475 19.9142136,2.91421356 C19.5522847,3.27614237 19.0522847,3.5 18.5,3.5 L18.5,3.5 L3.5,3.5 L3.5,18.5 C3.5,19.0522847 3.27614237,19.5522847 2.91421356,19.9142136 C2.55228475,20.2761424 2.05228475,20.5 1.5,20.5 C0.94771525,20.5 0.44771525,20.2761424 0.0857864376,19.9142136 C-0.276142375,19.5522847 -0.5,19.0522847 -0.5,18.5 L-0.5,18.5 L-0.5,3 C-0.5,2.07071993 -0.137819527,1.2260429 0.453035214,0.599369341 C1.05065491,-0.0344792808 1.88229773,-0.445093206 2.80972104,-0.494902783 L2.80972104,-0.494902783 Z"})),Gu().createElement("g",{id:"handle"},Gu().createElement("rect",{width:"34",height:"3",rx:"1.5"}))),Gu().createElement("g",{transform:"translate(".concat(4,", ").concat(4,")")},Gu().createElement("path",{className:"ne-crop-mask",fillRule:"nonzero",d:"M0,0 h".concat(n," v").concat(r," h").concat(-n," z\n            M").concat(n*l[0],",").concat(r*l[1]," v").concat(r*(l[3]-l[1]),"\n            h").concat(n*(l[2]-l[0])," v").concat(r*(l[1]-l[3])," z")}),Gu().createElement("path",{className:"ne-crop-tools ne-crop-move ".concat(jDe(l)?"":"movable"),d:"M".concat(n*l[0],",").concat(r*l[1]," v").concat(r*(l[3]-l[1]),"\n            h").concat(n*(l[2]-l[0])," v").concat(r*(l[1]-l[3])," z"),onMouseDown:this._handleMoveMouseDown,onTouchStart:this._handleMoveMouseDown}),u.map((function(t){var o=(0,tn.A)(t,3),i=o[0],a=o[1],l=o[2];if(!c&&["n","s"].includes(l))return null;if(!s&&["e","w"].includes(l))return null;var u=l.length<2?"#handle":"#corner",d=(0,tn.A)(RDe[l],5),f=d[0],h=d[1],p=d[2],v=d[3],m=d[4],g=n*i+h,b=r*a+p,y=Gu().createElement("use",{key:l,face:l,x:g,y:b,transform:"rotate(".concat(f," ").concat(g+v," ").concat(b+m,")"),xlinkHref:u,className:"ne-crop-tools ne-crop-".concat(l),onMouseDown:e._handleCornerMouseDown,onTouchStart:e._handleCornerMouseDown});return"#corner"===u?Gu().createElement(Gu().Fragment,null,Gu().createElement("rect",{key:"rect-"+l,className:"ne-crop-mobile-tools ne-crop-".concat(l),face:l,x:g,y:b,width:21,height:21,onMouseDown:e._handleCornerMouseDown,onTouchStart:e._handleCornerMouseDown}),y):y}))))))}},{key:"_handleCropChange",value:function(e){this.props.crop||this.setState({crop:e}),this.props.onChange(e)}},{key:"_moveByXY",value:function(e,t,n){var r=this.props,o=r.width,i=r.height,a=(r.crop||this.state.crop).slice(0),l=t/o,u=n/i;e[0]+l<0?l=-e[0]:e[2]+l>1&&(l=1-e[2]),e[1]+u<0?u=-e[1]:e[3]+u>1&&(u=1-e[3]),a[0]=e[0]+l,a[1]=e[1]+u,a[2]=e[2]+l,a[3]=e[3]+u,this.props.onChange(a)}}])}(Yu.Component);function jDe(e){return e.every((function(e,t){return e-PDe[t]<1e-7}))}function IDe(e,t,n){e.preventDefault(),e.stopPropagation();var r=-1,o=e.clientX,i=e.clientY;e.changedTouches&&e.changedTouches[0]&&(o=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY,r=e.changedTouches[0].identifier);var a={destroy:function(){}},l=function(e){if(e.preventDefault(),e.stopPropagation(),-1===r)t(e.clientX-o,e.clientY-i);else for(var n=0;n<e.changedTouches.length;n++){var a=e.changedTouches[n];if(a.identifier===r){t(a.clientX-o,a.clientY-i);break}}},u=function(e){if(e.preventDefault(),e.stopPropagation(),-1!==r)for(var l=0;l<e.changedTouches.length;l++){var u=e.changedTouches[l];if(u.identifier===r){t(u.clientX-o,u.clientY-i);break}}else t(e.clientX-o,e.clientY-i);null==n||n(),a.destroy()};pc(a,document,"mousemove",l,!1),pc(a,document,"touchmove",l,{passive:!1}),pc(a,document,"mouseup",u,!1),pc(a,document,"touchend",u,{passive:!1})}function BDe(e){return Math.min(Math.max(0,e),1)}function MDe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,FDe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function FDe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(FDe=function(){return!!e})()}Object.defineProperty(TDe,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{defaultCrop:PDe,onChange:function(){},shouldKeepRadio:function(){return!1}}});var LDe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=MDe(this,t,arguments),Object.defineProperty(e,"domContext",{enumerable:!0,configurable:!0,writable:!0,value:{destroy:function(){}}}),Object.defineProperty(e,"_shiftKeyDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"state",{enumerable:!0,configurable:!0,writable:!0,value:{width:1,height:1}}),Object.defineProperty(e,"_shouldKeepRadio",{enumerable:!0,configurable:!0,writable:!0,value:function(){return e._shiftKeyDown}}),Object.defineProperty(e,"_handleCropChange",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=e.props.currentImageOP;n.setViewCrop(t),e.props.onChange(n.crop),e.forceUpdate()}}),Object.defineProperty(e,"_handleShiftKeyDown",{enumerable:!0,configurable:!0,writable:!0,value:function(t){Ks.isShift(t)&&(e._shiftKeyDown=!0)}}),Object.defineProperty(e,"_handleShiftKeyUp",{enumerable:!0,configurable:!0,writable:!0,value:function(t){Ks.isShift(t)&&(e._shiftKeyDown=!1)}}),Object.defineProperty(e,"_handleKeyDown",{enumerable:!0,configurable:!0,writable:!0,value:function(t){e._handleShiftKeyDown(t),Ks.isEnter(t)&&e.props.onOk()}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){pc(this.domContext,document,"keydown",this._handleKeyDown,!0),pc(this.domContext,document,"keyup",this._handleShiftKeyUp,!0)}},{key:"componentWillUnmount",value:function(){this.domContext.destroy(),this.domContext=null}},{key:"render",value:function(){var e=this.state,t=e.width,n=e.height,r=this.props.currentImageOP.viewCrop;return Gu().createElement(TDe,{className:"ne-ui-image-crop-box",width:t,height:n,crop:r,shouldKeepRadio:this._shouldKeepRadio,onChange:this._handleCropChange})}}],[{key:"getDerivedStateFromProps",value:function(e){var t=e.currentImageOP,n=t.scaleRotationWidth,r=t.scaleRotationHeight,o=e.getImageNode(),i=r/n;if(o){o.width!==Math.round(n)&&(o.style.width=Math.round(n)+"px");var a=o.getBoundingClientRect().width;n>a&&(r=(n=a)*i)}return{width:n,height:r}}}])}(Yu.Component);function UDe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,VDe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function VDe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(VDe=function(){return!!e})()}Object.defineProperty(LDe,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{onChange:function(){},onOk:function(){},getImageNode:function(){}}});var HDe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=UDe(this,t,arguments),Object.defineProperty(e,"state",{enumerable:!0,configurable:!0,writable:!0,value:{loaded:!1,rotation:0,width:0,viewWidth:0,crop:[0,0,1,1],croping:!1}}),Object.defineProperty(e,"_imageOp",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_imageNodeRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"_croppedImageEleRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"_retryTimes",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(e,"_canvas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_img",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_handleOriginImageLoad",{enumerable:!0,configurable:!0,writable:!0,value:function(t){e.props.onLoad(t)}}),Object.defineProperty(e,"_handleOriginImageError",{enumerable:!0,configurable:!0,writable:!0,value:function(t){e.props.onError(t)}}),Object.defineProperty(e,"_handleSourceLoad",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.setState({editable:!0}),e.props.onEditableChange(!0)}}),Object.defineProperty(e,"_handleSourceError",{enumerable:!0,configurable:!0,writable:!0,value:function(){if(e._retryTimes>=2)return e.setState({editable:!1}),void e.props.onEditableChange(!1);e._retryTimes++;try{var t=new URL(e.props.src,window.location.href);t.searchParams.set("date",String(Date.now())),e._img.src=t.toString()}catch(t){e._img.src=e.props.src}}}),Object.defineProperty(e,"getEditorImageDataUrl",{enumerable:!0,configurable:!0,writable:!0,value:function(){if(!e.state.editable)throw new Error("cant editable");var t=e.props.cardData;e._imageOp||(e._imageOp=new pDe(t.getOriginalWidth(),t.getOriginalHeight()));var n=e._canvas.getContext("2d");e._canvas.width=e._imageOp.opWidth,e._canvas.height=e._imageOp.opHeight;var r=e._imageOp,o=r.cropWidth,i=r.cropHeight,a=r.rotation;return n.save(),n.translate(e._canvas.width/2,e._canvas.height/2),n.rotate((360-a)*Math.PI/180),n.drawImage(e._img,e._imageOp.cropLeft,e._imageOp.cropTop,o,i,-o/2,-i/2,o,i),n.restore(),e._canvas.toDataURL()}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"naturalWidth",get:function(){var e=this._imageNodeRef.current||this._img;return e.naturalWidth||e.width}},{key:"naturalHeight",get:function(){var e=this._imageNodeRef.current||this._img;return e.naturalHeight||e.height}},{key:"imageNode",get:function(){return this._imageNodeRef.current||null}},{key:"imgEle",get:function(){return this._croppedImageEleRef.current||this._imageNodeRef.current||null}},{key:"componentDidMount",value:function(){var e=this.props,t=e.src;if(!e.readMode&&t){this._canvas=document.createElement("canvas"),this._img=new Image,this._img.crossOrigin="Anonymous",this._img.addEventListener("load",this._handleSourceLoad),this._img.addEventListener("error",this._handleSourceError);try{var n=new URL(t,window.location.href);n.searchParams.set("crossOrigin","true"),this._img.src=n.toString()}catch(e){this._img.src=t}}}},{key:"componentWillUnmount",value:function(){this._img&&(this._img.removeEventListener("load",this._handleSourceLoad),this._img.removeEventListener("error",this._handleSourceError)),this._canvas=null,this._img=null}},{key:"render",value:function(){var e=this.props,t=e.cardData,n=e.crop,r=e.croping,o=e.rotation,i=e.src,a=(e.onError,e.width),l=(e.onLoad,e.onEditableChange,e.onWidthChange,e.readMode,function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["cardData","crop","croping","rotation","src","onError","width","onLoad","onEditableChange","onWidthChange","readMode"])),u=!Us.app;return t.isAfterEdit()||this._imageOp||r?(this._imageOp||(this._imageOp=new pDe(t.getOriginalWidth(),t.getOriginalHeight())),this._imageOp.setRotation(o).setCrop(n).setViewWidth(a),r&&this._imageOp.setCrop([0,0,1,1]),Gu().createElement("div",{ref:this._imageNodeRef,width:this._imageOp.viewWidth,style:{maxWidth:"100%",width:this._imageOp.viewWidth,paddingBottom:"".concat(this._imageOp.viewHeight/this._imageOp.viewWidth*100,"%"),overflow:"hidden"}},Gu().createElement("img",Object.assign({style:Object.assign({position:"absolute",top:0,left:0},this._imageOp.toTranslateStyle()),width:isNaN(Number(this._imageOp.scaleWidth))?void 0:this._imageOp.scaleWidth,onLoad:this._handleOriginImageLoad,onError:this._handleOriginImageError},l,{src:i,draggable:u,ref:this._croppedImageEleRef})))):Gu().createElement("img",Object.assign({width:isNaN(Number(a))?void 0:a,onLoad:this._handleOriginImageLoad,onError:this._handleOriginImageError},l,{ref:this._imageNodeRef,src:i,draggable:u}))}}],[{key:"getDerivedStateFromProps",value:function(e){return{rotation:e.rotation,width:e.width,crop:e.crop,croping:e.croping}}}])}(Yu.Component);Object.defineProperty(HDe,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{croping:!1,readMode:!1,onLoad:function(){},onError:function(){},onEditableChange:function(e){},onWidthChange:function(){},onClick:function(){}}});var zDe=function(e){e.allowMaximize;var t=e.cardData,n=e.onMenuVisibleChange,r=e.themeSelector,o=(e.onPreviewImage,e.onMouseDown,e.widgets),i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["allowMaximize","cardData","onMenuVisibleChange","themeSelector","onPreviewImage","onMouseDown","widgets"]);function a(e){return Gu().createElement(Gu().Fragment,null,Gu().createElement(bR,{overlayClassName:"ne-ui-image-inner-menu "+r(),content:l(e),trigger:"click",placement:"bottomLeft",onVisibleChange:n},Gu().createElement("button",{type:"button",className:"ne-ui-image-inner-button ne-ui-image-more"},Gu().createElement(SC,{type:"more-horizontal"}))))}function l(e){return Gu().createElement(cP,{className:"ne-ui-image-inner-menu-menu",selectable:!1},e.map((function(e){return Gu().createElement(cP.Item,{key:e.name,onClick:e.execute},e.icon,Gu().createElement("span",null,e.title))})))}return Gu().createElement("div",Object.assign({},i,{onClick:function(e){e.preventDefault(),e.stopPropagation()}}),function(e){if(!e.length)return null;var n=function(e){return Gu().createElement("button",{type:"button",className:"ne-ui-image-inner-button",onMouseDown:function(e){e.preventDefault()},onClick:function(t){t.stopPropagation(),t.preventDefault(),"function"==typeof e.execute&&e.execute()}},e.icon)};return 1===e.length?n(e[0]):function(){var e,n,r=Number(null===(e=null==t?void 0:t.getDisplayWidth)||void 0===e?void 0:e.call(t)),o=Number(null===(n=null==t?void 0:t.getDisplayHeight)||void 0===n?void 0:n.call(t));return!isNaN(r)&&!isNaN(o)&&(r<=46||o<=46)}()?a(e):2===e.length?Gu().createElement(Gu().Fragment,null,n(e[0]),Gu().createElement("div",{className:"ne-ui-image-inner-divider"}),n(e[1])):Gu().createElement(Gu().Fragment,null,n(e[0]),Gu().createElement("div",{className:"ne-ui-image-inner-divider"}),a(e.slice(1)))}(o.filter((function(e){return e.enable()}))))};function WDe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,qDe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function qDe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qDe=function(){return!!e})()}var $De=function(e){function t(){var e;return(0,Ke.A)(this,t),e=WDe(this,t,arguments),Object.defineProperty(e,"_rootNodeRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){var e=this._rootNodeRef.current;if(e){var t=this.props,n=t.ocrLocations,r=t.originalWidth,o=t.displayWidth,i=t.originalHeight;if(r&&o&&i&&(r>0||o>0||i>0)){var a=Math.min(e.parentNode.getBoundingClientRect().width,o)/r;e.innerHTML=(n||[]).map((function(e){var t=Math.min(Math.min(e.width,e.height)*a,50),n="font-size: ".concat(t,"px; left: ").concat(e.x/r*100,"%;top: ").concat(e.y/i*100,"%;");return'<div class="ne-ui-image-ocr-text" style="'.concat(vd.encodeHTML(n),'">').concat(vd.encodeHTML(e.text),"</div>")})).join("")}}}},{key:"render",value:function(){return Gu().createElement("div",{className:"ne-ui-image-ocr-mask",ref:this._rootNodeRef})}}])}(Yu.Component);function KDe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,YDe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function YDe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(YDe=function(){return!!e})()}var GDe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=KDe(this,t,arguments),Object.defineProperty(e,"_boxRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"_tlRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"_trRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"_brRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"_blRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"originCardIndex",{enumerable:!0,configurable:!0,writable:!0,value:0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){var e=this;if(this._tlRef.current&&!Us.mobile){var t="mousedown";ud(this,this._tlRef.current,t,(function(t){e._handleResize(t,"tl")}),!1),ud(this,this._trRef.current,t,(function(t){e._handleResize(t,"tr")}),!1),ud(this,this._brRef.current,t,(function(t){e._handleResize(t,"br")}),!1),ud(this,this._blRef.current,t,(function(t){e._handleResize(t,"bl")}),!1)}}},{key:"render",value:function(){return Gu().createElement(Gu().Fragment,null,Gu().createElement("div",{className:"ne-ui-image-resizer-box",ref:this._boxRef},Gu().createElement("div",{className:"ne-ui-image-resizer ne-resizer-tl"}),Gu().createElement("div",{className:"ne-ui-image-resizer ne-resizer-tr"}),Gu().createElement("div",{className:"ne-ui-image-resizer ne-resizer-br"}),Gu().createElement("div",{className:"ne-ui-image-resizer ne-resizer-bl"})),Gu().createElement("div",{className:"ne-ui-image-resizer-handler ne-resizer-tl",ref:this._tlRef}),Gu().createElement("div",{className:"ne-ui-image-resizer-handler ne-resizer-tr",ref:this._trRef}),Gu().createElement("div",{className:"ne-ui-image-resizer-handler ne-resizer-br",ref:this._brRef}),Gu().createElement("div",{className:"ne-ui-image-resizer-handler ne-resizer-bl",ref:this._blRef}))}},{key:"_getClientXFromEvent",value:function(e){try{return e.clientX}catch(e){return 0}}},{key:"_handleResize",value:function(e,t){var n=this;e.preventDefault(),e.stopPropagation(),this.props.onResizeStart();var r={destroy:function(){}},o=this.props.getImageNode();if(o){var i=o.getBoundingClientRect().width,a=!1,l=this._getClientXFromEvent(e);pc(r,document,"mousemove",(function(r){r.preventDefault(),r.stopPropagation(),a=!0,l=n._getClientXFromEvent(r),n._process(!1,t,i,l-n._getClientXFromEvent(e))}),!1),pc(r,document,"mouseup",(function(o){o.preventDefault(),o.stopPropagation(),r.destroy(),a&&n._process(!0,t,i,(n._getClientXFromEvent(o)||l)-n._getClientXFromEvent(e)),n.props.cardEle&&void 0!==n.originCardIndex&&(n.props.cardEle.style.zIndex=""+n.originCardIndex)}),!1),this.props.cardEle&&(this.originCardIndex=Number(this.props.cardEle.style.zIndex),this.props.cardEle.style.zIndex="2")}}},{key:"_process",value:function(e,t,n,r){var o=this._resizeByWidth(e,t,n,r);e&&(this._resetBox(),this.props.onChange(o))}},{key:"_resizeByWidth",value:function(e,t,n,r){var o=this._boxRef.current,i=this.props,a=i.width,l=i.height/a*n,u="0",c="0",s="0",d="0",f=function(e,t,n){if((e=Math.max(e,1))===t)return{width:t,height:n};var r=Math.round(n/t*e);return r<1&&(r=1,e=Math.round(t/n*r)),{width:e,height:r}}("tl"===t||"bl"===t?n-r:n+r,this.props.originalWidth,this.props.originalHeight),h=f.width,p=f.height;return"tl"===t?(c=n-h+"px",u=l-p+"px"):"tr"===t?(s=n-h+"px",u=l-p+"px"):"br"===t?(s=n-h+"px",d=l-p+"px"):(c=n-h+"px",d=l-p+"px"),o.style.top=u,o.style.bottom=d,o.style.right=s,o.style.left=c,o.classList.add("ne-ui-resizing"),o.setAttribute("data-size","".concat(h," x ").concat(p)),{width:h}}},{key:"_resetBox",value:function(){var e=this._boxRef.current;e.style.cssText="",e.classList.remove("ne-ui-resizing"),e.removeAttribute("data-size")}}])}(Yu.Component);function JDe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,XDe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function XDe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(XDe=function(){return!!e})()}Object.defineProperty(GDe,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{onChange:function(){},onResizeStart:function(){}}});var QDe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=JDe(this,t,arguments),Object.defineProperty(e,"_focused",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_dom",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_timeId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_rafID",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_height",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(e,"domContext",{enumerable:!0,configurable:!0,writable:!0,value:{destroy:function(){}}}),Object.defineProperty(e,"_checkHeight",{enumerable:!0,configurable:!0,writable:!0,value:function(){cancelAnimationFrame(e._rafID),e._rafID=requestAnimationFrame((function(){e._dom&&e._height!==e._dom.offsetHeight&&(e._height=e._dom.offsetHeight,e.props.onHeightChange())}))}}),Object.defineProperty(e,"_handleContentWillChange",{enumerable:!0,configurable:!0,writable:!0,value:function(t){if(Ks.isChar(t,"S")&&(Us.macos?Ks.onlyMeta(t):Ks.onlyCtrl(t)))e._emitDone(t.target.textContent.trim(),""===t.target.textContent.trim());else if(t.stopPropagation(),299!==t.keyCode){var n=t.target.textContent.trim();if(Ks.isEnter(t))return t.preventDefault(),void e._emitDone(n,!0,!0);if(""===n&&(Ks.isBackspace(t)||Ks.isDelete(t)))return t.preventDefault(),void e.props.onDel(!0);n===e.props.content&&90===t.keyCode&&(t.ctrlKey||t.metaKey)&&(e._timeId=window.setTimeout(e.props.onBack),t.preventDefault()),e._handleChange(t)}}}),Object.defineProperty(e,"_handleInput",{enumerable:!0,configurable:!0,writable:!0,value:function(t){"historyUndo"===t.inputType&&clearTimeout(e._timeId),t.stopPropagation()}}),Object.defineProperty(e,"_handlePaste",{enumerable:!0,configurable:!0,writable:!0,value:function(t){t.preventDefault(),t.stopPropagation();var n=(t.originalEvent||t).clipboardData.getData("text/plain");document.execCommand("insertText",!1,n.replace(/\n/g," ")),e._handleChange(t)}}),Object.defineProperty(e,"_handleContentChange",{enumerable:!0,configurable:!0,writable:!0,value:function(t){t.stopPropagation(),e._handleChange(t)}}),Object.defineProperty(e,"_handleFocus",{enumerable:!0,configurable:!0,writable:!0,value:function(){e._focused=!0}}),Object.defineProperty(e,"_handleBlur",{enumerable:!0,configurable:!0,writable:!0,value:function(t){e._focused=!1;var n=t.target.textContent.trim();e._emitDone(n)}}),Object.defineProperty(e,"_handleTitleRef",{enumerable:!0,configurable:!0,writable:!0,value:function(t){t&&(e.domContext.destroy(),e.domContext.destroy=function(){},e._dom=t,pc(e.domContext,t,"focus",e._handleFocus),pc(e.domContext,t,"blur",e._handleBlur),pc(e.domContext,t,"keydown",(function(t){return e._handleContentWillChange(t)})),pc(e.domContext,t,"keyup",e._handleContentChange),pc(e.domContext,t,"beforeinput",e._stopPropagation),pc(e.domContext,t,"input",e._handleInput),pc(e.domContext,t,"compositionstart",(function(t){return e._handleContentWillChange(t)})),pc(e.domContext,t,"compositionend",e._handleContentChange),pc(e.domContext,t,"copy",e._stopPropagation),pc(e.domContext,t,"cut",(function(t){return e._handleContentWillChange(t)})),pc(e.domContext,t,"paste",e._handlePaste))}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){this._dom&&(this._dom.innerText=this.props.content,this.props.editable&&(this._checkHeight(),this._getFocus()))}},{key:"componentDidUpdate",value:function(e){this._dom&&(e.content!==this.props.content&&(this._dom.innerText=this.props.content,this.props.editable&&""===this.props.content&&this._getFocus()),e.width!==this.props.width&&(this._dom.style.width=this.props.width+"px"),this.props.editable&&this._checkHeight())}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this._rafID),this.domContext.destroy(),this._dom=null}},{key:"render",value:function(){var e=this.props,t=e.width,n=e.editable;return Gu().createElement("div",{style:{width:t},className:"ne-image-title"},Gu().createElement("div",{contentEditable:n,className:"ne-image-title-content",ref:this._handleTitleRef}),this._renderPlaceholder())}},{key:"_getFocus",value:function(){var e,t;this.props.beforeAutoFocus();var n=window.getSelection();(null===(t=null===(e=null==n?void 0:n.anchorNode)||void 0===e?void 0:e.closest)||void 0===t?void 0:t.call(e,".ne-image-sidebar-box"))||(null==n||n.selectAllChildren(this._dom),null==n||n.collapseToEnd())}},{key:"_renderPlaceholder",value:function(){if(!this.props.editable)return null;var e={display:"block"};return this.props.content&&(e.display="none"),Gu().createElement("div",{className:"ne-image-title-placeholder",style:e},sc("添加图片描述"))}},{key:"_stopPropagation",value:function(e){e.stopPropagation()}},{key:"_handleChange",value:function(e){var t,n,r=null===(n=null===(t=e.target)||void 0===t?void 0:t.parentNode)||void 0===n?void 0:n.querySelector(".ne-image-title-placeholder");r&&(""===e.target.textContent?r.style.display="block":r.style.display="none"),this._checkHeight()}},{key:"_emitDone",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];""===e?this.props.onDel(t,n):this.props.onDone(e,t)}}])}(Yu.Component);function ZDe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,ePe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function ePe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ePe=function(){return!!e})()}Object.defineProperty(QDe,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{width:20,content:"",editable:!1,croping:!1,onHeightChange:function(){},onDone:function(){},onDel:function(){},onBack:function(){},beforeAutoFocus:function(){}}});var tPe=function(e){},nPe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=ZDe(this,t,arguments),Object.defineProperty(e,"state",{enumerable:!0,configurable:!0,writable:!0,value:{imageDisplayUrl:null,loaded:!1,loadError:!1,loadErrorOnce:!1,menuVisible:!1,naturalWidth:-1}}),Object.defineProperty(e,"_imageEditRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"_imageBoxRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"_removeFunc",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(e,"_unmounted",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_dragIsReady",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_hasRetryOriginImage",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_hasRetryBackup",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_handleImageClick",{enumerable:!0,configurable:!0,writable:!0,value:function(t){e.props.clickToMaximize&&e._handleMaximizeClick(t)}}),Object.defineProperty(e,"_handleMaximizeClick",{enumerable:!0,configurable:!0,writable:!0,value:function(t){t.stopPropagation(),t.preventDefault(),e.props.onPreviewImage()}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.cardData,r=t.generateDisplayUrl,o=t.setDisplayUrl;setTimeout((function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!e._imageBoxRef.current){if(i<2)return void setTimeout(t,100,i+1);var a=yh.sanitizeImageSrc(r(n.getOriginDisplayWidth()||n.getOriginalWidth()));return o(a),void e.setState({imageDisplayUrl:a})}var l=e._imageBoxRef.current.getBoundingClientRect().width,u=l>0?l:n.getOriginDisplayWidth(),c=yh.sanitizeImageSrc(r(u));o(c),e.setState({imageDisplayUrl:c})})),this.props.onUIUpdate()}},{key:"componentDidUpdate",value:function(){this.props.onUIUpdate()}},{key:"componentWillUnmount",value:function(){this._unmounted=!0,this._removeFunc.forEach((function(e){return e()}))}},{key:"_finalError",value:function(){this.setState({loadError:!0,loadErrorOnce:!0})}},{key:"_imageLoadError",value:function(){var e,t=this;if(!this._unmounted){var n=!!(null===(e=this.props.failConfig)||void 0===e?void 0:e.isRetry);this._hasRetryOriginImage&&(!n||n&&this._hasRetryBackup)?this._finalError():(this.setState({loadErrorOnce:!0}),setTimeout((function(){return function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))}(t,void 0,void 0,Cc().mark((function e(){var t,r,o,i;return Cc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._hasRetryOriginImage){e.next=7;break}this._hasRetryOriginImage=!0,r=yh.sanitizeImageSrc(this._resetImageDisplayUrl(this.state.imageDisplayUrl,!0)),this.props.setDisplayUrl(r),this.setState({imageDisplayUrl:r}),e.next=16;break;case 7:if(!n||this._hasRetryBackup){e.next=16;break}if(this._hasRetryBackup=!0,"function"==typeof(o=null===(t=this.props.failConfig)||void 0===t?void 0:t.getRetryUrl)){e.next=13;break}return this._finalError(),e.abrupt("return");case 13:i=o(this.state.imageDisplayUrl),this.props.setDisplayUrl(i),this.setState({imageDisplayUrl:i});case 16:case"end":return e.stop()}}),e,this)})))}),300))}}},{key:"_resetImageDisplayUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var n=new URL(e,location.href);if(n.searchParams.set("date",String(Date.now())),t){var r=n.pathname.toLowerCase();(r.endsWith(".webp")||r.endsWith(".gif"))&&n.searchParams.delete("x-oss-process")}return n.toString()}catch(t){return e.indexOf("?")>0?"".concat(e,"&t=").concat(Date.now()):"".concat(e,"?t=").concat(Date.now())}}},{key:"_imageLoad",value:function(){var e=this;this._unmounted||(this.setState({loadErrorOnce:!1}),this.props.onLoaded(),setTimeout((function(){if(!e._unmounted){var t=e._imageEditRef.current,n=t.naturalWidth||t.width;e.setState({loaded:!0,naturalWidth:n}),e.props.cardData.getOriginalWidth()||e.props.onImageSizeResolved({width:n,height:t.naturalHeight||t.height}),e._initDrag(),e.props.onReady(t.getEditorImageDataUrl)}}),20))}},{key:"_getLocalUrl",value:function(){var e=this.props,t=e.cardData,n=e.uploadObserver;if(t.isCompleted())return null;var r,o=t.getTaskId();return o&&n?null==(r=n.observe(o,t.getClientId()))?void 0:r.getResourceURL():null}},{key:"_getBoxStyleOnLoading",value:function(){var e=this.props.cardData,t={},n=e.getDisplayWidth(),r=e.getDisplayHeight();return t.width="".concat(n,"px"),t.height="0",t.paddingBottom="".concat(Math.round(r/n*1e8)/1e6,"%"),t}},{key:"render",value:function(){var e=this.props.linkProps,t=this.state,n=t.loaded,r=t.loadError,o=t.imageDisplayUrl,i=this._getLocalUrl(),a=null,l=r,u=!n&&i&&!o;l?a=this._renderErrorImage():u&&(a=this._renderLocalImage(i));var c={},s=!l&&!u&&!n;s&&(c=this._getBoxStyleOnLoading());var d=Gu().createElement("div",{className:this._getImageClassName(),"data-testid":"ne-card-image"},this._renderInnerButtons(),this._renderOCRMask(),this._renderResizer(),this._renderCrop(),Gu().createElement("div",{className:Uf("ne-image-box",s?"ne-image-box-loading":""),style:c,ref:this._imageBoxRef},this._renderImage(!l&&!u),a));return e&&(d=Gu().createElement("a",Object.assign({},e),d)),Gu().createElement(Gu().Fragment,null,d,this._renderTitle())}},{key:"_renderTitle",value:function(){var e,t=this.props,n=t.cardData,r=t.croping,o=t.active,i=t.editable,a=t.currentImageOP;if(!n.showTitle())return null;var l=n.getDisplayWidth();if(r&&(l=a.scaleRotationWidth),r&&(null===(e=this._imageEditRef.current)||void 0===e?void 0:e.imageNode)){var u=this._imageEditRef.current.imageNode;Number(u.getAttribute("width"))!==Math.round(l)&&(u.style.width=Math.round(l)+"px"),l=Math.min(u.offsetWidth,l)}return Gu().createElement(QDe,{editable:i&&o,croping:r,content:n.getTitle(),width:l,onDone:this.props.onTitleCommit,onDel:this.props.onTitleRemove,onBack:this.props.onTitleHistoryBack,beforeAutoFocus:this.props.onBeforeTitleAutoFocus,onHeightChange:this.props.onTitleHeightChange})}},{key:"_renderImage",value:function(e){var t=this.props,n=t.cardData,r=t.clickToMaximize,o=t.currentImageOP,i=t.croping,a=t.editable,l=t.isIntersecting,u=this.state,c=u.imageDisplayUrl,s=u.loadErrorOnce;return c?Gu().createElement(HDe,{readMode:!a,cardData:n,croping:i,rotation:i?o.rotation:n.getRotation(),crop:i?o.crop:n.getCrop(),ref:this._imageEditRef,className:Uf("ne-image",r?"ne-image-preview":"",e&&l&&!s?"":"ne-image-hide"),src:l?c:void 0,alt:n.getName()||"",onEditableChange:this.props.onEditableChange,onClick:r?this._handleImageClick:tPe,onWidthChange:this.props.onWidthChange,width:i?o.viewWidth:n.getDisplayWidth(),onLoad:this._imageLoad.bind(this),onError:this._imageLoadError.bind(this)}):null}},{key:"_renderLocalImage",value:function(e){var t=this.props.cardData,n=t.getDisplayWidth(),r=t.getDisplayHeight();return Gu().createElement(yDe,{url:e,width:n,height:r,className:"ne-bg-img"})}},{key:"_renderErrorImage",value:function(){var e=this.props.cardData;return Gu().createElement(kDe,{tip:sc("图片加载失败"),width:e.getDisplayWidth(),height:e.getDisplayHeight(),onLoaded:this.props.onLoaded})}},{key:"_renderInnerButtons",value:function(){var e=this;if(!this.state.loaded||Us.mobile)return null;var t=this.props,n=t.cardData,r=t.croping,o=t.onPreviewImage,i=t.allowMaximize,a=t.innerButtonWidgets;if(!r){var l=n.getDisplayWidth();if(!(n.getDisplayHeight()<1||l<1))return Gu().createElement(zDe,{className:Uf("ne-ui-image-inner-button-wrap",this.state.menuVisible?"ne-ui-image-inner-button-wrap-menu-open":""),widgets:a,onPreviewImage:o,allowMaximize:i,cardData:n,onMenuVisibleChange:function(t){e.setState({menuVisible:!!t})},themeSelector:this.props.themeSelector.bind(this)})}}},{key:"_renderResizer",value:function(){var e=this;if(Us.mobile||!this.props.active||this.props.croping||!this.props.allowResize||!this.state.loaded)return null;var t=this.props,n=t.cardData,r=t.cardEle,o=n.getRotationCropWidth(),i=n.getRotationCropHeight();return o<1||i<1?null:Gu().createElement(GDe,{onChange:function(t){e.props.onImageSizeChange(t)},onResizeStart:this.props.onResizerStart,getImageNode:function(){return e._imageEditRef.current?e._imageEditRef.current.imageNode:null},originalWidth:o,originalHeight:i,width:n.getDisplayWidth(),height:n.getDisplayHeight(),cardEle:r})}},{key:"_renderCrop",value:function(){var e=this;if(!this.props.croping||!this.props.allowResize||!this.state.loaded)return null;var t=this.props,n=t.cardData,r=t.currentImageOP,o=n.getOriginalWidth(),i=n.getOriginalHeight();return o<1||i<1?null:Gu().createElement(LDe,{cardData:n,currentImageOP:r,rotation:r.rotation,getImageNode:function(){return e._imageEditRef.current?e._imageEditRef.current.imageNode:null},onOk:this.props.onCropOK,onChange:this.props.onCropChange})}},{key:"_renderOCRMask",value:function(){if(!this.state.loaded)return null;var e=this.props,t=e.cardData,n=e.ocr,r=t.getOcrLocations();return!Us.mobile&&n&&r?Gu().createElement($De,{ocrLocations:r,originalWidth:t.getOriginalWidth(),originalHeight:t.getOriginalHeight(),displayWidth:t.getDisplayWidth()}):null}},{key:"_initDrag",value:function(){var e,t,n=this;if(!(this._dragIsReady||this._unmounted||Us.mobile)){this._dragIsReady=!0;var r=null===(t=null===(e=this._imageEditRef)||void 0===e?void 0:e.current)||void 0===t?void 0:t.imgEle;this.props.drag&&r&&new CR(this.props.drag.editBox,this.props.drag.overlayContainer,this.props.drag.cardRootNode,r,this.props.drag.scrollContainer,(function(e){var t,r;null===(r=(t=n.props).onDrop)||void 0===r||r.call(t,e)}),(function(e){var t,o;if(e){var i=r.getBoundingClientRect(),a=i.width,l=i.height;e.style.width="".concat(a,"px"),e.style.height="".concat(l,"px")}null===(o=(t=n.props).onDragStart)||void 0===o||o.call(t)}),this.props.themeSelector())}}},{key:"_getImageClassName",value:function(){var e=["ne-image-wrap"];this.state.loaded&&e.push("ne-image-loaded");var t=this.props.cardData.getStyle();return t&&e.push("ne-image-style-".concat(t)),e.join(" ")}}])}(Yu.Component);function rPe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,oPe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function oPe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(oPe=function(){return!!e})()}Object.defineProperty(nPe,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{active:!1,allowResize:!1,allowMaximize:!0,clickToMaximize:!1,ocr:!1,loading:!1,editable:!1,onTitleHistoryBack:function(){},onTitleCommit:function(){},onTitleRemove:function(){},onTitleChange:function(){},onReady:function(e){},onImageSizeResolved:function(e){},onImageSizeChange:function(e){},onResizerStart:function(){},onPreviewImage:function(){},onLoaded:function(){},onCropChange:function(){},onEditableChange:function(e){},onUIUpdate:function(){}}});var iPe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=rPe(this,t,arguments),Object.defineProperty(e,"prevImgUrl",{enumerable:!0,configurable:!0,writable:!0,value:""}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){var e=this.props,t=e.cardData,n=e.uploadObserver,r=e.cardEle,o=t.getStatus();return o===VT||o===HT?Gu().createElement(ODe,{onUploadFailure:this.props.onUploadFailure,onUploadSuccess:this.props.onUploadSuccess,onImageSizeResolved:this.props.onImageSizeResolved,uploadObserver:n,width:t.getDisplayWidth(),height:t.getDisplayHeight(),taskId:t.getTaskId(),clientId:t.getClientId(),autoScale:t.isFromPaste()}):t.isValid()?Gu().createElement(nPe,{cardData:t,cardEle:r,uploadObserver:n,allowResize:!0,ocr:this.props.ocr,editable:!0,croping:this.props.croping,failConfig:this.props.failConfig,onReady:this.props.onReady,onCropOK:this.props.onCropOK,currentImageOP:this.props.currentImageOP,onPreviewImage:this.props.onPreviewImage,allowMaximize:this.props.allowMaximize,onImageSizeResolved:this.props.onImageSizeResolved,onImageSizeChange:this.props.onImageSizeChange,onResizerStart:this.props.onResizerStart,onTitleHeightChange:this.props.onTitleHeightChange,onTitleCommit:this.props.onTitleCommit,onTitleRemove:this.props.onTitleRemove,onTitleHistoryBack:this.props.onTitleHistoryBack,onBeforeTitleAutoFocus:this.props.onBeforeTitleAutoFocus,onEditableChange:this.props.onEditableChange,onWidthChange:this.props.onWidthChange,onUIUpdate:this.props.onUIUpdate,active:this.props.active,generateDisplayUrl:this.props.generateDisplayUrl,setDisplayUrl:this.props.setDisplayUrl,lazyLoad:this.props.lazyLoad,drag:this.props.drag,onDrop:this.props.onDrop,onDragStart:this.props.onDragStart,isIntersecting:this.props.isIntersecting,innerButtonWidgets:this.props.innerButtonWidgets,themeSelector:this.props.themeSelector}):Gu().createElement(kDe,{width:t.getDisplayWidth(),height:t.getDisplayHeight(),tip:sc("图片上传失败")})}}])}(Yu.Component);function aPe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(aPe=function(){return!!e})()}function lPe(e){return function(e){function t(){var e;(0,Ke.A)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,aPe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,[].concat(r)),Object.defineProperty(e,"_widthMiniWidgetRef",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_heightMiniWidgetRef",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_uploadObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"uiViewProxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_heightToWidthRatio",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_widthToHeightRatio",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_displayUrl",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_isReady",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_isCroping",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_cropImageOp",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_editable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_uiUpdateCallback",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(e,"onDragStart",{enumerable:!0,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(e,"onComponentReady",{enumerable:!0,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(e,"onTitleHeightChange",{enumerable:!0,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(e,"onResizeStart",{enumerable:!0,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(e,"onImageSizeChanged",{enumerable:!0,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(e,"onCropEnd",{enumerable:!0,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(e,"onSidebarBodyClick",{enumerable:!0,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(e,"setDisplayUrl",{enumerable:!0,configurable:!0,writable:!0,value:function(t){e._displayUrl=t}}),Object.defineProperty(e,"getDisplayUrl",{enumerable:!0,configurable:!0,writable:!0,value:function(){return e._displayUrl||e.cardData.getSrc()}}),Object.defineProperty(e,"_onPreviewImage",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=e.cardNode.getAllImages();if(t){var n=0,r=t.map((function(t,r){return t.id===e.id&&(n=r),{src:t.src,msrc:t.msrc,layoutSelf:t.layoutSelf,size:t.size,w:t.width,h:t.height}}));e.editor.emitEvent("previewImgs",r,n)}}}),e._widthMiniWidgetRef=(0,Yu.createRef)(),e._heightMiniWidgetRef=(0,Yu.createRef)(),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this;this._uploadObserver=e;var n=!1,r=this.containerNode.closest("ne-card");this.plugin.intersectionObserver&&this.pluginOption.lazyLoad?this.plugin.intersectionObserver.observe(r,(function(e,n){e.isIntersecting&&(t.uiViewProxy.rerender({isIntersecting:!0}),n.unobserve(e.target))})):n=!0,this.uiViewProxy=Vye.render(iPe,{themeSelector:function(){return t.editor.theme.getThemeSelector()},uploadObserver:this._uploadObserver,cardData:this.cardData,active:!1,croping:this._isCroping,currentImageOP:this._cropImageOp,ocr:this.pluginOption.isShowOcr()&&(this.pluginOption.supportImgOCR||!!this.plugin.editor.option.getOption("supportImgOCR")),lazyLoad:this.pluginOption.lazyLoad,isIntersecting:n,drag:{editBox:this.editor.editBox,overlayContainer:this.editor.overlayContainer,scrollContainer:this.editor.scrollNode,cardRootNode:this.cardRootNode},cardEle:r,generateDisplayUrl:this.getDisplayUrl,failConfig:this.pluginOption.failConfig,setDisplayUrl:this.setDisplayUrl,onEditableChange:function(e){t._editable=e},onDrop:function(e){t.editor.renderer.execCommand("moveImage",e,t._cardID)},onDragStart:this.onDragStart,onReady:function(e){t._isReady=!0,t._getImageDataUrl=e,t.onComponentReady()},onUIUpdate:function(){for(var e;t._uiUpdateCallback.length;)null===(e=t._uiUpdateCallback.pop())||void 0===e||e();t.cardData.showTitle()?t.cardRootNode.classList.add("ne-image-card-show-title"):t.cardRootNode.classList.remove("ne-image-card-show-title")},onPreviewImage:this._onPreviewImage,onImageSizeResolved:function(e){setTimeout((function(){t.emit("imageSizeResolved",e)}))},onUploadSuccess:function(e){setTimeout((function(){t.emit("uploadSuccess",e)}))},onCropOK:function(){t._handleCropOK()},onTitleHeightChange:this.onTitleHeightChange,onTitleCommit:function(e,n){setTimeout((function(){t.emit("titleChange",e,n)}))},onTitleRemove:function(e,n){setTimeout((function(){t.emit("removeTitle",e,n)}))},onTitleHistoryBack:function(){setTimeout((function(){t.emit("historyBack")}))},onBeforeTitleAutoFocus:function(){setTimeout((function(){t.emit("beforeAutoFocus")}))},onCropChange:function(e){t._cropImageOp.setCrop(e)},onUploadFailure:function(e){setTimeout((function(){t.emit("uploadError",e)}))},onResizerStart:function(){t.onResizeStart(),t.emit("imageResizeStart")},onImageSizeChange:function(e){var n=e.width;t.emit("imageResize",n),t.onImageSizeChanged()},innerButtonWidgets:this.pluginOption.innerButtonWidgets.map((function(e){return Object.assign(Object.assign({},e),{execute:function(){e.execute(t)},enable:"function"==typeof e.enable?function(){return e.enable(t)}:function(){return!!e.enable}})}))},this.containerNode)}},{key:"_handleCropOK",value:function(){this._isCroping&&(this._setCroping(!1),this.cardData.getRotation()===this._cropImageOp.rotation&&pDe.equalCrop(this._cardData.getCrop(),this._cropImageOp.normalizeCrop)||(this.cardData.setDisplayWidth(this._cropImageOp.viewWidth),this.cardData.setRotation(this._cropImageOp.rotation),this.cardData.setCrop(this._cropImageOp.normalizeCrop),this.cardData.sync(!1)),this._cropImageOp=null,this.uiViewProxy.rerender({croping:this._isCroping,currentImageOP:this._cropImageOp}),this.onCropEnd())}},{key:"getCroping",value:function(){return this._isCroping}},{key:"_setCroping",value:function(e){this._isCroping=e,this.emit("croping",this._isCroping)}},{key:"focus",value:function(){this.uiViewProxy.rerender({active:!0})}},{key:"blur",value:function(){null!==this._cropImageOp&&(this._setCroping(!1),this.cardData.setDisplayWidth(this._cropImageOp.viewWidth),this.cardData.setRotation(this._cropImageOp.rotation),this.cardData.setCrop(this._cropImageOp.normalizeCrop),this.cardData.sync(!1),this._cropImageOp=null),this.uiViewProxy.rerender({active:!1,croping:!1})}},{key:"destroy",value:function(){this.plugin.intersectionObserver&&this.plugin.intersectionObserver.unobserve(this.containerNode.closest("ne-card")),Gl().unmountComponentAtNode(this.containerNode),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}}])}(e)}Object.defineProperty(iPe,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{onPreviewImage:function(){},onImageSizeResolved:function(){},onImageSizeChange:function(){},onResizerStart:function(){},onReady:function(){},active:!1,lazyLoad:!1}});var uPe=lPe;function cPe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,sPe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function sPe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(sPe=function(){return!!e})()}var dPe=function(e){function t(e){var n;(0,Ke.A)(this,t);for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return n=cPe(this,t,[].concat(o)),Object.defineProperty(n,"editor",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(n,"_cardUI",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_task",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"onSidebarBodyClick",{enumerable:!0,configurable:!0,writable:!0,value:function(){n._cardUI.onSidebarBodyClick()}}),Object.defineProperty(n,"_handleUploadSuccess",{enumerable:!0,configurable:!0,writable:!0,value:Qm()((function(e){n.cardData.setImageInfo(e),n.cardData.sync(!0)||(n.cardData.setUploadError("failed to set src"),n.cardData.sync(!0))}))}),Object.defineProperty(n,"_handleUploadError",{enumerable:!0,configurable:!0,writable:!0,value:Qm()((function(e){n.cardData.setUploadError(null==e?void 0:e.message),n.cardData.sync(!0)}))}),t.$CardData.getAllImages=n.getAllImages.bind(n),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e=this,n=this.editor.requireService(oDe.ID);this.pluginOption.editUI&&(t.$EditableCardUI=this.pluginOption.editUI);var r=this.cardData,o=this.cardData.getStatus(),i=o===VT||o===HT;if(this._cardUI=this.editor.createCardUI(this,n.uploadObserver),i&&n.uploadObserver&&r.getTaskId()&&r.getClientId()){this._task=n.uploadObserver.observe(r.getTaskId(),r.getClientId());var a=this.editor.getService(hDe.ID),l=null==a?void 0:a.getImageUploadData(this._task);l&&this.editor.emitEvent("imageUpload",Object.assign(Object.assign({},l),{id:this._viewNode.id})),this._task.on("timeout",(function(){return e._handleUploadError("failed to upload")})),this._task.on("success",(function(t){l&&t.url&&e.editor.emitEvent("imageUploaded",Object.assign(Object.assign({},l),{id:e._viewNode.id,url:t.url})),e._handleUploadSuccess(t)})),this._task.on("error",(function(t){return e._handleUploadError(t)}))}this._cardUI.on("imageSizeResolved",(function(t){var n=t.width,o=t.height;r.setImageOriginSize(n,o),i&&e._autoSetUserWidth(n),r.sync(!0)})),this._cardUI.on("imageResize",(function(t){e.cardData.setDisplayWidth(t),e.cardData.sync(!1)})),this._cardUI.on("uploadSuccess",(function(t){e._handleUploadSuccess(t)})),this._cardUI.on("uploadError",(function(t){e._handleUploadError(t)})),this._cardUI.on("beforeAutoFocus",(function(){!function(e,t){bt(e.contains(t),"plugins/image/src/common/view-helper.ts:9");var n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),o=r.bottom-n.bottom,i=n.top-r.top;r.bottom>n.bottom?e.scrollTop=e.scrollTop+o:r.top<n.top&&(e.scrollTop=e.scrollTop-i)}(e.editor.scrollNode,document.querySelector("#".concat(e.id," .ne-image-title-content")))})),this._cardUI.on("historyBack",(function(){e.editor.execCommand("undo")})),this._cardUI.on("croping",(function(t){t&&e.allowFocus()&&e.editor.execCommand("focusCard",e.id,iM)})),this.allowFocus()&&this._cardUI.on("reset",(function(){e.editor.execCommand("focusCard",e.id,iM)})),this._cardUI.on("toggleTitleShow",(function(){e.editor.execCommand("focusCard",e.id,iM),e.cardData.setShowTitle(!e.cardData.showTitle()),e.cardData.sync(!1)})),this._cardUI.on("titleChange",(function(t,n){t!==e.cardData.getTitle()&&(e.cardData.setTitle(t),e.cardData.sync(!1)),n&&e.moveSelectionToNext(!0)})),this._cardUI.on("removeTitle",(function(t,n){e.cardData.setShowTitle(!1),e.cardData.setTitle(""),e.cardData.sync(!1),t&&e.moveSelectionToNext(n)}))}},{key:"destroy",value:function(){this._task&&this._task.abort(),this._cardUI&&this._cardUI.destroy()}},{key:"getImageDisplaySrc",value:function(){return this._cardUI.getDisplayUrl()}},{key:"getAllImages",value:function(){var e=this.plugin.cardNodes;return e?e.map((function(e){if(!e.viewNode.isConnected)return null;var t=e.cardData,n=t.getPreviewSrc();if(!n)return null;var r={id:e.id,src:n,msrc:e.getImageDisplaySrc()||n,width:t.getRotationCropWidth(),height:t.getRotationCropHeight(),style:t.getStyle(),size:t.getSize(),__spacing:t.getCardSpacing()};return t.isAfterEdit()&&(r.layoutSelf=function(){var e=document.createElement("div");return(null==n?void 0:n.startsWith("javascript:"))||(e.innerHTML='<div style="'.concat(pDe.toDivInlineStyle(t),'"></div>')),e}),r})).filter(Boolean):null}},{key:"moveSelectionToNext",value:function(e){if(!this.viewNode.isConnected)return null;e?this.editor.execCommand("imageTitleBreakLine",this.id):this.editor.execCommand("focusCard",this.id,lM)}},{key:"allowFocus",value:function(){return!1}},{key:"$focus",value:function(){t.cancelCloseTask&&(t.cancelCloseTask(),t.cancelCloseTask=null),Tr((0,Je.A)(t.prototype),"$focus",this).call(this)}},{key:"$blur",value:function(){Tr((0,Je.A)(t.prototype),"$blur",this).call(this)}},{key:"sync",value:function(){return this.cardData.isCompleted()}},{key:"_autoSetUserWidth",value:function(e){this.cardData.isFromPaste()&&this.cardData.isBinaryType()&&this.cardData.setDisplayWidth(e/id())}}])}(My);function fPe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,hPe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function hPe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(hPe=function(){return!!e})()}Object.defineProperty(dPe,"$CardData",{enumerable:!0,configurable:!0,writable:!0,value:KT}),Object.defineProperty(dPe,"$EditableCardUI",{enumerable:!0,configurable:!0,writable:!0,value:lPe(zh()())}),Object.defineProperty(dPe,"$NonBoundary",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(dPe,"cancelCloseTask",{enumerable:!0,configurable:!0,writable:!0,value:null});var pPe=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=fPe(this,t),Object.defineProperty(r,"_apiURL",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(r,"_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_file",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_resourceURL",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_uploadRequest",{enumerable:!0,configurable:!0,writable:!0,value:null}),r._id=Dr(),r._file=rd(n),r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getResourceURL",value:function(){return this._resourceURL||(this._resourceURL=URL.createObjectURL(this._file)),this._resourceURL}},{key:"destroy",value:function(){this._resourceURL&&URL.revokeObjectURL(this._resourceURL)}},{key:"run",value:function(){return function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,Cc().mark((function e(){var t,n,r=this;return Cc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._file,n=new FormData,this.emit(kte.EVENT_START),n.append("file",t,"image.png"),e.abrupt("return",new Promise((function(e){r._uploadRequest=ns({method:"post",xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",(function(e){e.lengthComputable&&r.emit(kte.EVENT_PROGRESS,kc.toPercentage(e.loaded,e.total))}),!1),e},url:r._apiURL,data:n,dataType:"json",success:function(t){r.emit(kte.EVENT_SUCCESS,t.data),e(t.data)},error:function(t){t=ts(t),r.emit(kte.EVENT_ERROR,t),e({error:t})},processData:!0})})));case 5:case"end":return e.stop()}}),e,this)})))}},{key:"abort",value:function(){this._uploadRequest&&this._uploadRequest.abort()}}])}(kte);function vPe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,mPe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function mPe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mPe=function(){return!!e})()}var gPe=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=vPe(this,t),Object.defineProperty(r,"_apiURL",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(r,"_file",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(r,"_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_resourceURL",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(r,"_uploadRequest",{enumerable:!0,configurable:!0,writable:!0,value:null}),r._id=Dr(),r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getFileName",value:function(){return this._file.name}},{key:"getResourceURL",value:function(){return this._resourceURL||(this._resourceURL=URL.createObjectURL(this._file)),this._resourceURL}},{key:"destroy",value:function(){this._resourceURL&&(URL.revokeObjectURL(this._resourceURL),this._resourceURL=null),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}},{key:"run",value:function(){return function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,Cc().mark((function e(){var t,n,r=this;return Cc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._file,n=new FormData,this.emit(kte.EVENT_START),n.append("file",t,t.name),e.abrupt("return",new Promise((function(e){r._uploadRequest=ns({method:"post",xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",(function(e){e.lengthComputable&&r.emit(kte.EVENT_PROGRESS,kc.toPercentage(e.loaded,e.total))}),!1),e},url:r._apiURL,data:n,dataType:"json",success:function(t){r.emit(kte.EVENT_SUCCESS,t.data),e(t.data)},error:function(t){t=ts(t),r.emit(kte.EVENT_ERROR,t),e({error:t})},processData:!0})})).catch((function(e){console.error(e)})));case 5:case"end":return e.stop()}}),e,this)})))}},{key:"abort",value:function(){this._uploadRequest&&this._uploadRequest.abort(),Tr((0,Je.A)(t.prototype),"abort",this).call(this)}}])}(kte);function bPe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,yPe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function yPe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(yPe=function(){return!!e})()}var wPe=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))},APe=[".png",".bmp",".jpg",".jpeg"],kPe=function(e){function t(e,n,r){var o,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,Ke.A)(this,t),o=bPe(this,t),Object.defineProperty(o,"_uploadApi",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(o,"_crawlApi",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(o,"_url",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(o,"_allowOriginalURL",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(o,"_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),o._id=Dr(),o}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getResourceURL",value:function(){return this._url}},{key:"run",value:function(){return wPe(this,void 0,void 0,Cc().mark((function e(){var t,n;return Cc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.emit(kte.EVENT_START),e.prev=1,!this._allowUploadFromLocal()){e.next=15;break}return e.prev=3,e.next=6,this._uploadFromLocal();case 6:if(!(t=e.sent).success){e.next=10;break}return this.emit(kte.EVENT_SUCCESS,t.result),e.abrupt("return",{result:t.result});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),console.warn("failed to upload by file",e.t0);case 15:return e.next=17,this._uploadFromServer();case 17:return n=e.sent,this.emit(kte.EVENT_SUCCESS,n),e.abrupt("return",{result:n});case 22:if(e.prev=22,e.t1=e.catch(1),!this._allowOriginalURL){e.next=27;break}return this.emit(kte.EVENT_SUCCESS,{url:this._url}),e.abrupt("return",{result:{url:this._url}});case 27:return this.emit(kte.EVENT_ERROR,{message:"picture dump failure"}),e.abrupt("return",{error:e.t1});case 29:case"end":return e.stop()}}),e,this,[[1,22],[3,12]])})))}},{key:"_uploadFromLocal",value:function(){return wPe(this,void 0,void 0,Cc().mark((function e(){var t=this;return Cc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new Image;r.crossOrigin="anonymous",r.onload=function(){var o=document.createElement("canvas"),i=t._getImageSize(r),a=i.width,l=i.height;o.width=a,o.height=l;var u=o.getContext("2d");try{u.drawImage(r,0,0),o.toBlob((function(r){r.name="image.png",t._uploadFile(r,a,l,e,n)}))}catch(t){console.warn("failed to upload image from local: ",t),e({success:!1,error:t})}},r.onerror=function(t){e({success:!1,error:t})},r.src=t._url})));case 1:case"end":return e.stop()}}),e)})))}},{key:"_uploadFromServer",value:function(){return wPe(this,void 0,void 0,Cc().mark((function e(){var t,n,r,o,i,a=this;return Cc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ns({method:"post",xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",(function(e){e.lengthComputable&&a.emit(kte.EVENT_PROGRESS,kc.toPercentage(e.loaded,e.total))}),!1),e},url:this._crawlApi,data:{url:this._url},dataType:"json",processData:!0}),e.next=3,t.promise;case 3:if(n=e.sent,r=(null==n?void 0:n.data)||{},o=r.url){e.next=10;break}throw(i=new Error("upload error")).xhr=t.xhr,ts(i),i;case 10:return e.next=12,new Promise((function(e){var t=new Image;t.onload=function(){var n=a._getImageSize(t),r=n.width,i=n.height;e({url:o,width:r,height:i})},t.onerror=function(){e({url:o})},t.src=o}));case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)})))}},{key:"_allowUploadFromLocal",value:function(){try{var e=new URL(this._url,location.href).pathname.toLowerCase().split(".");return 1!==e.length&&APe.includes("."+e.pop())}catch(e){}return!1}},{key:"_uploadFile",value:function(e,t,n,r,o){var i=this,a=new FormData;a.append("file",e,e.name),ns({method:"post",xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",(function(e){e.lengthComputable&&i.emit(kte.EVENT_PROGRESS,kc.toPercentage(e.loaded,e.total))}),!1),e},url:this._uploadApi,data:a,dataType:"json",success:function(e){r({success:!0,result:Object.assign(Object.assign({},e.data),{width:t,height:n})})},error:function(e){o(e)},processData:!0})||o("ajax对象创建失败，检查ajax全局代理")}},{key:"_getImageSize",value:function(e){return{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}}}])}(kte),_Pe={link:{name:"link",title:sc("链接"),icon:Gu().createElement(SC,{type:"t-link"}),enable:function(e){return!!e.cardData.getLink()},execute:function(e){var t=yh.sanitizeUrl(e.cardData.getLink());t&&e.editor.emitEvent("visitLink",t,!0)}},delete:{name:"delete",title:sc("删除"),enable:!0,icon:Gu().createElement(SC,{type:"icon-delete"}),execute:function(e){e.editor.execCommand("deleteCard",e.id),e.editor.execCommand("focus",{preventScroll:!0})}},copy:{name:"copy",title:sc("复制"),icon:Gu().createElement(SC,{type:"action-copy"}),enable:!0,execute:function(e){var t=document.createRange();t.selectNode(e.cardRootNode.parentNode),e.editor.execCommand("copy",t)?vC.success(sc("复制成功")):vC.error(sc("复制失败"))}}},CPe={link:{name:"link",title:sc("链接"),icon:Gu().createElement(SC,{type:"t-link"}),enable:function(e){return!!e.cardData.getLink()},execute:function(e){var t=e.cardData.isOpenLinkInSelf(),n=e.cardData.getLink();n&&e.viewer.emitEvent("visitLink",n,!t)}}};function NPe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,OPe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function OPe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(OPe=function(){return!!e})()}var xPe=function(e){function t(e,n,r){var o;return(0,Ke.A)(this,t),o=NPe(this,t),Object.defineProperty(o,"upload",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(o,"type",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(o,"data",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(o,"_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_resourceURL",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_file",{enumerable:!0,configurable:!0,writable:!0,value:null}),o._id=Dr(),"url"===n?o._resourceURL=r:"file"===n?o._file=r:"base64"===n&&(o._file=rd(r)),o}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getResourceURL",value:function(){return!this._resourceURL&&this._file&&(this._resourceURL=URL.createObjectURL(this._file)),this._resourceURL}},{key:"destroy",value:function(){this._resourceURL&&URL.revokeObjectURL(this._resourceURL)}},{key:"run",value:function(){return function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,Cc().mark((function e(){var t=this;return Cc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.emit(kte.EVENT_START),e.next=3,this.upload({type:this.type,data:this.data}).then((function(e){return t.emit(kte.EVENT_SUCCESS,e),e}),(function(e){t.emit(kte.EVENT_ERROR,e)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"abort",value:function(){}}])}(kte);function EPe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,DPe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function DPe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(DPe=function(){return!!e})()}var PPe={createUploadTask:null,createUploadPromise:null,uploadFileURL:null,crawlURL:null,ratio:1,ocr:!1,capturePatterns:[/[\s\S]*?/],excludeCapturePatterns:[],isCaptureImageURL:function(e,t,n){return!n.some((function(t){return jPe(e,t)}))&&!!t.some((function(t){return jPe(e,t)}))},onBeforeRenderImage:function(e){return e},accept:null,enableAccept:!0,resizeHostWhiteList:void 0,resizeThreshold:131072,lazyLoad:!1,allowClickToMaximize:!0,needAverageHue:!1,supportImgOCR:!0,showMiniToolbarWhen:"hover",innerButtonWidgets:[],useOriginSrc:function(){return!1}},RPe=Object.assign(Object.assign({},PPe),{innerButtonWidgets:[_Pe.link,_Pe.delete,_Pe.copy]}),SPe=Object.assign(Object.assign({},PPe),{innerButtonWidgets:[CPe.link]}),TPe=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=EPe(this,t),Object.defineProperty(n,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"toolbarOffset",{enumerable:!0,configurable:!0,writable:!0,value:4}),n._option=Object.assign({},RPe,e),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"ratio",get:function(){return this._option.ratio||1}},{key:"resizeThreshold",get:function(){return this._option.resizeThreshold}},{key:"resizeHostWhiteList",get:function(){return this._option.resizeHostWhiteList}},{key:"customFileSelector",get:function(){return this._option.customFileSelector}},{key:"lazyLoad",get:function(){return this._option.lazyLoad}},{key:"allowClickToMaximize",get:function(){return this._option.allowClickToMaximize}},{key:"showMiniToolbarWhen",get:function(){return this._option.showMiniToolbarWhen}},{key:"needAverageHue",get:function(){return!!this._option.needAverageHue}},{key:"needInterlace",get:function(){return!!this._option.needInterlace}},{key:"supportImgOCR",get:function(){return!!this._option.supportImgOCR}},{key:"failConfig",get:function(){return this._option.failConfig}},{key:"editUI",get:function(){return this._option.editUI}},{key:"viewerUI",get:function(){return this._option.viewerUI}},{key:"innerButtonWidgets",get:function(){return this._option.innerButtonWidgets}},{key:"useOriginSrc",value:function(e){return!!this._option.useOriginSrc(e)}},{key:"isEnableAccept",value:function(){return this._option.enableAccept}},{key:"createUploadTask",value:function(e,t){var n=this._option,r=n.uploadFileURL,o=n.crawlURL,i=n.createUploadTask,a=n.createUploadPromise;if(bt(r||i||a,"plugins/image/src/common/image-option.ts:165"),a)return new xPe(a,e,t);for(var l=arguments.length,u=new Array(l>2?l-2:0),c=2;c<l;c++)u[c-2]=arguments[c];if(i){var s=i({type:e,data:t,option:this._option,args:u});if(s)return s}var d="function"==typeof r?r():r;if(bt(d,"plugins/image/src/common/image-option.ts:181"),"file"===e)return new gPe(d,t);if("base64"===e)return new pPe(d,t);bt("url"===e&&o,"plugins/image/src/common/image-option.ts:197");var f="function"==typeof o?o():o;return bt(f,"plugins/image/src/common/image-option.ts:202"),vl(kPe,[d,f,t].concat(u))}},{key:"isShowOcr",value:function(){return this._option.ocr}},{key:"isCaptureImageURL",value:function(e){var t=this._option;return(0,t.isCaptureImageURL)(e,t.capturePatterns,t.excludeCapturePatterns)}},{key:"onBeforeRenderImage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._option.onBeforeRenderImage(e,t)}},{key:"accept",get:function(){return this._option.accept}}])}(it);function jPe(e,t){return"function"==typeof t?t(e):t.test(e)}Object.defineProperty(TPe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"image"});var IPe=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=EPe(this,t,[e]),Object.defineProperty(r,"kernelOption",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(r,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r._option=Object.assign({},SPe,e),r}return(0,Xe.A)(t,e),(0,$e.A)(t)}(TPe);function BPe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,MPe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function MPe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(MPe=function(){return!!e})()}Object.defineProperty(IPe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"image"});var FPe=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=BPe(this,t),Object.defineProperty(n,"_url",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(n,"_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n._id=Dr(),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getResourceURL",value:function(){return this._url}},{key:"run",value:function(){return function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,Cc().mark((function e(){return Cc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.emit(kte.EVENT_SUCCESS,{url:this._url});case 1:case"end":return e.stop()}}),e,this)})))}}])}(kte),LPe=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"uploadImageByFile",value:function(e,t){var n=e.option.image,r=e.requireService(sDe.ID),o=e.requireService(oDe.ID);return t.map((function(e){var t=n.createUploadTask("file",e);return r.putImageUploadData(t,{type:lDe,file:e}),o.uploadManager.addTask(t),t}))}},{key:"uploadImageByBase64",value:function(e,t){var n=e.option.image.createUploadTask("base64",t),r=e.requireService(sDe.ID),o=e.requireService(oDe.ID);return r.putImageUploadData(n,{type:cDe,content:t}),o.uploadManager.addTask(n),n}},{key:"uploadImageByURL",value:function(e,t,n){var r=e.option.image.createUploadTask("url",t,n),o=e.requireService(sDe.ID),i=e.requireService(oDe.ID);return o.putImageUploadData(r,{type:uDe,url:t}),i.uploadManager.addTask(r),r}},{key:"emptyTask",value:function(e,t){var n=new FPe(t),r=e.requireService(sDe.ID),o=e.requireService(oDe.ID);return r.putImageUploadData(n,{type:uDe,url:t}),o.uploadManager.addTask(n),n}}])}(),UPe=(0,$e.A)((function e(){(0,Ke.A)(this,e)}));function VPe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,HPe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function HPe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(HPe=function(){return!!e})()}var zPe=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=VPe(this,t),Object.defineProperty(n,"editor",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"preReadFile",value:function(e,t,n){if((null==n?void 0:n.from)!==LT||"image"===(null==n?void 0:n.category)){if(!e.checkFileSize(sM.image,t.file.size))return!1;var r=LPe.uploadImageByFile(this.editor,[t.file]),o=(0,tn.A)(r,1)[0];return t._$neUploadTaskId=o.id,!1}}}])}(UPe);function WPe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,qPe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function qPe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qPe=function(){return!!e})()}var $Pe=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=WPe(this,t),Object.defineProperty(n,"_plugin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n._plugin=e,n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"readNode",value:function(e,t){var n=(t.attrs||{}).src,r=this._plugin.uploadImageByURL(n);r&&(r.taskId?t.attrs=Object.assign(Object.assign({},t.attrs),{_$neUploadTaskId:r.taskId}):(bt(r.url,"plugins/image/src/editor/pre-readers/image-pre-html-node-reader.ts:33"),t.attrs=Object.assign(Object.assign({},t.attrs),{_$neImageSrc:r.url})))}}])}(h0);Object.defineProperty($Pe,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["img"]});var KPe=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"read",value:function(e,t){return!0}}])}();function YPe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,GPe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function GPe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(GPe=function(){return!!e})()}var JPe=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=YPe(this,t),Object.defineProperty(n,"_plugin",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t){var n,r,o;if(e.from===MT){var i=((null===(n=t.attrs)||void 0===n?void 0:n.value)||{}).src,a=this._plugin.uploadImageByURL(i,!0);if(!a)return!1;if(t.attrs||(t.attrs={}),a.taskId)return t.attrs.value.taskId=a.taskId,t.attrs.value.status=ST.UPLOADING,t.attrs.value.clientId=this._plugin.kernel.id,void(null===(o=null===(r=t.attrs)||void 0===r?void 0:r.value)||void 0===o||delete o.src);bt(a.url,"plugins/image/src/editor/pre-readers/inode-image-card-pre-reader.ts:50"),t.attrs.value.src=a.url}}}])}(KPe);function XPe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,QPe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function QPe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(QPe=function(){return!!e})()}Object.defineProperty(JPe,"CardName",{enumerable:!0,configurable:!0,writable:!0,value:"image"});var ZPe=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=XPe(this,t),Object.defineProperty(n,"_plugin",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t,n){if(e.from===MT){var r=(n||{}).src,o=this._plugin.uploadImageByURL(r,!0);if(!o)return!1;if(o.taskId)return n.taskId=o.taskId,n.clientId=this._plugin.kernel.id,n.status=HT,void delete n.src;bt(o.url,"plugins/image/src/editor/pre-readers/lake-image-card-pre-reader.ts:39"),n.src=o.url}}}])}(iI);function eRe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,tRe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function tRe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(tRe=function(){return!!e})()}Object.defineProperty(ZPe,"CardName",{enumerable:!0,configurable:!0,writable:!0,value:"image"});var nRe=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=eRe(this,t),Object.defineProperty(n,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t){var n=(t.attrs||{}).src;if("string"!=typeof n)return!1;var r=this.plugin.uploadImageByURL(n);return!!r&&(r.taskId?(t.attrs=Object.assign(Object.assign({},t.attrs),{_$neUploadTaskId:r.taskId}),!0):(bt(r.url,"plugins/image/src/editor/pre-readers/legacy-image-pre-lake-node-reader.ts:36"),t.attrs=Object.assign(Object.assign({},t.attrs),{_$neImageSrc:r.url}),!0))}}])}(aI);function rRe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,oRe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function oRe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(oRe=function(){return!!e})()}Object.defineProperty(nRe,"NodeName",{enumerable:!0,configurable:!0,writable:!0,value:"img"});var iRe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=rRe(this,t,arguments),Object.defineProperty(e,"_intersectionObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"uploadService",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){var n,r=this;this.uploadService=e.kernel.requireService(Qj.ID),t.registerInlineCard(this,QT.cardName,{factory:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return vl(dPe,[e].concat(n))}});var o=e.kernel.getService(wS.ID);null==o||o.registerPreHTMLNodeReader($Pe.NodeNames,new $Pe(this));var i=e.kernel.getService(ET.ID);null==i||i.registerPreFileReader(this.uploadService.getFileAcceptUtil().getImageFileAccept(this.option.accept),new zPe(e));var a=e.kernel.getService(_S.ID);null==a||a.registerLakeCardPreReader(ZPe.CardName,new ZPe(this)),null==a||a.registerLakeNodePreReader(nRe.NodeName,new nRe(this));var l=e.kernel.getService(W$.ID);null==l||l.registerINodeCardPreReader(JPe.CardName,new JPe(this)),null===(n=e.getService(xEe.ID))||void 0===n||n.registerCardSelect(QT.cardSelect,{type:this.option.customFileSelector?"LikeFileItem":"FileItem",icon:"editor-main-image",label:sc("图片"),mainSearch:"/tp",multiple:!0,accept:this.getAccept(),keywords:"图片,tp,tupian,image,img,photo,picture",description:""});var u=e.getService(jEe.ID);u&&(this.option.customFileSelector?null==u||u.registerToolbarWidget((0,Ha.A)((0,Ha.A)((0,Ha.A)({},QT.toolbar.image,{clazz:zEe,pluginContext:this}),QT.toolbar.noteImage,{clazz:tDe,pluginContext:this}),QT.toolbar.noteImageBlack,{clazz:GEe,pluginContext:this})):null==u||u.registerToolbarWidget((0,Ha.A)((0,Ha.A)((0,Ha.A)({},QT.toolbar.image,{clazz:UEe,pluginContext:this}),QT.toolbar.noteImage,{clazz:QEe,pluginContext:this}),QT.toolbar.noteImageBlack,{clazz:$Ee,pluginContext:this}))),this.kernel.hasExtendMethod("setUploadImageByURLHandler")&&this.kernel.setUploadImageByURLHandler((function(e){return r.uploadImageByURL(e)}))}},{key:"intersectionObserver",get:function(){return this._intersectionObserver||(this._intersectionObserver=As((function(){}),{rootMargin:"1000px 0px"})),this._intersectionObserver}},{key:"getAccept",value:function(){var e,t=null===(e=this.uploadService)||void 0===e?void 0:e.getFileAcceptUtil();return this.option.isEnableAccept()&&t?t.getImageFileAccept(this.option.accept):"image/*"}},{key:"uploadImageByURL",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?this.option.useOriginSrc(e)?{taskId:LPe.emptyTask(this.editor,e).id}:yh.isBase64ImageURL(e)?{taskId:LPe.uploadImageByBase64(this.editor,e).id}:yh.isFullHttpURL(e)?this.option.isCaptureImageURL(e)?{taskId:LPe.uploadImageByURL(this.editor,e,t).id}:{url:e}:null:null}},{key:"sync",value:function(){return 0===this.cardNodes.filter((function(e){return!1===e.sync()})).length}}])}(Fh);function aRe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,lRe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function lRe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(lRe=function(){return!!e})()}Object.defineProperty(iRe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:QT.pluginName}),Object.defineProperty(iRe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:TPe}),Object.defineProperty(iRe,"Service",{enumerable:!0,configurable:!0,writable:!0,value:hDe});var uRe={left:"t-alignment-left",center:"t-alignment-center",right:"t-alignment-right",justify:"t-alignment-justify"};function cRe(e){return[CEe.alignmentLeft,CEe.alignmentCenter,CEe.alignmentRight,CEe.alignmentJustify].map((function(t){return Object.assign(Object.assign({},t),{icon:uRe[t.value],tooltip:MEe.getTooltip(e,t.text,t.name)})}))}var sRe=function(e){function t(){return(0,Ke.A)(this,t),aRe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"onEvent",value:function(e,t){bt("select"===e,"plugins/alignment/src/editor/alignment-toolbar-descriptor.ts:35"),this.editor.execCommand(rB.command.alignment,t)}},{key:"getInitUIState",value:function(){return{disabled:this.disabled,value:"left",icon:"t-alignment-left",className:"ne-ui-toolbar-h-align",dropdownClassName:"ne-ui-toolbar-h-align-dropdown ".concat(this.editor.theme.getThemeSelector()),items:cRe(this.editor),tooltip:MEe.getTooltip(this.editor,sc("对齐方式"))}}},{key:"getUIState",value:function(){var e=this.editor;if(this.disabled||e.queryCommandState(rB.command.alignment)===st)return{disabled:!0};var t=e.queryCommandValue(rB.command.alignment),n=null;return t&&0!==t.length?1===t.length&&(n=t[0]||"left"):n="left",{disabled:!1,value:n,icon:uRe[n],dropdownClassName:"ne-ui-toolbar-h-align-dropdown ".concat(this.editor.theme.getThemeSelector())}}}])}(MEe);function dRe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,fRe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function fRe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(fRe=function(){return!!e})()}Object.defineProperty(sRe,"Type",{enumerable:!0,configurable:!0,writable:!0,value:"InlineContentDropdownButton"});var hRe=function(e){function t(){return(0,Ke.A)(this,t),dRe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=e.getService(jEe.ID);null==t||t.registerToolbarWidget(rB.toolbar.alignment,sRe)}}])}(Fh);function pRe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,vRe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function vRe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vRe=function(){return!!e})()}Object.defineProperty(hRe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:rB.pluginName});var mRe=function(e){function t(){return(0,Ke.A)(this,t),pRe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"onEvent",value:function(e){bt("change"===e,"plugins/basic-text-style/src/editor/basic-text-style-toolbar-descriptor.ts:9"),this.editor.execCommand(this.name)}},{key:"getInitUIState",value:function(){var e={bold:sc("粗体"),italic:sc("斜体"),underline:sc("下划线"),strikethrough:sc("删除线")};return{disabled:this.disabled,checked:!1,icon:"t-".concat(this.name),tooltip:MEe.getTooltip(this.editor,e[this.name],this.name)}}},{key:"getUIState",value:function(){var e=this.editor,t=this.name;return{disabled:this.disabled||!e.queryCommandEnabled(t),checked:1===e.queryCommandState(t)}}}])}(MEe);function gRe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,bRe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function bRe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bRe=function(){return!!e})()}Object.defineProperty(mRe,"Type",{enumerable:!0,configurable:!0,writable:!0,value:"StatusButton"});var yRe=function(e){function t(){return(0,Ke.A)(this,t),gRe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=e.getService(jEe.ID);null==t||t.registerToolbarWidget((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)({},OB.toolbar.bold,mRe),OB.toolbar.strikethrough,mRe),OB.toolbar.italic,mRe),OB.toolbar.underline,mRe))}}])}(Fh);function wRe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,ARe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function ARe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ARe=function(){return!!e})()}Object.defineProperty(yRe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:OB.pluginName});var kRe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=wRe(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Yy);Object.defineProperty(kRe,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze("IHotKeyRendererService")});var _Re=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:t})}),[{key:"getColor",value:function(){return this.color}},{key:"setColor",value:function(e){this.color=e}}])}();function CRe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,NRe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function NRe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(NRe=function(){return!!e})()}var ORe="transparent",xRe=function(e){function t(){return(0,Ke.A)(this,t),CRe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"onEvent",value:function(e,t){var n=this.editor.theme.toPersistentValue(t);switch(e){case"select":this.pluginContext.setColor(n),n!==ORe&&n&&n!==this.editor.kernel.queryCommandValue(FM.command.bgColor)?this.editor.kernel.execCommand(FM.command.bgColor,n):this.editor.kernel.execCommand(FM.command.clearBgColor);break;case"saveColor":this.editor.hasExtendMethod("updateUserColor")&&this.editor.updateUserColor(n);break;default:bt(!1,"plugins/bg-color/src/editor/bg-color-toolbar-descriptor.ts:50")}}},{key:"getInitUIState",value:function(){return{disabled:this.disabled,className:"ne-ui-toolbar-bg-color",defaultColor:ORe,themeName:this.editor.theme.getSchemeName(),color:this.editor.theme.toVisualValue(this.pluginContext.getColor()),userColors:[],icon:"t-bg-color",tooltip:MEe.getTooltip(this.editor,sc("背景颜色"),this.name)}}},{key:"getUIState",value:function(){var e=this.editor,t=this.name,n=[];this.editor.hasExtendMethod("getUserColors")&&(n=this.editor.getUserColors().map((function(t){return e.theme.toVisualValue(t)})));var r=e.queryCommandValue(FM.command.bgColor),o=e.theme.toVisualValue(this.pluginContext.getColor());return{disabled:this.disabled||!e.queryCommandEnabled(t),userColors:n,themeName:e.theme.getSchemeName(),activeColors:r?[this.editor.theme.toVisualValue(r)]:[],color:o}}}])}(MEe);function ERe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,DRe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function DRe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(DRe=function(){return!!e})()}Object.defineProperty(xRe,"Type",{enumerable:!0,configurable:!0,writable:!0,value:"ColorPickerButton"});var PRe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=ERe(this,t,arguments),Object.defineProperty(e,"_pluginContext",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this,n=e.theme.getColorByToken("editor.bgColor.default");this._pluginContext=new _Re(e.theme.toPersistentValue(n));var r=e.getService(jEe.ID);null==r||r.registerToolbarWidget(FM.toolbar.bgColor,{clazz:xRe,pluginContext:this._pluginContext});var o=this.renderer,i=this.kernel,a=o.getService(kRe.ID);a&&a.registerHotKey(CEe.bgColor.name,CEe.bgColor.keys,(function(e){e.stop(),i.queryCommandValue(FM.command.bgColor)?i.execCommand(FM.command.clearBgColor,null):i.execCommand(FM.command.bgColor,t._pluginContext.getColor())}))}}])}(Fh);function RRe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,SRe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function SRe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(SRe=function(){return!!e})()}Object.defineProperty(PRe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:FM.pluginName}),Object.defineProperty(PRe,"Colors",{enumerable:!0,configurable:!0,writable:!0,value:{"editor.bgColor.default":{light:"#FBDE28",dark:"#C2AC19"}}});var TRe=function(e){function t(){return(0,Ke.A)(this,t),RRe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"onEvent",value:function(e,t){bt("click"===e,"plugins/clear-format/src/editor/clear-format-toolbar-descriptor.ts:15"),this.editor.execCommand(VF.command.clearFormat)}},{key:"getInitUIState",value:function(){return{disabled:this.disabled,icon:"editor-clear-format",className:"ne-ui-toolbar-clear-format",tooltip:MEe.getTooltip(this.editor,sc("清除格式"),this.name)}}},{key:"getUIState",value:function(){var e=this.editor;return{disabled:this.disabled||!e.queryCommandEnabled(VF.command.clearFormat)}}}])}(MEe);function jRe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,IRe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function IRe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(IRe=function(){return!!e})()}Object.defineProperty(TRe,"Type",{enumerable:!0,configurable:!0,writable:!0,value:"Button"});var BRe=function(e){function t(){return(0,Ke.A)(this,t),jRe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t,n){var r=e.getService(jEe.ID);null==r||r.registerToolbarWidget(VF.toolbar.clearFormat,TRe)}}])}(Fh);function MRe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,FRe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function FRe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(FRe=function(){return!!e})()}Object.defineProperty(BRe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:VF.pluginName});var LRe=function(e){function t(){return(0,Ke.A)(this,t),MRe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t,n){var r;e.onPluginEvent("insertCardByUI:".concat(hL.cardName),(function(){t.execCommand("code")})),null===(r=e.getService(xEe.ID))||void 0===r||r.registerCardSelect(hL.cardSelect,Object.assign(Object.assign({},CEe.code),{label:CEe.code.text,type:"TextItem",icon:"t-code",mainIcon:"editor-main-inline-code",mainSearch:"/hndm"}))}}])}(Fh);Object.defineProperty(LRe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:hL.pluginName});var URe=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:t})}),[{key:"getColor",value:function(){return this.color}},{key:"setColor",value:function(e){this.color=e}}])}();function VRe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,HRe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function HRe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(HRe=function(){return!!e})()}var zRe=function(e){function t(){return(0,Ke.A)(this,t),VRe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"onEvent",value:function(e,t){var n=XU(t,this.editor.theme),r=this._getDefaultVisualColor();switch(e){case"select":(function(e){return void 0!==GU(e)[1]})(t)&&this.editor.emitEvent("userAction",{type:"cardToolbar",name:"gradient",source:"color-".concat(n)}),this.pluginContext.setColor(n),t===r?this.editor.execCommand("clearColor"):this.editor.execCommand("color",n);break;case"saveColor":this.editor.hasExtendMethod("updateUserColor")&&this.editor.updateUserColor(n);break;default:bt(!1,"plugins/color/src/editor/color-toolbar-descriptor.ts:48")}}},{key:"getInitUIState",value:function(){var e=this._getDefaultVisualColor();return{disabled:this.disabled,className:"ne-ui-toolbar-color",icon:"t-font-color",defaultColor:this._getDefaultVisualColor(),userColors:[],color:JU(this.pluginContext.getColor(),this.editor.theme)||e,themeName:this.editor.theme.getSchemeName(),themeSelector:this.editor.theme.getThemeSelector(),tooltip:MEe.getTooltip(this.editor,sc("字体颜色"),this.name)}}},{key:"getUIState",value:function(){var e=this.editor,t=this.name,n=this._getDefaultVisualColor(),r=[];this.editor.hasExtendMethod("getUserColors")&&(r=this.editor.getUserColors().map((function(t){return e.theme.toVisualValue(t)})));var o=JU(e.queryCommandValue("color"),this.editor.theme)||n,i=JU(this.pluginContext.getColor(),this.editor.theme)||n;return{disabled:this.disabled||!e.queryCommandEnabled(t),themeName:this.editor.theme.getSchemeName(),themeSelector:this.editor.theme.getThemeSelector(),defaultColor:n,userColors:r,activeColors:[o],color:i}}},{key:"_getDefaultVisualColor",value:function(){return this.editor.theme.getColorByToken("editor.text.color")}}])}(MEe);function WRe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,qRe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function qRe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qRe=function(){return!!e})()}Object.defineProperty(zRe,"Type",{enumerable:!0,configurable:!0,writable:!0,value:"ColorPickerButton"});var $Re=function(e){function t(){var e;return(0,Ke.A)(this,t),e=WRe(this,t,arguments),Object.defineProperty(e,"_pluginContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t,n=this,r=e.getService(jEe.ID);if(r){var o=e.theme.getColorByToken("editor.color.default");this._pluginContext=new URe(e.theme.toPersistentValue(o)),null==r||r.registerToolbarWidget(jU.toolbar.color,{clazz:zRe,pluginContext:this._pluginContext})}null===(t=e.renderer.getService(kRe.ID))||void 0===t||t.registerHotKey(CEe.color.name,CEe.color.keys,(function(t){t.stop(),e.kernel.execCommand(jU.command.color,n._pluginContext.getColor())}))}}])}(Fh);Object.defineProperty($Re,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:jU.pluginName}),Object.defineProperty($Re,"Colors",{enumerable:!0,configurable:!0,writable:!0,value:{"editor.color.default":{light:"#DF2A3F",dark:"#CA3F4F"}}});var KRe=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0});var n={mainTipHTML:sc("该卡片暂时无法显示"),subTipHTML:sc("请刷新页面后再试")};this._option=Object.assign(Object.assign({},n),t)}),[{key:"getMainTip",value:function(){return this._option.mainTipHTML||""}},{key:"getSubTip",value:function(){return this._option.subTipHTML||""}}])}();function YRe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,GRe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function GRe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(GRe=function(){return!!e})()}Object.defineProperty(KRe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"fallbackCard"});var JRe=function(e){function t(e){var n;(0,Ke.A)(this,t);for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return n=YRe(this,t,[].concat(o)),Object.defineProperty(n,"editor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n.editor=e,n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e=this;lEe(this.cardRootNode,(function(t,n,r){e.editor.emitEvent("visitLink",n,r)})),this.cardRootNode.innerHTML='\n    <div class="ne-fallback-block-card">\n      <div class="inner-content">\n        <img src="'.concat(t.imgResource,'" class="ne-fallback-img">\n        <div class="inner-tips">\n          <div class="main-tip">').concat(this.pluginOption.getMainTip(),'</div>\n          <div class="sub-tip">').concat(this.pluginOption.getSubTip(),"</div>\n        </div>\n      </div>\n    </div>\n  ")}}])}(Fy);function XRe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,QRe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function QRe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(QRe=function(){return!!e})()}Object.defineProperty(JRe,"imgResource",{enumerable:!0,configurable:!0,writable:!0,value:"https://gw.alipayobjects.com/zos/bmw-prod/dc01c10b-e433-4bb3-bf7e-8b679725b823.svg"});var ZRe=function(e){function t(e){var n;(0,Ke.A)(this,t);for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return n=XRe(this,t,[].concat(o)),Object.defineProperty(n,"editor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n.editor=e,n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e=this;lEe(this.cardRootNode,(function(t,n,r){e.editor.emitEvent("visitLink",n,r)})),this.cardRootNode.innerHTML='\n      <div class="ne-fallback-inline-card">\n        <div class="inner-content">\n          <img src="'.concat(t.imgResource,'" class="ne-fallback-img">\n          <div class="inner-tips">\n            <div class="main-tip">').concat(this.pluginOption.getMainTip(),'</div>\n            <div class="sub-tip">\n              <div class="sub-tip-content">').concat(this.pluginOption.getSubTip(),"</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    ").replace(/\s*\n+\s*/g,"")}}])}(My);function eSe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,tSe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function tSe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(tSe=function(){return!!e})()}Object.defineProperty(ZRe,"imgResource",{enumerable:!0,configurable:!0,writable:!0,value:"https://gw.alipayobjects.com/zos/bmw-prod/1a587ec9-10ac-4204-96f4-f259c5f6c2c7.svg"});var nSe=function(e){function t(){return(0,Ke.A)(this,t),eSe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t,n){t.registerBlockCard(this,"block",{factory:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return vl(JRe,[e].concat(n))}}),t.registerInlineCard(this,"inline",{factory:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return vl(ZRe,[e].concat(n))}})}}])}(Fh);function rSe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,oSe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function oSe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(oSe=function(){return!!e})()}Object.defineProperty(nSe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:AH.pluginName}),Object.defineProperty(nSe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:KRe});var iSe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=rSe(this,t,arguments),Object.defineProperty(e,"getClassName",{enumerable:!0,configurable:!0,writable:!0,value:Xs(e.props.className)}),Object.defineProperty(e,"handleDownloadFile",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.props.downloadFile()}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){var e=this,t=this.props.getPreviewUrl(),n=this.props.getDownloadUrl(),r=this.props,o=r.allowPreview,i=r.allowDownload;return Gu().createElement("div",{className:this.getClassName("op")},t&&o&&Gu().createElement(Qx,{trigger:"hover",title:sc("预览"),overlayStyle:{maxWidth:500}},Gu().createElement("a",{href:yh.sanitizeUrl(t),target:"_blank","data-testid":"ne-card-local-doc-btn-preview",className:this.getClassName("op-preview"),onClick:function(t){t.preventDefault(),e.props.onPreview()}},Gu().createElement(SC,{type:"toc-eye"}))),n&&i&&Gu().createElement(Qx,{trigger:"hover",title:sc("下载")},Gu().createElement("span",{"data-testid":"ne-card-local-doc-btn-download",className:this.getClassName("op-download"),onClick:this.handleDownloadFile},Gu().createElement(SC,{type:"download"}))))}}])}(Yu.Component);function aSe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,lSe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function lSe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(lSe=function(){return!!e})()}var uSe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=aSe(this,t,arguments),Object.defineProperty(e,"getClassName",{enumerable:!0,configurable:!0,writable:!0,value:Xs("ne-card-local-doc")}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){var e=this,t=this.props.cardData.getName(),n=Dh(this.props.cardData.getSize()),r=this.props.getPreviewUrl(),o=this.props.getExtIcon(this.props.cardData);return Gu().createElement("div",{className:this.getClassName("collapse"),"data-testid":this.getClassName("status-collapse")},Gu().createElement("div",{className:this.getClassName("collapse-icon")},Gu().createElement(SC,{type:"ext-".concat(o),size:24})),Gu().createElement("div",{className:this.getClassName("collapse-content")},Gu().createElement("div",{className:this.getClassName("collapse-content-name")},Gu().createElement(Qx,{overlayClassName:this.getClassName("collapse-tooltip"),title:this.props.tooltip||null},this.props.allowPreview&&r?Gu().createElement("a",{href:yh.sanitizeUrl(r),target:"_blank","data-testid":this.getClassName("title"),onClick:function(t){t.preventDefault(),e.props.onPreview()}},t):Gu().createElement("span",{"data-testid":this.getClassName("title"),className:this.props.allowDownload?"":"disable-name"},t))),Gu().createElement("div",{className:this.getClassName("collapse-content-size")},"(",n,")")),Gu().createElement(iSe,{className:this.getClassName("collapse"),getPreviewUrl:this.props.getPreviewUrl,getDownloadUrl:this.props.getDownloadUrl,downloadFile:this.props.downloadFile,allowDownload:this.props.allowDownload,allowPreview:this.props.allowPreview,onPreview:this.props.onPreview}))}}])}(Yu.Component);function cSe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,sSe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function sSe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(sSe=function(){return!!e})()}function dSe(){}var fSe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=cSe(this,t,arguments),Object.defineProperty(e,"getClassName",{enumerable:!0,configurable:!0,writable:!0,value:Xs("ne-card-local-doc")}),Object.defineProperty(e,"_iframeRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"isIntersecting",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_lastBindFunc",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"observer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"handleObserver",{enumerable:!0,configurable:!0,writable:!0,value:function(t,n){t.forEach((function(t){if(t.isIntersecting){var r=t.target;r.dataset.src&&(r.src=r.dataset.src,n.unobserve(r)),e.isIntersecting=!0}}))}}),Object.defineProperty(e,"handleBeforePrint",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=e._iframeRef.current;t&&!t.src&&t.dataset.src&&(t.src=t.dataset.src)}}),Object.defineProperty(e,"_clear",{enumerable:!0,configurable:!0,writable:!0,value:function(){e._lastBindFunc&&document.body.removeEventListener("click",e._lastBindFunc)}}),Object.defineProperty(e,"_handleMouseEnter",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=t.currentTarget.children[0];n.style.pointerEvents="all";var r=e.props.scrollNode;r&&(r.style.overflow="hidden"),r&&r.dispatchEvent(new Event("scrollChange")),e._clear(),e._lastBindFunc=function(){n.style.pointerEvents="none",r&&(r.style.overflow="auto"),r&&r.dispatchEvent(new Event("scrollChange")),e._clear()},document.body.addEventListener("click",e._lastBindFunc,{once:!0})}}),Object.defineProperty(e,"_handleMouseLeave",{enumerable:!0,configurable:!0,writable:!0,value:function(t){t.currentTarget.children[0].style.pointerEvents="none",e.props.scrollNode&&(e.props.scrollNode.style.overflow="auto"),e.props.scrollNode&&e.props.scrollNode.dispatchEvent(new Event("scrollChange")),e._clear()}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){var e=this._iframeRef.current;e&&(ud(this,document,"mousedown",(function(t){document.activeElement===e&&t.target!==e&&e.blur()}),!0),window.IntersectionObserver?(this.observer=new IntersectionObserver(this.handleObserver,{threshold:.1}),this.observer.observe(e),window.addEventListener("beforeprint",this.handleBeforePrint)):e.src=e.dataset.src||"")}},{key:"componentDidUpdate",value:function(){var e,t=this._iframeRef.current;this.isIntersecting&&t&&!t.src&&t.dataset.src&&(t.src=t.dataset.src,null===(e=this.observer)||void 0===e||e.unobserve(t))}},{key:"componentWillUnmount",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),window.removeEventListener("beforeprint",this.handleBeforePrint)}},{key:"render",value:function(){var e=this,t=this.props.cardData.getName(),n=this.props.getExtIcon(this.props.cardData),r=this.props.getPreviewUrl(),o="";this.props.renderIFrameUrl&&(o=this.props.getIFrameUrl());var i=!0;return"xls"!==n&&"xlsx"!==n||(i=!1),Gu().createElement("div",{className:this.getClassName("expand"),"data-testid":this.getClassName("status-expand")},Gu().createElement("div",{className:this.getClassName("expand-header",i?"expand-header-border":"")},Gu().createElement("div",{className:this.getClassName("expand-header-icon")},Gu().createElement(SC,{type:"ext-".concat(n),size:16})),Gu().createElement("div",{className:this.getClassName("expand-header-title")},Gu().createElement(Qx,{overlayClassName:this.getClassName("expand-tooltip"),title:this.props.tooltip||null},r&&this.props.allowPreview?Gu().createElement("a",{href:yh.sanitizeUrl(r),target:"_blank","data-testid":this.getClassName("title"),onClick:function(t){t.preventDefault(),e.props.onPreview()}},t):Gu().createElement("span",{"data-testid":this.getClassName("title"),className:this.props.allowDownload?"":"disable-name"},t)),this.props.headerNode),Gu().createElement(iSe,{className:this.getClassName("expand-header"),getPreviewUrl:this.props.getPreviewUrl,getDownloadUrl:this.props.getDownloadUrl,downloadFile:this.props.downloadFile,allowDownload:this.props.allowDownload,allowPreview:this.props.allowPreview,onPreview:this.props.onPreview})),Gu().createElement("div",{onMouseEnter:i?dSe:this._handleMouseEnter,onMouseLeave:i?dSe:this._handleMouseLeave,className:this.getClassName("expand-content")},Gu().createElement("iframe",{ref:this._iframeRef,style:{pointerEvents:i?"all":"none"},frameBorder:0,allowFullScreen:!0,"data-src":this._convertUrl(o)}),this.props.contentNode))}},{key:"_convertUrl",value:function(e){var t=yh.sanitizeUrl(e);if(!t)return t;var n=new URL(t);return n.searchParams.append(eM.IFRAME_QUERY_FLAG,"1"),n.toString()}}])}(Yu.Component);function hSe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,pSe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function pSe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pSe=function(){return!!e})()}var vSe=function(e){function t(){return(0,Ke.A)(this,t),hSe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){var e=this.props.cardData.getName(),t=this.props.cardData.getMessage()||sc("文件上传失败，请重试"),n=this.props.cardData.getCardValue();return Gu().createElement(J_e,{block:!0,message:n,cardIcon:Gu().createElement(SC,{type:"upload-error",size:20})},t," ",e)}}])}(Yu.Component);function mSe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,gSe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function gSe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(gSe=function(){return!!e})()}var bSe=function(e){function t(e){var n;(0,Ke.A)(this,t),n=mSe(this,t,[e]),Object.defineProperty(n,"asyncTask",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"getClassName",{enumerable:!0,configurable:!0,writable:!0,value:Xs("ne-card-local-doc")}),Object.defineProperty(n,"handleUploadStart",{enumerable:!0,configurable:!0,writable:!0,value:function(){n.setState({percent:0}),n.props.onTaskStart()}}),Object.defineProperty(n,"handleUploadError",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n.props.onTaskError(e)}}),Object.defineProperty(n,"handleUploadSuccess",{enumerable:!0,configurable:!0,writable:!0,value:function(e){setTimeout((function(){n.setState({renderIFrameUrl:!0})}),n.props.previewDelayTime),n.props.onTaskSuccess(e)}}),Object.defineProperty(n,"handleUploadProgress",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n.setState({percent:e}),n.props.onTaskProgress()}}),Object.defineProperty(n,"renderCardView",{enumerable:!0,configurable:!0,writable:!0,value:function(){return Gu().createElement(uSe,{cardData:n.props.cardData,getPreviewUrl:n.props.getPreviewUrl,getDownloadUrl:n.props.getDownloadUrl,downloadFile:n.props.downloadFile,onPreview:n.props.onPreview,allowDownload:!0,allowPreview:!0,getExtIcon:n.props.getExtIcon})}}),Object.defineProperty(n,"renderUploadingTips",{enumerable:!0,configurable:!0,writable:!0,value:function(){if(n.props.cardData.getStatus()===zH.Uploading){var e=n.state.percent;return Gu().createElement("span",{className:n.getClassName("expand-header-title-loading")},sc("上传中")," ",e?"".concat(e,"%"):"")}return null}}),Object.defineProperty(n,"renderEmbedView",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=n.props.cardData.getStatus(),t=null;return(e===zH.Uploading||e===zH.Pending)&&(t=Gu().createElement("div",{className:n.getClassName("expand-content-loading")},Gu().createElement(SC,{type:"loading",size:36,className:n.getClassName("expand-content-loading-icon")}))),Gu().createElement(fSe,{scrollNode:n.props.scrollNode,cardData:n.props.cardData,headerNode:n.renderUploadingTips(),contentNode:t,renderIFrameUrl:n.state.renderIFrameUrl,getPreviewUrl:n.props.getPreviewUrl,getDownloadUrl:n.props.getDownloadUrl,getIFrameUrl:n.props.getIFrameUrl,downloadFile:n.props.downloadFile,onPreview:n.props.onPreview,allowDownload:!0,allowPreview:!0,getExtIcon:n.props.getExtIcon})}}),Object.defineProperty(n,"renderError",{enumerable:!0,configurable:!0,writable:!0,value:function(){return Gu().createElement(vSe,{cardData:n.props.cardData})}});var r=e.cardData.getTaskId(),o=e.cardData.isCompleted();r&&!o&&(n.asyncTask=e.taskObserver.observe(r));var i=!1;return e.cardData.getStatus()===zH.Done&&(i=!0),n.state={percent:0,renderIFrameUrl:i},n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){this.asyncTask&&(sd(this,this.asyncTask,"start",this.handleUploadStart),sd(this,this.asyncTask,"timeout",this.handleUploadError),sd(this,this.asyncTask,"error",this.handleUploadError),sd(this,this.asyncTask,"success",this.handleUploadSuccess),sd(this,this.asyncTask,"progress",this.handleUploadProgress))}},{key:"componentWillUnmount",value:function(){this.asyncTask&&this.asyncTask.abort&&this.asyncTask.abort()}},{key:"render",value:function(){var e,t=this.props.cardData.getStatus(),n=this.props.cardData.isCardMode();return e=t===zH.Error?this.renderError():n?this.renderCardView():this.renderEmbedView(),Gu().createElement("div",{className:this.getClassName(),"data-testid":this.getClassName()},e)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return!1===t.renderIFrameUrl&&e.cardData.getStatus()===zH.Done?{renderIFrameUrl:!0}:null}}])}(Yu.Component);function ySe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ySe=function(){return!!e})()}function wSe(e){return function(e){function t(){var e;return(0,Ke.A)(this,t),e=function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,ySe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,arguments),Object.defineProperty(e,"uiViewProxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_taskObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"onTaskSuccess",{enumerable:!0,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(e,"getExtIcon",{enumerable:!0,configurable:!0,writable:!0,value:function(){return"default"}}),Object.defineProperty(e,"setIngStatus",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=e.cardData.getTaskType()===WH.Transfer?zH.Transfering:zH.Uploading;e.cardData.getStatus()!==t&&(e.cardData.setStatus(t),e.cardData.afterChange())}}),Object.defineProperty(e,"getFrom",{enumerable:!0,configurable:!0,writable:!0,value:function(){return e.pluginOption.from||e.editor.option.currentURL||("undefined"!=typeof location?location.href:"")}}),Object.defineProperty(e,"getOrigin",{enumerable:!0,configurable:!0,writable:!0,value:function(){return e.pluginOption.origin||("undefined"!=typeof location?location.origin:"")}}),Object.defineProperty(e,"getPreviewUrl",{enumerable:!0,configurable:!0,writable:!0,value:function(){return""}}),Object.defineProperty(e,"getDownloadUrl",{enumerable:!0,configurable:!0,writable:!0,value:function(){return""}}),Object.defineProperty(e,"previewFile",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=e.getPreviewUrl();t&&e.editor.emitEvent("visitLink",yh.sanitizeUrl(t),!0)}}),Object.defineProperty(e,"getIFrameUrl",{enumerable:!0,configurable:!0,writable:!0,value:function(){return""}}),Object.defineProperty(e,"downloadFile",{enumerable:!0,configurable:!0,writable:!0,value:function(){}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var n,r=this;this._taskObserver=e,this.uiViewProxy=Vye.render(bSe,{cardData:this.cardData,taskObserver:this._taskObserver,getPreviewUrl:this.getPreviewUrl,getDownloadUrl:this.getDownloadUrl,getIFrameUrl:this.getIFrameUrl,downloadFile:this.downloadFile,scrollNode:this.editor.scrollNode,previewDelayTime:this.pluginOption.previewDelayTime,defaultHeight:null!==(n=t.defaultHeight)&&void 0!==n?n:void 0,onPreview:this.previewFile,onTaskStart:function(){r.setIngStatus()},onTaskProgress:function(){r.setIngStatus()},onTaskSuccess:function(e){r.emit("uploadSuccess",e),r.onTaskSuccess()},onTaskError:function(e){r.emit("uploadError",e)},getExtIcon:this.getExtIcon},this.containerNode)}},{key:"destroy",value:function(){Gl().unmountComponentAtNode(this.containerNode),this.uiViewProxy=null,Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}}])}(e)}var ASe=wSe;function kSe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,_Se()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function _Se(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_Se=function(){return!!e})()}var CSe=function(e){function t(e){var n;(0,Ke.A)(this,t);for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return n=kSe(this,t,[].concat(o)),Object.defineProperty(n,"editor",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(n,"_ui",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_asyncTask",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"sync",{enumerable:!0,configurable:!0,writable:!0,value:function(){return!n.editor.engine.nodeIsInTree(n.viewNode)||n.cardData.isCompleted()}}),Object.defineProperty(n,"_handleUploadSuccess",{enumerable:!0,configurable:!0,writable:!0,value:Qm()((function(e){n.cardData.setSrc(e.url||""),n.cardData.setStatus(zH.Done),e.size&&n.cardData.setSize(e.size),e.filename&&n.cardData.setName(e.filename),e.extname&&n.cardData.setExt(e.extname),n.cardData.sync(!0)}))}),Object.defineProperty(n,"_handleUploadError",{enumerable:!0,configurable:!0,writable:!0,value:Qm()((function(e){(null==e?void 0:e.message)&&n.cardData.setMessage(e.message),n.cardData.setStatus(zH.Error),n.cardData.sync(!0)}))}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e=this,n=this.editor.getService(oDe.ID);this.pluginOption.editBlockUI&&(t.$EditableCardUI=this.pluginOption.editBlockUI);var r=this.cardData.getTaskType()===WH.Transfer?this.editor.transferObserver:null==n?void 0:n.uploadObserver;this._ui=this.editor.createCardUI(this,r);var o=this.cardData.getTaskId(),i=this.cardData.isCompleted();o&&!i&&(this._asyncTask=r.observe(o),this._asyncTask.on("timeout",(function(){return e._handleUploadError("failed to upload")})),this._asyncTask.on("success",(function(t){return e._handleUploadSuccess(t)})),this._asyncTask.on("error",(function(t){return e._handleUploadError(t)}))),this._ui.on("changeMode",(function(t){t===KH?e.plugin.toTitleMode(e):(e.cardData.setMode(t),e.cardData.sync(!1))})),this._ui.on("uploadSuccess",(function(t){e._handleUploadSuccess(t)})),this._ui.on("uploadError",(function(t){e._handleUploadError(t)}))}},{key:"destroy",value:function(){this._asyncTask&&(this._asyncTask.abort(),this._asyncTask=null),this._ui.destroy(),this._ui=null}}])}(Fy);function NSe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,OSe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function OSe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(OSe=function(){return!!e})()}Object.defineProperty(CSe,"$CardData",{enumerable:!0,configurable:!0,writable:!0,value:ZH}),Object.defineProperty(CSe,"$EditableCardUI",{enumerable:!0,configurable:!0,writable:!0,value:wSe(zh()())});var xSe=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=NSe(this,t),Object.defineProperty(r,"upload",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(r,"_file",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(r,"_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r._id=Dr(),r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"file",get:function(){return this._file}},{key:"run",value:function(){return function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,Cc().mark((function e(){var t,n=this;return Cc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._file,this.emit(kte.EVENT_START,t),e.next=4,this.upload(t).then((function(e){return n.emit(kte.EVENT_SUCCESS,e),e}),(function(e){n.emit(kte.EVENT_ERROR,e)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})))}}])}(kte);function ESe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,DSe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function DSe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(DSe=function(){return!!e})()}var PSe=function(e){function t(e,n,r,o){var i;return(0,Ke.A)(this,t),i=ESe(this,t),Object.defineProperty(i,"_apiURL",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(i,"_file",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(i,"_uploadExtraParams",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(i,"_quickUploadUrl",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(i,"_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_uploadRequest",{enumerable:!0,configurable:!0,writable:!0,value:null}),i._id=Dr(),i}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"file",get:function(){return this._file}},{key:"upload",value:function(e,t,n){var r=this;this._uploadRequest=ns({method:"post",xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",(function(e){e.lengthComputable&&r.emit(kte.EVENT_PROGRESS,kc.toPercentage(e.loaded,e.total))}),!1),e},url:e?_h(this._apiURL,e,"https://localhost"):this._apiURL,data:t,dataType:"json",success:function(e){var t=Object.assign({},e.data);r.emit(kte.EVENT_SUCCESS,t),n({result:t})},error:function(e){e=ts(e),r.emit(kte.EVENT_ERROR,e),n({error:e})},processData:!0})}},{key:"run",value:function(){return function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,Cc().mark((function e(){var t,n,r,o=this;return Cc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._file,n=this._uploadExtraParams,r=new FormData,this.emit(kte.EVENT_START),r.append("file",t,t.name),e.abrupt("return",new Promise((function(e){o.upload(n,r,e)})));case 6:case"end":return e.stop()}}),e,this)})))}},{key:"abort",value:function(){var e,t,n;this._uploadRequest&&(null===(t=(e=this._uploadRequest).abort)||void 0===t||t.call(e),null===(n=this._uploadRequest.xhr)||void 0===n||n.abort())}}])}(kte);function RSe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,SSe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function SSe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(SSe=function(){return!!e})()}var TSe={createUploadTask:null,createUploadPromise:null,getPreviewUrl:null,previewFileHandler:null,getFileDownloadURL:null,canDownload:function(){return!0},canPreview:function(){return!0},downloadFileHandler:null,origin:"",from:"",accept:null,localdocAccept:null,audioAccept:null,videoAccept:null,useMultipart:!1,previewDelayTime:2e3,embedButtonStatus:0,hideEmbedButton:!1,acceptUtil:oz,viewerTooltip:function(){return null}},jSe=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=RSe(this,t),Object.defineProperty(n,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"previewFileHandler",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"downloadFileHandler",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"canDownload",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"canPreview",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"getPreviewUrl",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t=n._option.getPreviewUrl;return t?t(e):e}}),Object.defineProperty(n,"getFileDownloadURL",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t=n._option.getFileDownloadURL;return t?t(e):e}}),n._option=Ww()({},TSe,e),n._option.getPreviewUrl&&(n.getPreviewUrl=n._option.getPreviewUrl),n._option.previewFileHandler&&(n.previewFileHandler=n._option.previewFileHandler),n._option.downloadFileHandler&&(n.downloadFileHandler=n._option.downloadFileHandler),n.canDownload=n._option.canDownload,n.canPreview=n._option.canPreview,n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"createUploadTask",value:function(e){var t=this._option,n=t.createUploadTask,r=t.createUploadPromise,o=t.quickUploadUrl,i=t.uploadFileURL;return r?new xSe(r,e):n?n(e,this):new PSe(i,e,null,o)}},{key:"from",get:function(){return this._option.from}},{key:"origin",get:function(){return this._option.origin}},{key:"accept",get:function(){return this._option.accept}},{key:"videoAccept",get:function(){return this._option.videoAccept}},{key:"audioAccept",get:function(){return this._option.audioAccept}},{key:"localdocAccept",get:function(){return this._option.localdocAccept}},{key:"previewDelayTime",get:function(){return this._option.previewDelayTime}},{key:"showMiniToolbarWhen",get:function(){return this._option.showMiniToolbarWhen}},{key:"isDisableEmbedView",get:function(){return this._option.isDisableEmbedView}},{key:"embedButtonStatus",get:function(){return this._option.embedButtonStatus}},{key:"hideEmbedButton",get:function(){return!!this._option.hideEmbedButton}},{key:"editBlockUI",get:function(){return this._option.editBlockUI}},{key:"editInlineUI",get:function(){return this._option.editInlineUI}},{key:"viewerBlockUI",get:function(){return this._option.viewerBlockUI}},{key:"viewerInlineUI",get:function(){return this._option.viewerInlineUI}},{key:"acceptUtil",get:function(){return this._option.acceptUtil}},{key:"viewerTooltip",get:function(){return this._option.viewerTooltip}},{key:"onViewerInlineFileClick",get:function(){return this._option.onViewerInlineFileClick}}])}(it);Object.defineProperty(jSe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:eM.FILE.OPTION_NAME});var ISe=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=RSe(this,t,[e]),Object.defineProperty(r,"kernelOption",{enumerable:!0,configurable:!0,writable:!0,value:n}),r}return(0,Xe.A)(t,e),(0,$e.A)(t)}(jSe);function BSe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,MSe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function MSe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(MSe=function(){return!!e})()}Object.defineProperty(ISe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:eM.FILE.OPTION_NAME});var FSe=function(e){function t(e){var n;(0,Ke.A)(this,t),n=BSe(this,t,[e]),Object.defineProperty(n,"_rootRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(n,"_modeMenuRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(n,"asyncTask",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"_timer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"_overlay",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"getClassName",{enumerable:!0,configurable:!0,writable:!0,value:Xs("ne-card-file")}),Object.defineProperty(n,"handleUploadStart",{enumerable:!0,configurable:!0,writable:!0,value:function(){n.setState({percent:0}),n.props.onTaskStart()}}),Object.defineProperty(n,"handleUploadError",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n.props.onTaskError(e)}}),Object.defineProperty(n,"handleUploadSuccess",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n.props.onTaskSuccess(e),n.showMenu()}}),Object.defineProperty(n,"handleUploadProgress",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n.setState({percent:e}),n.props.onTaskProgress()}}),Object.defineProperty(n,"handleSubmit",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t){n._cancel(),e.onClick&&t!==n.state.defaultIndex&&e.onClick(),n.props.onExitCardByKeyboard(lM)}}),Object.defineProperty(n,"_cancel",{enumerable:!0,configurable:!0,writable:!0,value:function(){n._overlay&&(n._overlay.cancel(),n._overlay=null)}}),Object.defineProperty(n,"renderIcon",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=n.props.cardData.getStatus(),t=n.props.getExtIcon(n.props.cardData),r=e===zH.Pending||e===zH.Uploading||e===zH.Transfering;return Gu().createElement("span",{className:n.getClassName("icon")},Gu().createElement(SC,{type:r?"loading":"ext-".concat(t)}))}}),Object.defineProperty(n,"renderStatusTip",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=n.props.cardData.getStatus();if(e===zH.Uploading){var t=n.state.percent;return Gu().createElement("span",{className:n.getClassName("percent")},void 0!==t?"".concat(t,"%"):""," ")}return e===zH.Transfering?Gu().createElement("span",null," "):null}}),Object.defineProperty(n,"renderName",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=n.props.cardData.getName();return Gu().createElement("span",{className:n.getClassName("name"),"data-testid":n.getClassName("name")},e)}}),Object.defineProperty(n,"renderFileSize",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=n.props.cardData.getSize();if(e){var t=Dh(e);if(t)return Gu().createElement("span",{className:n.getClassName("size"),"data-testid":n.getClassName("size")},"(",t,")")}return null}});var r=e.cardData.getTaskId(),o=e.cardData.isCompleted(),i=e.modeConfig.findIndex((function(e){return e.disabled}));return r&&!o&&(n.asyncTask=e.taskObserver.observe(r)),n.state={percent:0,defaultIndex:i},n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){this.asyncTask&&(sd(this,this.asyncTask,"start",this.handleUploadStart),sd(this,this.asyncTask,"timeout",this.handleUploadError),sd(this,this.asyncTask,"error",this.handleUploadError),sd(this,this.asyncTask,"success",this.handleUploadSuccess),sd(this,this.asyncTask,"progress",this.handleUploadProgress))}},{key:"componentDidUpdate",value:function(e){e.showModeMenu||!this.props.showModeMenu||this.asyncTask||this.showMenu()}},{key:"componentWillUnmount",value:function(){this.asyncTask&&this.asyncTask.abort&&this.asyncTask.abort(),this._cancel()}},{key:"createOverlay",value:function(){this._overlay&&this._overlay.cancel(),this._overlay=aR.open({containerNode:this.props.overlayContainer,targetNode:this._rootRef.current,overlayClassName:"ne-ui-file-mode-overlay",reactComponent:Gu().createElement(LNe,{targetNode:this._rootRef.current,ref:this._modeMenuRef,defaultIndex:this.state.defaultIndex,data:this.props.modeConfig,onSubmit:this.handleSubmit}),autoClose:!1})}},{key:"showMenu",value:function(){var e=this;this.props.showModeMenu&&(this.createOverlay(),this._rootRef.current.focus(),ud(this,this._rootRef.current,"keydown",(function(t){var n=e._modeMenuRef.current;if(n)if(Ks.isEnter(t)){if(n.getSelected){var r=n.getSelected();if(r)return e.handleSubmit(r.item,r.index)}}else if(Ks.isArrowDown(t))t.preventDefault(),n.selectDown&&n.selectDown();else if(Ks.isArrowUp(t))t.preventDefault(),n.selectUp&&n.selectUp();else if(Ks.isArrowLeft(t))t.preventDefault(),e._rootRef.current.blur(),e._cancel(),e.props.onExitCardByKeyboard(aM);else{if(!Ks.isArrowRight(t))return t.preventDefault(),t.stopPropagation(),e._rootRef.current.blur(),e._cancel(),void e.props.onExitCardByKeyboard(lM);t.preventDefault(),e._rootRef.current.blur(),e._cancel(),e.props.onExitCardByKeyboard(lM)}})),ud(this,window,"click",this._cancel))}},{key:"renderError",value:function(){var e=this.props.cardData.getName(),t=this.props.cardData.getMessage(),n=this.props.cardData.toJSON();return Gu().createElement(J_e,{block:!1,cardIcon:Gu().createElement(SC,{type:"upload-error",size:20}),message:n},t||sc("文件上传失败，请重试")," ",e)}},{key:"render",value:function(){var e=this.props.cardData.getStatus();return e===zH.Error?this.renderError():Gu().createElement("span",{ref:this._rootRef,tabIndex:-1,className:this.getClassName(),"data-status":e,"data-testid":this.getClassName()},this.renderIcon(),this.renderStatusTip(),this.renderName(),this.renderFileSize())}}])}(Yu.Component);function LSe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(LSe=function(){return!!e})()}function USe(e){return function(e){function t(){var e;return(0,Ke.A)(this,t),e=function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,LSe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,arguments),Object.defineProperty(e,"uiViewProxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_taskObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"onTaskSuccess",{enumerable:!0,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(e,"onExitCardByKeyboard",{enumerable:!0,configurable:!0,writable:!0,value:function(e){}}),Object.defineProperty(e,"getModeConfig",{enumerable:!0,configurable:!0,writable:!0,value:function(){return[]}}),Object.defineProperty(e,"getExtIcon",{enumerable:!0,configurable:!0,writable:!0,value:function(){return"default"}}),Object.defineProperty(e,"setIngStatus",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=e.cardData.getTaskType()===WH.Transfer?zH.Transfering:zH.Uploading;e.cardData.getStatus()!==t&&(e.cardData.setStatus(t),e.cardData.afterChange())}}),Object.defineProperty(e,"downloadFile",{enumerable:!0,configurable:!0,writable:!0,value:function(){}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this;this._taskObserver=e,this.uiViewProxy=Vye.render(FSe,{cardData:this.cardData,modeConfig:this.getModeConfig(),taskObserver:this._taskObserver,overlayContainer:this.editor.innerOverlayContainer,onTaskStart:function(){t.setIngStatus()},onTaskProgress:function(){t.setIngStatus()},onTaskSuccess:function(e){t.emit("uploadSuccess",e),t.onTaskSuccess()},onTaskError:function(e){t.emit("uploadError",e)},onExitCardByKeyboard:this.onExitCardByKeyboard,getExtIcon:this.getExtIcon},this.containerNode),this.editor.uiEmitter.on("showModeMenu",(function(e){e===t.cardNode.id&&t.uiViewProxy.rerender({showModeMenu:!0})}))}},{key:"destroy",value:function(){Gl().unmountComponentAtNode(this.containerNode),this.uiViewProxy=null,Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}},{key:"getFrom",value:function(){return this.pluginOption.from||this.editor.option.currentURL||"undefined"!=typeof location?location.href:""}}])}(e)}var VSe=USe;function HSe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,zSe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function zSe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(zSe=function(){return!!e})()}var WSe=function(e){function t(e){var n;(0,Ke.A)(this,t);for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return n=HSe(this,t,[].concat(o)),Object.defineProperty(n,"editor",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(n,"_ui",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_asyncTask",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"sync",{enumerable:!0,configurable:!0,writable:!0,value:function(){return!n.editor.engine.nodeIsInTree(n.viewNode)||n.cardData.isCompleted()}}),Object.defineProperty(n,"_handleUploadSuccess",{enumerable:!0,configurable:!0,writable:!0,value:Qm()((function(e){n.cardData.setSrc(e.url),n.cardData.setStatus(zH.Done),e.size&&n.cardData.setSize(e.size),e.filename&&n.cardData.setName(e.filename),e.extname&&n.cardData.setExt(e.extname),n.cardData.sync(!0)}))}),Object.defineProperty(n,"_handleUploadError",{enumerable:!0,configurable:!0,writable:!0,value:Qm()((function(e){(null==e?void 0:e.message)&&n.cardData.setMessage(e.message),n.cardData.setStatus(zH.Error),n.cardData.sync(!0)}))}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e=this,n=this.editor.getService(oDe.ID);this.pluginOption.editInlineUI&&(t.$EditableCardUI=this.pluginOption.editInlineUI);var r=this.cardData.getTaskType()===WH.Transfer?this.editor.transferObserver:null==n?void 0:n.uploadObserver;this._ui=this.editor.createCardUI(this,r);var o=this.cardData.getTaskId(),i=this.cardData.isCompleted();o&&!i&&(this._asyncTask=r.observe(o),this._asyncTask.on("timeout",(function(){return e._handleUploadError("failed to upload")})),this._asyncTask.on("success",(function(t){return e._handleUploadSuccess(t)})),this._asyncTask.on("error",(function(t){return e._handleUploadError(t)}))),this._ui.on("changeMode",(function(t){bt(t!==KH,"plugins/file/src/editor/inline/e-file-card-node.ts:69"),t===qH?e.plugin.toCardMode(e):t===$H&&e.plugin.toEmbedMode(e)})),this._ui.on("uploadSuccess",(function(t){e._handleUploadSuccess(t)})),this._ui.on("uploadError",(function(t){e._handleUploadError(t)}))}},{key:"destroy",value:function(){this._asyncTask&&(this._asyncTask.abort(),this._asyncTask=null),this._ui.destroy(),this._ui=null}}])}(My);function qSe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,$Se()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function $Se(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($Se=function(){return!!e})()}Object.defineProperty(WSe,"$CardData",{enumerable:!0,configurable:!0,writable:!0,value:ZH}),Object.defineProperty(WSe,"$EditableCardUI",{enumerable:!0,configurable:!0,writable:!0,value:USe(zh()())});var KSe=function(e){function t(){return(0,Ke.A)(this,t),qSe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"onEvent",value:function(e,t){bt("file"===e,"plugins/file/src/editor/inline/note-file-toolbar-descriptor.ts:14"),this.editor.emitPluginEvent("insertCardByUI",{item:{type:"FileItem",name:"file"},args:[[t]]})}},{key:"getInitUIState",value:function(){var e;return{disabled:!1,icon:"note-file",className:"ne-ui-toolbar-file",accept:this.pluginContext.option.acceptUtil.getAttachmentFileAccept(null===(e=this.pluginContext)||void 0===e?void 0:e.option.accept),tooltip:MEe.getTooltip(this.editor,sc("附件"))}}},{key:"getUIState",value:function(){var e=this.editor.kernel.queryCommandValue("selection");return{disabled:!e||wi.isUnbreakable(e)}}}])}(MEe);Object.defineProperty(KSe,"Type",{enumerable:!0,configurable:!0,writable:!0,value:"FileButton"});var YSe=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"uploadFile",value:function(e,t){var n=e.option.file,r=e.requireService(oDe.ID);return Array.isArray(t)||(t=[t]),t.map((function(e){var t=n.createUploadTask(e);return r.uploadManager.addTask(t),t}))}}])}();function GSe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,JSe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function JSe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(JSe=function(){return!!e})()}var XSe=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=GSe(this,t),Object.defineProperty(n,"editor",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"preReadFile",value:function(e,t,n){if((null==n?void 0:n.from)===LT&&"localDoc"===(null==n?void 0:n.category)){if(!e.checkFileSize(sM.localDoc,t.file.size))return!1;var r=YSe.uploadFile(this.editor,[t.file]),o=(0,tn.A)(r,1)[0];return t._$neUploadTask=o,!1}}}])}(UPe);function QSe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,ZSe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function ZSe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ZSe=function(){return!!e})()}var eTe=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=QSe(this,t),Object.defineProperty(r,"editor",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(r,"_option",{enumerable:!0,configurable:!0,writable:!0,value:n}),r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"preReadFile",value:function(e,t){var n,r=null===(n=t.extName)||void 0===n?void 0:n.toLowerCase();if(!this._option.acceptUtil.getAttachmentFileAccept(this._option.accept).includes("."+r))return this.editor.emitEvent("unSupportFileUpload",t),!1;if(!e.checkFileSize(sM.file,t.file.size))return!1;var o=YSe.uploadFile(this.editor,[t.file]),i=(0,tn.A)(o,1)[0];t._$neUploadTaskId=i.id}}])}(UPe);function tTe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,nTe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function nTe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nTe=function(){return!!e})()}Object.defineProperty(eTe,"FileTypes",{enumerable:!0,configurable:!0,writable:!0,value:"*"});var rTe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=tTe(this,t,arguments),Object.defineProperty(e,"_getCategories",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=e.option.acceptUtil,n=[].concat((0,ln.A)(e.option.audioAccept?t.getAudioFileAccept(e.option.audioAccept):[]),(0,ln.A)(e.option.videoAccept?t.getVideoFileAccept(e.option.videoAccept):[]),(0,ln.A)(t.getLocalDocFileAccept(e.option.localdocAccept,LH))),r=!n.length;return[{type:"FileItem",name:ez.cardSelect.localFile,label:sc("本地文件"),category:"localDoc",multiple:!0,isVip:e.editor.option.env===oM&&!e.editor.option.hideVipIcon,description:r?function(){var t,n,r=(null===(n=(t=e.editor).getUIInjector)||void 0===n?void 0:n.call(t,fh))||gh.get(fh);return r?r():null}:sc("支持 Office、PDF、Sketch 等"),mainSearch:"/bdwj",iconSize:16,icon:"editor-main-local-file",keywords:"本地文件,bendiwenjian,bdwj,localdoc,word,excel,ppt,powerpoint,office文件,文件,wj,keynote,pages,numbers,mac办公套件,文件,office",disabled:r,accept:n},{type:"SubMenu",name:ez.cardSelect.localDoc,label:sc("本地文件"),iconSize:16,icon:"card-local-doc",recordDisable:!0},{type:"FileItem",name:ez.cardSelect.uploadForLocalDoc,category:"localDoc",multiple:!0,label:sc("上传文件"),icon:"card-local-doc-plus",iconSize:14,className:"ne-ui-local-doc-upload-item",recordDisable:!0,accept:[].concat((0,ln.A)(t.getAudioFileAccept(e.option.audioAccept)),(0,ln.A)(t.getVideoFileAccept(e.option.videoAccept)),(0,ln.A)(t.getLocalDocFileAccept(e.option.accept,LH)))},{type:"FileItem",name:ez.cardSelect.officeForLocalDoc,category:"localDoc",label:sc("Office 文件"),remark:sc("支持 Word, Excel, PPT"),icon:"card-local-doc-ms-office",achromaticIcon:"card-local-doc-ms-office-a",keywords:"word,excel,ppt,powerpoint,office文件,文件,wj",accept:t.getLocalDocFileAccept(e.option.accept,TH),recordDisable:!0},{type:"FileItem",name:ez.cardSelect.macOfficeForLocalDoc,category:"localDoc",multiple:!0,label:sc("Mac 办公套件"),remark:sc("支持 Pages, Numbers, Keynote"),icon:"card-local-doc-mac-office",achromaticIcon:"card-local-doc-mac-office-a",keywords:"keynote,pages,numbers,mac办公套件,文件,office",accept:t.getLocalDocFileAccept(e.option.accept,jH),recordDisable:!0},{type:"FileItem",name:ez.cardSelect.mindForLocalDoc,category:"localDoc",multiple:!0,label:sc("思维导图文件"),remark:sc("支持 MindManager, XMind, MindNode"),icon:"card-local-doc-mindmap",achromaticIcon:"card-local-doc-mindmap-a",keywords:"mindnode,mindmanager,mmap,思维导图文件,脑图",accept:t.getLocalDocFileAccept(e.option.accept,IH),recordDisable:!0},{type:"FileItem",name:ez.cardSelect.designForLocalDoc,category:"localDoc",multiple:!0,label:sc("设计文件"),remark:sc("支持 Axure, Photoshop, Sketch"),icon:"card-local-doc-design",achromaticIcon:"card-local-doc-design-a",keywords:["design","axure","photoshop","ps","sketch","设计文件"],accept:t.getLocalDocFileAccept(e.option.accept,BH),recordDisable:!0},{type:"FileItem",name:ez.cardSelect.pdfForLocalDoc,category:"localDoc",multiple:!0,label:sc("PDF 文件"),icon:"card-local-doc-pdf",achromaticIcon:"card-local-doc-pdf-a",keywords:["pdf","文件"],accept:t.getLocalDocFileAccept(e.option.accept,MH),recordDisable:!0}]}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){var n,r=this,o=this.option.acceptUtil;t.registerBlockCard(this,ez.cardName,{factory:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return vl(CSe,[e].concat(n))}}),t.registerInlineCard(this,eM.FILE.NODE_NAME,{factory:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return vl(WSe,[e].concat(n))}});var i=e.kernel.getService(ET.ID);null==i||i.registerPreFileReader(eTe.FileTypes,new eTe(e,this.option)),null==i||i.registerPreFileReader(o.getLocalDocFileAccept(this.option.accept,LH),new XSe(e)),null===(n=e.getService(xEe.ID))||void 0===n||n.registerCardSelect(ez.cardSelect.file,{type:"FileItem",icon:"editor-main-attachment",label:sc("附件"),mainSearch:"/fj",name:ez.cardSelect.file,multiple:!0,accept:o.getAttachmentFileAccept(this.option.accept),keywords:"附件,fj,fujian,file,attachment",description:sc("支持pdf、ppt等多种格式")}),this._getCategories().forEach((function(t){var n;null===(n=e.getService(xEe.ID))||void 0===n||n.registerCardSelect(t.name,t)}));var a=e.getService(jEe.ID);null==a||a.registerToolbarWidget(ez.toolbar,{clazz:KSe,pluginContext:this});var l=!1,u=[],c=["paste","dropFile","insertFiles"];e.editing.on("beforeExecCommand",(function(e){var t=e.commandName;e.args,c.includes(t)&&(l=!0,u=[])})),e.editing.on("nodechange",(function(e){if(l){var t=e.node,n=e.type;"file"===t.nodeName&&"inline"===t.cardType&&"insert"===n&&u.push(t)}})),e.editing.on("afterExecCommand",(function(e){var t=e.commandName;e.args,c.includes(t)&&(l=!1,1===Awe()(u,"id").length&&r.editor.uiEmitter.emit("showModeMenu",u[0].id),u=[])}))}},{key:"sync",value:function(){return 0===this.cardNodes.filter((function(e){return!1===e.sync()})).length}},{key:"toTitleMode",value:function(e){var t=e.id,n=e.cardData;n.setMode(KH);var r=n.getCardValue();this.editor.execCommand("deleteCard",t),this.editor.execCommand("insertCard","file",r)}},{key:"toCardMode",value:function(e){this._toBlockViewMode(e,qH)}},{key:"toEmbedMode",value:function(e){this._toBlockViewMode(e,$H)}},{key:"_toBlockViewMode",value:function(e,t){var n=e.id,r=e.cardData;r.setMode(t);var o=r.getCardValue();this.editor.execCommand("deleteCard",n),this.editor.execCommand("insertCard","localdoc",o)}}])}(Fh);function oTe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,iTe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function iTe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(iTe=function(){return!!e})()}Object.defineProperty(rTe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:ez.pluginName}),Object.defineProperty(rTe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:jSe});var aTe=function(e){function t(){return(0,Ke.A)(this,t),oTe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this.kernel;e.onPluginEvent("insertCardByUI",(function(e){var n=e.item,r=e.args;"FileItem"!==(null==n?void 0:n.type)&&"LikeFileItem"!==(null==n?void 0:n.type)||t.execCommand("insertFiles",r[0],{from:LT,category:n.category||n.name})}))}}])}(Fh);function lTe(e){var t=e.nodeName;return e.contentEditable+""=="true"||"INPUT"===t||"TEXTAREA"===t}function uTe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,cTe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function cTe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(cTe=function(){return!!e})()}Object.defineProperty(aTe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:$z.pluginName});var sTe=function(e){function t(){return(0,Ke.A)(this,t),uTe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){this.kernel.editing.on("afterExecCommand",(function(){var n=document.activeElement;n&&(lTe(n)||t.domRootNode.contains(n)||!e.editorWrapNode.contains(n))||t.execCommand("focus")}));var n=t.domRootNode;t.engine.on("focusstatuschange",(function(e){e?n.classList.add("ne-active"):n.classList.remove("ne-active")}))}}])}(Fh);function dTe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,fTe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function fTe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(fTe=function(){return!!e})()}Object.defineProperty(sTe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:Jz.pluginName});var hTe=FW.map((function(e){return{menuItem:Gu().createElement("div",{className:"ne-ui-font-size-item"},e,"px"),label:e+"px",value:e}})),pTe=function(e){function t(){return(0,Ke.A)(this,t),dTe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"onEvent",value:function(e,t){var n,r,o;bt("select"===e,"plugins/fontsize/src/editor/fontsize-toolbar-descriptor.tsx:22");var i=parseInt(t,10),a=this.editor.kernel;i===((null===(n=a.getService(_W.ID))||void 0===n?void 0:n.getDefaultFontsize())||(null===(o=null===(r=a.getService(aW.ID))||void 0===r?void 0:r.getTypographyDetail)||void 0===o?void 0:o.call(r).fontSize)||15)?this.editor.execCommand(this.name,null):this.editor.execCommand(this.name,i)}},{key:"getInitUIState",value:function(){return{disabled:this.disabled,value:null,className:"ne-ui-toolbar-fontsize",dropdownClassName:"ne-ui-toolbar-fontsize-dropdown",options:hTe,tooltip:[CEe.fontsize.text,of(CEe.fontsize.keys)]}}},{key:"getUIState",value:function(){var e=this.editor,t=this.name,n=e.queryCommandValue(t,!1),r=n;return-1===n&&(r=null),{disabled:this.disabled||!e.queryCommandEnabled(t),value:r,options:hTe}}}])}(MEe);function vTe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,mTe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function mTe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mTe=function(){return!!e})()}Object.defineProperty(pTe,"Type",{enumerable:!0,configurable:!0,writable:!0,value:"Select"});var gTe=function(e){function t(){return(0,Ke.A)(this,t),vTe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=e.getService(jEe.ID);null==t||t.registerToolbarWidget(lW.toolbar,pTe);var n=e.renderer.getService(kRe.ID);n&&[CEe.fontsizeIncrease,CEe.fontsizeDecrease].forEach((function(t){n.registerHotKey(t.name,t.keys,(function(n){n.stop();var r=e.queryCommandValue("fontsize",!1);if(FW.includes(r)){var o=FW.indexOf(r),i="fontsizeIncrease"===t.name?o+1:o-1;FW[i]&&e.execCommand("fontsize",FW[i])}}))}))}}])}(Fh);function bTe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,yTe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function yTe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(yTe=function(){return!!e})()}Object.defineProperty(gTe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:lW.pluginName});var wTe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=bTe(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Yy);function ATe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,kTe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function kTe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(kTe=function(){return!!e})()}Object.defineProperty(wTe,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze("IFormatRenderService")});var _Te=function(e){function t(){var e;return(0,Ke.A)(this,t),e=ATe(this,t,arguments),Object.defineProperty(e,"_cancelEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e=this;this._cancelEvent=this.editor.renderer.onPluginEvent("clearPaintFormat",(function(){e.refresh()}))}},{key:"destroy",value:function(){this._cancelEvent&&(this._cancelEvent(),this._cancelEvent=null)}},{key:"onEvent",value:function(e,t){bt("click"===e||"dblclick"===e,"plugins/format-painter/src/editor/format-painter-toolbar-descriptor.ts:28");var n=this.editor.renderer.getService(wTe.ID);if(!t)return null==n?void 0:n.clearPaintFormat();switch(this.editor.emitPluginEvent("format-painter-click",e),e){case"click":null==n||n.recordPaintFormat(!0);break;case"dblclick":null==n||n.recordPaintFormat(!1);break;default:bt(!1,"plugins/format-painter/src/editor/format-painter-toolbar-descriptor.ts:45")}this.refresh()}},{key:"getInitUIState",value:function(){return{disabled:this.disabled,checked:!1,icon:"editor-format-painter",className:"ne-ui-toolbar-format-painter",tooltip:MEe.getTooltip(this.editor,CEe.formatPainter.text,CEe.formatPainter.name)}}},{key:"getUIState",value:function(){var e,t;return{disabled:this.disabled||!this.editor.queryCommandEnabled("paintFormat"),checked:null!==(t=null===(e=this.editor.renderer.getService(wTe.ID))||void 0===e?void 0:e.hasPaintFormat())&&void 0!==t&&t}}}])}(MEe);function CTe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,NTe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function NTe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(NTe=function(){return!!e})()}Object.defineProperty(_Te,"Type",{enumerable:!0,configurable:!0,writable:!0,value:"DoubleClickStatusButton"});var OTe=function(e){function t(){return(0,Ke.A)(this,t),CTe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=e.getService(jEe.ID);null==t||t.registerToolbarWidget(cq.toolbar,_Te)}}])}(Fh);function xTe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,ETe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function ETe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ETe=function(){return!!e})()}Object.defineProperty(OTe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:cq.pluginName});var DTe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=xTe(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Dy);function PTe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,RTe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function RTe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(RTe=function(){return!!e})()}Object.defineProperty(DTe,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze("IFullscreenEditorService")});var STe=function(e){function t(){return(0,Ke.A)(this,t),PTe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){}},{key:"enterFullscreen",value:function(){this.plugin.enterFullscreen()}},{key:"exitFullscreen",value:function(){this.plugin.exitFullscreen()}},{key:"isFullscreen",value:function(){return this.plugin.isFullscreen()}}])}(DTe),TTe={enable:!1,uiType:"flow"},jTe=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Object.assign(Object.assign({},TTe),t)}),[{key:"enable",get:function(){return this._option.enable}},{key:"uiType",get:function(){return this._option.uiType}}])}();Object.defineProperty(jTe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"fullscreen"});var ITe={Button:"Button",StatusButton:"StatusButton",DoubleClickStatusButton:"DoubleClickStatusButton",FileButton:"FileButton",EmojiButton:"EmojiButton",Select:"Select",DropdownButton:"DropdownButton",InlineContentDropdownButton:"InlineContentDropdownButton",CardSelect:"CardSelect",Custom:"Custom",ColorPickerButton:"ColorPickerButton",StatusDropdownButton:"StatusDropdownButton"};function BTe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,MTe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function MTe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(MTe=function(){return!!e})()}var FTe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=BTe(this,t,arguments),Object.defineProperty(e,"_layer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"registerToolbarWidget",{enumerable:!0,configurable:!0,writable:!0,value:function(t,n){return e.plugin._toolbar.registerWidget(t,n)}}),Object.defineProperty(e,"registerToolbar",{enumerable:!0,configurable:!0,writable:!0,value:function(t,n){return e.plugin._toolbar.registerToolbar(t,n)}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"layer",get:function(){return this._layer||this.editor.uiLayer}},{key:"setLayer",value:function(e){this._layer=e}},{key:"destroy",value:function(){}}])}(jEe),LTe=function(){return(0,$e.A)((function e(t,n,r){(0,Ke.A)(this,e),Object.defineProperty(this,"_toolbar",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_toolbarUI",{enumerable:!0,configurable:!0,writable:!0,value:null}),this._toolbar=t,this._name=n,this._config=r}),[{key:"destroy",value:function(){this._toolbar=null,this._config=null,this._toolbarUI&&this._toolbarUI.destroy(),this._toolbarUI=null}},{key:"open",value:function(){this._toolbarUI||(this._toolbarUI=this._toolbar._createToolbarUI(this._name,this._config),this._toolbarUI.hide()),this._toolbar._openUI(this._toolbarUI)}},{key:"refresh",value:function(){this._toolbarUI&&this._toolbarUI.refresh()}},{key:"close",value:function(){this._toolbarUI&&this._toolbar._closeUI(this._toolbarUI)}}])}(),UTe=function(){return(0,$e.A)((function e(t,n){(0,Ke.A)(this,e),Object.defineProperty(this,"_containerNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_contentNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_widgets",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_callback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_observer",{enumerable:!0,configurable:!0,writable:!0,value:null}),this._contentNode=t,this._containerNode=t.parentNode.parentNode,this._widgets=this._getWidgetSize(),this._callback=n||function(){},this._init()}),[{key:"_init",value:function(){var e=this;if(this._widgets.length){var t=this._contentNode;this._observer=new ResizeObserver((function(n){requestAnimationFrame((function(){if(t.isConnected){var r=n[0].contentRect.width;r>0&&e._refresh(r)}}))})),this._observer.observe(this._containerNode)}}},{key:"recalculate",value:function(){if(this._contentNode.isConnected){var e=this._containerNode.getBoundingClientRect().width;this._widgets=this._getWidgetSize(),e>0&&this._refresh(e)}}},{key:"destroy",value:function(){var e;null===(e=this._observer)||void 0===e||e.disconnect(),this._containerNode=null,this._contentNode=null,this._callback=null,this._widgets=null}},{key:"_getWidgetSize",value:function(){var e=[],t=this._contentNode.getBoundingClientRect().x;return Array.from(this._contentNode.children).forEach((function(n){if(n.classList.contains("ne-toolbar-widget")){var r=n.getBoundingClientRect();e.push({width:r.width,offset:r.x-t,isDivider:n.classList.contains("ne-ui-divider"),node:n})}})),e}},{key:"_refresh",value:function(e){for(var t=this._widgets,n=-1,r=t.length-1;r>=0;r--){var o=t[r];if(o.offset+o.width<=e){n=r+1;break}}(n=this._checkMoreButton(e,n))>=1&&(n=this._checkDivider(n)),this._callback(n)}},{key:"_checkMoreButton",value:function(e,t){var n=this._widgets;if(t===n.length)return t;for(var r=t;r>=0;r--)if(n[r].offset+50<=e)return r;bt(!1,"plugins/toolbar/src/editor/toolbar-monitor.ts:135")}},{key:"_checkDivider",value:function(e){return bt(e>=1,"plugins/toolbar/src/editor/toolbar-monitor.ts:140"),this._widgets[e-1].isDivider?e-1:e}}])}();function VTe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,HTe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function HTe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(HTe=function(){return!!e})()}var zTe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=VTe(this,t,arguments),Object.defineProperty(e,"state",{enumerable:!0,configurable:!0,writable:!0,value:{open:!1}}),Object.defineProperty(e,"_clickHandler",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.setState({open:!e.state.open})}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"close",value:function(){this.setState({open:!1})}},{key:"componentDidUpdate",value:function(e,t,n){t.open!==this.state.open&&this.props.onMoreOpenToggle&&this.props.onMoreOpenToggle(this.state.open)}},{key:"render",value:function(){var e=Zx(sc("更多"),Gu().createElement("span",{className:"ne-ui-toolbar-more"},Gu().createElement(hye,{className:Uf("ne-ui-toolbar-button","ne-ui-toolbar-more-button",this.props.className,this.state.open?"checked":""),onClick:this._clickHandler},Gu().createElement(SC,{type:"more-horizontal",size:16}))));return Gu().createElement(bR,{visible:this.state.open,overlayClassName:"ne-ui-toolbar-more-overlay",placement:"bottomRight",content:this.props.widgets,getPopupContainer:this.props.getPopupContainer},e)}}])}(Yu.Component);function WTe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,qTe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function qTe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qTe=function(){return!!e})()}var $Te=function(e){function t(){var e;return(0,Ke.A)(this,t),e=WTe(this,t,arguments),Object.defineProperty(e,"_contentBoxRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"_moreBtnRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"_toolbarMonitor",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"state",{enumerable:!0,configurable:!0,writable:!0,value:{main:null,sub:null}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){var e=this,t=this._contentBoxRef.current;t&&(ud(this,document,"animationend",(function(n){n.target instanceof HTMLElement&&n.target.contains(t)&&e.setState({main:e.props.widgets,sub:[]},(function(){var t;null===(t=e._toolbarMonitor)||void 0===t||t.recalculate()}))})),this._toolbarMonitor=new UTe(t,(function(t){e.setState({main:e.props.widgets.slice(0,t),sub:e.props.widgets.slice(t)})})))}},{key:"componentWillUnmount",value:function(){this._toolbarMonitor.destroy()}},{key:"closeMoreButton",value:function(){this._moreBtnRef.current&&this._moreBtnRef.current.close()}},{key:"render",value:function(){var e={main:this.props.widgets,sub:[]};return this.state.main&&(e=this.state),Gu().createElement("div",{className:"ne-ui-inner-toolbar"},Gu().createElement("div",{className:"ne-ui-toolbar-content",ref:this._contentBoxRef},e.main,this._renderMoreButton(e.sub)))}},{key:"_renderMoreButton",value:function(e){var t=this;return e.length?Gu().createElement(zTe,{className:"ne-toolbar-widget",ref:this._moreBtnRef,widgets:e,getPopupContainer:function(){return t.props.overlayContainer},onMoreOpenToggle:this.props.onMoreOpenToggle}):null}}])}(Yu.Component),KTe="|";function YTe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,GTe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function GTe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(GTe=function(){return!!e})()}var JTe=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=YTe(this,t,[e]),Object.defineProperty(n,"state",{enumerable:!0,configurable:!0,writable:!0,value:{disabled:!1,className:"",icon:null,iconfont:null}}),n.state=e.descriptor.getInitUIState()||n.state,n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.descriptor;t.isReady()&&this.setState(Object.assign({},t.getUIState())),t.on("statechange",(function(){var n=t.getUIState();gf(n,e.state)&&e.setState(Object.assign({},n))}))}},{key:"render",value:function(){var e=this.props,t=e.descriptor,n=e.className;return Gu().createElement("div",{className:n},t.render(this.state))}}])}(Yu.Component);function XTe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,QTe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function QTe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(QTe=function(){return!!e})()}var ZTe=function(e){function t(){return(0,Ke.A)(this,t),XTe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){var e=Uf(this.props.className,"ne-ui-divider");return Gu().createElement("div",{className:e})}}])}(Yu.Component);function eje(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,tje()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function tje(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(tje=function(){return!!e})()}var nje=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=eje(this,t,[e]),Object.defineProperty(n,"_cancelTask",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"_focused",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(n,"_inputRef",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"state",{enumerable:!0,configurable:!0,writable:!0,value:{disabled:!1,className:"",themeSelector:"",isDark:!1,isMenuOpen:!1,search:function(){return null}}}),Object.defineProperty(n,"_btnRef",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_overlay",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"_hasFileSelect",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(n,"_closeTask",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"_positionHandle",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t=n._btnRef.current.getBoundingClientRect();t.left+292+10<=window.innerWidth?e.style.left=t.left+"px":e.style.left=window.innerWidth-292-10+"px";var r=Math.min(window.innerHeight-(t.bottom+5+10),600),o=Math.min(600,t.top-5-10);r>=o?(e.classList.remove("lock-height"),e.style.height=r+"px",e.style.top=t.bottom+5+"px"):(e.classList.add("lock-height"),e.style.height=o+"px",e.style.top=t.top-5-o+"px")}}),Object.defineProperty(n,"_handleInputRef",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n._inputRef=e}}),Object.defineProperty(n,"_handleFileSelectOpen",{enumerable:!0,configurable:!0,writable:!0,value:function(){n._hasFileSelect=!0}}),Object.defineProperty(n,"_handleCarMenuMouseHover",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e;n._closeTask&&(null===(e=n._closeTask)||void 0===e||e.call(n))}}),Object.defineProperty(n,"_handleMouseLeave",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e;n._cancelTask&&(null===(e=n._cancelTask)||void 0===e||e.call(n)),n._hasFileSelect||n._focused||(n._closeTask=od((function(){!n.state.isMenuOpen||n._focused||n.setState({isMenuOpen:!1},(function(){return n._overlay&&n._overlay.cancel()}))}),100))}}),Object.defineProperty(n,"_openMenuByHover",{enumerable:!0,configurable:!0,writable:!0,value:function(){n._cancelTask=od((function(){n._cancelTask=null,n.state.isMenuOpen||n._openMenu(!1)}),100)}}),Object.defineProperty(n,"_openMenuAutoFocus",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n._openMenu(e,!0)}}),Object.defineProperty(n,"_openMenu",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t,r,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n.state.isMenuOpen){if(n._focused)return void n.setState({isMenuOpen:!1},(function(){return n._overlay&&n._overlay.cancel()}));if(n._inputRef)return null===(r=(t=n._inputRef).focus)||void 0===r||r.call(t),void(n._focused=!0);n._overlay&&n._overlay.cancel()}var i=n.props,a=i.descriptor,l=i.overlayContainer;n._hasFileSelect=!1,n.setState({isMenuOpen:!0}),n._overlay=aR.open({containerNode:l||document.body,targetNode:n._btnRef.current,autoClose:!1,reactComponent:Gu().createElement(nR,{closeExclude:n._btnRef.current,targetNode:n._btnRef.current,boundaryNode:document.body,visible:!0,offset:5,className:"ne-card-toolbar-select-popover ".concat(n.state.themeSelector||""),positionHandle:Us.mobile?void 0:n._positionHandle,placement:Us.mobile?yC:[kC,yC]},Gu().createElement(wAe,{autoFocus:o,onInputRef:n._handleInputRef,onFocus:function(){n._focused=!0},onBlur:function(){n._focused=!1},onSelect:function(e){n._overlay&&n._overlay.cancel();for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];a.onEvent("select",e,r),n._focused=!1},onCancel:function(){n._overlay&&n._overlay.cancel(),a.handleCancel(),n._focused=!1},isDark:n.state.isDark,themeSelector:n.state.themeSelector,onMouseEnter:n._handleCarMenuMouseHover,onMouseLeave:n._handleMouseLeave,onFileSelectOpen:n._handleFileSelectOpen,emptyTipText:sc("无可用卡片"),config:n._getCardMenuItemConfig(),overlayContainer:l,className:"ne-ui-toolbar-card-select-menu",customSearch:n.state.search})),closeCallback:function(){n.setState({isMenuOpen:!1}),n._focused=!1}})}}),n._btnRef=Gu().createRef(),n.state=e.descriptor.getInitUIState()||n.state,n.state.isMenuOpen=!1,n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.descriptor;t.isReady()&&this.setState(Object.assign({},t.getUIState())),t.on("statechange",(function(){var n=t.getUIState();gf(n,e.state)&&e.setState(Object.assign({},n))}))}},{key:"componentWillUnmount",value:function(){this._overlay&&this._overlay.cancel(),this._inputRef=null}},{key:"render",value:function(){return Gu().createElement("span",{className:this.props.className},Gu().createElement("button",{type:"button","data-testid":"ui-toolbar-card-select-button",ref:this._btnRef,onMouseEnter:this._openMenuByHover,onMouseLeave:this._handleMouseLeave,onClick:this._openMenuAutoFocus,onMouseDown:function(e){return e.preventDefault()},disabled:this.state.disabled,className:Uf("ant-btn ne-ui-toolbar-card-select-button ne-ui-toolbar-button",this.state.className,this.state.isMenuOpen?"ne-ui-menu-open":"")},"string"==typeof this.state.icon?Gu().createElement(SC,{type:this.state.icon,size:this.state.iconSize}):this.state.icon&&Gu().createElement(this.state.icon,{iconSize:this.state.iconSize})))}},{key:"_getCardMenuItemConfig",value:function(){var e=this.props.descriptor.getConfig(),t=e.groups,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["groups"]),r=this.props.descriptor.getRecentSelectItems();return r?Object.assign({groups:[Object.assign(Object.assign({},r),{noSearch:!0}),{type:"hr",items:[]}].concat((0,ln.A)(t))},n):Object.assign({groups:t},n)}}])}(Yu.Component);function rje(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,oje()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function oje(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(oje=function(){return!!e})()}var ije=function(e){function t(e){var n;(0,Ke.A)(this,t),n=rje(this,t,[e]),Object.defineProperty(n,"state",{enumerable:!0,configurable:!0,writable:!0,value:{className:"",defaultColor:void 0,color:void 0,activeColors:[],userColors:void 0,icon:null,themeName:void 0,allowClear:!1,themeSelector:""}}),Object.defineProperty(n,"_selectHandler",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n.props.descriptor.onEvent("select",e)}}),Object.defineProperty(n,"_onClearHandler",{enumerable:!0,configurable:!0,writable:!0,value:function(){n.props.descriptor.onEvent("clear")}}),Object.defineProperty(n,"_saveColorHandler",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n.props.descriptor.onEvent("saveColor",e)}});var r=e.descriptor.getInitUIState();return n.state=Object.assign(Object.assign({},n.state),r),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.descriptor;t.isReady()&&this.setState(Object.assign({},t.getUIState())),t.on("statechange",(function(){var n=t.getUIState();gf(n,e.state)&&e.setState(Object.assign({},n))}))}},{key:"render",value:function(){var e=this.state.icon;return bt(null===e||"string"==typeof e||void 0===e,"plugins/toolbar/src/editor/widgets/color-picker-button/index.tsx:65"),Gu().createElement(this.props.colorButtonComponent,{disabled:!!this.state.disabled,type:e,color:this.state.color,defaultColor:this.state.defaultColor,activeColors:this.state.activeColors,themeName:this.state.themeName,userColors:this.state.userColors,onSelect:this._selectHandler,onClear:this._onClearHandler,onSaveColor:this._saveColorHandler,className:Uf(this.state.className,this.props.className),popupContainer:this.props.descriptor.uiLayer,tooltip:this.state.tooltip,themeSelector:this.state.themeSelector})}}])}(Yu.Component);function aje(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,lje()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function lje(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(lje=function(){return!!e})()}var uje=function(e){function t(){return(0,Ke.A)(this,t),aje(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["className","children"]);return Zx(this.props.tooltip,Gu().createElement(hye,Object.assign({"data-ne-button-arrow":"true",className:Uf(t,"ne-ui-toolbar-arrow-button")},r),n,Gu().createElement("span",{className:"ne-ui-toolbar-arrow-down",style:{backgroundImage:"url(".concat(Fw["ne-ui-toolbar-arrow-down"],")")}})))}}])}(Yu.Component);function cje(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,sje()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function sje(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(sje=function(){return!!e})()}var dje="MenuItem",fje="InlineItem",hje=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=cje(this,t,[e]),Object.defineProperty(n,"state",{enumerable:!0,configurable:!0,writable:!0,value:{disabled:!1,icon:"",iconfont:null,value:null,items:[],allowCheck:!0,dropdownClassName:""}}),Object.defineProperty(n,"_renderInlineItemContent",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=n.state,t=e.items,r=e.value;return Gu().createElement("div",{onMouseDown:function(e){return e.preventDefault()},className:"ne-ui-toolbar-dropdown-inline-container ".concat(n.state.dropdownClassName)},t.map((function(e,t){var o=e.tooltip,i=e.icon,a=e.iconfont,l=e.iconSize,u=e.value;return Zx(o,Gu().createElement("div",{onClick:function(){return n.props.descriptor.onEvent("select",u)},className:Uf("ne-ui-inline-button",r===u?"selected":""),key:t},"string"==typeof i?Gu().createElement(SC,{type:i,iconfont:a,size:l}):i&&Gu().createElement(i,{iconSize:n.state.iconSize})),{key:t})})))}}),Object.defineProperty(n,"_selectHandler",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n.props.descriptor.onEvent("select",e.key)}}),n.state=Object.assign(Object.assign({},n.state),e.descriptor.getInitUIState()),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.descriptor;t.isReady()&&this.setState(Object.assign({},t.getUIState())),t.on("statechange",(function(){var n=t.getUIState();gf(n,e.state)&&e.setState(Object.assign({},n))}))}},{key:"render",value:function(){var e=this;return Gu().createElement(Ex,{disabled:this.state.disabled,overlay:this._handleRenderContent(),getPopupContainer:function(){return e.props.dropdownContainer},placement:Us.mobile?"topRight":"bottomLeft",trigger:["click"]},Gu().createElement(uje,{disabled:this.state.disabled,tooltip:this.state.tooltip,className:Uf("ne-ui-toolbar-dropdown-button","ne-toolbar-widget","ne-ui-toolbar-dropdown-button",this.state.className,this.props.className)},"string"==typeof this.state.icon||this.state.iconfont?Gu().createElement(SC,{type:this.state.icon,iconfont:this.state.iconfont,size:this.state.iconSize}):this.state.icon&&Gu().createElement(this.state.icon,{iconSize:this.state.iconSize})))}},{key:"_handleRenderContent",value:function(){switch(this.props.contentType){case dje:return this._renderMenu();case fje:return this._renderInlineItemContent();default:bt(!1,"plugins/toolbar/src/editor/widgets/dropdown-button/dropdown-button.tsx:119")}}},{key:"_renderMenu",value:function(){var e=this.state,t=e.items,n=e.value,r=t.some((function(e){return!!e.icon||!!e.iconfont}));return Gu().createElement(cP,{className:Uf("ne-ui-toolbar-dropdown-button-menu",this.state.allowCheck?"ne-check-menu":""),onMouseDown:function(e){return e.preventDefault()},onClick:this._selectHandler},t.map((function(e,t){var o=Gu().createElement("div",{className:"ne-ui-menu-item-content"},e.checked||e.value===n?Gu().createElement(SC,{type:"check",className:"ne-ui-menu-item-checked"}):null,r?"string"==typeof e.icon?Gu().createElement(SC,{className:"ne-ui-dropdown-item-icon",type:e.icon,iconfont:e.iconfont}):e.icon&&Gu().createElement(e.icon,{}):null,Gu().createElement("div",{className:"ne-ui-menu-item-label"},e.label));return e.tooltip&&(o=Zx(e.tooltip,o,{placement:"right",key:t})),Gu().createElement(cP.Item,{key:e.value,className:Uf("ne-ui-menu-item",e.disabled?"ne-disabled":""),disabled:e.disabled},o)})))}}])}(Yu.Component),pje=function(e){return Gu().createElement(hje,Object.assign({contentType:dje},e))},vje=function(e){return Gu().createElement(hje,Object.assign({contentType:fje},e))};function mje(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,gje()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function gje(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(gje=function(){return!!e})()}var bje=function(e){function t(e){var n;(0,Ke.A)(this,t),n=mje(this,t,[e]),Object.defineProperty(n,"togglePopover",{enumerable:!0,configurable:!0,writable:!0,value:function(){n.setState((function(e){return{active:!e.active}}))}}),Object.defineProperty(n,"onSelectEmoji",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n.props.descriptor.onEvent("select",e),n.setState({active:!1})}});var r=e.descriptor.getInitUIState();return n.state={active:!1,disabled:r.disabled,lang:r.lang,tooltip:r.tooltip},n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.descriptor;t.isReady()&&this.setState(Object.assign({},t.getUIState())),t.on("statechange",(function(){var n=t.getUIState();gf(n,e.state)&&e.setState(Object.assign({},n))}))}},{key:"render",value:function(){var e=this,t=this.props.descriptor,n=t.pluginContext.getEmojis();return Zx(this.state.tooltip,Gu().createElement(bR,{overlayClassName:"ne-button-emoji-popover ".concat(t.editor.theme.getThemeSelector()),trigger:["click"],visible:this.state.active,onVisibleChange:function(t){t!==e.state.active&&e.setState({active:t})},content:Gu().createElement("div",{className:"ne-button-emoji-panel"},n.default.map((function(t){return Gu().createElement("a",{key:t.id,className:"ne-button-emoji-item",onMouseDown:function(e){e.preventDefault()},onClick:function(){e.onSelectEmoji(t)}},Gu().createElement("img",{src:yh.sanitizeUrl(t.src)}),Gu().createElement("br",null),Gu().createElement("span",{className:"ne-emoji-title"},t.title[e.state.lang]))})))},Gu().createElement(hye,{disabled:t.getUIState().disabled,className:"ne-ui-toolbar-button ".concat(this.props.className),onClick:this.togglePopover},Gu().createElement(SC,{type:"t-emoji"}))))}}])}(Gu().Component);const yje=bje;function wje(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Aje()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Aje(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Aje=function(){return!!e})()}var kje=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=wje(this,t,[e]),Object.defineProperty(n,"state",{enumerable:!0,configurable:!0,writable:!0,value:{visible:!1,userColors:[]}}),Object.defineProperty(n,"_clickHandler",{enumerable:!0,configurable:!0,writable:!0,value:function(){n.props.sync?n.setState({visible:!n.state.visible}):n.props.onSelect()}}),Object.defineProperty(n,"_closeOverlay",{enumerable:!0,configurable:!0,writable:!0,value:function(){n.setState({visible:!1})}}),n.state=Object.assign({},n.state),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.className;return t.hideArrow?Gu().createElement(Ex,Object.assign({},this.props.dropdownProps,{overlay:Gu().cloneElement(this.props.overlay,Object.assign({closeOverlay:this._closeOverlay},this.props.overlay.props)),visible:this.state.visible,align:{offset:[-25,3]},onVisibleChange:function(t){e.setState({visible:t})},overlayClassName:Uf(this.props.dropdownClassName,"ne-ui-toolbar-status-dropdown-overlay"),trigger:["click"],getPopupContainer:function(t){return e.props.popupContainer||t},disabled:this.props.disabled}),Gu().createElement("div",{"data-ne-button-arrow":"true",className:Uf(n,"ne-ui-toolbar-status-dropdown-button",this.props.sync?"sync":"",this.props.checked?"checked":"",this.props.disabled?"disabled":"",this.state.visible?"ne-ui-dropdown-open":"")},Zx(this.props.tooltip,Gu().createElement(hye,{name:"dropdown-status-".concat(this.props.name),key:"show",onClick:this._clickHandler,className:"ne-ui-toolbar-status-dropdown-show-button",disabled:this.props.disabled},this.props.children)))):Gu().createElement("div",{"data-ne-button-arrow":"true",className:Uf(n,"ne-ui-toolbar-status-dropdown-button",this.props.sync?"sync":"",this.props.checked?"checked":"",this.props.disabled?"disabled":"",this.state.visible?"ne-ui-dropdown-open":"")},Zx(this.props.tooltip,Gu().createElement(hye,{name:"dropdown-status-".concat(this.props.name),key:"show",onClick:this._clickHandler,className:"ne-ui-toolbar-status-dropdown-show-button",disabled:this.props.disabled},this.props.children)),Gu().createElement(Ex,Object.assign({},this.props.dropdownProps,{overlay:Gu().cloneElement(this.props.overlay,Object.assign({closeOverlay:this._closeOverlay},this.props.overlay.props)),visible:this.state.visible,align:{offset:[-25,3]},onVisibleChange:function(t){e.setState({visible:t})},overlayClassName:Uf(this.props.dropdownClassName,"ne-ui-toolbar-status-dropdown-overlay"),trigger:["click"],getPopupContainer:function(t){return e.props.popupContainer||t},disabled:this.props.disabled}),Zx(this.props.tooltip,Gu().createElement(hye,{name:"dropdown-status-".concat(this.props.name,"-arrow"),key:"dropdown",className:"ne-ui-toolbar-status-dropdown-icon-container",disabled:this.props.disabled},Gu().createElement("span",{className:"ne-ui-toolbar-arrow-down",style:{backgroundImage:"url(".concat(Fw["ne-ui-toolbar-arrow-down"],")")}})))))}}])}(Yu.Component);function _je(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Cje()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Cje(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Cje=function(){return!!e})()}Object.defineProperty(kje,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{onSelect:function(){}}});var Nje=function(e){function t(e){var n;(0,Ke.A)(this,t),n=_je(this,t,[e]),Object.defineProperty(n,"state",{enumerable:!0,configurable:!0,writable:!0,value:{className:"",dropdownClassName:"",iconStyle:void 0,icon:null,themeName:void 0,allowClear:!1,hideArrow:!1,sync:!1}}),Object.defineProperty(n,"_selectHandler",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n.props.descriptor.onEvent("select",e)}});var r=e.descriptor.getInitUIState();return n.state=Object.assign(Object.assign({},n.state),r),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"_onClearHandler",value:function(){}},{key:"componentDidMount",value:function(){var e=this,t=this.props.descriptor;t.isReady()&&this.setState(Object.assign({},t.getUIState())),t.on("statechange",(function(){var n=t.getUIState();gf(n,e.state)&&e.setState(Object.assign({},n))}))}},{key:"render",value:function(){var e=this.state.icon;return Gu().createElement(kje,{disabled:!!this.state.disabled,type:e,sync:this.state.sync,name:this.props.descriptor.name,overlay:this.state.overlay,themeName:this.state.themeName,checked:this.state.checked,onSelect:this._selectHandler,onClear:this._onClearHandler,className:Uf(this.state.className,this.props.className),dropdownClassName:this.state.dropdownClassName,popupContainer:this.props.descriptor.uiLayer,tooltip:this.state.tooltip,allowClear:this.state.allowClear,hideArrow:this.state.hideArrow,dropdownProps:this.state.dropdownProps},"string"==typeof this.state.icon||this.state.iconfont?Gu().createElement(SC,{style:this.state.iconStyle,type:this.state.icon,iconfont:this.state.iconfont,size:this.state.iconSize}):this.state.icon&&Gu().createElement(this.state.icon,{iconStyle:this.state.iconStyle,iconSize:this.state.iconSize}))}}])}(Yu.Component);function Oje(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,xje()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function xje(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xje=function(){return!!e})()}var Eje=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=Oje(this,t,[e]),Object.defineProperty(n,"state",{enumerable:!0,configurable:!0,writable:!0,value:{disabled:!1,className:"",icon:null,iconfont:null}}),Object.defineProperty(n,"_clickHandler",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n.props.descriptor.onEvent("click",e.target)}}),Object.defineProperty(n,"_mouseOverHandler",{enumerable:!0,configurable:!0,writable:!0,value:function(){n.props.descriptor.allowHover&&n.props.descriptor.onEvent("hoverIn")}}),Object.defineProperty(n,"_mouseOutHandler",{enumerable:!0,configurable:!0,writable:!0,value:function(){n.props.descriptor.allowHover&&n.props.descriptor.onEvent("hoverOut")}}),n.state=e.descriptor.getInitUIState()||n.state,n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.descriptor;t.isReady()&&this.setState(Object.assign({},t.getUIState())),t.on("statechange",(function(){var n=t.getUIState();gf(n,e.state)&&e.setState(Object.assign({},n))}))}},{key:"render",value:function(){return Zx(this.state.tooltip,Gu().createElement(hye,{className:Uf("ne-ui-toolbar-button",this.state.className,this.props.className),disabled:!!this.state.disabled,name:this.props.descriptor.name,onMouseOver:this._mouseOverHandler,onMouseOut:this._mouseOutHandler,onClick:this._clickHandler},"string"==typeof this.state.icon||this.state.iconfont?Gu().createElement(SC,{type:this.state.icon,iconfont:this.state.iconfont,size:this.state.iconSize}):this.state.icon&&Gu().createElement(this.state.icon,{iconSize:this.state.iconSize})),this.state.disabled?{visible:!1}:{})}}])}(Yu.Component);function Dje(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Pje()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Pje(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Pje=function(){return!!e})()}var Rje=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=Dje(this,t,[e]),Object.defineProperty(n,"state",{enumerable:!0,configurable:!0,writable:!0,value:{disabled:!1,value:null,className:"",dropdownClassName:"",options:[],tooltip:null,visible:!1}}),Object.defineProperty(n,"_selectHandler",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t=e.key;n.props.descriptor.onEvent("select",t)}}),n.state=e.descriptor.getInitUIState()||n.state,n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.descriptor;t.isReady()&&this.setState(Object.assign({},t.getUIState())),t.on("statechange",(function(){var n=t.getUIState();gf(n,e.state)&&e.setState(Object.assign({},n))}))}},{key:"render",value:function(){var e,t,n=this;return Gu().createElement(Ex,{disabled:this.state.disabled,overlay:this._renderMenu(),overlayClassName:this.state.dropdownClassName,getPopupContainer:function(){return n.props.dropdownContainer},placement:null===(e=this.state.componentProperty)||void 0===e?void 0:e.placement,trigger:["click"],align:null===(t=this.state.componentProperty)||void 0===t?void 0:t.offset,onVisibleChange:function(e){n.setState({visible:e})}},Gu().createElement(uje,{disabled:this.state.disabled,tooltip:this.state.tooltip,className:Uf("ne-ui-toolbar-select-button",this.state.className,this.props.className,this.state.visible?"ne-ui-dropdown-open":"")},Gu().createElement("div",{className:"ne-ui-toolbar-select-value"},this._getLabel(this.state.value))))}},{key:"_getLabel",value:function(e){for(var t=this.state.options,n=0,r=t.length;n<r;n++)if(t[n].value===e)return t[n].label;return""}},{key:"_renderMenu",value:function(){return Gu().createElement(cP,{selectedKeys:[this.state.value+""],className:"ne-ui-select-menu",onClick:this._selectHandler,onMouseDown:function(e){return e.preventDefault()}},this.state.options.map((function(e){return Gu().createElement(cP.Item,{key:e.value+"",className:"ne-ui-select-item"},Gu().createElement("div",{className:"ne-ui-select-item-check-icon"},Gu().createElement(SC,{type:"check"})),Gu().createElement("div",{className:"ne-ui-select-item-label"},e.menuItem))})))}}])}(Yu.Component);function Sje(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Tje()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Tje(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Tje=function(){return!!e})()}var jje=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Sje(this,t,arguments),Object.defineProperty(e,"_delayTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_clickHandler",{enumerable:!0,configurable:!0,writable:!0,value:function(){if(e._delayTimer)return clearTimeout(e._delayTimer),e._delayTimer=null,void e.props.onDblClick(!e.props.checked);e._delayTimer=window.setTimeout((function(){e.props.onClick(!e.props.checked),e._delayTimer=null}),300)}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentWillUnmount",value:function(){this._delayTimer&&clearTimeout(this._delayTimer)}},{key:"render",value:function(){var e=Uf(this.props.className,"ne-ui-toolbar-dbl-toggle-button",this.props.checked?"checked":"");return Zx(this.props.tooltip,Gu().createElement(hye,{icon:this.props.icon,disabled:this.props.disabled,className:e,htmlType:"button",onClick:this._clickHandler,type:"default"},this.props.children))}}])}(Yu.Component);function Ije(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Bje()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Bje(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Bje=function(){return!!e})()}Object.defineProperty(jje,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{checked:!1,onClick:function(){},onDblClick:function(){}}});var Mje=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=Ije(this,t,[e]),Object.defineProperty(n,"state",{enumerable:!0,configurable:!0,writable:!0,value:{disabled:!1,checked:!1,icon:"",iconfont:null}}),Object.defineProperty(n,"_clickHandler",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n.props.descriptor.onEvent("click",e)}}),Object.defineProperty(n,"_dblclickHandler",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n.props.descriptor.onEvent("dblclick",e)}}),n.state=e.descriptor.getInitUIState()||n.state,n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.descriptor;t.isReady()&&this.setState(Object.assign({},t.getUIState())),t.on("statechange",(function(){var n=t.getUIState();gf(n,e.state)&&e.setState(Object.assign({},n))}))}},{key:"render",value:function(){return Gu().createElement(jje,{tooltip:this.state.tooltip,className:"ne-toolbar-widget ne-ui-toolbar-dbl-status-button",checked:this.state.checked,disabled:this.state.disabled,onClick:this._clickHandler,onDblClick:this._dblclickHandler},"string"==typeof this.state.icon||this.state.iconfont?Gu().createElement(SC,{type:this.state.icon,iconfont:this.state.iconfont}):this.state.icon&&Gu().createElement(this.state.icon,{iconSize:this.state.iconSize}))}}])}(Yu.Component);function Fje(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Lje()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Lje(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Lje=function(){return!!e})()}var Uje=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=Fje(this,t,[e]),Object.defineProperty(n,"state",{enumerable:!0,configurable:!0,writable:!0,value:{disabled:!1,className:"",icon:null,iconfont:null,accept:null,multiple:!1}}),Object.defineProperty(n,"_fileInput",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_handleFileChange",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t=e.target;Promise.resolve().then((function(){t.value=""})),n.state.multiple?n.props.descriptor.onEvent("file",Array.from(t.files)):n.props.descriptor.onEvent("file",t.files[0])}}),n.state=e.descriptor.getInitUIState()||n.state,n._fileInput=Gu().createRef(),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.descriptor;t.isReady()&&this.setState(Object.assign({},t.getUIState())),t.on("statechange",(function(){var n=t.getUIState();gf(n,e.state)&&e.setState(Object.assign({},n))}))}},{key:"render",value:function(){return Zx(this.state.tooltip,Gu().createElement(hye,{className:Uf("ne-ui-toolbar-file-button",this.state.className,this.props.className),disabled:this.state.disabled},Gu().createElement("input",{multiple:this.state.multiple,onChange:this._handleFileChange,ref:this._fileInput,accept:this.state.accept,type:"file",className:"ne-ui-toolbar-file-input"}),"string"==typeof this.state.icon||this.state.iconfont?Gu().createElement(SC,{type:this.state.icon,iconfont:this.state.iconfont}):this.state.icon&&Gu().createElement(this.state.icon,{iconSize:this.state.iconSize})),{trigger:["hover"]})}}])}(Yu.Component);function Vje(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Hje()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Hje(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Hje=function(){return!!e})()}var zje=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Vje(this,t,arguments),Object.defineProperty(e,"_clickHandler",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.props.onChange(!e.props.checked)}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){var e=Uf(this.props.className,"ne-ui-toolbar-toggle-button",this.props.checked?"checked":"");return Zx(this.props.tooltip,Gu().createElement(hye,{icon:this.props.icon,disabled:this.props.disabled,name:this.props.name,className:e,htmlType:"button",onClick:this._clickHandler,type:"default"},this.props.children))}}])}(Yu.Component);function Wje(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,qje()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function qje(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qje=function(){return!!e})()}Object.defineProperty(zje,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{checked:!1,onChange:function(){}}});var $je=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=Wje(this,t,[e]),Object.defineProperty(n,"state",{enumerable:!0,configurable:!0,writable:!0,value:{disabled:!1,checked:!1,icon:"",text:"",iconfont:null,tooltip:null}}),Object.defineProperty(n,"_changeHandler",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n.props.descriptor.onEvent("change",e)}}),n.state=e.descriptor.getInitUIState()||n.state,n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.descriptor;t.isReady()&&this.setState(Object.assign({},t.getUIState())),t.on("statechange",(function(){var n=t.getUIState();gf(n,e.state)&&e.setState(Object.assign({},n))}))}},{key:"render",value:function(){var e=Uf("ne-toolbar-widget","ne-ui-toolbar-status-button",this.state.className);return Gu().createElement(zje,{className:e,checked:this.state.checked,disabled:this.state.disabled,name:this.props.descriptor.name,tooltip:this.state.tooltip,onChange:this._changeHandler},"string"==typeof this.state.icon||this.state.iconfont?Gu().createElement(SC,{type:this.state.icon,iconfont:this.state.iconfont,size:this.state.iconSize}):this.state.icon&&Gu().createElement(this.state.icon,{iconSize:this.state.iconSize}),this.state.text&&Gu().createElement("span",null,this.state.text))}}])}(Yu.Component),Kje=function(){return(0,$e.A)((function e(t,n,r,o){(0,Ke.A)(this,e),Object.defineProperty(this,"toolbarOption",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"_descriptors",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_overlayContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_containerNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._descriptors=t,this._overlayContainer=n,this._containerNode=r}),[{key:"createWidgets",value:function(){var e=this;return this._descriptors.map((function(t,n){return e.createWidget(t,n)}))}},{key:"createWidget",value:function(e,t){if(e===KTe)return Gu().createElement(ZTe,{key:"divider".concat(t),className:"ne-toolbar-widget"});var n=e.constructor.Type;return this._createNormalWidget(n,t,e)}},{key:"_createNormalWidget",value:function(e,t,n){switch(e){case"Button":return Gu().createElement(Eje,{index:t,containerNode:this._containerNode,className:"ne-toolbar-widget",key:n.key||n.name,descriptor:n});case"StatusButton":return Gu().createElement($je,{index:t,containerNode:this._containerNode,className:"ne-toolbar-widget",key:n.key||n.name,descriptor:n});case"DoubleClickStatusButton":return Gu().createElement(Mje,{index:t,containerNode:this._containerNode,className:"ne-toolbar-widget",key:n.key||n.name,descriptor:n});case"FileButton":return Gu().createElement(Uje,{index:t,containerNode:this._containerNode,className:"ne-toolbar-widget",key:n.key||n.name,descriptor:n});case"EmojiButton":return Gu().createElement(yje,{className:"ne-toolbar-widget",key:n.key||n.name,descriptor:n});case"Select":return Gu().createElement(Rje,{index:t,dropdownContainer:this._containerNode,className:"ne-toolbar-widget",key:n.key||n.name,descriptor:n});case"DropdownButton":return Gu().createElement(pje,{index:t,dropdownContainer:this._overlayContainer,className:"ne-toolbar-widget",key:n.key||n.name,descriptor:n});case"InlineContentDropdownButton":return Gu().createElement(vje,{index:t,dropdownContainer:this._overlayContainer,className:"ne-toolbar-widget",key:n.key||n.name,descriptor:n});case"CardSelect":return Gu().createElement(nje,{index:t,containerNode:this._containerNode,overlayContainer:this._overlayContainer,className:"ne-toolbar-widget",key:n.key||n.name,descriptor:n});case"Custom":return Gu().createElement(JTe,{index:t,containerNode:this._containerNode,className:"ne-toolbar-widget",key:n.key||n.name,descriptor:n});case"ColorPickerButton":return Gu().createElement(ije,{index:t,containerNode:this._containerNode,className:"ne-toolbar-widget",key:n.key||n.name,descriptor:n,colorButtonComponent:this.toolbarOption.getCustomComponent("colorButton")});case"StatusDropdownButton":return Gu().createElement(Nje,{index:t,containerNode:this._containerNode,className:"ne-toolbar-widget",key:n.key||n.name,descriptor:n});default:bt(!1,"plugins/toolbar/src/editor/helper/ToolbarWidgetsController.tsx:212")}}},{key:"disable",value:function(){this._descriptors.forEach((function(e){e!==KTe&&e.disable()}))}},{key:"enable",value:function(){this._descriptors.forEach((function(e){e!==KTe&&e.enable()}))}},{key:"destroy",value:function(){this._descriptors.forEach((function(e){e!==KTe&&e.destroy()})),this._descriptors=null}},{key:"close",value:function(){this._descriptors.forEach((function(e){e!==KTe&&e.close()}))}},{key:"refresh",value:function(){var e;null===(e=this._descriptors)||void 0===e||e.forEach((function(e){e!==KTe&&e.refresh()}))}}])}(),Yje=function(){return(0,$e.A)((function e(t,n,r,o,i,a){var l=this;(0,Ke.A)(this,e),Object.defineProperty(this,"toolbarOption",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"_mountNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_containerNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_overlayContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_disabled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_fixed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_toolbarWidgetsController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_toolbarView",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),this._mountNode=n,this._overlayContainer=o,this._containerNode=document.createElement("div"),pc(this,this._containerNode,"mousedown",(function(e){e.target&&"nodeName"in e.target&&!lTe(e.target)&&e.preventDefault()})),this._containerNode.setAttribute("data-toolbar-name",t),this._containerNode.className="ne-ui-toolbar lake-diagram-prevent-mouse-select",r.forEach((function(e){"|"!==e&&(e.toolbarNode=l._containerNode)})),this._toolbarWidgetsController=new Kje(r,o,this._containerNode,this.toolbarOption),this._fixed=!!a,this._mountNode.appendChild(this._containerNode)}),[{key:"isFixed",get:function(){return this._fixed}},{key:"destroy",value:function(){this._toolbarWidgetsController.destroy(),Gl().unmountComponentAtNode(this._containerNode),this._containerNode.remove(),this._containerNode=null}},{key:"enable",value:function(){this._disabled=!1,this._toolbarWidgetsController.enable()}},{key:"disable",value:function(){this._disabled=!0,this._toolbarWidgetsController.disable()}},{key:"close",value:function(){this._toolbarWidgetsController.close()}},{key:"show",value:function(){this._containerNode.style.display=""}},{key:"hide",value:function(){this._containerNode.style.display="none",this._toolbarView.current&&this._toolbarView.current.closeMoreButton()}},{key:"render",value:function(){var e=this,t=this._toolbarWidgetsController.createWidgets().filter(Boolean);Gl().render(Gu().createElement($Te,{ref:this._toolbarView,widgets:t,overlayContainer:this._containerNode,onMoreOpenToggle:function(t){t?e._mountNode.classList.add("more-opened"):e._mountNode.classList.remove("more-opened")}}),this._containerNode)}},{key:"refresh",value:function(){this._refresh()}},{key:"_refresh",value:function(){this._disabled||this._toolbarWidgetsController.refresh()}}])}(),Gje=function(){return(0,$e.A)((function e(t,n,r){var o=this;(0,Ke.A)(this,e),Object.defineProperty(this,"_cancelThemeChange",{enumerable:!0,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(this,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"editor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_toolbarOption",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_defaultUI",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_descriptorDefines",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_uiStack",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_agents",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_disabled",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this._rootNode=t,this.editor=n,this._kernel=n.kernel,this._toolbarOption=r,this.editor.on("selectionchange",Qm()((function(){o._getCurrentToolbarUI().refresh()}),300)),this.editor.on("contentchange",Qm()((function(){o._getCurrentToolbarUI().refresh()}),300))}),[{key:"init",value:function(){var e=this;this._defaultUI=this._createToolbarUI(cde),this.editor.on("focusstatuschange",(function(t){t.focused&&e.enable()})),this.editor.on("exitFullscreen",(function(){e._defaultUI&&e._defaultUI.close()})),xc(this,this.editor.theme,"themeChange",(function(){e.refresh()}))}},{key:"destroy",value:function(){var e,t;null===(e=this._defaultUI)||void 0===e||e.destroy(),this._agents.forEach((function(e){e.destroy()})),null===(t=this._cancelThemeChange)||void 0===t||t.call(this),this._descriptorDefines=null}},{key:"enable",value:function(){this._disabled&&(this._getCurrentToolbarUI().enable(),this._disabled=!1)}},{key:"disable",value:function(){this._disabled||(this._getCurrentToolbarUI().disable(),this._disabled=!0)}},{key:"refresh",value:function(){this._disabled||this._getCurrentToolbarUI().refresh()}},{key:"registerWidget",value:function(e,t){var n=this,r={};"string"==typeof e?r[e]=t:r=e,Object.keys(r).forEach((function(e){n._descriptorDefines[e]=r[e]}))}},{key:"registerToolbar",value:function(e,t){var n=new LTe(this,e,t);return this._agents.push(n),n}},{key:"_openUI",value:function(e){var t=this._getCurrentToolbarUI();t!==e&&(t.isFixed?e.hide():(this._uiStack.push(e),e.enable(),e.show(),t&&(t.disable(),t.hide())))}},{key:"_closeUI",value:function(e){var t=this._getCurrentToolbarUI();if(t===e){this._uiStack.pop();var n=this._getCurrentToolbarUI();bt(n,"plugins/toolbar/src/editor/toolbar.ts:182"),n.enable(),n.show(),t.disable(),t.hide()}else{var r=this._uiStack.indexOf(e);-1!==r&&this._uiStack.splice(r,1)}}},{key:"_createToolbarUI",value:function(e,t){var n=this,r=this.editor;t||(t=this._toolbarOption.getConfig(e));var o=t,i=o.items,a=void 0===i?[]:i,l=o.fixed,u=a.map((function(e,t){var o;if(e===KTe)return KTe;var i,a="string"==typeof e?n._descriptorDefines[e]:e;return a?("function"==typeof a?i=new a(r,e):a.clazz&&(i=new a.clazz(r,"string"==typeof e?e:(null===(o=a.pluginContext)||void 0===o?void 0:o.name)||"toolbar-".concat(t),a.pluginContext)),i.init(),i):null})).filter(Boolean).reduce((function(e,t,n,r){if(!t)return e;if(n===r.length-1){for(e.push(t);e.length&&e[e.length-1]===KTe;)e.pop();return e}return e[e.length-1]===KTe&&t===KTe||e.push(t),e}),[]),c=new Yje(e,this._rootNode,u,this.editor.overlayContainer,this._toolbarOption,l);return c.render(),c}},{key:"_getCurrentToolbarUI",value:function(){return this._uiStack[this._uiStack.length-1]||this._defaultUI}}])}(),Jje={agentConfig:(0,Ha.A)((0,Ha.A)((0,Ha.A)({},hde.DEFAULT,{items:CM}),hde.TABLE,{items:OM}),hde.CODEBLOCK,{items:["codeblock-clear","codeblock-bold","codeblock-italic","codeblock-strikethrough","codeblock-underline","|","codeblock-color","codeblock-background"]})},Xje=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t.force?this._option=Object.assign(Object.assign({},Jje),t):this._option=Ww()({},Jje,t)}),[{key:"getConfig",value:function(e){return this._option.agentConfig[e]||{}}},{key:"getCustomComponent",value:function(e){return this._option.customComponent[e]}}])}();function Qje(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Zje()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Zje(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Zje=function(){return!!e})()}Object.defineProperty(Xje,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"toolbar"});var eIe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Qje(this,t,arguments),Object.defineProperty(e,"_toolbar",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"themeBinder",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){this._toolbar=new Gje(this.service.layer,e,this.option),this.themeBinder=this.editor.theme.bindThemeSelector(this.service.layer)}},{key:"destroy",value:function(){var e;null===(e=this._toolbar)||void 0===e||e.destroy(),this.themeBinder&&this.themeBinder(),this._toolbar=null,Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}},{key:"afterInit",value:function(){var e=this;this._toolbar.init(),this.editor.kernel.onPluginEvent("typographyChange",(function(){e._toolbar.refresh()})),this.editor.kernel.onPluginEvent("defaultFontsizeChange",(function(){e._toolbar.refresh()})),this.editor.renderer.onPluginEvent("mobileViewportChange",(function(t){e.autoAlignBottomInMobile(t)}))}},{key:"autoAlignBottomInMobile",value:function(e){var t=this.editor.uiLayer.offsetHeight,n=this.editor.editorExtraBox.offsetHeight,r=this.editor.uiExtraBox.offsetHeight;this.editor.editorNode.style.height=e+"px",this.editor.scrollNode.parentNode.style.height=e-t-r+"px",this.editor.renderer.domRootNode.style.minHeight=e-t-n-r+"px"}}])}(Fh);function tIe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,nIe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function nIe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nIe=function(){return!!e})()}Object.defineProperty(eIe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:Hse.pluginName}),Object.defineProperty(eIe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:Xje}),Object.defineProperty(eIe,"Service",{enumerable:!0,configurable:!0,writable:!0,value:FTe});var rIe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=tIe(this,t,arguments),Object.defineProperty(e,"allowHover",{enumerable:!0,configurable:!0,writable:!0,value:!0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"onEvent",value:function(e,t){"click"===e&&(this.pluginContext.isFullscreen()?this.pluginContext.exit():this.pluginContext.enter(),this.emit("statechange"))}},{key:"getInitUIState",value:function(){return{disabled:!1,value:null,icon:this.pluginContext.isFullscreen()?"t-exit-fullscreen":"t-fullscreen",iconSize:18,className:"ne-ui-toolbar-fullscreen",tooltip:MEe.getTooltip(this.editor,this.pluginContext.isFullscreen()?sc("退出全屏"):sc("全屏"),"fullscreen")}}},{key:"getOverlayContainer",value:function(){return this.editor.overlayContainer}},{key:"getUIState",value:function(){return{icon:this.pluginContext.isFullscreen()?"t-exit-fullscreen":"t-fullscreen",tooltip:MEe.getTooltip(this.editor,this.pluginContext.isFullscreen()?sc("退出全屏"):sc("全屏"),"fullscreen")}}}])}(MEe);function oIe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,iIe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function iIe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(iIe=function(){return!!e})()}Object.defineProperty(rIe,"Type",{enumerable:!0,configurable:!0,writable:!0,value:"Button"});var aIe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=oIe(this,t,arguments),Object.defineProperty(e,"_exitFullScreenBox",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_enterFullScreenBox",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_isFullscreen",{enumerable:!0,configurable:!0,writable:!0,value:!1}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){var n;this.option.enable&&(e.editorNode.classList.add("ne-allow-fullscreen"),"flow"===this.option.uiType?this.initFlowButton(e):"toolbar"===this.option.uiType&&this.initToolbarButton(e),null===(n=t.getService(kRe.ID))||void 0===n||n.registerHotKey(CEe.fullscreen.name,CEe.fullscreen.keys,(function(t){if(t.stop(),!e.isMaxView){var n=e.getService(DTe.ID);n&&(n.isFullscreen()?n.exitFullscreen():n.enterFullscreen())}})))}},{key:"initToolbarButton",value:function(e){var t=e.getService(jEe.ID);null==t||t.registerToolbarWidget(Bse.toolbar.fullscreen,{clazz:rIe,pluginContext:{isFullscreen:this.isFullscreen.bind(this),enter:this.enterFullscreen.bind(this),exit:this.exitFullscreen.bind(this)}})}},{key:"initFlowButton",value:function(e){var t=this;this._exitFullScreenBox=fc('<div class="ne-ui-exit-fullscreen"></div>'),this._enterFullScreenBox=fc('<div class="ne-ui-enter-fullscreen"></div>'),e.editorNode.appendChild(this._exitFullScreenBox),e.editorNode.appendChild(this._enterFullScreenBox),e.kernel.once("document.ready",(function(){t.render()})),pc(this,this._exitFullScreenBox,"mousedown",(function(e){e.preventDefault()})),pc(this,this._exitFullScreenBox,"click",(function(){t.service.exitFullscreen()})),pc(this,this._enterFullScreenBox,"mousedown",(function(e){e.preventDefault()})),pc(this,this._enterFullScreenBox,"click",(function(){t.service.enterFullscreen()}))}},{key:"render",value:function(){var e=this.renderer.requireService(kRe.ID).getHotKeyByName("fullscreen").text;Gl().render(Zx(e,Gu().createElement(SC,{type:"t-fullscreen"})),this._enterFullScreenBox),Gl().render(Zx(e,Gu().createElement(SC,{type:"t-exit-fullscreen"})),this._exitFullScreenBox)}},{key:"isFullscreen",value:function(){return this._isFullscreen}},{key:"enterFullscreen",value:function(){var e=this.editor;this._isFullscreen||(e.editorNode.parentNode.classList.add("ne-ui-fullscreen"),this._isFullscreen=!0,e.emit("enterFullscreen"),e.emitEvent("fullscreenStatusChange",!0))}},{key:"exitFullscreen",value:function(){var e=this.editor;this._isFullscreen&&(e.editorNode.parentNode.classList.remove("ne-ui-fullscreen"),this._isFullscreen=!1,e.emit("exitFullscreen"),e.emitEvent("fullscreenStatusChange",!1))}}])}(Fh);Object.defineProperty(aIe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:"fullscreen"}),Object.defineProperty(aIe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:jTe}),Object.defineProperty(aIe,"Service",{enumerable:!0,configurable:!0,writable:!0,value:STe});var lIe=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Ww()({},t)}),[{key:"editUI",get:function(){return this._option.editUI}},{key:"onAfterEditorPluginInit",get:function(){return this._option.onAfterEditorPluginInit}}])}();function uIe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,cIe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function cIe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(cIe=function(){return!!e})()}Object.defineProperty(lIe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"heading"});var sIe=function(){return[{menuItem:Gu().createElement("div",{className:"ne-ui-select-content"},Gu().createElement("span",{className:"ne-ui-item-content"},sc("正文")),Gu().createElement("span",{className:"ne-ui-command-style"},of(["opt","cmd","0"]))),value:"p",label:sc("正文")},{menuItem:Gu().createElement("div",{className:"ne-ui-select-content"},Gu().createElement("span",{className:"ne-ui-item-heading1"},sc("标题1")),Gu().createElement("span",{className:"ne-ui-command-style"},of(["opt","cmd","1"]))),value:"h1",label:sc("标题1")},{menuItem:Gu().createElement("div",{className:"ne-ui-select-content"},Gu().createElement("span",{className:"ne-ui-item-heading2"},sc("标题2")),Gu().createElement("span",{className:"ne-ui-command-style"},of(["opt","cmd","2"]))),value:"h2",label:sc("标题2")},{menuItem:Gu().createElement("div",{className:"ne-ui-select-content"},Gu().createElement("span",{className:"ne-ui-item-heading3"},sc("标题3")),Gu().createElement("span",{className:"ne-ui-command-style"},of(["opt","cmd","3"]))),value:"h3",label:sc("标题3")},{menuItem:Gu().createElement("div",{className:"ne-ui-select-content"},Gu().createElement("span",{className:"ne-ui-item-heading4"},sc("标题4")),Gu().createElement("span",{className:"ne-ui-command-style"},of(["opt","cmd","4"]))),value:"h4",label:sc("标题4")},{menuItem:Gu().createElement("div",{className:"ne-ui-select-content"},Gu().createElement("span",{className:"ne-ui-item-heading5"},sc("标题5")),Gu().createElement("span",{className:"ne-ui-command-style"},of(["opt","cmd","5"]))),value:"h5",label:sc("标题5")},{menuItem:Gu().createElement("div",{className:"ne-ui-select-content"},Gu().createElement("span",{className:"ne-ui-item-heading5"},sc("标题6")),Gu().createElement("span",{className:"ne-ui-command-style"},of(["opt","cmd","6"]))),value:"h6",label:sc("标题6")}]},dIe=sIe();ac.on(ic.CHANGE,(function(){dIe=sIe()}));var fIe=function(e){function t(){return(0,Ke.A)(this,t),uIe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"onEvent",value:function(e,t){bt("select"===e,"plugins/heading/src/editor/style-toolbar-descriptor.tsx:115"),this.editor.execCommand("style",t)}},{key:"getInitUIState",value:function(){return{disabled:this.disabled,value:null,className:"ne-ui-toolbar-format",dropdownClassName:"ne-ui-toolbar-format-dropdown ".concat(this.editor.theme.getThemeSelector()),options:dIe,tooltip:sc("正文与标题"),componentProperty:{placement:"bottomLeft"}}}},{key:"getUIState",value:function(){var e=this.editor,t=this.name,n=e.queryCommandValue(t),r=n&&"mixed"!==n?n:null;return{disabled:this.disabled||!e.queryCommandEnabled(t),value:r,options:dIe,dropdownClassName:"ne-ui-toolbar-format-dropdown ".concat(this.editor.theme.getThemeSelector())}}}])}(MEe);function hIe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,pIe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function pIe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pIe=function(){return!!e})()}Object.defineProperty(fIe,"Type",{enumerable:!0,configurable:!0,writable:!0,value:"Select"});var vIe=["h1","h2","h3","h4","h5","h6"],mIe=[1,2,3,4,5,6],gIe=mIe.map((function(e){return"h".concat(e)})),bIe=function(e){function t(){return(0,Ke.A)(this,t),hIe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){var n,r=this;if(this.option.editUI){var o={factory:function(t){return e.createBoxUIByClazz(r.option.editUI,t)}};t.registerBoxUI(vIe.reduce((function(e,t){return e[t]=o,e}),{}))}t.onPluginEvent("headingCollapseChange",(function(){var t=[];e.inCollapsedNodes.forEach((function(e){var n,r;e.isInCollapsed||(null===(r=null===(n=Hy(e.viewNode))||void 0===n?void 0:n.$unCollapsed)||void 0===r||r.call(n),t.push(e))})),e.removeInCollapsedNodes(t)})),e.onPluginEvent("tocPositionChange",(function(e){t.execCommand("headingUnfold",e)}));var i=e.getService(jEe.ID);null==i||i.registerToolbarWidget(qq.toolbar.style,fIe),null===(n=e.getService(xEe.ID))||void 0===n||n.registerCardSelect(Object.keys(qq.cardSelect).reduce((function(e,t,n){var r=n+1;return e[t]={type:"TextItem",mainIcon:"editor-main-title-".concat(r),icon:"card-h".concat(r),iconSize:16,label:sc("标题{headingNo}",{headingNo:r}),mainSearch:"/h".concat(r),keywords:"标题".concat(r,", h").concat(r,", /h").concat(r,", heading, heading").concat(r)},e}),{})),e.onPluginEvent("insertCardByUI",(function(e){var n=e.name;gIe.includes(n)&&(n===t.queryCommandValue("style")?r.editor.execCommand("style","p"):r.editor.execCommand("style",n))})),this.option.onAfterEditorPluginInit&&this.option.onAfterEditorPluginInit(this.editor,mIe)}}])}(Fh);function yIe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,wIe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function wIe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wIe=function(){return!!e})()}Object.defineProperty(bIe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:qq.pluginName}),Object.defineProperty(bIe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:lIe});var AIe=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=yIe(this,t,[e,n]),Object.defineProperty(r,"_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r._name=n,r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"name",get:function(){return this._name}},{key:"onEvent",value:function(e){bt("click"===e,"plugins/history/src/editor/history-toolbar-descriptor.ts:27"),this.editor.execCommand(this.name)}},{key:"getInitUIState",value:function(){var e={undo:sc("撤销"),redo:sc("重做")};return{disabled:this.disabled,icon:"editor-".concat(this.name),tooltip:MEe.getTooltip(this.editor,e[this.name],this.name)}}},{key:"getUIState",value:function(){var e=this.editor,t=this.name;return{disabled:this.disabled||e.queryCommandState(t)===st}}}])}(MEe);function kIe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,_Ie()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function _Ie(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_Ie=function(){return!!e})()}Object.defineProperty(AIe,"Type",{enumerable:!0,configurable:!0,writable:!0,value:"Button"});var CIe=function(e){function t(){return(0,Ke.A)(this,t),kIe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=e.getService(jEe.ID);null==t||t.registerToolbarWidget((0,Ha.A)((0,Ha.A)({},A$.toolbar.undo,AIe),A$.toolbar.redo,AIe))}}])}(Fh);Object.defineProperty(CIe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:A$.pluginName});var NIe=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Ww()({},t)}),[{key:"editUI",get:function(){return this._option.editUI}}])}();function OIe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(OIe=function(){return!!e})()}function xIe(e){return function(e){function t(){return(0,Ke.A)(this,t),function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,OIe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){this.containerNode.innerHTML='<div class="ne-hr-line"></div>'}}])}(e)}Object.defineProperty(NIe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"hr"});var EIe=xIe;function DIe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,PIe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function PIe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(PIe=function(){return!!e})()}var RIe=function(e){function t(e){var n;(0,Ke.A)(this,t);for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return n=DIe(this,t,[].concat(o)),Object.defineProperty(n,"editor",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(n,"_ui",{enumerable:!0,configurable:!0,writable:!0,value:null}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){this.pluginOption.editUI&&(t.$EditableCardUI=this.pluginOption.editUI),this._ui=this.editor.createCardUI(this)}},{key:"destroy",value:function(){var e;null===(e=this._ui)||void 0===e||e.destroy()}}])}(Fy);function SIe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,TIe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function TIe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(TIe=function(){return!!e})()}Object.defineProperty(RIe,"$EditableCardUI",{enumerable:!0,configurable:!0,writable:!0,value:xIe(zh()())});var jIe=function(e){function t(){return(0,Ke.A)(this,t),SIe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"onEvent",value:function(e){bt("click"===e,"plugins/hr/src/editor/hr-toolbar-descriptor.ts:9"),this.editor.execCommand("hr")}},{key:"getInitUIState",value:function(){return{disabled:this.disabled,icon:"t-hr",className:"ne-ui-toolbar-hr",tooltip:MEe.getTooltip(this.editor,sc("插入分割线"),"hr")}}},{key:"getUIState",value:function(){var e=this.editor;return{disabled:this.disabled||!e.queryCommandEnabled("hr")}}}])}(MEe);function IIe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,BIe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function BIe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(BIe=function(){return!!e})()}Object.defineProperty(jIe,"Type",{enumerable:!0,configurable:!0,writable:!0,value:"Button"});var MIe=function(e){function t(){return(0,Ke.A)(this,t),IIe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,n){var r;n.registerBlockCard(this,q$.cardName,{factory:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return vl(RIe,[e].concat(n))}});var o=e.getService(jEe.ID);null==o||o.registerToolbarWidget(q$.toolbar,jIe),n.hasExtendMethod("registerHotKey")&&n.registerHotKey(CEe[q$.cardName].name,CEe[q$.cardName].keys,(function(e){e.stop(),n.execCommand("hr")})),e.onPluginEvent("insertCardByUI:".concat(t.UI_NAME),(function(){n.execCommand("hr")})),null===(r=e.getService(xEe.ID))||void 0===r||r.registerCardSelect(q$.cardSelect,{type:"TextItem",icon:"editor-main-split-line",label:CEe[q$.cardName].text,description:sc("分割线"),mainSearch:"/fgx",name:q$.cardSelect,keywords:CEe[q$.cardName].keywords})}}])}(Fh);function FIe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,LIe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function LIe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(LIe=function(){return!!e})()}Object.defineProperty(MIe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:q$.pluginName}),Object.defineProperty(MIe,"UI_NAME",{enumerable:!0,configurable:!0,writable:!0,value:q$.cardName}),Object.defineProperty(MIe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:NIe});var UIe="editor-indent";function VIe(e){var t={indent:sc("增加缩进"),outdent:sc("减少缩进")};return[{icon:UIe,label:t.indent,value:"indent",tooltip:MEe.getTooltip(e,"","indent")},{icon:"editor-outdent",label:t.outdent,value:"outdent",tooltip:MEe.getTooltip(e,"","outdent")}]}var HIe=function(e){function t(){return(0,Ke.A)(this,t),FIe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"onEvent",value:function(e,t){bt("select"===e,"plugins/indent/src/editor/indent-toolbar-descriptor.ts:38"),bt(["indent","outdent"].includes(t),"plugins/indent/src/editor/indent-toolbar-descriptor.ts:39"),this.editor.execCommand(t)}},{key:"getInitUIState",value:function(){return{disabled:this.disabled,allowCheck:!1,value:null,icon:UIe,tooltip:sc("缩进调整"),className:"ne-ui-toolbar-indent",dropdownClassName:"ne-ui-toolbar-indent-dropdown",items:VIe(this.editor)}}},{key:"getUIState",value:function(){var e=this.editor;return{disabled:this.disabled||e.queryCommandState("indent")===st}}}])}(MEe);function zIe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,WIe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function WIe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(WIe=function(){return!!e})()}Object.defineProperty(HIe,"Type",{enumerable:!0,configurable:!0,writable:!0,value:"DropdownButton"});var qIe=function(e){function t(){return(0,Ke.A)(this,t),zIe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=e.getService(jEe.ID);null==t||t.registerToolbarWidget(tY.toolbar,HIe)}}])}(Fh);Object.defineProperty(qIe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:tY.pluginName});var $Ie=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":(0,Gn.A)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},KIe=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":(0,Gn.A)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},YIe=function(){return(0,$e.A)((function e(t,n){var r=this;(0,Ke.A)(this,e),Object.defineProperty(this,"cardData",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"option",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"isFocus",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"overlayContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onLabelChange",{enumerable:!0,configurable:!0,writable:!0,value:function(e){r.setLabel(e)}}),Object.defineProperty(this,"getMemoLabels",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e,t,n=null===(t=null===(e=r.option)||void 0===e?void 0:e.getMemoLabels)||void 0===t?void 0:t.call(e,r.cardData.getCardValue());return n?Array.from(n):null}}),Object.defineProperty(this,"onColorIndexChange",{enumerable:!0,configurable:!0,writable:!0,value:function(e){r.setColorIndex(e)}}),Object.defineProperty(this,"onClose",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e,t;null===(t=null===(e=r.option)||void 0===e?void 0:e.onClose)||void 0===t||t.call(e)}}),Object.defineProperty(this,"getColorIndex",{enumerable:!0,configurable:!0,writable:!0,value:function(){return r.cardData.getColorIndex()}}),Object.defineProperty(this,"getStyle",{enumerable:!0,configurable:!0,writable:!0,value:function(e){return r.cardData.getStyle(e)}}),Object.defineProperty(this,"getLabel",{enumerable:!0,configurable:!0,writable:!0,value:function(){return r.cardData.getLabel()}}),this.isFocus=(null==n?void 0:n.focus)||!1,this.overlayContainer=null==n?void 0:n.overlayContainer}),[{key:"setColorIndex",value:function(e){this.cardData.setColorIndex(e)}},{key:"setLabel",value:function(e){this.cardData.setLabel(e)}}])}();function GIe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,JIe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function JIe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(JIe=function(){return!!e})()}$Ie([ih,KIe("design:type",Function),KIe("design:paramtypes",[Number]),KIe("design:returntype",void 0)],YIe.prototype,"setColorIndex",null),$Ie([ih,KIe("design:type",Function),KIe("design:paramtypes",[String]),KIe("design:returntype",void 0)],YIe.prototype,"setLabel",null);var XIe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=GIe(this,t,arguments),Object.defineProperty(e,"_onItemClick",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=t.colorIndex,r=t.label;e.props.viewModel.onColorIndexChange(n),e.props.viewModel.onLabelChange(r)}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"shouldComponentUpdate",value:function(e){return!this.props.panelShow&&e.panelShow}},{key:"render",value:function(){var e=this,t=this.props.viewModel.getMemoLabels();if(!t)return null;var n=t.map((function(e){var t=e.match(/([0-9]+)(-)(.+)/);return t&&t.length?{colorIndex:+t[1],label:t[3]}:null})).filter((function(e){return!!e}));return n.length?Gu().createElement("div",{className:"ne-card-label-memos"},n.reverse().map((function(t,n){var r=t.colorIndex,o=t.label;return Gu().createElement("div",{className:"ne-card-label-memos-item",key:"".concat(r,"-").concat(o),tabIndex:-1,"data-type":"label","data-label":"".concat(r,"-").concat(o),"data-tab-level":"label-tab-level-".concat(e.props.tabLevel),onFocus:e.props.onFocus,onKeyDown:e.props.onKeyDown,"data-tab-id":"label-tab-".concat(e.props.tabIndexStart+n),style:e.props.viewModel.getStyle({colorIndex:r,label:o}),onClick:e._onItemClick.bind(e,{colorIndex:r,label:o})},o)}))):null}}])}(Yu.Component);function QIe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ZIe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ZIe(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function ZIe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function eBe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,tBe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function tBe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(tBe=function(){return!!e})()}var nBe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=eBe(this,t,arguments),Object.defineProperty(e,"_inputRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"_tabBoxRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"_focusId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_focusLevel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"state",{enumerable:!0,configurable:!0,writable:!0,value:{panelShow:!1}}),Object.defineProperty(e,"openEditor",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.state.panelShow||e.setState({panelShow:!0})}}),Object.defineProperty(e,"_visibleChange",{enumerable:!0,configurable:!0,writable:!0,value:function(t){e.setState({panelShow:t}),t||e.props.viewModel.onClose()}}),Object.defineProperty(e,"_handleInputKeyDown",{enumerable:!0,configurable:!0,writable:!0,value:function(t){t.stopPropagation(),t.keyCode!==Ws&&(Ks.isEnter(t)||Ks.isEscape(t)?e._handleClosePanel():Ks.isTab(t)?(t.preventDefault(),e._handleTabSwitch(t.shiftKey)):(Ks.isArrowUp(t)||Ks.isArrowDown(t))&&(t.stopPropagation(),t.preventDefault(),e._handleUpDownSwitch(Ks.isArrowUp(t))))}}),Object.defineProperty(e,"_handleLabelChange",{enumerable:!0,configurable:!0,writable:!0,value:function(t){e.props.viewModel.onLabelChange(t.target.value)}}),Object.defineProperty(e,"_handleTabSwitch",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n;if(e._tabBoxRef.current){var r,o=[],i=QIe(e._tabBoxRef.current.querySelectorAll("[data-tab-id]"));try{for(i.s();!(r=i.n()).done;){var a=r.value;o.push(a.dataset.tabId)}}catch(e){i.e(e)}finally{i.f()}var l=o.indexOf(e._focusId),u=o[((t?l-1:l+1)+o.length)%o.length];null===(n=e._tabBoxRef.current.querySelector('[data-tab-id="'.concat(u,'"]')))||void 0===n||n.focus()}}}),Object.defineProperty(e,"_handleUpDownSwitch",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n;if(e._tabBoxRef.current){var r,o=[],i=QIe(e._tabBoxRef.current.querySelectorAll("[data-tab-level]"));try{for(i.s();!(r=i.n()).done;){var a=r.value;o.indexOf(a.dataset.tabLevel)<0&&o.push(a.dataset.tabLevel)}}catch(e){i.e(e)}finally{i.f()}var l=o.indexOf(e._focusLevel),u=o[((t?l-1:l+1)+o.length)%o.length];null===(n=e._tabBoxRef.current.querySelector('[data-tab-level="'.concat(u,'"]')))||void 0===n||n.focus()}}}),Object.defineProperty(e,"_handleEnterKeydown",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=t.target.dataset,r=n.type,o=n.colorIndex,i=n.label;if("color"===r)+o===e.props.viewModel.getColorIndex()?e._handleClosePanel():e._handleColorChange(+o||0);else if("label"===r&&"string"==typeof i){var a=i.split("-"),l=(0,bI.A)(a),u=l[0],c=l.slice(1),s=(null==c?void 0:c.join("-"))||"";+u===e.props.viewModel.getColorIndex()&&s===e.props.viewModel.getLabel()?e._handleClosePanel():(e._handleColorChange(+u||0),e.props.viewModel.onLabelChange(s))}}}),Object.defineProperty(e,"_handleFocus",{enumerable:!0,configurable:!0,writable:!0,value:function(t){e._focusId=t.target.dataset.tabId,e._focusLevel=t.target.dataset.tabLevel}}),Object.defineProperty(e,"_handleKeyDown",{enumerable:!0,configurable:!0,writable:!0,value:function(t){t.ctrlKey||t.metaKey||t.keyCode===Ws||(Ks.isTab(t)&&(t.stopPropagation(),t.preventDefault(),e._handleTabSwitch(t.shiftKey)),(Ks.isArrowLeft(t)||Ks.isArrowRight(t))&&(t.stopPropagation(),t.preventDefault(),e._handleTabSwitch(Ks.isArrowLeft(t))),(Ks.isArrowUp(t)||Ks.isArrowDown(t))&&(t.stopPropagation(),t.preventDefault(),e._handleUpDownSwitch(Ks.isArrowUp(t))),Ks.isEnter(t)&&(t.stopPropagation(),t.preventDefault(),e._handleEnterKeydown(t)))}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidUpdate",value:function(e,t){if(this.state.panelShow&&t.panelShow!==this.state.panelShow&&this._inputRef.current){var n=this._inputRef.current,r=null==n?void 0:n.input;if(!r)return;var o=function e(){r&&r.isConnected&&(r.getBoundingClientRect().y<0?requestAnimationFrame(e):(n.focus(),n.select()))};setTimeout((function(){requestAnimationFrame(o)}),35)}}},{key:"render",value:function(){var e=this.props.viewModel,t=e.getColorIndex(),n=e.getStyle();return Gu().createElement(bR,{trigger:"click",getPopupContainer:function(t){return e.overlayContainer||t},onVisibleChange:this._visibleChange,overlayClassName:"ne-label-overlay",visible:this.state.panelShow,placement:"bottomLeft",content:this._renderInput()},Gu().createElement("div",{className:"ne-card-label"},Gu().createElement("div",{className:Uf("ne-card-label-text","ne-label-color-".concat(t),this.state.panelShow?"ne-active":""),style:{opacity:n.opacity}},this._getText())))}},{key:"_renderInput",value:function(){var e=this,t=this.props.viewModel,n=t.getColorIndex(),r=t.getLabel(),o=Gu().createElement(SC,{type:"check"}),i=sG.map((function(t,r){return Gu().createElement("div",{tabIndex:-1,"data-tab-level":"label-tab-level-1","data-tab-id":"label-tab-".concat(r+2),"data-type":"color","data-color-index":r,onFocus:e._handleFocus,onKeyDown:e._handleKeyDown,key:r,className:"ne-card-label-color-item",onClick:function(){e._handleColorChange(r)}},Gu().createElement("div",{className:"ne-card-label-color-inner-item"},r===n?o:null))}));return Gu().createElement("div",{className:"ne-card-label-input-box",ref:this._tabBoxRef,onKeyDown:this._handleKeyDown},Gu().createElement(KP,{"data-tab-level":"label-tab-level-0","data-tab-id":"label-tab-1",onFocus:this._handleFocus,onKeyDown:this._handleInputKeyDown,onChange:this._handleLabelChange,ref:this._inputRef,value:r||""}),Gu().createElement("div",{className:"ne-card-label-colors"},i),Gu().createElement(XIe,{viewModel:t,panelShow:this.state.panelShow,onKeyDown:this._handleKeyDown,onFocus:this._handleFocus,tabLevel:2,tabIndexStart:sG.length+2}))}},{key:"_getText",value:function(){var e=this.props.viewModel.getLabel();return e?Gu().createElement(uEe,{search:this.props.search},e):sc("设置状态")}},{key:"_handleClosePanel",value:function(){this.setState({panelShow:!1}),this.props.viewModel.onClose()}},{key:"_handleColorChange",value:function(e){this.props.viewModel.onColorIndexChange(e)}}])}(Yu.Component);function rBe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rBe=function(){return!!e})()}function oBe(e){return function(e){function t(){var e;return(0,Ke.A)(this,t),e=function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,rBe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,arguments),Object.defineProperty(e,"uiViewProxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this,n=e.getMemoLabels;this.uiViewProxy=Vye.render(nBe,{viewModel:new YIe(this.cardData,{focus:!1,overlayContainer:this.editor.innerOverlayContainer,onClose:function(){t.cardData.sync(!1),t.emit("onClose")},getMemoLabels:n})},this.containerNode)}},{key:"renderSearch",value:function(e,t,n,r,o){this.uiViewProxy&&this.uiViewProxy.rerender({search:{text:e,index:t,ignoreCase:n,normalColor:o,activeColor:r}})}},{key:"replace",value:function(e,t,n){var r=this.cardData._cardValue.label||"",o=gn.replaceSourceText(r,t,n,e);o!==r&&(this._cardData.setLabel(o),this._cardData.sync(!0))}},{key:"replaceAll",value:function(e,t,n,r){var o=this.cardData._cardValue.label||"",i=gn.replaceAll(o,t,n,r);i!==o&&(this._cardData.setLabel(i),this._cardData.sync(!0,e))}},{key:"removeSearch",value:function(){this.uiViewProxy&&this.uiViewProxy.rerender({search:void 0})}},{key:"destroy",value:function(){Gl().unmountComponentAtNode(this.containerNode),this.uiViewProxy=null,Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}},{key:"openEditor",value:function(){var e;this.uiViewProxy&&(null===(e=this.uiViewProxy.getReactRef())||void 0===e||e.openEditor())}}])}(e)}var iBe=oBe;function aBe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,lBe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function lBe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(lBe=function(){return!!e})()}var uBe=function(e){function t(e,n){var r;(0,Ke.A)(this,t);for(var o=arguments.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];return r=aBe(this,t,[].concat(i)),Object.defineProperty(r,"editor",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(r,"getMemoLabels",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(r,"_ui",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e=this;this.pluginOption.editUI&&(t.$EditableCardUI=this.pluginOption.editUI),this._ui=this.editor.createCardUI(this,{getMemoLabels:this.getMemoLabels}),xc(this,this._ui,"onClose",(function(){e.editor.execCommand("focus")}))}},{key:"destroy",value:function(){this._ui.destroy(),this._ui=null}},{key:"openEditor",value:function(){this._ui.openEditor()}}])}(My);Object.defineProperty(uBe,"$EditableCardUI",{enumerable:!0,configurable:!0,writable:!0,value:oBe(zh()())}),Object.defineProperty(uBe,"$CardData",{enumerable:!0,configurable:!0,writable:!0,value:pG});var cBe=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Object.assign({},t)}),[{key:"editUI",get:function(){return this._option.editUI}},{key:"viewerUI",get:function(){return this._option.viewerUI}}])}();function sBe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,dBe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function dBe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(dBe=function(){return!!e})()}Object.defineProperty(cBe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"label"});var fBe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=sBe(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Yy);Object.defineProperty(fBe,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze(Iie.service.ISearchService)});var hBe=function(){return(0,$e.A)((function e(t,n,r,o){var i;(0,Ke.A)(this,e),Object.defineProperty(this,"ctx",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"node",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"count",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ranges",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"currentIndex",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ranges=gn.search(this.node.attrs.value.label,this.text)||[],this.count=this.ranges.length,this.currentIndex=-1,null===(i=this.cardUI)||void 0===i||i.renderSearch(this.text,this.currentIndex,this.ctx.isIgnoreCase,this.ctx.activeColor,this.ctx.normalColor)}),[{key:"cardNode",get:function(){var e=this;return this.plugin.cardNodes.find((function(t){return t.id===e.node.id}))}},{key:"cardUI",get:function(){var e;return null===(e=this.cardNode)||void 0===e?void 0:e._ui}},{key:"jumpTo",value:function(e,t){var n;this.currentIndex=e,t||this.ctx.scrollToViewNodeId(this.node.id),null===(n=this.cardUI)||void 0===n||n.renderSearch(this.text,this.currentIndex,this.ctx.isIgnoreCase,this.ctx.activeColor,this.ctx.normalColor)}},{key:"replace",value:function(e,t){this.cardUI?this.cardUI.replace(e,this.text,t):this.ctx.execCommand("setCardValue",this.node.id,Object.assign(Object.assign({},this.node.attrs),{value:Object.assign(Object.assign({},this.node.attrs.value),{label:gn.replaceSourceText(this.node.attrs.value.label,this.text,t,e)})}))}},{key:"replaceAll",value:function(e,t){if(this.cardUI)this.cardUI.replaceAll(e,this.text,t,this.ctx.isIgnoreCase),this.cardUI.removeSearch();else{var n=e.getNodeById(this.node.id);n&&e.setAttribute(n,"value",Object.assign(Object.assign({},n.attrs.value),{label:gn.replaceAll(n.attrs.value.label,this.text,t,this.ctx.isIgnoreCase)}))}}},{key:"viewportChange",value:function(){var e;null===(e=this.cardUI)||void 0===e||e.renderSearch(this.text,this.currentIndex,this.ctx.isIgnoreCase,this.ctx.activeColor,this.ctx.normalColor)}},{key:"leave",value:function(){var e;this.currentIndex=-1,null===(e=this.cardUI)||void 0===e||e.renderSearch(this.text,-1,this.ctx.isIgnoreCase,this.ctx.activeColor,this.ctx.normalColor)}},{key:"destroy",value:function(){var e;null===(e=this.cardUI)||void 0===e||e.removeSearch()}}])}(),pBe=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:t})}),[{key:"onSearch",value:function(e,t,n){return new hBe(e,this.plugin,t,n)}}])}();function vBe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,mBe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function mBe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mBe=function(){return!!e})()}var gBe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=vBe(this,t,arguments),Object.defineProperty(e,"_labels",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(e,"getMemoLabels",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=new Set;return e._labels.forEach((function(e){var r=e.cardData.getCardValue();(null==r?void 0:r.label)&&"number"==typeof(null==r?void 0:r.colorIndex)&&((null==t?void 0:t.label)===r.label&&(null==t?void 0:t.colorIndex)===r.colorIndex||(n.has("".concat(r.colorIndex,"-").concat(r.label))&&n.delete("".concat(r.colorIndex,"-").concat(r.label)),n.add("".concat(r.colorIndex,"-").concat(r.label))))})),n}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){var n,r,o=this;t.registerInlineCard(this,Yse.cardName,{factory:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=vl(uBe,[e,o.getMemoLabels].concat(n));return o._labels.set(i.viewNode.attrs.id,i),i}}),t.onPluginEvent("openLabelEditor",(function(e){var t=o._labels.get(e);t&&t.openEditor()})),null===(n=t.getService(fBe.ID))||void 0===n||n.registerNodeSearch(Yse.cardName,new pBe(this)),null===(r=e.getService(xEe.ID))||void 0===r||r.registerCardSelect(Yse.cardSelect,{type:"TextItem",icon:"editor-main-status",label:sc("状态"),mainSearch:"/zt",keywords:"状态,zt,zhuangtai,标签,bq,biaoqian,label,status"}),e.onPluginEvent("insertCardByUI:".concat(Yse.cardName),(function(){var t=e.execCommand("insertCard",Yse.cardName,null,!0),n=o._labels.get(t);n&&n.openEditor()}))}}])}(Fh);function bBe(e,t){var n=t.totalWidth,r=t.space,o=t.targetWidth,i=t.standardContentWidth,a=t.minContentWidth,l=2*r;return"".concat(e,n>=l+2*o+i?"-XXL":n>=l+o+i?"-XL":n>=l+o+a?"-L":"-M")}function yBe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,wBe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function wBe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wBe=function(){return!!e})()}Object.defineProperty(gBe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:Yse.pluginName}),Object.defineProperty(gBe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:cBe}),Object.defineProperty(gBe,"Colors",{enumerable:!0,configurable:!0,writable:!0,value:dG});var ABe="ne-viewport-size-",kBe=function(e){function t(){return(0,Ke.A)(this,t),yBe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this,n=e.kernel;e.editorNode.classList.add("ne-layout-mode-".concat(this.option.layout));var r=this.kernel.requireService(uJ.ID);n.on("document.create",(function(){var n=r.getLayout();!window.DISABLE_SHOW_HEADING&&e.option.showHeadingIcon&&(e.editorNode.classList.add("ne-typography-show-heading"),Us.desktop&&e.editorNode.classList.add("ne-typography-desktop")),e.editorNode.classList.remove("ne-layout-mode-adapt","ne-layout-mode-fixed"),e.editorNode.classList.add("ne-layout-mode-".concat(n)),t._toggleToolbarSetting(n)})),n.onPluginEvent("layoutChange",(function(n){var r=n.current,o=n.prev;t._toggleToolbarSetting(r),e.editorNode.classList.remove("ne-layout-mode-".concat(o)),e.editorNode.classList.add("ne-layout-mode-".concat(r)),e.emit("layoutChange",{current:r,prev:o})})),e.on("maxViewChange",(function(t){var n=r.getLayout();t?e.editorNode.classList.remove("ne-layout-mode-".concat(n)):e.editorNode.classList.add("ne-layout-mode-".concat(n))})),e.on("enterMaxView",(function(){var t=r.getLayout();e.editorNode.classList.remove("ne-layout-mode-".concat(t))})),e.on("leaveMaxView",(function(){var t=r.getLayout();e.editorNode.classList.add("ne-layout-mode-".concat(t))})),e.onPluginEvent("viewSizeChange",(function(e){var n=e.curr;t._update(n.width)})),this._update(e.editorNode.getBoundingClientRect().width)}},{key:"destroy",value:function(){this.editor.editorNode.classList.remove("ne-layout-mode-".concat(tJ),"ne-layout-mode-".concat(nJ)),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}},{key:"_update",value:function(e){var t,n,r=this.editor,o=r.editorNode,i=r.scrollbarIsVisible,a=function(e){var t=e.prefix,n=e.totalWidth,r=e.sidebarWidth,o=e.tocWidth,i=e.space,a=e.standardContentWidth,l=e.minContentWidth,u=[bBe("".concat(t,"sidebar"),{totalWidth:n,space:i,targetWidth:r,standardContentWidth:a,minContentWidth:l}),bBe("".concat(t,"toc"),{totalWidth:n,space:i,targetWidth:o,standardContentWidth:a,minContentWidth:l})];return n>=a+2*i&&u.push("".concat(t,"standard")),u}({prefix:ABe,totalWidth:i?e-15:e,sidebarWidth:305,tocWidth:280,space:40,standardContentWidth:750,minContentWidth:500}),l=Array.from(o.classList).filter((function(e){return e.startsWith(ABe)})).filter((function(e){return!a.includes(e)}));l.length&&(t=o.classList).remove.apply(t,(0,ln.A)(l)),a.length&&(n=o.classList).add.apply(n,(0,ln.A)(a))}},{key:"_toggleToolbarSetting",value:function(e){var t=this.editor.getService($R.ID);t&&(e===nJ||Us.mobile?t.addDisabledMiniToolbarItems("widthMode"):t.removeDisabledMiniToolbarItems("widthMode"))}}])}(Fh);function _Be(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,CBe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function CBe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(CBe=function(){return!!e})()}Object.defineProperty(kBe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:fJ.pluginName}),Object.defineProperty(kBe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:bJ});var NBe="default",OBe=function(e){function t(){return(0,Ke.A)(this,t),_Be(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"onEvent",value:function(e,t){bt("select"===e,"plugins/line-height/src/editor/line-height-toolbar-descriptor.ts:13"),t===NBe?this.editor.execCommand("lineHeight",null):this.editor.execCommand("lineHeight",parseFloat(t))}},{key:"getInitUIState",value:function(){var e=[{label:sc("默认"),value:NBe},{label:"1",value:1},{label:"1.15",value:1.15},{label:"1.5",value:1.5},{label:"2",value:2},{label:"2.5",value:2.5},{label:"3",value:3}];return{disabled:this.disabled,value:"default",icon:"editor-lineHeight",className:"ne-ui-toolbar-line-height",dropdownClassName:"ne-ui-toolbar-line-height-dropdown",items:e,tooltip:[CEe.lineHeight.text,of(CEe.lineHeight.keys)]}}},{key:"getUIState",value:function(){var e=this.editor,t=e.queryCommandValue("lineHeight")||"default";return{disabled:this.disabled||!e.queryCommandEnabled("lineHeight"),label:t,value:t}}}])}(MEe);Object.defineProperty(OBe,"Type",{enumerable:!0,configurable:!0,writable:!0,value:"DropdownButton"});var xBe=[1,1.15,1.5,"default",2,2.5,3];function EBe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,DBe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function DBe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(DBe=function(){return!!e})()}var PBe=function(e){function t(){return(0,Ke.A)(this,t),EBe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=e.getService(jEe.ID);null==t||t.registerToolbarWidget(CJ.toolbar,OBe);var n=e.renderer.getService(kRe.ID);n&&[CEe.lineHeightIncrease,CEe.lineHeightDecrease].forEach((function(t){n.registerHotKey(t.name,t.keys,(function(n){n.stop();var r=e.queryCommandValue("lineHeight",!1)||"default";if(xBe.includes(r)){var o=xBe.indexOf(r),i="lineHeightIncrease"===t.name?o+1:o-1;xBe[i]&&e.execCommand("lineHeight",PJ[xBe[i]])}}))}))}}])}(Fh);function RBe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,SBe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function SBe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(SBe=function(){return!!e})()}Object.defineProperty(PBe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:CJ.pluginName});var TBe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=RBe(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Yy);function jBe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,IBe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function IBe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(IBe=function(){return!!e})()}Object.defineProperty(TBe,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze("ILinkRenderService")});var BBe=function(e){function t(){return(0,Ke.A)(this,t),jBe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"onEvent",value:function(e,t){var n;bt("click"===e,"plugins/link/src/editor/link-toolbar-descriptor.ts:11"),null===(n=this.editor.renderer.getService(TBe.ID))||void 0===n||n.insertLink()}},{key:"getInitUIState",value:function(){return{disabled:this.disabled,icon:"t-link",className:"ne-ui-toolbar-link",tooltip:MEe.getTooltip(this.editor,sc("插入链接"),"link")}}},{key:"getUIState",value:function(){var e=this.editor;return{disabled:this.disabled||!e.queryCommandEnabled(QJ.command.link)&&!e.queryCommandEnabled(QJ.command.insertLink)}}}])}(MEe);function MBe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,FBe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function FBe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(FBe=function(){return!!e})()}Object.defineProperty(BBe,"Type",{enumerable:!0,configurable:!0,writable:!0,value:"Button"});var LBe=function(e){function t(){return(0,Ke.A)(this,t),MBe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t,n){var r,o=e.getService(jEe.ID);null==o||o.registerToolbarWidget(QJ.toolbar,BBe);var i=t.requireService(TBe.ID);e.onPluginEvent("insertCardByUI:".concat(QJ.node),(function(){i.insertLink()})),null===(r=e.getService(xEe.ID))||void 0===r||r.registerCardSelect(QJ.cardSelect,Object.assign(Object.assign({},CEe.link),{description:sc("可自定义链接标题"),label:CEe[QJ.cardSelect].text,type:"TextItem",mainIcon:"editor-main-link",icon:"t-link",mainSearch:"/lj"}))}}])}(Fh);Object.defineProperty(LBe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:QJ.pluginName});var UBe=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Ww()({},t)}),[{key:"editUI",get:function(){return this._option.editUI}},{key:"onAfterEditorPluginInit",get:function(){return this._option.onAfterEditorPluginInit}}])}();function VBe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,HBe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function HBe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(HBe=function(){return!!e})()}Object.defineProperty(UBe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"list"});var zBe=(0,Ha.A)((0,Ha.A)((0,Ha.A)({},$X.toolbar.orderedList,"t-order-list"),$X.toolbar.unorderedList,"t-unorder-list"),$X.toolbar.taskList,"t-task-list"),WBe=function(e){function t(){return(0,Ke.A)(this,t),VBe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"onEvent",value:function(e){bt("change"===e,"plugins/list/src/editor/list-toolbar-descriptor.ts:27"),this.editor.execCommand(this.name)}},{key:"getInitUIState",value:function(){var e=this.name,t=(0,Ha.A)((0,Ha.A)((0,Ha.A)({},$X.toolbar.orderedList,sc("有序列表")),$X.toolbar.unorderedList,sc("无序列表")),$X.toolbar.taskList,sc("任务列表"));return{disabled:this.disabled,checked:!1,className:"ne-ui-toolbar-list",icon:zBe[e],tooltip:MEe.getTooltip(this.editor,t[e],e)}}},{key:"getUIState",value:function(){var e=this.editor,t=this.name;return{disabled:this.disabled||!e.queryCommandEnabled(t),checked:1===e.queryCommandState(t)}}}])}(MEe);function qBe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,$Be()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function $Be(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($Be=function(){return!!e})()}Object.defineProperty(WBe,"Type",{enumerable:!0,configurable:!0,writable:!0,value:"StatusButton"});var KBe=function(e){function t(){return(0,Ke.A)(this,t),qBe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"onEvent",value:function(e){bt("change"===e,"plugins/list/src/editor/note-list-black-toolbar-descriptor.ts:18"),this.editor.execCommand("taskList")}},{key:"getInitUIState",value:function(){var e=this.name;return{disabled:!1,checked:!1,className:"ne-ui-toolbar-list",icon:"note-checkbox-black",tooltip:MEe.getTooltip(this.editor,sc("任务列表"),e)}}},{key:"getUIState",value:function(){var e=this.editor,t=e.kernel.queryCommandValue("selection");return{disabled:!t||wi.isUnbreakable(t),checked:1===e.queryCommandState("taskList")}}}])}(MEe);function YBe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,GBe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function GBe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(GBe=function(){return!!e})()}Object.defineProperty(KBe,"Type",{enumerable:!0,configurable:!0,writable:!0,value:"StatusButton"});var JBe=function(e){function t(){return(0,Ke.A)(this,t),YBe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"onEvent",value:function(e){bt("change"===e,"plugins/list/src/editor/note-list-toolbar-descriptor.ts:18"),this.editor.execCommand("taskList")}},{key:"getInitUIState",value:function(){var e=this.name;return{disabled:!1,className:"ne-ui-toolbar-list",icon:"note-checkbox",tooltip:MEe.getTooltip(this.editor,sc("任务列表"),e),checked:!1}}},{key:"getUIState",value:function(){var e=this.editor,t=e.kernel.queryCommandValue("selection");return{disabled:!t||wi.isUnbreakable(t),checked:1===e.queryCommandState("taskList")}}}])}(MEe);function XBe(e){var t=(0,Yu.useCallback)((function(t){e.onSelect&&e.onSelect(t),e.closeOverlay&&e.closeOverlay()}),[]);return e.forHeading?Gu().createElement("div",{className:"index-type-selector","data-event-boundary":"overlay"},[2,1,0].map((function(n){return Gu().createElement("ul",{key:n,className:nk()({active:e.currentType===n}),onClick:function(){return t(n)}},Gu().createElement("li",null,Gu().createElement("span",{"data-level":"0","data-type":n,className:"ne-list-symbol"},hZ(0,0,[],n)),Gu().createElement("span",{className:"content","data-level":"0"})),Gu().createElement("li",null,Gu().createElement("span",{className:"content"})),Gu().createElement("li",null,Gu().createElement("span",{className:"content",style:{width:49}})),Gu().createElement("li",null,Gu().createElement("span",{"data-level":"1","data-type":n,className:"ne-list-symbol"},hZ(0,1,[0],n)),Gu().createElement("span",{className:"content","data-level":"1"})),Gu().createElement("li",null,Gu().createElement("span",{className:"content"})),Gu().createElement("li",null,Gu().createElement("span",{"data-level":"2","data-type":n,className:"ne-list-symbol"},hZ(0,2,[0,0],n)),Gu().createElement("span",{className:"content","data-level":"2"})))}))):Gu().createElement("div",{className:"list-type-selector","data-event-boundary":"overlay"},[0,1,2].map((function(n){return Gu().createElement("ul",{key:n,className:nk()({active:e.currentType===n}),onClick:function(){return t(n)}},Gu().createElement("li",null,Gu().createElement("span",{"data-level":"0","data-type":n,className:"ne-list-symbol"},hZ(0,0,[],n)),Gu().createElement("span",{className:"content"})),Gu().createElement("li",null,Gu().createElement("span",{"data-level":"1","data-type":n,className:"ne-list-symbol"},hZ(0,1,[0],n)),Gu().createElement("span",{className:"content"})),Gu().createElement("li",null,Gu().createElement("span",{"data-level":"1","data-type":n,className:"ne-list-symbol"},hZ(1,1,[0],n)),Gu().createElement("span",{className:"content"})),Gu().createElement("li",null,Gu().createElement("span",{"data-level":"2","data-type":n,className:"ne-list-symbol"},hZ(0,2,[0,1],n)),Gu().createElement("span",{className:"content"})),Gu().createElement("li",null,Gu().createElement("span",{"data-level":"0","data-type":n,className:"ne-list-symbol"},hZ(1,0,[],n)),Gu().createElement("span",{className:"content"})))})))}function QBe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,ZBe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function ZBe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ZBe=function(){return!!e})()}Object.defineProperty(JBe,"Type",{enumerable:!0,configurable:!0,writable:!0,value:"StatusButton"});var eMe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=QBe(this,t,arguments),Object.defineProperty(e,"_indexType",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(e,"_handleSelect",{enumerable:!0,configurable:!0,writable:!0,value:function(t){e._indexType=t,e.onEvent("requestIndexType")}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"onEvent",value:function(e){this.editor.queryCommandState("indexType")===dt?this.editor.execCommand("indexType","requestIndexType"===e?this._indexType:void 0):this.editor.execCommand(this.name,this._indexType)}},{key:"getInitUIState",value:function(){var e=this.name;return{disabled:this.disabled,checked:!1,className:"ne-ui-toolbar-list",icon:"t-order-list",overlay:Gu().createElement(XBe,{currentType:0,onSelect:this._handleSelect,forHeading:!0}),tooltip:MEe.getTooltip(this.editor,sc("有序列表"),e)}}},{key:"getUIState",value:function(){var e=this.editor,t=this.name,n=e.queryCommandValue("orderedListIndexType")||0,r=e.queryCommandState("indexType")===dt;return{disabled:this.disabled||!e.queryCommandEnabled(t),checked:r?null!==e.queryCommandValue("indexType"):1===e.queryCommandState(t),overlay:Gu().createElement(XBe,{currentType:n,forHeading:r,onSelect:this._handleSelect}),tooltip:MEe.getTooltip(e,sc(r?"标题序号":"有序列表"),t)}}}])}(MEe);Object.defineProperty(eMe,"Type",{enumerable:!0,configurable:!0,writable:!0,value:"StatusDropdownButton"});var tMe=function(){};function nMe(e){var t=(0,Yu.useState)(!1),n=(0,tn.A)(t,2),r=n[0],o=n[1],i=(0,Yu.useCallback)((function(e){o(e)}),[o]),a=(0,Yu.useCallback)((function(){e.targetNode.classList.remove("select-active"),e.onClose()}),[]),l=(0,Yu.useCallback)((function(){e.targetNode.classList.remove("select-active"),e.onClose()}),[]);if((0,Yu.useEffect)((function(){e.targetNode.classList.add("select-active")}),[]),e.forHeading)return Gu().createElement(nR,{targetNode:e.targetNode,visible:!0,offset:4,placement:["bottomLeft","topLeft"],onClose:a,onCancel:l,allowClose:!0},Gu().createElement("div",{className:"order-list-index-menu-panel heading"},Gu().createElement(XBe,{forHeading:!0,currentType:e.value,onSelect:e.onChangeIndexType})));var u=[{title:sc("重新编号"),key:"reindex",onClick:e.onReIndex},{title:sc("继续编号"),key:"cindex",onClick:e.onContinueIndex},{title:sc("修改样式"),key:"modifyStyle"}];return Gu().createElement(nR,{targetNode:e.targetNode,visible:!0,placement:["bottomLeft","topLeft"],onClose:a,onCancel:l,allowClose:!0},Gu().createElement("div",{className:nk()("order-list-index-menu-panel",cc.getLanguage())},u.map((function(t,n){return"modifyStyle"===t.key?Gu().createElement(mR,{key:t.key,placement:"rightTop",getPopupContainer:function(){return e.containerNode},onVisibleChange:i,overlayClassName:"order-list-index-menu-popover ".concat(e.themeSelector),content:Gu().createElement(XBe,{currentType:e.values[n],onSelect:e.onChangeIndexType})},Gu().createElement("div",{className:nk()("order-list-index-menu-item",{active:r})},Gu().createElement("span",null,t.title),Gu().createElement(SC,{type:"arrow-right"}))):Gu().createElement("div",{className:nk()("order-list-index-menu-item",{disabled:!e.values[n]}),key:t.key,onClick:e.values[n]?t.onClick:tMe},t.title)}))))}function rMe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,oMe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function oMe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(oMe=function(){return!!e})()}var iMe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=rMe(this,t,arguments),Object.defineProperty(e,"_overlay",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_handleClosePopover",{enumerable:!0,configurable:!0,writable:!0,value:function(){e._overlay&&(e._overlay.cancel(),e._overlay=null)}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){var n=this;if(this.option.editUI){var r={factory:function(t){return e.createBoxUIByClazz(n.option.editUI,t)}};t.registerBoxUI(XX.reduce((function(e,t){return e[t]=r,e}),{}))}var o=e.getService(jEe.ID);null==o||o.registerToolbarWidget((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)({},$X.toolbar.orderedList,eMe),$X.toolbar.unorderedList,WBe),$X.toolbar.taskList,WBe),$X.toolbar.notetaskList,JBe),$X.toolbar["note-taskList-black"],KBe)),e.onPluginEvent("insertCardByUI",(function(t){var n=t.name;switch(n){case CEe.taskList.name:case CEe.unorderedList.name:case CEe.orderedList.name:e.execCommand(n)}})),t.onPluginEvent("orderListClickIndex",(function(t){t.event;var r=t.dom,o=t.nodeId;n._overlay&&n._overlay.cancel();var i=e.queryCommandValue("orderedListIndexQuery",o);null!==i&&(n._overlay=aR.open({containerNode:e.innerOverlayContainer,targetNode:r,overlayClassName:"ne-ui-file-mode-overlay",reactComponent:Gu().createElement(nMe,{forHeading:!1,targetNode:r,values:i,onClose:n._handleClosePopover,containerNode:e.innerOverlayContainer,themeSelector:e.theme.getThemeSelector(),onReIndex:function(){e.execCommand("orderedListIndexQuery",o,!0),n._handleClosePopover(),r.classList.remove("select-active")},onContinueIndex:function(){e.execCommand("orderedListIndexQuery",o,!1),n._handleClosePopover(),r.classList.remove("select-active")},onChangeIndexType:function(t){e.execCommand("orderedListIndexType",o,t),n._handleClosePopover(),r.classList.remove("select-active")}}),autoClose:!1}))})),t.onPluginEvent("headingClickIndex",(function(t){t.event;var r=t.dom,o=t.nodeId;n._overlay&&n._overlay.cancel();var i=e.queryCommandValue("indexType",o);null!==i&&(n._overlay=aR.open({containerNode:e.innerOverlayContainer,targetNode:r,overlayClassName:"ne-ui-file-mode-overlay",reactComponent:Gu().createElement(nMe,{forHeading:!0,targetNode:r,containerNode:e.innerOverlayContainer,themeSelector:e.theme.getThemeSelector(),value:i,onClose:n._handleClosePopover,onChangeIndexType:function(t){i!==t&&e.execCommand("indexType",t,o),n._handleClosePopover(),r.classList.remove("select-active")}}),autoClose:!1}))}));var i=e.getService(xEe.ID);i&&[$X.cardSelect.orderedList,$X.cardSelect.unorderedList,$X.cardSelect.taskList].forEach((function(e){var t=CEe[e],n=QX[t.name];i.registerCardSelect(t.name,Object.assign(Object.assign({},t),{type:"TextItem",label:t.text,icon:ZX[n].icon,mainIcon:ZX[n].mainIcon}))}))}},{key:"afterInit",value:function(){this.option.onAfterEditorPluginInit&&this.option.onAfterEditorPluginInit(this.editor)}}])}(Fh);function aMe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,lMe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function lMe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(lMe=function(){return!!e})()}Object.defineProperty(iMe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:$X.pluginName}),Object.defineProperty(iMe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:UBe});var uMe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=aMe(this,t),Object.defineProperty(e,"_disabledItems",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(e,"_filters",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(e,"getDisabledMiniToolbarItems",{enumerable:!0,configurable:!0,writable:!0,value:function(){return(0,ln.A)(e._disabledItems)}}),Object.defineProperty(e,"registerFilterMiniToolbarItems",{enumerable:!0,configurable:!0,writable:!0,value:function(t){e._filters.push(t)}}),Object.defineProperty(e,"getFilterMiniToolbarItems",{enumerable:!0,configurable:!0,writable:!0,value:function(t,n){var r=[];return e._filters.some((function(e){var o=e(t,n);return!1===o||(r.push.apply(r,(0,ln.A)(o)),!1)})),r}}),Object.defineProperty(e,"destroy",{enumerable:!0,configurable:!0,writable:!0,value:function(){e._disabledItems=void 0,e._filters=void 0}}),e.setDisabledMiniToolbarItems=e.setDisabledMiniToolbarItems.bind(e),e.addDisabledMiniToolbarItems=e.addDisabledMiniToolbarItems.bind(e),e.removeDisabledMiniToolbarItems=e.removeDisabledMiniToolbarItems.bind(e),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"setDisabledMiniToolbarItems",value:function(e){this._disabledItems=e?(0,ln.A)(e):[]}},{key:"addDisabledMiniToolbarItems",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length){var r=this._disabledItems;t.forEach((function(e){r.includes(e)||r.push(e)}))}}},{key:"removeDisabledMiniToolbarItems",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.length&&(this._disabledItems=this._disabledItems.filter((function(e){return!t.includes(e)})))}}])}($R);function cMe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,sMe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function sMe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(sMe=function(){return!!e})()}var dMe=function(e){function t(e,n,r,o){var i;return(0,Ke.A)(this,t),i=cMe(this,t),Object.defineProperty(i,"editor",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(i,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(i,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(i,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(i,"setDisabledMiniToolbarItems",{enumerable:!0,configurable:!0,writable:!0,value:function(e){Tr((0,Je.A)(t.prototype),"setDisabledMiniToolbarItems",i).call(i,e),i.editor.emitPluginEvent("miniToolbar.requestRefreshToolbar")}}),Object.defineProperty(i,"addDisabledMiniToolbarItems",{enumerable:!0,configurable:!0,writable:!0,value:function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];(e=Tr((0,Je.A)(t.prototype),"addDisabledMiniToolbarItems",i)).call.apply(e,[i].concat(r)),i.editor.emitPluginEvent("miniToolbar.requestRefreshToolbar")}}),Object.defineProperty(i,"removeDisabledMiniToolbarItems",{enumerable:!0,configurable:!0,writable:!0,value:function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];(e=Tr((0,Je.A)(t.prototype),"removeDisabledMiniToolbarItems",i)).call.apply(e,[i].concat(r)),i.editor.emitPluginEvent("miniToolbar.requestRefreshToolbar")}}),i._disabledItems=(0,ln.A)(o.option.disabledItems),i}return(0,Xe.A)(t,e),(0,$e.A)(t)}(uMe);function fMe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,hMe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function hMe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(hMe=function(){return!!e})()}var pMe={disabledItems:[]},vMe=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Object.assign(Object.assign({},pMe),t)}),[{key:"disabledItems",get:function(){return this._option.disabledItems}}])}();Object.defineProperty(vMe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"miniToolbar"});var mMe=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=fMe(this,t,[e]),Object.defineProperty(r,"kernelOption",{enumerable:!0,configurable:!0,writable:!0,value:n}),r}return(0,Xe.A)(t,e),(0,$e.A)(t)}(vMe);function gMe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,bMe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function bMe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bMe=function(){return!!e})()}Object.defineProperty(mMe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"miniToolbar"});var yMe=function(e){function t(){return(0,Ke.A)(this,t),gMe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){}}])}(Fh);function wMe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,AMe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function AMe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(AMe=function(){return!!e})()}Object.defineProperty(yMe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:zR.pluginName}),Object.defineProperty(yMe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:vMe}),Object.defineProperty(yMe,"Service",{enumerable:!0,configurable:!0,writable:!0,value:dMe});var kMe=function(e){function t(){return(0,Ke.A)(this,t),wMe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"onEvent",value:function(e,t){this.editor.execCommand(t)}},{key:"getInitUIState",value:function(){return{disabled:this.disabled,icon:"t-moremark",items:[{label:sc("上标"),icon:"t-superscript",value:"superscript",disabled:!0,checked:!1},{label:sc("下标"),icon:"t-subscript",value:"subscript",disabled:!0,checked:!1},{label:sc("行内代码"),icon:"t-code",value:"code",disabled:!0,checked:!1}],tooltip:sc("更多文本样式")}}},{key:"getUIState",value:function(){var e=this,t=this.editor,n=[{label:sc("上标"),icon:"t-superscript",value:"sup",tooltip:MEe.getTooltip(this.editor,null,"sup")},{label:sc("下标"),icon:"t-subscript",value:"sub",tooltip:MEe.getTooltip(this.editor,null,"sub")}].map((function(n){var r=t.queryCommandState(n.value);return n.disabled=e.disabled||r===st,n.checked=r===ft,n})),r=t.queryCommandState("code");return n.push({label:sc("行内代码"),icon:"t-code",value:"code",checked:r===ft,disabled:this.disabled||r===st,tooltip:MEe.getTooltip(this.editor,null,"code")}),{disabled:this.disabled||!t.queryCommandEnabled("italic"),items:n}}}])}(MEe);function _Me(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,CMe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function CMe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(CMe=function(){return!!e})()}Object.defineProperty(kMe,"Type",{enumerable:!0,configurable:!0,writable:!0,value:"DropdownButton"});var NMe=function(e){function t(){return(0,Ke.A)(this,t),_Me(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t,n){var r=e.getService(jEe.ID);null==r||r.registerToolbarWidget(Fse.toolbar.mixedTextStyle,kMe)}}])}(Fh);Object.defineProperty(NMe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:Fse.pluginName});var OMe={enable:!1},xMe=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:null}),this._option=Object.assign(Object.assign({},OMe),t)}),[{key:"enable",get:function(){return this._option.enable}}])}();function EMe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,DMe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function DMe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(DMe=function(){return!!e})()}Object.defineProperty(xMe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"mobile"});var PMe=["width","height","preferences"],RMe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=EMe(this,t,arguments),Object.defineProperty(e,"_toolbarAgent",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_editorInited",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"start",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t,n;null===(n=e.editor.getService($R.ID))||void 0===n||(t=n).addDisabledMiniToolbarItems.apply(t,PMe),e.autoAlignBottomInMobile()}}),Object.defineProperty(e,"scrollHandler",{enumerable:!0,configurable:!0,writable:!0,value:function(){window.scrollTo(0,0)}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t,n){this.option.enable&&this._initEvents()}},{key:"_initEvents",value:function(){var e=this;this.kernel.once("document.ready",(function(){e.start()}))}},{key:"autoAlignBottomInMobile",value:function(){var e=this,t=Qm()((function(){var t,n,r=window.visualViewport.height-((null===(n=null===(t=e.option)||void 0===t?void 0:t._option)||void 0===n?void 0:n.editorMarginTop)||0);e.editor.renderer.emitPluginEvent("mobileViewportChange",r)}),100);window.visualViewport&&(window.visualViewport.addEventListener("resize",t,!1),window.visualViewport.addEventListener("scroll",this.scrollHandler,!1),t())}},{key:"removeAllListeners",value:function(){return window.visualViewport&&window.visualViewport.removeEventListener("scroll",this.scrollHandler,!1),this}}])}(Fh);Object.defineProperty(RMe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:Lse.pluginName}),Object.defineProperty(RMe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:xMe});var SMe=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Ww()({},t)}),[{key:"editUI",get:function(){return this._option.editUI}},{key:"onAfterEditorPluginInit",get:function(){return this._option.onAfterEditorPluginInit}}])}();function TMe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,jMe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function jMe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(jMe=function(){return!!e})()}Object.defineProperty(SMe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"paragraph"});var IMe=function(e){function t(){return(0,Ke.A)(this,t),TMe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){var n=this;this.initSlash(),this.option.editUI&&t.registerBoxUI((0,Ha.A)({},c1.node.p,{factory:function(t){return e.createBoxUIByClazz(n.option.editUI,t)}}))}},{key:"afterInit",value:function(){this.option.onAfterEditorPluginInit&&this.option.onAfterEditorPluginInit(this.editor)}},{key:"initSlash",value:function(){var e,t=this.editor;null===(e=t.getService(xEe.ID))||void 0===e||e.registerCardSelect(c1.cardSelect,{label:sc("文本"),type:"TextItem",icon:"editor-fontsize",mainSearch:"p"}),t.onPluginEvent("insertCardByUI:".concat(c1.node.p),(function(){t.execCommand("plainText")}))}}])}(Fh);Object.defineProperty(IMe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:c1.pluginName}),Object.defineProperty(IMe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:SMe}),Object.defineProperty(IMe,"UI_NAME",{enumerable:!0,configurable:!0,writable:!0,value:c1.node.p});var BMe=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Ww()({},t)}),[{key:"editUI",get:function(){return this._option.editUI}},{key:"onAfterEditorPluginInit",get:function(){return this._option.onAfterEditorPluginInit}}])}();function MMe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,FMe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function FMe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(FMe=function(){return!!e})()}Object.defineProperty(BMe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"quote"});var LMe=function(e){function t(){return(0,Ke.A)(this,t),MMe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"onEvent",value:function(){this.editor.execCommand("quote")}},{key:"getInitUIState",value:function(){return{disabled:this.disabled,icon:"t-quote",className:"ne-ui-toolbar-quote",checked:!1,tooltip:MEe.getTooltip(this.editor,sc("插入引用"),"quote")}}},{key:"getUIState",value:function(){var e=this.editor.queryCommandState("quote");return{checked:e===ft,disabled:this.disabled||e===st}}}])}(MEe);function UMe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,VMe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function VMe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(VMe=function(){return!!e})()}Object.defineProperty(LMe,"Type",{enumerable:!0,configurable:!0,writable:!0,value:"StatusButton"});var HMe=function(e){function t(){var e;(0,Ke.A)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=UMe(this,t,[].concat(r)),Object.defineProperty(e,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){this._rootNode=Ly.createElement("ne-quote"),Ly.setAttributeByChange(this._rootNode,e)}},{key:"updateAttribute",value:function(e){Ly.syncDOMAttrChange(this._rootNode,e)}},{key:"getMainDOMNode",value:function(){return this._rootNode}},{key:"getBrickDOMNode",value:function(){return this._rootNode}}])}(Sy);function zMe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,WMe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function WMe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(WMe=function(){return!!e})()}var qMe=function(e){function t(){return(0,Ke.A)(this,t),zMe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t,n){var r,o=this;t.registerBoxNode((0,Ha.A)({},H1.node,{factory:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return vl(HMe,t)}})),this.option.editUI&&t.registerBoxUI((0,Ha.A)({},H1.node,{factory:function(t){return e.createBoxUIByClazz(o.option.editUI,t)}}));var i=e.getService(jEe.ID);null==i||i.registerToolbarWidget(H1.toolbar,LMe),e.onPluginEvent("insertCardByUI:".concat(CEe[H1.node].name),(function(){t.execCommand("quote")})),null===(r=e.getService(xEe.ID))||void 0===r||r.registerCardSelect(H1.cardSelect,{type:"TextItem",icon:"editor-main-reference",label:sc("引用"),description:sc("插入引用格式"),mainSearch:"/yy",name:H1.cardSelect,keywords:CEe[H1.cardSelect].keywords})}},{key:"afterInit",value:function(){this.option.onAfterEditorPluginInit&&this.option.onAfterEditorPluginInit(this.editor)}}])}(Fh);Object.defineProperty(qMe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:H1.pluginName}),Object.defineProperty(qMe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:BMe});var $Me={coverDocument:!1},KMe=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Object.assign(Object.assign({},$Me),t)}),[{key:"isCoverDocument",value:function(){return!!this._option.coverDocument}}])}();function YMe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,GMe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function GMe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(GMe=function(){return!!e})()}Object.defineProperty(KMe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"save"});var JMe=function(e){function t(){return(0,Ke.A)(this,t),YMe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"onEvent",value:function(e){bt("click"===e,"plugins/save/src/editor/save-toolbar-descriptor.ts:10"),this.editor.emitEvent("save")}},{key:"getInitUIState",value:function(){return{disabled:this.disabled,iconfont:"save",tooltip:MEe.getTooltip(this.editor,sc("保存文档"),"save")}}},{key:"getUIState",value:function(){return{disabled:this.disabled||!this.editor.queryCommandEnabled(d2.command.save)}}}])}(MEe);function XMe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,QMe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function QMe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(QMe=function(){return!!e})()}Object.defineProperty(JMe,"Type",{enumerable:!0,configurable:!0,writable:!0,value:"Button"});var ZMe=function(e){function t(){return(0,Ke.A)(this,t),XMe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){var n=this,r=e.getService(jEe.ID);if(null==r||r.registerToolbarWidget(d2.toolbar.save,JMe),t.onPluginEvent("save",(function(){n.editor.emitEvent("save")})),this.option.isCoverDocument()){var o=new cf(["cmd","s"]);pc(this,document,"keydown",(function(e){o.match(e)&&(e.preventDefault(),n.editor.emitEvent("save"))}),!1)}}}])}(Fh);function eFe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,tFe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function tFe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(tFe=function(){return!!e})()}Object.defineProperty(ZMe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:d2.pluginName}),Object.defineProperty(ZMe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:KMe});var nFe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=eFe(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Yy);Object.defineProperty(nFe,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze(R1.service.IQuickInputRendererService)});var rFe="general",oFe="table",iFe="collapse",aFe="simple",lFe="note",uFe=[rFe,oFe,iFe,aFe,lFe];function cFe(e){return uFe.includes(e)}var sFe=function(){return(0,$e.A)((function e(t){var n=this;(0,Ke.A)(this,e),Object.defineProperty(this,"_plugin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_defaultContextType",{enumerable:!0,configurable:!0,writable:!0,value:rFe}),Object.defineProperty(this,"search",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t){return n._plugin.service.search(e,t)}}),this._plugin=t}),[{key:"filterOptions",get:function(){return this._plugin.option.filterOption}},{key:"isGeneralType",value:function(){return this._defaultContextType===rFe}},{key:"getConfig",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"slash";return this.filterOptions(this._plugin.option.getParsedConfig(this._getContextType(),e))}},{key:"setDefaultContextType",value:function(e){this._plugin.option.hasType(e)?this._defaultContextType=e:this._defaultContextType=rFe}},{key:"getDisplayConfigForNode",value:function(e){return this._plugin.option.getParsedConfig(this._getContextTypeByNodeId(e),"cardSelect")}},{key:"getRecentSelectItems",value:function(){var e=this._getContextType(),t=this._plugin.option.getParsedConfig(e).recordSelectedItemConfig;if(t){var n=t.enable,r=void 0!==n&&n,o=t.title,i=t.type,a=t.maxNum;if(r){var l=this._filterRecentSelectItems(this._getRecentSelectItems(),e);if(l&&l.length)return{title:sc(o),type:i,items:l.splice(0,a)}}}}},{key:"_filterRecentSelectItems",value:function(e,t){if(!e||!e.length)return[];var n=this._plugin.option.getParsedConfig(t);return n=this.filterOptions(n),e.filter((function(e){var t,r;return null===(r=null===(t=n.groups)||void 0===t?void 0:t.find)||void 0===r?void 0:r.call(t,(function(t){var n,r;return null===(r=null===(n=t.items)||void 0===n?void 0:n.find)||void 0===r?void 0:r.call(n,(function(t){var n;return!t.disabled&&(t.name===e.name||(null===(n=t.childMenus)||void 0===n?void 0:n.find((function(t){return t.name===e.name}))))}))}))}))}},{key:"_getRecentSelectItems",value:function(){var e=this._plugin.getSelectCardNames();if(!e.length)return[];var t=this._plugin.option.definitions,n=[];return e.forEach((function(e){n.push(Object.assign(Object.assign({},t[e]),{name:e}))})),n}},{key:"_getContextType",value:function(){var e=this._plugin.kernel.queryCommandValue("selection").firstRange.commonAncestorContainer;return Ut.closest(e,qe.Table)?oFe:Ut.closest(e,[Rt,Mr])?iFe:this._defaultContextType}},{key:"_getContextTypeByNodeId",value:function(e){var t=this._plugin.kernel.model.document.getNodeById(e);return this._getContextTypeForNode(t)}},{key:"_getContextTypeForNode",value:function(e){return e?Ut.closest(e,qe.Table)?oFe:Ut.closest(e,[Rt,Mr])?iFe:this._defaultContextType:this._defaultContextType}}])}();function dFe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,fFe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function fFe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(fFe=function(){return!!e})()}var hFe=600,pFe=292,vFe=10,mFe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=dFe(this,t,arguments),Object.defineProperty(e,"state",{enumerable:!0,configurable:!0,writable:!0,value:{config:null,visible:!1}}),Object.defineProperty(e,"_readWriteCalculateOffset",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=e.props.boundaryNode.getBoundingClientRect(),r=Object.assign(Object.assign({},n),{top:94,bottom:n.height}),o=e.props.overlayContainer.getBoundingClientRect(),i=e.props.targetNode.getBoundingClientRect();i.left+pFe+vFe<=window.innerWidth?t.style.left=i.left-o.left+"px":t.style.left=window.innerWidth-pFe-vFe-o.left+"px";var a=Math.min(hFe,window.innerHeight-(i.bottom+5+vFe)),l=Math.min(hFe,i.top-5-vFe-r.top);t.classList.remove("lock-to-bottom"),a<360&&l>a?(t.classList.add("lock-to-bottom"),t.style.height=l+"px",t.style.top=i.top-5-l-o.top+"px"):(t.style.height=a+"px",t.style.top=i.bottom+5-o.top+"px")}}),Object.defineProperty(e,"_innerCalculateOffset",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=e.props.boundaryNode.getBoundingClientRect(),r=e.props.overlayContainer.getBoundingClientRect(),o=e.props.targetNode.getBoundingClientRect();o.left+pFe+vFe<=window.innerWidth?t.style.left=o.left-r.left+"px":t.style.left=window.innerWidth-pFe-vFe-r.left+"px";var i=Math.min(hFe,window.innerHeight-(o.bottom+5+vFe)),a=Math.min(hFe,o.top-5-vFe-n.top);t.classList.remove("lock-to-bottom"),i<360&&a>i?(t.classList.add("lock-to-bottom"),t.style.height=a+"px",t.style.top=o.top-5-a-r.top+"px"):(t.style.height=i+"px",t.style.top=o.bottom+5-r.top+"px")}}),Object.defineProperty(e,"_bodyCalculateOffset",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=e.props.overlayContainer.getBoundingClientRect(),r=e.props.targetNode.getBoundingClientRect();r.left+pFe+vFe<=window.innerWidth?t.style.left=r.left-n.left+"px":t.style.left=window.innerWidth-pFe-vFe-n.left+"px";var o=Math.min(hFe,window.innerHeight-(r.bottom+5+vFe)),i=Math.min(hFe,r.top-5-vFe);t.classList.remove("lock-to-bottom"),o<360&&i>o?(t.classList.add("lock-to-bottom"),t.style.height=i+"px",t.style.top=r.top-5-i-n.top+"px"):(t.style.height=o+"px",t.style.top=r.bottom+5-n.top+"px")}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){this.setState({visible:!0})}},{key:"render",value:function(){var e=!!this.props.isGeneralType,t=!!this.props.isEditMode;return Gu().createElement(nR,{targetNode:this.props.targetNode,uiEmitter:this.props.uiEmitter,boundaryNode:document.body,visible:this.state.visible,allowClose:!1,offset:5,placement:["bottomLeft","bottomRight","topLeft","topRight"],onClose:this.props.onClose,onCancel:this.props.onCancel,positionHandle:e?t?this._readWriteCalculateOffset:this._innerCalculateOffset:this._bodyCalculateOffset},this._renderMenu())}},{key:"_renderMenu",value:function(){return Gu().createElement(wAe,{showHover:!1,onSelect:this.props.onSelect,emptyTipText:sc("无可用卡片"),selectEmitter:this.props.selectEmitter,disableSearch:!0,onSearchResultEmpty:this.props.onSearchResultEmpty,config:this.props.getCardMenuItemConfig(),overlayContainer:this.props.overlayContainer,className:"ne-ui-slash-card-select-menu",customSearch:this.props.customSearch})}}])}(Yu.Component);function gFe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,bFe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function bFe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bFe=function(){return!!e})()}Object.defineProperty(mFe,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{onSelect:function(){},onCancel:function(){},onSearchResultEmpty:function(){}}});var yFe=/[\u0100-\uffff]/g,wFe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=gFe(this,t,arguments),Object.defineProperty(e,"state",{enumerable:!0,configurable:!0,writable:!0,value:{userInput:""}}),Object.defineProperty(e,"_rootRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"_inputRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"_selectEmitter",{enumerable:!0,configurable:!0,writable:!0,value:new it}),Object.defineProperty(e,"_overlay",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_isCompositing",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_resultEmpty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_currentEmptyTimes",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(e,"_getCardMenuItemConfig",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=e.props.displayCommands,n=t.groups,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(t,["groups"]),o=e.props.getRecentSelectItems();return o?Object.assign({groups:[o,{type:"hr",items:[]}].concat((0,ln.A)(n))},r):Object.assign({groups:n},r)}}),Object.defineProperty(e,"_handleCompositionStart",{enumerable:!0,configurable:!0,writable:!0,value:function(){e._isCompositing=!0}}),Object.defineProperty(e,"_handleCompositionEnd",{enumerable:!0,configurable:!0,writable:!0,value:function(t){e._isCompositing=!1,e._checkEnd(t.currentTarget.value)||(e.setState({userInput:t.currentTarget.value}),e._selectEmitter.emit("search",t.currentTarget.value))}}),Object.defineProperty(e,"_keyDownHandler",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n,r,o=t.key,i=t.keyCode;if(e._isCompositing&&[" ","Enter"].includes(o))e._isCompositing=!1;else if(i!==Ws){var a=t.target.value;if("Backspace"===o&&(e._currentEmptyTimes=0),("Backspace"===o||"Delete"===o)&&""===a)return t.preventDefault(),void e.props.onCancel(null);if("Escape"!==o)return"ArrowDown"===o?(t.preventDefault(),void e._selectEmitter.emit("updown",!1)):"ArrowUp"===o?(t.preventDefault(),void e._selectEmitter.emit("updown",!0)):"ArrowLeft"===o?(t.preventDefault(),void e._selectEmitter.emit("leftright",!0)):"Tab"===o?(t.preventDefault(),void e._selectEmitter.emit("leftright",t.shiftKey,!0)):"ArrowRight"===o?(t.preventDefault(),void e._selectEmitter.emit("leftright",!1)):"Enter"===o?(t.preventDefault(),e._resultEmpty?void(null===(r=(n=e.props).onTriggerClose)||void 0===r||r.call(n,e.state.userInput)):void e._selectEmitter.emit("enter")):void 0;e.props.onCancel(a)}}}),Object.defineProperty(e,"_handleEmpty",{enumerable:!0,configurable:!0,writable:!0,value:function(t){e._resultEmpty=t,t?e._currentEmptyTimes++:e._currentEmptyTimes=0}}),Object.defineProperty(e,"_checkEnd",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n,r,o,i,a;return!e._isCompositing&&e._currentEmptyTimes>=4?(null===(r=(n=e.props).onTriggerClose)||void 0===r||r.call(n,t),!0):!(e._isCompositing||!e.props.onTriggerClose||!(t.includes(" ")||(a=t,(a&&"string"==typeof a?a.replace(yFe,"aa").length:0)>15))||(null===(i=(o=e.props).onTriggerClose)||void 0===i||i.call(o,t),0))}}),Object.defineProperty(e,"_changeHandler",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=t.target.value;e._checkEnd(n)||(e.setState({userInput:n}),e._isCompositing||e._selectEmitter.emit("search",n))}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentWillUnmount",value:function(){this._overlay&&this._overlay.cancel()}},{key:"render",value:function(){return Gu().createElement("div",{ref:this._rootRef,className:"ne-ui-slash-command-view"},Gu().createElement("span",null,this.props.originData||"/"),Gu().createElement("div",{className:"ne-ui-slash-command-input-wrap"},Gu().createElement("span",{className:"ne-ui-slash-command-hidden"},this.state.userInput||""),Gu().createElement("input",{placeholder:"",ref:this._inputRef,onCompositionStart:this._handleCompositionStart,onCompositionEnd:this._handleCompositionEnd,onKeyDown:this._keyDownHandler,onChange:this._changeHandler,className:"ne-ui-slash-command-input"})))}},{key:"getUserInput",value:function(){return this._inputRef.current?this._inputRef.current.value:null}},{key:"focus",value:function(){var e=this;this.openOverlay(),this._inputRef.current?this._inputRef.current.focus():setTimeout((function(){e._inputRef.current&&e._inputRef.current.focus()}))}},{key:"openOverlay",value:function(){var e=this;this._overlay&&this._overlay.cancel(),this._overlay=aR.open({containerNode:this.props.overlayContainer,targetNode:this._rootRef.current,reactComponent:Gu().createElement(mFe,{overlayContainer:this.props.overlayContainer,uiEmitter:this.props.uiEmitter,onSearchResultEmpty:this._handleEmpty,getCardMenuItemConfig:this._getCardMenuItemConfig,boundaryNode:this.props.boundaryNode,selectEmitter:this._selectEmitter,isGeneralType:this.props.isGeneralType,isEditMode:this.props.isEditMode,onSelect:function(){var t;e._overlay&&e._overlay.cancel(),(t=e.props).onSelect.apply(t,arguments)},onCancel:this.props.onCancel,targetNode:this._rootRef.current,customSearch:this.props.customSearch}),overlayClassName:"ne-slash-overlay",autoClose:!1})}}])}(Yu.Component);function AFe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,kFe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function kFe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(kFe=function(){return!!e})()}Object.defineProperty(wFe,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{onSelect:function(){},onCancel:function(){},getRecentSelectItems:function(){}}});var _Fe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=AFe(this,t,arguments),Object.defineProperty(e,"uiViewProxy",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var n=this,r=e.displayConfig,o=e.getRecentSelectItems,i=e.isGeneralType,a=e.originData,l=e.search;Tr((0,Je.A)(t.prototype),"init",this).call(this);var u=this.editor.editorNode.classList.contains("layout-read-write");this.uiViewProxy=Vye.render(wFe,{originData:a,displayCommands:r,getRecentSelectItems:o,isGeneralType:i,onTriggerClose:function(e){n.emit("useInput",e)},onCancel:function(e){n.emit("cancel",e)},onSelect:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];n.emit("select",e,r,n.getUserInput())},customSearch:l,isEditMode:u,overlayContainer:i?this.editor.innerOverlayContainer:this.editor.overlayContainer,boundaryNode:i?this.editor.scrollNode:document.body},this.containerNode),xc(this,this.editor,"focusstatuschange",(function(e){e.focused||n.emit("blur","")}))}},{key:"destroy",value:function(){this.containerNode&&Gl().unmountComponentAtNode(this.containerNode),this.uiViewProxy=null,Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}},{key:"focusInput",value:function(){var e;this.uiViewProxy&&(null===(e=this.uiViewProxy.getReactRef())||void 0===e||e.focus())}},{key:"getUserInput",value:function(){var e;return this.uiViewProxy?null===(e=this.uiViewProxy.getReactRef())||void 0===e?void 0:e.getUserInput():null}}])}(zh()()),CFe=function(){function e(){(0,Ke.A)(this,e)}return(0,$e.A)(e,null,[{key:"insert",value:function(e,t,n,r){e.emitPluginEvent("insertCardByUI",{item:t,name:t.name,args:n,inputValue:r}),e.emitPluginEvent("insertCardByUI:".concat(t.name),{item:t,name:t.name,args:n,inputValue:r})}},{key:"execute",value:function(t,n,r,o){var i,a;switch(n.type){case"TextItem":e.insert(t,n,r,o);break;case"TableItem":e.insert(t,n,[{col:(null===(i=null==r?void 0:r[0])||void 0===i?void 0:i.col)||3,row:(null===(a=null==r?void 0:r[0])||void 0===a?void 0:a.row)||3}]);break;case"SubMenu":e.insert(t,n,void 0);break;case"FileItem":e.insert(t,n,r);break;case"CommandItem":!function(e,t){var n=t.commandName,r=t.value,o=t.execute;o?o():n&&e.queryCommandEnabled(n)&&e.execCommand(n,r)}(t,n);break;case"PageItem":break;default:console.warn("invalid slash command item type: ",n)}}}])}();function NFe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,OFe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function OFe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(OFe=function(){return!!e})()}var xFe=function(e){function t(e){var n,r,o;(0,Ke.A)(this,t);for(var i=arguments.length,a=new Array(i>1?i-1:0),l=1;l<i;l++)a[l-1]=arguments[l];return n=NFe(this,t,[].concat(a)),Object.defineProperty(n,"editor",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(n,"_ui",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"_originData",{enumerable:!0,configurable:!0,writable:!0,value:"/"}),n._originData=(null===(o=null===(r=n._viewNode)||void 0===r?void 0:r.attrs)||void 0===o?void 0:o.value)||"/",n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e=this;this._ui=this.editor.createCardUI(this,{originData:this._originData,displayConfig:this.pluginContext.getConfig(),getRecentSelectItems:function(){return e.pluginContext.getRecentSelectItems()},isGeneralType:this.pluginContext.isGeneralType(),search:this.pluginContext.search}),this._ui.on("select",(function(t,n,r){e.editor.execCommand("deleteCard",e.viewNode.attrs.id),e.editor.renderer.focus(),CFe.execute(e.editor,t,n,r),e.editor.emitEvent("userAction",{type:"insertCard",name:t.label,source:"slash"})})),this._ui.on("useInput",(function(t){e.editor.execCommand("deleteCard",e.viewNode.attrs.id),null!==t&&t&&e.editor.execCommand("input",e._originData+t)})),this._ui.on("blur",(function(t){e.editor.execCommand("deleteCard",e.viewNode.attrs.id),null!==t&&t&&e.editor.execCommand("input",e._originData+t)})),this._ui.on("cancel",(function(t){e.editor.execCommand("deleteCard",e.viewNode.attrs.id),e.editor.renderer.focus(),null!==t&&t&&e.editor.execCommand("input",e._originData+t)}))}},{key:"destroy",value:function(){this._ui&&(this._ui.destroy(),this._ui=null)}},{key:"$blur",value:function(){if(this._ui){var e=this._ui.getUserInput();this.editor.execCommand("deleteCard",this.viewNode.attrs.id),this.editor.execCommand("input",this._originData+(e||""))}}},{key:"focusInput",value:function(){this._ui&&this._ui.focusInput()}}])}(My);Object.defineProperty(xFe,"$EditableCardUI",{enumerable:!0,configurable:!0,writable:!0,value:_Fe});var EFe={cardSelect:(0,Ha.A)((0,Ha.A)((0,Ha.A)({},rFe,{groups:[]}),oFe,{groups:[]}),iFe,{groups:[]}),disableQuickInput:!1,filterOption:function(e){return e}},DFe=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_cardSelectDefinitions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_useForParsedConfig",{enumerable:!0,configurable:!0,writable:!0,value:{slash:{},cardSelect:{}}}),this._option=Ww()({},EFe,t)}),[{key:"definitions",get:function(){return this._cardSelectDefinitions}},{key:"disableQuickInput",get:function(){return!!this._option.disableQuickInput}},{key:"filterOption",get:function(){return this._option.filterOption}},{key:"registerCardSelect",value:function(e,t){var n=this._cardSelectDefinitions;"string"==typeof e?n[e]=PFe(t):Object.keys(e).forEach((function(t){n[t]=PFe(e[t])}))}},{key:"getConfig",value:function(){return this._option}},{key:"hasType",value:function(e){return!!this._option.cardSelect[e]}},{key:"getParsedConfig",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"slash";bt(cFe(e),"plugins/slash/src/editor/slash-option.ts:95");var n=this._useForParsedConfig[t];return n[e]||(n[e]=this._transformConfig(this._option.cardSelect[e],!0,t)),n[e]}},{key:"_transformConfig",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"slash",o=this._cardSelectDefinitions,i=function e(r){var i;if(i="string"==typeof r?{name:r}:Object.assign({},r),!o[i.name])return null;if(!n&&o[i.name].disabled)return null;var a=Object.assign(Object.assign({},o[i.name]),i);return a.childMenus&&(a.childMenus=a.childMenus.map(e)),t._option.afterParsed?t._option.afterParsed(a):a};return Object.assign(Object.assign({},e),{groups:e.groups.map((function(e){if(e.show&&e.show!==r)return null;var t=e.items.map(i).filter(Boolean);return t.length?Object.assign(Object.assign({},e),{items:t}):null})).filter((function(e){return null!==e}))})}}])}();function PFe(e){return Array.isArray(e.accept)&&0===e.accept.length&&(e.disabled=!0),e&&"string"==typeof e.keywords?Object.assign(Object.assign({},e),{keywords:e.keywords.split(",")}):e}function RFe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,SFe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function SFe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(SFe=function(){return!!e})()}Object.defineProperty(DFe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"slash"});var TFe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=RFe(this,t,arguments),Object.defineProperty(e,"handleCancel",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.editor&&e.editor.execCommand("focus")}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"onEvent",value:function(e,t,n){bt("select"===e,"plugins/slash/src/editor/descriptors/insert-card-toolbar-descriptor.ts:15");var r=this.editor;CFe.insert(r,t,n),this.editor.emitEvent("userAction",{type:"insertCard",name:t.label,source:"toolbar"})}},{key:"getInitUIState",value:function(){return{disabled:this.disabled,value:null,icon:"t-insert-card",iconSize:18,className:"ne-ui-toolbar-insert-card",dropdownClassName:"ne-ui-toolbar-insert-card-dropdown",themeSelector:this.editor.theme.getThemeSelector(),isDark:this.editor.theme.isDark(),tooltip:MEe.getTooltip(this.editor,sc("插入特色卡片"),"slash"),search:this.pluginContext.search}}},{key:"getOverlayContainer",value:function(){return this.editor.overlayContainer}},{key:"getUIState",value:function(){var e=this.editor;return{disabled:this.disabled||!e.queryCommandEnabled("insertSlash"),themeSelector:this.editor.theme.getThemeSelector()}}},{key:"getConfig",value:function(){return this.pluginContext.getConfig("cardSelect")}},{key:"getRecentSelectItems",value:function(){return this.pluginContext.getRecentSelectItems()}}])}(MEe);function jFe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function IFe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,BFe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function BFe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(BFe=function(){return!!e})()}Object.defineProperty(TFe,"Type",{enumerable:!0,configurable:!0,writable:!0,value:"CardSelect"});var MFe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=IFe(this,t,arguments),Object.defineProperty(e,"searchFunctions",{enumerable:!0,configurable:!0,writable:!0,value:[]}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"registerCardSelect",value:function(e,t){this.plugin.option.registerCardSelect(e,t)}},{key:"registerCustomSearch",value:function(e){this.searchFunctions.push(e)}},{key:"search",value:function(e,t){var n,r=null,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return jFe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jFe(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(this.searchFunctions);try{for(o.s();!(n=o.n()).done;){var i=(0,n.value)(e,t);i&&(r=r?r.concat(i):i)}}catch(e){o.e(e)}finally{o.f()}return r}},{key:"getDisplayConfigForNode",value:function(e){return e?this.plugin.pluginContext.getDisplayConfigForNode(e):{groups:[]}}},{key:"executeSlashCommand",value:function(e,t,n){CFe.execute(e,t,n,"")}},{key:"destroy",value:function(){}}])}(xEe);function FFe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,LFe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function LFe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(LFe=function(){return!!e})()}var UFe="ne_larkx_recent_selected_item_record",VFe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=FFe(this,t,arguments),Object.defineProperty(e,"_selectors",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(e,"pluginContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){var n=this,r=new sFe(this);this.pluginContext=r;var o=e.getService(jEe.ID);if(null==o||o.registerToolbarWidget(B2.toolbar.cardSelect,{clazz:TFe,pluginContext:r}),t.onPluginEvent("uiSwitched",(function(e){var t=e.type;r.setDefaultContextType(t)})),!this.option.disableQuickInput){t.registerInlineCard(this,B2.node.slash,{factory:function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];var i=vl(xFe,[e].concat(r));return n._selectors.set(i.viewNode.attrs.id,i),i},pluginContext:r});var i=t.getService(nFe.ID);i&&i.registerQuickInput({trigger:"slash",atStart:!0,mustEmpty:!0},(function(){n.editor.emitEvent("userAction",{type:"cardSelect",name:"slash",source:"quickInput"}),n._processQuickInput()})),t.onPluginEvent("insertSlash:hotKey",(function(e){n.editor.emitEvent("userAction",{type:"cardSelect",name:"slash",source:"hotKey"});var t=n._selectors.get(e);t&&t.focusInput()})),e.onPluginEvent("insertCardByUI",(function(e){var t=e.item;try{n.handleRecordSelectCard(t)}catch(e){}}))}}},{key:"_processQuickInput",value:function(){var e=this.editor.execCommand("insertSlash"),t=this._selectors.get(e);t&&setTimeout((function(){t.focusInput()}),16)}},{key:"getSelectCardNames",value:function(){var e=[];try{e=this.handleGetSelectCardNames()}catch(e){}return e}},{key:"handleRecordSelectCard",value:function(e){var t=e.recordDisable,n=void 0!==t&&t,r=e.name;if(!n){var o=localStorage.getItem(UFe),i=o?JSON.parse(o):[],a=i.indexOf(r);-1!==a&&i.splice(a,1),i.unshift(r),i.length>10&&i.pop(),localStorage.setItem(UFe,JSON.stringify(i))}}},{key:"handleGetSelectCardNames",value:function(){var e=localStorage.getItem(UFe);return e?JSON.parse(e):[]}}])}(Fh);Object.defineProperty(VFe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:B2.pluginName}),Object.defineProperty(VFe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:DFe}),Object.defineProperty(VFe,"Service",{enumerable:!0,configurable:!0,writable:!0,value:MFe});var HFe=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Ww()({},t)}),[{key:"editUI",get:function(){return this._option.editUI}},{key:"onEditorPluginInit",get:function(){return this._option.onEditorPluginInit}},{key:"forceToolbar",get:function(){return!!this._option.forceToolbar}}])}();function zFe(e){return e.closest(qe.Table)&&!e.hasCategory(qe.Table)?["widthMode"]:[]}function WFe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,qFe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function qFe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qFe=function(){return!!e})()}Object.defineProperty(HFe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"table"});var $Fe=function(e){function t(){return(0,Ke.A)(this,t),WFe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e=this,t=this.editor.renderer.getService(kRe.ID);t&&t.registerHotKey(CEe.toggleBorder.name,CEe.toggleBorder.keys,(function(t){t.stop(),e.editor.execCommand("tableBorderVisible")}))}},{key:"onEvent",value:function(e){bt("change"===e,"plugins/table/src/editor/descriptors/border-visible-toolbar-descriptor.ts:29"),this.editor.execCommand("tableBorderVisible")}},{key:"getInitUIState",value:function(){return{disabled:this.disabled,checked:!1,icon:"t-border-visible",tooltip:MEe.getTooltip(this.editor,sc("隐藏边框"),CEe.toggleBorder.name)}}},{key:"getUIState",value:function(){var e=this.editor;return{disabled:this.disabled||!e.queryCommandEnabled("tableBorderVisible"),checked:e.queryCommandState("tableBorderVisible")===ft}}}])}(MEe);Object.defineProperty($Fe,"Type",{enumerable:!0,configurable:!0,writable:!0,value:"StatusButton"});var KFe=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.color=t}),[{key:"getColor",value:function(){return this.color}},{key:"setColor",value:function(e){this.color=e}}])}();function YFe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,GFe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function GFe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(GFe=function(){return!!e})()}var JFe="transparent",XFe=function(e){function t(){return(0,Ke.A)(this,t),YFe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e=this,t=this.editor.renderer.getService(kRe.ID);t&&t.registerHotKey(CEe.cellBgColor.name,CEe.cellBgColor.keys,(function(t){t.stop(),e.editor.execCommand("tableCellBgColor",e.pluginContext.getColor())}))}},{key:"onEvent",value:function(e,t){var n=this.editor.theme.toPersistentValue(t);switch(e){case"select":if(this.pluginContext.setColor(n),t===JFe)return this.editor.execCommand("tableCellBgColor");this.editor.execCommand("tableCellBgColor",n);break;case"saveColor":this.editor.hasExtendMethod("updateUserColor")&&this.editor.updateUserColor(n);break;default:bt(!1,"plugins/table/src/editor/descriptors/cell-bg-color-toolbar-descriptor.ts:57")}}},{key:"getInitUIState",value:function(){return{disabled:this.disabled,className:"ne-ui-toolbar-cell-bg-color",defaultColor:JFe,color:this.editor.theme.toVisualValue(this.pluginContext.getColor()),themeName:this.editor.theme.getSchemeName(),icon:"t-cell-bg-color",userColors:[],tooltip:MEe.getTooltip(this.editor,sc("单元格背景色"),CEe.cellBgColor.name)}}},{key:"getUIState",value:function(){var e=this.editor,t=this.name,n=[];e.hasExtendMethod("getUserColors")&&(n=e.getUserColors().map((function(t){return e.theme.toVisualValue(t)})));var r=e.theme.toVisualValue(e.queryCommandValue("tableCellBgColor"))||JFe,o=e.theme.toVisualValue(this.pluginContext.getColor())||JFe;return{disabled:this.disabled||!e.queryCommandEnabled(t)||e.queryCommandState(t)===st,userColors:n,themeName:this.editor.theme.getSchemeName(),activeColors:[r],color:o}}}])}(MEe);function QFe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,ZFe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function ZFe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ZFe=function(){return!!e})()}Object.defineProperty(XFe,"Type",{enumerable:!0,configurable:!0,writable:!0,value:"ColorPickerButton"});var eLe=function(e){function t(){return(0,Ke.A)(this,t),QFe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e=this,t=this.editor.renderer.getService(kRe.ID);t&&t.registerHotKey(CEe.mergeCell.name,CEe.mergeCell.keys,(function(t){t.stop();var n=e.editor.queryCommandState("tableMergeCell");n===dt?e.editor.execCommand("tableMergeCell"):n===ft&&e.editor.execCommand("tableUnmergeCell")}))}},{key:"onEvent",value:function(e,t){bt("change"===e,"plugins/table/src/editor/descriptors/cell-merge-toolbar-descriptor.ts:39"),t?this.editor.execCommand("tableMergeCell"):this.editor.execCommand("tableUnmergeCell")}},{key:"getInitUIState",value:function(){return{disabled:this.disabled,checked:!1,icon:"t-table-cell-merge",tooltip:MEe.getTooltip(this.editor,sc("合并单元格"),CEe.mergeCell.name)}}},{key:"getUIState",value:function(){var e=this.editor;return{disabled:this.disabled||!e.queryCommandEnabled("tableMergeCell")&&!e.queryCommandEnabled("tableUnmergeCell"),checked:e.queryCommandState("tableMergeCell")===ft,tooltip:e.queryCommandState("tableMergeCell")===ft?MEe.getTooltip(this.editor,sc("拆分单元格"),CEe.mergeCell.name):MEe.getTooltip(this.editor,sc("合并单元格"),CEe.mergeCell.name)}}}])}(MEe);function tLe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,nLe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function nLe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nLe=function(){return!!e})()}function rLe(e){return[CEe.verticalAlignTop,CEe.verticalAlignMiddle,CEe.verticalAlignBottom].map((function(t){return Object.assign(Object.assign({},t),{label:t.text,icon:"t-".concat(t.value,"-align"),tooltip:MEe.getTooltip(e,t.text,t.name)})}))}Object.defineProperty(eLe,"Type",{enumerable:!0,configurable:!0,writable:!0,value:"StatusButton"});var oLe=function(e){function t(){return(0,Ke.A)(this,t),tLe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e=this,t=this.editor.renderer.getService(kRe.ID);t&&rLe(this.editor).forEach((function(n){t.registerHotKey(n.name,n.keys,(function(t){t.stop(),e.editor.execCommand("tableVerticalAlign",n.value)}))}))}},{key:"onEvent",value:function(e,t){bt("select"===e,"plugins/table/src/editor/descriptors/table-vertical-align-toolbar-descriptor.ts:43"),this.editor.execCommand("tableVerticalAlign",t)}},{key:"getInitUIState",value:function(){return{disabled:this.disabled,items:rLe(this.editor),icon:"t-middle-align",iconSize:14,value:"top",className:"ne-ui-toolbar-vertical-align",dropdownClassName:"ne-ui-toolbar-vertical-align-dropdown",tooltip:sc("垂直对齐")}}},{key:"getUIState",value:function(){var e=this.editor;return{disabled:this.disabled||!e.queryCommandEnabled("tableVerticalAlign")||-1===e.queryCommandState("tableVerticalAlign"),value:e.queryCommandValue("tableVerticalAlign")}}}])}(MEe);Object.defineProperty(oLe,"Type",{enumerable:!0,configurable:!0,writable:!0,value:"DropdownButton"});var iLe={default:{bg:uu["editor.background.secondary"].light,text:uu["editor.text.color"].light},green:{bg:uu["editor.color.peaGreen1"].light,text:uu["editor.color.peaGreen9"].light},blue:{bg:uu["editor.color.blue1"].light,text:uu["editor.color.blue9"].light},red:{bg:uu["editor.color.red1"].light,text:uu["editor.color.red9"].light},inverseGreen:{bg:uu["editor.color.peaGreen8"].light,text:uu["editor.color.peaGreen1"].light},inverseBlue:{bg:uu["editor.color.blue8"].light,text:uu["editor.color.blue1"].light}},aLe="ne-table-head-bg-color",lLe=function(e){var t=e.color,n=e.selected,r=e.editor,o=e.onClick,i=void 0===o?function(){}:o;return Gu().createElement("div",{onClick:i,className:"table-head-color-icon ".concat(n?"table-head-color-icon-selected":""," ").concat("string"==typeof t?"table-head-color-icon-".concat(t):""),style:function(){if("object"!==(0,Gn.A)(t))return{};var e=GU(t.text),n=(0,tn.A)(e,2),o=n[0],i=n[1];return i?{backgroundColor:JU(t.bg,r.theme),backgroundImage:"linear-gradient(90deg, ".concat(o,", ").concat(i,")"),backgroundClip:"text"}:{backgroundColor:JU(t.bg,r.theme),color:JU(o,r.theme)}}()},"A")},uLe=function(e){var t=e.editor,n=e.color,r=e.textButton,o=e.bgButton,i=e.onSelectType;return Gu().createElement("div",{className:"table-head-color-popup ".concat(t.theme.getThemeSelector())},Gu().createElement("div",{className:"table-head-color-popup-buttons"},Object.keys(iLe).map((function(e){return Gu().createElement(lLe,{onClick:function(){i(e)},editor:t,key:e,color:e,selected:"string"==typeof n&&n===e})}))),Gu().createElement("div",{className:"table-head-color-popup-custom"},sc("自定义")),Gu().createElement("div",{className:"table-head-color-popup-actions"},Gu().createElement(lLe,{editor:t,color:n,selected:"string"!=typeof n}),Gu().createElement("div",{className:"table-head-color-popup-divider"}),r,o))},cLe=function(e){var t=e.getColHead,n=e.getRowHead,r=e.getInitColor,o=e.ColorButton,i=e.editor,a=(0,Yu.useState)((null==r?void 0:r())||function(){var e=Nf.getItem(aLe);if(e){if(e in iLe)return e}else Nf.setItem(aLe,"default");try{var t=JSON.parse(Nf.getItem(aLe));if("string"!=typeof t.text||"string"!=typeof t.bg)throw new Error("color parsed error");return t}catch(e){return"default"}}()),l=(0,tn.A)(a,2),u=l[0],c=l[1],s=(0,Yu.useState)(!1),d=(0,tn.A)(s,2),f=d[0],h=d[1],p=(0,Yu.useState)(null==n?void 0:n()),v=(0,tn.A)(p,2),m=v[0],g=v[1],b=(0,Yu.useState)(null==t?void 0:t()),y=(0,tn.A)(b,2),w=y[0],A=y[1],k=(0,Yu.useRef)(null);(0,Yu.useEffect)((function(){var e=function(e){e.target&&e.target instanceof Node&&k.current&&k.current.contains(e.target)||h(!1)};return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[]);var _=function(e){var t="string"==typeof e?iLe[e]:e;return Object.assign({},t)},C=function(e,t){var n=_(u);"bg"===t?n.bg=XU(e,i.theme):n.text=XU(e,i.theme),c(n),Nf.setItem(aLe,JSON.stringify(n)),N(n)},N=function(r){(null==n?void 0:n())&&e.toggleRowHead(!0,_(r)),(null==t?void 0:t())&&e.toggleColHead(!0,_(r))};return Gu().createElement("div",{className:"table-head-overlay ant-dropdown-menu",ref:k},Gu().createElement("div",{className:"menu-item",onClick:function(){e.toggleRowHead(!m,_(u)),(null==t?void 0:t())&&e.toggleColHead(!0,_(u)),g(!m)}},Gu().createElement(SC,{type:"col-head"}),Gu().createElement("span",null,sc("标题行")),Gu().createElement(kR,{size:"small",checked:m})),Gu().createElement("div",{className:"menu-item",onClick:function(){e.toggleColHead(!w,_(u)),(null==n?void 0:n())&&e.toggleRowHead(!0,_(u)),A(!w)}},Gu().createElement(SC,{type:"row-head"}),Gu().createElement("span",null,sc("标题列")),Gu().createElement(kR,{checked:w,size:"small"})),!!o&&Gu().createElement(bR,{placement:"rightBottom",visible:f,getPopupContainer:function(e){return e.parentElement||k.current||document.body},overlayClassName:f?"table-head-custom-open":"",content:Gu().createElement(uLe,{editor:i,color:u,onSelectType:function(e){c(e),Nf.setItem(aLe,e),N(e)},textButton:Gu().createElement(o,{className:"table-head-bg-color-button",disabled:!1,type:"t-font-color",onSelect:function(e){return C(e,"text")},onSaveColor:function(){},color:JU("string"==typeof u?iLe[u].text:u.text,i.theme),defaultColor:JU("string"==typeof u?iLe[u].text:u.text,i.theme),popupContainer:k.current,onClear:function(){}}),bgButton:Gu().createElement(o,{className:"table-head-bg-color-button",disabled:!1,type:"t-cell-bg-color",onSelect:function(e){return C(e,"bg")},onSaveColor:function(){},color:JU("string"==typeof u?iLe[u].bg:u.bg,i.theme),defaultColor:JU("string"==typeof u?iLe[u].bg:u.bg,i.theme),popupContainer:k.current,onClear:function(){}})})},Gu().createElement("div",{className:"menu-item",onClick:function(){h(!f)}},Gu().createElement(SC,{type:"brush"}),Gu().createElement("span",null,sc("配色方案")),Gu().createElement(lLe,{color:u,editor:i}))))};function sLe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,dLe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function dLe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(dLe=function(){return!!e})()}var fLe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=sLe(this,t,arguments),Object.defineProperty(e,"_pluginContext",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){var n,r=this;this.option.editUI&&t.registerBoxUI((0,Ha.A)({},w3.node.table,{factory:function(t){var n=e.createBoxUIByClazz(r.option.editUI,t);return n.setTableEditorPlugin(r),n}})),t.onPluginEvent("userAction",(function(t){var n=t.type,r=t.name,o=t.source;"table"===o&&e.emitEvent("userAction",{type:n,name:r,source:o})}));var o=e.getService(jEe.ID);o&&(this._pluginContext=new KFe(e.theme.toPersistentValue(e.theme.getColorByToken("editor.table.cellBgColor.default"))),null==o||o.registerToolbarWidget((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)({},w3.toolbar.tableCellBgColor,{clazz:XFe,pluginContext:this._pluginContext}),w3.toolbar.tableMergeCell,eLe),w3.toolbar.tableVerticalAlign,oLe),w3.toolbar.tableBorderVisible,$Fe)));var i=e.getService($R.ID);if(null==i||i.registerFilterMiniToolbarItems(zFe),e.onPluginEvent("insertCardByUI:".concat(w3.node.table),(function(t){var n=t.args,o=r._getEditingAreaWidth(),i=n[0]||{};i.widthMode=Dl,e.execCommand("table",Object.assign({width:o},i))})),o){var a=o.registerToolbar("table");t.onPluginEvent("afterTableSelectionChanged",(function(e){e.tableNode?a.open():a&&a.close()}))}null===(n=e.getService(xEe.ID))||void 0===n||n.registerCardSelect((0,Ha.A)({},w3.cardSelect,{type:"TableItem",icon:"editor-main-table",label:sc("表格"),keywords:"表格,bg,biaoge,table",mainSearch:"/bg"})),t.onPluginEvent("tableFocus",(function(e){var t=e.tableId,n=e.wrapDOMNode,o=e.tableUI,i=e.tableNode;r._refreshToolbar(n,t,o,i)})),t.onPluginEvent("tableHover",(function(e){var t=e.tableId,n=e.wrapDOMNode,o=e.tableUI,i=e.tableNode;r._refreshToolbar(n,t,o,i)})),t.onPluginEvent("stableSelectionChange",(function(e){var t=e.tableId,n=e.wrapDOMNode,o=e.tableUI,i=e.tableNode;setTimeout((function(){r._refreshToolbar(n,t,o,i)}),0)})),t.onPluginEvent("tableBlur",(function(e){var t=e.tableNode;r._destroyToolbar(t)})),t.onPluginEvent("tableDestroy",(function(e){var t=e.wrapDOMNode;r._destroyToolbar(t)})),t.onPluginEvent("tableMaximize",(function(t){var n=t.tableId,o=t.wrapDOMNode,i=t.tableUI,a=t.tableNode;a._isMaxView?e.exitMaxView():r._executeMaximize(n,o,i,a)})),this.option.onEditorPluginInit&&this.option.onEditorPluginInit(this.editor)}},{key:"_getEditingAreaWidth",value:function(){var e=this.renderer,t=document.createElement("div");e.domRootNode.appendChild(t);var n=t.getBoundingClientRect();return t.remove(),n.width}},{key:"_getTableCardToolbar",value:function(e,t,n,r){var o=this;if(Us.mobile)return[];var i,a=function(e){if(!e.isTableSelection)return!1;var t=e.firstRange,n=e.lastRange,r=t.start.node.parentNode.parentNode;return t.start.node===r.firstChild.firstChild&&n.start.node===r.lastChild.lastChild}(this.editor.engine.getViewSelection()),l=this.editor.queryCommandState("tableMergeCell"),u=this.editor.queryCommandState("tableBorderVisible"),c=[].concat((0,ln.A)(this._generateEquallyColumnToolbarItem(e,t,n,r)),[{name:"widthMode",cardData:{getWidthMode:function(){return o.editor.queryCommandValue("tableToggleWidthMode",e)}},onClick:function(){o._toggleWidthMode(e),o._refreshCardToolbar(t,e,n,r)}},{name:"maximize",onClick:function(){requestAnimationFrame((function(){o._executeMaximize(e,t,n,r)}))}}]);u!==ft&&u!==dt||c.push({type:"item",icon:"t-border-visible",text:sc(u===ft?"显示边框":"隐藏边框"),name:"borderVisible",selected:u===ft,onClick:function(){o.editor.execCommand("tableBorderVisible")}}),l!==ft&&l!==dt||c.push("|",{type:"item",icon:"t-table-cell-merge",text:sc(l===ft?"拆分单元格":"合并单元格"),name:"cellMerge",selected:l===ft,onClick:function(){l===ft?o.editor.execCommand("tableUnmergeCell"):o.editor.execCommand("tableMergeCell")}});try{var s=this.editor.option.toolbar.getCustomComponent("colorButton");"function"==typeof s&&(i=s)}catch(e){console.warn("没有读取到toolbar配置的色板")}c.push("|",{name:"tableHead",text:sc("标题行列"),icon:"table-head",onClick:function(){},type:"dropdown",overlay:cLe,overlayProps:{ColorButton:i,editor:this.editor,getRowHead:function(){return n.viewNode.attrs.rowHead},getColHead:function(){return n.viewNode.attrs.colHead},getInitColor:function(){var e=n.viewNode.attrs.rowHead||n.viewNode.attrs.colHead;if("string"==typeof e){var t=e.split(";"),r=(0,tn.A)(t,2);return{bg:r[0],text:r[1]}}},toggleRowHead:function(e,t){o.editor.execCommand("tableRowHead",n.viewNode.id,!!e&&t)},toggleColHead:function(e,t){o.editor.execCommand("tableColHead",n.viewNode.id,!!e&&t)}}}),a&&c.unshift({name:"copy",onClick:function(){!function(e,t){var n=document.createRange();n.selectNode(t),e.execCommand("copy",n)?mC.success(sc("复制成功")):mC.error(sc("复制失败"))}(o.editor,t)}},{name:"delete",onClick:function(){o.editor.execCommand("deleteTable",e),o.editor.execCommand("focus",{preventScroll:!0})}},"|"),c=this._filterWidthMode(c,t,r,n);var d=this.editor.getService($R.ID);return d&&(c=UR.filter(c,d.getDisabledMiniToolbarItems())),this._injectUserActionEvent(c,"mini"),UR.generateToolbarItems(c)}},{key:"_filterWidthMode",value:function(e,t,n,r){return r.viewNode.attrs.fitWidth||Math.min(t.offsetWidth,750)>=n.offsetWidth&&(e=e.filter((function(e){return"widthMode"!==e.name}))),e}},{key:"_injectUserActionEvent",value:function(e,t){var n=this;e.forEach((function(e){var r=e.onClick;r&&(e.onClick=function(){r.apply(void 0,arguments),n.editor.emitEvent("userAction",{type:"cardToolbar",name:e.name,source:"table|".concat(t)})})}))}},{key:"_generateEquallyColumnToolbarItem",value:function(e,t,n,r){var o=this,i=n.viewNode.attrs,a=i.colWidths,l=i.fitWidth,u=(0,bI.A)(a),c=u[0],s=u.slice(1),d=s.pop();if(!c||!d)return[];var f=[];window.ResizeObserver&&f.push({type:"item",icon:"column-adaptation",text:sc(l?"取消自适应":"开启自适应"),title:sc("自适应宽度"),name:"columnAdaptation",selected:l,onClick:function(){o.editor.execCommand("tableColumnAdaptation",e),o._refreshCardToolbar(t,e,n,r)}});var h=d-c;return s.every((function(e){return e===c}))&&h>=0&&h<a.length?(f.length>0&&f.push("|"),f):(f.unshift({name:"equallyColumn",icon:"t-equally-column",title:sc("列等宽"),text:sc("根据宽度等分列宽"),onClick:function(){o.editor.execCommand("tableEquallyColumn",e,o._getEditingAreaWidth()),o._refreshCardToolbar(t,e,n,r)}}),f.length>0&&f.push("|"),f)}},{key:"_executeMaximize",value:function(e,t,n,r){var o=this,i=this.editor;UR.destroyContainerToolbar(r),UR.destroyCardToolbar(r),function(e,t){var n=e.engine.getViewSelection().firstRange.start.node.closest(qe.Table),r=Vy(t._wrapNode);if(n&&n===r)return!1;var o=Hy(r.firstChild.firstChild).getContentDOMNode(),i=[e.engine.transformDOMRange(Od.createRange({startContainer:o,startOffset:0,endContainer:o,endOffset:0}))];e.kernel.execCommand("selection",{focus:"start",anchor:"start",ranges:i})}(i,r),i.enterMaxView(t,{sidebar:!1},null,(function(){n.leaveMaxView(),Promise.resolve().then((function(){o._refreshCardToolbar(t,e,n,r)})),i.execCommand("focus",{preventScroll:!0})})),n.enterMaxView(),i.execCommand("focus",{preventScroll:!0})}},{key:"_toggleWidthMode",value:function(e){this.editor.execCommand("tableToggleWidthMode",e)}},{key:"_refreshToolbar",value:function(e,t,n,r){this._refreshCardToolbar(e,t,n,r)}},{key:"_refreshCardToolbar",value:function(e,t,n,r){var o,i,a;if(e.isConnected){if(this.editor.isMaxView)return UR.destroyCardToolbar(e);if(!(null===(i=(o=this.editor).isMiniEditor)||void 0===i?void 0:i.call(o))||(null===(a=this.editor.getService(DTe.ID))||void 0===a?void 0:a.isFullscreen())){var l=this.editor,u=l.scrollNode,c=l.innerOverlayContainer;UR.updateCardToolbar(e,c,u,this._getTableCardToolbar(t,e,n,r),{offset:0,shouldCancel:function(){return!document.querySelector(".table-head-custom-open")}})}}}},{key:"_destroyToolbar",value:function(e){UR.destroyContainerToolbar(e),UR.destroyCardToolbar(e)}}])}(Fh);Object.defineProperty(fLe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:w3.pluginName}),Object.defineProperty(fLe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:HFe}),Object.defineProperty(fLe,"Colors",{enumerable:!0,configurable:!0,writable:!0,value:{"editor.table.cellBgColor.default":{light:"#F4F5F5",dark:"#1F1F1F"}}});var hLe={bottomDistance:0,minFrame:25,triggerCommands:["breakLine","insertCard"]},pLe=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Ww()({},hLe,t)}),[{key:"bottomDistance",get:function(){return this._option.bottomDistance}},{key:"minFrame",get:function(){return this._option.minFrame}},{key:"triggerCommands",get:function(){return this._option.triggerCommands}}])}();function vLe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,mLe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function mLe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mLe=function(){return!!e})()}Object.defineProperty(pLe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"typeWriter"});var gLe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=vLe(this,t,arguments),Object.defineProperty(e,"_bottomDistance",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){var n=this;this._bottomDistance=this.option.bottomDistance,!this._bottomDistance||this._bottomDistance<=0||(this.kernel.editing.on("afterExecCommand",(function(e){var t=e.commandName;n.option.triggerCommands.includes(t)&&n._processTypeWriter()})),t.onRootNode("keydown",(function(e){(Ks.isArrowDown(e)||Ks.isArrowUp(e))&&ss((function(){n._processTypeWriter()}))}),!1))}},{key:"_processTypeWriterForReadWrite",value:function(){var e=document.getSelection().getRangeAt(0),t=Od.getRangeRect(e);if(t){var n=t.bottom,r=t.top,o=this.editor.scrollNode,i=function(e){var t=e.getBoundingClientRect();return Object.assign(Object.assign({},t),{top:0,left:0,bottom:t.height,right:t.width})}(o),a=i.bottom-n,l=this._bottomDistance-a;l>=this.option.minFrame?o.scrollTop+=l:r<94&&(o.scrollTop-=94-r+t.height)}}},{key:"_processTypeWriter",value:function(){var e=document.getSelection();if(!(e.rangeCount<1)&&this.renderer.isFocus()){if(this.editor.scrollNode===document.documentElement)return this._processTypeWriterForReadWrite();var t=e.getRangeAt(0),n=Od.getRangeRect(t);if(n){var r=n.bottom,o=this.editor.scrollNode,i=o.getBoundingClientRect().bottom-r,a=this._bottomDistance-i;a>=this.option.minFrame&&(o.scrollTop+=a)}}}}])}(Fh);Object.defineProperty(gLe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:zse.pluginName}),Object.defineProperty(gLe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:pLe});var bLe={default:null},yLe=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Object.assign(Object.assign({},bLe),t)}),[{key:"default",get:function(){return this._option.default}}])}();Object.defineProperty(yLe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"uiSwitch"});var wLe="preferences",ALe="maximize",kLe=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"editor",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"UI_TYPE",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"EDITOR_CLASSNAME",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"MINI_TOOLBAR_BLACKLIST",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"MINI_TOOLBAR_FULLSCREEN_BLACKLIST",{enumerable:!0,configurable:!0,writable:!0,value:[ALe]}),Object.defineProperty(this,"OVERLAY_CLASSNAME",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"_isFullscreen",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_toolbarAgent",{enumerable:!0,configurable:!0,writable:!0,value:null});var n=t.kernel;this._kernel=n,this.initEvent()}),[{key:"isFullscreen",get:function(){return this._isFullscreen}},{key:"toolbarType",get:function(){var e=this;return this.UI_TYPE&&Object.keys(hde).find((function(t){return hde[t]===e.UI_TYPE}))?this.UI_TYPE:"default"}},{key:"initEvent",value:function(){var e=this,t=this.editor;this._kernel.once("document.ready",(function(){var n=t.getService(jEe.ID);n&&(e._toolbarAgent=n.registerToolbar(e.toolbarType)),e._resetMiniToolbar(),e.show(!0)})),t.on("enterFullscreen",(function(){e._enterFullscreen(),e.hide()})),t.on("exitFullscreen",(function(){e._exitFullscreen(),e.show()}))}},{key:"show",value:function(e){var t=this.editor,n=t.renderer;t.editorNode.classList.add(this.EDITOR_CLASSNAME),n.globalOverlayNode.classList.add(this.OVERLAY_CLASSNAME),n.emitPluginEvent("uiSwitched",{type:this.UI_TYPE,isInitSwitch:e}),this._toolbarAgent&&this._toolbarAgent.open()}},{key:"hide",value:function(){var e=this.editor,t=e.renderer;e.editorNode.classList.remove(this.EDITOR_CLASSNAME),t.globalOverlayNode.classList.remove(this.OVERLAY_CLASSNAME),t.emitPluginEvent("uiSwitched",{type:null}),this._toolbarAgent&&this._toolbarAgent.close()}},{key:"_enterFullscreen",value:function(){this._isFullscreen=!0;var e=this.editor.getService($R.ID);null==e||e.removeDisabledMiniToolbarItems.apply(e,(0,ln.A)(this.MINI_TOOLBAR_BLACKLIST)),null==e||e.addDisabledMiniToolbarItems.apply(e,(0,ln.A)(this.MINI_TOOLBAR_FULLSCREEN_BLACKLIST))}},{key:"_resetMiniToolbar",value:function(){var e,t;null===(t=this.editor.getService($R.ID))||void 0===t||(e=t).addDisabledMiniToolbarItems.apply(e,(0,ln.A)(this.MINI_TOOLBAR_BLACKLIST))}},{key:"_exitFullscreen",value:function(){var e,t,n,r;this._isFullscreen=!1,null===(n=this.editor.getService($R.ID))||void 0===n||(e=n).removeDisabledMiniToolbarItems.apply(e,(0,ln.A)(this.MINI_TOOLBAR_FULLSCREEN_BLACKLIST)),null===(r=this.editor.getService($R.ID))||void 0===r||(t=r).addDisabledMiniToolbarItems.apply(t,(0,ln.A)(this.MINI_TOOLBAR_BLACKLIST))}}])}();function _Le(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,CLe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function CLe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(CLe=function(){return!!e})()}var NLe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=_Le(this,t,arguments),Object.defineProperty(e,"UI_TYPE",{enumerable:!0,configurable:!0,writable:!0,value:yM.NOTE}),Object.defineProperty(e,"EDITOR_CLASSNAME",{enumerable:!0,configurable:!0,writable:!0,value:"ne-note-ui"}),Object.defineProperty(e,"MINI_TOOLBAR_BLACKLIST",{enumerable:!0,configurable:!0,writable:!0,value:[ALe,wLe]}),Object.defineProperty(e,"MINI_TOOLBAR_FULLSCREEN_BLACKLIST",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(e,"OVERLAY_CLASSNAME",{enumerable:!0,configurable:!0,writable:!0,value:"ne-overlay-with-note-ui"}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(kLe);function OLe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,xLe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function xLe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xLe=function(){return!!e})()}var ELe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=OLe(this,t,arguments),Object.defineProperty(e,"UI_TYPE",{enumerable:!0,configurable:!0,writable:!0,value:yM.SIMPLE}),Object.defineProperty(e,"EDITOR_CLASSNAME",{enumerable:!0,configurable:!0,writable:!0,value:"ne-simple-ui"}),Object.defineProperty(e,"MINI_TOOLBAR_BLACKLIST",{enumerable:!0,configurable:!0,writable:!0,value:[ALe,wLe]}),Object.defineProperty(e,"MINI_TOOLBAR_FULLSCREEN_BLACKLIST",{enumerable:!0,configurable:!0,writable:!0,value:[ALe]}),Object.defineProperty(e,"OVERLAY_CLASSNAME",{enumerable:!0,configurable:!0,writable:!0,value:"ne-overlay-with-simple-ui"}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(kLe);function DLe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,PLe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function PLe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(PLe=function(){return!!e})()}var RLe=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=DLe(this,t,[e]),Object.defineProperty(n,"UI_TYPE",{enumerable:!0,configurable:!0,writable:!0,value:yM.SMALL}),Object.defineProperty(n,"EDITOR_CLASSNAME",{enumerable:!0,configurable:!0,writable:!0,value:"ne-small-ui"}),Object.defineProperty(n,"OVERLAY_CLASSNAME",{enumerable:!0,configurable:!0,writable:!0,value:"ne-overlay-with-small-ui"}),n}return(0,Xe.A)(t,e),(0,$e.A)(t)}(kLe);function SLe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,TLe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function TLe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(TLe=function(){return!!e})()}var jLe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=SLe(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Dy);function ILe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,BLe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function BLe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(BLe=function(){return!!e})()}Object.defineProperty(jLe,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze(Wse.service.IUiSwitchEditorService)});var MLe=function(e){function t(){return(0,Ke.A)(this,t),ILe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getType",value:function(){return this.plugin.option.default}},{key:"destroy",value:function(){}}])}(jLe);function FLe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,LLe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function LLe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(LLe=function(){return!!e})()}var ULe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=FLe(this,t,arguments),Object.defineProperty(e,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_handlers",{enumerable:!0,configurable:!0,writable:!0,value:(0,Ha.A)((0,Ha.A)((0,Ha.A)({},yM.SIMPLE,ELe),yM.NOTE,NLe),yM.SMALL,RLe)}),Object.defineProperty(e,"_handler",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this;this.option.default&&this._handlers[this.option.default]&&(this._handler=new this._handlers[this.option.default](e)),e.extendMethods({isMiniEditor:function(){return t.option.default===mM||t.option.default===gM},isNoteMiniEditor:function(){var e;return t.option.default===gM&&!(null===(e=t._handler)||void 0===e?void 0:e.isFullscreen)},getUIInjector:function(e){return function(){var n;return(null===(n=gh.get(e))||void 0===n?void 0:n({isMiniEditor:t.option.default===mM||t.option.default===gM}))||null}}})}}])}(Fh);function VLe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,HLe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function HLe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(HLe=function(){return!!e})()}Object.defineProperty(ULe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:Wse.pluginName}),Object.defineProperty(ULe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:yLe}),Object.defineProperty(ULe,"Service",{enumerable:!0,configurable:!0,writable:!0,value:MLe});var zLe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=VLe(this,t,arguments),Object.defineProperty(e,"_aliveCheckers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"uploadManager",get:function(){return this.plugin._uploadManager}},{key:"uploadObserver",get:function(){return this.plugin._uploadObserver}},{key:"addAliveChecker",value:function(e){this._aliveCheckers.push(e)}},{key:"checkAlive",value:function(e){if(0===this._aliveCheckers.length)return!1;try{this._aliveCheckers.forEach((function(t){if(t(e))throw"上传任务端仍在"}))}catch(e){return!0}return!1}},{key:"destroy",value:function(){}}])}(oDe);function WLe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,qLe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function qLe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qLe=function(){return!!e})()}var $Le=function(e){function t(){var e;return(0,Ke.A)(this,t),e=WLe(this,t,arguments),Object.defineProperty(e,"_uploadManager",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_uploadObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this,n=this.kernel;this._uploadManager=new Dte,this._uploadObserver=new Tte(this._uploadManager,(function(e){return!!t.service.checkAlive(e)})),n.model.on("document.create",(function(e){t._uploadManager.reset(e.id)}))}},{key:"destroy",value:function(){this._uploadManager.destroy(),this._uploadObserver.destroy(),this._uploadManager=null,this._uploadObserver=null,Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}}])}(Fh);function KLe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,YLe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function YLe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(YLe=function(){return!!e})()}Object.defineProperty($Le,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:lse.pluginName}),Object.defineProperty($Le,"Service",{enumerable:!0,configurable:!0,writable:!0,value:zLe});var GLe=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;return(0,Ke.A)(this,t),n=KLe(this,t),Object.defineProperty(n,"_viewNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"_resizeObserver",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"_wait",{enumerable:!0,configurable:!0,writable:!0,value:200}),Object.defineProperty(n,"_prevRect",{enumerable:!0,configurable:!0,writable:!0,value:null}),n._viewNode=e,n._wait=r,n._initResizeObserver(),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"_initResizeObserver",value:function(){var e=this;this._resizeObserver=new ResizeObserver(Jbe()((function(t){requestAnimationFrame((function(){var n;if(e._resizeObserver){bt(1===t.length,"plugins/view-resize-observer/src/common/view-resize-observer.ts:34");var r=t[0],o=r.target.getBoundingClientRect();(null===(n=e._prevRect)||void 0===n?void 0:n.width)!==o.width&&(e.emit("viewSizeChange",{prev:e._prevRect,curr:{width:o.width}},r),e._prevRect={width:o.width})}}))}),this._wait)),this._resizeObserver.observe(this._viewNode)}},{key:"destroy",value:function(){var e;this._prevRect=null,this._viewNode=null,null===(e=this._resizeObserver)||void 0===e||e.disconnect(),this._resizeObserver=null}}])}(it);function JLe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,XLe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function XLe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(XLe=function(){return!!e})()}var QLe=function(){return(0,$e.A)((function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,Ke.A)(this,e),Object.defineProperty(this,"_enable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this._enable=t}),[{key:"enable",get:function(){return this._enable}}])}();Object.defineProperty(QLe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"viewResizeObserver"});var ZLe=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=JLe(this,t,[e]),Object.defineProperty(r,"kernelOption",{enumerable:!0,configurable:!0,writable:!0,value:n}),r}return(0,Xe.A)(t,e),(0,$e.A)(t)}(QLe);function eUe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,tUe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function tUe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(tUe=function(){return!!e})()}Object.defineProperty(ZLe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"viewResizeObserver"});var nUe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=eUe(this,t,arguments),Object.defineProperty(e,"_viewResizeObserver",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){this._viewResizeObserver=new GLe(e.editorNode),this._viewResizeObserver.on("viewSizeChange",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.emitPluginEvent.apply(e,["viewSizeChange"].concat(n))}))}},{key:"destroy",value:function(){this._viewResizeObserver&&this._viewResizeObserver.destroy(),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}}])}(Fh);Object.defineProperty(nUe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:qse.pluginName}),Object.defineProperty(nUe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:QLe});var rUe=o(8385),oUe=o.n(rUe),iUe=o(1839),aUe=o.n(iUe);const lUe=z6;var uUe={},cUe={},sUe=-4;lUe.forEach((function(e){uUe[e.value]=e.name,cUe[e.value]=e.value}));var dUe=["c","cpp","csharp","erlang","go","groovy","java","kotlin","makefile","objectivec","perl","python","rust","swift","vbnet"];const fUe={adaptModeToCodeMirrorLanguageMode:function(e){return cUe[e]||e},getCodeMirrorTabSizeByMode:function(e){var t=e.mode;return dUe.includes(t)?4:2},getCodeMirrorConfig:function(e){return e.code,e.mode,{}},adaptMode:function(e){return uUe[e.mode]?e.mode:"plain"},calcMarginLeft:function(e,t){return e<10||!t?sUe:8*((e+"").length-1)+sUe}};var hUe=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))};function pUe(e){return hUe(this,void 0,void 0,Cc().mark((function t(){return Cc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.CodeMirror){t.next=3;break}return t.next=3,_f(e);case 3:case"end":return t.stop()}}),t)})))}function vUe(e,t,n,r,o,i){return hUe(this,void 0,void 0,Cc().mark((function a(){return Cc().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,pUe(n);case 2:return a.abrupt("return",mUe(e,t,r,o,i));case 3:case"end":return a.stop()}}),a)})))}function mUe(e,t,n,r,o){var i,a=fUe.adaptModeToCodeMirrorLanguageMode(t),l=fUe.getCodeMirrorConfig({code:n,mode:t});o=o||{},i=Us.mobile?!!r&&"nocursor":!!r;var u=window.CodeMirror.default(e,Object.assign(Object.assign({value:n,mode:a,theme:o.theme,lineWrapping:!!o.autoWrap,lineNumbers:!1!==o.lineNumbers,useDefaultKeyMap:!0,foldGutter:!0,lightLines:o.lightLines||!0,matchBrackets:!0,readOnly:i,printing:o.printing,history:o.history},l),{tabSize:o.tabSize,indentUnit:o.indentUnit,indentWithTabs:o.indentWithTab,preventCopy:o.preventCopy||!1,customStyle:o.customStyle||[]}));return u.CodeMirror=window.CodeMirror.default,u}var gUe=W6.filter((function(e){return e.isDark}));function bUe(e,t){return t?gUe.find((function(t){return t.value===e}))?e:H6.DARCULAR:e}const yUe=W6;function wUe(e){var t=e.name,n=!!t;return Gu().createElement("div",{className:"CodeMirror-code-name ".concat(n?"":"code-name-placeholder")},Gu().createElement("span",{className:"normal"},t||""))}var AUe=function(e){return e.stopPropagation()};const kUe=function(e){var t=e.name,n=e.onNameChange,r=e.onCollapsedChange,o=e.collapsed,i=!!t,a=(0,Yu.useState)(!1),l=(0,tn.A)(a,2),u=l[0],c=l[1],s=(0,Yu.useState)(t),d=(0,tn.A)(s,2),f=d[0],h=d[1],p=(0,Yu.useCallback)((function(){u||o?o&&r():(c(!0),h(t))}),[u,o]),v=(0,Yu.useCallback)((function(e){return h(e.target.value)}),[f]),m=(0,Yu.useCallback)((function(e){Ks.isEnter(e)&&(n(f),c(!1))}),[f]),g=(0,Yu.useCallback)((function(){n(f),c(!1)}),[f]);return(0,Yu.useEffect)((function(){o&&u&&(n(f),c(!1))}),[o,u]),Gu().createElement("div",{className:"CodeMirror-code-name ".concat(i?"":"code-name-placeholder")},u&&!o?Gu().createElement("span",{onMouseDown:AUe,onMouseMove:AUe,onMouseUp:AUe},Gu().createElement(KP,{autoFocus:!0,value:f,onChange:v,onKeyDown:m,onBlur:g,placeholder:sc("请输入代码块名称")})):Gu().createElement("span",{className:"normal",onClick:p},t||sc("请输入代码块名称")))};var _Ue=Gu().forwardRef((function(e,t){var n=e.collapsed,r=e.marginLeft,o=e.onClick;return Gu().createElement(Qx,{title:sc(n?"展开":"收起")},Gu().createElement("div",{onClick:o,ref:t,className:"ne-codeblock-collapsed-button","data-testid":"ne-codeblock-collapsed-button",style:{marginLeft:r}},Gu().createElement(SC,{type:"collapsed",className:n?"CodeMirror-collapsed-folded":"CodeMirror-collapsed-open"})))}));_Ue.displayName="CollapsedButton";const CUe=_Ue;var NUe=480;function OUe(e,t){return e<NUe&&t>NUe||e>NUe&&t<NUe}function xUe(e){e.preventDefault()}function EUe(e){e.stopPropagation()}function DUe(e){var t=(0,Yu.useState)(""),n=(0,tn.A)(t,2),r=n[0],o=n[1],i=(0,Yu.useState)([]),a=(0,tn.A)(i,2),l=a[0],u=a[1],c=(0,Yu.useCallback)((function(e){e.stopPropagation(),e.preventDefault()}),[]),s=(0,Yu.useCallback)((function(e){o(e.target.value)}),[o]),d=(0,Yu.useCallback)((function(e){u(e)}),[]);(0,Yu.useEffect)((function(){if(l){var e=requestAnimationFrame((function(){var e=document.querySelector(".".concat(l[0]," .check-space .ne-icon"));if(e){var t=e.getBoundingClientRect();if(0!==t.width&&0!==t.height){var n=e.closest("ul.ant-menu");if(n){var r=n.getBoundingClientRect();if(0!==r.width&&0!==r.height){var o=n.scrollTop,i=n.scrollHeight;t.top<r.top&&o>0?n.scrollTop=Math.max(o-(r.top-t.top)-40,0):t.bottom>r.bottom&&i>0&&(n.scrollTop=Math.min(i,o+(t.bottom-r.bottom)+40))}}}}}));return function(){return cancelAnimationFrame(e)}}}),[r,l]);var f,h=(f=!!e.isDark,[{name:"mode",label:sc("代码语言"),getValue:function(e){return e.cardData.mode},onChange:function(e,t){var n;return null===(n=t.onModeChange)||void 0===n?void 0:n.call(t,e)},onlySmallMode:!0,showCheck:!0,showSearch:!0,fuse:new uAe(lUe.map((function(e){return{label:e.name,value:e.value,active:function(t){return t===e.value}}})),{includeMatches:!0,includeScore:!0,distance:12,keys:["value","label"]}),children:(0,ln.A)(lUe.map((function(e){return{label:e.name,value:e.value,active:function(t){return t===e.value}}})))},"-",{name:"theme",label:sc("代码主题"),getValue:function(e){return e.cardData.theme},onlySmallMode:!0,showCheck:!0,onChange:function(e,t){var n;return null===(n=t.onThemeChange)||void 0===n?void 0:n.call(t,e)},children:(f?gUe:yUe).map((function(e){return{label:e.name,value:e.value,active:function(t){return t===e.value}}}))},"-",{name:"indentWithTab",label:sc("缩进模式"),getValue:function(e){return e.cardData.indentWithTab},showCheck:!0,onChange:function(e,t){var n;return null===(n=t.onIndentWithTabsChange)||void 0===n?void 0:n.call(t,"Tab"===e)},children:[{value:"Tab",label:"Tab",active:function(e){return e}},{value:"Space",label:"Space",active:function(e){return!e}}]},{name:"tabSize",label:sc("缩进宽度"),getValue:function(e){return Number(e.tabSize)},showCheck:!0,onChange:function(e,t){var n;return null===(n=t.onIndentUnitChange)||void 0===n?void 0:n.call(t,e)},children:[{value:"2",label:"2",active:function(e){return 2===e}},{value:"4",label:"4",active:function(e){return 4===e}},{value:"8",label:"8",active:function(e){return 8===e}}]},"-",{name:"autoWrap",label:sc("自动换行"),testId:"ne-codeblock-auto-wrap-switch",getValue:function(e){return e.cardData.autoWrap},onChange:function(e,t){var n;return null===(n=t.onAutoWrapChange)||void 0===n?void 0:n.call(t,e)},isChecked:function(e){return e}},{name:"lineNumbers",label:sc("行号"),testId:"ne-codeblock-line-number-switch",getValue:function(e){return e.cardData.lineNumbers},onChange:function(e,t){var n;return null===(n=t.onLineNumbersShowChange)||void 0===n?void 0:n.call(t,e)},isChecked:function(e){return e}},"-",{name:"format",label:sc("自动缩进"),rightLabel:Us.macos?"⇧+⌘+F":"Ctrl+Shift+F",getValue:function(e){return null},onClick:function(e){var t;return null===(t=e.onFormatLange)||void 0===t?void 0:t.call(e)}}]);return Gu().createElement(cP,{"data-theme":e.theme,selectedKeys:[],openKeys:l,onClick:function(t){var n,r,o,i=t.keyPath,a=t.domEvent,l=(null===(r=null===(n=a.currentTarget)||void 0===n?void 0:n.dataset)||void 0===r?void 0:r.keyPath)?a.currentTarget.dataset.keyPath.split(/\//g):i.slice(0),u=l.shift(),c=h.find((function(e){return"-"!==e&&e.name===u}));if(c&&"-"!==c&&c.isChecked)return!1;if(c&&"-"!==c){if(c.onClick)return c.onClick(e);if(c.onChange&&c.children){var s=l.shift(),d=null===(o=c.children.find((function(e){return e.label===s})))||void 0===o?void 0:o.value;return c.onChange(d,e)}}},onOpenChange:d,className:nk()("codeblock-pop-menu","codeblock-pop-menu-"+e.theme.replace(/\s+/g,"")),onMouseDown:c},h.filter((function(t){return e.smallMode||"-"===t||!t.onlySmallMode})).reduce((function(e,t){return e.length||"-"!==t?(e.push(t),e):e}),[]).map((function(t,n){if("-"===t)return Gu().createElement(cP.Divider,{key:n});var o=t.getValue(e);return t.isChecked?Gu().createElement(cP.Item,{key:t.name,className:"right-contains"},t.label,Gu().createElement("span",{className:"right-slot","data-testid":t.testId},Gu().createElement(kR,{checked:t.isChecked(o),onChange:function(n){var r;return null===(r=t.onChange)||void 0===r?void 0:r.call(t,n,e)},size:"small"}))):t.children?Gu().createElement(cP.SubMenu,{key:t.name,popupOffset:[16,0],title:t.label,popupClassName:nk()("codeblock-pop-menu","codeblock-pop-menu-"+e.theme.replace(/\s+/g,""),t.name,{showSearch:t.showSearch})},t.showSearch&&Gu().createElement("div",{"data-id":e.randomID,className:"codeblock-search",onMouseDown:EUe,onMouseUp:EUe,onKeyDown:EUe,onClick:EUe},Gu().createElement(KP,{placeholder:"搜索语言",value:r,onChange:s,onFocus:function(e){return e.preventDefault()}})),(r&&t.fuse?t.fuse.search(r).filter((function(e){return Number(e.score||0)<=.25})).map((function(e){return e.item})):t.children).map((function(e){return Gu().createElement(cP.Item,{onMouseDown:c,key:e.label,"data-key-path":t.name+"/"+e.label},t.showCheck&&Gu().createElement("span",{className:"check-space"},e.active(o)&&Gu().createElement(SC,{type:"check"})),e.label)}))):t.rightLabel?Gu().createElement(cP.Item,{key:t.name,className:"flexable","data-testid":t.name},t.label,Gu().createElement("span",{className:"right-slot label"},t.rightLabel)):Gu().createElement(cP.Item,{key:t.name},t.label)})))}function PUe(){}function RUe(e,t){var n=(0,Yu.useState)(-1),r=(0,tn.A)(n,2),o=r[0],i=r[1];return(0,Yu.useEffect)((function(){if(!t)return PUe;var n=-1;if(-1===o&&(n=requestAnimationFrame((function(){var e=t.getBoundingClientRect();o!==e.width&&i(e.width)}))),window.ResizeObserver){var r=new ResizeObserver((function(t){n=requestAnimationFrame((function(){if(t[0]){var n=t[0].contentRect;n.width!==o&&e(o,n.width)&&i(n.width)}}))}));return r.observe(t),function(){r.disconnect(),n>0&&cancelAnimationFrame(n)}}var a=setInterval((function(){n=requestAnimationFrame((function(){var n=t.getBoundingClientRect();n.width!==o&&e(o,n.width)&&i(n.width)}))}),1e3);return function(){clearInterval(a),n>0&&cancelAnimationFrame(n)}}),[t,o,e]),o}const SUe=function(e){var t=e.mode,n=e.theme,r=e.getPopupContainer,o=e.onSelect,i=(0,Yu.useState)(!1),a=(0,tn.A)(i,2),l=a[0],u=a[1],c=(0,Yu.useCallback)((function(e,t){e=e.toLowerCase();var n=t.key||"",r=t.name||"";return r=r.toLowerCase(),n.includes(e)||r.includes(e)}),[]),s=(0,Yu.useCallback)((function(e){e?u(!0):setTimeout(u,100,!1)}),[]);return Gu().createElement(GOe,{"data-testid":"ne-codeblock-mode-selector",className:"ne-codeblock-header-select",dropdownClassName:Uf("ne-code-popup","ne-code-popup-"+n.replace(/\s/g,"")),size:"small",showSearch:!0,dropdownMatchSelectWidth:!1,style:{width:l?140:"auto"},defaultValue:t,value:t,getPopupContainer:r,onSelect:o,filterOption:c,virtual:!1,onDropdownVisibleChange:s},lUe.map((function(e){return Gu().createElement(JOe,{name:e.name,value:e.value,key:e.value,"data-mode-name":e.name},e.name)})))},TUe=function(e){var t=e.theme,n=e.getPopupContainer,r=e.onSelect,o=e.isDark;return Gu().createElement(GOe,{"data-testid":"ne-codeblock-theme-selector",className:"ne-codeblock-header-select",dropdownClassName:Uf("ne-code-popup","ne-code-popup-"+t.replace(/\s/g,"")),size:"small",dropdownMatchSelectWidth:!1,style:{width:"auto"},defaultValue:t,value:t,getPopupContainer:n,onSelect:r,virtual:!1},(o?gUe:yUe).map((function(e){var t=e.name,n=e.value;return Gu().createElement(JOe,{name:t,value:n,key:n,"data-mode-name":n},t)})))};function jUe(e){var t=(0,Yu.useRef)(Math.random().toString(16).slice(2)),n=(0,Yu.useState)(e.focus),r=(0,tn.A)(n,2),o=r[0],i=r[1],a=(0,Yu.useState)(!1),l=(0,tn.A)(a,1)[0],u=(0,Yu.useState)(!!e.isCollapsed),c=(0,tn.A)(u,2),s=c[0],d=c[1],f=(0,Yu.useState)(null),h=(0,tn.A)(f,2),p=h[0],v=h[1],m=RUe(OUe,p)<=NUe;(0,Yu.useEffect)((function(){if(!e.focus){var n=requestAnimationFrame((function(){var e,n,r=null===(e=document.getSelection())||void 0===e?void 0:e.focusNode;r&&(null===(n=r.closest)||void 0===n?void 0:n.call(r,'[data-id="'.concat(t.current,'"]')))||i(!1)}));return function(){return cancelAnimationFrame(n)}}i(!0)}),[e.focus]);var g=(0,Yu.useCallback)((function(e){!e&&p?v(null):e&&e.parentElement!==p&&v(e.parentElement)}),[p]),b=(0,Yu.useCallback)((function(){var t;d(!s),null===(t=e.onCollapsedHeader)||void 0===t||t.call(e,!s)}),[s]),y=(0,Yu.useCallback)((function(){return e.overlayContainer}),[e.overlayContainer]);return Gu().createElement("div",{className:nk()("codeblock-menu",{collapsed:s,focused:o}),ref:g},Gu().createElement("div",{className:"start-nav"},e.children),o&&Gu().createElement("div",{className:"end-nav"},!m&&Gu().createElement(Gu().Fragment,null,e.showDetect&&Gu().createElement("div",{className:"detect-language",onClick:e.onDetectLang},Gu().createElement(SC,{type:"detect"})),Gu().createElement(SUe,{key:"lang-select",mode:e.mode,theme:e.theme,onSelect:e.onModeChange,getPopupContainer:y}),Gu().createElement($_e,{type:"vertical",className:"ne-embed-nav-divider"})),!m&&Gu().createElement(Gu().Fragment,null,Gu().createElement(TUe,{key:"theme-select",isDark:e.isDark,theme:e.theme,onSelect:e.onThemeChange,getPopupContainer:y}),Gu().createElement($_e,{type:"vertical",className:"ne-embed-nav-divider"})),Gu().createElement(bR,{className:"ne-codeblock-more-panel",overlayClassName:Uf("ne-codeblock-overlay","ne-codeblock-overlay-"+e.theme.replace(/\s+/g,"")),trigger:"click",getPopupContainer:y,noArrow:!0,offset:2,content:Gu().createElement(DUe,{theme:e.theme,isDark:e.isDark,showDetect:e.showDetect,smallMode:m,randomID:t.current,tabSize:e.tabSize,cardData:e.cardData,onThemeChange:e.onThemeChange,onModeChange:e.onModeChange,onIndentWithTabsChange:e.onIndentWithTabsChange,onIndentUnitChange:e.onIndentUnitChange,onAutoWrapChange:e.onAutoWrapChange,onLineNumbersShowChange:e.onLineNumbersShowChange,onDetectLang:e.onDetectLang,onFormatLange:e.onFormatLange}),placement:"bottomRight"},Gu().createElement("div",{onMouseDown:xUe,className:"ne-codeblock-more-button ".concat(l?"ne-codeblock-more-active":""),"data-testid":"ne-codeblock-more-button"},Gu().createElement(SC,{type:"more-horizontal"})))),Gu().createElement(Qx,{title:sc(s?"显示标题栏":"隐藏标题栏"),destroyTooltipOnHide:!0},Gu().createElement("div",{className:"collapsed-btn",onClick:b})))}function IUe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,BUe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function BUe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(BUe=function(){return!!e})()}var MUe=oUe()("ne:codeblock:editor"),FUe=function(e){function t(e){var n;(0,Ke.A)(this,t),n=IUe(this,t,[e]),Object.defineProperty(n,"state",{enumerable:!0,configurable:!0,writable:!0,value:{visible:!1,loading:!1,width:void 0}}),Object.defineProperty(n,"_isMounted",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(n,"_needShow",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(n,"codeMirror",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"cmRootRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(n,"rootRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(n,"loadingRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(n,"collapseIconRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(n,"_clearTask",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"setCursorPosition",{enumerable:!0,configurable:!0,writable:!0,value:function(e){e!==aM?e!==lM||n.codeMirror.setSelectionToEnd():n.codeMirror.setSelectionToStart()}}),Object.defineProperty(n,"syncCardDataToViewState",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e,t,r=n.props.cardData,o=r.mode,i=r.code,a=r.autoWrap,l=r.theme;i!==(null===(e=n.codeMirror)||void 0===e?void 0:e.getValue())&&(null===(t=n.codeMirror)||void 0===t||t.setValue(i)),n.state.mode!==o&&n.updateMode(o),n.state.autoWrap!==a&&n.updateAutoWrap(a),n.state.theme!==l&&n.updateTheme(l)}}),Object.defineProperty(n,"getViewState",{enumerable:!0,configurable:!0,writable:!0,value:function(){return{code:n.codeMirror?n.codeMirror.getValue():n.props.cardData.code,mode:n.state.mode,autoWrap:n.state.autoWrap,theme:n.state.theme}}}),Object.defineProperty(n,"toggleCollapse",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=!n.state.collapsed;n.setState({collapsed:e}),n.props.onCollapsedChange(e)}}),Object.defineProperty(n,"onAISelect",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n.setState({loading:!0}),e.run(n.codeMirror.getValue()).then((function(e){var t;n.setState({loading:!1}),e&&(null===(t=n.codeMirror)||void 0===t||t.setValue(e))}),(function(){return n.setState({loading:!1})}))}}),Object.defineProperty(n,"onNameChange",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n.setState({name:e}),n.props.onNameChange(e)}}),Object.defineProperty(n,"loadLineNumberWidth",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=n.props.cardData.lineNumbers,t=fUe.calcMarginLeft(n.codeMirror.lineCount(),e);t!==n.state.iconMgLeft&&n.setState({iconMgLeft:t})}}),Object.defineProperty(n,"onCodeChange",{enumerable:!0,configurable:!0,writable:!0,value:Qm()((function(e,t){"setValue"!==(null==t?void 0:t.origin)&&n.props.onChange({code:n.codeMirror.getValue()})}),3e3)}),Object.defineProperty(n,"onGutterChange",{enumerable:!0,configurable:!0,writable:!0,value:Qm()((function(e,t){if("setValue"!==(null==t?void 0:t.origin)){var r=n.codeMirror.foldLines(),o=n.codeMirror.lightLines();n.props.onChange({foldLines:r,lightLines:o})}}),100)}),Object.defineProperty(n,"focusToCodeEditor",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e,t;null===(t=null===(e=n.codeMirror)||void 0===e?void 0:e.focus)||void 0===t||t.call(e)}}),Object.defineProperty(n,"blurEditor",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e,t;n.codeMirror&&(null===(t=null===(e=n.codeMirror)||void 0===e?void 0:e.blur)||void 0===t||t.call(e))}});var r=e.cardData;return n.state={width:void 0,mode:r.mode,autoWrap:r.autoWrap,lineNumbers:!1!==r.lineNumbers,theme:r.theme,tabSize:r.tabSize||fUe.getCodeMirrorTabSizeByMode({mode:r.mode}),collapsed:r.collapsed,indentWithTab:r.indentWithTab,name:r.name,hideToolbar:!1!==r.hideToolbar,iconMgLeft:sUe},n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"showCode",value:function(){this._needShow=!0,this._createCodeMirror(),this.cmRootRef.current&&(this.cmRootRef.current.style.height="initial")}},{key:"refresh",value:function(){this.codeMirror.refresh()}},{key:"componentWillUnmount",value:function(){var e,t,n,r,o,i;this.codeMirror&&((null===(e=this.codeMirror)||void 0===e?void 0:e.destroy)?null===(n=null===(t=this.codeMirror)||void 0===t?void 0:t.destroy)||void 0===n||n.call(t):null===(o=null===(r=this.codeMirror)||void 0===r?void 0:r.destory)||void 0===o||o.call(r)),null===(i=this._clearTask)||void 0===i||i.call(this)}},{key:"componentDidMount",value:function(){pUe(this.props.codeMirrorURL).catch((function(){})),this._isMounted=!0,this._createCodeMirror()}},{key:"_createCodeMirror",value:function(){if(this._needShow&&this._isMounted&&!this.state.collapsed){var e=this.state.tabSize,t=this.props.cardData,n=t.mode,r=t.code,o=t.autoWrap,i=t.theme,a=t.indentWithTab,l=this.props.isDark,u=r;try{u=(u||"").replace(/\u00a0/g," ")}catch(e){}this.createCodeEditor(n,u||"",{autoWrap:o,theme:bUe(i,l),tabSize:e,indentWithTab:a,indentUnit:e,lineNumbers:this.state.lineNumbers,history:this.props.historyObj,customStyle:this.props.cardData.customStyle})}}},{key:"componentDidUpdate",value:function(e,t){!e.focus&&this.props.focus&&this.focusToCodeEditor(),e.focus&&!this.props.focus&&this.blurEditor(),e.isDark!==this.props.isDark&&this.codeMirror&&this.codeMirror.setOption("theme",bUe(this.props.cardData.theme,this.props.isDark)),!this.state.collapsed&&t.collapsed&&this._createCodeMirror()}},{key:"updateHeight",value:function(){var e=this;this.forceUpdate((function(){e._clearTask=od((function(){var t,n;null===(n=null===(t=e.codeMirror)||void 0===t?void 0:t.refresh)||void 0===n||n.call(t)}),300)}))}},{key:"expand",value:function(){this.props.onCollapsedChange(!1),this.setState({collapsed:!1})}},{key:"onModeChange",value:function(e){this.updateMode(e),this.props.onModeChange(e)}},{key:"updateMode",value:function(e){var t,n;MUe("change mode to",e);var r=fUe.getCodeMirrorTabSizeByMode({mode:e});this.setState({mode:e,tabSize:r}),null===(t=this.codeMirror)||void 0===t||t.setOption("mode",fUe.adaptModeToCodeMirrorLanguageMode(e)),this.updateTabSize(r),null===(n=this.codeMirror)||void 0===n||n.refresh()}},{key:"onIndentWithTabChange",value:function(e){this.setState({indentWithTab:e}),this.updateIndentWithTab(e),this.focusToCodeEditor(),this.props.onIndentWithTabChange(e)}},{key:"updateIndentWithTab",value:function(e){var t;null===(t=this.codeMirror)||void 0===t||t.setOption("indentWithTabs",e),this.updateTabSize(this.state.tabSize)}},{key:"onTabSizeChange",value:function(e){this.setState({tabSize:e}),this.updateTabSize(e),this.focusToCodeEditor(),this.props.onTabSizeChange(e)}},{key:"updateTabSize",value:function(e){this.codeMirror&&(this.codeMirror.setOption("tabSize",e),this.codeMirror.formatAll())}},{key:"onAutoWrapChange",value:function(e){this.updateAutoWrap(e),this.props.onAutoWrapChange(e)}},{key:"onLineNumberChange",value:function(e){this.codeMirror&&(this.codeMirror.setOption("lineNumbers",e),this.props.onLineNumberChange(e),this.setState({lineNumbers:e}),this.loadLineNumberWidth())}},{key:"onHideToolbar",value:function(e){this.setState({hideToolbar:e}),this.props.onChange({hideToolbar:e})}},{key:"updateAutoWrap",value:function(e){var t=this;e=!!e,this.codeMirror&&(this._clearTask=od((function(){var n;null===(n=t.codeMirror)||void 0===n||n.setOption("lineWrapping",e)}),16)),this.setState({autoWrap:e})}},{key:"onThemeChange",value:function(e){this.updateTheme(e),this.props.onThemeChange(e)}},{key:"updateTheme",value:function(e){var t,n,r,o=this;this.codeMirror&&(null===(r=null===(n=null===(t=this.cmRootRef.current)||void 0===t?void 0:t.classList)||void 0===n?void 0:n.add)||void 0===r||r.call(n,"ne-codeblock-theme-updating"),this._clearTask=od((function(){var t,n,r,i;null===(t=o.codeMirror)||void 0===t||t.setOption("theme",e),null===(i=null===(r=null===(n=o.cmRootRef.current)||void 0===n?void 0:n.classList)||void 0===r?void 0:r.remove)||void 0===i||i.call(r,"ne-codeblock-theme-updating")}),16)),this.setState({theme:e})}},{key:"handleDetectLange",value:function(){var e=this;this.codeMirror&&function(e){return hUe(this,void 0,void 0,Cc().mark((function e(){return Cc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return","");case 1:case"end":return e.stop()}}),e)})))}(this.codeMirror.getValue()).then((function(t){t&&e.onModeChange(t)}),(function(e){return console.error(e)}))}},{key:"handleFormat",value:function(){var e,t;null===(t=null===(e=this.codeMirror)||void 0===e?void 0:e.formatAll)||void 0===t||t.call(e),mC.success(sc("自动缩进成功"))}},{key:"createCodeEditor",value:function(e,t,n){var r,o;return function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,Cc().mark((function i(){var a,l,u,c,s,d=this;return Cc().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!this.codeMirror&&this.cmRootRef.current){i.next=2;break}return i.abrupt("return");case 2:if(window.CodeMirror&&(!Us.desktop||Array.isArray(null===(o=null===(r=window.CodeMirror)||void 0===r?void 0:r.default)||void 0===o?void 0:o.Instances))){i.next=9;break}return i.next=6,vUe(this.cmRootRef.current,e,this.props.codeMirrorURL,t,!1,n);case 6:this.codeMirror=i.sent,i.next=10;break;case 9:this.codeMirror=mUe(this.cmRootRef.current,e,t,!1,n);case 10:a=this.props.cardData,l=a.lightLines,u=a.foldLines,c=a.lineNumbers,(null==l?void 0:l.length)&&this.codeMirror.lightLines(l),(null==u?void 0:u.length)&&this.codeMirror.foldLines(u),this.props.focus&&this.focusToCodeEditor(),this.setState({iconMgLeft:fUe.calcMarginLeft(this.codeMirror.lineCount(),c)}),this.collapseIconRef.current&&(this.collapseIconRef.current.style.marginLeft=this.state.iconMgLeft+"px"),this.codeMirror.on("change",(function(){cancelAnimationFrame(s),s=requestAnimationFrame(d.loadLineNumberWidth)})),this.props.onReady({scrollNode:this.cmRootRef.current.querySelector(".cm-scroller"),containerNode:this.cmRootRef.current,codeMirror:this.codeMirror}),this.codeMirror.on("focus",(function(){MUe("focus"),d.props.onFocus()})),this.codeMirror.on("blur",(function(){MUe("blur"),d.onCodeChange.cancel(),d.onGutterChange.cancel();var e=d.codeMirror.foldLines(),t=d.codeMirror.lightLines();d.props.onBlur({code:d.codeMirror.getValue(),foldLines:e,lightLines:t})})),this.codeMirror.on("change",this.onCodeChange),this.codeMirror.on("change",this.onGutterChange),this.codeMirror.on("fold",this.onGutterChange),this.codeMirror.on("unfold",this.onGutterChange),this.codeMirror.on("lightLine",this.onGutterChange),this.codeMirror.on("unLightLine",this.onGutterChange),this.codeMirror.on("rightOut",(function(){d.props.onExitCardByKeyboard(lM)})),this.codeMirror.on("leftOut",(function(){d.props.onExitCardByKeyboard(aM)})),this.codeMirror.on("undoOut",(function(){d.props.onUndo(d.codeMirror.getHistory())}));case 29:case"end":return i.stop()}}),i,this)})))}},{key:"calcCodeHeight",value:function(){return this.props.cardData.code?Math.floor(20.3*this.props.cardData.code.split(/\n/g).length)+"px":"initial"}},{key:"render",value:function(){var e=this,t=this.state,n=t.mode,r=t.theme,o=t.iconMgLeft,i=t.tabSize,a=t.name,l=t.hideToolbar,u=this.props,c=u.focus,s=u.cardData,d=u.isDark,f=s.collapsed,h=bUe(r,d),p=c||a?Gu().createElement(kUe,{name:a,collapsed:f,onCollapsedChange:this.toggleCollapse,onNameChange:this.onNameChange}):null;return Gu().createElement("div",{className:"ne-codeblock ".concat(s.isHeightLimit()?"ne-codeblock-height-limit":""," ").concat(f?"ne-codeblock-collapsed":""," ").concat(l?"hide-toolbar":""),theme:h,ref:this.rootRef},Gu().createElement(jUe,{cardData:s,focus:c,isDark:d,mode:n,theme:h,tabSize:i,isCollapsed:this.state.hideToolbar,overlayContainer:this.props.overlayContainer,onAISelect:function(t){return e.onAISelect(t)},onModeChange:function(t){return e.onModeChange(t)},onThemeChange:function(t){return e.onThemeChange(t)},onIndentWithTabsChange:function(t){return e.onIndentWithTabChange(t)},onIndentUnitChange:function(t){return e.onTabSizeChange(t)},onAutoWrapChange:function(t){return e.onAutoWrapChange(t)},onLineNumbersShowChange:function(t){return e.onLineNumberChange(t)},onCollapsedHeader:function(t){return e.onHideToolbar(t)},onDetectLang:function(){return e.handleDetectLange()},onFormatLange:function(){return e.handleFormat()},key:"new-more-menu"},Gu().createElement(CUe,{onClick:this.toggleCollapse,collapsed:f,marginLeft:f?sUe:o,ref:this.collapseIconRef}),p),Gu().createElement("div",{className:"ne-codeblock-content ne-code",style:{display:f?"none":"block",height:this._needShow?"initial":this.calcCodeHeight()},ref:this.cmRootRef,"data-codeblock-mode":n}),!window.CodeMirror&&!f&&Gu().createElement("div",{ref:this.loadingRef,className:"ne-codeblock-loading"},Gu().createElement(SC,{type:"icon-loading-desk",style:{fontSize:"24px"}})),this.state.loading&&Gu().createElement("div",{ref:this.loadingRef,className:"ne-codeblock-loading",style:{zIndex:9999,top:30,bottom:0,background:"rgba(255,255,255, 0.5)",width:"100%",height:"100%",left:0}},Gu().createElement(SC,{type:"icon-loading-desk",style:{fontSize:"24px",animation:"antRotate 1.2s infinite linear"}})))}}])}(Yu.PureComponent);Object.defineProperty(FUe,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{onReady:function(){},onFocus:function(){},onBlur:function(){},onExitCardByKeyboard:function(){},onSelect:function(){},onModeChange:function(){},onAutoWrapChange:function(){},onThemeChange:function(){},onChange:function(){},onCollapsedChange:function(){},onTabSizeChange:function(){},onIndentWithTabChange:function(){},onNameChange:function(){},onUndo:function(){}}});const LUe=FUe;function UUe(e,t){return t}function VUe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,HUe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function HUe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(HUe=function(){return!!e})()}var zUe=oUe()("ne:codeblock:ui"),WUe=new(aUe())(10),qUe=UUe(0,(function(e){return function(e){function t(){var e;return(0,Ke.A)(this,t),e=VUe(this,t,arguments),Object.defineProperty(e,"_codeMirrorScrollNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_codeMirrorContainerNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_focusAuto",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_hasInit",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_hasAppear",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_codeMirror",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"uiViewProxy",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"syncCardDataToViewState",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n,r;t||null===(r=null===(n=e.uiViewProxy)||void 0===n?void 0:n.getReactRef())||void 0===r||r.syncCardDataToViewState()}}),Object.defineProperty(e,"syncViewStateToCardData",{enumerable:!0,configurable:!0,writable:!0,value:function(){if(e.uiViewProxy){var t=e.uiViewProxy.getReactRef().getViewState(),n=t.code,r=t.mode;n===e.cardData.code&&r===e.cardData.mode||(e.cardData.update({code:n,mode:r}),e.cardData.sync(!0))}}}),Object.defineProperty(e,"_explainCodeClose",{enumerable:!0,configurable:!0,writable:!0,value:[]}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){try{this.containerNode&&Vye.unmount(this.containerNode),this._explainCodeClose.forEach((function(e){return e()})),this._explainCodeClose.length=0}catch(e){console.error(e)}finally{Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}}},{key:"init",value:function(){var e=this;if(this._hasInit=!0,this._cardRootNode){var t=this._cardRootNode.closest("ne-card");(null==t?void 0:t.dataset)&&(t.dataset.noEditing="true")}zUe("init use",this.cardData),this.cardNode.registerUIEventCallback("appear",this.appear),this.cardData.on("change",this.syncCardDataToViewState),this.uiViewProxy=Vye.render(LUe,{codeMirrorURL:this.pluginOption.codemirrorURL,cardData:this.cardData,focus:this.isFocused,overlayContainer:this.editor.innerOverlayContainer,historyObj:WUe.get(this.cardNode.id),isDark:this.editor.theme.isDark(),onFocus:function(){},onUndo:function(t){WUe.set(e.cardNode.id,t),e.editor.execCommand("undo")},$onReady:function(){var t,n;e._hasAppear&&(null===(n=null===(t=e.uiViewProxy)||void 0===t?void 0:t.getReactRef())||void 0===n||n.showCode())},onReady:function(t){var n=t.scrollNode,r=t.containerNode,o=t.codeMirror;e._codeMirrorScrollNode=n,e._codeMirrorContainerNode=r,e._codeMirror=o,xc(e,o,"focus",(function(){e.emit("focus")})),xc(e,o,"blur",(function(){e.emit("blur")})),xc(e,o,"customStyle",(function(){e.cardData.update({customStyle:o.getCustomStyle()})})),e.handleReady()},onCollapsedChange:function(t){e.cardData.update({collapsed:t}),e.cardData.sync(!0),e.handleCollapsedChange()},onChange:function(t){e.cardData.update(t),e.cardData.sync(!0),Z6.save(e.cardData)},onBlur:function(t){e._focusAuto=!1,e.cardData.update(t),e.cardData.sync(!1)},onExitCardByKeyboard:function(t){e.focusCardTo(t)},onAutoWrapChange:function(t){e.cardData.update({autoWrap:t}),e.cardData.sync(!1),Z6.save(e.cardData)},onModeChange:function(t){e.cardData.update({mode:t}),e.cardData.sync(!1),Z6.save(e.cardData)},onLineNumberChange:function(t){e.cardData.update({lineNumbers:t}),e.cardData.sync(!1),Z6.save(e.cardData)},onThemeChange:function(t){e.cardData.update({theme:t}),e.cardData.sync(!1),Z6.save(e.cardData)},onTabSizeChange:function(t){e.cardData.update({tabSize:t}),e.cardData.sync(!1)},onIndentWithTabChange:function(t){e.cardData.update({indentWithTab:t}),e.cardData.sync(!1),Z6.save(e.cardData)},onNameChange:function(t){e.cardData.update({name:t}),e.cardData.sync(!0)}},this.containerNode),xc(this,this.editor.theme,"themeChange",(function(){var t;e.destroyed||null===(t=e.uiViewProxy)||void 0===t||t.rerender({isDark:e.editor.theme.isDark()})}))}},{key:"expand",value:function(){var e,t;null===(t=null===(e=this.uiViewProxy)||void 0===e?void 0:e.getReactRef())||void 0===t||t.expand()}},{key:"appear",value:function(e,t){var n,r,o,i;this._hasAppear=!0,e?null===(r=null===(n=this.uiViewProxy)||void 0===n?void 0:n.getReactRef())||void 0===r||r.showCode():t&&(null===(i=null===(o=this.uiViewProxy)||void 0===o?void 0:o.getReactRef())||void 0===i||i.refresh())}},{key:"replaceAll",value:function(e,t,n,r){var o,i=this.cardData.code||"",a=gn.replaceAll(i,t,n,r);a!==i&&(this._cardData._cardValue.code=a,null===(o=this._codeMirror)||void 0===o||o.setValue(a),this._cardData.sync(!0,e))}},{key:"focus",value:function(){var e,t,n,r,o;this.uiViewProxy&&((((null===(e=document.getSelection())||void 0===e?void 0:e.rangeCount)||-1)<=0||!(null===(o=null===(r=null===(n=null===(t=document.getSelection())||void 0===t?void 0:t.getRangeAt(0))||void 0===n?void 0:n.commonAncestorContainer)||void 0===r?void 0:r.closest)||void 0===o?void 0:o.call(r,".CodeMirror-code-name ")))&&(this._focusAuto=!0,this.uiViewProxy.rerender({focus:!0})),this.focusByKeyboard&&this.uiViewProxy.getReactRef().setCursorPosition(this.focusByKeyboard))}},{key:"blur",value:function(){this.uiViewProxy&&(zUe("blur"),this._focusAuto=!1,this.uiViewProxy.rerender({focus:!1}),this._explainCodeClose.forEach((function(e){return e()})),this._explainCodeClose.length=0)}},{key:"handleReady",value:function(){this.emit("ready")}},{key:"handleCollapsedChange",value:function(){}}])}(e)}));function $Ue(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,KUe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function KUe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(KUe=function(){return!!e})()}var YUe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=$Ue(this,t,arguments),Object.defineProperty(e,"resizeTarget",{enumerable:!0,configurable:!0,writable:!0,value:function(){return e._codeMirrorScrollNode}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getResizerConfig",value:function(){return this._codeMirrorScrollNode?this.cardData.collapsed?null:{min:30}:null}},{key:"handleReady",value:function(){Tr((0,Je.A)(t.prototype),"handleReady",this).call(this),this.refreshResizer()}},{key:"handleCollapsedChange",value:function(){Tr((0,Je.A)(t.prototype),"handleCollapsedChange",this).call(this),this.refreshResizer()}},{key:"leave",value:function(){Tr((0,Je.A)(t.prototype),"leave",this).call(this),this.hideResizer()}},{key:"hover",value:function(){Tr((0,Je.A)(t.prototype),"hover",this).call(this),this.showResizer()}}])}(Hh.extend(qUe,ap,ep));function GUe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,JUe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function JUe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(JUe=function(){return!!e})()}var XUe=function(e){function t(e){var n;(0,Ke.A)(this,t);for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return n=GUe(this,t,[].concat(o)),Object.defineProperty(n,"editor",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(n,"_ui",{enumerable:!0,configurable:!0,writable:!0,value:null}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e=this;this.pluginOption.editUI&&(t.$EditableCardUI=this.pluginOption.editUI),this._ui=this.editor.createCardUI(this),this._ui.on("ready",(function(){var t;e.editor.emitPluginEvent("focusCodeblock",null===(t=e._ui)||void 0===t?void 0:t._codeMirror)})),this._ui.on("focus",(function(){var t;e.editor.emitPluginEvent("focusCodeblock",null===(t=e._ui)||void 0===t?void 0:t._codeMirror)})),this._ui.on("blur",(function(){e.editor.emitPluginEvent("focusCodeblock")}))}},{key:"destroy",value:function(){var e;null===(e=this._ui)||void 0===e||e.destroy(),this._ui=null}},{key:"sync",value:function(){var e;return!this.editor.engine.nodeIsInTree(this.viewNode)||(this.hasInitUI&&(null===(e=this._ui)||void 0===e||e.syncViewStateToCardData()),!0)}}])}(Fy);Object.defineProperty(XUe,"$ExternalFocus",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(XUe,"$EditableCardUI",{enumerable:!0,configurable:!0,writable:!0,value:YUe}),Object.defineProperty(XUe,"$CardData",{enumerable:!0,configurable:!0,writable:!0,value:X6}),Object.defineProperty(XUe,"$LAZY_INIT",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(XUe,"$VISIBILITY",{enumerable:!0,configurable:!0,writable:!0,value:!0});const QUe=XUe;function ZUe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,eVe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function eVe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(eVe=function(){return!!e})()}var tVe={codemirrorURL:"https://gw.alipayobjects.com/render/p/yuyan_v/180020010000005484/7.1.20/CodeMirror.js"},nVe=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Object.assign(Object.assign({},tVe),t)}),[{key:"editUI",get:function(){return this._option.editUI}},{key:"codemirrorURL",get:function(){return this._option.codemirrorURL}},{key:"supportCustomStyle",get:function(){return!!this._option.supportCustomStyle}}])}();Object.defineProperty(nVe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:eM.CODEBLOCK.PLUGIN_NAME});var rVe=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=ZUe(this,t,[e]),Object.defineProperty(r,"kernelOption",{enumerable:!0,configurable:!0,writable:!0,value:n}),r}return(0,Xe.A)(t,e),(0,$e.A)(t)}(nVe);Object.defineProperty(rVe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:eM.CODEBLOCK.PLUGIN_NAME});var oVe=function(){return(0,$e.A)((function e(t,n,r,o){var i=this;(0,Ke.A)(this,e),Object.defineProperty(this,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"ctx",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"node",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"count",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_first",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"currentIndex",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"ranges",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"viewportChange",{enumerable:!0,configurable:!0,writable:!0,value:Qm()((function(){i.codeMirror&&(i._first&&(i._first=!1,i.ranges=i.codeMirror.search(i.text)),i.currentIndex>-1&&i.currentIndex<i.ranges.length&&i.codeMirror.jumpToSearch(i.ranges[i.currentIndex],!1))}))}),this.ranges=gn.search(this.code,o,n.isIgnoreCase)||[],this.count=this.ranges.length,this.codeMirror&&this.count>0&&(this._first=!1,this.ranges=this.codeMirror.search(this.text,!n.isIgnoreCase))}),[{key:"isConnected",get:function(){var e,t,n;return null===(n=null===(t=null===(e=this.cardNode)||void 0===e?void 0:e._ui)||void 0===t?void 0:t.cardRootNode)||void 0===n?void 0:n.isConnected}},{key:"cardNode",get:function(){var e=this;return this.plugin.cardNodes.find((function(t){return t.viewNode.id===e.node.id}))}},{key:"ui",get:function(){var e;return null===(e=this.cardNode)||void 0===e?void 0:e._ui}},{key:"codeMirror",get:function(){var e;return null===(e=this.ui)||void 0===e?void 0:e._codeMirror}},{key:"code",get:function(){return this.node.attrs.value.code||""}},{key:"jumpTo",value:function(e,t){var n,r;(null===(n=this.cardNode)||void 0===n?void 0:n.cardData.collapsed)&&(null===(r=this.ui)||void 0===r||r.expand()),this.currentIndex=e,t||this.isConnected||this.ctx.scrollToViewNodeId(this.node.id),this.codeMirror&&e<this.ranges.length&&this.codeMirror.jumpToSearch(this.ranges[e],!t)}},{key:"replace",value:function(e,t){if(!(e<0||e>this.ranges.length)){var n=this.ranges[e];if(this.codeMirror)this.codeMirror.replaceSearchRange(n,t);else if(this.code){var r=gn.replaceRange(this.code,n,t);this.ctx.execCommand("setCardValue",this.node.id,Object.assign(Object.assign({},this.node.attrs.value),{code:r}))}}}},{key:"replaceAll",value:function(e,t){var n;this.ui?(this.ui.replaceAll(e,this.text,t,this.ctx.isIgnoreCase),null===(n=this.codeMirror)||void 0===n||n.closeSearch()):this.code&&this.ctx.setCardValue(e,this.node.id,{code:gn.replaceAll(this.code,this.text,t,this.ctx.isIgnoreCase)})}},{key:"leave",value:function(){this.currentIndex=-1,this.codeMirror&&this.codeMirror.jumpToSearch(null,!1)}},{key:"destroy",value:function(){this.codeMirror&&this.codeMirror.closeSearch()}}])}(),iVe=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:t})}),[{key:"onSearch",value:function(e,t,n){return new oVe(this.plugin,e,t,n)}}])}();function aVe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,lVe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function lVe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(lVe=function(){return!!e})()}var uVe=function(e){function t(){return(0,Ke.A)(this,t),aVe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"onEvent",value:function(e){bt("change"===e,"plugins/codeblock/src/editor/basic-text-style-toolbar-descriptor.ts:15"),this.pluginContext.codeMirror.customStyle((0,Ha.A)({},this.pluginContext.name,!0))}},{key:"getInitUIState",value:function(){var e=this;xc(this,this.pluginContext.codeMirror,"selection",Qm()((function(){e.pluginContext.codeMirror&&e.refresh()})));var t={clear:{name:sc("清除格式"),icon:"editor-clear-format"},bold:{name:sc("粗体"),icon:"t-bold"},italic:{name:sc("斜体"),icon:"t-italic"},underline:{name:sc("下划线"),icon:"t-underline"},strikethrough:{name:sc("删除线"),icon:"t-strikethrough"}};return{disabled:!1,checked:!1,icon:t[this.pluginContext.name].icon,tooltip:MEe.getTooltip(this.editor,t[this.pluginContext.name].name,this.pluginContext.name)}}},{key:"getUIState",value:function(){var e=this.pluginContext,t=e.codeMirror,n=e.name;return t?{disabled:!1,checked:!!t.getSelectionCustomStyle()[n]}:{disabled:!0,checked:!1}}}])}(MEe);function cVe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,sVe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function sVe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(sVe=function(){return!!e})()}Object.defineProperty(uVe,"Type",{enumerable:!0,configurable:!0,writable:!0,value:"StatusButton"});var dVe="transparent",fVe="ne-codeblock-used-colors",hVe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=cVe(this,t,arguments),Object.defineProperty(e,"colors",{enumerable:!0,configurable:!0,writable:!0,value:{color:dVe,background:dVe}}),Object.defineProperty(e,"userColors",{enumerable:!0,configurable:!0,writable:!0,value:{color:[],background:[]}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){try{var e=Nf.getItem(fVe);e&&(this.userColors=JSON.parse(e))}catch(e){}}},{key:"saveUserColors",value:function(e){try{var t=this.pluginContext.name;this.userColors[t].unshift(e),this.userColors[t]=this.userColors[t].slice(0,10),Nf.setItem(fVe,JSON.stringify(this.userColors))}catch(e){}}},{key:"onEvent",value:function(e,t){switch(e){case"select":this.colors[this.pluginContext.name]=t,this.pluginContext.codeMirror.customStyle((0,Ha.A)({},this.pluginContext.name,t));break;case"saveColor":this.saveUserColors(t)}}},{key:"getInitUIState",value:function(){var e=this.pluginContext.name;return{disabled:this.disabled,className:"ne-ui-toolbar-bg-color",defaultColor:dVe,themeName:this.editor.theme.getSchemeName(),color:this.colors[e],userColors:[],icon:"background"===e?"t-bg-color":"t-font-color",tooltip:MEe.getTooltip(this.editor,sc("background"===e?"背景颜色":"字体颜色"))}}},{key:"getUIState",value:function(){var e=this.editor,t=this.pluginContext.name;return{disabled:!1,userColors:this.userColors[t].slice(0,10),themeName:e.theme.getSchemeName(),activeColors:[],color:this.colors[t]}}}])}(MEe);function pVe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,vVe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function vVe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vVe=function(){return!!e})()}Object.defineProperty(hVe,"Type",{enumerable:!0,configurable:!0,writable:!0,value:"ColorPickerButton"});var mVe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=pVe(this,t,arguments),Object.defineProperty(e,"_intersectionObserver",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_codeMirror",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){var n,r,o=this;t.registerBlockCard(this,$se.cardName,{factory:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return vl(QUe,[e].concat(n))},pluginContext:{}}),null===(n=t.getService(fBe.ID))||void 0===n||n.registerNodeSearch($se.cardName,new iVe(this)),null===(r=e.getService(xEe.ID))||void 0===r||r.registerCardSelect($se.cardSelect,{type:"TextItem",icon:"editor-main-code-block",label:sc("代码块"),description:sc("支持多种语言和主题切换"),mainSearch:"/dmk",keywords:"代码块,dmk,daimakuai,code"}),e.onPluginEvent("insertCardByUI:".concat($se.cardName),(function(){var t,n=Z6.load(),r=X6.createStandardCardValue(n);r.theme&&(r.theme=function(e,t){var n=W6.find((function(t){return t.value===e||t.name===e}));return n?n.value:q6}((null==n?void 0:n.theme)||((null===(t=e.option.themeManager)||void 0===t?void 0:t.current)===kM.dark?$6:q6))),e.execCommand("insertCard",$se.cardName,r,!0)}));var i=e.getService(jEe.ID);if(i&&this.option.supportCustomStyle){var a=this;["clear","bold","italic","underline","strikethrough"].forEach((function(e){i.registerToolbarWidget("codeblock-"+e,{clazz:uVe,pluginContext:{name:e,get codeMirror(){return a._codeMirror}}})})),["color","background"].forEach((function(e){i.registerToolbarWidget("codeblock-"+e,{clazz:hVe,pluginContext:{name:e,get codeMirror(){return a._codeMirror}}})}));var l=i.registerToolbar("codeblock");e.onPluginEvent("focusCodeblock",Qm()((function(e){o._codeMirror=e,(null==e?void 0:e.view.hasFocus)?l.open():l&&l.close()})))}}},{key:"sync",value:function(){return this.cardNodes.forEach((function(e){e.sync()})),!0}},{key:"intersectionObserver",get:function(){return this._intersectionObserver}}])}(Fh);Object.defineProperty(mVe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:$se.pluginName}),Object.defineProperty(mVe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:nVe});var gVe=o(7309),bVe=o.n(gVe);function yVe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,wVe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function wVe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wVe=function(){return!!e})()}var AVe=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=yVe(this,t,[e]),Object.defineProperty(n,"_rootNodeRef",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"getIconClassName",{enumerable:!0,configurable:!0,writable:!0,value:function(e){return e=null==e?void 0:e.toLowerCase(),["doc","sheet","design","thread","board","mind"].includes(e)||(e="doc"),"ne-svg-icon ne-svg-icon-yuque-"+e}}),n._rootNodeRef=Gu().createRef(),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getRootNode",value:function(){return this._rootNodeRef.current}},{key:"render",value:function(){var e,t=this.props,n=t.data,r=t.onMouseEnter,o=t.selected,i=t.onSelect,a=n.title,l=n.type,u=n.updated_at,c=n.group,s=n.book;return Gu().createElement("div",{className:"ne-ui-mention-content ".concat(o?"ne-ui-mention-item-selected":""),onMouseEnter:r,ref:this._rootNodeRef,onClick:i.bind(null,n)},Gu().createElement("span",{className:this.getIconClassName(l)}),Gu().createElement("div",{className:"ne-ui-mention-content-info"},Gu().createElement("div",{className:"ne-ui-mention-content-info-title",dangerouslySetInnerHTML:{__html:(e=a,bVe()(e,{whiteList:{em:[]}}))}}),Gu().createElement("div",{className:"ne-ui-mention-content-info-desc"},Gu().createElement("div",{className:"ne-ui-mention-content-info-desc-prefix"},c&&Gu().createElement("span",null,c," / "),Gu().createElement("span",null,s)),Gu().createElement("time",null,oh(u).calendar()))))}}])}(Gu().Component);function kVe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,_Ve()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function _Ve(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_Ve=function(){return!!e})()}var CVe=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=kVe(this,t,[e]),Object.defineProperty(n,"_rootNodeRef",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"getDepArr",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(!e||"string"!=typeof e||t<0)return null;var n=e.split("-");if(n.length<=t)return n.map((function(e,t){return 0===t?e:"-".concat(e)}));if(1===t)return[n[0]];var r=n.slice(0,t-2).map((function(e,t){return 0===t?e:"-".concat(e)}));return r.push("-".concat(n[t-2],"...")),r.push("-".concat(n[n.length-1])),r}}),Object.defineProperty(n,"getAvatarUrl",{enumerable:!0,configurable:!0,writable:!0,value:function(e){if("string"!=typeof e)return"";var t=yh.sanitizeUrl(e);return yh.isFullHttpURL(t)||!n.props.avatarOrigin?t:n.props.avatarOrigin+t}}),Object.defineProperty(n,"_clickHandler",{enumerable:!0,configurable:!0,writable:!0,value:function(){n.props.onSelect(n.props.data)}}),n._rootNodeRef=Gu().createRef(),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){this.props.onReady(this)}},{key:"componentWillUnmount",value:function(){this.props.onDestroy(this)}},{key:"getRootNode",value:function(){return this._rootNodeRef.current}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.selected,r=e.onMouseEnter,o=e.multiTypes,i=e.depCount,a=t.name,l=t.avatar,u=t.avatar_url,c=t.dep,s=t.login,d=this.getDepArr(c,i);return Gu().createElement("div",{ref:this._rootNodeRef,onMouseEnter:r,onClick:this._clickHandler,className:"ne-ui-mention-item ".concat(o?"":"ne-ui-mention-item-mini"," ").concat(n?"ne-ui-mention-item-selected":"")},Gu().createElement("img",{src:this.getAvatarUrl(u||l),className:"ne-ui-mention-avatar"}),Gu().createElement("div",{className:"ne-ui-mention-info"},Gu().createElement("div",{className:"ne-ui-mention-name"},a,s&&"string"==typeof s?"(".concat(s,")"):null),Gu().createElement("div",{className:"ne-ui-mention-desc"},(null==d?void 0:d.length)?d.map((function(e){return Gu().createElement("span",{key:e},e)})):s)))}},{key:"click",value:function(){this._clickHandler()}}])}(Yu.Component);function NVe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,OVe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function OVe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(OVe=function(){return!!e})()}Object.defineProperty(CVe,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{onSelect:function(){},onMouseEnter:function(){},onReady:function(){},onDestroy:function(){}}});var xVe=function(e){function t(e){var n;(0,Ke.A)(this,t),n=NVe(this,t,[e]),Object.defineProperty(n,"_defaultTabs",{enumerable:!0,configurable:!0,writable:!0,value:[{tab:"users",label:sc("人"),icon:"card-mention-person",defaultCount:4},{tab:"docs",label:sc("内容"),icon:"card-mention-doc",defaultCount:6}]}),Object.defineProperty(n,"state",{enumerable:!0,configurable:!0,writable:!0,value:{items:[],selectIndex:void 0,startIndex:0,curTab:void 0,tabs:[],loading:!0}}),Object.defineProperty(n,"itemsRef",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"listRef",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"popRef",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"derivePromiseId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"scrollToSelected",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t=n.listRef.current;if(t&&"number"==typeof e){var r=n.itemsRef.current[e];if(r){var o=r.getRootNode().offsetTop;t.scrollTop=o-40}else t.scrollTop=0}}}),Object.defineProperty(n,"listenKeyEvent",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=n.props.selectEmitter;e&&(e.on("moveDown",(function(){var e=n.state,t=e.selectIndex,r=e.startIndex,o=e.tabs;return"number"!=typeof t?(n.setState({selectIndex:0}),n.scrollToSelected(0)):t>=r&&t-r<o.length&&n.isValidSelectIndex(o.length)?(n.setState({selectIndex:r+o.length}),n.scrollToSelected(o.length)):n.isValidSelectIndex(t+1)?(n.setState({selectIndex:t+1}),n.scrollToSelected(t+1)):(n.setState({selectIndex:0}),n.scrollToSelected(0))})),e.on("moveUp",(function(){var e=n.state,t=e.selectIndex,r=e.startIndex,o=e.tabs,i=n.getDisplayItems();if("number"==typeof t)return n.isValidSelectIndex(t-1)?(n.setState({selectIndex:n.state.selectIndex-1}),n.scrollToSelected(n.state.selectIndex-1)):(n.setState({selectIndex:r+o.length+i.length-1}),n.scrollToSelected(o.length+i.length-1))})),e.on("moveLeft",(function(e){var t=n.state,r=t.selectIndex,o=t.startIndex,i=t.tabs;"number"==typeof r&&(e.preventDefault(),r<o||r-o>=i.length||n.isValidSelectIndex(r-1)&&n.setState({selectIndex:r-1}))})),e.on("moveRight",(function(e){var t=n.state,r=t.selectIndex,o=t.startIndex,i=t.tabs;"number"==typeof r&&(e.preventDefault(),r+1<o||r+1-o>=i.length||n.isValidSelectIndex(r+1)&&n.setState({selectIndex:r+1}))})),e.on("enter",(function(){var e=n.props.context,t=n.state,r=t.selectIndex,o=t.startIndex,i=t.tabs,a=n.getDisplayItems();if("number"==typeof r)if(r<o){var l=0;e.customTabs.forEach((function(t){return t.data().find((function(t){return l===r?(e.onSelect(t),l+=1,!0):(l+=1,!1)}))}))}else r-o<i.length?n.onTabSelected(i[r-o].tab):(0,n.props.onSelect)(a[r-i.length-o])})))}}),Object.defineProperty(n,"isValidSelectIndex",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t=n.state,r=t.tabs,o=t.startIndex,i=n.getDisplayItems();return e<r.length+i.length+o&&e>=0}}),Object.defineProperty(n,"derivedStateFromItems",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t){var r=n.props.context.customTabs.map((function(e){return e.data().length})).reduce((function(e,t){return e+t}),0),o=Dr();n.derivePromiseId=o;var i=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))}(n,void 0,void 0,Cc().mark((function n(){var i;return Cc().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=Object.assign(Object.assign({},this.state),{items:[]}),!Array.isArray(e)){n.next=5;break}i.items=e.map((function(e){return Object.assign(Object.assign({},e),{tab:"users"})})),n.next=10;break;case 5:return n.next=7,e();case 7:e=n.sent,Array.isArray(e)?i.items=e.map((function(e){return Object.assign(Object.assign({},e),{tab:"users"})})):i.items=[].concat((0,ln.A)((e.docs||[]).map((function(e){return Object.assign(Object.assign({},e),{tab:"docs"})}))),(0,ln.A)((e.users||[]).map((function(e){return Object.assign(Object.assign({},e),{tab:"users"})})))),e[i.curTab]||(i.curTab=void 0);case 10:return this.props.multiTypes&&i.items.length>0?i.selectIndex=2:!this.props.multiTypes&&i.items.length>0&&(i.selectIndex=0),t&&(i.curTab=t),r>0&&(i.selectIndex=0),n.abrupt("return",{state:Object.assign(Object.assign({},i),{loading:!1,startIndex:r}),id:o});case 14:case"end":return n.stop()}}),n,this)})));i.then((function(e){e.id===n.derivePromiseId&&n.setState(e.state,(function(){var e;null===(e=n.popRef.current)||void 0===e||e.updatePos()}))}))}}),Object.defineProperty(n,"onTabSelected",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n.setState({curTab:e}),"function"==typeof n.props.onTabClick&&n.props.onTabClick(e)}}),Object.defineProperty(n,"getDisplayItems",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=n.state,t=e.items,r=e.curTab,o=e.tabs;if(!o.length)return t;if(r)return t.filter((function(e){return e.tab===r}));var i=[];return o.map((function(e){return i.push.apply(i,(0,ln.A)(t.filter((function(t){return t.tab===e.tab})).slice(0,e.defaultCount)))})),i}}),Object.defineProperty(n,"renderItem",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t){var r=n.state,o=r.selectIndex,i=r.tabs,a=r.startIndex;switch(e.tab){case"users":return Gu().createElement(CVe,{avatarOrigin:n.props.avatarOrigin,data:e,key:e.login,depCount:n.props.depCount,selected:o-i.length-a===t,onMouseEnter:function(){return n.setState({selectIndex:a+t+i.length})},multiTypes:n.props.multiTypes,onSelect:n.props.onSelect,ref:function(e){return n.itemsRef.current[t+i.length+a]=e}});case"docs":return Gu().createElement(AVe,{ref:function(e){return n.itemsRef.current[t+i.length+a]=e},data:e,key:e.id,selected:o-i.length-a===t,onMouseEnter:function(){return n.setState({selectIndex:a+t+i.length})},onSelect:n.props.onSelect});default:return null}}}),Object.defineProperty(n,"positionHandle",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t,r,o){var i=n.props,a=i.targetNode,l=i.getEditWrapRect,u=i.popupOverflow;if(l){var c=u?{bottom:window.innerHeight,top:0,left:0,right:window.innerWidth}:l(),s=e.getBoundingClientRect(),d=e.parentElement,f=null==d?void 0:d.getBoundingClientRect(),h=null==a?void 0:a.getBoundingClientRect();if(c&&s&&f&&h){if("bottomLeft"===t&&"number"==typeof r.top&&"number"==typeof r.left){var p=c.bottom-h.bottom;if(h.top-c.top>p){var v=h.top-c.top-5;Math.min(v,s.height),e.style.left=r.left+"px",e.style.bottom=f.bottom-h.top+5+"px",e.firstChild&&(e.firstChild.style.maxHeight=v+"px")}else{var m=c.bottom-h.bottom-5;Math.min(m,s.height),e.style.left=r.left+"px",e.style.top=r.top+"px",e.firstChild&&(e.firstChild.style.maxHeight=m+"px")}var g=r.left+f.left+s.width-c.right,b=c.left-(r.left+f.left);return g>0&&(e.style.left=r.left-g+"px"),void(b>0&&(e.style.left=c.left+"px"))}o(e,r)}else o(e,r)}}}),n.itemsRef=Gu().createRef(),n.itemsRef.current=[],n.listRef=Gu().createRef(),n.popRef=Gu().createRef(),e.multiTypes&&(n.state.tabs=n._defaultTabs);var r=n.props.context;return n.state.startIndex=r.customTabs.map((function(e){return e.data().length})).reduce((function(e,t){return e+t}),0),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){this.derivedStateFromItems(this.props.initItems),this.listenKeyEvent()}},{key:"componentWillUnmount",value:function(){this.derivePromiseId=void 0}},{key:"update",value:function(e,t){var n;this.derivedStateFromItems(e,t),this.forceUpdate(),null===(n=this.popRef.current)||void 0===n||n.updatePos()}},{key:"_renderHeader",value:function(){var e=this,t=this.state,n=t.selectIndex,r=t.startIndex,o=t.curTab,i=t.tabs;if(!this.props.multiTypes)return Gu().createElement("div",{className:"ne-ui-mention-header"},sc("提及人"));var a="number"==typeof n?n-r:void 0;return Gu().createElement("div",{className:"ne-ui-mention-header"},Gu().createElement("div",null,sc("提及人或内容")),Gu().createElement("div",{className:"ne-ui-mention-tabs"},i.map((function(t,n){return Gu().createElement(Yu.Fragment,{key:t.tab},Gu().createElement("div",{onClickCapture:e.onTabSelected.bind(null,t.tab),onMouseEnter:function(){return e.setState({selectIndex:r+n})},className:"ne-ui-mention-tab ".concat(a===n||o===t.tab?"ne-ui-mention-tab-selected":"")},Gu().createElement(SC,{type:t.icon}),Gu().createElement("span",null,t.label)),n!==i.length-1&&Gu().createElement("div",{className:"ne-ui-mention-tab-divider"}))}))))}},{key:"_renderMenu",value:function(){var e=this,t=this.getDisplayItems();return(null==t?void 0:t.length)||this.state.loading?Gu().createElement("div",{className:"ne-ui-mention-menu-list"},t.map((function(n,r){var o;return Gu().createElement(Yu.Fragment,{key:r},e.renderItem(n,r),(null===(o=t[r+1])||void 0===o?void 0:o.tab)&&n.tab!==t[r+1].tab&&Gu().createElement("div",{className:"doc-user-divider"}))}))):Gu().createElement("div",{className:"ne-ui-mention-menu-empty"},Gu().createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*wPMVTriBo40AAAAAAAAAAAAAARQnAQ"}),Gu().createElement("span",null,sc("无匹配内容，请重新输入")))}},{key:"renderContent",value:function(){var e=this.props.mentionPopContent;return e?Gu().createElement(e,{onSelect:this.props.onSelect,items:this.state.items,loading:this.state.loading,tabs:this.state.tabs,curTab:this.state.curTab}):this.props.onlyContent?Gu().createElement(Gu().Fragment,null,this._renderRegisterTab(),this._renderHeader(),this._renderMenu()):Gu().createElement("div",{className:"ne-ui-mention-menu ".concat(this.props.multiTypes?"":"ne-ui-mention-menu-mini"),ref:this.listRef},this._renderRegisterTab(),this._renderHeader(),this._renderMenu())}},{key:"_renderRegisterTab",value:function(){var e=this,t=this.state.selectIndex,n=this.props.context,r=0;return n.customTabs.map((function(n){var o=n.data();return o.length?Gu().createElement(Yu.Fragment,{key:n.name},Gu().createElement("div",{className:"ne-ui-mention-header"},n.name),Gu().createElement("div",{className:"ne-ui-mention-menu-list"},o.map((function(o){var i=r,a=i===t;return r+=1,Gu().createElement("div",{key:r,className:"ne-ui-mention-item ".concat(a?"ne-ui-mention-item-selected":""),onMouseEnter:function(){return e.setState({selectIndex:i})},onClick:function(t){t.preventDefault(),t.stopPropagation(),e.props.onSelect(o)},ref:function(t){return e.itemsRef.current[i]=t}},n.render(o,a))})))):null}))}},{key:"render",value:function(){return this.props.targetNode?Gu().createElement(nR,{targetNode:this.props.targetNode,uiEmitter:this.props.uiEmitter,boundaryNode:this.props.boundaryNode||document.body,visible:!0,allowClose:!1,offset:5,placement:"bottomLeft",positionHandle:this.positionHandle,ref:this.popRef},this.renderContent()):this.renderContent()}}])}(Yu.Component);function EVe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,DVe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function DVe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(DVe=function(){return!!e})()}var PVe=function(e){function t(){return(0,Ke.A)(this,t),EVe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.cardData,r=t.renderUI,o=n.getUserInfo();if(!o)return this.renderError();var i=this.props.generateMentionInfo(o),a=i.text,l=i.url,u=i.externalOpen;return l?r(Gu().createElement("div",{className:"ne-ui-mention-link"},Gu().createElement("a",{onClick:function(t){if("function"==typeof e.props.onOpenLink){var n=Us.macos?t.metaKey:t.ctrlKey;t.preventDefault(),e.props.onOpenLink(n)}},href:yh.sanitizeUrl(l),target:u?"_blank":""},Gu().createElement(uEe,{search:this.props.search},"@".concat(a)))),o):Gu().createElement("div",{className:"ne-ui-mention-link"},Gu().createElement(uEe,{search:this.props.search},"@".concat(a)))}},{key:"renderError",value:function(){return Gu().createElement("div",{className:"ne-ui-mention-link ne-ui-mention-error"},"无效数据")}}])}(Yu.Component);function RVe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,SVe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function SVe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(SVe=function(){return!!e})()}var TVe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=RVe(this,t,arguments),Object.defineProperty(e,"searchTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"state",{enumerable:!0,configurable:!0,writable:!0,value:{userInput:"",tab:null}}),Object.defineProperty(e,"_selectEmitter",{enumerable:!0,configurable:!0,writable:!0,value:new it}),Object.defineProperty(e,"_rootRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"_inputRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"_cardSelectMenuRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"_overlay",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_completed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_tabClicked",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"isComposition",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_keyDownHandler",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=t.key;if(("Backspace"===n||"Delete"===n)&&""===t.target.value)return t.preventDefault(),void e._cancel();if(" "!==n||""!==t.target.value&&!t.target.value.endsWith(" "))if("Escape"!==n){if("ArrowDown"===n)return t.preventDefault(),void e._selectEmitter.emit("moveDown");if("ArrowUp"===n)return t.preventDefault(),void e._selectEmitter.emit("moveUp");if("ArrowLeft"!==n)if("ArrowRight"!==n){if("Enter"===n){if(e.isComposition)return;t.preventDefault(),e._selectEmitter.emit("enter")}}else e._selectEmitter.emit("moveRight",t);else e._selectEmitter.emit("moveLeft",t)}else e._cancel();else e._cancel()}}),Object.defineProperty(e,"_changeHandler",{enumerable:!0,configurable:!0,writable:!0,value:function(t){e.setState({userInput:t}),e.searchTimer&&(clearTimeout(e.searchTimer),e.searchTimer=null),e.searchTimer=setTimeout((function(){e.props.onSearch(t,e.state.tab),e.searchTimer=null}),500)}}),Object.defineProperty(e,"_focus",{enumerable:!0,configurable:!0,writable:!0,value:function(){e._tabClicked?e._tabClicked=!1:e.openOverlay()}}),Object.defineProperty(e,"_blur",{enumerable:!0,configurable:!0,writable:!0,value:function(){setTimeout((function(){var t;e._tabClicked?null===(t=e._inputRef.current)||void 0===t||t.focus():e._cancel()}),500)}}),Object.defineProperty(e,"_cancel",{enumerable:!0,configurable:!0,writable:!0,value:function(){if(!e._completed){e._overlay&&(e._overlay.cancel(),e._overlay=null),e._completed=!0;var t=e._inputRef.current?e._inputRef.current.value:"";e.props.onCancel(t)}}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentWillUnmount",value:function(){this._overlay&&this._overlay.cancel()}},{key:"updateItems",value:function(e,t){this._cardSelectMenuRef.current&&this._cardSelectMenuRef.current.update(e,t)}},{key:"render",value:function(){var e=this,t=this.props.cardData.getUserInfo();return t.name||t.login?Gu().createElement(PVe,{renderUI:function(){var t;return(t=e.props.context).renderUI.apply(t,arguments)},cardData:this.props.cardData,search:this.props.search,onOpenLink:this.props.onOpenLink,generateMentionInfo:this.props.generateMentionInfo}):Gu().createElement("div",{ref:this._rootRef,className:"ne-ui-card-select-view"},Gu().createElement("span",null,"@"),Gu().createElement("div",{className:"ne-ui-card-select-input-wrap"},Gu().createElement("span",{className:"ne-ui-card-select-hidden"},(this.state.userInput||"用户名").replace(/ /g," ")),Gu().createElement("input",{placeholder:sc("提及"),ref:this._inputRef,onFocus:this._focus,onBlur:this._blur,onCompositionStart:function(){e.isComposition=!0},onCompositionEnd:function(){e.isComposition=!1},onKeyDown:this._keyDownHandler,onChange:function(t){return e._changeHandler(t.target.value)},className:"ne-ui-card-select-input"})))}},{key:"focus",value:function(){var e=this,t=this.props.cardData.getUserInfo();t.login||t.name||setTimeout((function(){e._inputRef.current&&e._inputRef.current.focus()}))}},{key:"openOverlay",value:function(){var e=this;this._overlay&&this._overlay.cancel();var t="function"==typeof this.props.overlayContainer?this.props.overlayContainer():this.props.overlayContainer;this._overlay=aR.open({containerNode:t,targetNode:this._rootRef.current,reactComponent:Gu().createElement(xVe,{popupOverflow:this.props.popupOverflow,avatarOrigin:this.props.avatarOrigin,ref:this._cardSelectMenuRef,boundaryNode:this.props.boundaryNode,selectEmitter:this._selectEmitter,initItems:this.props.items,onSelect:function(){var t;e._overlay&&(e._overlay.cancel(),e._overlay=null),e._completed=!0,(t=e.props).onSelect.apply(t,arguments)},onTabClick:function(t){e._tabClicked=!0,e.setState({tab:t}),e.props.onSearch(e.state.userInput,t)},targetNode:this._rootRef.current,multiTypes:this.props.multiTypes,context:this.props.context,mentionPopContent:this.props.mentionPopContent,overlayContainer:this.props.overlayContainer,getEditWrapRect:this.props.getEditWrapRect}),autoClose:!1})}}])}(Yu.Component);Object.defineProperty(TVe,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{onCancel:function(){},onSelect:function(){},onOpenLink:function(){},onSearch:function(){}}});var jVe=(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"UI_TYPE",{enumerable:!0,configurable:!0,writable:!0,value:mM}),Object.defineProperty(this,"EDITOR_CLASSNAME",{enumerable:!0,configurable:!0,writable:!0,value:"ne-simple-ui"}),t.domRootNode.classList.add(this.EDITOR_CLASSNAME)}));function IVe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,BVe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function BVe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(BVe=function(){return!!e})()}var MVe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=IVe(this,t,arguments),Object.defineProperty(e,"_handlers",{enumerable:!0,configurable:!0,writable:!0,value:(0,Ha.A)({},mM,jVe)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){this.option.default&&this._handlers[this.option.default]&&new this._handlers[this.option.default](e)}}])}(Sw);Object.defineProperty(MVe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:Wse.pluginName}),Object.defineProperty(MVe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:Qy(yLe)});var FVe=o(6289),LVe=Gu().forwardRef((function(e,t){var n=(0,Yu.useState)(),r=(0,tn.A)(n,2),o=r[0],i=r[1],a=(0,Yu.useState)(""),l=(0,tn.A)(a,2),u=l[0],c=l[1],s=(0,Yu.useRef)(!1),d=(0,Yu.useRef)(!0),f=(0,Yu.useRef)(null),h=(0,Yu.useRef)(),p=(0,Yu.useRef)(null),v=e.cardData.getUserInfo();return(0,Yu.useImperativeHandle)(t,(function(){return{updateItems:function(e,t){p.current&&p.current.update(e,t)},focus:function(){var t=e.cardData.getUserInfo();t.login||t.name||setTimeout((function(){f.current&&f.current.focus()}))}}})),v.name||v.login?Gu().createElement(PVe,{renderUI:function(){var t;return(t=e.context).renderUI.apply(t,arguments)},cardData:e.cardData,search:e.search,onOpenLink:e.onOpenLink,generateMentionInfo:e.generateMentionInfo}):Gu().createElement(Gu().Fragment,null,Gu().createElement("span",{className:"mention-mobile-placeholder",onClick:function(){e.setDrawerVisible(!0)}},"@",sc("提及")),Gu().createElement(FVe.A,{className:"mention-drawer ".concat(e.getThemeSelector()),visible:e.drawerVisible,getContainer:function(){return document.body},onClose:function(){e.setDrawerVisible(!1),setTimeout((function(){d.current&&e.onCancel("")}),100)},placement:"bottom",height:"80%",destroyOnClose:!0,afterVisibleChange:function(e){e&&f.current&&f.current.focus()},closeIcon:!1},Gu().createElement("div",{className:"mention-drawer-content"},Gu().createElement("div",{className:"mention-drawer-search"},Gu().createElement(KP,{prefix:Gu().createElement(SC,{type:"menu-card-search"}),ref:f,type:"text",placeholder:sc("请输入搜索内容"),onCompositionStart:function(){s.current=!0},onCompositionEnd:function(){s.current=!1},onChange:function(t){if(!s.current){var n=t.target.value;c(n),h.current&&(clearTimeout(h.current),h.current=null),h.current=setTimeout((function(){e.onSearch(n,o),h.current=null}),500)}}})),Gu().createElement("div",{className:"mention-drawer-menu"},Gu().createElement(xVe,{onlyContent:!0,depCount:4,avatarOrigin:e.avatarOrigin,ref:p,initItems:e.items,onSelect:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.setDrawerVisible(!1),setTimeout((function(){d.current&&e.onSelect.apply(e,n)}),100)},onTabClick:function(t){i(t),e.onSearch(u,t)},multiTypes:e.multiTypes,context:e.context,mentionPopContent:e.mentionPopContent})))))}));function UVe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(UVe=function(){return!!e})()}var VVe=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))};function HVe(e){return function(e){function t(){var e;return(0,Ke.A)(this,t),e=function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,UVe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,arguments),Object.defineProperty(e,"uiViewProxy",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"setDrawerVisible",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n;null===(n=e.uiViewProxy)||void 0===n||n.rerender({drawerVisible:t})}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t,n,r,o=this,i=this.pluginOption.useDrawer()?LVe:TVe;this.uiViewProxy=Vye.render(i,{context:e,drawerVisible:!1,setDrawerVisible:this.setDrawerVisible,getThemeSelector:function(){return o.editor.theme.getThemeSelector()},getEditWrapRect:this.editor.getEditWrapRect.bind(this.editor),mentionPopContent:this.pluginOption.mentionPopContent,popupOverflow:!!(null===(n=(t=this.editor).isMiniEditor)||void 0===n?void 0:n.call(t))||(null===(r=this.editor.getService(jLe.ID))||void 0===r?void 0:r.getType())===bM,avatarOrigin:this.pluginOption.avatarOrigin,cardData:this.cardData,uiEmitter:this.editor.uiEmitter,generateMentionInfo:this.pluginOption.generateMentionInfo,items:e.getDefaultList(),overlayContainer:this.pluginOption.popupContainer||this.editor.innerOverlayContainer,boundaryNode:this.editor.editorWrapNode,multiTypes:e.multiTypes,onSearch:function(t,n){return VVe(o,void 0,void 0,Cc().mark((function r(){var o,i,a;return Cc().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(this.uiViewProxy){r.next=2;break}return r.abrupt("return");case 2:if(a=null,t.trim()||n){r.next=7;break}try{a=e.defaultListSearch.bind(e,t,"")}catch(e){}return null===(o=this.uiViewProxy.getReactRef())||void 0===o||o.updateItems(a,n),r.abrupt("return");case 7:r.prev=7,a=e.onMentionSearch.bind(e,t,n),r.next=14;break;case 11:return r.prev=11,r.t0=r.catch(7),r.abrupt("return");case 14:if(!this.destroyed){r.next=16;break}return r.abrupt("return");case 16:null===(i=this.uiViewProxy.getReactRef())||void 0===i||i.updateItems(a,n);case 17:case"end":return r.stop()}}),r,this,[[7,11]])})))},onCancel:function(e){o.uiViewProxy&&o.emit("cancel",e)},onSelect:function(t){if(!(null==t?void 0:t.tab))return o.emit("cancel","");switch(e.onSelect(t),o.editor.renderer.focus(),t.tab){case"users":return o.cardData.setUserInfo({login:t.login,nickName:t.nickName,name:t.name,userid:t.id}),o.cardData.sync(!0),o.pluginOption.recordMentionUser(t.id),o.emit("completed");case"docs":return o.editor.execCommand("insertYuqueInlineDoc",{src:"".concat(location.origin).concat(t.url),url:"".concat(location.origin).concat(t.url),isGroup:!1}),o.emit("cancel","");default:return o.emit("cancel","")}},onOpenLink:function(){var e=o.pluginOption.generateMentionInfo(o.cardData.getUserInfo()),t=e.url,n=e.externalOpen;t&&o.editor.emitEvent("openMentionLink",t,n)}},this.containerNode),this.editor.onPluginEvent("mentionDrawerVisible",(function(e){var t=e.visible;e.id===o.id&&o.setDrawerVisible(t)}))}},{key:"renderSearch",value:function(e,t,n,r,o){this.uiViewProxy&&this.uiViewProxy.rerender({search:{text:e,index:t,ignoreCase:n,normalColor:o,activeColor:r}})}},{key:"removeSearch",value:function(){this.uiViewProxy&&this.uiViewProxy.rerender({search:void 0})}},{key:"focus",value:function(){var e=this.uiViewProxy.getReactRef();e&&e.focus()}},{key:"destroy",value:function(){this.uiViewProxy=null,Gl().unmountComponentAtNode(this.containerNode),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}}])}(e)}var zVe=HVe;function WVe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,qVe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function qVe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qVe=function(){return!!e})()}var $Ve=function(e){function t(e){var n;(0,Ke.A)(this,t);for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return n=WVe(this,t,[].concat(o)),Object.defineProperty(n,"_ui",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"editor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n.editor=e,n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e=this;this.pluginOption.editUI&&(t.$EditableCardUI=this.pluginOption.editUI),this._ui=this.editor.createCardUI(this,this.pluginContext),this._ui.on("completed",(function(){e.editor.execCommand("focusCard",e.id,lM)})),this._ui.on("cancel",(function(t){e.editor.execCommand("deleteCard",e.id),e.editor.execCommand("input","@"+t),e.editor.renderer.focus()}))}},{key:"destroy",value:function(){this._ui.destroy(),this._ui=null}}])}(My);function KVe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,YVe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function YVe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(YVe=function(){return!!e})()}Object.defineProperty($Ve,"$EditableCardUI",{enumerable:!0,configurable:!0,writable:!0,value:HVe(zh()())}),Object.defineProperty($Ve,"$CardData",{enumerable:!0,configurable:!0,writable:!0,value:W8});var GVe={origin:null,generateMentionInfo:null,externalOpen:!1,mentionURL:"/api/users/complete",recordURL:"/api/actions",mentionURLParams:function(e){return"q=".concat(e)},onMentionSearch:null,defaultList:[],multiTypes:!1,avatarOrigin:"",enableQuickInput:!0},JVe=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=KVe(this,t,[e]),Object.defineProperty(n,"_prevFetch",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n._option=Object.assign(Object.assign({},GVe),e),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"multiTypes",get:function(){return this._option.multiTypes}},{key:"avatarOrigin",get:function(){return this._option.avatarOrigin}},{key:"enableQuickInput",get:function(){return this._option.enableQuickInput}},{key:"mentionPopContent",get:function(){return this._option.mentionPopContent}},{key:"editUI",get:function(){return this._option.editUI}},{key:"viewerUI",get:function(){return this._option.viewerUI}},{key:"useDrawer",value:function(){return"function"==typeof this._option.useDrawer?this._option.useDrawer():Us.mobile&&!Us.ipad&&!Us.yuquePad}},{key:"popupContainer",get:function(){return this._option.popupContainer}},{key:"getDefaultList",value:function(){var e=this._option.defaultList;return Array.isArray(e)?(0,ln.A)(e):"function"==typeof e?e:e&&(e.docs||e.users)?function(){return Promise.resolve(e)}:[]}},{key:"onMentionSearch",value:function(e,t){return function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,Cc().mark((function n(){var r,o,i;return Cc().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this._option.onMentionSearch){n.next=2;break}return n.abrupt("return",this._option.onMentionSearch(e,t));case 2:return r=this._defaultFetchHandler(e,t),o=r.promise,i=r.xhr,this._prevFetch=i,n.abrupt("return",o.then((function(e){return e&&e.data?e.data:Promise.reject(e)})));case 5:case"end":return n.stop()}}),n,this)})))}},{key:"_defaultFetchHandler",value:function(e,t){var n=this;this._prevFetch&&this._prevFetch.abort();var r,o=this._option.mentionURLParams;return"object"===(0,Gn.A)(o)?r=o:"function"==typeof o&&(r=o(e,t)),ns({url:this._option.mentionURL,data:r,method:"get",success:function(){n._prevFetch=null},error:function(){n._prevFetch=null}})}},{key:"recordMentionUser",value:function(e){var t=this._option.recordURL;if(e&&t)return ns({url:t,data:{action_type:"mention",target_type:"User",target_id:e},method:"post"})}}])}(F8);Object.defineProperty(JVe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"mention"});var XVe=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=KVe(this,t,[e]),Object.defineProperty(r,"kernelOption",{enumerable:!0,configurable:!0,writable:!0,value:n}),r}return(0,Xe.A)(t,e),(0,$e.A)(t)}(JVe);Object.defineProperty(XVe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:JVe.OptionName});var QVe=function(){return(0,$e.A)((function e(t,n,r,o){var i;(0,Ke.A)(this,e),Object.defineProperty(this,"ctx",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"node",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"count",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ranges",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"currentIndex",{enumerable:!0,configurable:!0,writable:!0,value:void 0});var a=this.node.attrs.value,l=a.login,u=a.nickName,c=a.name,s=a.userid,d=this.plugin.option.generateMentionInfo({login:l,nickName:u,name:c,userid:s}).text;this.ranges=gn.search("@".concat(d),this.text)||[],this.count=this.ranges.length,this.currentIndex=-1,null===(i=this.cardUI)||void 0===i||i.renderSearch(this.text,this.currentIndex,this.ctx.isIgnoreCase,this.ctx.activeColor,this.ctx.normalColor)}),[{key:"cardNode",get:function(){var e=this;return this.plugin.cardNodes.find((function(t){return t.id===e.node.id}))}},{key:"cardUI",get:function(){var e;return null===(e=this.cardNode)||void 0===e?void 0:e._ui}},{key:"jumpTo",value:function(e,t){var n;this.currentIndex=e,t||this.ctx.scrollToViewNodeId(this.node.id),null===(n=this.cardUI)||void 0===n||n.renderSearch(this.text,this.currentIndex,this.ctx.isIgnoreCase,this.ctx.activeColor,this.ctx.normalColor)}},{key:"viewportChange",value:function(){var e;null===(e=this.cardUI)||void 0===e||e.renderSearch(this.text,this.currentIndex,this.ctx.isIgnoreCase,this.ctx.activeColor,this.ctx.normalColor)}},{key:"leave",value:function(){var e;this.currentIndex=-1,null===(e=this.cardUI)||void 0===e||e.renderSearch(this.text,-1,this.ctx.isIgnoreCase,this.ctx.activeColor,this.ctx.normalColor)}},{key:"destroy",value:function(){var e;null===(e=this.cardUI)||void 0===e||e.removeSearch()}}])}(),ZVe=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:t})}),[{key:"onSearch",value:function(e,t,n){return new QVe(e,this.plugin,t,n)}}])}(),eHe=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))},tHe=function(){return(0,$e.A)((function e(t,n,r){(0,Ke.A)(this,e),Object.defineProperty(this,"editor",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"option",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"service",{enumerable:!0,configurable:!0,writable:!0,value:r})}),[{key:"multiTypes",get:function(){return!0}},{key:"customTabs",get:function(){return this.service.getTabs()}},{key:"getDefaultList",value:function(){return this.option.getDefaultList()}},{key:"renderUI",value:function(e,t){return this.service.renderUI(e,t)}},{key:"onMentionSearch",value:function(e,t){return eHe(this,void 0,void 0,Cc().mark((function n(){var r,o,i,a;return Cc().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(r=this.customTabs.map((function(n){return n.search(e,t)}))).unshift(this.option.onMentionSearch(e,t)),n.next=4,Promise.all(r);case 4:return o=n.sent,i=(0,tn.A)(o,1),a=i[0],n.abrupt("return",a);case 8:case"end":return n.stop()}}),n,this)})))}},{key:"defaultListSearch",value:function(e,t){return eHe(this,void 0,void 0,Cc().mark((function n(){var r,o,i,a;return Cc().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(r=this.customTabs.map((function(n){return n.search(e,t)}))).unshift(Promise.resolve(this.getDefaultList())),n.next=4,Promise.all(r);case 4:return o=n.sent,i=(0,tn.A)(o,1),a=i[0],n.abrupt("return",a);case 8:case"end":return n.stop()}}),n,this)})))}},{key:"onSelect",value:function(e){this.customTabs.forEach((function(t){return t.onSelect(e)}))}}])}();function nHe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,rHe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function rHe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rHe=function(){return!!e})()}var oHe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=nHe(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Dy);function iHe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,aHe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function aHe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(aHe=function(){return!!e})()}Object.defineProperty(oHe,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze("IMentionService")});var lHe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=iHe(this,t,arguments),Object.defineProperty(e,"tabs",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(e,"renderUIS",{enumerable:!0,configurable:!0,writable:!0,value:[]}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"registerMentionTab",value:function(e){this.tabs.push(e)}},{key:"getTabs",value:function(){return this.tabs}},{key:"registerMentionUI",value:function(e){this.renderUIS.push(e)}},{key:"renderUI",value:function(e,t){return this.renderUIS.reduce((function(e,n){return n(e,t)}),e)}},{key:"destroy",value:function(){this.tabs=[]}}])}(oHe);function uHe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,cHe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function cHe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(cHe=function(){return!!e})()}var sHe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=uHe(this,t,arguments),Object.defineProperty(e,"context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t,n){var r,o,i=this;this.context=new tHe(e,this.option,this.service),t.registerInlineCard(this,Xse.cardName,{factory:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return vl($Ve,[e].concat(n))},pluginContext:this.context}),bt(e.kernel.hasExtendMethod("isValidMentionPosition"),"plugins/mention/src/editor/index.ts:36");var a=t.getService(nFe.ID);a&&this.option.enableQuickInput&&a.registerQuickInput({trigger:"at",match:function(t){return e.kernel.isValidMentionPosition(t)}},(function(){var e=i.editor.execCommand("mention",null,!0);i.editor.emitPluginEvent("mentionDrawerVisible",{visible:!0,id:e})})),e.onPluginEvent("insertCardByUI:".concat(Xse.cardName),(function(){var e=i.editor.execCommand("mention",null,!0);i.editor.emitPluginEvent("mentionDrawerVisible",{visible:!0,id:e})})),null===(r=t.getService(fBe.ID))||void 0===r||r.registerNodeSearch(Xse.cardName,new ZVe(this)),null===(o=e.getService(xEe.ID))||void 0===o||o.registerCardSelect(Xse.cardSelect,{type:"TextItem",icon:"editor-main-aite",label:sc("提及"),description:sc("提及人和内容"),mainSearch:"@",name:Xse.cardSelect,keywords:"提及,tiji,metion"})}}])}(Fh);function dHe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,fHe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function fHe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(fHe=function(){return!!e})()}Object.defineProperty(sHe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:Xse.pluginName}),Object.defineProperty(sHe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:JVe}),Object.defineProperty(sHe,"Service",{enumerable:!0,configurable:!0,writable:!0,value:lHe});var hHe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=dHe(this,t,arguments),Object.defineProperty(e,"renderIconNormal",{enumerable:!0,configurable:!0,writable:!0,value:function(){return Gu().createElement("div",{className:"ne-card-video-icon video-icon"},Gu().createElement(SC,{type:"card-video-normal"}))}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){var e=this.props.cardData.getName(),t=this.props.cardData.getSize();return Gu().createElement("div",{className:"ne-card-video-content ne-card-video-uploading ".concat(this.props.className||"")},Gu().createElement("div",{className:"ne-card-video-center"},this.renderIconNormal(),Gu().createElement("div",{className:"ne-card-video-name"},e," ",t&&Gu().createElement(Gu().Fragment,null,"(",Zd(t),")")),this.props.children))}}])}(Yu.Component);function pHe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,vHe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function vHe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vHe=function(){return!!e})()}var mHe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=pHe(this,t,arguments),Object.defineProperty(e,"renderErrorIcon",{enumerable:!0,configurable:!0,writable:!0,value:function(){return Gu().createElement("span",{className:"lake-error-icon"},"X")}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){var e=this.props.cardData.getName();return Gu().createElement("div",{className:"ne-card-video-content ne-card-video-error"},Gu().createElement("div",{className:"ne-card-video-center"},Gu().createElement("div",{className:"ne-card-video-name"},e||""),Gu().createElement("div",{className:"ne-card-video-message"},this.renderErrorIcon(),sc("视频无法播放，请稍后重试"))))}}])}(Yu.Component);function gHe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,bHe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function bHe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bHe=function(){return!!e})()}var yHe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=gHe(this,t,arguments),Object.defineProperty(e,"state",{enumerable:!0,configurable:!0,writable:!0,value:{duration:void 0}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.state.duration!==t.duration}},{key:"renderPlayer",value:function(){var e=this.props.getVideoUrl(),t=this.props.getVideoCover();return Gu().createElement("video",Object.assign({preload:"metadata",src:yh.sanitizeUrl(e),playsInline:"playsinline",poster:t,onContextMenu:function(e){e.preventDefault()},controls:!0},{}))}},{key:"render",value:function(){return Gu().createElement("div",{className:"ne-card-video-content ne-card-video-done"},this.renderPlayer())}}])}(Yu.Component);function wHe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,AHe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function AHe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(AHe=function(){return!!e})()}var kHe=function(e){function t(e){var n;(0,Ke.A)(this,t),n=wHe(this,t,[e]),Object.defineProperty(n,"uploadTask",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"handleUploadStart",{enumerable:!0,configurable:!0,writable:!0,value:function(e){return n.props.onUploadStart(e)}}),Object.defineProperty(n,"handleUploadError",{enumerable:!0,configurable:!0,writable:!0,value:function(e){return n.props.onUploadError(e)}}),Object.defineProperty(n,"handleUploadSuccess",{enumerable:!0,configurable:!0,writable:!0,value:function(e){return n.props.onUploadSuccess(e)}}),Object.defineProperty(n,"handleUploadProgress",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n.setState({percent:e}),n.props.onUploadProgress()}}),Object.defineProperty(n,"renderIconSpin",{enumerable:!0,configurable:!0,writable:!0,value:function(){return Gu().createElement("i",{className:"ne-card-video-anticon video-spin"},Gu().createElement(jxe,null))}}),Object.defineProperty(n,"renderLoading",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=n.state.percent,t=n.props.LoadingComponent;return t?Gu().createElement(t,{cardData:n.props.cardData,percent:e}):Gu().createElement(hHe,{cardData:n.props.cardData,className:"ne-card-video-progress-wrapper"},Gu().createElement("div",{"data-role":"progress",className:"ne-card-video-progress"},n.renderIconSpin(),Gu().createElement("span",{"data-role":"percent",className:"percent"},e,"%")))}}),Object.defineProperty(n,"renderError",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=n.props.ErrorComponent;return e?Gu().createElement(e,{cardData:n.props.cardData}):Gu().createElement(mHe,{cardData:n.props.cardData})}}),Object.defineProperty(n,"renderSuccess",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=n.props.SuccessComponent;return e?Gu().createElement(e,{cardData:n.props.cardData}):Gu().createElement(yHe,{cardData:n.props.cardData,getVideoUrl:n.props.getVideoUrl,getVideoCover:n.props.getVideoCover,withPip:n.props.withPip})}}),Object.defineProperty(n,"renderContent",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=n.props.cardData.getStatus();return e===c9.Error?n.renderError():[c9.Uploading,c9.Pending].includes(e)?n.renderLoading():e!==c9.Uploaded&&e!==c9.Done||!n.props.getVideoUrl()?null:n.renderSuccess()}});var r=e.cardData.getTaskId(),o=e.cardData.isCompleted();return r&&!o&&(n.uploadTask=e.uploadObserver.observe(r)),n.state={percent:0},n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){this.uploadTask&&(sd(this,this.uploadTask,"start",this.handleUploadStart),sd(this,this.uploadTask,"success",this.handleUploadSuccess),sd(this,this.uploadTask,"progress",this.handleUploadProgress),sd(this,this.uploadTask,"timeout",this.handleUploadError),sd(this,this.uploadTask,"error",this.handleUploadError))}},{key:"componentWillUnmount",value:function(){this.uploadTask&&this.uploadTask.abort()}},{key:"render",value:function(){var e=this.renderContent();return Gu().createElement("div",{className:"ne-card-video","data-testid":"ne-card-video"},e)}}])}(Yu.Component);function _He(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_He=function(){return!!e})()}function CHe(e){return function(e){function t(){var e;return(0,Ke.A)(this,t),e=function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,_He()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,arguments),Object.defineProperty(e,"_uiViewProxy",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_updateObserver",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_stopPolling",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"LoadingComponent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"SuccessComponent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"ErrorComponent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"onUploadStart",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.cardData.setStatus(c9.Uploading),e.cardData.sync(!0)}}),Object.defineProperty(e,"onUploadProgress",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.cardData.getStatus()!==c9.Uploading&&(e.cardData.setStatus(c9.Uploading),e.cardData.sync(!0))}}),Object.defineProperty(e,"onUploadSuccess",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=t.filename,r=t.filesize,o=t.url,i=t.cover;o?(e.cardData.setStatus(c9.Uploaded),e.cardData.setUrl(o),n&&e.cardData.setName(n),r&&e.cardData.setSize(r),i&&e.cardData.setCover(i),e.cardData.sync(!0)):(e.cardData.setStatus(c9.Error),e.cardData.setMessage(sc("视频已损坏")),e.cardData.sync(!0))}}),Object.defineProperty(e,"onUploadError",{enumerable:!0,configurable:!0,writable:!0,value:function(t){e.cardData.setStatus(c9.Error),(null==t?void 0:t.message)&&e.cardData.setMessage(t.message),e.cardData.sync(!0)}}),Object.defineProperty(e,"getVideoUrl",{enumerable:!0,configurable:!0,writable:!0,value:function(){return e.cardData.getUrl()}}),Object.defineProperty(e,"getVideoCover",{enumerable:!0,configurable:!0,writable:!0,value:function(){return e.cardData.getCover()}}),Object.defineProperty(e,"updateData",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};null===(t=e._uiViewProxy)||void 0===t||t.rerender(n)}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t;this._updateObserver=e,this._uiViewProxy=Vye.render(kHe,{cardData:this.cardData,uploadObserver:this._updateObserver,getVideoUrl:this.getVideoUrl,getVideoCover:this.getVideoCover,onUploadStart:this.onUploadStart,onUploadProgress:this.onUploadProgress,onUploadSuccess:this.onUploadSuccess,onUploadError:this.onUploadError,withPip:!!(null===(t=this.pluginOption._option)||void 0===t?void 0:t.withPip),LoadingComponent:this.LoadingComponent,SuccessComponent:this.SuccessComponent,ErrorComponent:this.ErrorComponent},this.containerNode)}},{key:"destroy",value:function(){var e;null===(e=this._uiViewProxy)||void 0===e||e.destroy(),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}}])}(e)}var NHe=CHe;function OHe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,xHe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function xHe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xHe=function(){return!!e})()}var EHe=function(e){function t(e){var n;(0,Ke.A)(this,t);for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return n=OHe(this,t,[].concat(o)),Object.defineProperty(n,"_ui",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"editor",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"_task",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"_stopPolling",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"sync",{enumerable:!0,configurable:!0,writable:!0,value:function(){return!n.editor.engine.nodeIsInTree(n.viewNode)||n.cardData.isCompleted()}}),Object.defineProperty(n,"handleUploadStart",{enumerable:!0,configurable:!0,writable:!0,value:Qm()((function(){n.cardData.setStatus(c9.Uploading),n.cardData.sync(!0)}))}),Object.defineProperty(n,"onUploadProgress",{enumerable:!0,configurable:!0,writable:!0,value:Qm()((function(){n.cardData.getStatus()!==c9.Uploading&&(n.cardData.setStatus(c9.Uploading),n.cardData.sync(!0))}))}),Object.defineProperty(n,"handleUploadSuccess",{enumerable:!0,configurable:!0,writable:!0,value:Qm()((function(e){var t=e.url,r=e.filename,o=e.filesize;t?(n.cardData.setStatus(c9.Uploaded),n.cardData.setUrl(t),r&&n.cardData.setName(r),o&&n.cardData.setSize(o),n.cardData.sync(!0)):(n.cardData.setStatus(c9.Error),n.cardData.setMessage(sc("视频已损坏")),n.cardData.sync(!0))}))}),Object.defineProperty(n,"handleUploadError",{enumerable:!0,configurable:!0,writable:!0,value:Qm()((function(e){n.cardData.setStatus(c9.Error),(null==e?void 0:e.message)&&n.cardData.setMessage(e.message),n.cardData.sync(!0)}))}),n.editor=e,n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e,n,r,o,i,a=this;this.pluginOption.editUI&&(t.$EditableCardUI=this.pluginOption.editUI);var l=this.editor.getService(oDe.ID);this._ui=this.editor.createCardUI(this,null==l?void 0:l.uploadObserver);var u=this.cardData.getTaskId(),c=this.cardData.isCompleted();u&&!c&&(this._task=null==l?void 0:l.uploadObserver.observe(u),null===(e=this._task)||void 0===e||e.on("start",(function(){return a.handleUploadStart()})),null===(n=this._task)||void 0===n||n.on("progress",(function(){return a.onUploadProgress()})),null===(r=this._task)||void 0===r||r.on("success",(function(e){return a.handleUploadSuccess(e)})),null===(o=this._task)||void 0===o||o.on("error",(function(e){return a.handleUploadError(e)})),null===(i=this._task)||void 0===i||i.on("timeout",(function(){return a.handleUploadError({message:"failed to upload"})})))}},{key:"destroy",value:function(){this._task&&(this._task.abort(),this._task=null),this._ui.destroy(),this._ui=null}},{key:"$blur",value:function(){Tr((0,Je.A)(t.prototype),"$blur",this).call(this)}}])}(Fy);function DHe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,PHe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function PHe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(PHe=function(){return!!e})()}Object.defineProperty(EHe,"$EditableCardUI",{enumerable:!0,configurable:!0,writable:!0,value:CHe(zh()())}),Object.defineProperty(EHe,"$CardData",{enumerable:!0,configurable:!0,writable:!0,value:h9});var RHe=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=DHe(this,t),Object.defineProperty(r,"_apiURL",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(r,"_file",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(r,"_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_uploadRequest",{enumerable:!0,configurable:!0,writable:!0,value:null}),r._id=Dr(),r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"file",get:function(){return this._file}},{key:"run",value:function(){return function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,Cc().mark((function e(){var t,n,r=this;return Cc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._file,n=new FormData,this.emit(kte.EVENT_START,t),n.append("file",t,t.name),e.abrupt("return",new Promise((function(e){r._uploadRequest=ns({method:"POST",xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",(function(e){e.lengthComputable&&r.emit(kte.EVENT_PROGRESS,kc.toPercentage(e.loaded,e.total))}),!1),e},url:r._apiURL,data:n,dataType:"json",success:function(t){r.emit("upload-success");var n=Object.assign({},t.data);r.emit(kte.EVENT_SUCCESS,n),e({result:n})},error:function(t){t=ts(t),r.emit(kte.EVENT_ERROR,t),e({error:t})},processData:!0})})));case 5:case"end":return e.stop()}}),e,this)})))}}])}(kte);function SHe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,THe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function THe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(THe=function(){return!!e})()}var jHe=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=SHe(this,t),Object.defineProperty(r,"upload",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(r,"_data",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(r,"_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r._id=Dr(),r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"file",get:function(){return"string"==typeof this._data?null:this._data}},{key:"run",value:function(){return function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,Cc().mark((function e(){var t,n=this;return Cc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._data,this.emit(kte.EVENT_START,t),e.next=4,this.upload(t).then((function(e){return n.emit(kte.EVENT_SUCCESS,e),e}),(function(e){n.emit(kte.EVENT_ERROR,e)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})))}}])}(kte);function IHe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,BHe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function BHe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(BHe=function(){return!!e})()}var MHe={createUploadTask:null,useOriginSrc:function(){return!1},createUploadPromise:null,uploadFileURL:null,crawlVideo:null,whiteHostList:null,accept:null,withPip:!0},FHe=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=IHe(this,t),Object.defineProperty(n,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n._option=Ww()({},MHe,e),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"uploadFileURL",get:function(){return this._option.uploadFileURL}},{key:"accept",get:function(){return this._option.accept}},{key:"editUI",get:function(){return this._option.editUI}},{key:"viewerUI",get:function(){return this._option.viewerUI}},{key:"crawlVideo",get:function(){return this._option.crawlVideo}},{key:"useOriginSrc",value:function(e){return this._option.useOriginSrc(e)}},{key:"isWhiteHost",value:function(e){if(!this._option.whiteHostList)return!0;try{var t=new URL(e).hostname;if(t)return this._option.whiteHostList.includes(t)}catch(e){}return!0}},{key:"createUploadTask",value:function(e){return"string"==typeof e?(bt(this._option.crawlVideo,"没有配置crawlVideo","plugins/video/src/common/video-option.ts:99"),new jHe(this._option.crawlVideo,e)):this._option.createUploadTask?this._option.createUploadTask(e):this._option.createUploadPromise?new jHe(this._option.createUploadPromise,e):(bt(this._option.uploadFileURL,"没有配置uploadFileURL","plugins/video/src/common/video-option.ts:111"),new RHe(this._option.uploadFileURL,e))}}])}(it);Object.defineProperty(FHe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"video"});var LHe=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=IHe(this,t,[e]),Object.defineProperty(r,"kernelOption",{enumerable:!0,configurable:!0,writable:!0,value:n}),r}return(0,Xe.A)(t,e),(0,$e.A)(t)}(FHe);Object.defineProperty(LHe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"video"});var UHe=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"uploadVideoByFile",value:function(e,t){var n=e.option.video,r=e.requireService(oDe.ID);return t.map((function(e){var t=n.createUploadTask(e);return r.uploadManager.addTask(t),t}))}},{key:"uploadVideoByUrl",value:function(e,t){var n=e.option.video,r=e.requireService(oDe.ID),o=n.createUploadTask(t);return r.uploadManager.addTask(o),o}}])}();function VHe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,HHe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function HHe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(HHe=function(){return!!e})()}var zHe=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=VHe(this,t),Object.defineProperty(n,"editor",{enumerable:!0,configurable:!0,writable:!0,value:null}),n.editor=e,n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"preReadFile",value:function(e,t,n){if(("localDoc"===(null==n?void 0:n.category)||"video"===(null==n?void 0:n.category)||n.useMediaCard)&&((null==n?void 0:n.from)===LT||n.useMediaCard)){if(!e.checkFileSize(sM.video,t.file.size))return!1;var r=UHe.uploadVideoByFile(this.editor,[t.file]),o=(0,tn.A)(r,1)[0];return t._$neUploadTask=o,!1}}}])}(UPe);function WHe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,qHe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function qHe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qHe=function(){return!!e})()}var $He=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=WHe(this,t),Object.defineProperty(n,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"readNode",value:function(e,t,n){var r,o,i;if(this.plugin.option.crawlVideo&&t.attrs){var a=t.attrs.src;if(a||(a=null===(i=null===(o=null===(r=t.children)||void 0===r?void 0:r.find((function(e){return"source"===e.name})))||void 0===o?void 0:o.attrs)||void 0===i?void 0:i.src),"string"==typeof a){var l=UHe.uploadVideoByUrl(this.plugin.editor,a);return t.attrs._$neUploadTask=l,!1}}}}])}(h0);function KHe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,YHe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function YHe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(YHe=function(){return!!e})()}var GHe=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=KHe(this,t),Object.defineProperty(n,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t){if(!this.plugin.option.crawlVideo||!t.attrs)return!1;var n=t.attrs.src;if("string"!=typeof n)return!1;t.children&&(t.children=[]);var r=UHe.uploadVideoByUrl(this.plugin.editor,n);return t.attrs._$neUploadTask=r,!0}}])}(aI);function JHe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,XHe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function XHe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(XHe=function(){return!!e})()}var QHe=function(e){function t(){return(0,Ke.A)(this,t),JHe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t,n){var r,o=n.requireService(dse.ID);t.registerBlockCard(this,Gse.cardName,{factory:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return vl(EHe,[e].concat(n))}});var i=e.kernel.getService(ET.ID),a=e.kernel.getService(wS.ID),l=e.kernel.getService(_S.ID);null==i||i.registerPreFileReader(o.getFileAcceptUtil().getVideoFileAccept(this.option.accept),new zHe(e)),null==a||a.registerPreHTMLNodeReader(["video"],new $He(this)),null==l||l.registerLakeNodePreReader("video",new GHe(this));var u=o.getFileAcceptUtil().getVideoFileAccept(this.option.accept),c=0===u.length;null===(r=e.getService(xEe.ID))||void 0===r||r.registerCardSelect(Gse.cardSelect,{type:"FileItem",icon:"editor-main-local-video",label:sc("本地视频"),description:c?function(){return null}:sc("视频导入"),mainSearch:"/sp",multiple:!0,isVip:this.editor.option.env===oM&&!this.editor.option.hideVipIcon,disabled:c,accept:u,keywords:"bendishipin,sp,video,视频,本地视频,local"})}},{key:"sync",value:function(){return 0===this.cardNodes.filter((function(e){return!1===e.sync()})).length}}])}(Fh);function ZHe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,eze()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function eze(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(eze=function(){return!!e})()}Object.defineProperty(QHe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:Gse.pluginName}),Object.defineProperty(QHe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:FHe});var tze={columns:2,columns2:2,columns3:3,columns4:4,columns5:5,columns6:6},nze=function(e){function t(){var e;return(0,Ke.A)(this,t),e=ZHe(this,t,arguments),Object.defineProperty(e,"_pluginContext",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){var n,r=this;null===(n=e.getService(xEe.ID))||void 0===n||n.registerCardSelect((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)({},H9.cardSelect.columns,{type:"SubMenu",icon:"editor-main-column-splitting",label:sc("分栏卡片"),keywords:"分栏卡片,fl,fenlan,columns",description:sc("使用分栏组织页面")}),H9.cardSelect.columns2,{mainIcon:"editor-main-column-splitting",icon:"card-columns-2",type:"TextItem",label:sc("两栏"),mainSearch:"/fl2",keywords:"两栏,分栏卡片,fl2,fl,fenlan,columns",description:sc("使用分栏组织页面")}),H9.cardSelect.columns3,{mainIcon:"editor-main-three-columns",icon:"card-columns-3",type:"TextItem",label:sc("三栏"),mainSearch:"/fl3",keywords:"三栏,分栏卡片,fl3,fl,fenlan,columns",description:sc("使用分栏组织页面")}),H9.cardSelect.columns4,{mainIcon:"editor-main-four-columns",icon:"card-columns-4",type:"TextItem",label:sc("四栏"),mainSearch:"/fl4",keywords:"四栏,分栏卡片,fl4,fl,fenlan,columns",description:sc("使用分栏组织页面")}),H9.cardSelect.columns5,{mainIcon:"editor-main-five-columns",icon:"card-columns-5",type:"TextItem",label:sc("五栏"),mainSearch:"/fl5",keywords:"五栏,分栏卡片,fl5,fl,fenlan,columns",description:sc("使用分栏组织页面")}),H9.cardSelect.columns6,{mainIcon:"editor-main-six-columns",icon:"card-columns-6",type:"TextItem",label:sc("六栏"),mainSearch:"/fl6",keywords:"六栏,分栏卡片,fl6,fl,fenlan,columns",description:sc("使用分栏组织页面")})),e.onPluginEvent("insertCardByUI",(function(t){var n=t.name,r=tze[n];r&&e.execCommand(H9.command.columns,r)})),t.onPluginEvent("columnsFocus",(function(e){var t=e.columnsId,n=e.domNode;r._refresh(t,n)})),t.onPluginEvent("columnDragging",(function(t){var n=t.columnsId;e.emitPluginEvent("columnDragging",n)})),t.onPluginEvent("columnsBlur",(function(e){var t=e.domNode;UR.destroyContainerToolbar(t),UR.destroyContainerRightToolbar(t),UR.destroyCardToolbar(t)}))}},{key:"_refresh",value:function(e,t){this._refreshContainerToolbar(e,t)}},{key:"_refreshContainerToolbar",value:function(e,t){if(t.isConnected){var n=this.editor,r=n.editBox,o=n.innerOverlayContainer;UR.updateContainerRightToolbar(t,r,o,this._getContainerRightToolbarConfig(e,t))}}},{key:"_getContainerRightToolbarConfig",value:function(e,t){return{items:this._getContainerRightItems(e,t),paddingLeft:12}}},{key:"_getContainerRightItems",value:function(e,t){var n=this,r=[{name:"widthMode",cardData:{getWidthMode:function(){return n.editor.queryCommandValue(H9.command.columnsToggleWidthMode,e)}},onClick:function(){n.editor.execCommand(H9.command.columnsToggleWidthMode,e),n._refresh(e,t)}}],o=this.editor.getService($R.ID);return o&&(r=UR.filter(r,o.getDisabledMiniToolbarItems())),UR.generateToolbarItems(r)}}])}(Fh);function rze(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,oze()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function oze(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(oze=function(){return!!e})()}Object.defineProperty(nze,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:H9.pluginName});var ize=function(e){function t(){var e;return(0,Ke.A)(this,t),e=rze(this,t,arguments),Object.defineProperty(e,"_pluginContext",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){var n;null===(n=e.getService(xEe.ID))||void 0===n||n.registerCardSelect((0,Ha.A)({},V7.cardSelect,{type:"TextItem",icon:"editor-main-folding-block",label:sc("折叠块"),description:sc("可折叠内容"),mainSearch:"/zdk",keywords:"折叠块,zhediekuai,zdk,zd,collapse"})),e.onPluginEvent("insertCardByUI:".concat(V7.node),(function(){e.execCommand("collapse")})),t.onPluginEvent("collapseChange",(function(){var t=[];e.inCollapsedNodes.forEach((function(e){var n,r;e.isInCollapsed||(null===(r=null===(n=Hy(e.viewNode))||void 0===n?void 0:n.$unCollapsed)||void 0===r||r.call(n),t.push(e))})),e.removeInCollapsedNodes(t)}))}}])}(Fh);Object.defineProperty(ize,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:V7.pluginName});var aze=[];function lze(e){aze.push(e)}function uze(e){return aze.some((function(t){return t(e)}))}var cze=Date.now()+1e5*Math.random()+"",sze=/^(\.\d+|\d+(\.\d*)?)(pt|em|ex|mu|px|in|cm|mm)$/i,dze=/^([a-z0-9]+|#[0-9a-f]{6}|#[0-9a-f]{3})$/i,fze=/^border\s*:\s*/i,hze=/^(solid|dashed|dotted|double|groove|ridge|inset|outset|none|hidden)$/i;function pze(e){e.__defineMacro("\\bbox",(function(e){var t=e.lexer.input,n=e.consumeArg().tokens,r="";if(1===n.length&&"["===n[0].text)for(var o=e.expandNextToken();"]"!==o.text&&"EOF"!==o.text;)r+=o.text,o=e.expandNextToken();var i=e.consumeArg();return"\\htmlData{style=".concat(function(e){var t,n,r,o;return e.split(",").reduce((function(e,i){if(i=i.trim(),sze.test(i)){if(t)throw new Error("MultipleBBoxProperty padding");return t=!0,e.push("padding: ".concat(i)),e}if(dze.test(i)){if(n)throw new Error("MultipleBBoxProperty background");return n=!0,r||(e.push("display:inline-block"),r=!0),e.push("background: ".concat(i)),e}if(fze.test(i)){if(o)throw new Error("MultipleBBoxProperty border");return o=!0,r||(e.push("display:inline-block"),r=!0),e.push((i.replace(fze,"").split(/\s+/).forEach((function(e){if(e=e.trim(),sze.test(e)){if(a)throw new Error("MultipleBorderProperty size");a=e}else if(hze.test(e)){if(l)throw new Error("MultipleBorderProperty style");l=e}else{if(!dze.test(e))throw new Error("InvalidBorderProperty: "+e);if(u)throw new Error("MultipleBorderProperty color");u=e}})),"border: ".concat(a," ").concat(l," ").concat(u))),e}var a,l,u;throw new Error("InvalidBBoxProperty: "+i)}),[]).join(";")}(r),",trust=").concat(cze,"}{").concat(t.slice(i.start.loc.end,i.end.loc.start),"}")}))}function vze(e){pze(e),e.__defineMacro("\\label",(function(e){return e.consumeArg(),""})),e.__defineMacro("\\yuque",(function(){return"Y^UQ_UE"}))}lze((function(e){var t;return"\\htmlData"===e.command&&(null===(t=e.attributes)||void 0===t?void 0:t["data-trust"])===cze&&(delete e.attributes["data-trust"],e.attributes.style=e.attributes["data-style"],delete e.attributes["data-style"],!0)}));var mze=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))},gze=null;function bze(e){return window.katex?Promise.resolve(window.katex):_f(e).then((function(){return window.katex}))}function yze(e){return mze(this,void 0,void 0,Cc().mark((function t(){var n;return Cc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!gze){t.next=2;break}return t.abrupt("return",gze);case 2:return t.next=4,bze(e);case 4:return n=t.sent,vze(gze=n),t.abrupt("return",gze);case 8:case"end":return t.stop()}}),t)})))}var wze=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))},Aze=/<span[^>]+>|<\/span>/g,kze=/\\(begin|end)\{\W*?align[^}]*?\}/g;function _ze(e){return kze.test(e)&&(e=e.replace(kze,"\\$1{aligned}")),e}var Cze=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"load",value:function(e){return wze(this,void 0,void 0,Cc().mark((function t(){return Cc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,yze(e);case 2:case"end":return t.stop()}}),t)})))}},{key:"renderToHTML",value:function(e,t,n){return wze(this,void 0,void 0,Cc().mark((function r(){var o;return Cc().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,yze(t);case 2:return o=r.sent,n=n||{},r.abrupt("return",o.renderToString(_ze(e),Object.assign(Object.assign({throwOnError:!0,displayMode:!0},n),{output:"html",trust:uze})));case 5:case"end":return r.stop()}}),r)})))}},{key:"renderToMathML",value:function(e,t,n){return wze(this,void 0,void 0,Cc().mark((function r(){var o;return Cc().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,yze(t);case 2:return o=r.sent,n=n||{},r.abrupt("return",o.renderToString(_ze(e),Object.assign(Object.assign({throwOnError:!0,displayMode:!0},n),{output:"mathml",trust:uze})).replace(Aze,""));case 5:case"end":return r.stop()}}),r)})))}}])}(),Nze=400;function Oze(e){var t=(0,Yu.useRef)(null),n=(0,Yu.useState)({width:e.width,height:e.height}),r=(0,tn.A)(n,2),o=r[0],i=r[1];(0,Yu.useLayoutEffect)((function(){var n=t.current;if(n){var r=n.closest(".ant-popover"),o=!1;return function t(){o||(r.style.left||r.style.right?ys((function(){return[n.getBoundingClientRect(),e.targetNode.getBoundingClientRect(),document.body.clientWidth]}),(function(t){var n=(0,tn.A)(t,3),r=n[0],o=n[1],a=n[2];r.right+20>a?i({width:Math.max(Nze,a-o.left-20),height:e.height}):r.left<20&&i({width:Math.max(Nze,o.right-20),height:e.height})})):gs(t))}(),function(){o=!0}}}),[]);var a=(0,Yu.useCallback)((function(e){var t=o.width,n=o.height,r=function(e,r){i({width:Math.max(Nze,t+e),height:Math.max(84,n-r)})};$d(e,r,r)}),[o,i]),l=(0,Yu.useCallback)((function(e){var t=o.width,n=o.height,r=function(e,r){i({width:Math.max(Nze,t+e),height:Math.max(84,n+r)})};$d(e,r,r)}),[o,i]);return Gu().createElement("div",{ref:t,className:"ne-math-resize",style:{width:o.width,height:o.height}},e.children,Gu().createElement("div",{className:"ne-math-resizer-top",onMouseDown:a}),Gu().createElement("div",{className:"ne-math-resizer-bottom",onMouseDown:l}))}var xze=oUe()("ne:math:editor");const Eze=function(e){var t=e.cursorFrom,n=e.onExitCardByKeyboard,r=(0,Yu.useRef)(null);return(0,Yu.useEffect)((function(){var e=r.current.querySelector("textarea"),n=null;return n=gs((function r(){e&&e.isConnected&&(e.getBoundingClientRect().y<0?n=gs(r):bs((function(){return function(e,t){if(xze("focus to math input"),e.setSelectionRange){var n=t===lM?e.value.length:0;e.setSelectionRange(n,n),e.focus()}}(e,t)})))})),function(){return null==n?void 0:n.dispose()}}),[t]),Gu().createElement("span",{ref:r},Gu().createElement(Oze,{width:750,height:110,targetNode:e.targetNode},Gu().createElement(KP.TextArea,{className:"ne-math-input",spellCheck:"false",autoComplete:"off",defaultValue:e.code,onChange:e.onChange,onKeyDown:function(e){var t=r.current.querySelector("textarea"),o=t.selectionStart;return(Ks.isArrowLeft(e)||Ks.isArrowUp(e))&&0===o?(e.preventDefault(),void n(aM)):(Ks.isArrowRight(e)||Ks.isArrowDown(e))&&o===t.value.length?(e.preventDefault(),void n(lM)):void 0}})))};function Dze(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Pze()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Pze(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Pze=function(){return!!e})()}var Rze=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Dze(this,t,arguments),Object.defineProperty(e,"domRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"lastInnerHTML",{enumerable:!0,configurable:!0,writable:!0,value:"\ufeff"}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"doUpdate",value:function(){return function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,Cc().mark((function e(){return Cc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Cze.renderToHTML(this.props.code,this.props.katexURL);case 3:this.lastInnerHTML=e.sent,e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),this.lastInnerHTML="\ufeff",this.props.onError(e.t0.message);case 10:this.domRef.current&&(this.domRef.current.innerHTML=this.lastInnerHTML);case 11:case"end":return e.stop()}}),e,this,[[0,6]])})))}},{key:"componentDidMount",value:function(){this.domRef.current&&this.props.code&&this.doUpdate()}},{key:"componentDidUpdate",value:function(){this.domRef.current&&this.props.code&&this.doUpdate()}},{key:"render",value:function(){return Gu().createElement("div",{ref:this.domRef,style:{pointerEvents:"none"},"data-testid":"ne-math-preview-image"},"&#xFEFF")}}])}(Yu.PureComponent);function Sze(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Tze()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Tze(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Tze=function(){return!!e})()}Object.defineProperty(Rze,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{onError:function(){}}}),Object.defineProperty(Rze,"observer",{enumerable:!0,configurable:!0,writable:!0,value:null});var jze=oUe()("ne:math:editor"),Ize=new cf(["cmd","enter"]),Bze=new cf(["escape"]),Mze=function(e){function t(e){var n;(0,Ke.A)(this,t),n=Sze(this,t,[e]),Object.defineProperty(n,"cardUINodeRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(n,"mathEditorDOM",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"syncValue",{enumerable:!0,configurable:!0,writable:!0,value:function(){n.setState({code:n.props.cardData.code,url:n.props.cardData.url})}}),Object.defineProperty(n,"setCursorPosition",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n.setState({cursorFrom:e})}}),Object.defineProperty(n,"mathEditorHotKeyHandle",{enumerable:!0,configurable:!0,writable:!0,value:function(e){e.stopPropagation();var t=n.state.editing;if(t)return Ize.match(e)?(jze("submit use: cmd+enter",{editing:t}),void n.exit("cmd+enter")):void(Bze.match(e)&&(jze("esc:",{editing:t}),n.exit("esc")))}}),Object.defineProperty(n,"onMathEditorRef",{enumerable:!0,configurable:!0,writable:!0,value:function(e){e?(n.mathEditorDOM=e,n.registerHotKey()):n.mathEditorDOM=null}}),Object.defineProperty(n,"exit",{enumerable:!0,configurable:!0,writable:!0,value:function(e){jze("exit editor, trigger by: ".concat(e)),n.props.onExit(),n.props.onExitCardByKeyboard(lM)}}),Object.defineProperty(n,"onChange",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t=e.target.value;n.setState({code:t,error:null}),n.props.onChange(t)}}),Object.defineProperty(n,"handleError",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n.setState({error:e})}});var r=e.cardData;return n.state={code:r.code,url:r.url,editing:e.focus,cursorFrom:"end",error:null},n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidUpdate",value:function(e){var t=this,n=this.props.focus;n||!1===this.state.editing||this.setState({editing:!1},(function(){t.removeHotKey()})),n&&!1===e.focus&&this.setState({editing:!0})}},{key:"registerHotKey",value:function(){this.mathEditorDOM&&this.mathEditorDOM.addEventListener("keydown",this.mathEditorHotKeyHandle)}},{key:"removeHotKey",value:function(){this.mathEditorDOM&&this.mathEditorDOM.removeEventListener("keydown",this.mathEditorHotKeyHandle)}},{key:"renderEditor",value:function(){var e=this,t=this.props,n=t.cardData,r=t.onExitCardByKeyboard,o=this.state,i=o.cursorFrom,a=o.error;return Gu().createElement("div",{"data-testid":"ne-math-editor",ref:this.onMathEditorRef},a?Gu().createElement("div",{className:"ne-math-editor-error-top"},a):null,Gu().createElement(Eze,{code:n.code,targetNode:this.cardUINodeRef.current,cursorFrom:i,onChange:this.onChange,onExitCardByKeyboard:r}),a?Gu().createElement("div",{className:"ne-math-editor-error-bottom"},a):null,Gu().createElement("div",{className:"ne-math-editor-toolbar"},Gu().createElement("a",{href:"https://katex.org/",className:"ne-help-link","data-desktop-target":"_browser",target:"_blank",onClick:function(t){t.preventDefault(),t.stopPropagation(),e.props.visitLink("https://katex.org/",!0)}},Gu().createElement(SC,{type:"question"}),sc("查看帮助文档")),Gu().createElement(Qx,{title:of(["cmd","enter"])},Gu().createElement("a",{"data-testid":"ne-math-editor-submit",className:"ne-math-editor-submit",onClick:function(){e.exit("confirm")}},Gu().createElement("span",{className:"text"},sc("确定"),"(",Us.macos?"Cmd":"Ctrl"," + Enter)")))))}},{key:"renderEntry",value:function(){var e=this.state,t=e.code;return e.error?Gu().createElement("span",{className:"ne-math-entry ne-math-placeholder-error"},sc("非法 TeX 公式")):t?Gu().createElement("span",{className:"ne-math-entry ne-math-code"},Gu().createElement(Rze,{katexURL:this.props.katexURL,code:t,onError:this.handleError})):Gu().createElement("span",{className:"ne-math-entry ne-math-placeholder"},sc("添加 TeX 公式"))}},{key:"render",value:function(){var e=this,t=this.props,n=t.focus,r=t.overlayContainer;return Gu().createElement(bR,{className:"ne-math-editor-panel",trigger:"click",getPopupContainer:function(){return r||e.cardUINodeRef.current},overlayClassName:"ne-math-editor-overlay",visible:n,placement:"bottomLeft",content:this.renderEditor(),noArrow:!0,destroyTooltipOnHide:!0},Gu().createElement("span",{ref:this.cardUINodeRef,className:"ne-math ".concat(n?"ne-math-selected":"")},this.renderEntry()))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return!t.url&&e.cardData.url?{url:e.cardData.url}:null}}])}(Yu.PureComponent);const Fze=Mze;function Lze(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Uze()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Uze(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Uze=function(){return!!e})()}var Vze=oUe()("ne:math:eui"),Hze=UUe(0,(function(e){return function(e){function t(){var e;return(0,Ke.A)(this,t),e=Lze(this,t,arguments),Object.defineProperty(e,"_changedValue",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_uiViewProxy",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"syncValue",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n,r;t||null===(r=null===(n=e._uiViewProxy)||void 0===n?void 0:n.getReactRef())||void 0===r||r.syncValue()}}),Object.defineProperty(e,"sync",{enumerable:!0,configurable:!0,writable:!0,value:function(){return e._changedValue&&(e.cardData.sync(!0),e._changedValue=!1),!0}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e=this;Vze("init",this.cardData),this.cardData.on("change",this.syncValue),Cze.load(this.pluginOption.katexURL).catch((function(){})),this.plugin.intersectionObserver&&this.containerNode&&this.plugin.intersectionObserver.observe(this.containerNode.closest("ne-card")),this._uiViewProxy=Vye.render(Fze,{cardData:this.cardData,visitLink:function(t,n){e.editor.emitEvent("visitLink",t,n)},focus:!1,isDark:this.editor.theme.isDark(),katexURL:this.pluginOption.katexURL,onChange:function(t){e.cardData.update({code:t,url:null}),e._changedValue=!0},onExit:function(){e.blur()},onExitCardByKeyboard:function(t){e.focusCardTo(t)},overlayContainer:this.editor.innerOverlayContainer},this.containerNode),xc(this,this.editor.theme,"themeChange",(function(){var t;e.destroyed||null===(t=e._uiViewProxy)||void 0===t||t.rerender({isDark:e.editor.theme.isDark()})}))}},{key:"destroy",value:function(){var e;this.plugin.intersectionObserver&&this.containerNode&&this.plugin.intersectionObserver.unobserve(this.containerNode.closest("ne-card")),null===(e=this._uiViewProxy)||void 0===e||e.destroy(),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}},{key:"focus",value:function(){var e,t,n;Vze("focus"),null===(e=this._uiViewProxy)||void 0===e||e.rerender({focus:!0}),this.focusByKeyboard&&(null===(n=null===(t=this._uiViewProxy)||void 0===t?void 0:t.getReactRef())||void 0===n||n.setCursorPosition(this.focusByKeyboard))}},{key:"blur",value:function(){var e;Vze("blur"),this.cardData.sync(!1),this._changedValue=!1,null===(e=this._uiViewProxy)||void 0===e||e.rerender({focus:!1})}}])}(e)}));function zze(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Wze()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Wze(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Wze=function(){return!!e})()}var qze=function(e){function t(e){var n;(0,Ke.A)(this,t);for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return n=zze(this,t,[].concat(o)),Object.defineProperty(n,"editor",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(n,"_ui",{enumerable:!0,configurable:!0,writable:!0,value:null}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){this._ui=this.editor.createCardUI(this)}},{key:"destroy",value:function(){var e;null===(e=this._ui)||void 0===e||e.destroy()}},{key:"sync",value:function(){var e;return null===(e=this._ui)||void 0===e||e.sync(),!0}}])}(My);Object.defineProperty(qze,"$EditableCardUI",{enumerable:!0,configurable:!0,writable:!0,value:Hh.extend(Hze)}),Object.defineProperty(qze,"$CardData",{enumerable:!0,configurable:!0,writable:!0,value:Kee});const $ze=qze;function Kze(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Yze()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Yze(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Yze=function(){return!!e})()}var Gze={hideOnInvisible:!1,KaTexURL:"https://gw.alipayobjects.com/os/lib/katex/0.16.8/dist/katex.min.js"},Jze=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._options=Ww()({},Gze,t)}),[{key:"katexURL",get:function(){return this._options.KaTexURL}},{key:"hideOnInvisible",get:function(){return this._options.hideOnInvisible}}])}();Object.defineProperty(Jze,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:eM.MATH.OPTION_NAME});const Xze=Jze;var Qze=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=Kze(this,t,[e]),Object.defineProperty(r,"kernelOption",{enumerable:!0,configurable:!0,writable:!0,value:n}),r}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Jze);Object.defineProperty(Qze,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:eM.MATH.OPTION_NAME});var Zze=function(){function e(t){var n=this;(0,Ke.A)(this,e),Object.defineProperty(this,"editor",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"sortNodes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"eqSizeMap",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"eqSizeCodeMap",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"update",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e,t;n.sortNodes=[];var r=null===(t=null===(e=n.editor.kernel)||void 0===e?void 0:e.model.document)||void 0===t?void 0:t.getNodesByCategory("math").filter((function(e){return e.isConnected}));r&&(n.sortNodes=r.sort((function(e,t){return e.compare(t).preceding?-1:1})))}}),xc(this,this.editor,"contentchange",this.update),xc(this,this.editor,"afterSetDocument",this.update),this.update()}return(0,$e.A)(e,[{key:"destroy",value:function(){this.sortNodes=[],this.eqSizeMap={},this.eqSizeCodeMap={}}},{key:"getEqSize",value:function(t){if(this.eqSizeCodeMap[t.id]!==t.attrs.value.code){var n=t.attrs.value.code;console.info("code: ",n,"size: ",e.getEqSize(n)),this.eqSizeCodeMap[t.id]=n,this.eqSizeMap[t.id]=e.getEqSize(n)}return this.eqSizeMap[t.id]||0}},{key:"viewNodeEq",value:function(e){var t=this,n=0;return 0===this.sortNodes.length&&this.update(),this.sortNodes.find((function(r){return r.id===e.id||(n+=t.getEqSize(r),!1)})),n}}],[{key:"getEqSize",value:function(t){return(t.match(e.eqSizeReg)||[]).length}}])}();function eWe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function tWe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,nWe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function nWe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nWe=function(){return!!e})()}Object.defineProperty(Zze,"eqSizeReg",{enumerable:!0,configurable:!0,writable:!0,value:/\\end\{equation\}/g});var rWe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=tWe(this,t,arguments),Object.defineProperty(e,"_intersectionObserver",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_eqHelper",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_handleInterSectionCallback",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return eWe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eWe(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,o=r.target,i=r.intersectionRatio,a=r.boundingClientRect,l=a.width,u=a.height;if(o){var c=o;c.style.width?i>=.1&&(c.style.width=null,c.style.height=null,c.style.verticalAlign=null,c.style.counterIncrement=null,c.children[0].style.display=null):0===i&&(c.style.width=l+"px",c.style.verticalAlign="middle",c.style.height=u+"px",c.querySelectorAll(".eqn-num").length>0&&(c.style.counterIncrement="katexEqnNo "+c.querySelectorAll(".eqn-num").length),c.children[0].style.display="none")}}}catch(e){n.e(e)}finally{n.f()}}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){var n,r=this;t.registerInlineCard(this,Jse.cardName,{factory:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return vl($ze,[e].concat(n))}}),null===(n=e.getService(xEe.ID))||void 0===n||n.registerCardSelect(Jse.cardSelect,{type:"TextItem",icon:"editor-main-formula",label:sc("公式"),description:sc("支持 Latex 语法"),mainSearch:"/gs",keywords:"数学公式,sxgs,公式,gs,gongshi,formula,math,latex"}),e.onPluginEvent("insertCardByUI:".concat(Jse.cardName),(function(){e.execCommand("insertCard",Jse.cardName,null,!0)})),this.option.hideOnInvisible&&(this._intersectionObserver=As(this._handleInterSectionCallback,{threshold:[0,.1,1]})),this._eqHelper=new Zze(e);var o=null;e.renderer.on("viewportNodesChange",(function(t,n){var i,a=e.renderer.getViewNodeById(n);if(a){var l=r._cardNodes.filter((function(e){return e.viewNode.isConnected})).sort((function(e,t){return e.viewNode.compare(t.viewNode).preceding?-1:1})).find((function(e){return e.viewNode===a||!e.viewNode.compare(a).preceding}));if(o&&o.dom&&(o.dom.style.counterSet=""),l){o=l;var u=null===(i=r._eqHelper)||void 0===i?void 0:i.viewNodeEq(l.viewNode);l.dom&&u&&(l.dom.style.counterSet="katexEqnNo "+u)}}}))}},{key:"intersectionObserver",get:function(){return this._intersectionObserver}},{key:"destroy",value:function(){var e;Tr((0,Je.A)(t.prototype),"destroy",this).call(this),this._intersectionObserver&&this._intersectionObserver.disconnect(),null===(e=this._eqHelper)||void 0===e||e.destroy()}},{key:"sync",value:function(){return this.cardNodes.every((function(e){return e.sync()}))}}])}(Fh);Object.defineProperty(rWe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:Jse.pluginName}),Object.defineProperty(rWe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:Xze});const oWe=rWe;function iWe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,aWe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function aWe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(aWe=function(){return!!e})()}var lWe=["codepen","juejin"],uWe=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=iWe(this,t,[e]),Object.defineProperty(n,"_iframeRef",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"hasBindEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"observer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"handleObserver",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t){e.forEach((function(e){if(e.isIntersecting){var n=e.target;n.src=n.dataset.src,t.unobserve(n)}}))}}),Object.defineProperty(n,"handleBeforePrint",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=n._iframeRef.current;e&&!e.src&&e.dataset.src&&(e.src=e.dataset.src)}}),n._iframeRef=Gu().createRef(),n.state={focus:!!e.focus},n.hasBindEvent=!1,n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){this.bindEvent()}},{key:"componentDidUpdate",value:function(){this.hasBindEvent||this.bindEvent()}},{key:"componentWillUnmount",value:function(){this.observer&&this.observer.disconnect(),window.removeEventListener("beforeprint",this.handleBeforePrint)}},{key:"bindEvent",value:function(){var e=this._iframeRef.current;e&&(window.IntersectionObserver?(this.observer=new IntersectionObserver(this.handleObserver,{threshold:.1}),this.observer.observe(e),window.addEventListener("beforeprint",this.handleBeforePrint)):e.src=e.dataset.src,this.hasBindEvent=!0)}},{key:"render",value:function(){var e=this.props,t=e.cardData,n=e.showIFrame;if(!t.getSrc())return null;var r=t.getEmbedURL();return t.isAvailable()&&r?Gu().createElement("div",{className:"ne-thirdparty-wrap",style:{},"data-testid":"ne-thirdparty-reader-status"},Gu().createElement("div",{className:"ne-thirdparty-content"},n&&this._renderContent(r))):Gu().createElement("div",{className:"ne-thirdparty-unavailable","data-testid":"ne-thirdparty-unavailable-view"},Gu().createElement(SC,{type:"card-thirdparty-unavailable"}),Gu().createElement("span",{className:"ne-thirdparty-unavailable-info"},sc("该卡片引入的链接无法访问："),t.getSrc()))}},{key:"_renderContent",value:function(e){var t="allow-forms allow-orientation-lock allow-presentation allow-same-origin allow-scripts";return lWe.includes(this.props.cardData.getType())||(t+=" allow-popups allow-downloads"),"taobao"===this.props.cardData.getType()?Gu().createElement("div",{className:"ne-thirdparty-video-box"},Gu().createElement("video",{controls:!0,className:"ne-thirdparty-video","data-testid":"ne-thirdparty-video"},Gu().createElement("source",{src:e}))):(e.startsWith("https://music.163.com/")&&Us.mobile&&(e=e.replace("https://music.163.com/","https://music.163.com/m/")),Gu().createElement("iframe",{className:"ne-thirdparty-iframe","data-testid":"ne-thirdparty-reader-iframe",sandbox:t,"data-src":e,frameBorder:0,allowFullScreen:!0,ref:this._iframeRef}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.focus!==t.focus?{focus:e.focus}:null}}])}(Yu.Component);function cWe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,sWe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function sWe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(sWe=function(){return!!e})()}Object.defineProperty(uWe,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{focus:!0,showIFrame:!0}});var dWe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=cWe(this,t,arguments),Object.defineProperty(e,"_inputRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"_submitRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"setCursorPosition",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=e._inputRef.current;t!==aM?t!==lM||n.setSelectionRange(n.value.length,n.value.length):n.setSelectionRange(0,0)}}),Object.defineProperty(e,"handleSubmit",{enumerable:!0,configurable:!0,writable:!0,value:function(t){t?e.props.onSubmit(t):mC.error(sc("请输入链接"))}}),Object.defineProperty(e,"getInputValue",{enumerable:!0,configurable:!0,writable:!0,value:function(){return e._inputRef.current.value}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){var e=this;ud(this,this._inputRef.current,"keydown",(function(t){var n=e._inputRef.current,r=n.selectionStart;if((Ks.isTab(t)||Ks.isEnter(t))&&(t.preventDefault(),t.stopPropagation()),!Ks.isEnter(t))return(Ks.isArrowLeft(t)||Ks.isArrowUp(t))&&0===r?(t.preventDefault(),void e.props.onExitCardByKeyboard(aM)):(Ks.isArrowRight(t)||Ks.isArrowDown(t))&&r===n.value.length?(t.preventDefault(),void e.props.onExitCardByKeyboard(lM)):void 0;e.handleSubmit(e.getInputValue())})),ud(this,this._submitRef.current,"click",(function(){e.handleSubmit(e.getInputValue())})),this.props.focus&&this._inputRef.current.focus()}},{key:"componentDidUpdate",value:function(e){this.props.focus&&!e.focus&&this._inputRef.current.focus()}},{key:"render",value:function(){var e=this,t=this.props.cardData.getDetail(),n=t.example,r=t.placeholder,o=t.help;return Gu().createElement("div",{className:"ne-thirdparty-creator-wrap","data-testid":"ne-thirdparty-writer-status"},Gu().createElement("div",{className:"ne-thirdparty-creator-form"},Gu().createElement("span",{className:"ne-thirdparty-creator-input"},Gu().createElement("input",{"data-role":"url","data-testid":"ne-thirdparty-writer-input",placeholder:r,spellCheck:"false",autoComplete:"off",ref:this._inputRef})),Gu().createElement("span",{className:"ne-thirdparty-creator-button"},n&&Gu().createElement("button",{type:"button",className:"ne-thirdparty-creator-example-button","data-role":"example","data-testid":"ne-thirdparty-writer-example-button",onMouseDown:function(e){return e.preventDefault()},onClick:function(){e.handleSubmit(n)}},sc("查看示例")),o&&Gu().createElement("a",{href:o,className:"ne-thirdparty-creator-help",target:"_blank",onClick:function(t){t.preventDefault(),t.stopPropagation(),e.props.visitLink(o,!0)}},sc("查看帮助")),Gu().createElement("button",{type:"button",className:"ant-btn ant-btn-primary","data-role":"submit","data-testid":"ne-thirdparty-writer-sure-button",ref:this._submitRef},Gu().createElement("span",null,sc("确定"))))))}}])}(Yu.Component);function fWe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,hWe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function hWe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(hWe=function(){return!!e})()}Object.defineProperty(dWe,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{focus:!1,onSubmit:function(){},onExitCardByKeyboard:function(){}}});var pWe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=fWe(this,t,arguments),Object.defineProperty(e,"_writerRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"setCursorPosition",value:function(e){this._writerRef.current&&this._writerRef.current.setCursorPosition()}},{key:"render",value:function(){return this.props.cardData.getSrc()?this.renderReader():this.renderWriter()}},{key:"renderReader",value:function(){return Gu().createElement(uWe,{cardData:this.props.cardData,showIFrame:this.props.showIFrame})}},{key:"renderWriter",value:function(){var e=this;return Gu().createElement(dWe,{visitLink:this.props.visitLink,ref:this._writerRef,focus:this.props.focus,cardData:this.props.cardData,onSubmit:function(t){e.props.onSubmit(t)},onExitCardByKeyboard:this.props.onExitCardByKeyboard})}}])}(Yu.Component);function vWe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vWe=function(){return!!e})()}function mWe(e){return function(e){function t(){var e;return(0,Ke.A)(this,t),e=function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,vWe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,arguments),Object.defineProperty(e,"uiViewProxy",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"timeId",{enumerable:!0,configurable:!0,writable:!0,value:-1}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"onSubmit",value:function(){}},{key:"onReady",value:function(){var e=this;this.timeId=setTimeout((function(){e.uiViewProxy.rerender({showIFrame:!0})}),20)}},{key:"onExitCardByKeyboard",value:function(e){}},{key:"init",value:function(){var e=this;this.uiViewProxy=Vye.render(pWe,{visitLink:function(t,n){e.editor.emitEvent("visitLink",t,n)},cardData:this.cardData,showIFrame:!1,focus:!1,$onReady:function(){e.onReady()},onSubmit:function(t){e.emit("submit",t),e.onSubmit()},onExitCardByKeyboard:function(t){e.onExitCardByKeyboard(t)}},this.containerNode)}},{key:"destroy",value:function(){this.uiViewProxy&&(this.uiViewProxy.destroy(),this.uiViewProxy=null),clearTimeout(this.timeId),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}}])}(e)}Object.defineProperty(pWe,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{onSubmit:function(){},showIFrame:!0}});var gWe=mWe;function bWe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,yWe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function yWe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(yWe=function(){return!!e})()}var wWe=function(e){function t(e){var n;(0,Ke.A)(this,t);for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return n=bWe(this,t,[].concat(o)),Object.defineProperty(n,"_ui",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"editor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n.editor=e,n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e=this;this.pluginOption.editUI&&(t.$EditableCardUI=this.pluginOption.editUI),this._ui=this.editor.createCardUI(this),this._ui.on("submit",(function(t){var n=xre.matchURL(t,e.pluginOption.services);n?(e.cardData.setSrc(n.validUrl),e.cardData.setType(n.Service.getName()),e.cardData.sync(!1)):mC.error(sc("暂不支持显示该网站内容"))})),this._ui.on("thirdpartyToLink",(function(){e.plugin.thirdpartyToLink(e.id,e.cardData.getSrc())})),this._ui.on("openLinkBtnClick",(function(){e.plugin.requestOpenLink(e.cardData.getSrc())}))}},{key:"destroy",value:function(){this._ui.destroy(),this._ui=null}}])}(Fy);function AWe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,kWe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function kWe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(kWe=function(){return!!e})()}Object.defineProperty(wWe,"$LAZY_INIT",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(wWe,"$EditableCardUI",{enumerable:!0,configurable:!0,writable:!0,value:mWe(zh()())}),Object.defineProperty(wWe,"$CardData",{enumerable:!0,configurable:!0,writable:!0,value:Rre});var _We=function(e){function t(){var e;return(0,Ke.A)(this,t),e=AWe(this,t,arguments),Object.defineProperty(e,"_linkToThirdparty",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=(t.attrs||{}).src;if(n){var r=Rre.createBy(n,e.option.services);r&&e.editor.execCommand("linkToThirdparty",t.attrs.id,r)}}}),Object.defineProperty(e,"_extendLinkHandler",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=t.src;return n&&xre.matchURL(n,e.option.services)?{type:"button",name:"linkToThirdparty",icon:"card-tb-embed-view",tooltip:sc("嵌入页面"),onClick:function(t){e._linkToThirdparty(t)}}:null}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){var n=this;t.registerBlockCard(this,hte.cardName,{factory:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return vl(wWe,[e].concat(n))}}),e.onPluginEvent("insertCardByUI",(function(t){var r=t.name,o=(Ore.yuque,function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(Ore,["yuque"]));Object.assign(Object.assign({},o),n.option.services||{})[r]&&e.execCommand("insertCard",hte.cardName,Rre.getInitCardValue({entrance:r}),!0)})),e.onPluginEvent("bookmarkToThirdparty",(function(e){var t=e.cardId,r=e.url;n.editor.execCommand("deleteCard",t),n.editor.execCommand("insertCard","thirdparty",Rre.createBy(r,n.option.services))})),this.registerAllCardSelect(e)}},{key:"afterInit",value:function(){var e=this.renderer.getService(TBe.ID);null==e||e.extendLinkToolbar(this._extendLinkHandler)}},{key:"registerAllCardSelect",value:function(e){var t;null===(t=e.getService(xEe.ID))||void 0===t||t.registerCardSelect(hte.cardSelect.thirdparty,{type:"SubMenu",icon:"card-thirdparty",label:sc("第三方服务")});var n=Object.assign(Object.assign({},Ore),this.option.services||{});Object.keys(n).forEach((function(t){var r;if(t!==hte.cardSelect.thirdparty){var o=n[t];if(o){var i=o.getCardSelect();i&&(null===(r=e.getService(xEe.ID))||void 0===r||r.registerCardSelect(t,i))}}}))}},{key:"requestOpenLink",value:function(e){this.editor.emitEvent("openThirdpartyLink",e)}},{key:"thirdpartyToLink",value:function(e,t){this.editor.execCommand("cardToLink",e,t)}}])}(Fh);function CWe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,NWe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function NWe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(NWe=function(){return!!e})()}Object.defineProperty(_We,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:hte.pluginName}),Object.defineProperty(_We,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:Vre});var OWe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=CWe(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Dy);function xWe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,EWe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function EWe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(EWe=function(){return!!e})()}Object.defineProperty(OWe,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze("ITOCKernelService")});var DWe=function(e){function t(){return(0,Ke.A)(this,t),xWe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"isTocVisible",value:function(){var e;return!!(null===(e=this.plugin._tocSidebar)||void 0===e?void 0:e.getPinStatus())}},{key:"destroy",value:function(){}}])}(OWe),PWe="ne_lakex_user_toc_pin_local_store_key",RWe={enable:!0,normalView:!0,allowModifyHash:!0},SWe=function(){return(0,$e.A)((function e(t){if((0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Object.assign(Object.assign({},RWe),t),void 0===(null==t?void 0:t.normalView)){var n=localStorage.getItem(PWe);this._option.normalView=null===n||!!Number(n)}}),[{key:"isEnabled",value:function(){return this._option.enable}},{key:"isDefaultNormalView",value:function(){return this._option.normalView}},{key:"isAllowModifyHash",value:function(){return this._option.allowModifyHash}}])}();function TWe(e,t,n){if(!(null==e?void 0:e.length))return[];var r=function(e,t,n){var r={id:"",text:"",depth:0,children:[],nodeMap:{},collapsed:!1};n||(n={});var o=r;return e.forEach((function(e){var t=e.depth;t<1&&(t=1);var i=e.id,a={id:i,text:e.text,depth:t,collapsed:!!n[i],children:[]};if(r.nodeMap[i]=a,o.depth===t)a.parent=o.parent,o.parent.children.push(a);else if(o.depth<t)a.parent=o,o.children.push(a);else{for(;o.depth>=t;)o=o.parent;a.parent=o,o.children.push(a)}o=a,a.parent.collapsed&&(a.collapsed=!0)})),r}(e,0,n),o=r.nodeMap,i=[],a={};if(r.children.forEach((function(e){jWe(e,i,a)})),null!==t&&o[t])if(a[t])o[t].selected=!0;else for(var l=o[t];l=l.parent;)if(a[l.id]){l.selected=!0;break}return i}function jWe(e,t,n){var r,o=e.children,i=e.collapsed;t.push(e),n[e.id]=!0,e.hasChild=!!o.length,e.hasChild||(e.collapsed=!1),0!==(null===(r=e.parent)||void 0===r?void 0:r.depth)&&(e.isChild=!0),e.hasChild&&(e.parent._needMarkIndent=!0),i||0===o.length||o.forEach((function(e){jWe(e,t,n)}))}function IWe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,BWe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function BWe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(BWe=function(){return!!e})()}Object.defineProperty(SWe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"toc"});var MWe=function(e){function t(e){var n,r=e.scrollNode,o=e.contentNode,i=e.tocViewportNode,a=e.tocData,l=e.offsetTop;(0,Ke.A)(this,t),n=IWe(this,t),Object.defineProperty(n,"_scrollNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_contentNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_tocViewportNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_tocData",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_scrollTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"_outsideCheckStatus",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(n,"_offsetTop",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(n,"_ignoreScrollOnce",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(n,"_checkHandler",{enumerable:!0,configurable:!0,writable:!0,value:function(){n._scrollTimer||(n._ignoreScrollOnce?n._ignoreScrollOnce=!1:n._scrollTimer=setTimeout((function(){n._scrollTimer=null,n._check()}),300))}}),n._scrollNode=r,n._contentNode=o,n._tocViewportNode=i,n._tocData=a,n._offsetTop=l;var u=r;return r===document.scrollingElement&&(u=document),pc(n,u,"scroll",n._checkHandler,{passive:!0}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"enableOutsideCheck",value:function(){this._outsideCheckStatus=!0}},{key:"disableOutsideCheck",value:function(){this._outsideCheckStatus=!1}},{key:"destroy",value:function(){}},{key:"reset",value:function(){this._checkHandler()}},{key:"ignoreScrollOnce",set:function(e){this._ignoreScrollOnce=e}},{key:"update",value:function(e){this._tocData=e,this._check()}},{key:"_check",value:function(){var e={};this._outsideCheckStatus?(e.outside=this._checkOutside(),e.outside||(e.current=this._checkIndex())):e.current=this._checkIndex(),this.emit("change",e)}},{key:"_getViewportRect",value:function(){if(this._scrollNode===document.scrollingElement)return{top:this._offsetTop,left:0,bottom:window.innerHeight,right:window.innerWidth,height:window.innerHeight,width:window.innerWidth};var e=this._scrollNode.getBoundingClientRect();return{top:e.top+this._offsetTop,left:e.left,bottom:e.bottom,right:e.right,height:e.height-this._offsetTop,width:e.width}}},{key:"_checkOutside",value:function(){if(this._scrollNode===document.scrollingElement){var e=this._contentNode.getBoundingClientRect(),t=this._getViewportRect();if(e.bottom<=t.top||e.top>=t.bottom)return!0}return!1}},{key:"_checkIndex",value:function(){var e,t=null===(e=this._tocData)||void 0===e?void 0:e.length;if(!t)return null;var n=this._getViewportRect(),r=Math.ceil(n.height/3),o={top:n.top,bottom:n.top+r,height:r},i=FWe(o,this._contentNode,this._tocData,0,t-1);i=function(e,t,n,r){if(-1===r)return r;var o=r-1,i=UWe(t,n[r].id);return i&&o>=0&&i.top-e.top>e.height/2?o:r}(o,this._contentNode,this._tocData,i);var a=this._tocData[i];return a?a.id:null}}])}(it);function FWe(e,t,n,r,o){bt(r<=o,"plugins/toc/src/common/toc-watcher.ts:188");var i=Math.ceil((o+r)/2),a=UWe(t,n[i].id);if(!a)return-1;var l=a.top,u=a.bottom;return l>=e.top&&l<e.bottom?LWe(e,t,n,i):r===o?l>=e.bottom?r-1>=0?r-1:-1:(e.top,r):l>=e.bottom?FWe(e,t,n,r,Math.max(i-1,r)):u<=e.top?FWe(e,t,n,Math.min(i+1,o),o):i}function LWe(e,t,n,r){if(0===r)return r;var o=r-1,i=UWe(t,n[o].id);return i&&i.bottom<=e.top?r:LWe(e,t,n,o)}function UWe(e,t){var n=e.querySelector('[id="'.concat(t,'"]'));return n?n.getBoundingClientRect():null}function VWe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return HWe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?HWe(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function HWe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function zWe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,WWe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function WWe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(WWe=function(){return!!e})()}var qWe=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=zWe(this,t,[e]),Object.defineProperty(n,"_tocRootRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(n,"_tocContentRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(n,"_scrollNodeRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(n,"_tocWatcher",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"_clearChangeEvent",{enumerable:!0,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(n,"state",{enumerable:!0,configurable:!0,writable:!0,value:{selected:null,allowNormalView:!1!==n.props.initNormalView}}),Object.defineProperty(n,"_collapsedMap",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(n,"setNormalViewStatus",{enumerable:!0,configurable:!0,writable:!0,value:function(e){"boolean"==typeof e&&e!==n.state.allowNormalView&&n._toggleNormalViewStatus(e)}}),e.onRef&&e.onRef(n),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){var e=this,t={scrollNode:this.props.scrollNode,contentNode:this.props.contentNode,tocViewportNode:this._tocRootRef.current.parentNode,tocData:this.props.toc,offsetTop:this.props.offsetTop};this._tocWatcher=new MWe(t),this.props.checkOutside&&this._tocWatcher.enableOutsideCheck();var n=function(){var t;null===(t=e._tocWatcher)||void 0===t||t.reset()};this.props.eventEmitter.on("change",n),this._clearChangeEvent=function(){e.props.eventEmitter.off("change",n)},this._tocWatcher.on("change",(function(t){var n=t.current;e._reset(n),e.props.eventEmitter.emit("tocStatusChange",t)})),this.props.eventEmitter.emit("pinStatusChange",this.state.allowNormalView)}},{key:"componentWillUnmount",value:function(){this.props.onRef&&this.props.onRef(null),this._tocWatcher&&(this._tocWatcher.destroy(),this._tocWatcher=null,this._clearChangeEvent())}},{key:"componentDidUpdate",value:function(e){var t;e.toc!==this.props.toc&&(null===(t=this._tocWatcher)||void 0===t||t.update(this.props.toc))}},{key:"toggleViewStatus",value:function(){this._toggleNormalViewStatus(!this.state.allowNormalView)}},{key:"render",value:function(){var e=this,t=this.props.toc,n=this.state.allowNormalView,r=TWe(t,this.state.selected,this._collapsedMap),o=n?"ne-toc-normal-view":"ne-toc-small-view",i=this._getAllNeedFoldId(r,[]),a=0===i.length;return Gu().createElement("div",{ref:this._tocRootRef,onMouseDown:function(e){e.stopPropagation()},className:Uf("ne-toc-view",o,this.props.className)},Gu().createElement("div",{className:"ne-toc-pin"},Gu().createElement("span",{className:"ne-toc-pin-text"},sc("大纲")),this.props.noVisibleChange?null:Gu().createElement(Qx,{trigger:"hover",title:sc(n?"隐藏大纲":"显示大纲"),overlayClassName:"ne-toc-pin-tooltip",mouseEnterDelay:.35},Gu().createElement("div",{className:"ne-toc-pin-wrap",onClick:function(){return e._toggleNormalViewStatus(void 0,!0)}},Gu().createElement(SC,{type:n?"toc-hide":"toc-eye",size:16}))),this._needFold(r)&&Gu().createElement(Qx,{trigger:"hover",title:sc(a?"全部展开":"全部折叠"),overlayClassName:"ne-toc-pin-tooltip",mouseEnterDelay:.35},Gu().createElement("div",{className:"ne-toc-fold-wrap",onClick:function(){return e._toggleAllFold(a,i)}},Gu().createElement(SC,{type:a?"toc-unfold":"toc-fold",size:16})))),t&&t.length>0?this._renderToc(r):this._renderPlaceholder(r))}},{key:"_renderPlaceholder",value:function(e){return Gu().createElement("div",{className:"ne-toc-placeholder"},Gu().createElement("div",{className:"ne-toc-placeholder-ind",style:{backgroundImage:"url(".concat(Fw["ne-toc-placeholder-ind"],")")}}),this._renderToc(e))}},{key:"_renderToc",value:function(e){var t=this,n=this.props.onClick,r=e.map((function(e,r){var o=e.id,i=e.text,a=e.depth,l=[e.selected?"ne-toc-selected":null,e.hasChild?"ne-toc-parent-item":null,e.isChild?"ne-toc-child-item":null];return Gu().createElement("div",{key:"".concat(o,"-").concat(r),"data-id":o,className:Uf.apply(void 0,["ne-toc-item ne-toc-depth-".concat(a)].concat(l))},Gu().createElement("div",{className:"ne-toc-item-inner"},t._renderCollapse(e),Gu().createElement("div",{className:"ne-toc-item-text",onClick:function(e){e.preventDefault(),n(o),t._tocWatcher.ignoreScrollOnce=!0,t.setState({selected:o})},title:i},t._renderText(i,o))))}));return Gu().createElement("div",{className:"ne-toc-view-inner",ref:this._scrollNodeRef},Gu().createElement("div",{ref:this._tocContentRef,className:"ne-toc-content"},r))}},{key:"_renderText",value:function(e,t){var n=e;return e.includes("")&&(n=e.split("").map((function(e,t){return 0===t?Gu().createElement("span",{className:"prefix",key:"prefix"},e):e}))),n&&this.props.allowShowHash?Gu().createElement("a",{href:"#".concat(t)},n):n}},{key:"_renderCollapse",value:function(e){var t=this;if(!e.hasChild)return null;var n=e.collapsed?"ne-rotate-270":"";return Gu().createElement("div",{className:"ne-toc-fold-btn",onClick:function(n){n.preventDefault(),t._toggleFolding(e.id)}},Gu().createElement(SC,{className:n,type:"review-arrow-down",size:16}))}},{key:"_toggleAllFold",value:function(e,t){if(e)this._collapsedMap={};else{var n,r=VWe(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;this._collapsedMap[o]||(this._collapsedMap[o]=!0)}}catch(e){r.e(e)}finally{r.f()}}this.forceUpdate()}},{key:"_toggleFolding",value:function(e){this._collapsedMap[e]?delete this._collapsedMap[e]:this._collapsedMap[e]=!0,this.forceUpdate()}},{key:"_toggleNormalViewStatus",value:function(e,t){var n,r,o,i,a=this,l="boolean"==typeof e?e:!this.state.allowNormalView,u=document.querySelector(".ne-toc-pin-tooltip");this.props.eventEmitter.emit("pinStatusChange",l),t&&localStorage.setItem(PWe,Number(l)),l?(this.setState({allowNormalView:l}),null===(i=(o=this.props).onLayout)||void 0===i||i.call(o,{width:305})):(null===(r=null===(n=this._tocRootRef)||void 0===n?void 0:n.current)||void 0===r||r.classList.add("ne-force-hide"),null==u||u.setAttribute("ne-force-tooltip-hide","true"),setTimeout((function(){var e,t;a._tocRootRef.current&&(a._tocRootRef.current.classList.remove("ne-force-hide"),a.setState({allowNormalView:l}),null===(t=(e=a.props).onLayout)||void 0===t||t.call(e,{width:39}))}),0),setTimeout((function(){null==u||u.removeAttribute("ne-force-tooltip-hide")}),1e3))}},{key:"_reset",value:function(e){this.state.current!==e&&(e&&this._makeVisible(e),this.setState({selected:e}))}},{key:"_makeVisible",value:function(e){var t,n=null===(t=this._tocContentRef.current)||void 0===t?void 0:t.querySelector('.ne-toc-item[data-id="'.concat(e,'"]'));if(n){var r=this._scrollNodeRef.current.getBoundingClientRect(),o=n.getBoundingClientRect();(o.top<=r.top+10||o.bottom>=r.bottom-10)&&(this._scrollNodeRef.current.scrollTop+=o.top-(r.top+r.height/2))}}},{key:"_needFold",value:function(e){var t,n=VWe(e);try{for(n.s();!(t=n.n()).done;)if(t.value.hasChild)return!0}catch(e){n.e(e)}finally{n.f()}return!1}},{key:"_getAllNeedFoldId",value:function(e,t){var n,r,o=VWe(e);try{for(o.s();!(r=o.n()).done;){var i=r.value;(null===(n=i.children)||void 0===n?void 0:n.length)>0&&(this._collapsedMap[i.id]||t.push(i.id),this._getAllNeedFoldId(i.children,t))}}catch(e){o.e(e)}finally{o.f()}return t}}])}(Yu.Component);function $We(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,KWe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function KWe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(KWe=function(){return!!e})()}Object.defineProperty(qWe,"TYPE_NORMAL",{enumerable:!0,configurable:!0,writable:!0,value:"normal"}),Object.defineProperty(qWe,"TYPE_SMALL",{enumerable:!0,configurable:!0,writable:!0,value:"small"}),Object.defineProperty(qWe,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{type:qWe.TYPE_NORMAL,allowShowHash:!1,offsetTop:0,onClick:function(){},initNormalView:!0,onLayout:function(){}}});var YWe=function(e){function t(e,n,r,o){var i,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];(0,Ke.A)(this,t),i=$We(this,t),Object.defineProperty(i,"parentNode",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(i,"editor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_mountNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(i,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_view",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(i,"_pinStatus",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(i,"_hoverTimeout",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(i,"eventEmitter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_dispose",{enumerable:!0,configurable:!0,writable:!0,value:null}),i._option=o,i.editor=n,i.renderer=r;var l=new it;i.eventEmitter=l,i._pinStatus=i._option.isDefaultNormalView(),n.on("layoutChange",(function(){l.emit("change")})),r.on("typographyChange",(function(){l.emit("change")}));var u=i.editor.editorNode;return l.on("pinStatusChange",(function(e){var t,r,o,a;n.emitEvent("tocViewStatusChange",e),i._pinStatus=e,e?(null===(t=i._mountNode)||void 0===t||t.classList.remove("ne-small-toc-sidebar"),null===(r=i._mountNode)||void 0===r||r.classList.add("ne-normal-toc-sidebar"),null==u||u.classList.add("ne-normal-toc")):(null===(o=i._mountNode)||void 0===o||o.classList.add("ne-small-toc-sidebar"),null===(a=i._mountNode)||void 0===a||a.classList.remove("ne-normal-toc-sidebar"),null==u||u.classList.remove("ne-normal-toc"))})),a&&i.init(e,l),i}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){var n=this,r=document.querySelector("#siteTipGuide");this._mountNode=ad("div",{className:["ne-toc-sidebar",r?" skip-bottom":""]});var o=this._mountNode;this._mountNode.addEventListener("mouseenter",(function(){o.classList.remove("skip-bottom"),n._hoverTimeout=setTimeout((function(){o.classList.add("ne-toc-sidebar-hover"),n._hoverTimeout=null}),350)})),this._mountNode.addEventListener("mouseleave",(function(){n._hoverTimeout&&(clearTimeout(n._hoverTimeout),n._hoverTimeout=null),r&&o.classList.add("skip-bottom"),o.classList.remove("ne-toc-sidebar-hover")})),e.appendChild(this._mountNode),this._view=Vye.render(qWe,{toc:[],allowShowHash:this._option.isAllowModifyHash(),eventEmitter:t,scrollNode:this.editor.scrollNode,contentNode:this.editor.renderer.domRootNode,onClick:function(e){n.emit("tocPositionChange",e),n._scrollTo(e)},offsetTop:40,initNormalView:this._option.isDefaultNormalView()},this._mountNode)}},{key:"destroy",value:function(){this.removeAllListeners(),this._dispose&&(this._dispose.dispose(),this._dispose=null),this._mountNode&&(this._mountNode.remove(),Vye.unmount(this._mountNode))}},{key:"update",value:function(e){var t;null===(t=this._view)||void 0===t||t.rerender({toc:e})}},{key:"refresh",value:function(){var e,t,n;null===(n=null===(t=null===(e=this._view)||void 0===e?void 0:e.getReactRef())||void 0===t?void 0:t._tocWatcher)||void 0===n||n.reset()}},{key:"open",value:function(){var e;null===(e=this.editor.editorNode)||void 0===e||e.classList.add("ne-toc-visible")}},{key:"close",value:function(){var e;null===(e=this.editor.editorNode)||void 0===e||e.classList.remove("ne-toc-visible")}},{key:"toggle",value:function(){var e;null===(e=this.editor.editorNode)||void 0===e||e.classList.toggle("ne-toc-visible")}},{key:"getIsOpen",value:function(){var e;return!!(null===(e=this.editor.editorNode)||void 0===e?void 0:e.classList.contains("ne-toc-visible"))}},{key:"getPinStatus",value:function(){return this._pinStatus}},{key:"setNormalViewStatus",value:function(e){var t,n;null===(n=null===(t=this._view)||void 0===t?void 0:t.getReactRef())||void 0===n||n.setNormalViewStatus(e)}},{key:"toggleViewStatus",value:function(){var e,t;null===(t=null===(e=this._view)||void 0===e?void 0:e.getReactRef())||void 0===t||t.toggleViewStatus()}},{key:"_scrollTo",value:function(e){var t=this;this.renderer.scrollByNodeId(e),this._option.isAllowModifyHash()&&(location.hash=e);var n=this.renderer.domRootNode.querySelector('[id="'.concat(e,'"]'));if(n){var r=n.getBoundingClientRect(),o=this.editor.scrollNode.getBoundingClientRect();this._dispose=ss((function(){var e,i;(null===(i=null===(e=document.documentElement)||void 0===e?void 0:e.classList)||void 0===i?void 0:i.contains("layout-read-write"))?t.editor.scrollNode.scrollTop=Number(t.editor.scrollNode.scrollTop)+Number(r.top)-62-Number(n.clientHeight):t.editor.editorNode.classList.contains("layout-read-write")?t.editor.scrollNode.scrollTop+=r.top-42:t.editor.scrollNode.scrollTop+=r.top-o.top}))}}}])}(it);function GWe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,JWe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function JWe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(JWe=function(){return!!e})()}var XWe=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=GWe(this,t),Object.defineProperty(n,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:e}),n.plugin=e,n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(){this.plugin.toggleTocView()}}])}(gu),QWe=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_tocSidebar",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_prevPinStatus",{enumerable:!0,configurable:!0,writable:!0,value:null}),t&&this.setTOCSidebar(t)}),[{key:"setTOCSidebar",value:function(e){this._tocSidebar=e}},{key:"check",value:function(e,t){var n=e.curr.width;if(this._tocSidebar){var r=this._tocSidebar.getPinStatus(),o=localStorage.getItem(PWe),i=n>=905;if(o&&!t)return this._tocSidebar.setNormalViewStatus(!!Number(o));n<905&&r&&(this._prevPinStatus=!0,this._tocSidebar.setNormalViewStatus(!1)),i&&null!==this._prevPinStatus&&this._prevPinStatus&&!r&&(this._prevPinStatus=null,this._tocSidebar.setNormalViewStatus(!0))}}},{key:"checkIgnoreForce",value:function(e){this.check(e,!0)}}])}();function ZWe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,eqe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function eqe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(eqe=function(){return!!e})()}var tqe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=ZWe(this,t,arguments),Object.defineProperty(e,"_tocSidebar",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_tocCollapse",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_remove",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"handleCollapseChange",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n,r;t.visible?null===(n=e._tocSidebar)||void 0===n||n.close():null===(r=e._tocSidebar)||void 0===r||r.open()}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){this.option.isEnabled()&&e.registerCommand("toggleTocView",new XWe(this))}},{key:"afterInit",value:function(){var e=this;if(this.option.isEnabled()){var t=this.editor,n=this.renderer,r=[t.editorWrapNode.parentNode,t,n,this.option];this._tocSidebar=vl(YWe,r),this._tocCollapse=new QWe(this._tocSidebar),this._tocSidebar.on("tocPositionChange",(function(t){e.editor.emitPluginEvent("tocPositionChange",t)})),n.once("document.create",(function(){var t;null===(t=e._tocSidebar)||void 0===t||t.open()})),t.kernel.onPluginEvent("tocChange",Jbe()((function(t){var n;null===(n=e._tocSidebar)||void 0===n||n.update(t)}),1e3)),t.onPluginEvent("sidebarVisibleChange",(function(t){var n;t||null===(n=e._tocSidebar)||void 0===n||n.refresh()})),t.on("enterMaxView",(function(){var t;null===(t=e._tocSidebar)||void 0===t||t.close()})),t.on("leaveMaxView",(function(){var t;null===(t=e._tocSidebar)||void 0===t||t.open()})),t.onPluginEvent("viewSizeChange",(function(){var t,n;null===(n=e._tocCollapse)||void 0===n||(t=n).check.apply(t,arguments)})),t.onPluginEvent("viewSizeChangeIgnoreForce",(function(){var t;null===(t=e._tocCollapse)||void 0===t||t.checkIgnoreForce(arguments.length<=0?void 0:arguments[0])}))}}},{key:"destroy",value:function(){var e,n;null===(e=this._tocSidebar)||void 0===e||e.destroy(),Tr((0,Je.A)(t.prototype),"destroy",this).call(this),null===(n=this._remove)||void 0===n||n.call(this)}},{key:"openTocSidebar",value:function(){var e;null===(e=this._tocSidebar)||void 0===e||e.open()}},{key:"closeTocSidebar",value:function(){var e;null===(e=this._tocSidebar)||void 0===e||e.close()}},{key:"toggleTocSidebar",value:function(){var e;null===(e=this._tocSidebar)||void 0===e||e.toggle()}},{key:"toggleTocView",value:function(){var e;null===(e=this._tocSidebar)||void 0===e||e.toggleViewStatus()}},{key:"getToc",value:function(){return this.editor.kernel.requireService(cte.ID).getToc()}}])}(Fh);function nqe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,rqe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function rqe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rqe=function(){return!!e})()}Object.defineProperty(tqe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:"toc"}),Object.defineProperty(tqe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:SWe}),Object.defineProperty(tqe,"Service",{enumerable:!0,configurable:!0,writable:!0,value:DWe});var oqe=function(e){function t(){return(0,Ke.A)(this,t),nqe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getCustomCardValue",value:function(){var e=this._cardValue,t=(e.$name,e.$htmlStr,function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["$name","$htmlStr"]));return Object.keys(t).length?t:null}},{key:"setHtml",value:function(e){this._cardValue.$htmlStr=e}}],[{key:"getInitCardValue",value:function(e,t){return JSON.stringify(t),Object.assign({$name:e,$htmlStr:""},t)}}])}(Sl);function iqe(e,t){var n=document.createElement("div");n.className="ne-custom-card-fallback",n.appendChild(document.createTextNode("".concat(sc("卡片缺失"),": ").concat(t))),e.appendChild(n)}function aqe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,lqe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function lqe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(lqe=function(){return!!e})()}var uqe=function(e){function t(e){var n;(0,Ke.A)(this,t);for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return n=aqe(this,t,[].concat(o)),Object.defineProperty(n,"editor",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(n,"containerNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"$name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"reactProxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"updateCardValue",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t,r,o;JSON.stringify(e);var i=Object.assign({},n.cardData.getCardValue(),e);n.cardData.resetCardValue(i),n.cardData.setHtml((null===(r=(t=n.pluginOption.registry.getCards()[n.$name]).writeHtml)||void 0===r?void 0:r.call(t,i))||""),n.cardData.sync(!1),null===(o=n.reactProxy)||void 0===o||o.rerender({cardValue:n.cardData.getCustomCardValue()})}}),n.$name=n.cardData.getCardValue().$name,bt(n.$name,"custom block card node lack of '$name' property","plugins/custom-card/src/editor/e-block-node.ts:32"),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e,t=null===(e=this.pluginOption.registry.getCardOption(this.$name))||void 0===e?void 0:e.editorComponent;this.containerNode=document.createElement("div"),this.containerNode.className="ne-card-container",this.cardRootNode.appendChild(this.containerNode),t?this.reactProxy=Vye.render(t,{editor:this.editor,cardValue:this.cardData.getCustomCardValue(),updateCardValue:this.updateCardValue,cardType:"block"},this.containerNode):iqe(this.containerNode,this.$name)}},{key:"destroy",value:function(){this.containerNode&&(Gl().unmountComponentAtNode(this.containerNode),this.containerNode.remove()),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}}])}(Fy);function cqe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,sqe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function sqe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(sqe=function(){return!!e})()}Object.defineProperty(uqe,"$CardData",{enumerable:!0,configurable:!0,writable:!0,value:oqe});var dqe=function(e){function t(e){var n;(0,Ke.A)(this,t);for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return n=cqe(this,t,[].concat(o)),Object.defineProperty(n,"editor",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(n,"containerNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"$name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"reactProxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"updateCardValue",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t,r,o;JSON.stringify(e);var i=Object.assign({},n.cardData.getCardValue(),e);n.cardData.resetCardValue(i),n.cardData.setHtml((null===(r=(t=n.pluginOption.registry.getCards()[n.$name]).writeHtml)||void 0===r?void 0:r.call(t,i))||""),n.cardData.sync(!1),null===(o=n.reactProxy)||void 0===o||o.rerender({cardValue:n.cardData.getCustomCardValue()})}}),n.$name=n.cardData.getCardValue().$name,bt(n.$name,"custom inline card node lack of '$name' property","plugins/custom-card/src/editor/e-inline-node.ts:32"),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e,t=null===(e=this.pluginOption.registry.getCardOption(this.$name))||void 0===e?void 0:e.editorComponent;this.containerNode=document.createElement("div"),this.containerNode.className="ne-card-container",this.cardRootNode.appendChild(this.containerNode),t?this.reactProxy=Vye.render(t,{editor:this.editor,cardValue:this.cardData.getCustomCardValue(),updateCardValue:this.updateCardValue,cardType:"inline"},this.containerNode):iqe(this.containerNode,this.$name)}},{key:"destroy",value:function(){this.containerNode&&(Gl().unmountComponentAtNode(this.containerNode),this.containerNode.remove()),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}}])}(My);function fqe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,hqe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function hqe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(hqe=function(){return!!e})()}Object.defineProperty(dqe,"$CardData",{enumerable:!0,configurable:!0,writable:!0,value:oqe});var pqe=function(e){function t(){return(0,Ke.A)(this,t),fqe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this.kernel,n=e.getService(kRe.ID);n&&n.registerHotKey(CEe.slash.name,CEe.slash.keys,(function(n){if(t.queryCommandState("canInsertSlash")!==st){n.stop();var r=t.execCommand("insertSlash");e.emitPluginEvent("insertSlash:hotKey",r)}}))}}])}(Jg);function vqe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,mqe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function mqe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mqe=function(){return!!e})()}Object.defineProperty(pqe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:B2.pluginName});var gqe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=vqe(this,t,arguments),Object.defineProperty(e,"registeredCards",{enumerable:!0,configurable:!0,writable:!0,value:e.option.registry.getCards()}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t,n){var r=this;t.registerInlineCard(this,pie.cardName.customInline,{factory:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return vl(dqe,[e].concat(n))}}),t.registerBlockCard(this,pie.cardName.customBlock,{factory:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return vl(uqe,[e].concat(n))}}),Object.keys(this.registeredCards).forEach((function(t){var n,o=r.registeredCards[t].slash;o&&(null===(n=e.getService(xEe.ID))||void 0===n||n.registerCardSelect("custom-".concat(t),{type:"TextItem",icon:o.icon,mainSearch:o.mainSearch,name:t,label:o.label,description:o.description,keywords:o.keywords}))})),e.onPluginEvent("insertCardByUI",(function(t){var n=t.name.replace(/^custom-/,""),o=r.registeredCards[n];if(o){var i="inline"===o.cardType?pie.cardName.customInline:pie.cardName.customBlock;e.execCommand("insertCard",i,oqe.getInitCardValue(n,r.registeredCards[n].initValue),!0)}}))}}])}(Fh);function bqe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,yqe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function yqe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(yqe=function(){return!!e})()}Object.defineProperty(gqe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:pie.pluginName}),Object.defineProperty(gqe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:Rie});var wqe=function(e){function t(){var e;(0,Ke.A)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=bqe(this,t,[].concat(r)),Object.defineProperty(e,"containerNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"$name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"reactProxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"updateCardValue",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n;JSON.stringify(t);var r=Object.assign({},e.cardData.getCardValue(),t);e.cardData.resetCardValue(r),e.cardData.sync(!1),null===(n=e.reactProxy)||void 0===n||n.rerender({cardValue:e.cardData.getCustomCardValue()})}}),e.$name=e.cardData.getCardValue().$name,bt(e.$name,"viewer custom block card node lack of '$name' property","plugins/custom-card/src/viewer/v-block-node.ts:29"),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e,t=null===(e=this.pluginOption.registry.getCardOption(this.$name))||void 0===e?void 0:e.viewerComponent;this.containerNode=document.createElement("div"),this.containerNode.className="ne-card-container",this.cardRootNode.appendChild(this.containerNode),t?this.reactProxy=Vye.render(t,{viewer:this.viewer,cardValue:this.cardData.getCustomCardValue(),updateCardValue:this.updateCardValue,cardType:"block"},this.containerNode):iqe(this.containerNode,this.$name)}},{key:"destroy",value:function(){this.containerNode&&(Gl().unmountComponentAtNode(this.containerNode),this.containerNode.remove()),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}}])}(Mw);function Aqe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,kqe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function kqe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(kqe=function(){return!!e})()}Object.defineProperty(wqe,"$CardData",{enumerable:!0,configurable:!0,writable:!0,value:oqe});var _qe=function(e){function t(){var e;(0,Ke.A)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=Aqe(this,t,[].concat(r)),Object.defineProperty(e,"containerNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"$name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"reactProxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"updateCardValue",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n;JSON.stringify(t);var r=Object.assign({},e.cardData.getCardValue(),t);e.cardData.resetCardValue(r),e.cardData.sync(!1),null===(n=e.reactProxy)||void 0===n||n.rerender({cardValue:e.cardData.getCustomCardValue()})}}),e.$name=e.cardData.getCardValue().$name,bt(e.$name,"viewer custom inline card node lack of '$name' property","plugins/custom-card/src/viewer/v-inline-node.ts:29"),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e,t=null===(e=this.pluginOption.registry.getCardOption(this.$name))||void 0===e?void 0:e.viewerComponent;this.containerNode=document.createElement("div"),this.containerNode.className="ne-card-container",this.cardRootNode.appendChild(this.containerNode),t?this.reactProxy=Vye.render(t,{viewer:this.viewer,cardValue:this.cardData.getCustomCardValue(),updateCardValue:this.updateCardValue,cardType:"inline"},this.containerNode):iqe(this.containerNode,this.$name)}},{key:"destroy",value:function(){this.containerNode&&(Gl().unmountComponentAtNode(this.containerNode),this.containerNode.remove()),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}}])}(Bw);function Cqe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Nqe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Nqe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Nqe=function(){return!!e})()}Object.defineProperty(_qe,"$CardData",{enumerable:!0,configurable:!0,writable:!0,value:oqe});var Oqe=function(e){function t(){return(0,Ke.A)(this,t),Cqe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){e.registerBlockCard(this,pie.cardName.customBlock,wqe),e.registerInlineCard(this,pie.cardName.customInline,_qe)}}])}(Sw);function xqe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Eqe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Eqe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Eqe=function(){return!!e})()}Object.defineProperty(Oqe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:pie.pluginName}),Object.defineProperty(Oqe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:Qy(Rie)});var Dqe=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=xqe(this,t),Object.defineProperty(n,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(n,"_prevCtx",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"_index",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(n,"_replacing",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(n,"search",{enumerable:!0,configurable:!0,writable:!0,value:Qm()((function(e){var t,r,o;null===(t=n._prevCtx)||void 0===t||t.destroy(),null===(r=n._prevCtx)||void 0===r||r.off("change",n.handleSearchChange),n._prevCtx=null,e&&(n._prevCtx=n.doSearchContext(e),n._index=0,n._prevCtx.on("change",n.handleSearchChange),n._prevCtx.count>0&&(n.emit("change",{count:n._prevCtx.count,index:0}),n.emit("canReplace",n._prevCtx.jumpTo(n._index,!0)))),(null===(o=n._prevCtx)||void 0===o?void 0:o.count)||n.emit("clear")}),400)}),Object.defineProperty(n,"handleSearchChange",{enumerable:!0,configurable:!0,writable:!0,value:function(){if(n._replacing=!1,n._prevCtx){var e=n._prevCtx.count;n._index>=e&&(n._index=0),n.emit("change",{count:e,index:n._index}),n.emit("canReplace",n._prevCtx.jumpTo(n._index,!0))}}}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"doSearchContext",value:function(e){return this.renderer.getService(fBe.ID).onSearch(e)}},{key:"destroy",value:function(){var e;null===(e=this._prevCtx)||void 0===e||e.destroy(),this.renderer=null,this._prevCtx=null,this.removeAllListeners()}},{key:"getSearchContext",value:function(){return this._prevCtx}},{key:"selectNext",value:function(){if(this._prevCtx){this._index++,this._index>=this._prevCtx.count&&(this._index=0);var e=this._prevCtx.jumpTo(this._index);this.emit("indexChange",this._index,e)}}},{key:"selectPrev",value:function(){if(this._prevCtx){this._index--,this._index<0&&(this._index=this._prevCtx.count-1);var e=this._prevCtx.jumpTo(this._index);this.emit("indexChange",this._index,e)}}},{key:"replace",value:function(e){var t;this._replacing||(this._replacing=!0,null===(t=this._prevCtx)||void 0===t||t.replace(this._index,e))}},{key:"replaceAll",value:function(e){var t;null===(t=this._prevCtx)||void 0===t||t.replaceAll(e)}},{key:"clear",value:function(){var e,t;null===(e=this._prevCtx)||void 0===e||e.destroy(),null===(t=this._prevCtx)||void 0===t||t.off("change",this.handleSearchChange),this._prevCtx=null,this.emit("clear")}}])}(it);function Pqe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Rqe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Rqe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Rqe=function(){return!!e})()}var Sqe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Pqe(this,t,arguments),Object.defineProperty(e,"_inputRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){var e=this,t=this._inputRef.current,n=!1,r=null;this.props.autoFocus&&setTimeout((function(){var t;null===(t=e._inputRef.current)||void 0===t||t.focus()}),1),Us.safari||ud(this,t,"keydown",(function(e){n=e.keyCode===Ws})),ud(this,t,"keydown",(function(t){"Enter"===t.key&&(t.shiftKey?e.props.onPrev():e.props.onNext())})),ud(this,t,"compositionstart",(function(){n=!0})),ud(this,t,"compositionend",(function(t){var o=t.target.value;o!==r&&(r=o,n=!1,e.props.onChange(o))})),ud(this,t,"input",(function(t){n||(r=t.target.value,e.props.onChange(r))}))}},{key:"render",value:function(){return Gu().createElement("span",{className:"ant-input-affix-wrapper ne-ui-search-input"},Gu().createElement("input",{placeholder:this.props.placeholder,type:"text",className:"ant-input",ref:this._inputRef,onKeyUp:this.props.onInputKeyUp,defaultValue:this.props.value}),Gu().createElement("span",{className:"ne-ui-search-input-suffix"},this.props.suffix))}}])}(Yu.Component);function Tqe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,jqe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function jqe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(jqe=function(){return!!e})()}Object.defineProperty(Sqe,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{onChange:function(e){},onPrev:function(){},onNext:function(){},onInputKeyUp:function(e){}}});var Iqe=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=Tqe(this,t,[e]),Object.defineProperty(n,"_isReset",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(n,"state",{enumerable:!0,configurable:!0,writable:!0,value:{selectedIndex:0,matchCount:0,canReplace:!0,searchValue:"",replaceValue:"",activeKey:"search"}}),Object.defineProperty(n,"handleClose",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e,t,r,o;null===(t=(e=n.props).onClose)||void 0===t||t.call(e),null===(o=(r=n.props).afterClose)||void 0===o||o.call(r)}}),Object.defineProperty(n,"_handleTabChange",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n.setState({activeKey:e})}}),Object.defineProperty(n,"handleKeyUp",{enumerable:!0,configurable:!0,writable:!0,value:function(e){Ks.isEscape(e)&&(e.stopPropagation(),e.preventDefault(),n.handleClose())}}),Object.defineProperty(n,"_handleSearchChange",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n._isReset=!1,n.setState({searchValue:e}),n.props.onSearchTextChange(e)}}),Object.defineProperty(n,"_onReplaceTextChange",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n.setState({replaceValue:e.target.value})}}),Object.defineProperty(n,"_movePrev",{enumerable:!0,configurable:!0,writable:!0,value:function(){n._isReset?(n._isReset=!1,n.props.onSearchTextChange(n.state.searchValue)):n.props.searchContext.selectPrev()}}),Object.defineProperty(n,"_moveNext",{enumerable:!0,configurable:!0,writable:!0,value:function(){n._isReset?(n._isReset=!1,n.props.onSearchTextChange(n.state.searchValue)):n.props.searchContext.selectNext()}}),Object.defineProperty(n,"_handleReplaceClick",{enumerable:!0,configurable:!0,writable:!0,value:function(){n.props.searchContext.replace(n.state.replaceValue||"")}}),Object.defineProperty(n,"_handleReplaceAllClick",{enumerable:!0,configurable:!0,writable:!0,value:function(){n.props.searchContext.replaceAll(n.state.replaceValue||"")}}),e.searchText&&(n.state.searchValue=e.searchText),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.searchContext;sd(this,t,"change",(function(t){var n=t.count,r=t.index;e.setState({matchCount:n,selectedIndex:r})})),sd(this,t,"clear",(function(){e.setState({selectedIndex:0,matchCount:0})})),sd(this,t,"canReplace",(function(t){e.setState({canReplace:!!t})})),sd(this,t,"indexChange",(function(t,n){e.setState({selectedIndex:t,canReplace:!!n})}))}},{key:"render",value:function(){return Gu().createElement("div",{className:"ne-ui-toolbar-overlay ne-ui-search-container ".concat(this.props.themeSelector),style:Object.assign({},this.props.position)},Gu().createElement("div",{className:"ne-ui-search-panel"},Gu().createElement("div",{className:"ne-ui-search-panel-close-btn",onClick:this.handleClose},Gu().createElement(SC,{type:"close"})),Gu().createElement(aEe,{activeKey:this.state.activeKey,onChange:this._handleTabChange},Gu().createElement(aEe.TabPane,{tab:sc("查找"),key:"search"}),Gu().createElement(aEe.TabPane,{tab:sc("替换"),key:"replace"})),Gu().createElement("div",{className:"ne-ui-search-panel-content"},this.renderContent())))}},{key:"renderContent",value:function(){var e=this.state.canReplace,t="replace"===this.state.activeKey,n=t?Gu().createElement("label",null,sc("替换为"),Gu().createElement("span",{className:"ant-input-affix-wrapper ne-ui-replace-input"},Gu().createElement("input",{onKeyUp:this.handleKeyUp,type:"text",placeholder:sc("请输入"),onChange:this._onReplaceTextChange,value:this.state.replaceValue,className:"ant-input"}))):null,r=this.state.matchCount>0;return Gu().createElement("div",{className:"ne-ui-search-sub-panel"},Gu().createElement("div",{className:"ne-ui-search-panel-item"},Gu().createElement("label",null,sc("查找"),Gu().createElement(Sqe,{suffix:this._getSuffix(),onPrev:this._movePrev,onNext:this._moveNext,autoFocus:!0,placeholder:sc("请输入"),value:this.state.searchValue,onChange:this._handleSearchChange,onInputKeyUp:this.handleKeyUp})),n),Gu().createElement("div",{className:"ne-ui-search-panel-item ne-ui-search-panel-btns"},t?Gu().createElement(Mye,{onClick:this._handleReplaceAllClick,disabled:!r},sc("全部替换")):null,t?Gu().createElement(Mye,{onClick:this._handleReplaceClick,disabled:!r||!e},sc("替换")):null,Gu().createElement(Mye,{onClick:this._movePrev,disabled:0===this.state.matchCount},sc("上一个")),Gu().createElement(Mye,{onClick:this._moveNext,disabled:0===this.state.matchCount},sc("下一个"))))}},{key:"_getSuffix",value:function(){return 0===this.state.matchCount?"0":"".concat(this.state.selectedIndex+1,"/").concat(this.state.matchCount)}}])}(Yu.Component);Object.defineProperty(Iqe,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{onClose:function(){},onSearchTextChange:function(e){}}});var Bqe=function(){return(0,$e.A)((function e(t,n){var r=this;(0,Ke.A)(this,e),Object.defineProperty(this,"editor",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"service",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"_overlay",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"resetCancel",{enumerable:!0,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(this,"handleFocusChange",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e,t;r.editor.renderer.isFocus()?null===(e=r.service)||void 0===e||e.reset():(r.resetCancel(),null===(t=r.service)||void 0===t||t.shouldIgnoreAlways())}})}),[{key:"_getSearchText",value:function(e){return(e.queryCommandValue("text")||"").replace(/\n/g,"")}},{key:"_getSearchPanelPosition",value:function(){return{top:120,right:20}}},{key:"openSearchPanel",value:function(e,t,n){var r=this,o=this._getSearchText(e);this._overlay=aR.open({containerNode:t,targetNode:document.body,autoClose:!1,reactComponent:Gu().createElement(Iqe,{searchText:o,boxNode:e.editBox,afterClose:function(){r.closeSearchPanel()},scrollNode:e.renderer.scrollNode,searchContext:n,onSearchTextChange:function(e){n.search(e)},position:this._getSearchPanelPosition(),themeSelector:e.theme.getThemeSelector()}),closeCallback:function(){e.renderer.focus({preventScroll:!0}),n.clear()}}),o&&n.search(o),e.renderer.on("focusstatuschange",this.handleFocusChange)}},{key:"closeSearchPanel",value:function(){var e=this;this._overlay&&this._overlay.cancel(),this._overlay=null,this.editor.off("focusstatuschange",this.handleFocusChange),this.resetCancel=od((function(){var t;null===(t=e.service)||void 0===t||t.reset()}),100)}},{key:"handleSearchPanel",value:function(e,t,n){if(this._overlay)return this.closeSearchPanel();this.openSearchPanel(e,t,n)}},{key:"Overlay",get:function(){return this._overlay}}])}();function Mqe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Fqe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Fqe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Fqe=function(){return!!e})()}var Lqe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Mqe(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Yy);function Uqe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Vqe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Vqe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Vqe=function(){return!!e})()}Object.defineProperty(Lqe,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze(jse.service.IAutoScrollService)});var Hqe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Uqe(this,t,arguments),Object.defineProperty(e,"_utils",{enumerable:!0,configurable:!0,writable:!0,value:new Bqe(e.editor,e.editor.renderer.getService(Lqe.ID))}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e,t,n,r=this,o=this.editor.renderer.requireService(kRe.ID);o&&o.registerHotKey(CEe.openSearchPanel.name,Us.desktop||(null===(n=null===(t=null===(e=this.editor)||void 0===e?void 0:e.renderer)||void 0===t?void 0:t.option)||void 0===n?void 0:n.virtualRendering)?["cmd","F"]:CEe.openSearchPanel.keys,(function(e){e.stop(),r._utils.handleSearchPanel(r.editor,r.editor.overlayContainer,r.pluginContext)}))}},{key:"onEvent",value:function(e){bt("click"===e,"plugins/search/src/editor/search-toolbar-descriptor.ts:47"),this._utils.handleSearchPanel(this.editor,this.editor.overlayContainer,this.pluginContext)}},{key:"getInitUIState",value:function(){return{disabled:this.disabled,icon:"t-searchreplace",className:"ne-ui-toolbar-search",tooltip:MEe.getTooltip(this.editor,CEe.openSearchPanel.text,CEe.openSearchPanel.name)}}},{key:"getUIState",value:function(){return{disabled:this.disabled||!this.editor.queryCommandEnabled("search")}}},{key:"close",value:function(){var e;null===(e=this._utils.Overlay)||void 0===e||e.cancel()}}])}(MEe);function zqe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Wqe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Wqe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Wqe=function(){return!!e})()}Object.defineProperty(Hqe,"Type",{enumerable:!0,configurable:!0,writable:!0,value:"Button"});var qqe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=zqe(this,t,arguments),Object.defineProperty(e,"_pluginContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){this._pluginContext=new Dqe(this.renderer);var t=e.getService(jEe.ID);null==t||t.registerToolbarWidget(Iie.toolbar,{clazz:Hqe,pluginContext:this._pluginContext})}},{key:"destroy",value:function(){this._pluginContext.destroy(),this._pluginContext=null,Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}}])}(Fh);function $qe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Kqe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Kqe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Kqe=function(){return!!e})()}Object.defineProperty(qqe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:Iie.pluginName});var Yqe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=$qe(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),Object.defineProperty(e,"performance",{enumerable:!0,configurable:!0,writable:!0,value:new Jie}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Dy);function Gqe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Jqe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Jqe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Jqe=function(){return!!e})()}Object.defineProperty(Yqe,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze("IMonitorKernelService")});var Xqe=function(e){function t(){return(0,Ke.A)(this,t),Gqe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length)eae(t[0],this.plugin.option),tae(t[0],this.plugin.option);else{var r=t[0],o=t[1],i=t[2];this.kernel.emitEvent("monitorLog",{code:r,data:o,error:i})}}},{key:"destroy",value:function(){this.performance.destroy()}}])}(Yqe);function Qqe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Zqe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Zqe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Zqe=function(){return!!e})()}var e$e=function(e){function t(){return(0,Ke.A)(this,t),Qqe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t,n){this.option.enable&&(this.monitorCommandError(),this.monitorUserAction())}},{key:"monitorCommandError",value:function(){var e,t=this;(null===(e=this.option.errorMonitor)||void 0===e?void 0:e.enable)&&this.editor.on("commandExecuteError",(function(e){var n=e.error,r=e.detail;t.service.log({type:"error",name:"commandError",timestamp:Date.now(),data:{error:n,rank:1,commandName:r.commandName,args:r.args}})}))}},{key:"monitorUserAction",value:function(){var e,t=this;(null===(e=this.option.userMonitor)||void 0===e?void 0:e.enable)&&this.editor.on("userAction",(function(e){var n=e.type,r=e.name,o=e.source;switch(n){case"cardToolbar":t.service.log({type:"user",name:"miniToolbar",timestamp:Date.now(),data:{name:r,target:o}});break;case"insertCard":t.service.log({type:"user",name:"insertCard",timestamp:Date.now(),data:{name:r,source:o}});break;case"cardSelect":t.service.log({type:"user",name:"slash",timestamp:Date.now(),data:{name:r,source:o}});break;default:return}}))}}])}(Fh);function t$e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,n$e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function n$e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(n$e=function(){return!!e})()}Object.defineProperty(e$e,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:qie.pluginName}),Object.defineProperty(e$e,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:Gie}),Object.defineProperty(e$e,"Service",{enumerable:!0,configurable:!0,writable:!0,value:Xqe});var r$e="ne_lakex_user_color_local_store_key",o$e=function(e){function t(){return(0,Ke.A)(this,t),t$e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.extendMethods({updateUserColor:this.updateUserColors,getUserColors:this.getUserColors})}},{key:"updateUserColors",value:function(e){var t=this.getUserColors(),n=t.indexOf(e);-1!==n&&t.splice(n,1),t.push(e),t=t.slice(-10),localStorage.setItem(r$e,JSON.stringify(t))}},{key:"getUserColors",value:function(){var e=localStorage.getItem(r$e);return e?JSON.parse(e):[]}}])}(Fh);Object.defineProperty(o$e,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:Ise.pluginName});const i$e=function(e){var t=e.prefixCls,n=e.className,r=e.width,o=e.style;return Yu.createElement("h3",{className:nk()(t,n),style:(0,ek.A)({width:r},o)})},a$e=function(e){var t=function(t){var n=e.width,r=e.rows,o=void 0===r?2:r;return Array.isArray(n)?n[t]:o-1===t?n:void 0},n=e.prefixCls,r=e.className,o=e.style,i=e.rows,a=(0,ln.A)(Array(i)).map((function(e,n){return Yu.createElement("li",{key:n,style:{width:t(n)}})}));return Yu.createElement("ul",{className:nk()(n,r),style:o},a)},l$e=function(e){var t,n,r=e.prefixCls,o=e.className,i=e.style,a=e.size,l=e.shape,u=nk()((t={},(0,Ha.A)(t,"".concat(r,"-lg"),"large"===a),(0,Ha.A)(t,"".concat(r,"-sm"),"small"===a),t)),c=nk()((n={},(0,Ha.A)(n,"".concat(r,"-circle"),"circle"===l),(0,Ha.A)(n,"".concat(r,"-square"),"square"===l),(0,Ha.A)(n,"".concat(r,"-round"),"round"===l),n)),s="number"==typeof a?{width:a,height:a,lineHeight:"".concat(a,"px")}:{};return Yu.createElement("span",{className:nk()(r,u,c,o),style:(0,ek.A)((0,ek.A)({},s),i)})};var u$e=function(e){var t=function(t){var n=t.getPrefixCls,r=e.prefixCls,o=e.className,i=e.active,a=n("skeleton",r),l=(0,tx.A)(e,["prefixCls"]),u=nk()(a,"".concat(a,"-element"),(0,Ha.A)({},"".concat(a,"-active"),i),o);return Yu.createElement("div",{className:u},Yu.createElement(l$e,(0,ek.A)({prefixCls:"".concat(a,"-avatar")},l)))};return Yu.createElement(i_,null,t)};u$e.defaultProps={size:"default",shape:"circle"};const c$e=u$e;var s$e=function(e){var t=function(t){var n=t.getPrefixCls,r=e.prefixCls,o=e.className,i=e.active,a=n("skeleton",r),l=(0,tx.A)(e,["prefixCls"]),u=nk()(a,"".concat(a,"-element"),(0,Ha.A)({},"".concat(a,"-active"),i),o);return Yu.createElement("div",{className:u},Yu.createElement(l$e,(0,ek.A)({prefixCls:"".concat(a,"-button")},l)))};return Yu.createElement(i_,null,t)};s$e.defaultProps={size:"default"};const d$e=s$e;var f$e=function(e){var t=function(t){var n=t.getPrefixCls,r=e.prefixCls,o=e.className,i=e.active,a=n("skeleton",r),l=(0,tx.A)(e,["prefixCls"]),u=nk()(a,"".concat(a,"-element"),(0,Ha.A)({},"".concat(a,"-active"),i),o);return Yu.createElement("div",{className:u},Yu.createElement(l$e,(0,ek.A)({prefixCls:"".concat(a,"-input")},l)))};return Yu.createElement(i_,null,t)};f$e.defaultProps={size:"default"};const h$e=f$e;function p$e(e){return e&&"object"===(0,Gn.A)(e)?e:{}}var v$e=function(e){var t=function(t){var n=t.getPrefixCls,r=t.direction,o=e.prefixCls,i=e.loading,a=e.className,l=e.children,u=e.avatar,c=e.title,s=e.paragraph,d=e.active,f=e.round,h=n("skeleton",o);if(i||!("loading"in e)){var p,v,m,g=!!u,b=!!c,y=!!s;if(g){var w=(0,ek.A)((0,ek.A)({prefixCls:"".concat(h,"-avatar")},function(e,t){return e&&!t?{size:"large",shape:"square"}:{size:"large",shape:"circle"}}(b,y)),p$e(u));v=Yu.createElement("div",{className:"".concat(h,"-header")},Yu.createElement(l$e,w))}if(b||y){var A,k;if(b){var _=(0,ek.A)((0,ek.A)({prefixCls:"".concat(h,"-title")},function(e,t){return!e&&t?{width:"38%"}:e&&t?{width:"50%"}:{}}(g,y)),p$e(c));A=Yu.createElement(i$e,_)}if(y){var C=(0,ek.A)((0,ek.A)({prefixCls:"".concat(h,"-paragraph")},function(e,t){var n={};return e&&t||(n.width="61%"),n.rows=!e&&t?3:2,n}(g,b)),p$e(s));k=Yu.createElement(a$e,C)}m=Yu.createElement("div",{className:"".concat(h,"-content")},A,k)}var N=nk()(h,(p={},(0,Ha.A)(p,"".concat(h,"-with-avatar"),g),(0,Ha.A)(p,"".concat(h,"-active"),d),(0,Ha.A)(p,"".concat(h,"-rtl"),"rtl"===r),(0,Ha.A)(p,"".concat(h,"-round"),f),p),a);return Yu.createElement("div",{className:N},v,m)}return l};return Yu.createElement(i_,null,t)};v$e.defaultProps={avatar:!1,title:!0,paragraph:!0},v$e.Button=d$e,v$e.Avatar=c$e,v$e.Input=h$e,v$e.Image=function(e){var t=function(t){var n=t.getPrefixCls,r=e.prefixCls,o=e.className,i=e.style,a=n("skeleton",r),l=nk()(a,"".concat(a,"-element"),o);return Yu.createElement("div",{className:l},Yu.createElement("div",{className:nk()("".concat(a,"-image"),o),style:i},Yu.createElement("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:"".concat(a,"-image-svg")},Yu.createElement("path",{d:"M365.714286 329.142857q0 45.714286-32.036571 77.677714t-77.677714 32.036571-77.677714-32.036571-32.036571-77.677714 32.036571-77.677714 77.677714-32.036571 77.677714 32.036571 32.036571 77.677714zM950.857143 548.571429l0 256-804.571429 0 0-109.714286 182.857143-182.857143 91.428571 91.428571 292.571429-292.571429zM1005.714286 146.285714l-914.285714 0q-7.460571 0-12.873143 5.412571t-5.412571 12.873143l0 694.857143q0 7.460571 5.412571 12.873143t12.873143 5.412571l914.285714 0q7.460571 0 12.873143-5.412571t5.412571-12.873143l0-694.857143q0-7.460571-5.412571-12.873143t-12.873143-5.412571zM1097.142857 164.571429l0 694.857143q0 37.741714-26.843429 64.585143t-64.585143 26.843429l-914.285714 0q-37.741714 0-64.585143-26.843429t-26.843429-64.585143l0-694.857143q0-37.741714 26.843429-64.585143t64.585143-26.843429l914.285714 0q37.741714 0 64.585143 26.843429t26.843429 64.585143z",className:"".concat(a,"-image-path")}))))};return Yu.createElement(i_,null,t)};const m$e=v$e;function g$e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,b$e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function b$e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b$e=function(){return!!e})()}var y$e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=g$e(this,t,arguments),Object.defineProperty(e,"coverRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"getClassName",{enumerable:!0,configurable:!0,writable:!0,value:Xs("ne-card-bookmark")}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){var e,t=this.props.cardData.getDetail();return e=t?this.renderDetail(t):this.props.isLoadingError?this.renderError():this.renderWaiting(),Gu().createElement("div",{className:this.getClassName("card-view"),"data-testid":this.getClassName("card-view")},this._getBackgroundElement((null==t?void 0:t.image)||(null==t?void 0:t.icon)),e)}},{key:"_getCoverElement",value:function(e){var t=this;return"string"!=typeof e&&(e="https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*MfA2QIGNXcEAAAAAAAAAAAAAARQnAQ"),Gu().createElement("img",{ref:this.coverRef,src:yh.sanitizeUrl(e),referrerPolicy:"no-referrer",className:this.getClassName("cover-img"),"data-testid":this.getClassName("cover-img"),onError:function(){t.coverRef.current.src="https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*MfA2QIGNXcEAAAAAAAAAAAAAARQnAQ"}})}},{key:"_getBackgroundElement",value:function(e){return"string"!=typeof e?Gu().createElement("div",{className:this.getClassName("bg-empty")}):Gu().createElement("img",{src:yh.sanitizeUrl(e),referrerPolicy:"no-referrer",className:this.getClassName("bg")})}},{key:"renderDetail",value:function(e){var t=this,n=this._getCoverElement(e.image||e.icon),r=Gu().createElement("div",{className:this.getClassName("detail")},Gu().createElement("div",{className:this.getClassName("content")},n,Gu().createElement("div",{className:this.getClassName("body")},Gu().createElement("div",{className:this.getClassName("title"),"data-testid":this.getClassName("title")},e.title||sc("无标题")),e.desc&&Gu().createElement("div",{className:this.getClassName("desc"),"data-testid":this.getClassName("desc")},e.desc),Gu().createElement("div",{className:this.getClassName("belong"),"data-testid":this.getClassName("belong")},e.belong||e.url||"-"))));return this.props.clickable&&(r=Gu().createElement("a",{href:yh.sanitizeUrl(this.props.cardData.getSrc()),target:"_blank",onClick:function(e){"function"==typeof t.props.onOpenLink&&(e.preventDefault(),t.props.onOpenLink())}},r)),r}},{key:"renderError",value:function(){return Gu().createElement("div",{className:this.getClassName("error"),"data-testid":this.getClassName("error")},Gu().createElement("div",{className:this.getClassName("error-logo"),style:{backgroundImage:"url(".concat(Fw["h5-ne-card-bookmark-error-logo"],")")}}),Gu().createElement("div",{className:this.getClassName("error-text")},sc("链接解析失败，请重试")))}},{key:"renderWaiting",value:function(){return Gu().createElement("div",{className:this.getClassName("loading"),"data-testid":this.getClassName("loading")},Gu().createElement(m$e.Avatar,{active:!0,className:this.getClassName("skeleton-logo")}),Gu().createElement("div",{className:this.getClassName("skeleton-info")},Gu().createElement(m$e.Input,{active:!0,className:this.getClassName("skeleton-title")}),Gu().createElement(m$e.Input,{active:!0,className:this.getClassName("skeleton-desc")}),Gu().createElement(m$e.Input,{active:!0,className:this.getClassName("skeleton-desc")})))}}])}(Yu.Component);function w$e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,A$e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function A$e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(A$e=function(){return!!e})()}var k$e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=w$e(this,t,arguments),Object.defineProperty(e,"iconRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"getClassName",{enumerable:!0,configurable:!0,writable:!0,value:Xs("ne-card-bookmark")}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){var e,t=this.props.cardData.getDetail();return e=t?this.renderDetail(t):this.props.isLoadingError?this.renderError():this.renderWaiting(),Gu().createElement("div",{className:this.getClassName("title-view"),"data-testid":this.getClassName("title-view")},e)}},{key:"renderTitle",value:function(e){var t,n=this,r=e.title||sc("无标题"),o=Gu().createElement("div",{className:this.getClassName("title"),"data-testid":this.getClassName("title")},r);return t=this.props.clickable?Gu().createElement("a",{target:"_blank",href:yh.sanitizeUrl(this.props.cardData.getSrc()),onClick:function(e){"function"==typeof n.props.onOpenLink&&(e.preventDefault(),n.props.onOpenLink())}},o):o,Gu().createElement("div",{className:this.getClassName("title-wrapper")},t)}},{key:"renderDetail",value:function(e){var t=this,n=e.icon?Gu().createElement("img",{ref:this.iconRef,className:this.getClassName("icon"),"data-testid":this.getClassName("icon"),src:yh.sanitizeUrl(e.icon),onError:function(){t.iconRef.current.src="https://gw.alipayobjects.com/zos/bmw-prod/7b0840da-004b-4358-a7f3-a2488aab6412.svg"}}):Gu().createElement(SC,{className:this.getClassName("icon"),"data-testid":this.getClassName("icon"),type:"ext-default",size:20}),r=this.renderTitle(e);return Gu().createElement(Gu().Fragment,null,n,r)}},{key:"renderError",value:function(){return Gu().createElement("div",{className:this.getClassName("error"),"data-testid":this.getClassName("error")},Gu().createElement("div",{className:this.getClassName("tip")},sc("未能获取内容")))}},{key:"renderWaiting",value:function(){return Gu().createElement("div",{className:this.getClassName("loading"),"data-testid":this.getClassName("loading")},Gu().createElement("div",{className:this.getClassName("tip")},sc("内容加载中")+" ..."))}}])}(Yu.Component);function _$e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,C$e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function C$e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(C$e=function(){return!!e})()}var N$e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=_$e(this,t,arguments),Object.defineProperty(e,"coverRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"getClassName",{enumerable:!0,configurable:!0,writable:!0,value:Xs("h5-ne-card-bookmark")}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){var e,t=this.props.cardData.getDetail();return e=t?this.renderDetail(t):this.props.isLoadingError?this.renderError():this.renderWaiting(),Gu().createElement("div",{className:this.getClassName("card-view"),"data-testid":this.getClassName("card-view")},this._getBackgroundElement((null==t?void 0:t.image)||(null==t?void 0:t.icon)),e)}},{key:"_getCoverElement",value:function(e){var t=this;return"string"!=typeof e&&(e="https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*MfA2QIGNXcEAAAAAAAAAAAAAARQnAQ"),Gu().createElement("img",{ref:this.coverRef,src:yh.sanitizeUrl(e),referrerPolicy:"no-referrer",className:this.getClassName("cover-img"),onError:function(){t.coverRef.current.src="https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*MfA2QIGNXcEAAAAAAAAAAAAAARQnAQ"}})}},{key:"_getBackgroundElement",value:function(e){return"string"!=typeof e?Gu().createElement("div",{className:this.getClassName("bg-empty")}):Gu().createElement("img",{src:yh.sanitizeUrl(e),referrerPolicy:"no-referrer",className:this.getClassName("bg")})}},{key:"renderDetail",value:function(e){var t=this,n=this._getCoverElement(e.image||e.icon),r=Gu().createElement("div",{className:this.getClassName("detail")},Gu().createElement("div",{className:this.getClassName("content")},n,Gu().createElement("div",{className:this.getClassName("body")},Gu().createElement("div",{className:this.getClassName("title"),"data-testid":this.getClassName("title")},e.title||sc("无标题")),Gu().createElement("div",{className:this.getClassName("belong")},e.belong||e.url||"-"))));return this.props.clickable&&(r=Gu().createElement("a",{href:yh.sanitizeUrl(this.props.cardData.getSrc()),target:"_blank",onClick:function(e){"function"==typeof t.props.onOpenLink&&(e.preventDefault(),t.props.onOpenLink())}},r)),r}},{key:"renderError",value:function(){return Gu().createElement("div",{className:this.getClassName("error")},Gu().createElement("div",{className:this.getClassName("error-logo"),style:{backgroundImage:"url(".concat(Fw["h5-ne-card-bookmark-error-logo"],")")}}),Gu().createElement("div",{className:this.getClassName("error-text")},sc("链接解析失败，请重试")))}},{key:"renderWaiting",value:function(){return Gu().createElement("div",{className:this.getClassName("loading")},Gu().createElement(m$e.Avatar,{active:!0,className:this.getClassName("skeleton-logo")}),Gu().createElement("div",{className:this.getClassName("skeleton-info")},Gu().createElement(m$e.Input,{active:!0,className:this.getClassName("skeleton-title")}),Gu().createElement(m$e.Input,{active:!0,className:this.getClassName("skeleton-desc")})))}}])}(Yu.Component);function O$e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,x$e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function x$e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(x$e=function(){return!!e})()}var E$e=Us.mobile?N$e:y$e,D$e=function(e){function t(){return(0,Ke.A)(this,t),O$e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){return this.props.cardData.isTitleMode()?Gu().createElement(k$e,{cardData:this.props.cardData,isLoadingError:this.props.isLoadingError,clickable:this.props.clickable,onOpenLink:this.props.onOpenLink}):Gu().createElement(E$e,{cardData:this.props.cardData,isLoadingError:this.props.isLoadingError,clickable:this.props.clickable,onOpenLink:this.props.onOpenLink})}}])}(Yu.Component);function P$e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,R$e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function R$e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(R$e=function(){return!!e})()}var S$e=function(e){function t(){return(0,Ke.A)(this,t),P$e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){return Gu().createElement(D$e,{cardData:this.props.cardData,isLoadingError:this.props.isLoadingError,clickable:!1})}}])}(Yu.Component);function T$e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(T$e=function(){return!!e})()}var j$e=function(e){return function(e){function t(){var e;return(0,Ke.A)(this,t),e=function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,T$e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,arguments),Object.defineProperty(e,"uiViewProxy",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"isLoading",{enumerable:!0,configurable:!0,writable:!0,value:!e.cardData.hasDetail()}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){this._loadDetail(),this.uiViewProxy=Vye.render(S$e,{cardData:this.cardData,isLoadingError:!1},this.containerNode)}},{key:"destroy",value:function(){Gl().unmountComponentAtNode(this.containerNode),this.uiViewProxy=null,Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}},{key:"_loadDetail",value:function(){var e=this,t=this.cardData.getSrc();t&&!this.cardData.hasDetail()&&this.pluginOption.fetchDetailHandler(t).then((function(t){e.cardData.setDetail(t),e.cardData.sync(!0),e.isLoading=!1,e.plugin.editor.emitPluginEvent("bookmarkRendered",{id:e._cardID,success:!0})})).catch((function(){e.uiViewProxy.rerender({isLoadingError:!0}),e.isLoading=!1,e.plugin.editor.emitPluginEvent("bookmarkRendered",{id:e._cardID,success:!1})}))}}])}(e)};function I$e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,B$e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function B$e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(B$e=function(){return!!e})()}var M$e=function(e){function t(e){var n;(0,Ke.A)(this,t);for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return n=I$e(this,t,[].concat(o)),Object.defineProperty(n,"_ui",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"editor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n.editor=e,n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e=this;this.pluginOption.editBlockUI&&(t.$EditableCardUI=this.pluginOption.editBlockUI),this._ui=this.editor.createCardUI(this),this._ui.on("openLinkBtnClick",(function(){e.plugin.requestOpenLink(e.cardData.getSrc())})),this._ui.on("bookmarkToLink",(function(){var t=e.cardData.getSrc(),n=(e.cardData.getDetail()||{}).title;e.plugin.bookmarkToLink(e.id,t,n)})),this._ui.on("bookmarkToThirdparty",(function(){var t=e.cardData.getSrc();e.plugin.bookmarkToThirdparty(e.id,t)})),this._ui.on("changeMode",(function(t){t===Nae?e.plugin.toTitleMode(e):(e.cardData.setMode(t),e.cardData.sync(!1))}))}},{key:"sync",value:function(){return!this._ui.isLoading}},{key:"destroy",value:function(){this._ui.destroy()}}])}(Fy);Object.defineProperty(M$e,"$EditableCardUI",{enumerable:!0,configurable:!0,writable:!0,value:Hh.extend(j$e)}),Object.defineProperty(M$e,"$CardData",{enumerable:!0,configurable:!0,writable:!0,value:Pae});function F$e(e,t){return new Promise((function(n,r){ns({method:"get",url:e,data:{url:t},success:function(e){n(e.data)},error:function(e){r(e)}})}))}var L$e={fetchDetailHandler:null,pasteLinkConvert:!1},U$e=function(){return(0,$e.A)((function e(t){var n=this;(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchDetailHandler",{enumerable:!0,configurable:!0,writable:!0,value:function(e){return function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))}(n,void 0,void 0,Cc().mark((function t(){return Cc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._option.fetchDetailHandler){t.next=2;break}return t.abrupt("return",this._option.fetchDetailHandler(e));case 2:return t.abrupt("return",F$e(this._option.detailAction,e));case 3:case"end":return t.stop()}}),t,this)})))}}),this._option=Object.assign(Object.assign({},L$e),t)}),[{key:"isEnable",get:function(){return!!this._option.detailAction||!!this._option.fetchDetailHandler}},{key:"pasteLinkConvert",get:function(){return this._option.pasteLinkConvert}},{key:"editBlockUI",get:function(){return this._option.editBlockUI}},{key:"editInlineUI",get:function(){return this._option.editInlineUI}}])}();function V$e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,H$e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function H$e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(H$e=function(){return!!e})()}Object.defineProperty(U$e,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"bookmark"});var z$e=function(e){function t(){return(0,Ke.A)(this,t),V$e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"onEvent",value:function(e,t){this.editor.renderer.emitPluginEvent("insertBookmark")}},{key:"getInitUIState",value:function(){return{disabled:!1,icon:"note-bookmark",className:"ne-ui-toolbar-bookmark",tooltip:MEe.getTooltip(this.editor,sc("书签"))}}},{key:"getUIState",value:function(){var e=this.editor.kernel.queryCommandValue("selection");return{disabled:!e||e.isTableSelection||e.isCardSelection}}}])}(MEe);Object.defineProperty(z$e,"Type",{enumerable:!0,configurable:!0,writable:!0,value:"Button"});var W$e=["0.0.0.0","255.255.255.255",/^127\./,/^192\.168\./,/^10\./];function q$e(e){try{var t=new URL(e,"http://localhost").hostname;return!(!t||"localhost"===t||/^\d+\.\d+.\d+.\d+$/.test(t)&&W$e.some((function(e){return"string"==typeof e?e===t:e.test(t)})))}catch(e){return!1}}function $$e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($$e=function(){return!!e})()}var K$e=function(e){return function(e){function t(){var e;return(0,Ke.A)(this,t),e=function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,$$e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,arguments),Object.defineProperty(e,"uiViewProxy",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"isLoading",{enumerable:!0,configurable:!0,writable:!0,value:!e.cardData.hasDetail()}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){this._loadDetail(),this.uiViewProxy=Vye.render(S$e,{cardData:this.cardData,isLoadingError:!1},this.containerNode)}},{key:"destroy",value:function(){Gl().unmountComponentAtNode(this.containerNode),this.uiViewProxy=null,Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}},{key:"_loadDetail",value:function(){var e=this,t=this.cardData.getSrc();t&&!this.cardData.hasDetail()&&this.pluginOption.fetchDetailHandler(t).then((function(t){e.cardData.setDetail(t),e.cardData.sync(!0),e.isLoading=!1})).catch((function(){e.uiViewProxy.rerender({isLoadingError:!0}),e.isLoading=!1}))}}])}(e)};function Y$e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,G$e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function G$e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(G$e=function(){return!!e})()}var J$e=function(e){function t(e){var n;(0,Ke.A)(this,t);for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return n=Y$e(this,t,[].concat(o)),Object.defineProperty(n,"_ui",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"editor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n.editor=e,n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e=this;this.pluginOption.editInlineUI&&(t.$EditableCardUI=this.pluginOption.editInlineUI),this._ui=this.editor.createCardUI(this),this._ui.on("openLinkBtnClick",(function(){e.plugin.requestOpenLink(e.cardData.getSrc())})),this._ui.on("bookmarkToLink",(function(){var t=e.cardData.getSrc(),n=(e.cardData.getDetail()||{}).title;e.plugin.bookmarkToLink(e.id,t,n)})),this._ui.on("bookmarkToThirdparty",(function(){var t=e.cardData.getSrc();e.plugin.bookmarkToThirdparty(e.id,t)})),this._ui.on("changeMode",(function(t){bt(t!==Nae,"plugins/bookmark/src/editor/inline/bookmark-inline-card-node.ts:76"),t===Cae&&e.plugin.toCardMode(e)}))}},{key:"sync",value:function(){return!this._ui.isLoading}},{key:"destroy",value:function(){this._ui.destroy()}}])}(Fy);Object.defineProperty(J$e,"$EditableCardUI",{enumerable:!0,configurable:!0,writable:!0,value:Hh.extend(K$e)}),Object.defineProperty(J$e,"$CardData",{enumerable:!0,configurable:!0,writable:!0,value:Pae});var X$e=HR({pluginName:"bookmark",toolbar:"note-bookmark"});function Q$e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Z$e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Z$e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Z$e=function(){return!!e})()}var eKe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Q$e(this,t,arguments),Object.defineProperty(e,"_linkToBookmark",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=(t.attrs||{}).src;if(n){var r=(t.children||[]).map((function(e){return e.isTextNode()?e.data:""})).join("");e.editor.execCommand("linkToBookmark",t.attrs.id,Pae.createBy(n,r,Cae))}}}),Object.defineProperty(e,"_linkToBookmarkInline",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=(t.attrs||{}).src;if(n){var r=(t.children||[]).map((function(e){return e.isTextNode()?e.data:""})).join("");e.editor.execCommand("linkToBookmarkInline",t.attrs.id,Pae.createBy(n,r,Nae))}}}),Object.defineProperty(e,"_extendLinkHandler",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=t.src;return n&&q$e(n)?[{type:"button",name:"to-bookmark-title",icon:"card-tb-title-view",tooltip:sc("标题"),onClick:function(t){e._linkToBookmarkInline(t)}},{type:"button",name:"to-bookmark-card",icon:"card-tb-card-view",tooltip:sc("卡片"),onClick:function(t){e._linkToBookmark(t)}}]:null}}),Object.defineProperty(e,"_extendAppLinkHandler",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=t.src,r=t.viewNode;return n&&r&&r.isElement()&&q$e(n)?{icon:"editor-bookmark",text:sc("转为卡片"),onClick:function(){e._linkToBookmark(r)}}:null}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t,n){if(this.option.isEnable){t.registerBlockCard(this,"bookmark",{factory:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return vl(M$e,[e].concat(n))}}),t.registerInlineCard(this,"bookmarkInline",{factory:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return vl(J$e,[e].concat(n))}});var r=e.getService(jEe.ID);null==r||r.registerToolbarWidget(X$e.toolbar,z$e)}}},{key:"afterInit",value:function(){if(this.option.isEnable){this.registerLinkTextReadProxy();var e=this.renderer.getService(TBe.ID);null==e||e.extendAppLinkToolbar(this._extendAppLinkHandler),null==e||e.extendLinkToolbar(this._extendLinkHandler)}}},{key:"requestOpenLink",value:function(e){this.editor.emitEvent("openBookmarkLink",e)}},{key:"bookmarkToLink",value:function(e,t,n){this.editor.execCommand("cardToLink",e,t,n)}},{key:"bookmarkToThirdparty",value:function(e,t){t&&this.editor.emitPluginEvent("bookmarkToThirdparty",{cardId:e,url:t})}},{key:"toTitleMode",value:function(e){var t=e.id,n=e.cardData;n.setMode(Nae);var r=n.getCardValue();this.editor.execCommand("deleteCard",t),this.editor.execCommand("insertCard","bookmarkInline",r)}},{key:"toCardMode",value:function(e){this._toBlockViewMode(e,Cae)}},{key:"_toBlockViewMode",value:function(e,t){var n=e.id,r=e.cardData;r.setMode(t);var o=r.getCardValue();this.editor.execCommand("deleteCard",n),this.editor.execCommand("insertCard","bookmark",o)}},{key:"registerLinkTextReadProxy",value:function(){var e=this,t=this.kernel.getService(KJ.ID);t&&t.registerTextReadProxy((function(n,r,o){if(1===n.length&&n[0].url===r&&r===o&&e.option.pasteLinkConvert){var i=ar.createCard("bookmark",{src:t.transformURL(o),text:o},Dr());if(!i)return[];var a=!1,l=function(){e.editor.execCommand("cardToLink",i.id,o,o)},u=e.editor.onPluginEvent("bookmarkRendered",(function(e){var t=e.id,n=e.success;if(t===i.id)return a=n,n||l(),u()}));return setTimeout((function(){a||l()}),3e3),[i]}return[]}))}},{key:"sync",value:function(){return 0===this.cardNodes.filter((function(e){return!1===e.sync()})).length}}])}(Fh);Object.defineProperty(eKe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:X$e.pluginName}),Object.defineProperty(eKe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:U$e});var tKe=function(){function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"colorScheme",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"selector",{enumerable:!0,configurable:!0,writable:!0,value:"lakex-dark-theme-"}),Object.defineProperty(this,"style",{enumerable:!0,configurable:!0,writable:!0,value:null}),this.selector+=t}return(0,$e.A)(e,[{key:"colorRegister",get:function(){return e.colorRegister||(e.colorRegister=mu.colorRegistry.clone()),e.colorRegister}},{key:"apply",value:function(e){this.style=function(e){var t=document.querySelector("#".concat(e));if("style"!==(null==t?void 0:t.tagName.toLowerCase())){var n=document.createElement("style");return n.id=e,n}return t}(this.selector+this.colorScheme),this.style.innerText=this.colorRegister.toStyleValues(this.selector,this.colorScheme),this.style.parentNode!==document.body&&(this.style.remove(),document.body.appendChild(this.style)),e.classList.contains(this.selector)||e.classList.add(this.selector)}},{key:"remove",value:function(e){var t;(null===(t=this.style)||void 0===t?void 0:t.parentNode)&&this.style.remove(),e.classList.contains(this.selector)&&e.classList.remove(this.selector)}},{key:"getColor",value:function(e){var t=this.colorRegister.getColor(e);return(null==t?void 0:t[this.colorScheme])||(null==t?void 0:t[ou.LIGHT])?this.transform(ou.LIGHT,this.colorScheme,null==t?void 0:t[ou.LIGHT]):null}},{key:"transform",value:function(e,t,n){return this.colorRegister.transform(e,t,n)}}])}();Object.defineProperty(tKe,"colorRegister",{enumerable:!0,configurable:!0,writable:!0,value:null});var nKe=HR({pluginName:"darkMode"}),rKe=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_enable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._enable=!!t}),[{key:"isEnable",get:function(){return this._enable}}])}();function oKe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,iKe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function iKe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(iKe=function(){return!!e})()}Object.defineProperty(rKe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"darkMode"});var aKe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=oKe(this,t,arguments),Object.defineProperty(e,"_oldObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"current",get:function(){return this.editor.theme.getSchemeName()}},{key:"observe",value:function(e){this.editor.theme.on("themeChange",e)}},{key:"init",value:function(e){this.option.isEnable&&(this._oldObserver=SC.themeObserver,SC.themeObserver=this,e.theme.registerTheme("dark-mode",new tKe(ou.DARK)),e.theme.setActiveTheme("dark-mode"),this.updateInnerOverlay(e))}},{key:"updateInnerOverlay",value:function(e){var t,n,r,o,i=e.theme.getThemeSelector();(null===(n=null===(t=e.innerOverlayContainer)||void 0===t?void 0:t.classList)||void 0===n?void 0:n.contains(i))||null===(o=null===(r=e.innerOverlayContainer)||void 0===r?void 0:r.classList)||void 0===o||o.add(i)}},{key:"destroy",value:function(){Tr((0,Je.A)(t.prototype),"destroy",this).call(this),this.option.isEnable&&(SC.themeObserver=this._oldObserver)}}])}(Fh);Object.defineProperty(aKe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:nKe.pluginName}),Object.defineProperty(aKe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:rKe});var lKe=o(1151),uKe=o.n(lKe),cKe=o(2797),sKe=o.n(cKe);function dKe(e){var t=e.theme,n=e.schedule,r=e.colIndex,o=e.date,i=e.activeScheduleId,a=n.id===i,l=Ile[n.colorIndex];l||(l=Ile[0]);var u={borderColor:t.getColorByToken(a?l.line:l.border),backgroundColor:t.getColorByToken(a?l.line:l.background)},c={background:a?"#fff":t.getColorByToken(l.line)},s={borderRightColor:a?"#fff":t.getColorByToken(l.line)},d={borderLeftColor:a?"#fff":t.getColorByToken(l.line)},f=n.start===n.end,h=f;if(!f){var p=n.endDate.diff(o,Rle)+1,v=Math.min(Tle-r,p),m=v+(8*v-3),g=n.isStartDate(o),b=o.add(v-1,Rle);n.isEndDate(b)?(m-=g?6:1,h=!0):n.isStartDate(o)||(m+=5),u.width="calc(".concat(100*v,"% + ").concat(m,"px)")}return{lineStyle:u,labelStyle:c,leftArrowStyle:s,rightArrowStyle:d,isShowControl:h}}function fKe(e){var t=e.schedule,n=e.date,r=e.colIndex,o=t.isStartDate(n),i=n.add(Tle-r-1,Rle),a=t.endDate.isSameOrBefore(i),l=t.isEndDate(i);return a?o&&l?"leftTop":"rightTop":o?"leftTop":"rightTop"}function hKe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,pKe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function pKe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pKe=function(){return!!e})()}var vKe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=hKe(this,t,arguments),Object.defineProperty(e,"ref",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"ignoreSelectSchedule",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"isDragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"getClassName",{enumerable:!0,configurable:!0,writable:!0,value:Xs("ne-card-calendar-schedule-line")}),Object.defineProperty(e,"handleSelectSchedule",{enumerable:!0,configurable:!0,writable:!0,value:function(t){if(t.stopPropagation(),t.preventDefault(),e.ignoreSelectSchedule)e.ignoreSelectSchedule=!1;else{var n=e.props,r=n.schedule,o=n.activeScheduleId,i=n.dragScheduleId,a=n.resizeScheduleId,l=r.id;if(o===l){if(i||a)return;e.handleOpenSchedule(t)}else e.props.onSelect(l)}}}),Object.defineProperty(e,"handleOpenSchedule",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null==t||t.stopPropagation(),null==t||t.preventDefault();var r=fKe(e.props),o=e.ref.current.getBoundingClientRect(),i={x:0===r.indexOf("left")?o.left:o.right,y:o.top};e.props.onOpen(e.props.schedule,Object.assign(Object.assign({},i),{placement:r}),n)}}),Object.defineProperty(e,"handleBeforeDrag",{enumerable:!0,configurable:!0,writable:!0,value:function(t){e.isDragging=!0;var n={x:t.clientX,y:t.clientY};setTimeout((function(){e.isDragging&&e.props.onBeforeDrag(e.props.schedule,n)}),150)}}),Object.defineProperty(e,"handleClearDrag",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.isDragging=!1}}),Object.defineProperty(e,"handleBeforeResize",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.props.onBeforeResize(e.props.schedule)}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){this.props.newScheduleId===this.props.schedule.id&&this.handleOpenSchedule(void 0,!0)}},{key:"componentDidUpdate",value:function(e){var t=this;e.resizeScheduleId&&!this.props.resizeScheduleId?(this.ignoreSelectSchedule=!0,setTimeout((function(){t.ignoreSelectSchedule=!1}),0)):this.ignoreSelectSchedule=!1}},{key:"render",value:function(){var e,t,n=this.props,r=n.schedule,o=n.date,i=n.activeScheduleId,a=r.isStartDate(o),l=r.id===i,u=(t=dKe(e=this.props),e.dragScheduleId===e.schedule.id&&(t.lineStyle.opacity=0),t),c=u.lineStyle,s=u.labelStyle,d=u.leftArrowStyle,f=u.rightArrowStyle,h=u.isShowControl;return Gu().createElement("div",{className:this.getClassName(),ref:this.ref,style:c,"data-id":r.id,"data-active":l,"data-is-start":a,"data-line":"true","data-schedule-line":"true","data-control":String(h),onClick:this.handleSelectSchedule,onDoubleClick:this.handleOpenSchedule},a?Gu().createElement("div",{className:this.getClassName("label"),style:s}):Gu().createElement("div",{className:this.getClassName("right-arrow"),style:f}),Gu().createElement("div",{className:this.getClassName("title"),"data-not-title":!r.title,onMouseDown:this.handleBeforeDrag,onMouseUp:this.handleClearDrag},r.title||sc("添加日程标题")),h?Gu().createElement("div",{className:this.getClassName("control"),onMouseDown:this.handleBeforeResize}):Gu().createElement("div",{className:this.getClassName("left-arrow"),style:d}))}}])}(Yu.Component);function mKe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,gKe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function gKe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(gKe=function(){return!!e})()}var bKe=Cxe.Option,yKe=function(e){function t(e){var n,r,o,i,a,l;(0,Ke.A)(this,t),n=mKe(this,t,[e]),Object.defineProperty(n,"titleRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(n,"debounceSyncValue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"changeValueCount",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"getValue",{enumerable:!0,configurable:!0,writable:!0,value:function(){return{colorIndex:n.state.colorIndex,title:n.state.title,desc:n.state.desc,start:n.state.start,end:n.state.end}}}),Object.defineProperty(n,"handleClose",{enumerable:!0,configurable:!0,writable:!0,value:function(){n.changeValue({name:"title",value:n.state.title,debounce:!1}),n.changeValue({name:"desc",value:n.state.desc,debounce:!1}),n.props.onClose()}}),Object.defineProperty(n,"handleOverlayClose",{enumerable:!0,configurable:!0,writable:!0,value:function(e){!1===e&&n.props.onOverlayClose&&n.props.onOverlayClose()}}),Object.defineProperty(n,"syncValue",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t,r){(0!==n.changeValueCount||"title"!==e||t)&&(n.changeValueCount+=1,n.props.onChange({id:n.props.schedule.id,name:e,value:t,sync:r}))}}),Object.defineProperty(n,"changeValue",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t=e.name,r=e.value,o=e.debounce;"object"===(0,Gn.A)(t)?n.setState(t):n.setState((0,Ha.A)({},t,r)),o?n.debounceSyncValue(t,r,!1):n.syncValue(t,r)}}),Object.defineProperty(n,"handleChangeColorIndex",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n.changeValue({name:"colorIndex",value:e})}}),Object.defineProperty(n,"handleChangeTitle",{enumerable:!0,configurable:!0,writable:!0,value:function(e){return function(t){n.changeValue({name:"title",value:t.target.value,debounce:e})}}}),Object.defineProperty(n,"handleChangeDesc",{enumerable:!0,configurable:!0,writable:!0,value:function(e){return function(t){n.changeValue({name:"desc",value:t.target.value,debounce:e})}}}),Object.defineProperty(n,"handleChangeDate",{enumerable:!0,configurable:!0,writable:!0,value:function(e){if(e){var t=(0,tn.A)(e,2),r=t[0],o=t[1];r&&o&&n.changeValue({name:{start:Dle(r),startDate:r,end:Dle(o),endDate:o}})}}}),Object.defineProperty(n,"getClassName",{enumerable:!0,configurable:!0,writable:!0,value:Xs("ne-card-calendar-schedule-panel")}),Object.defineProperty(n,"renderTitle",{enumerable:!0,configurable:!0,writable:!0,value:function(){return n.renderItem(null,Gu().createElement(KP.TextArea,{className:n.getClassName("textarea","textarea-title"),"data-testid":n.getClassName("title"),ref:n.titleRef,placeholder:sc("添加日程标题"),autoSize:{minRows:1,maxRows:3},value:n.state.title||"",onPressEnter:n.handleClose,onChange:n.handleChangeTitle(!0),onBlur:n.handleChangeTitle(!1)}))}}),Object.defineProperty(n,"renderColorSelect",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=n.props.theme;return n.renderItem(null,Gu().createElement(Cxe,{className:n.getClassName("color-select"),value:n.state.colorIndex,getPopupContainer:function(e){return n.props.popupContainer||e.parentNode},defaultActiveFirstOption:!1,dropdownClassName:n.getClassName("color-select-dropdown"),dropdownMatchSelectWidth:!1,onChange:n.handleChangeColorIndex,onDropdownVisibleChange:n.handleOverlayClose,size:"small"},Ile.map((function(t,r){return Gu().createElement(bKe,{key:r,value:r},Gu().createElement("div",{className:n.getClassName("color-select-option")},Gu().createElement("div",{className:n.getClassName("color-select-option-status"),"data-selected":n.state.colorIndex===r,style:n.state.colorIndex===r?{backgroundImage:"url(".concat(Fw["ne-card-calendar-schedule-panel-status-select"],")")}:{}}),Gu().createElement("div",{className:n.getClassName("color-select-option-box")},Gu().createElement("div",{className:n.getClassName("color-select-option-box-content"),style:{background:e.getColorByToken(t.line)}})),Gu().createElement("div",{className:n.getClassName("color-select-option-name")},t.name)))}))))}}),Object.defineProperty(n,"renderDivider",{enumerable:!0,configurable:!0,writable:!0,value:function(){return n.renderItem(null,Gu().createElement($_e,{className:n.getClassName("divider")}))}}),Object.defineProperty(n,"renderDatePicker",{enumerable:!0,configurable:!0,writable:!0,value:function(){return n.renderItem(Gu().createElement("div",{className:n.getClassName("icon","icon-calendar","icon-calendar-e"),style:{backgroundImage:"url(".concat(Fw["ne-card-calendar-icon-calendar"],")")}}),Gu().createElement(q_e.RangePicker,{locale:"zhCN"===cc.getLanguage()?KAe:void 0,className:n.getClassName("date-picker"),"data-testid":n.getClassName("date-picker"),getPopupContainer:function(){return n.props.popupContainer||document.body},bordered:!1,value:[n.state.startDate,n.state.endDate],onChange:n.handleChangeDate,onOpenChange:n.handleOverlayClose}))}}),Object.defineProperty(n,"renderDesc",{enumerable:!0,configurable:!0,writable:!0,value:function(){return n.renderItem(Gu().createElement("div",{className:n.getClassName("icon","icon-desc","icon-desc-e"),style:{backgroundImage:"url(".concat(Fw["ne-card-calendar-icon-desc"],")")}}),Gu().createElement(KP.TextArea,{className:n.getClassName("textarea","textarea-desc"),"data-testid":n.getClassName("desc"),placeholder:sc("添加说明"),autoSize:{minRows:1,maxRows:4},value:n.state.desc||"",onPressEnter:n.handleClose,onChange:n.handleChangeDesc(!0),onBlur:n.handleChangeDesc(!1)}))}}),Object.defineProperty(n,"renderItem",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t){return Gu().createElement("div",{className:n.getClassName("item")},Gu().createElement("div",{className:n.getClassName("item-side")},e),Gu().createElement("div",{className:n.getClassName("item-content")},t))}}),Object.defineProperty(n,"renderButton",{enumerable:!0,configurable:!0,writable:!0,value:function(){return Gu().createElement("div",{className:n.getClassName("button-box"),"data-testid":n.getClassName("button-box")},Gu().createElement(Qx,{title:sc("删除")},Gu().createElement("div",{className:n.getClassName("delete-btn"),onClick:n.props.onDelete},Gu().createElement(SC,{type:"icon-delete"}))),Gu().createElement(Qx,{title:sc("关闭")},Gu().createElement("div",{className:n.getClassName("close-btn"),onClick:n.handleClose},Gu().createElement(SC,{type:"close"}))))}});var u=null!==(r=n.props.schedule.start)&&void 0!==r?r:null,c=null!==(o=n.props.schedule.end)&&void 0!==o?o:null;return n.state={colorIndex:null!==(i=n.props.schedule.colorIndex)&&void 0!==i?i:0,title:null!==(a=n.props.schedule.title)&&void 0!==a?a:null,desc:null!==(l=n.props.schedule.desc)&&void 0!==l?l:null,start:u,startDate:u?Ple(u):null,end:c,endDate:c?Ple(c):null},n.debounceSyncValue=Qm()(n.syncValue,100),n.changeValueCount=0,n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){var e,t=this;(null===(e=this.titleRef)||void 0===e?void 0:e.current)&&!this.state.title&&setTimeout((function(){var e,n;null===(n=null===(e=t.titleRef.current)||void 0===e?void 0:e.focus)||void 0===n||n.call(e)}),200)}},{key:"render",value:function(){return Gu().createElement("div",{className:this.getClassName()},this.renderButton(),this.renderTitle(),this.renderColorSelect(),this.renderDivider(),this.renderDatePicker(),this.renderDesc())}}])}(Yu.Component);function wKe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,AKe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function AKe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(AKe=function(){return!!e})()}var kKe=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=wKe(this,t,[e]),Object.defineProperty(n,"getClassName",{enumerable:!0,configurable:!0,writable:!0,value:Xs("ne-card-calendar-popover")}),Object.defineProperty(n,"handleVisibleChange",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n.setState({isShowPopover:e}),!1===e&&(n.props.onClose(void 0,!0),n.props.onOverlayClose&&n.props.onOverlayClose())}}),n.state={isShowPopover:!0},n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){var e=this;return Gu().createElement(bR,{className:this.getClassName(),overlayClassName:this.getClassName("overlay"),visible:this.state.isShowPopover,placement:this.props.pos.placement,getPopupContainer:function(){return e.props.popupContainer||document.body},destroyTooltipOnHide:!0,trigger:"click",onVisibleChange:this.handleVisibleChange,content:Gu().createElement(yKe,{popupContainer:this.props.popupContainer,schedule:this.props.schedule,onChange:this.props.onChange,onClose:this.props.onClose,onDelete:this.props.onDelete,onOverlayClose:this.props.onOverlayClose,theme:this.props.theme})},Gu().createElement("div",{className:this.getClassName("fake-line"),style:{left:this.props.pos.x,top:this.props.pos.y}}))}}])}(Yu.Component);function _Ke(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,CKe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function CKe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(CKe=function(){return!!e})()}var NKe=function(e){function t(e){var n;(0,Ke.A)(this,t),n=_Ke(this,t,[e]),Object.defineProperty(n,"ref",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(n,"getClassName",{enumerable:!0,configurable:!0,writable:!0,value:Xs("ne-card-calendar-schedule-snapshot")}),Object.defineProperty(n,"moving",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n.ref.current&&(n.ref.current.style.transform="translate(".concat(e.x,"px, ").concat(e.y,"px)"))}}),Object.defineProperty(n,"getLines",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t=e.boxInfo,r=e.scheduleId,o=t.top,i=t.left;return(0,ln.A)(e.boxNode.querySelectorAll('.ne-card-calendar-schedule-line[data-id="'.concat(r,'"]'))).map((function(e,t){var r=e.getBoundingClientRect();return Gu().createElement("div",{className:n.getClassName("line"),key:t,style:{top:r.top-o,left:r.left-i,width:r.width,height:r.height},dangerouslySetInnerHTML:{__html:e.outerHTML}})}))}});var r=e.boxInfo,o=r.width,i=r.height,a=n.getLines(e);return n.state={lines:a,style:{width:o,height:i}},n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"shouldComponentUpdate",value:function(e,t){return t.lines.length!==this.state.lines.length}},{key:"componentDidMount",value:function(){0===this.state.lines.length&&this.setState({lines:this.getLines(this.props)})}},{key:"render",value:function(){return Gu().createElement("div",{className:this.getClassName(),ref:this.ref,style:this.state.style},this.state.lines)}}])}(Yu.Component);function OKe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,xKe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function xKe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xKe=function(){return!!e})()}var EKe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=OKe(this,t,arguments),Object.defineProperty(e,"getClassName",{enumerable:!0,configurable:!0,writable:!0,value:Xs("ne-card-calendar-header")}),Object.defineProperty(e,"handleGotoPrevMonth",{enumerable:!0,configurable:!0,writable:!0,value:function(t){t.stopPropagation(),e.changeCurrentDate("subtract",Sle,1)}}),Object.defineProperty(e,"handleGotoNextMonth",{enumerable:!0,configurable:!0,writable:!0,value:function(t){t.stopPropagation(),e.changeCurrentDate("add",Sle,1)}}),Object.defineProperty(e,"changeCurrentDate",{enumerable:!0,configurable:!0,writable:!0,value:function(t,n,r){var o=Ple(e.props.cardData.getCurrentDate())[t](r,n);e.props.onCurrentDateChange(Dle(o))}}),Object.defineProperty(e,"handleGotoToday",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=Dle(Ele());e.props.cardData.getCurrentDate()!==t&&e.props.onCurrentDateChange(t)}}),Object.defineProperty(e,"handleClick",{enumerable:!0,configurable:!0,writable:!0,value:function(t){e.props.onClick(t)}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){var e=Ple(this.props.cardData.getCurrentDate());return Gu().createElement("div",{className:this.getClassName(),"data-testid":this.getClassName(),onClick:this.handleClick},Gu().createElement("div",{className:this.getClassName("month-selector")},Gu().createElement("div",{className:this.getClassName("month-selector-prev"),"data-testid":this.getClassName("prev-month-button"),onClick:this.handleGotoPrevMonth},Gu().createElement(SC,{type:"arrow-left"})),Gu().createElement("div",{className:this.getClassName("month-selector-date"),"data-testid":this.getClassName("month")},e.format(sc("YYYY 年 M 月"))),Gu().createElement("div",{className:this.getClassName("month-selector-next"),"data-testid":this.getClassName("next-month-button"),onClick:this.handleGotoNextMonth},Gu().createElement(SC,{type:"arrow-right"}))),Gu().createElement(Mye,{className:this.getClassName("today-button"),"data-testid":this.getClassName("today-button"),onClick:this.handleGotoToday},sc("今天")))}}])}(Yu.Component);function DKe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,PKe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function PKe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(PKe=function(){return!!e})()}var RKe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=DKe(this,t,arguments),Object.defineProperty(e,"getClassName",{enumerable:!0,configurable:!0,writable:!0,value:Xs("ne-card-calendar-content-week-names")}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){for(var e=[],t=this.props.cardData.getStartWeekDay(),n=0;n<Tle;n++){var r=(t+n)%Tle;e.push(Gu().createElement("div",{className:this.getClassName("item"),"data-testid":"ne-card-calendar-week-names-item",key:r},jle[r]))}return Gu().createElement("div",{className:this.getClassName(),"data-testid":"ne-card-calendar-week-names"},e)}}])}(Yu.Component);function SKe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,TKe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function TKe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(TKe=function(){return!!e})()}var jKe={},IKe=function(e){function t(e){var n;(0,Ke.A)(this,t),n=SKe(this,t,[e]),Object.defineProperty(n,"containerRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(n,"boxRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(n,"snapshotRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(n,"startMovingPos",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"getClassName",{enumerable:!0,configurable:!0,writable:!0,value:Xs("ne-card-calendar")}),Object.defineProperty(n,"closePopover",{enumerable:!0,configurable:!0,writable:!0,value:function(){n.handleCloseSchedule()}}),Object.defineProperty(n,"handleOverlayClose",{enumerable:!0,configurable:!0,writable:!0,value:function(){n.props.onOverlayClose&&n.props.onOverlayClose()}}),Object.defineProperty(n,"handleDeleteOrCloseSchedule",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t,r,o,i,a,l;if(jKe.undoMatcher||(jKe.undoMatcher=new cf(["cmd","z"]),jKe.redoMatcher=new cf(["cmd","shift","z"])),null===(t=jKe.undoMatcher)||void 0===t?void 0:t.match(e))null===(o=(r=n.props).onUndo)||void 0===o||o.call(r,e);else if(null===(i=jKe.redoMatcher)||void 0===i?void 0:i.match(e))null===(l=(a=n.props).onRedo)||void 0===l||l.call(a,e);else{var u=Ks.isBackspace(e),c=!1;u||(c=Ks.isDelete(e)),(u||c)&&!n.state.isShowPopover&&n.state.activeScheduleId&&(e.stopPropagation(),e.preventDefault(),n.deleteSchedule(n.state.activeScheduleId)),Ks.isEscape(e)&&n.state.isShowPopover&&(e.stopPropagation(),e.preventDefault(),n.handleCloseSchedule())}}}),Object.defineProperty(n,"onDeleteSchedule",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=n.state.activeScheduleId;n.handleCloseSchedule(),n.deleteSchedule(e)}}),Object.defineProperty(n,"deleteSchedule",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t=n.props.cardData.getScheduleList().filter((function(t){return t.id===e}))[0];t&&n.props.onScheduleChange({type:"delete",schedule:t.toJSON(),sync:!0})}}),Object.defineProperty(n,"handleCreateSchedule",{enumerable:!0,configurable:!0,writable:!0,value:function(e){return function(t){t.stopPropagation(),t.preventDefault();var r=n.props.cardData.getColorIndex()%Ile.length,o=new Mle({colorIndex:r,start:Dle(e)});n.setState({activeScheduleId:o.id,newScheduleId:o.id}),n.props.onScheduleChange({type:"add",schedule:o.toJSON(),sync:!0}),n.props.onColorIndexChange((r+1)%Ile.length)}}}),Object.defineProperty(n,"handleSelectedSchedule",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n.state.activeScheduleId!==e&&(n.setState({activeScheduleId:e}),n.props.onEditingStatusChange(!0))}}),Object.defineProperty(n,"handleOpenSchedule",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=n.containerRef.current.getBoundingClientRect();n.setState({isShowPopover:!0,newScheduleId:"",popoverInfo:{pos:Object.assign(Object.assign({},t),{x:t.x-o.left,y:t.y-o.top}),schedule:e,isNewSchedule:r,isChangedSchedule:!1}}),n.props.onEditingStatusChange(!0)}}),Object.defineProperty(n,"handleCloseSchedule",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t,r,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==e||e.stopPropagation(),(null===(t=n.state.popoverInfo)||void 0===t?void 0:t.isNewSchedule)&&!1===(null===(r=n.state.popoverInfo)||void 0===r?void 0:r.isChangedSchedule)){n.deleteSchedule(n.state.activeScheduleId);var i=n.props.cardData.getColorIndex()-1;i<0&&(i=0),n.props.onColorIndexChange(i%Ile.length)}(o||n.state.popoverInfo.isChangedSchedule)&&n.props.onSyncData(),n.setState({isShowPopover:!1,popoverInfo:{},activeScheduleId:""}),n.props.onEditingStatusChange(!1)}}),Object.defineProperty(n,"handleUpdateSchedule",{enumerable:!0,configurable:!0,writable:!0,value:function(){for(var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r.id,i=r.name,a=r.value,l=r.sync,u=void 0===l||l,c=r.index,s=n.props.cardData.getScheduleList(),d=null,f=0;f<s.length;f++)if(s[f].id===o){d=s[f];break}if(d){var h=Mle.convert(d);"object"===(0,Gn.A)(i)?Object.keys(i).forEach((function(e){h.updateValue(e,i[e])})):h.updateValue(i,a),n.props.onScheduleChange({type:"update",schedule:h.toJSON(),prevSchedule:d.toJSON(),sync:u,index:c})}(null===(e=n.state.popoverInfo)||void 0===e?void 0:e.isNewSchedule)&&!(null===(t=n.state.popoverInfo)||void 0===t?void 0:t.isChangedSchedule)&&n.setState({popoverInfo:Object.assign(Object.assign({},n.state.popoverInfo),{isChangedSchedule:!0})})}}),Object.defineProperty(n,"makeRecords",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t){for(var n=[],r=0;r<e;r++)"function"==typeof t?n.push(t(r,n[r-1])):n.push([r*t,(r+1)*t]);return n}}),Object.defineProperty(n,"makeRowRecords",{enumerable:!0,configurable:!0,writable:!0,value:function(){return n.makeRecords(n.props.cardData.getDateRows().length,(function(e,t){var r=n.boxRef.current.children[e].getBoundingClientRect().height;if(!t)return[0,r];var o=(0,tn.A)(t,2)[1];return[o,o+r]}))}}),Object.defineProperty(n,"getBoxInfo",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=n.boxRef.current.getBoundingClientRect(),t=e.top,r=e.left,o=e.width,i=e.height,a=Tle,l=o/a;return{top:t,left:r,width:o,height:i,colWidth:l,rowHeight:i/n.props.cardData.getDateRows().length,colRecords:n.makeRecords(a,l),rowRecords:n.makeRowRecords()}}}),Object.defineProperty(n,"findBoxIndex",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t=n.state.boxInfo,r=e.x-t.left,o=e.y-t.top,i=-1,a=-1;return t.rowRecords.forEach((function(e,t){var n=(0,tn.A)(e,2),r=n[0],a=n[1];r<=o&&o<=a&&(i=t)})),t.colRecords.forEach((function(e,t){var n=(0,tn.A)(e,2),o=n[0],i=n[1];o<=r&&r<=i&&(a=t)})),{rowIndex:i,colIndex:a}}}),Object.defineProperty(n,"getHighlightDateSchedulePosInfo",{enumerable:!0,configurable:!0,writable:!0,value:function(e){for(var t,r=e.unix(),o=(0,ln.A)(n.boxRef.current.querySelectorAll(".".concat(n.getClassName("content-box-row-cell"),'[data-unix="').concat(r,'"] [data-line="true"]'))),i=-1,a=n.props.cardData.getDateScheduleMap()[Dle(e)],l=[],u=o.map((function(e){var t=e.getBoundingClientRect(),n=!1,r=e.getAttribute("data-id");return e.hasAttribute("data-schedule-line")?(n=!0,i+=1):l.push(a[r]),{start:t.top,end:t.top+t.height,id:r,isScheduleLine:n,index:n?i:i+1}})),c=Object.values(a),s=null===(t=uKe()(u,(function(e){return!e.isScheduleLine})))||void 0===t?void 0:t.id,d=a[s],f=[],h=0;h<d;h++)c.includes(h)||f.push(h);return{dateSchedulePosRecords:u,scheduleLineCount:i+1,freeSlot:f,maxSlotOrder:d,blackOrders:l}}}),Object.defineProperty(n,"findHighlightDateSchedulePosIndex",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t=-1,r=-1,o=n.state.highlightDateSchedulePosInfo,i=o.dateSchedulePosRecords,a=o.scheduleLineCount,l=i.length!==i.lineCount;if((null==i?void 0:i.length)>0&&(sKe()(i,(function(n,o){if(0===o){var a=n.end;if(e.y<=a)return t=o,r=n.index,!1}else{var l=i[o-1].end,u=n.end;if(l<e.y&&e.y<=u)return t=o,r=n.index,!1}})),-1===t)){var u=i[i.length-1].end;e.y>u&&(t=i.length,r=a)}if(-1!==t&&l){var c=n.state.highlightDateSchedulePosInfo,s=c.freeSlot,d=c.blackOrders;if(d.length===i.length)t=s.length?s[0]:-1;else if(d.includes(t)){for(var f=t;d.includes(f);)f+=1;s.length&&f>s[s.length-1]&&(f=s[0]),t=f}}return{posIndex:t,scheduleIndex:r}}}),Object.defineProperty(n,"handleBeforeResizeSchedule",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n.setState({activeScheduleId:e.id,isResizingSchedule:!0,resizeSchedule:e,resizeScheduleId:e.id,boxInfo:n.getBoxInfo()})}}),Object.defineProperty(n,"handleBeforeDragSchedule",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t){!n.startMovingPos&&t&&(n.startMovingPos=Object.assign({},t)),n.setState({activeScheduleId:e.id,isDraggingSchedule:!0,dragSchedule:e,dragScheduleId:e.id,boxInfo:n.getBoxInfo()},(function(){n.setState({isShowScheduleSnapshot:!0})}))}}),Object.defineProperty(n,"handleResizeOrDragSchedule",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t,r;if(e.stopPropagation(),e.preventDefault(),n.state.isResizingSchedule||n.state.isDraggingSchedule){var o={x:e.clientX,y:e.clientY};n.startMovingPos||(n.startMovingPos=Object.assign({},o));var i=n.findBoxIndex(o),a=i.rowIndex,l=i.colIndex;if(-1!==a&&-1!==l){var u=n.props.cardData.getDateRows()[a][l];if(n.state.isResizingSchedule){var c=n.state.resizeSchedule;if(u.isSameOrAfter(c.startDate,Rle)&&!c.endDate.isSame(u,Rle)){n.handleUpdateSchedule({id:c.id,name:"endDate",value:u,sync:!1});var s=Mle.cloneWithUpdateValue(c,"endDate",u);n.setState({resizeSchedule:s,boxInfo:Object.assign(Object.assign({},n.state.boxInfo),{rowRecords:n.makeRowRecords()})})}}if(n.state.isDraggingSchedule){if(n.state.highlightDate!==u)n.setState({highlightDate:u,highlightDateSchedulePosInfo:n.getHighlightDateSchedulePosInfo(u)});else{var d=n.findHighlightDateSchedulePosIndex(o),f=d.posIndex,h=d.scheduleIndex;n.state.dragSchedulePosIndex===f&&n.state.dragScheduleIndex===h||n.setState({dragScheduleIndex:h,dragSchedulePosIndex:f,dragScheduleColorIndex:n.state.dragSchedule.colorIndex})}(null===(r=null===(t=n.snapshotRef)||void 0===t?void 0:t.current)||void 0===r?void 0:r.moving)&&n.snapshotRef.current.moving({x:o.x-n.startMovingPos.x,y:o.y-n.startMovingPos.y})}}}}}),Object.defineProperty(n,"handleAfterResizeOrDragSchedule",{enumerable:!0,configurable:!0,writable:!0,value:function(e){e.stopPropagation(),e.preventDefault();var t=n.state,r=t.isResizingSchedule,o=t.isDraggingSchedule;if(r||o){var i=n.state,a=i.highlightDate,l=i.dragSchedule,u=i.dragScheduleIndex,c=i.resizeSchedule;o&&l&&a&&n.handleUpdateSchedule({id:l.id,name:{startDate:a,endDate:a.add(l.duration,Rle)},index:u}),r&&c&&n.handleUpdateSchedule({id:c.id,name:"end",value:c.end}),n.setState({isResizingSchedule:!1,isDraggingSchedule:!1,resizeSchedule:null,resizeScheduleId:"",dragSchedule:null,dragScheduleId:"",dragScheduleIndex:-1,dragSchedulePosIndex:-1,dragScheduleColorIndex:-1,boxInfo:null,isShowScheduleSnapshot:!1,highlightDate:null,highlightDateSchedulePosInfo:null}),n.startMovingPos=null}}}),Object.defineProperty(n,"renderHeader",{enumerable:!0,configurable:!0,writable:!0,value:function(){return Gu().createElement(EKe,{cardData:n.props.cardData,onClick:n.handleCloseSchedule,onCurrentDateChange:n.props.onCurrentDateChange})}}),Object.defineProperty(n,"renderWeekNames",{enumerable:!0,configurable:!0,writable:!0,value:function(){return Gu().createElement(RKe,{cardData:n.props.cardData})}}),Object.defineProperty(n,"renderCalendarCellSchedule",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t,r,o){var i=n.props.cardData.getScheduleList(),a=n.props.cardData.getDateScheduleMap(),l=n.state,u=l.activeScheduleId,c=l.newScheduleId,s=l.resizeScheduleId,d=l.dragScheduleId,f=l.dragSchedulePosIndex,h=l.dragScheduleColorIndex,p=Dle(e),v=i.filter((function(e){return e.include(p)})).sort((function(e,t){var n=a[p];return(n[e.id]||0)-(n[t.id]||0)}));return v.map((function(i,a){var l,m=e.unix(),g=i.isStartDate(p),b={},y={},w=a===v.length-1;return o&&d!==i.id&&-1!==f&&(f===a&&(b.backgroundColor=n.props.theme.getColorByToken(Ile[h].line)),w&&f>=v.length&&(y.backgroundColor=n.props.theme.getColorByToken(Ile[h].line))),l=g||0===t?Gu().createElement(vKe,{key:"".concat(m,"-").concat(i.id,"-schedule"),theme:n.props.theme,date:e,colIndex:t,rowIndex:r,schedule:i,activeScheduleId:u,newScheduleId:c,resizeScheduleId:s,dragScheduleId:d,onSelect:n.handleSelectedSchedule,onOpen:n.handleOpenSchedule,onBeforeResize:n.handleBeforeResizeSchedule,onBeforeDrag:n.handleBeforeDragSchedule}):Gu().createElement("div",{key:"".concat(m,"-").concat(i.id,"-holder"),"data-id":i.id,className:n.getClassName("content-box-row-cell-schedule-holder"),"data-line":"true"}),Gu().createElement(Gu().Fragment,{key:"".concat(m,"-").concat(i.id,"-fragment")},Gu().createElement("div",{className:n.getClassName("content-box-row-cell-schedule-index"),key:"".concat(m,"-").concat(i.id,"-index-start"),style:b}),l,w&&Gu().createElement("div",{className:n.getClassName("content-box-row-cell-schedule-index"),key:"".concat(m,"-").concat(i.id,"-index-end"),style:y}))}))}}),Object.defineProperty(n,"renderCalendarCell",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t,r){var o=n.state,i=o.date,a=o.resizeSchedule,l=o.highlightDate,u="none";a&&a.include(e)&&(u=a.isSameDaySchedule()?"full":a.isStartDate(e)?"left":a.isEndDate(e)?"right":"half");var c="",s=Tle-1,d=n.props.cardData.getDateRows().length-1;0===t?0===r?c="top-left-corner":r===d&&(c="bottom-left-corner"):t===s&&(0===r?c="top-right-corner":r===d&&(c="bottom-right-corner")),l&&l.isSame(e,Rle)&&(u="full");var f="none"!==u;return Gu().createElement("div",{className:n.getClassName("content-box-row-cell"),key:e.unix(),"data-testid":n.getClassName("date-cell"),"data-testtoday":e.isToday(),"data-border":u,"data-border-style":c,"data-unix":e.unix(),onClick:n.handleCreateSchedule(e)},Gu().createElement("div",{className:n.getClassName("content-box-row-cell-date"),"data-today":e.isToday(),"data-fade":e.month()!==i.month()},Gu().createElement("div",{className:n.getClassName("content-box-row-cell-date-text")},e.format("D")),Gu().createElement("div",{className:n.getClassName("content-box-row-cell-date-plus"),style:{backgroundImage:"url(".concat(Fw["ne-card-calendar-plus"],")")},onClick:n.handleCreateSchedule(e)})),n.renderCalendarCellSchedule(e,t,r,f))}}),Object.defineProperty(n,"renderCalendarBox",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=n.props.cardData.getDateRows(),t=n.state.date;return Gu().createElement("div",{className:n.getClassName("content-box"),ref:n.boxRef,onMouseMove:n.handleResizeOrDragSchedule,onMouseUp:n.handleAfterResizeOrDragSchedule},e.map((function(r,o){return Gu().createElement("div",{className:n.getClassName("content-box-row"),key:"".concat(t.month(),"-").concat(o),"data-testid":n.getClassName("date-row"),"data-last":o===e.length-1},r.map((function(e,t){return n.renderCalendarCell(e,t,o)})))})),n.renderScheduleSnapshot())}}),Object.defineProperty(n,"renderContent",{enumerable:!0,configurable:!0,writable:!0,value:function(){return Gu().createElement("div",{className:n.getClassName("content")},n.renderWeekNames(),n.renderCalendarBox())}}),Object.defineProperty(n,"renderPopover",{enumerable:!0,configurable:!0,writable:!0,value:function(){return n.state.isShowPopover?Gu().createElement(kKe,{schedule:n.state.popoverInfo.schedule,pos:n.state.popoverInfo.pos,popupContainer:n.props.overlayContainer,onChange:n.handleUpdateSchedule,onClose:n.handleCloseSchedule,onDelete:n.onDeleteSchedule,onOverlayClose:n.handleOverlayClose,theme:n.props.theme}):null}}),Object.defineProperty(n,"renderMask",{enumerable:!0,configurable:!0,writable:!0,value:function(){return n.state.isShowPopover?Gu().createElement("div",{className:n.getClassName("mask"),"data-testid":n.getClassName("mask"),onClick:n.handleCloseSchedule}):null}}),Object.defineProperty(n,"renderScheduleSnapshot",{enumerable:!0,configurable:!0,writable:!0,value:function(){return n.state.isShowScheduleSnapshot?Gu().createElement(NKe,{ref:n.snapshotRef,scheduleId:n.state.dragSchedule.id,boxNode:n.boxRef.current,boxInfo:n.state.boxInfo}):null}});var r=e.cardData.getCurrentDate();return n.state={currentDate:r,date:Ple(r),activeScheduleId:"",newScheduleId:"",resizeScheduleId:"",dragScheduleId:"",isShowPopover:!1,popoverInfo:{},isResizingSchedule:!1,resizeSchedule:null,isDraggingSchedule:!1,isShowScheduleSnapshot:!1,dragSchedule:null,dragScheduleIndex:-1,dragSchedulePosIndex:-1,dragScheduleColorIndex:-1,highlightDateSchedulePosInfo:null,boxInfo:null,highlightDate:null},n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){ud(this,document,"keydown",this.handleDeleteOrCloseSchedule,{capture:!0})}},{key:"render",value:function(){return Gu().createElement("div",{className:this.getClassName(),"data-testid":this.getClassName(),ref:this.containerRef},this.renderHeader(),this.renderContent(),this.renderPopover(),this.renderMask())}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.cardData.getCurrentDate();return n!==t.currentDate?{currentDate:n,activeScheduleId:"",newScheduleId:"",dragScheduleId:"",date:Ple(n)}:null}}])}(Yu.Component);function BKe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(BKe=function(){return!!e})()}var MKe=function(e){return function(e){function t(){var e;return(0,Ke.A)(this,t),e=function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,BKe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,arguments),Object.defineProperty(e,"uiViewProxy",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this;this.cardData.setStartWeekDay(e.startWeekDay),this.uiViewProxy=Vye.render(IKe,{theme:this.editor.theme,cardData:this.cardData,overlayContainer:this.editor.innerOverlayContainer,onCurrentDateChange:function(e){t.cardData.setCurrentDate(e),t.cardData.sync(!1)},onColorIndexChange:function(e){t.cardData.setColorIndex(e),t.cardData.sync(!1)},onScheduleChange:function(e){t.cardData.setSchedule(e),!1!==e.sync&&t.cardData.sync(!1)},onSyncData:function(){t.cardData.sync(!1)},onRedo:function(e){t.handleRedo(e)},onUndo:function(e){t.handleUndo(e)},onEditingStatusChange:function(e){e?t.containerNode.parentNode.parentNode.classList.add("ne-card-editing"):t.containerNode.parentNode.parentNode.classList.remove("ne-card-editing")},onOverlayClose:function(){t.editor.execCommand("focus",{preventScroll:!0})}},this.containerNode),xc(this,this.editor.theme,"themeChange",(function(){var e;t.destroyed||null===(e=t.uiViewProxy)||void 0===e||e.rerender({theme:t.editor.theme})}))}},{key:"destroy",value:function(){Gl().unmountComponentAtNode(this.containerNode),this.uiViewProxy=null,Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}},{key:"closePopover",value:function(){this.uiViewProxy&&this.uiViewProxy.getReactRef().closePopover()}},{key:"blur",value:function(){Tr((0,Je.A)(t.prototype),"blur",this).call(this),this.closePopover()}},{key:"handleRedo",value:function(e){this.isFocused&&(e.preventDefault(),e.stopPropagation(),this.cardData.redo())}},{key:"handleUndo",value:function(e){this.isFocused&&(e.preventDefault(),e.stopPropagation(),this.cardData.undo())}}])}(e)};function FKe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,LKe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function LKe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(LKe=function(){return!!e})()}var UKe=function(e){function t(e){var n;(0,Ke.A)(this,t);for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return n=FKe(this,t,[].concat(o)),Object.defineProperty(n,"editor",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(n,"_ui",{enumerable:!0,configurable:!0,writable:!0,value:null}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){this.pluginOption.editUI&&(t.$EditableCardUI=this.pluginOption.editUI),this._ui=this.editor.createCardUI(this,this.editor.option.calendar)}},{key:"destroy",value:function(){var e;null===(e=this._ui)||void 0===e||e.destroy(),this._ui=null}}])}(Fy);function VKe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,HKe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function HKe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(HKe=function(){return!!e})()}Object.defineProperty(UKe,"$EditableCardUI",{enumerable:!0,configurable:!0,writable:!0,value:Hh.extend(MKe)}),Object.defineProperty(UKe,"$CardData",{enumerable:!0,configurable:!0,writable:!0,value:Vle});var zKe={startWeekDay:0},WKe=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=VKe(this,t),Object.defineProperty(n,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n._option=Ww()({},zKe,e),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"startWeekDay",get:function(){return this._option.startWeekDay}},{key:"editUI",get:function(){return this._option.editUI}},{key:"getDocReadURL",get:function(){return this._option.getDocReadURL}}])}(it);Object.defineProperty(WKe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:eM.CALENDAR.OPTION_NAME});var qKe=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=VKe(this,t,[e]),Object.defineProperty(r,"kernelOption",{enumerable:!0,configurable:!0,writable:!0,value:n}),r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"viewerUI",get:function(){return this._option.viewerUI}}])}(WKe);function $Ke(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,KKe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function KKe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(KKe=function(){return!!e})()}Object.defineProperty(qKe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:eM.CALENDAR.OPTION_NAME});var YKe=function(e){function t(){return(0,Ke.A)(this,t),$Ke(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){var n;t.registerBlockCard(this,Qse.cardName,{factory:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return vl(UKe,[e].concat(n))}}),e.onPluginEvent("insertCardByUI:".concat(Qse.cardName),(function(){e.execCommand("insertCard",Qse.cardName,Vle.getInitCardValue(),!0)})),null===(n=e.getService(xEe.ID))||void 0===n||n.registerCardSelect(Qse.cardSelect,{type:"TextItem",icon:"editor-main-calendar",label:sc("日历"),description:sc("使用日历添加日程"),mainSearch:"/rl",name:Qse.cardSelect,keywords:"日历,rl,rili,calendar"})}}])}(Fh);function GKe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,JKe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function JKe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(JKe=function(){return!!e})()}Object.defineProperty(YKe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:Qse.pluginName}),Object.defineProperty(YKe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:WKe}),Object.defineProperty(YKe,"Colors",{enumerable:!0,configurable:!0,writable:!0,value:Ble});var XKe=Cxe.Option,QKe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=GKe(this,t,arguments),Object.defineProperty(e,"titleRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"itemRefs",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(e,"getClassName",{enumerable:!0,configurable:!0,writable:!0,value:Xs("ne-card-vote")}),Object.defineProperty(e,"handleOverlayClose",{enumerable:!0,configurable:!0,writable:!0,value:function(t){!1===t&&e.props.onOverlayClose&&e.props.onOverlayClose()}}),Object.defineProperty(e,"focusTitle",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t;!e.props.cardData.getTitle()&&e.titleRef.current&&(null===(t=e.titleRef.current)||void 0===t||t.focus())}}),Object.defineProperty(e,"bindItemRef",{enumerable:!0,configurable:!0,writable:!0,value:function(t){return function(n){(null==e?void 0:e.itemRefs)&&n&&(e.itemRefs[t]=n)}}}),Object.defineProperty(e,"handleFocusNextItem",{enumerable:!0,configurable:!0,writable:!0,value:function(t){return function(){var n,r=t+1;r in e.itemRefs?null===(n=e.itemRefs[r])||void 0===n||n.focus():e.handleAddVote(void 0,(function(){var t;null===(t=e.itemRefs[r])||void 0===t||t.focus()}))}}}),Object.defineProperty(e,"handleChangeTitle",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(n){e.props.onTitleChange(n.target.value,t)}}}),Object.defineProperty(e,"handleChangeType",{enumerable:!0,configurable:!0,writable:!0,value:function(t){e.props.onTypeChange(t)}}),Object.defineProperty(e,"handleChangeDeadline",{enumerable:!0,configurable:!0,writable:!0,value:function(t){e.props.onDeadlineChange(t.toISOString())}}),Object.defineProperty(e,"handleAddVote",{enumerable:!0,configurable:!0,writable:!0,value:function(t,n){null==t||t.stopPropagation(),e.props.onVoteChange({type:"add",sync:!0},n)}}),Object.defineProperty(e,"handleUpdateVote",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(r){e.props.onVoteChange({type:uue,item:Object.assign(Object.assign({},t),{value:r.target.value}),sync:n})}}}),Object.defineProperty(e,"handleDeleteVote",{enumerable:!0,configurable:!0,writable:!0,value:function(t){return function(n){null==n||n.stopPropagation(),e.deleteVote(t),e.itemRefs={}}}}),Object.defineProperty(e,"deleteVote",{enumerable:!0,configurable:!0,writable:!0,value:function(t){e.props.onVoteChange({type:cue,item:t,sync:!0})}}),Object.defineProperty(e,"renderSetting",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=e.props.cardData.getType(),n=e.props.cardData.getTitle();return Gu().createElement("div",{className:e.getClassName("setting")},Gu().createElement("div",{className:e.getClassName("setting-type")},Gu().createElement(Cxe,{value:t,size:"large",onChange:e.handleChangeType},fue.map((function(e){return Gu().createElement(XKe,{key:e.value,value:e.value},sc(e.name))})))),Gu().createElement("div",{className:e.getClassName("setting-title")},Gu().createElement(KP,{className:e.getClassName("setting-title-input"),"data-testid":e.getClassName("title-input"),placeholder:sc("请输入投票标题"),ref:e.titleRef,size:"large",value:n,onPressEnter:e.handleFocusNextItem(-1),onChange:e.handleChangeTitle(!1),onBlur:e.handleChangeTitle(!0)})))}}),Object.defineProperty(e,"renderVoteList",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=e.props.cardData.getItems(),n=(null==t?void 0:t.length)>2;return Gu().createElement("div",{className:e.getClassName("vote-list")},t.map((function(t,r){return e.renderVoteItem(t,r,n)})))}}),Object.defineProperty(e,"renderVoteItem",{enumerable:!0,configurable:!0,writable:!0,value:function(t,n,r){return Gu().createElement("div",{className:e.getClassName("vote-item"),key:t.id,"data-testid":e.getClassName("vote-item")},Gu().createElement(KP,{className:e.getClassName("vote-item-input"),"data-testid":e.getClassName("vote-item-input"),"data-testindex":n,size:"large",ref:e.bindItemRef(n),placeholder:sc("选项 {no}",{no:n+1}),value:t.value,onPressEnter:e.handleFocusNextItem(n),onChange:e.handleUpdateVote(t,!1),onBlur:e.handleUpdateVote(t,!0)}),Gu().createElement("div",{className:e.getClassName("vote-item-side")},r?e.renderVoteItemDeleteButton(t):null))}}),Object.defineProperty(e,"renderVoteItemDeleteButton",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n,r=Gu().createElement("div",{"data-testid":e.getClassName("vote-item-delete-button")},Gu().createElement(SC,{type:"icon-delete",size:20,className:e.getClassName("vote-item-delete")})),o=Gu().createElement("div",{className:e.getClassName("vote-item-delete"),onClick:e.handleDeleteVote(t)},r);return(null===(n=null==t?void 0:t.value)||void 0===n?void 0:n.length)&&(o=Gu().createElement(cxe,{"data-testid":e.getClassName("vote-item-confirm"),title:sc("确定删除该选项？"),okText:sc("确认"),cancelText:sc("取消"),overlayClassName:e.getClassName("popconfirm"),getPopupContainer:function(){return document.body},destroyTooltipOnHide:!0,onConfirm:e.handleDeleteVote(t),onVisibleChange:e.handleOverlayClose},r)),o}}),Object.defineProperty(e,"renderOperation",{enumerable:!0,configurable:!0,writable:!0,value:function(){return Gu().createElement("div",{className:e.getClassName("operation")},Gu().createElement("div",{className:e.getClassName("operation-wrap"),onClick:e.handleAddVote,"data-testid":e.getClassName("add-button")},Gu().createElement(SC,{className:e.getClassName("operation-wrap-icon"),type:"add"}),sc("添加选项")))}}),Object.defineProperty(e,"renderDeadline",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=e.props.cardData.getDeadline(),n=Xf()(t);return Gu().createElement("div",{className:e.getClassName("deadline")},Gu().createElement("div",{className:e.getClassName("deadline-wrap")},Gu().createElement("div",{className:e.getClassName("deadline-wrap-label")},sc("截止日期")),Gu().createElement(q_e,{className:e.getClassName("deadline-wrap-date-picker"),"data-testid":e.getClassName("date-picker"),showTime:!0,allowClear:!1,showToday:!1,getPopupContainer:function(){return e.props.overlayContainer||document.body},value:n,size:"large",onChange:e.handleChangeDeadline,onOpenChange:e.handleOverlayClose,suffixIcon:Gu().createElement(SC,{type:"clock-circle"})})))}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){return Gu().createElement("div",{className:this.getClassName(),"data-testid":this.getClassName()},this.renderSetting(),this.renderVoteList(),this.renderOperation(),this.renderDeadline())}}])}(Yu.Component);function ZKe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ZKe=function(){return!!e})()}function eYe(e){return function(e){function t(){var e;return(0,Ke.A)(this,t),e=function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,ZKe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,arguments),Object.defineProperty(e,"uiViewProxy",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e=this;this.uiViewProxy=Vye.render(QKe,{overlayContainer:this.editor.innerOverlayContainer,cardData:this.cardData,focus:!1,onTitleChange:function(t,n){e.cardData.setTitle(t,n),n&&e.cardData.sync(!1)},onTypeChange:function(t){e.cardData.setType(t),e.cardData.sync(!1)},onDeadlineChange:function(t){e.cardData.setDeadline(t),e.cardData.sync(!1)},onVoteChange:function(t,n){e.cardData.setVote(t),t.sync&&e.cardData.sync(!1),n&&setTimeout((function(){n()}),0)},onOverlayClose:function(){e.editor.execCommand("focus",{preventScroll:!0})}},this.containerNode)}},{key:"destroy",value:function(){Gl().unmountComponentAtNode(this.containerNode),this.uiViewProxy=null,Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}},{key:"focusTitle",value:function(){this.uiViewProxy.getReactRef().focusTitle()}}])}(e)}var tYe=eYe;function nYe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,rYe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function rYe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rYe=function(){return!!e})()}var oYe=function(e){function t(e){var n;(0,Ke.A)(this,t);for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return n=nYe(this,t,[].concat(o)),Object.defineProperty(n,"_ui",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"editor",{enumerable:!0,configurable:!0,writable:!0,value:null}),n.editor=e,n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){this.pluginOption.editUI&&(t.$EditableCardUI=this.pluginOption.editUI),this._ui=this.editor.createCardUI(this)}},{key:"destroy",value:function(){this._ui.destroy(),this._ui=null}},{key:"focusTitle",value:function(){this._ui.focusTitle()}}])}(Fy);Object.defineProperty(oYe,"$EditableCardUI",{enumerable:!0,configurable:!0,writable:!0,value:Hh.extend(tYe)}),Object.defineProperty(oYe,"$CardData",{enumerable:!0,configurable:!0,writable:!0,value:gue});var iYe={queryDetailUrl:"/api/votes",queryCheckUrl:"/api/votes/mine",voteUrl:"/api/votes",allowVote:!1,isOwner:!1},aYe=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:null}),this._option=Ww()({},iYe,t)}),[{key:"queryDetailUrl",get:function(){return this._option.queryDetailUrl}},{key:"queryCheckUrl",get:function(){return this._option.queryCheckUrl}},{key:"voteUrl",get:function(){return this._option.voteUrl}},{key:"allowVote",get:function(){return this._option.allowVote}},{key:"isOwner",get:function(){return this._option.isOwner}},{key:"editUI",get:function(){var e;return null===(e=this._option)||void 0===e?void 0:e.editUI}},{key:"viewerUI",get:function(){var e;return null===(e=this._option)||void 0===e?void 0:e.viewerUI}}])}();function lYe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,uYe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function uYe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(uYe=function(){return!!e})()}Object.defineProperty(aYe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:eM.VOTE.OPTION_NAME});var cYe=function(e){function t(){return(0,Ke.A)(this,t),lYe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"read",value:function(e,t){e.from===MT&&(t.attrs.value=gue.fromPaste(t.attrs.value))}}])}(KPe);function sYe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,dYe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function dYe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(dYe=function(){return!!e})()}Object.defineProperty(cYe,"CardName",{enumerable:!0,configurable:!0,writable:!0,value:eM.VOTE.NODE_NAME});var fYe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=sYe(this,t,arguments),Object.defineProperty(e,"_votes",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){var n,r=this;t.registerBlockCard(this,tde.cardName,{factory:function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var i=vl(oYe,[e].concat(n));return r._votes.set(i.viewNode.attrs.id,i),i}});var o=t.kernel.getService(W$.ID);null==o||o.registerINodeCardPreReader(cYe.CardName,new cYe),e.onPluginEvent("insertCardByUI:".concat(tde.cardName),(function(){var t=e.execCommand("insertCard",tde.cardName,gue.getInitCardValue(),!0);r._votes.has(t)&&r._votes.get(t).focusTitle()})),null===(n=e.getService(xEe.ID))||void 0===n||n.registerCardSelect(tde.cardSelect,{type:"TextItem",icon:"editor-main-vote",label:sc("投票"),description:sc("发起投票活动"),mainSearch:"/toup",name:tde.cardSelect,keywords:"toupiao,tp,vote,投票"})}}])}(Fh);Object.defineProperty(fYe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:tde.pluginName}),Object.defineProperty(fYe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:aYe});const hYe={TEXT_DIAGRAM_TYPES:{PUML:"puml",MERMAID:"mermaid",GRAPHVIZ:"graphviz",FLOWCHART:"flowchart"},TEXT_DIAGRAMS:[{type:"puml",name:"PlantUML"},{type:"mermaid",name:"Mermaid"},{type:"flowchart",name:"Flowchart"},{type:"graphviz",name:"Graphviz"}],TEXT_DIAGRAM_GUIDES:{puml:"https://www.yuque.com/yuque/gpvawt/editor-puml",flowchart:"https://www.yuque.com/yuque/gpvawt/flowchart",graphviz:"https://www.yuque.com/yuque/gpvawt/graphviz",mermaid:"https://www.yuque.com/yuque/gpvawt/mermaid"},TEXT_DIAGRAM_SYNTAX:{puml:"plantuml"},EDITOR_MODE:{CODE:"code",PREVIEW:"preview"},EDITOR_LAYOUT:{DEFAULT:"default",TWO_COLUMN:"two-column"}};function pYe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,vYe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function vYe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vYe=function(){return!!e})()}var mYe=oUe()("ne:text-diagram:viewer"),gYe=function(e){function t(e){var n;return(0,Ke.A)(this,t),(n=pYe(this,t,[e])).state={url:e.url,error:null},n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){!this.state.url&&this.props.code&&this.genImg()}},{key:"componentDidUpdate",value:function(e){this.props.code!==e.code&&this.genImg()}},{key:"genImg",value:function(){var e=this;this.setState({url:null});var t=this.props,n=t.type,r=t.code;this.props.preview({type:n,code:r}).then((function(t){mYe("preview img generated",t),t.success?e.setState({url:dh.toDataURL(t.svg),error:null}):e.setState({error:t.message})})).catch((function(t){e.setState({error:t.message})}))}},{key:"render",value:function(){var e,t=this.props,n=t.type,r=t.className,o=void 0===r?"":r,i=this.state,a=i.url,l=i.error;return a=this.props.onBeforeRenderImage(a),e=null!==l?Gu().createElement("pre",null,l):a?Gu().createElement("img",{src:yh.sanitizeUrl(a),onLoad:this.props.onLoad,"data-testid":"ne-text-diagram-img",onDragStart:function(e){e.preventDefault(),e.stopPropagation()}}):Gu().createElement("div",{className:"ne-text-diagram-loading"},Gu().createElement(SC,{type:"icon-loading-desk",size:36})),Gu().createElement("div",{"data-diagram":n,className:"ne-text-diagram-viewer ".concat(o)},e)}}])}(Gu().PureComponent);Object.defineProperty(gYe,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{onLoad:function(){},onBeforeRenderImage:function(e){return e}}});var bYe={puml:{timing:{id:"timing",name:"时序图 (Timing)",text:'@startuml\n\nrobust "Web 浏览器" as WB\nconcise "Web 用户" as WU\n\n@0\nWU is 空闲\nWB is 空闲\n\n@100\nWU is 等待中\nWB is 处理中\n\n@300\nWB is 等待中\n\n@enduml'},sequence:{id:"sequence",name:"序列图 (Sequence)",text:'@startuml\n\nautonumber\n\nactor "用户" as User\nparticipant "浏览器" as Browser\nparticipant "服务端" as Server #orange\n\nactivate User\n\nUser -> Browser: 输入 URL\nactivate Browser\n\nBrowser -> Server: 请求服务器\nactivate Server\n\nServer -> Server: 模板渲染\nnote right of Server: 这是一个注释\n\nServer -> Browser: 返回 HTML\ndeactivate Server\n\nBrowser --\x3e User\n\n@enduml',src:"https://cdn.nlark.com/__puml/b11b6192390c95750c4b71c2580ff529.svg"},"use-case":{id:"use-case",name:"用例图 (Use Case)",text:"@startuml\n\nactor A\nactor B\n\nA -up-> (up)\nA -right-> (center)\nA -down-> (down)\nA -left-> (left)\n\nB -up-> (up)\nB -left-> (center)\nB -right-> (right)\nB -down-> (down)\n\n@enduml",src:"https://lark-assets-prod.oss-cn-hangzhou.aliyuncs.com/__puml/a7908b49c22b05104624bebc463cd25d.svg"},class:{id:"class",name:"类图 (Class)",text:"@startuml\n\nclass Car {\n  color\n  model\n  +start()\n  #run()\n  #stop()\n}\n\nCar <|- Bus\nCar *-down- Tire\nCar *-down- Engine\nBus o-down- Driver\n\n@enduml",src:"https://lark-assets-prod.oss-cn-hangzhou.aliyuncs.com/__puml/e9cf4eba3cdaf0cf1bc68065406d9d43.svg"},flowchart:{id:"flowchart",name:"流程图 (Flow)",text:"@startuml\n\nstart\n\n:step 1;\n\nif (try) then (true)\n  :step 2;\n  :step 3;\nelse (false)\n  :error;\n  end\nendif\n\nstop\n\n@enduml",src:"https://lark-assets-prod.oss-cn-hangzhou.aliyuncs.com/__puml/48a1408972f20bc1f4837aa807254692.svg"},activity:{id:"activity",name:"活动图 (Activity)",text:"@startuml\n\n|A Section|\nstart\n:step1;\n|#AntiqueWhite|B Section|\n:step2;\n:step3;\n|A Section|\n:step4;\n|B Section|\n:step5;\nstop\n\n@enduml",src:"https://lark-assets-prod.oss-cn-hangzhou.aliyuncs.com/__puml/2aa76dcc256f08335083bd039b5b4e49.svg"},component:{id:"component",name:"组件图 (Component)",text:"@startuml\n\nDataAccess - [First Component]\n[First Component] ..> HTTP : use\n\n@enduml",src:"https://lark-assets-prod.oss-cn-hangzhou.aliyuncs.com/__puml/6b9de2b03b69402b018655ed491fcd34.svg"},state:{id:"state",name:"状态图 (State)",text:"@startuml\n\n[*] --\x3e State1\nState1 --\x3e [*]\nState1 : this is a string\nState1 : this is another string\n\nState1 -> State2\nState2 --\x3e [*]\n\n@enduml",src:"https://lark-assets-prod.oss-cn-hangzhou.aliyuncs.com/__puml/0d1c26fb399ed9669a2e1a29e98b4de4.svg"},object:{id:"object",name:"对象图 (Object)",text:"@startuml\n\nobject Car\nobject Bus\nobject Tire\nobject Engine\nobject Driver\n\nCar <|- Bus\nCar *-down- Tire\nCar *-down- Engine\nBus o-down- Driver\n\n@enduml",src:"https://lark-assets-prod.oss-cn-hangzhou.aliyuncs.com/__puml/1af2d7ebc3e554c752289bcce7679cdb.svg"}},mermaid:{flowchart:{id:"flowchart",name:"Flow Chart",text:"\n  graph TD\n      A[Start] --\x3e B{Is it?};\n      B --\x3e|Yes| C[OK];\n      C --\x3e D[Rethink];\n      D --\x3e B;\n      B ----\x3e|No| E[End];\n  "},sequence:{id:"sequence",name:"Sequence Diagram",text:"\n  sequenceDiagram\n      participant John\n      participant Alice\n      Alice->>John: Hello John, how are you?\n      John--\x3e>Alice: Great!\n  "},class:{id:"class",name:"Class Diagram",text:"\n  classDiagram\n      Animal <|-- Duck\n      Animal <|-- Fish\n      Animal <|-- Zebra\n      Animal : +int age\n      Animal : +String gender\n      Animal: +isMammal()\n      Animal: +mate()\n      class Duck{\n          +String beakColor\n          +swim()\n          +quack()\n      }\n      class Fish{\n          -int sizeInFeet\n          -canEat()\n      }\n      class Zebra{\n          +bool is_wild\n          +run()\n      }\n    "},state:{id:"state",name:"State Diagram",text:"\n  stateDiagram-v2\n      [*] --\x3e Still\n      Still --\x3e [*]\n\n      Still --\x3e Moving\n      Moving --\x3e Still\n      Moving --\x3e Crash\n      Crash --\x3e [*]\n    "},er:{id:"er",name:"ER Diagram",text:"\n  erDiagram\n      CUSTOMER ||--o{ ORDER : places\n      ORDER ||--|{ LINE-ITEM : contains\n      CUSTOMER }|..|{ DELIVERY-ADDRESS : uses\n    "},gantt:{id:"gantt",name:"Gantt",text:"\n  gantt\n      title A Gantt Diagram\n      dateFormat  YYYY-MM-DD\n      section Section\n      A task           :a1, 2014-01-01, 30d\n      Another task     :after a1  , 20d\n      section Another\n      Task in sec      :2014-01-12  , 12d\n      another task      : 24d\n  "},pie:{id:"pie",name:"Pie Chart",text:'\n  pie\n      title Key elements in Product X\n      "Calcium" : 42.96\n      "Potassium" : 50.05\n      "Magnesium" : 10.01\n      "Iron" :  5\n  '}},flowchart:{default:{id:"default",name:"Flowchart",text:"\n  st=>start: Start\n  e=>end\n  op1=>operation: My Operation\n  sub1=>subroutine: My Subroutine\n  cond=>condition: Yes or No?\n  io=>inputoutput: catch something...\n  para=>parallel: parallel tasks\n\n  st->op1->cond\n  cond(yes)->io->e\n  cond(no)->para\n  para(path1, bottom)->sub1(right)->op1\n  para(path2, top)->op1\n  "}},graphviz:{fsm:{id:"fsm",name:"Finite State Machine",text:'\ndigraph finite_state_machine {\n\trankdir=LR;\n\tsize="8,5"\n\tnode [shape = doublecircle]; LR_0 LR_3 LR_4 LR_8;\n\tnode [shape = circle];\n\tLR_0 -> LR_2 [ label = "SS(B)" ];\n\tLR_0 -> LR_1 [ label = "SS(S)" ];\n\tLR_1 -> LR_3 [ label = "S($end)" ];\n\tLR_2 -> LR_6 [ label = "SS(b)" ];\n\tLR_2 -> LR_5 [ label = "SS(a)" ];\n\tLR_2 -> LR_4 [ label = "S(A)" ];\n\tLR_5 -> LR_7 [ label = "S(b)" ];\n\tLR_5 -> LR_5 [ label = "S(a)" ];\n\tLR_6 -> LR_6 [ label = "S(b)" ];\n\tLR_6 -> LR_5 [ label = "S(a)" ];\n\tLR_7 -> LR_8 [ label = "S(b)" ];\n\tLR_7 -> LR_5 [ label = "S(a)" ];\n\tLR_8 -> LR_6 [ label = "S(b)" ];\n\tLR_8 -> LR_5 [ label = "S(a)" ];\n}\n'}}};const yYe=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"getTemplates",value:function(e){return bYe[e]||null}}])}(),wYe=function(e){var t=e.type;return Gu().createElement("span",{className:"ne-text-diagram-name"},function(e){var t=hYe.TEXT_DIAGRAMS.find((function(t){return t.type===e}));return t?t.name:""}(t))};var AYe=hYe.EDITOR_LAYOUT;const kYe=function(e){var t=e.hotkeys,n=e.layout,r=e.handlePreviewButtonClick;return Gu().createElement(Qx,{title:of(t.preview)},Gu().createElement("button",{"data-testid":"ne-text-diagram-preview",size:"small",type:"button",className:nk()({"ne-text-diagram-action-preview":!0,"ne-text-diagram-action-preview-active":n===AYe.TWO_COLUMN}),onClick:r},Gu().createElement(SC,{type:"preview-new"}),sc("预览")))},_Ye=function(e){var t=e.collapsed,n=e.onClick;return Gu().createElement("span",{className:nk()("ne-text-diagram-resize",{collapsed:t})},Gu().createElement("span",{className:"ne-text-diagram-resize-handler",onClick:n},Gu().createElement(SC,{type:"collapsed"})))},CYe=function(e){var t=e.type,n=e.getPopupContainer,r=e.switchType;return Gu().createElement(Ex,{trigger:["click"],getPopupContainer:n,placement:"bottomLeft",overlay:Gu().createElement(cP,{onClick:function(e){var t=e.key;e.domEvent.stopPropagation(),r(t)}},hYe.TEXT_DIAGRAMS.map((function(e){return Gu().createElement(cP.Item,{key:e.type,name:e.name.toLowerCase(),value:e.type,"data-diagram-type":e.name},e.name)})))},Gu().createElement("a",{"data-testid":"ne-text-diagram-select",className:"ne-diagram-select"},function(e){for(var t=hYe.TEXT_DIAGRAMS,n=0,r=t.length;n<r;n++){var o=t[n];if(o.type===e)return o.name}return t[0].name}(t)," ",Gu().createElement(SC,{type:"arrow-down",size:16})))};var NYe=hYe.EDITOR_MODE;const OYe=function(e){var t=e.type,n=e.mode,r=e.getPopupContainer,o=e.switchTemplate,i=yYe.getTemplates(t);return i?Gu().createElement(xx,{trigger:["click"],getPopupContainer:r,disabled:n!==NYe.CODE,placement:"bottomLeft",overlay:Gu().createElement(uP,{"data-templates-menu":t,onClick:function(e){var t=e.key;e.domEvent.stopPropagation(),o(t)}},Object.values(i).map((function(e){return Gu().createElement(uP.Item,{key:e.id,"data-template":e.id},e.name)})))},Gu().createElement("a",{"data-testid":"ne-text-diagram-templates",className:"ne-text-diagram-template-selector"},sc("模板")," ",Gu().createElement(SC,{type:"arrow-down",size:16}))):null};function xYe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,EYe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function EYe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(EYe=function(){return!!e})()}var DYe=oUe()("ne:text-diagram:editor"),PYe=hYe.EDITOR_MODE,RYe=hYe.EDITOR_LAYOUT,SYe=hYe.TEXT_DIAGRAM_TYPES,TYe=function(e){function t(e){var n;(0,Ke.A)(this,t),n=xYe(this,t,[e]),Object.defineProperty(n,"rootRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(n,"editorRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(n,"bodyRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(n,"codeBoxRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(n,"instance",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"codeMirror",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"_clearFn",{enumerable:!0,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(n,"onCodeChange",{enumerable:!0,configurable:!0,writable:!0,value:Qm()((function(e,t){"setValue"!==(null==t?void 0:t.origin)&&n.codeMirror&&n.props.onChange(n.codeMirror.getValue())}),3e3)}),Object.defineProperty(n,"syncCardDataToViewState",{enumerable:!0,configurable:!0,writable:!0,value:function(){n.switchType(n.props.cardData.type),n.codeMirror&&n.codeMirror.getValue()!==n.props.cardData.code&&n.codeMirror.setValue(n.props.cardData.code)}}),Object.defineProperty(n,"setCursorPosition",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t,r;e!==aM?e!==lM||null===(r=n.codeMirror)||void 0===r||r.setSelectionToEnd():null===(t=n.codeMirror)||void 0===t||t.setSelectionToStart()}}),Object.defineProperty(n,"getViewState",{enumerable:!0,configurable:!0,writable:!0,value:function(){return{code:n.codeMirror?n.codeMirror.getValue():n.props.cardData.code,type:n.state.type}}}),Object.defineProperty(n,"needPreview",{enumerable:!0,configurable:!0,writable:!0,value:function(){return n.props.layout===RYe.TWO_COLUMN}}),Object.defineProperty(n,"focusEditor",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e;null===(e=n.codeMirror)||void 0===e||e.focus()}}),Object.defineProperty(n,"switchType",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t;if(e!==n.state.type){var r=n.getCodeMirrorMode(e);DYe("switch diagram type",{type:e,syntax:r}),n.setState({type:e,mode:PYe.CODE,codeForPreview:null}),null===(t=n.codeMirror)||void 0===t||t.setOption("mode",r),n.props.onDiagramTypeChange(e)}}}),Object.defineProperty(n,"switchLayout",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n.setState({mode:PYe.CODE}),n.focusEditor(),e===RYe.TWO_COLUMN&&n.doPreview(),n.codeMirror&&n.codeMirror.refresh()}}),Object.defineProperty(n,"switchTemplate",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t,r=yYe.getTemplates(n.state.type);if(r){var o=r[e].text.trim();null===(t=n.codeMirror)||void 0===t||t.setValue(o),n.props.onChange(o),n.focusEditor()}}}),Object.defineProperty(n,"switchView",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t,r=null===(t=n.instance)||void 0===t?void 0:t.getValue();n.setState({mode:e,codeForPreview:e===PYe.PREVIEW?r:null})}}),Object.defineProperty(n,"doPreview",{enumerable:!0,configurable:!0,writable:!0,value:function(){if(n.instance){var e=n.instance.getValue();DYe("preview",e),n.setState({codeForPreview:e})}}}),Object.defineProperty(n,"getHelpUrl",{enumerable:!0,configurable:!0,writable:!0,value:function(){return hYe.TEXT_DIAGRAM_GUIDES[n.state.type]}}),Object.defineProperty(n,"getRootDom",{enumerable:!0,configurable:!0,writable:!0,value:function(){return n.rootRef.current}}),Object.defineProperty(n,"onPreviewDone",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t=e.target,r=function(){return ys((function(){return t.offsetHeight}),(function(e){if(t.parentNode){t.parentNode.style.height=e+"px";var n=t.parentNode.parentNode,r=n.offsetWidth,o=n.scrollWidth;n.scrollLeft=(o-r)/2}}))};if(t.isConnected)r();else{var o=function(){t.isConnected&&(r(),n._clearFn())};n.props.renderer.on("activeNodesChange",o),n._clearFn=function(){n.props.renderer.off("activeNodesChange",o)}}}}),Object.defineProperty(n,"handlePreviewButtonClick",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=n.props.layout,t="";e===RYe.TWO_COLUMN&&(t=RYe.DEFAULT),e===RYe.DEFAULT&&(t=RYe.TWO_COLUMN),t===RYe.TWO_COLUMN?n.doPreview():(n.codeBoxRef.current&&(n.codeBoxRef.current.style.display="block"),n.setState({collapsed:!1},(function(){var e,t;null===(t=(e=n.props).onCollapseChange)||void 0===t||t.call(e,!1)}))),t&&n.props.onSwitchChange(t)}}),Object.defineProperty(n,"needShowCodePanel",{enumerable:!0,configurable:!0,writable:!0,value:function(){return n.props.layout===RYe.TWO_COLUMN||n.state.mode===PYe.CODE}}),Object.defineProperty(n,"needShowPreviewPanel",{enumerable:!0,configurable:!0,writable:!0,value:function(){return n.props.layout===RYe.TWO_COLUMN||n.state.mode===PYe.PREVIEW}}),Object.defineProperty(n,"renderPreview",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=n.state,t=e.mode,r=e.type,o=e.codeForPreview;return n.props.layout===RYe.DEFAULT&&t===PYe.CODE?null:o?Gu().createElement(gYe,{type:r,code:o,preview:n.props.preview,onBeforeRenderImage:n.props.onBeforeRenderImage,onLoad:n.onPreviewDone}):null}}),Object.defineProperty(n,"_handleToggleCollapsed",{enumerable:!0,configurable:!0,writable:!0,value:function(){n.state.collapsed&&n.codeBoxRef.current&&(n.codeBoxRef.current.style.display="block"),n.setState({collapsed:!n.state.collapsed},(function(){var e,t;null===(t=(e=n.props).onCollapseChange)||void 0===t||t.call(e,n.state.collapsed)}))}}),Object.defineProperty(n,"_handleTransitionEnd",{enumerable:!0,configurable:!0,writable:!0,value:function(){n.state.collapsed&&n.codeBoxRef.current&&(n.codeBoxRef.current.style.display="none")}}),Object.defineProperty(n,"_handleMouseMove",{enumerable:!0,configurable:!0,writable:!0,value:function(e){if(!n.state.collapsed&&n.bodyRef.current){var t=n.bodyRef.current.querySelector(".ne-text-diagram-resize");if(t){var r=e.clientX;requestAnimationFrame((function(){var e;Math.abs(r-((null===(e=t.getBoundingClientRect())||void 0===e?void 0:e.left)||Number.MAX_VALUE)+4.5)<=20?t.style.visibility="visible":t.style.visibility=null}))}}}});var r=e.cardData;return n.state={mode:PYe.CODE,type:r.type||SYe.PUML,codeForPreview:null,collapsed:r.collapse||!1},n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){this.initEditor()}},{key:"componentDidUpdate",value:function(e){var t,n,r=this.props,o=r.layout,i=r.focus,a=r.isDark;o!==e.layout&&this.switchLayout(o),i&&i!==e.focus&&this.focusEditor(),a!==e.isDark&&this.codeMirror&&(null===(n=null===(t=this.codeMirror)||void 0===t?void 0:t.setOption)||void 0===n||n.call(t,"theme",a?"Darcula":"default"))}},{key:"componentWillUnmount",value:function(){this._clearFn()}},{key:"initEditor",value:function(){var e,t;return function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,Cc().mark((function n(){var r,o,i,a,l,u=this;return Cc().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=this.editorRef.current,o=this.props.cardData,i=this.getOptions(o.type),a=Qm()((function(){u.doPreview()}),300),window.CodeMirror){n.next=7;break}return n.next=7,_f(kf[c="codemirror"]?kf[c]:c,void 0);case 7:l=window.CodeMirror.default.fromTextArea(r,i),setTimeout((function(){return l.refresh()}),100),l.on("change",(function(e,t){u.onCodeChange(e,t),u.needPreview()&&a()})),l.on("focus",(function(){u.props.onFocus()})),l.on("blur",(function(){u.onCodeChange.cancel();var e=l.getValue();u.props.onBlur(e)})),l.on("rightOut",(function(){u.props.onExitCardByKeyboard(lM)})),l.on("leftOut",(function(){u.props.onExitCardByKeyboard(aM)})),this.codeMirror=l,this.props.focus&&this.codeMirror.focus(),this.instance={getValue:function(){return l.getValue()},doPreview:function(){u.doPreview()}},this.needPreview()&&a(),null===(t=(e=this.props).onLoad)||void 0===t||t.call(e,{editor:this.instance});case 19:case"end":return n.stop()}var c}),n,this)})))}},{key:"heightChanged",value:function(){this.codeMirror&&this.codeMirror.refresh()}},{key:"getCodeMirrorMode",value:function(e){return hYe.TEXT_DIAGRAM_SYNTAX[e]||"simplemode"}},{key:"getOptions",value:function(e){return{tabSize:2,theme:this.props.isDark?"Darcula":"default",mode:this.getCodeMirrorMode(e),lineNumbers:!0,lineWrapping:!1,indentWithTabs:!0,styleActiveLine:!1,matchBrackets:!0,autofocus:!1,dragDrop:!1,readOnly:!1,maxHighlightLength:2048,viewportMargin:1/0}}},{key:"render",value:function(){var e=this,t=this.state,n=t.type,r=t.mode,o=t.collapsed,i=this.props,a=i.layout,l=i.cardData,u={preview:["cmd","p"]};return Gu().createElement("div",{className:"ne-text-diagram-stage ne-text-diagram-layout-".concat(a),onKeyDown:function(t){new cf(u.preview).match(t.nativeEvent)&&(t.preventDefault(),e.handlePreviewButtonClick())},ref:this.rootRef,"data-text-diagram-layout":a,"data-text-diagram-type":this.state.type},Gu().createElement("div",{ref:this.bodyRef,className:"ne-text-diagram-editor-wrap",onClick:this.focusEditor,onMouseMove:this._handleMouseMove},Gu().createElement("div",{ref:this.codeBoxRef,"data-testid":"ne-text-diagram-code",className:"ne-text-diagram-editor ne-code",onTransitionEnd:this._handleTransitionEnd,style:{width:o?0:void 0,display:"block"}},Gu().createElement("textarea",{value:l.code,ref:this.editorRef,autoComplete:"off",tabIndex:1,readOnly:!0})),Gu().createElement(_Ye,{collapsed:o,onClick:this._handleToggleCollapsed}),Gu().createElement("div",{className:"ne-text-diagram-preview",style:{width:o?"100%":"50%",display:this.needShowPreviewPanel()?"flex":"none"}},this.renderPreview())),Gu().createElement(K_e,{actions:[this.props.canChangeType?Gu().createElement(CYe,{key:"diagram-select",type:n,switchType:this.switchType}):Gu().createElement(wYe,{key:"diagram-name",type:n}),Gu().createElement(OYe,{key:"template-select",type:n,mode:r,switchTemplate:this.switchTemplate}),Gu().createElement(kYe,{key:"diagram-preview",layout:a,hotkeys:u,handlePreviewButtonClick:this.handlePreviewButtonClick})]},sc("文本绘图")))}}])}(Yu.PureComponent);function jYe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(jYe=function(){return!!e})()}Object.defineProperty(TYe,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{layout:RYe.DEFAULT,canChangeType:!0,onChange:function(){},onDiagramTypeChange:function(){},onBlur:function(){},onFocus:function(){},onBeforeRenderImage:function(){},onLoad:function(){},onImageLoad:function(){}}});var IYe=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))},BYe=oUe()("ne:text-diagram:eui");function MYe(e){return function(e){function t(){var e;return(0,Ke.A)(this,t),e=function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,jYe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,arguments),Object.defineProperty(e,"_minHeight",{enumerable:!0,configurable:!0,writable:!0,value:127}),Object.defineProperty(e,"_layout",{enumerable:!0,configurable:!0,writable:!0,value:hYe.EDITOR_LAYOUT.TWO_COLUMN}),Object.defineProperty(e,"uiViewProxy",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"syncCardDataToViewState",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n,r;t||null===(r=null===(n=e.uiViewProxy)||void 0===n?void 0:n.getReactRef())||void 0===r||r.syncCardDataToViewState()}}),Object.defineProperty(e,"syncViewStateToCardData",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=e.uiViewProxy.getReactRef().getViewState(),n=t.code,r=t.type;n===e.cardData.code&&r===e.cardData.type||(e.cardData.update({code:n,type:r}),e.cardData.sync(!0))}}),Object.defineProperty(e,"blur",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t;BYe("blur: sync card data and gen image"),null===(t=e.uiViewProxy)||void 0===t||t.rerender({focus:!1})}}),Object.defineProperty(e,"generateImage",{enumerable:!0,configurable:!0,writable:!0,value:function(t){return IYe(e,void 0,void 0,Cc().mark((function e(){var n;return Cc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.generate(t);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:n.code===this.cardData.code&&(this.cardData.update({url:n.url}),this.cardData.sync(!1));case 6:case"end":return e.stop()}}),e,this)})))}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e=this;BYe("init use",this.cardData),this.cardData.on("change",this.syncCardDataToViewState),this.cardData.on("heightChange",(function(){var t,n;null===(n=null===(t=e.uiViewProxy)||void 0===t?void 0:t.getReactRef())||void 0===n||n.heightChanged()})),this.uiViewProxy=Vye.render(TYe,{renderer:this.editor.renderer,cardData:this.cardData,layout:this._layout,focus:!1,isDark:this.editor.theme.isDark(),onChange:function(t){e.cardData.update({code:t,url:null}),e.cardData.sync(!0)},onImageLoad:function(t){e._minHeight=Math.max(127,t+38+24+2)||127,e.onImageLoad()},onSwitchChange:function(t){var n;e._layout=t,null===(n=e.uiViewProxy)||void 0===n||n.rerender({layout:t}),e.onTogglePreview()},onCollapseChange:function(t){e.cardData.update({collapse:t}),e.cardData.sync(!0)},onBlur:function(t){e.cardData.update({code:t,url:null}),e.cardData.sync(!1),e.generateImage(e.cardData.toGraph())},onDiagramTypeChange:function(t){e.cardData.update({type:t,url:null}),e.cardData.sync(!1)},onBeforeRenderImage:this.pluginOption.onBeforeRenderImage,onFocus:function(){},preview:this.preview,onExitCardByKeyboard:function(t){e.focusCardTo(t)}},this.containerNode),xc(this,this.editor.theme,"themeChange",(function(){var t;e.destroyed||null===(t=e.uiViewProxy)||void 0===t||t.rerender({isDark:e.editor.theme.isDark()})}))}},{key:"onImageLoad",value:function(){}},{key:"onTogglePreview",value:function(){}},{key:"preview",value:function(e){return BYe(e),Promise.resolve({success:!1,message:""})}},{key:"generate",value:function(e){return BYe(e),null}},{key:"destroy",value:function(){var e;null===(e=this.uiViewProxy)||void 0===e||e.destroy(),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}},{key:"focus",value:function(){var e,t,n;null===(e=this.uiViewProxy)||void 0===e||e.rerender({focus:!0}),this.focusByKeyboard&&(null===(n=null===(t=this.uiViewProxy)||void 0===t?void 0:t.getReactRef())||void 0===n||n.setCursorPosition(this.focusByKeyboard))}}])}(e)}function FYe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,LYe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function LYe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(LYe=function(){return!!e})()}var UYe=oUe()("ne:text-diagram:node"),VYe=function(e){function t(e){var n;(0,Ke.A)(this,t);for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return n=FYe(this,t,[].concat(o)),Object.defineProperty(n,"editor",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(n,"_ui",{enumerable:!0,configurable:!0,writable:!0,value:null}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){this.pluginOption.editUI&&(t.$EditableCardUI=this.pluginOption.editUI),this._ui=this.editor.createCardUI(this),UYe("inited, init value: ",this.value)}},{key:"destroy",value:function(){var e;null===(e=this._ui)||void 0===e||e.destroy(),this._ui=null}},{key:"sync",value:function(){var e;return!this.editor.engine.nodeIsInTree(this.viewNode)||(this.hasInitUI&&(null===(e=this._ui)||void 0===e||e.syncViewStateToCardData()),!0)}}])}(Fy);Object.defineProperty(VYe,"$EditableCardUI",{enumerable:!0,configurable:!0,writable:!0,value:Hh.extend(MYe)}),Object.defineProperty(VYe,"$CardData",{enumerable:!0,configurable:!0,writable:!0,value:Mue}),Object.defineProperty(VYe,"$ExternalFocus",{enumerable:!0,configurable:!0,writable:!0,value:!0});const HYe=VYe;var zYe={host:window.location.origin,convertSvgImage:!1,onBeforeRenderImage:function(e){return e}},WYe=function(){return(0,$e.A)((function e(t,n){(0,Ke.A)(this,e),Object.defineProperty(this,"kernelOption",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"_options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"host",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onBeforeRenderImage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._options=Ww()({},zYe,t),this.onBeforeRenderImage=this._options.onBeforeRenderImage,this.host=this._options.host}),[{key:"convertSvgImage",get:function(){return!!this._options.convertSvgImage}},{key:"editUI",get:function(){return this._options.editUI}},{key:"viewerUI",get:function(){return this._options.viewerUI}}])}();Object.defineProperty(WYe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:eM.TEXT_DIAGRAM.OPTION_NAME});const qYe=WYe;function $Ye(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,KYe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function KYe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(KYe=function(){return!!e})()}var YYe=function(e){function t(){return(0,Ke.A)(this,t),$Ye(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){var n;t.registerBlockCard(this,Zse.node,{factory:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return vl(HYe,[e].concat(n))},pluginContext:{}}),null===(n=e.getService(xEe.ID))||void 0===n||n.registerCardSelect(Zse.cardSelect,{type:"TextItem",icon:"editor-main-text-drawing",label:sc("文本绘图"),description:sc("支持PlantUML、Mermaid等"),mainSearch:"/wbht",keywords:["文本绘图","wenbenhuitu","wbht","ht","plantuml","puml","graphviz","mermaid","flowchart"]});var r=hYe.TEXT_DIAGRAMS;e.onPluginEvent("insertCardByUI:".concat(Zse.cardSelect),(function(t){var n=t.inputValue,o={};if(n){var i=n.toLowerCase();r.forEach((function(e){var t=e.type,n=e.name;(t.toLowerCase().startsWith(i)||n.toLowerCase().startsWith(i))&&(o.type=t)}))}var a=Mue.createStandardCardValue(o);e.execCommand("insertCard",Zse.node,a,!0)}))}},{key:"sync",value:function(){return this.cardNodes.forEach((function(e){e.sync()})),!0}}])}(Fh);Object.defineProperty(YYe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:Zse.pluginName}),Object.defineProperty(YYe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:qYe});const GYe=YYe;var JYe=function(){return{cantPlay:sc("音频文件不能播放"),copyright:sc("由于版权保护，不支持在公开文档中直接播放该音频，可点击文件名播放"),failedToQuery:sc("查询失败"),query:sc("查询音频信息中..."),invalidAudio:sc("无效音频，请重新上传"),notSupport:sc("此处不支持播放音频，可点击文件名播放"),uploading:sc("上传中"),transcodeError:sc("转码失败"),uploadError:sc("上传失败")}},XYe=JYe();ac.on(ic.CHANGE,(function(){XYe=JYe()}));const QYe=XYe;var ZYe=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))};function eGe(e,t){return ZYe(this,void 0,void 0,Cc().mark((function n(){var r;return Cc().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,new Promise((function(n){ns({method:"get",url:t,data:{video_id:e},success:function(e){"success"===e.data.status?n({done:!0,data:e.data.info}):"fail"===e.data.status?n({error:!0}):"transcoding"===e.data.status&&n({done:!1})},error:function(e){console.error(e),n({error:!0})}})}));case 2:if(!("error"in(r=n.sent))){n.next=5;break}return n.abrupt("return",{success:!1});case 5:if(!r.done){n.next=7;break}return n.abrupt("return",{success:!0,data:r.data});case 7:return n.abrupt("return",null);case 8:case"end":return n.stop()}}),n)})))}function tGe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,nGe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function nGe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nGe=function(){return!!e})()}var rGe=function(e){function t(e){var n;(0,Ke.A)(this,t),n=tGe(this,t,[e]),Object.defineProperty(n,"uploadTask",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"handleUploadStart",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e,t;n.setState({percent:0}),null===(t=(e=n.props).onUploadStart)||void 0===t||t.call(e)}}),Object.defineProperty(n,"handleUploadError",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t,r,o=e;e?o.message=n.props.message.uploadError:o={message:n.props.message.uploadError},null===(r=(t=n.props).onUploadError)||void 0===r||r.call(t,o)}}),Object.defineProperty(n,"handleUploadSuccess",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t,r;null===(r=(t=n.props).onUploadSuccess)||void 0===r||r.call(t,e)}}),Object.defineProperty(n,"handleUploadProgress",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n.setState({percent:e})}});var r=e.cardData.getTaskId(),o=e.cardData.isCompleted();return r&&!o&&(n.uploadTask=e.uploadObserver.observe(r)),n.state={percent:0},n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){this.uploadTask&&(sd(this,this.uploadTask,"start",this.handleUploadStart),sd(this,this.uploadTask,"progress",this.handleUploadProgress),sd(this,this.uploadTask,"success",this.handleUploadSuccess),sd(this,this.uploadTask,"error",this.handleUploadError),sd(this,this.uploadTask,"timeout",this.handleUploadError))}},{key:"renderCopyrightDeniedErrorView",value:function(){var e=this.state.percent,t=this.props.ErrorComponent;return Gu().createElement(t,{status:ace,audio:this.props.cardData.getAudioInfo(),audioURL:this.props.audioUrl,message:this.props.message,progress:e,visitLink:this.props.visitLink})}},{key:"renderErrorView",value:function(){var e=this.props.ErrorComponent;return Gu().createElement(e,{status:ece,audio:this.props.cardData.getAudioInfo(),audioURL:this.props.audioUrl,message:this.props.message,errorMessage:this.props.cardData.getErrorMessage(),visitLink:this.props.visitLink})}},{key:"render",value:function(){var e=this.props,t=e.cardData,n=e.allowAudioPlayer,r=e.audioUrl,o=e.message,i=e.uiStatus,a=e.PlayerComponent,l=this.state.percent,u=t.getErrorMessage(),c=t.getAudioInfo(),s=this.props.cardData.getStatus();return c.url=r,t.getId()&&s!==ece&&(s=rce),s===ece?this.renderErrorView():n?Gu().createElement(a,{audioInfo:c,status:s,uiStatus:i,progress:l,message:o,visitLink:this.props.visitLink,errorMessage:u}):this.renderCopyrightDeniedErrorView()}}])}(Yu.Component);function oGe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(oGe=function(){return!!e})()}function iGe(e){return function(e){function t(){var e;return(0,Ke.A)(this,t),e=function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,oGe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,arguments),Object.defineProperty(e,"uiViewProxy",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_uploadObserver",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_audioUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_downloadUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_QueryingUrl",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_stopQuery",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"downloadFile",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=e._downloadUrl||e._audioUrl;t&&yh.openUrl(t)}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this;this._uploadObserver=e,this.uiViewProxy=Vye.render(rGe,{cardData:this.cardData,uploadObserver:this._uploadObserver,audioUrl:this._audioUrl,message:QYe,onUploadStart:function(){t.emit("uploadStart")},onUploadSuccess:function(e){t.emit("uploadSuccess",e)},onUploadError:function(e){t.emit("uploadError",e)},allowAudioPlayer:this.pluginOption.allowAudioPlayer,ErrorComponent:this.pluginOption.errorComponent,PlayerComponent:this.pluginOption.playerComponent,visitLink:function(e,n){return t.editor.emitEvent("visitLink",e,n)}},this.containerNode)}},{key:"onUrlUpdate",value:function(){}},{key:"destroy",value:function(){this.containerNode&&Gl().unmountComponentAtNode(this.containerNode),this.uiViewProxy=null,Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}},{key:"focus",value:function(){var e;null===(e=Tr((0,Je.A)(t.prototype),"focus",this))||void 0===e||e.call(this)}},{key:"blur",value:function(){var e;null===(e=Tr((0,Je.A)(t.prototype),"blur",this))||void 0===e||e.call(this)}}])}(e)}function aGe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,lGe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function lGe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(lGe=function(){return!!e})()}var uGe=function(e){function t(e){var n;(0,Ke.A)(this,t);for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return n=aGe(this,t,[].concat(o)),Object.defineProperty(n,"editor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_cardUI",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"_task",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"_clearId",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(n,"_inQuerying",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(n,"handleUploadStart",{enumerable:!0,configurable:!0,writable:!0,value:Qm()((function(){n.cardData.getStatus()!==nce&&(n.cardData.setStatus(nce),n.cardData.sync(!0))}))}),Object.defineProperty(n,"handleUploadSuccess",{enumerable:!0,configurable:!0,writable:!0,value:Qm()((function(e){n.cardData.setId(e.video_id||e.audioId),n.cardData.setStatus(rce),e.filesize&&n.cardData.setFileSize(e.filesize),e.filename&&n.cardData.setFileName(e.filename),n.cardData.sync(!0),n.pluginOption.queryAudioUrl&&(clearTimeout(n._clearId),n.queryAudioUrlByOption())}))}),Object.defineProperty(n,"handleUploadError",{enumerable:!0,configurable:!0,writable:!0,value:Qm()((function(e){e.message&&n.cardData.setErrorMessage(e.message),n.cardData.setStatus(ece),n.cardData.sync(!0)}))}),Object.defineProperty(n,"queryAudioUrlByOption",{enumerable:!0,configurable:!0,writable:!0,value:function(){bt.fatal(n.pluginOption.queryAudioUrl,"plugins/audio/src/editor/audio-card-node.ts:157");var e=n.cardData.getAudioInfo();(null==e?void 0:e.url)||(null==e?void 0:e.id)?n._inQuerying||(n._inQuerying=!0,n.pluginOption.queryAudioUrl(n.cardData).then((function(e){var t=e.audioUrl,r=e.downloadUrl;n._inQuerying=!1,n.onTranscodeSuccess({success:!0,data:{audio:t,origin:r}})})).catch((function(e){n._inQuerying=!1,n.onTranscodeError(e)}))):n._clearId=setTimeout(n.queryAudioUrlByOption,3e3)}}),Object.defineProperty(n,"tryPollingAudioUrl",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e;n._cardUI._audioUrl||!n.cardData.getId()||n._cardUI._QueryingUrl||n._cardUI._stopQuery||(n.pollingAudioUrl(),n._cardUI._QueryingUrl=!0,null===(e=n._cardUI.uiViewProxy)||void 0===e||e.rerender({uiStatus:oce}))}}),Object.defineProperty(n,"pollingAudioUrl",{enumerable:!0,configurable:!0,writable:!0,value:function(){n._cardUI._QueryingUrl||n._cardUI._stopQuery||(n._cardUI._QueryingUrl=!0,eGe(n.cardData.getId(),n.pluginOption.queryUrl).then((function(e){var t;(null===(t=n._cardUI)||void 0===t?void 0:t.destroyed)||(n._cardUI._QueryingUrl=!1,e&&e.success?(n._cardUI._stopQuery=!0,n.onTranscodeSuccess(e)):e&&!e.success?(n._cardUI._stopQuery=!0,n.onTranscodeError(Object.assign(Object.assign({},e),{message:QYe.transcodeError}))):setTimeout((function(){n.pollingAudioUrl()}),3e3))})))}}),Object.defineProperty(n,"onTranscodeSuccess",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t,r;n._cardUI._audioUrl=e.data.audio,n._cardUI._downloadUrl=e.data.origin,null===(t=n._cardUI.uiViewProxy)||void 0===t||t.rerender({audioUrl:e.data.audio,uiStatus:ice}),n.cardData.setStatus(rce),n.cardData.sync(!0),null===(r=n._cardUI)||void 0===r||r.onUrlUpdate()}}),Object.defineProperty(n,"onTranscodeError",{enumerable:!0,configurable:!0,writable:!0,value:function(e){e.message&&n.cardData.setErrorMessage(e.message),n.cardData.setStatus(ece),n.cardData.sync(!0)}}),n.editor=e,n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e=this;this.pluginOption.editUI&&(t.$EditableCardUI=this.pluginOption.editUI);var n=this.editor.requireService(oDe.ID);this._cardUI=this.editor.createCardUI(this,n.uploadObserver);var r=this.cardData.getTaskId(),o=this.cardData.isCompleted();r&&!o&&(this._task=n.uploadObserver.observe(r),this._task.on("start",(function(){return e.handleUploadStart()})),this._task.on("success",(function(t){return e.handleUploadSuccess(t)})),this._task.on("error",(function(t){return e.handleUploadError(t)})),this._task.on("timeout",(function(){return e.handleUploadError("failed to upload")}))),this._cardUI.on("uploadStart",(function(){return e.handleUploadStart()})),this._cardUI.on("uploadSuccess",(function(t){return e.handleUploadSuccess(t)})),this._cardUI.on("uploadError",(function(t){return e.handleUploadError(t)})),this.pluginOption.queryAudioUrl?this.queryAudioUrlByOption():(this.tryPollingAudioUrl(),this.cardData.on("change",this.tryPollingAudioUrl))}},{key:"destroy",value:function(){var e;this._task&&(this._task.abort(),this._task=null),null===(e=this._cardUI)||void 0===e||e.destroy(),this._cardUI=null,clearTimeout(this._clearId)}},{key:"$blur",value:function(){Tr((0,Je.A)(t.prototype),"$blur",this).call(this)}},{key:"sync",value:function(){return!this.editor.engine.nodeIsInTree(this.viewNode)||this.cardData.isCompleted()}}])}(Fy);Object.defineProperty(uGe,"$EditableCardUI",{enumerable:!0,configurable:!0,writable:!0,value:Hh.extend(iGe)}),Object.defineProperty(uGe,"$CardData",{enumerable:!0,configurable:!0,writable:!0,value:sce});var cGe=function(e){var t=e.status,n=e.message,r=e.errorMessage,o=e.audio,i=e.audioURL,a=e.progress,l=e.visitLink;return Gu().createElement("div",{className:"ne-card-audio-error","data-error-type":t},t===ace?function(){if(!(null==o?void 0:o.id)&&!i)return Gu().createElement(Gu().Fragment,null,Gu().createElement("div",{className:"error-icon"},Gu().createElement("span",{className:"ne-card-audio-svg-icon ne-card-audio-icon"})),Gu().createElement("div",{className:"uploading-message"},Gu().createElement("span",{className:"ne-card-audio-icon-loading"}),a?"".concat((null==n?void 0:n.uploading)||""," ").concat(a,"%"):(null==n?void 0:n.uploading)||""));var e;return e=i?Gu().createElement(Gu().Fragment,null,Gu().createElement("div",{className:"audio-info"},Gu().createElement("a",{href:kh(i),target:"_blank",onClick:function(e){e.preventDefault(),e.stopPropagation(),l(kh(i),!0)}},(null==o?void 0:o.fileName)||(null==n?void 0:n.copyright)||"untitled audio"))):Gu().createElement("div",{className:"query"},Gu().createElement("span",{className:"ne-card-audio-icon-loading"}),null==n?void 0:n.query),Gu().createElement(Gu().Fragment,null,Gu().createElement("div",{className:"error-icon"},Gu().createElement("span",{className:"ne-card-audio-svg-icon ne-card-audio-icon",style:{backgroundImage:"url(".concat(Fw["ne-card-audio-icon"],")")}})),Gu().createElement("div",{className:"error-message"},e))}():Gu().createElement(Gu().Fragment,null,Gu().createElement("div",{className:"error-icon"},Gu().createElement("span",{className:"ne-card-audio-svg-icon ne-card-audio-error-icon",style:{backgroundImage:"url(".concat(Fw["ne-card-audio-error-icon"],")")}})),Gu().createElement("div",{className:"error-message"},r||(null==n?void 0:n.cantPlay)||"")))};function sGe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,dGe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function dGe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(dGe=function(){return!!e})()}var fGe=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=sGe(this,t),Object.defineProperty(r,"upload",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(r,"_data",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(r,"_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r._id=Dr(),r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"file",get:function(){return this._data}},{key:"run",value:function(){return function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,Cc().mark((function e(){var t,n=this;return Cc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._data,this.emit(kte.EVENT_START,t),e.next=4,this.upload(t,(function(e){n.emit(kte.EVENT_PROGRESS,Math.floor(1e4*e)/100)})).then((function(e){return n.emit(kte.EVENT_SUCCESS,e),e}),(function(e){n.emit(kte.EVENT_ERROR,e)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})))}}])}(kte);function hGe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,pGe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function pGe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pGe=function(){return!!e})()}var vGe={createUploadTask:null,uploadFileURL:null,queryURL:null,allowAudioPlayer:!1,addsOnParams:{},accept:null,errorComponent:cGe,playerComponent:function(e){var t=e.status,n=e.uiStatus,r=e.progress,o=e.audioInfo,i=e.message,a=e.errorMessage,l=e.visitLink;return t===nce||n===oce?Gu().createElement(Gu().Fragment,null,Gu().createElement("div",{className:"ne-default-audio-loading"},Gu().createElement(SC,{type:"icon-loading-desk",size:32}),(null==o?void 0:o.fileName)||"untitled"," ","\t",Dh((null==o?void 0:o.fileSize)||0)),Gu().createElement("div",{className:"ne-audio-progress"},!!r&&Gu().createElement("div",{className:"ne-audio-progress-inner",style:{width:"".concat(r,"%")}}))):t===rce&&(null==o?void 0:o.url)?Gu().createElement("div",{className:"ne-default-audio"},Gu().createElement("audio",{controls:!0,key:"url: ".concat((null==o?void 0:o.url)||""),src:o.url}),o.fileName&&Gu().createElement("span",null,"「",o.fileName,"」-",Dh(o.fileSize||0))):Gu().createElement(cGe,{status:ece,message:i,errorMessage:a,visitLink:l,audio:o})}},mGe=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=hGe(this,t),Object.defineProperty(n,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n._option=Ww()({},vGe,e),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"queryAudioUrl",get:function(){return this._option.queryAudioUrl}},{key:"createUploadTask",value:function(e){var t,n=this._option,r=n.uploadFileURL,o=n.queryURL,i=n.createUploadTask,a=n.createUploadPromise,l=n.addsOnParams;return t="function"==typeof l?l():l,i?i(e):a?new fGe(a,e):(bt.fatal(r&&o,"if no custom createUploadTask, uploadFileURL and queryURL are required","plugins/audio/src/common/audio-option.ts:61"),new PSe(r,e,t,o))}},{key:"queryUrl",get:function(){return this._option.queryURL}},{key:"allowAudioPlayer",get:function(){return this._option.allowAudioPlayer}},{key:"uploadExtraParams",get:function(){return this._option.uploadExtraParams}},{key:"accept",get:function(){return this._option.accept}},{key:"editUI",get:function(){return this._option.editUI}},{key:"viewerUI",get:function(){return this._option.viewerUI}},{key:"errorComponent",get:function(){return this._option.errorComponent}},{key:"playerComponent",get:function(){return this._option.playerComponent}}])}(it);Object.defineProperty(mGe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:eM.AUDIO.OPTION_NAME});var gGe=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=hGe(this,t,[e]),Object.defineProperty(r,"kernelOption",{enumerable:!0,configurable:!0,writable:!0,value:n}),r}return(0,Xe.A)(t,e),(0,$e.A)(t)}(mGe);Object.defineProperty(gGe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:eM.AUDIO.OPTION_NAME});var bGe=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"uploadAudioFile",value:function(e,t){var n=e.option.audio,r=e.requireService(oDe.ID);return t.map((function(e){var t=n.createUploadTask(e);return r.uploadManager.addTask(t),t}))}}])}();function yGe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,wGe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function wGe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wGe=function(){return!!e})()}var AGe=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=yGe(this,t),Object.defineProperty(n,"editor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n.editor=e,n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"preReadFile",value:function(e,t,n){if(("audio"===(null==n?void 0:n.category)||"localDoc"===(null==n?void 0:n.category))&&(null==n?void 0:n.from)===LT){if(!e.checkFileSize(sM.audio,t.file.size))return!1;var r=bGe.uploadAudioFile(this.editor,[t.file]),o=(0,tn.A)(r,1)[0];return t._$neUploadTask=o,!1}}}])}(UPe);function kGe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,_Ge()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function _Ge(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_Ge=function(){return!!e})()}var CGe=function(e){function t(){return(0,Ke.A)(this,t),kGe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){var n=e.kernel.requireService(dse.ID);t.registerBlockCard(this,ede.cardName,{factory:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return vl(uGe,[e].concat(n))}});var r=e.kernel.getService(ET.ID);null==r||r.registerPreFileReader(n.getFileAcceptUtil().getAudioFileAccept(this.option.accept),new AGe(e));var o=e.getService(xEe.ID);if(o){var i=n.getFileAcceptUtil().getAudioFileAccept(this.option.accept),a=!i.length;o.registerCardSelect(ede.cardSelect,{type:"FileItem",icon:"editor-main-local-audio",label:sc("本地音频"),description:a?function(){var t,n,r=(null===(n=(t=e).getUIInjector)||void 0===n?void 0:n.call(t,fh))||gh.get(fh);return r?r():null}:sc("音频导入"),isVip:this.editor.option.env===oM&&!this.editor.option.hideVipIcon,mainSearch:"/yp",name:ede.cardSelect,multiple:!0,accept:i,disabled:a,keywords:"音频,本地音频,yp,bendi,yinpin,bdyp,audio,mp3,sound,music,flac,local"})}}},{key:"sync",value:function(){return 0===this.cardNodes.filter((function(e){return!1===e.sync()})).length}}])}(Fh);function NGe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,OGe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function OGe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(OGe=function(){return!!e})()}Object.defineProperty(CGe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:ede.pluginName}),Object.defineProperty(CGe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:mGe});var xGe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=NGe(this,t,arguments),Object.defineProperty(e,"renderSimpleMode",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=e.props,n=t.audioUrl,r=t.cardData;if(n){var o=r.getAudioInfo().fileName;return Gu().createElement("a",{href:yh.sanitizeUrl(n),target:"_blank",onClick:function(t){t.preventDefault(),t.stopPropagation(),e.props.visitLink(yh.sanitizeUrl(n),!0)}},o)}return null}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"renderCopyrightDeniedErrorView",value:function(){var e=this.props.ErrorComponent;return Gu().createElement(e,{status:ace,audio:this.props.cardData.getAudioInfo(),audioURL:this.props.audioUrl,message:this.props.message,visitLink:this.props.visitLink})}},{key:"renderErrorView",value:function(){var e=this.props.ErrorComponent;return Gu().createElement(e,{status:ece,audio:this.props.cardData.getAudioInfo(),audioURL:this.props.audioUrl,message:this.props.message,errorMessage:this.props.cardData.getErrorMessage(),visitLink:this.props.visitLink})}},{key:"render",value:function(){var e=this.props,t=e.allowAudioPlayer,n=e.audioUrl,r=e.message,o=e.PlayerComponent,i=this.props.cardData.getStatus(),a=this.props.cardData.getErrorMessage(),l=this.props.cardData.getAudioInfo();return l.url=n,t?this.props.viewerMode===Vw.Simple?this.renderSimpleMode():Gu().createElement(o,{audioInfo:l,status:i,message:r,errorMessage:a,visitLink:this.props.visitLink}):i===ece?this.renderErrorView():this.renderCopyrightDeniedErrorView()}}])}(Yu.Component);function EGe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(EGe=function(){return!!e})()}function DGe(e){return function(e){function t(){var e;return(0,Ke.A)(this,t),e=function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,EGe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,arguments),Object.defineProperty(e,"_audioUrl",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_downloadUrl",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"uiViewProxy",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"onQueryUrlSuccess",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n;e._audioUrl=t.data.audio,e._downloadUrl=t.data.origin,e.cardData.setStatus(rce),null===(n=e.uiViewProxy)||void 0===n||n.rerender({audioUrl:t.data.audio}),e.cardData.sync(!0),e.onLoaded(),e.loaded()}}),Object.defineProperty(e,"onQueryUrlError",{enumerable:!0,configurable:!0,writable:!0,value:function(t){t.message&&e.cardData.setErrorMessage(t.message),e.cardData.setStatus(ece),e.cardData.sync(!0),e.loaded()}}),Object.defineProperty(e,"queryAudioUrl",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.pluginOption.queryAudioUrl?e.pluginOption.queryAudioUrl(e.cardData).then((function(t){var n=t.audioUrl,r=t.downloadUrl;e.onQueryUrlSuccess({data:{audio:n,origin:r}})})).catch((function(t){e.onQueryUrlError(t)})):eGe(e.cardData.getId(),e.pluginOption.queryUrl).then((function(t){t&&t.success?e.onQueryUrlSuccess(t):e.onQueryUrlError(Object.assign(Object.assign({},t),{message:QYe.failedToQuery}))}))}}),Object.defineProperty(e,"downloadFile",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=e._downloadUrl||e._audioUrl;yh.openUrl(t)}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"isAsyncUI",value:function(){return!0}},{key:"onLoaded",value:function(){}},{key:"init",value:function(){var e=this,t=this.cardData.getStatus();this._audioUrl||t!==rce||this.queryAudioUrl(),this.uiViewProxy=Vye.render(xGe,{visitLink:function(t,n){e.viewer.emitEvent("visitLink",t,n)},cardData:this.cardData,audioUrl:this._audioUrl,message:QYe,allowAudioPlayer:!!this.pluginOption.allowAudioPlayer,viewerMode:this.viewer.option.viewerMode,ErrorComponent:this.pluginOption.errorComponent,PlayerComponent:this.pluginOption.playerComponent},this.containerNode)}},{key:"destroy",value:function(){Gl().unmountComponentAtNode(this.containerNode),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}}])}(e)}function PGe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,RGe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function RGe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(RGe=function(){return!!e})()}var SGe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=PGe(this,t,arguments),Object.defineProperty(e,"_cardUI",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){this.pluginOption.viewerUI&&(t.$CardUI=this.pluginOption.viewerUI),this._cardUI=this.viewer.createCardUI(this)}},{key:"destroy",value:function(){this._cardUI&&this._cardUI.destroy()}}])}(Mw);function TGe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,jGe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function jGe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(jGe=function(){return!!e})()}Object.defineProperty(SGe,"$CardUI",{enumerable:!0,configurable:!0,writable:!0,value:XA.extend(DGe)}),Object.defineProperty(SGe,"$CardData",{enumerable:!0,configurable:!0,writable:!0,value:sce});var IGe=function(e){function t(){return(0,Ke.A)(this,t),TGe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerBlockCard(this,"audio",SGe)}}])}(Sw);Object.defineProperty(IGe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:"audio"}),Object.defineProperty(IGe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:gGe});var BGe=function(e){var t=e.cardData.getAllowDownloadInViewer();return Gu().createElement(RAe,{onChange:function(t){e.onChangeAllowDownloadInViewer(t.target.checked)},checked:t},Gu().createElement("span",{style:{whiteSpace:"nowrap"}},sc("阅读页可下载")))},MGe={getWeekDay:function(e){return e.weekday()},getSecond:function(e){return e.second()},getMinute:function(e){return e.minute()},getHour:function(e){return e.hour()},getDate:function(e){return e.date()},getMonth:function(e){return e.month()},getYear:function(e){return e.year()},getNow:function(){return oh()},getFixedDate:function(e){return oh(e)},getEndDate:function(e){return e.endOf("month")},addYear:function(e,t){return e.add(t,"year")},addMonth:function(e,t){return e.add(t,"month")},addDate:function(e,t){return e.add(t,"day")},setYear:function(e,t){return e.year(t)},setMonth:function(e,t){return e.month(t)},setDate:function(e,t){return e.date(t)},setHour:function(e,t){return e.hour(t)},setMinute:function(e,t){return e.minute(t)},setSecond:function(e,t){return e.second(t)},isAfter:function(e,t){return e.isAfter(t)},isValidate:function(e){return e.isValid()},locale:{getWeekFirstDay:function(){return"zhCN"===cc.getLanguage()?6:0},getWeekFirstDate:function(e,t){return t.startOf("week")},getWeek:function(e,t){return t.week()},format:function(e,t,n){return t.format(n)},parse:function(e,t,n){return oh(t,n)},getShortWeekDays:function(){return"zhCN"===cc.getLanguage()?["一","二","三","四","五","六","日"]:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},getShortMonths:function(){return"zhCN"===cc.getLanguage()?["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}},isZH:function(){return"zhCN"===cc.getLanguage()}};function FGe(e){var t=e.className,n=e.style,r=e.dateFullCellRender,o=e.monthFullCellRender,i=e.value,a=e.defaultValue,l=e.fullscreen,u=e.onChange,c=e.onSelect,s=e.hideFooter,d=void 0!==s&&s,f="ant-picker",h=f+"-calendar",p=(0,Ix.A)((function(){return i||MGe.getNow()}),{defaultValue:a,value:i}),v=(0,tn.A)(p,2),m=v[0],g=v[1];function b(e){var t,n;g(e),function(e,t){return function(e,t){return e&&t&&MGe.getYear(e)===MGe.getYear(t)}(e,t)&&MGe.getMonth(e)===MGe.getMonth(t)}(t=e,n=m)&&MGe.getDate(t)===MGe.getDate(n)||null==u||u(e)}function y(e){b(e),null==c||c(e)}var w=d?void 0:function(){return Gu().createElement("div",{className:f+"-buttons"},Gu().createElement("button",{className:f+"-today-btn",onClick:function(){y(MGe.getNow())}},sc("今天")),Gu().createElement("button",{className:f+"-tomorrow-btn",onClick:function(){y(MGe.getNow().add(1,"day"))}},sc("明天")),Gu().createElement("button",{className:f+"-next-week-btn",onClick:function(){y(MGe.getNow().add(7,"day"))}},sc("+7天")))};return Gu().createElement("div",{className:nk()(h,(0,Ha.A)((0,Ha.A)({},"".concat(h,"-full"),l),"".concat(h,"-mini"),!l),t),style:n},Gu().createElement(b_e,{prefixCls:f,value:m,locale:e.locale.lang,generateConfig:MGe,dateRender:r,monthCellRender:o,onSelect:y,renderExtraFooter:w}))}function LGe(e){var t=e.className?"".concat(e.className," ne-ant-calendar"):"ne-ant-calendar",n=MGe.isZH()?"月":"";return Gu().createElement(FGe,Object.assign({},e,{fullscreen:!1,className:t,dateFullCellRender:function(e){return Gu().createElement("div",{className:"ant-picker-cell-inner ant-picker-calendar-date"},Gu().createElement("div",{className:"ant-picker-calendar-date-value"},e.date()))},monthFullCellRender:function(e){return Gu().createElement("div",{className:"ant-picker-cell-inner ant-picker-calendar-month"},Gu().createElement("div",{className:"ant-picker-calendar-month-value"},e.month()+1," ",n))},locale:"enUS"===cc.getLanguage()?WAe.DatePicker:GAe.DatePicker}))}const UGe=LGe;function VGe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,HGe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function HGe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(HGe=function(){return!!e})()}var zGe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=VGe(this,t,arguments),Object.defineProperty(e,"_targetRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"_popUPRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"_dispose",{enumerable:!0,configurable:!0,writable:!0,value:{dispose:function(){}}}),Object.defineProperty(e,"_unMounted",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"state",{enumerable:!0,configurable:!0,writable:!0,value:{panelShow:!1,finalVisible:!1,align:"bottomLeft"}}),Object.defineProperty(e,"_visibleChange",{enumerable:!0,configurable:!0,writable:!0,value:function(t){t?e.openEditor():e.closeEditor()}}),Object.defineProperty(e,"_detectPosition",{enumerable:!0,configurable:!0,writable:!0,value:Qm()((function(){e._dispose.dispose(),e._unMounted||e._popUPRef.current&&e._targetRef.current&&(e._dispose=ys((function(){var t,n,r,o;return e._unMounted?{targetTop:0,popUPTop:0}:{targetTop:(null===(n=null===(t=e._targetRef.current)||void 0===t?void 0:t.getBoundingClientRect())||void 0===n?void 0:n.top)||0,popUPTop:(null===(o=null===(r=e._popUPRef.current)||void 0===r?void 0:r.getBoundingClientRect())||void 0===o?void 0:o.top)||0}}),(function(t){var n=t.targetTop,r=t.popUPTop;if(!e._unMounted){var o=n>r?"topLeft":"bottomLeft";e.state.align!==o&&e.setState({align:o,finalVisible:!0})}})))}),200)}),Object.defineProperty(e,"_afterVisibleChange",{enumerable:!0,configurable:!0,writable:!0,value:function(t){e._dispose.dispose(),t&&e._popUPRef.current&&e._targetRef.current?e._detectPosition():e.state.finalVisible!==t&&e.setState({finalVisible:t})}}),Object.defineProperty(e,"openEditor",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.state.panelShow||e.setState({panelShow:!0,finalVisible:!0})}}),Object.defineProperty(e,"closeEditor",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.state.panelShow&&e.setState({panelShow:!1})}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){var e=this;return Gu().createElement(bR,{trigger:"click",getPopupContainer:function(t){return e.props.overlayContainer||t},transitionName:"",destroyTooltipOnHide:!0,onVisibleChange:this._visibleChange,overlayClassName:"ne-date-card-overlay",visible:this.state.panelShow,afterVisibleChange:this._afterVisibleChange,placement:this.state.align,content:this._renderInput()},Gu().createElement("div",{className:"ne-card-date-card",ref:this._targetRef},Gu().createElement(SC,{type:"index-todo-list"}),Gu().createElement("span",null,this._getText())))}},{key:"componentWillUnmount",value:function(){this._dispose.dispose(),this._unMounted=!0}},{key:"_renderInput",value:function(){var e=this;return Gu().createElement("div",{ref:this._popUPRef},Gu().createElement(LGe,{defaultValue:oh(this.props.cardData.getDate()),onSelect:function(t){e.props.onChange(t.valueOf()),e._handleClosePanel()}}))}},{key:"_getText",value:function(){return Vce(this.props.cardData.getDate())}},{key:"_handleClosePanel",value:function(){this.setState({panelShow:!1})}}])}(Yu.Component);function WGe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,qGe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function qGe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qGe=function(){return!!e})()}var $Ge=UUe(0,(function(e){return function(e){function t(){var e;return(0,Ke.A)(this,t),e=WGe(this,t,arguments),Object.defineProperty(e,"uiViewProxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e=this;this.uiViewProxy=Vye.render(zGe,{cardData:this.cardNode.cardData,overlayContainer:this.editor.innerOverlayContainer,onChange:function(t){e.cardData.setDate(t),e.cardData.afterChange(),e.cardData.sync(!1)}},this.containerNode)}},{key:"destroy",value:function(){Gl().unmountComponentAtNode(this.containerNode),this.uiViewProxy=null,Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}},{key:"openEditor",value:function(){var e;null===(e=this.uiViewProxy.getReactRef())||void 0===e||e.openEditor()}},{key:"closeEditor",value:function(){var e;null===(e=this.uiViewProxy.getReactRef())||void 0===e||e.closeEditor()}}])}(e)}));function KGe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,YGe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function YGe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(YGe=function(){return!!e})()}var GGe=function(e){function t(){return(0,Ke.A)(this,t),KGe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"leave",value:function(){Tr((0,Je.A)(t.prototype),"leave",this).call(this)}},{key:"hover",value:function(){Tr((0,Je.A)(t.prototype),"hover",this).call(this)}},{key:"focus",value:function(){Tr((0,Je.A)(t.prototype),"focus",this).call(this)}},{key:"blur",value:function(){Tr((0,Je.A)(t.prototype),"blur",this).call(this),this.closeEditor()}}])}(Hh.extend($Ge,ap));function JGe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,XGe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function XGe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(XGe=function(){return!!e})()}var QGe=function(e){function t(e){var n;(0,Ke.A)(this,t);for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return n=JGe(this,t,[].concat(o)),Object.defineProperty(n,"editor",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(n,"_ui",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_remove",{enumerable:!0,configurable:!0,writable:!0,value:function(){}}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e=this;this.pluginOption.editUI&&(t.$EditableCardUI=this.pluginOption.editUI),this._ui=this.editor.createCardUI(this),this._remove=this.editor.renderer.onPluginEvent(xce.eventName.openDateCardIdEditor,(function(t){t===e.id&&e._ui.openEditor()}))}},{key:"destroy",value:function(){this._ui.destroy(),this._ui=null,this._remove()}}])}(My);Object.defineProperty(QGe,"$EditableCardUI",{enumerable:!0,configurable:!0,writable:!0,value:GGe}),Object.defineProperty(QGe,"$CardData",{enumerable:!0,configurable:!0,writable:!0,value:Bce});var ZGe=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Object.assign({supportMention:!0},t)}),[{key:"editUI",get:function(){return this._option.editUI}},{key:"viewerUI",get:function(){return this._option.viewerUI}},{key:"supportMention",get:function(){return!!this._option.supportMention}}])}();function eJe(e){var t=e.item;return e.selected,Gu().createElement("div",{className:"ne-card-date-card-mention"},Gu().createElement(SC,{type:t.custom?"field-created-at":"index-todo-list"}),t.custom?t.name:Vce(t.date),!t.custom&&t.name?Gu().createElement("span",{className:"hint"},t.name):null)}function tJe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,nJe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function nJe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nJe=function(){return!!e})()}Object.defineProperty(ZGe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"dateCard"});var rJe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=tJe(this,t,arguments),Object.defineProperty(e,"_labels",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){var n,r,o=this;if(t.registerInlineCard(this,xce.cardName,{factory:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=vl(QGe,[e].concat(n));return o._labels.set(i.viewNode.attrs.id,i),i}}),null===(n=e.getService(xEe.ID))||void 0===n||n.registerCardSelect(xce.cardSelect,{type:"TextItem",icon:"editor-main-date",label:sc("日期"),mainSearch:"/rq",description:sc("插入日期"),keywords:"日期,今天,jintian,rq,riqi,date"}),null===(r=e.getService(xEe.ID))||void 0===r||r.registerCustomSearch((function(e,t){var n=Wce(e);return n?t.filter((function(e){return"/rq"===e.mainSearch})).map((function(e){return Object.assign(Object.assign({},e),{date:n,description:sc("插入日期")+" "+Vce(n)})})):null})),e.onPluginEvent("insertCardByUI:".concat(xce.cardName),(function(t){var n=t.item;e.execCommand("insertCard",xce.cardName,{date:n.date},!1)})),this.option.supportMention){var i=e.getService(oHe.ID),a=[{name:sc("今天"),tab:"date",date:oh().valueOf()},{name:sc("下周"),tab:"date",date:oh().add(7,"day").valueOf()},{name:sc("自定义日期"),tab:"date",date:oh().valueOf(),custom:!0}],l={_data:a,name:sc("日期"),category:"dateCard",data:function(){return l._data===a&&(a[2].date=a[0].date=oh().valueOf(),a[1].date=oh().add(7,"day").valueOf()),l._data},render:function(e,t){return Gu().createElement(eJe,{item:e,selected:t})},search:function(e){return function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))}(o,void 0,void 0,Cc().mark((function t(){var n;return Cc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=3;break}return l._data=a,t.abrupt("return",a);case 3:return n=Wce(e),l._data=n?[{name:"",tab:"date",date:n}]:[],t.abrupt("return",l._data);case 6:case"end":return t.stop()}}),t)})))},onSelect:function(t){if(l._data=a,"date"===t.tab){e.emitEvent("userAction",{type:"cardToolbar",name:"mentionDate",source:"table"});var n=e.execCommand("insertCard",xce.cardName,{date:t.date},!!t.custom);t.custom&&e.renderer.emitPluginEvent(xce.eventName.openDateCardIdEditor,n)}}};null==i||i.registerMentionTab(l)}}}])}(Fh);Object.defineProperty(rJe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:xce.pluginName}),Object.defineProperty(rJe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:ZGe});var oJe=function(){return(0,$e.A)((function e(t,n){(0,Ke.A)(this,e),Object.defineProperty(this,"colorScheme",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"colorRegister",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"selector",{enumerable:!0,configurable:!0,writable:!0,value:"lakex-custom-theme-"}),Object.defineProperty(this,"style",{enumerable:!0,configurable:!0,writable:!0,value:null}),this.selector+=t;var r,o,i,a={};Object.keys(n.colors).forEach((function(e){var t=n.colors[e];if(t){var r="string"==typeof t?au.parse(t):new nu(t.h,t.s,t.l,1);if(r){var o=r.h,i=r.s,l=r.l;["selection"].includes(e)?a[e]=r.rgba.toHEX():a[e]={h:o,s:i,l}}}})),this.colorRegister=(new su).registerColors((r=a,o=Ww()(bse,r),i={"editor.selection":{light:o.selection}},Object.keys(yse).forEach((function(e){var t=yse[e];if(t){var n=o[t.use];if("string"!=typeof n){var r=[Math.max(0,Math.min(360,n.h+t.hslOffset[0])),Math.max(0,Math.min(1,n.s+t.hslOffset[1])),Math.max(0,Math.min(1,n.l+t.hslOffset[2]))],a=new nu(r[0],r[1],r[2],1);Object.assign(i,(0,Ha.A)({},e,{light:a.toCSSValue()}))}}})),Ww()(uu,i))).getIColorRegistry()}),[{key:"apply",value:function(e){this.style=function(e){var t=document.querySelector("#".concat(e));if("style"!==(null==t?void 0:t.tagName.toLowerCase())){var n=document.createElement("style");return n.id=e,n}return t}(this.selector+this.colorScheme),this.style.innerText=this.colorRegister.toStyleValues(this.selector,this.colorScheme),this.style.parentNode!==document.body&&(this.style.remove(),document.body.appendChild(this.style)),e.classList.contains(this.selector)||e.classList.add(this.selector)}},{key:"remove",value:function(e){var t;(null===(t=this.style)||void 0===t?void 0:t.parentNode)&&this.style.remove(),e.classList.contains(this.selector)&&e.classList.remove(this.selector)}},{key:"getColor",value:function(e){var t=this.colorRegister.getColor(e);return(null==t?void 0:t[this.colorScheme])||(null==t?void 0:t[ou.LIGHT])?this.transform(ou.LIGHT,this.colorScheme,null==t?void 0:t[ou.LIGHT]):null}},{key:"transform",value:function(e,t,n){return this.colorRegister.transform(e,t,n)}}])}();function iJe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function aJe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,lJe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function lJe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(lJe=function(){return!!e})()}var uJe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=aJe(this,t,arguments),Object.defineProperty(e,"_oldObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"current",get:function(){return this.editor.theme.getSchemeName()}},{key:"observe",value:function(e){this.editor.theme.on("themeChange",e)}},{key:"init",value:function(e){this.option.enable&&(this._oldObserver=SC.themeObserver,SC.themeObserver=this,e.theme.registerTheme(this.option.name,new oJe(ou.LIGHT,this.option)),e.theme.setActiveTheme(this.option.name),this.updateInnerOverlay(e))}},{key:"updateInnerOverlay",value:function(e){var t,n,r,o,i=e.theme.getThemeSelector();(null===(n=null===(t=e.innerOverlayContainer)||void 0===t?void 0:t.classList)||void 0===n?void 0:n.contains(i))||null===(o=null===(r=e.innerOverlayContainer)||void 0===r?void 0:r.classList)||void 0===o||o.add(i)}},{key:"afterInit",value:function(){Tr((0,Je.A)(t.prototype),"afterInit",this).call(this);var e=this.option.overrides,n=Object.keys(e);if(n.length){var r,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return iJe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?iJe(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(n);try{for(o.s();!(r=o.n()).done;){var i=r.value,a={},l=e[i];"string"==typeof l?a.light=l:a=l,mu.colorRegistry.registerColor(i,a)}}catch(e){o.e(e)}finally{o.f()}}}},{key:"destroy",value:function(){Tr((0,Je.A)(t.prototype),"destroy",this).call(this),this.option.enable&&(SC.themeObserver=this._oldObserver)}}])}(Fh);Object.defineProperty(uJe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:yT.pluginName}),Object.defineProperty(uJe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:Ase});const cJe=function(e){var t=(0,Yu.useState)(null),n=(0,tn.A)(t,2),r=n[0],o=n[1],i=e.hotkeys,a=function(){var e=null;do{var t=Math.floor(Math.random()*i.length);e=i[t]}while(r&&e.name===r.name);o(e)};return(0,Yu.useEffect)(a,[]),r?Gu().createElement("div",{className:"ne-ui-random-tip",onClick:a},Gu().createElement("span",{className:"ne-ui-random-tip-keys"},r.keys),Gu().createElement("span",{className:"ne-ui-random-tip-text"},r.text)):null};var sJe=function(e){var t=(0,Yu.useState)(0),n=(0,tn.A)(t,2),r=n[0],o=n[1];function i(){var t=e.editor.queryCommandValue("wordCount");o(t)}return(0,Yu.useEffect)((function(){i(),e.editor.renderer.on("contentchange",(function(){i()}))}),[]),Gu().createElement("div",{className:"ne-ui-random-tip"},Gu().createElement("span",{className:"ne-ui-random-tip-text"},e.showWordCount(r)))};function dJe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,fJe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function fJe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(fJe=function(){return!!e})()}var hJe=[{name:"bold",get text(){return sc("粗体")},keys:of(["cmd","B"]," + ")},{name:"orderedlist",get text(){return sc("有序列表")},keys:of(["cmd","shift","7"]," + ")},{name:"unorderedlist",get text(){return sc("无序列表")},keys:of(["cmd","shift","8"]," + ")},{name:"link",get text(){return sc("链接")},keys:of(["cmd","K"]," + ")},{name:"h3",get text(){return sc("标题3")},keys:of(["###","Space"]," + ")},{name:"h4",get text(){return sc("标题4")},keys:of(["####","Space"]," + ")},{name:"fullscreen",get text(){return sc("全屏编辑")},keys:of(["cmd","shift","F"]," + ")},{name:"submit",get text(){return sc("提交")},keys:of(["cmd","enter"]," + ")}],pJe=function(e){function t(){return(0,Ke.A)(this,t),dJe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){return"function"==typeof this.pluginContext.showWordCount?Gu().createElement(sJe,{editor:this.editor,showWordCount:this.pluginContext.showWordCount}):Gu().createElement(cJe,{hotkeys:hJe})}},{key:"onEvent",value:function(){}},{key:"getInitUIState",value:function(){return{}}},{key:"getUIState",value:function(){return{}}}])}(MEe);Object.defineProperty(pJe,"Type",{enumerable:!0,configurable:!0,writable:!0,value:"Custom"});var vJe=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=t}),[{key:"showWordCount",get:function(){var e;return null===(e=this._option)||void 0===e?void 0:e.showWordCount}}])}();function mJe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,gJe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function gJe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(gJe=function(){return!!e})()}Object.defineProperty(vJe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:nde.pluginName});var bJe=function(e){function t(){return(0,Ke.A)(this,t),mJe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=e.getService(jEe.ID);null==t||t.registerToolbarWidget(nde.toolbar,{clazz:pJe,pluginContext:this.option})}}])}(Fh);Object.defineProperty(bJe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:nde.pluginName}),Object.defineProperty(bJe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:vJe});var yJe=[REe,eIe,kBe,VFe,ULe,$Le,nUe,hRe,yRe,PRe,BRe,LRe,o$e,$Re,nSe,rTe,aTe,sTe,gTe,OTe,aIe,bIe,CIe,MIe,iRe,qIe,gBe,PBe,LBe,iMe,yMe,NMe,RMe,IMe,qMe,ZMe,fLe,gLe,mVe,sHe,QHe,nze,ize,oWe,_We,tqe,gqe,qqe,e$e,eKe,aKe,YKe,fYe,GYe,CGe,rJe,uJe,bJe];function wJe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,AJe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function AJe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(AJe=function(){return!!e})()}var kJe=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=wJe(this,t),Object.defineProperty(n,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e){this.renderer.kernel.execCommand("alert",e),this.renderer.focus({})}}])}(gu);function _Je(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,CJe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function CJe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(CJe=function(){return!!e})()}var NJe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=_Je(this,t,arguments),Object.defineProperty(e,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_isFocused",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_isHovered",{enumerable:!0,configurable:!0,writable:!0,value:!1}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){this._rootNode=Ly.createElement("ne-alert"),Ly.setAttributeByChange(this._rootNode,e),this._bineEvent()}},{key:"_bineEvent",value:function(){var e=this;xc(this,this.pluginContext,"resetSelection",(function(t){t.alertNode===e._rootNode?e._isFocused||(e._isFocused=!0,e._rootNode.classList.add("focused"),e.pluginContext.emitAlertFocus(e._rootNode,e.viewNode.id)):e._isFocused&&(e._isFocused=!1,e._rootNode.classList.remove("focused"),e.pluginContext.emitAlertBlur(e._rootNode,e.viewNode.id))})),xc(this,this.pluginContext,"keydown",(function(){e._isFocused&&e.pluginContext.emitAlertBlur(e._rootNode,e.viewNode.id)})),pc(this,this._rootNode,"click",(function(t){var n,r;(null===(r=null===(n=t.target)||void 0===n?void 0:n.closest)||void 0===r?void 0:r.call(n,"ne-card, ne-oli-i"))||e.pluginContext.emitAlertClick(e._rootNode,e.viewNode.id)})),pc(this,this._rootNode,"mouseenter",(function(){e._isHovered=!0,e.pluginContext.emitAlertHover(e._rootNode,e.viewNode.id)})),pc(this,this._rootNode,"mouseleave",(function(){e._isHovered=!1}))}},{key:"destroy",value:function(){(this._isFocused||this._isHovered)&&this.pluginContext.emitAlertBlur(this._rootNode,this.viewNode.id),delete this._rootNode,Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}},{key:"updateAttribute",value:function(e){Ly.syncDOMAttrChange(this._rootNode,e)}},{key:"getMainDOMNode",value:function(){return this._rootNode}}])}(Sy);function OJe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,xJe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function xJe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xJe=function(){return!!e})()}var EJe=function(e){function t(e){var n;(0,Ke.A)(this,t),n=OJe(this,t),Object.defineProperty(n,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:e});var r=0;return e.on("selectionchange",(function(){var e=Date.now();requestAnimationFrame((function(){r>e||n._updateSelection(document.getSelection())}))})),e.on("contentchange",(function(){r=Date.now(),requestAnimationFrame((function(){n._updateSelection(document.getSelection())}))})),e.onForceRootNode("keydown",(function(){n.emit("keydown")})),e.onForceRootNode("input",(function(){n.emit("keydown")})),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"emitAlertFocus",value:function(e,t){this.renderer&&this.renderer.emitPluginEvent("alertFocus",{domNode:e,alertId:t})}},{key:"emitAlertBlur",value:function(e,t){this.renderer&&this.renderer.emitPluginEvent("alertBlur",{domNode:e,alertId:t})}},{key:"emitAlertHover",value:function(e,t){this.renderer&&this.renderer.emitPluginEvent("alertHover",{domNode:e,alertId:t})}},{key:"emitAlertClick",value:function(e,t){this.renderer&&this.renderer.emitPluginEvent("alertClick",{domNode:e,alertId:t})}},{key:"_updateSelection",value:function(e){if(e&&this.renderer&&this.renderer.domRootNode){var t=e.rangeCount>0?e.getRangeAt(0).commonAncestorContainer:null;if(t){var n=gc(t,"ne-alert",this.renderer.domRootNode);n?this.emit("resetSelection",{alertNode:n}):this.emit("resetSelection",{alertNode:null})}}}},{key:"destroy",value:function(){this.removeAllListeners(),delete this.renderer}}])}(it);function DJe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,PJe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function PJe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(PJe=function(){return!!e})()}var RJe=function(e){function t(){return(0,Ke.A)(this,t),DJe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"translate",value:function(e,t){return{type:fp.ATTR_NAME,name:"ne-alert-type",value:t}}}])}(fp);function SJe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,TJe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function TJe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(TJe=function(){return!!e})()}var jJe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=SJe(this,t,arguments),Object.defineProperty(e,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){this._context=new EJe(e),e.registerCommand("alert",new kJe(e)),e.registerBoxNode("alert",{clazz:NJe,pluginContext:this._context}),e.registerAttrTranslator("type",new RJe)}},{key:"destroy",value:function(){this._context.destroy(),delete this._context}}])}(Jg);function IJe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,BJe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function BJe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(BJe=function(){return!!e})()}Object.defineProperty(jJe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:"alert"});var MJe=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=IJe(this,t),Object.defineProperty(n,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e,t){var n,r=e.node,o=e.originNode,i=e.offset,a=document.createRange();a.setStart(r,i),a.collapse(!0);var l=this.renderer.engine.transformDOMRange(a);"imageGallery"===(null===(n=null==o?void 0:o.dataset)||void 0===n?void 0:n.cardName)&&this._moveImageToGallery(o,t)||this.renderer.kernel.execCommand("moveImage",t,l.start,o)}},{key:"_moveImageToGallery",value:function(e,t){var n,r,o,i,a=null===(n=this.renderer.kernel.model.document)||void 0===n?void 0:n.getNodeById(t);if(!a||!a.isConnected||!a.hasCategory(qe.Card))return!1;var l=null===(o=null===(r=null==e?void 0:e._viewNode)||void 0===r?void 0:r._modelNode)||void 0===o?void 0:o.id;if(!l)return!1;var u=null===(i=this.renderer.kernel.model.document)||void 0===i?void 0:i.getNodeById(l);if(!u||!u.isConnected||!u.hasCategory(qe.Card))return!1;var c=[a.attrs.value];return this.renderer.emitPluginEvent("blockReset",!1),this.renderer.kernel.execCommand("moveImageToGallery",l,t,c)}}])}(gu);function FJe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,LJe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function LJe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(LJe=function(){return!!e})()}var UJe=function(e){function t(){return(0,Ke.A)(this,t),FJe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerCommand("moveImage",new MJe(e))}}])}(Jg);function VJe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,HJe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function HJe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(HJe=function(){return!!e})()}Object.defineProperty(UJe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:QT.pluginName});var zJe=function(e){function t(){return(0,Ke.A)(this,t),VJe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"translate",value:function(e,t){return{type:fp.ATTR_NAME,name:tB,value:t}}}])}(fp);function WJe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,qJe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function qJe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qJe=function(){return!!e})()}var $Je=function(e){function t(){return(0,Ke.A)(this,t),WJe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerAttrTranslator(rB.attr.alignment,new zJe);var t=e.requireService(kRe.ID);[CEe.alignmentLeft,CEe.alignmentRight,CEe.alignmentCenter,CEe.alignmentJustify].forEach((function(n){var r=n.name,o=n.keys,i=n.value;o&&t.registerHotKey(r,o,(function(t){t.stop(),e.execCommand(rB.command.alignment,i)}))}))}}])}(Jg);function KJe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,YJe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function YJe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(YJe=function(){return!!e})()}Object.defineProperty($Je,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:rB.pluginName});var GJe=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=KJe(this,t),Object.defineProperty(n,"attrName",{enumerable:!0,configurable:!0,writable:!0,value:""}),n.attrName="ne-".concat(e),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"translate",value:function(){return{type:fp.ATTR_NAME,name:this.attrName,value:"true"}}}])}(fp);function JJe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,XJe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function XJe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(XJe=function(){return!!e})()}var QJe=function(e){function t(){return(0,Ke.A)(this,t),JJe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this.kernel;e.registerAttrTranslator({bold:new GJe("bold"),italic:new GJe("italic"),underline:new GJe("underline"),strikethrough:new GJe("strikethrough"),emoji:new GJe("emoji")});var n=e.getService(kRe.ID);n&&[CEe.bold,CEe.italic,CEe.underline,CEe.strikethrough].forEach((function(e){var r=e.keys,o=e.name;r&&n.registerHotKey(o,r,(function(e){e.stop(),t.execCommand(o)}))}))}}])}(Jg);function ZJe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,eXe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function eXe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(eXe=function(){return!!e})()}Object.defineProperty(QJe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:OB.pluginName});var tXe=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=ZJe(this,t),Object.defineProperty(n,"renderOrViewer",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"translate",value:function(e,t){var n=this;return{type:fp.CUSTOM_NAME,name:"backgroundColor",value:function(e){e.setAttribute("ne-bg-color",t),e.style.backgroundColor=n.renderOrViewer.theme.toVisualValue(t)},remove:function(e){e.removeAttribute("ne-bg-color"),e.style.backgroundColor=""}}}}])}(fp);function nXe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,rXe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function rXe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rXe=function(){return!!e})()}var oXe=function(e){function t(){return(0,Ke.A)(this,t),nXe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerAttrTranslator(FM.attr.bgColor,new tXe(e))}}])}(Jg);function iXe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,aXe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function aXe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(aXe=function(){return!!e})()}Object.defineProperty(oXe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:FM.pluginName});var lXe=function(e){function t(){return(0,Ke.A)(this,t),iXe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this.kernel;e.requireService(kRe.ID).registerHotKey(CEe.breakLine.name,CEe.breakLine.keys,(function(e){e.stop(),t.execCommand(iF.command.breakLine)}))}}])}(Jg);function uXe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(lXe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:iF.pluginName});var cXe="td, ne-column",sXe="table, ne-columns, ne-table-box",dXe="ne-container-hole, ne-table-hole",fXe=function(){function e(){(0,Ke.A)(this,e)}return(0,$e.A)(e,null,[{key:"getSelection",value:function(){return document.getSelection()}},{key:"currentRange",value:function(){var e=document.getSelection();if(1===e.rangeCount)return e.getRangeAt(0).cloneRange();if(e.rangeCount>1){var t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1);if("TR"===t.startContainer.nodeName&&"TR"===n.endContainer.nodeName){var r=document.createRange();r.setStart(t.startContainer.childNodes[t.startOffset],0);var o=n.endContainer.childNodes[n.endOffset-1];return r.setEnd(o,o.childNodes.length),r}var i=document.createRange();return i.setStart(t.startContainer,t.startOffset),i.setEnd(n.endContainer,n.endOffset),i.cloneRange()}return null}},{key:"setRange",value:function(e,t,n,r){if(t.length>1){var o=gc(t[0].startContainer,cXe);bt(o,"plugins/selection/src/common/dom-selection-helper.ts:75");var i=Hy(o).getContentDOMNode();return bt(i,"plugins/selection/src/common/dom-selection-helper.ts:78"),void e.setBaseAndExtent(i,0,i,i.childNodes.length)}var a=wXe(t[0]),l=a.startContainer,u=a.startOffset,c=a.endContainer,s=a.endOffset,d=a.collapsed;r===Hr.start?e.setBaseAndExtent(l,u,c,s):e.setBaseAndExtent(c,s,l,u),bt(e.getRangeAt(0).collapsed===d,"plugins/selection/src/common/dom-selection-helper.ts:108")}},{key:"createRange",value:function(e){return Od.createRange(e)}},{key:"createRangeByNodeContents",value:function(e){bt(e.nodeType===Node.ELEMENT_NODE,"plugins/selection/src/common/dom-selection-helper.ts:116");var t=document.createRange();return t.selectNodeContents(e),t}},{key:"getFocusTableCell",value:function(e,t){return gc(e.focusNode,cXe,t)}},{key:"isFocusInTable",value:function(e,t){return!!gc(e.focusNode,"table",t)}},{key:"focusNodeInFirstCell",value:function(e,t){var n=gc(e.focusNode,cXe,t);return!!n&&0===n.cellIndex&&0===Ad(n.parentNode)}},{key:"isAnchorInTable",value:function(e,t){return!!gc(e.anchorNode,"table",t)}},{key:"getTableTailRangeByCellNode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];bt(e.rangeCount>0,"plugins/selection/src/common/dom-selection-helper.ts:163");var r=e.focusNode,o=e.focusOffset,i=t;"TD"===t.nodeName&&(i=t.parentNode.parentNode.parentNode),bt(i&&"TABLE"===i.nodeName,"plugins/selection/src/common/dom-selection-helper.ts:173");var a=i.parentNode.parentNode.parentNode,l=e.getRangeAt(0).cloneRange();return n?(l.collapsed?yXe(l,a.parentNode,Ad(a)+1):l.endContainer===r&&l.endOffset===o?l.setEnd(a.parentNode,Ad(a)+1):l.setStart(a.parentNode,Ad(a)+1),bXe(l)):(l.setStart(a.parentNode,Ad(a)+1),l.collapse(!0),bXe(l))}},{key:"getTableHeadRangeByCellNode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];bt(e.rangeCount>0,"plugins/selection/src/common/dom-selection-helper.ts:202");var r=e.focusNode,o=e.focusOffset,i=t;"TD"===t.nodeName&&(i=t.parentNode.parentNode.parentNode),bt(e.rangeCount>0&&i,"plugins/selection/src/common/dom-selection-helper.ts:212"),bt("TABLE"===i.nodeName,"plugins/selection/src/common/dom-selection-helper.ts:213");var a=i.parentNode.parentNode.parentNode,l=e.getRangeAt(0).cloneRange();return n?(l.collapsed||(l.endContainer===r&&l.endOffset===o?l.collapse(!0):l.collapse(!1)),yXe(l,a.parentNode,Ad(a)),bXe(l)):(l.setStart(a.parentNode,Ad(a)),l.collapse(!0),bXe(l))}},{key:"getTableTailRange",value:function(t,n){bt(t.rangeCount>0,"plugins/selection/src/common/dom-selection-helper.ts:241");var r=gc(t.focusNode,cXe,n);return bt(r,"plugins/selection/src/common/dom-selection-helper.ts:250"),e.getTableTailRangeByCellNode(t,r)}},{key:"getTableHeadRange",value:function(t,n){bt(t.rangeCount>0,"plugins/selection/src/common/dom-selection-helper.ts:259");var r=gc(t.focusNode,cXe,n);return e.getTableHeadRangeByCellNode(t,r)}},{key:"transformRange",value:function(e,t){if(e.collapsed)return{anchor:"start",focus:"start",ranges:[e]};var n=gc(e.startContainer,sXe,t),r=gc(e.endContainer,sXe,t);return n||r?n===r||r&&(null==n?void 0:n.contains(r))||n&&(null==r?void 0:r.contains(n))?mXe(e,t,"TABLE"===(null==n?void 0:n.nodeName)||"TABLE"===(null==r?void 0:r.nodeName)||"NE-TABLE-BOX"===(null==n?void 0:n.nodeName)||"NE-TABLE-BOX"===(null==r?void 0:r.nodeName)):function(e,t){var n=gc(e.startContainer,sXe,t),r=gc(e.endContainer,sXe,t),o=e.startContainer,i=e.startOffset,a=e.endContainer,l=e.endOffset;if(n){var u=gc(n,dXe,t);o=u.parentNode,i=Ad(u)}if(r)if(r!==n){var c=gc(r,dXe,t);a=c.parentNode,l=Ad(c)+1}else a=o,l=i+1;var s=document.createRange();return s.setStart(o,i),s.setEnd(a,l),bXe(s)}(e,t):bXe(e)}},{key:"getCellNode",value:function(e,t,n){var r,o;if("NE-TABLE-BOX"===(null==e?void 0:e.nodeName)){var i=e.querySelector("tbody");if(0===t)return null===(r=null==i?void 0:i.firstChild)||void 0===r?void 0:r.firstChild;if(1===t)return null===(o=null==i?void 0:i.lastChild)||void 0===o?void 0:o.lastChild}return gc(e,cXe,n)}},{key:"getCellEndPoint",value:function(e){var t=document.getSelection(),n=t.rangeCount;if(0===n)return null;if(1===n){var r=t.getRangeAt(0);return{focusCellNode:this.getCellNode(t.focusNode,t.focusOffset,e),anchorCellNode:this.getCellNode(t.anchorNode,t.anchorOffset,e),firstCellNode:this.getCellNode(r.startContainer,r.startOffset,e),lastCellNode:this.getCellNode(r.endContainer,r.endOffset,e)}}for(var o=[],i=0;i<n;i++){var a=t.getRangeAt(i);bt("TR"===a.startContainer.nodeName&&a.startOffset+1===a.endOffset,"plugins/selection/src/common/dom-selection-helper.ts:378");var l=a.startContainer.childNodes[a.startOffset];o.push(l)}var u=t.focusNode,c=t.focusOffset,s=t.anchorNode,d=t.anchorOffset;bt("TR"===u.nodeName,"plugins/selection/src/common/dom-selection-helper.ts:389"),bt(u===s&&1===Math.abs(c-d),"plugins/selection/src/common/dom-selection-helper.ts:390");var f,h=u.childNodes[Math.min(c,d)],p=o[0],v=o[o.length-1];if(h===p)f=v;else if(h===v)f=p;else if(p.parentNode===h.parentNode)for(var m=v;m&&o.includes(m);)f=m,m=m.previousElementSibling;else for(var g=p;g&&o.includes(g);)f=g,g=g.nextElementSibling;return bt(f,"plugins/selection/src/common/dom-selection-helper.ts:441"),{focusCellNode:h,anchorCellNode:f,firstCellNode:p,lastCellNode:v}}},{key:"refreshSelection",value:function(){var e=document.getSelection(),t=document.activeElement;if(0!==e.rangeCount&&!(null==t?void 0:t.closest("ne-card"))){var n=e.anchorNode,r=e.anchorOffset,o=e.focusNode,i=e.focusOffset;e.removeAllRanges(),e.setBaseAndExtent(n,r,o,i)}}}])}();function hXe(e){var t=document.createRange();return t.setStart(e,0),t.collapse(!0),t}function pXe(e){var t=e=e.cloneRange(),n=t.startContainer,r=t.startOffset,o=t.endContainer,i=t.endOffset,a=vXe(n,r),l=vXe(o,i);return e.setStart(a.node,a.offset),e.setEnd(l.node,l.offset),e}function vXe(e,t){for(;e.nodeType===Node.ELEMENT_NODE&&"BR"!==e.nodeName;){var n=e.childNodes[t];if(n)e=n,t=0;else{if(!(n=e.childNodes[t-1])){t=0;break}t=Sd(e=n)?e.data.length:e.childNodes.length}}return{node:e,offset:t}}function mXe(e,t,n){e=kXe(e,t);var r=fXe.getCellNode(e.startContainer,e.startOffset,t),o=fXe.getCellNode(e.endContainer,e.endOffset,t);if(r===o)return bXe(e);if(n){var i=r.parentNode,a=o.parentNode,l=i.parentNode.parentNode;bt("TR"===i.nodeName&&"TR"===a.nodeName&&"TABLE"===l.nodeName,"plugins/selection/src/common/dom-selection-helper.ts:610");var u=function(e){var t={map:new Map,cells:[]};function n(e,n){t.cells[e]||(t.cells[e]=[]);var r=n.colSpan,o=parseInt(n.getAttribute("data-col"),10);bt(o>=0,"plugins/selection/src/common/dom-selection-helper.ts:698"),t.cells[e][o]=n;for(var i=1,a=r;i<a;i++)t.cells[e][o+i]=n;return o}return Array.from(e.tBodies[0].rows).forEach((function(e){var r=e.rowIndex;Array.from(e.cells).forEach((function(e){for(var o=e.rowSpan,i=e.colSpan,a=n(r,e),l=1;l<o;l++)n(r+l,e);t.map.set(e,{realMinRowIndex:r,realMaxRowIndex:r+o-1,realMinColIndex:a,realMaxColIndex:a+i-1})}))})),t}(l),c=function(e,t,n){var r=e.map.get(t),o=e.map.get(n),i=Math.min(r.realMinColIndex,o.realMinColIndex),a=Math.max(r.realMaxColIndex,o.realMaxColIndex);return gXe(e,Math.min(r.realMinRowIndex,o.realMinRowIndex),Math.max(r.realMaxRowIndex,o.realMaxRowIndex),i,a)}(u,r,o);return function(e,t){bt(e.length>1,"plugins/selection/src/common/dom-selection-helper.ts:885");var n,r,o=fXe.getCellEndPoint(t),i=o.anchorCellNode,a=o.focusCellNode,l=gc(e[0].startContainer,cXe,t),u=gc(e[e.length-1].endContainer,cXe,t);if(bt(i&&a&&l,"plugins/selection/src/common/dom-selection-helper.ts:899"),i===l||a===u)n="start",r="end";else if(a===l||i===u)n="end",r="start";else{var c=parseInt(a.getAttribute("data-col"),10),s=parseInt(i.getAttribute("data-col"),10),d=Ad(a.parentNode),f=Ad(i.parentNode);bt(c>=0&&s>=0,"plugins/selection/src/common/dom-selection-helper.ts:922"),bt(c!==s&&d!==f,"plugins/selection/src/common/dom-selection-helper.ts:924"),c>s?d>=f?(r="end",n="start"):(r="topRight",n="bottomLeft"):c===s?(bt(d!==f,"plugins/selection/src/common/dom-selection-helper.ts:937"),d>f?(r="end",n="start"):(r="start",n="end")):d<=f?(r="start",n="end"):(r="bottomLeft",n="topRight")}return{anchor:n,focus:r,ranges:e}}(c.map((function(t){return(e=e.cloneRange()).selectNodeContents(t),e})),t)}var s=r.parentNode;bt("NE-COLUMNS-CONTENT"===s.nodeName&&"NE-COLUMN"===r.nodeName&&"NE-COLUMN"===o.nodeName,"plugins/selection/src/common/dom-selection-helper.ts:629");var d,f=[],h=!1,p=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return uXe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?uXe(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(s.children);try{for(p.s();!(d=p.n()).done;){var v=d.value;v!==r&&v!==o||(h=!h),(h||v===r||v===o)&&((e=e.cloneRange()).selectNodeContents(v),f.push(e))}}catch(e){p.e(e)}finally{p.f()}return function(e,t){bt(e.length>1,"plugins/selection/src/common/dom-selection-helper.ts:1213");var n,r,o=fXe.getCellEndPoint(t),i=o.anchorCellNode,a=o.focusCellNode,l=gc(e[0].startContainer,"ne-column",t),u=gc(e[e.length-1].endContainer,"ne-column",t);return bt(i&&a,"plugins/selection/src/common/dom-selection-helper.ts:1228"),i===l||a===u?(n="start",r="end"):a!==l&&i!==u||(n="end",r="start"),{anchor:n,focus:r,ranges:e}}(f,t)}function gXe(e,t,n,r,o){for(var i=e.cells,a=e.map,l=new Set,u=t;u<=n;u++)for(var c=r;c<=o;c++){var s=i[u][c],d=a.get(s);if(d.realMinRowIndex<t)return gXe(e,d.realMinRowIndex,n,r,o);if(d.realMinColIndex<r)return gXe(e,t,n,d.realMinColIndex,o);if(d.realMaxRowIndex>n)return gXe(e,t,d.realMaxRowIndex,r,o);if(d.realMaxColIndex>o)return gXe(e,t,n,r,d.realMaxColIndex);l.add(s)}return Array.from(l)}function bXe(e){if(e.collapsed)return{anchor:Hr.start,focus:Hr.start,ranges:[e]};var t=document.getSelection(),n=e.startContainer,r=e.startOffset,o=e.endContainer,i=e.endOffset,a=t.anchorNode,l=t.anchorOffset,u=t.focusNode,c=t.focusOffset;if(n===o&&["TD","NE-COLUMN"].includes(n.nodeName))return{anchor:Hr.start,focus:Hr.end,ranges:[e]};if(n===a&&r===l||o===u&&i===c)return{anchor:Hr.start,focus:Hr.end,ranges:[e]};if(o===a&&i===l||n===u&&r===c)return{anchor:Hr.end,focus:Hr.start,ranges:[e]};var s=gc(u,nw),d=gc(a,nw);bt(s&&d,"plugins/selection/src/common/dom-selection-helper.ts:850");var f=n.childNodes[r],h=o.childNodes[i-1];return f===s||h===d?{anchor:Hr.end,focus:Hr.start,ranges:[e]}:(bt(f===d||h===s,"plugins/selection/src/common/dom-selection-helper.ts:866"),{anchor:Hr.start,focus:Hr.end,ranges:[e]})}function yXe(e,t,n){bt(e.collapsed,"plugins/selection/src/common/dom-selection-helper.ts:965"),-1===e.comparePoint(t,n)?e.setStart(t,n):e.setEnd(t,n)}function wXe(e){var t;if(e.collapsed&&Sd(e.startContainer)&&0===e.startOffset&&"\ufeff"===e.startContainer.data&&(e.setEnd(e.startContainer,1),e.collapse(!1)),e.collapsed&&e.startContainer.nodeType===Node.ELEMENT_NODE&&"NE-CARD"===(null===(t=e.startContainer.childNodes[e.startOffset])||void 0===t?void 0:t.nodeName)&&e.startContainer.childNodes[e.startOffset-1]&&"NE-CARD"!==e.startContainer.childNodes[e.startOffset-1].nodeName)return e.selectNodeContents(e.startContainer.childNodes[e.startOffset-1]),e.collapse(!1),e;var n=fXe.currentRange();if(e=e.cloneRange(),!n)return e;var r=e,o=r.startContainer,i=r.startOffset,a=r.endContainer,l=r.endOffset,u=r.collapsed,c=AXe({node:o,offset:i},{node:n.startContainer,offset:n.startOffset});if(e.setStart(c.node,c.offset),u)return e.collapse(!0),e;var s=AXe({node:a,offset:l},{node:n.endContainer,offset:n.endOffset});return e.setEnd(s.node,s.offset),e}function AXe(e,t){var n=e.node,r=e.offset;if(n.nodeType!==Node.ELEMENT_NODE)return e;var o=function(e){var t=e.node;t.nodeType===Node.TEXT_NODE&&(t=t.parentNode);var n=Vy(t);return n&&(n.isTextFillerNode()||n.isInlineFillerNode())?t:null}(t);if(!o)return e;var i=n.childNodes[r],a=Vy(i);if(i&&i===o&&a&&(a.isInlineFillerNode()||a.isTextFillerNode()))return{node:o,offset:1};var l=n.childNodes[r-1],u=Vy(l);return l&&l===o&&u&&(u.isInlineFillerNode()||u.isTextFillerNode())?{node:o,offset:1}:e}function kXe(e,t){var n,r,o=e.startContainer,i=e.startOffset,a=e.endContainer,l=e.endOffset;if("NE-TABLE-BOX"===o.nodeName&&gc(a,cXe,t)){var u=fXe.getCellNode(o,i,t);return bt(u,"plugins/selection/src/common/dom-selection-helper.ts:1137"),fXe.createRange({startContainer:u,startOffset:0===i?0:u.childNodes.length,endContainer:a,endOffset:l})}if("NE-TABLE-BOX"===a.nodeName&&gc(o,cXe,t)){var c=fXe.getCellNode(a,l,t);return bt(c,"plugins/selection/src/common/dom-selection-helper.ts:1155"),fXe.createRange({startContainer:o,startOffset:i,endContainer:c,endOffset:0===l?0:c.childNodes.length})}if("TD"===a.nodeName&&(null===(r=(n=a).closest)||void 0===r?void 0:r.call(n,"tfoot"))&&0===l){var s=document.getSelection();s.collapseToEnd(),s.modify("move","left","character");var d=s.getRangeAt(0),f=d.endContainer,h=d.endOffset,p=fXe.createRange({startContainer:o,startOffset:i,endContainer:f,endOffset:h});return s.removeAllRanges(),s.addRange(p),kXe(p,t)}if("TR"===o.nodeName){bt("TR"===a.nodeName,"plugins/selection/src/common/dom-selection-helper.ts:1191");var v=o.childNodes[i],m=a.childNodes[l-1];return fXe.createRange({startContainer:v,startOffset:0,endContainer:m,endOffset:m.childNodes.length})}return bt(gc(o,cXe,t),"plugins/selection/src/common/dom-selection-helper.ts:1203"),bt(gc(a,cXe,t),"plugins/selection/src/common/dom-selection-helper.ts:1204"),e}function _Xe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,CXe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function CXe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(CXe=function(){return!!e})()}Object.defineProperty(fXe,"focusToStartOfNode",{enumerable:!0,configurable:!0,writable:!0,value:function(e){if("NE-CARD"===e.nodeName)return hXe(e);var t=document.createRange();return t.selectNodeContents(e),t.collapse(!0),pXe(t)}}),Object.defineProperty(fXe,"focusToEndOfNode",{enumerable:!0,configurable:!0,writable:!0,value:function(e){if("NE-CARD"===e.nodeName)return hXe(e);var t=document.createRange();return t.selectNodeContents(e),t.collapse(!1),pXe(t)}}),Object.defineProperty(fXe,"createCardRange",{enumerable:!0,configurable:!0,writable:!0,value:hXe}),Object.defineProperty(fXe,"shrinkRange",{enumerable:!0,configurable:!0,writable:!0,value:pXe}),Object.defineProperty(fXe,"shrinkPositionToTextNode",{enumerable:!0,configurable:!0,writable:!0,value:vXe});var NXe=function(e){function t(){return(0,Ke.A)(this,t),_Xe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:iM;this.renderer.kernel.execCommand(dj.command.focusCard,e,t),this.renderer.focus({}),t!==iM&&function(){var e,t,n=fXe.currentRange();if(n&&n.collapsed){var r=n.startContainer,o=n.startOffset,i=Uy(r);if(i){var a=null===(e=r.children)||void 0===e?void 0:e[0===o?0:o-1];a&&i.isElement()&&(null===(t=Uy(a))||void 0===t?void 0:t.isFillerNode())&&fXe.getSelection().setBaseAndExtent(a,0,a,0)}}}()}}])}(qy);function OXe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,xXe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function xXe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xXe=function(){return!!e})()}Object.defineProperty(NXe,"ID",{enumerable:!0,configurable:!0,writable:!0,value:dj.command.focusCard});var EXe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=OXe(this,t,arguments),Object.defineProperty(e,"currentNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_clearTask",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this;e.onDocument("focusin",(function(e){if(Td(e.target)&&["INPUT","TEXTAREA"].includes(e.target.tagName)){var n=gc(e.target,"ne-card");n&&!n.dataset.noEditing&&(t._clearTask=od((function(){n.classList.add("ne-card-editing")}),100))}})),e.onDocument("focusout",(function(e){if(Td(e.target)&&["INPUT","TEXTAREA"].includes(e.target.tagName)){var n=gc(e.target,"ne-card");n&&!n.dataset.noEditing&&(t._clearTask=od((function(){n.classList.remove("ne-card-editing")}),100))}}))}},{key:"destroy",value:function(){var e;null===(e=this._clearTask)||void 0===e||e.call(this)}}])}(Jg);function DXe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,PXe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function PXe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(PXe=function(){return!!e})()}Object.defineProperty(EXe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:dj.pluginName}),Object.defineProperty(EXe,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[NXe]});var RXe=function(e){function t(){return(0,Ke.A)(this,t),DXe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this;e.requireService(kRe.ID).registerHotKey(CEe.clearFormat.name,CEe.clearFormat.keys,(function(e){e.stop(),t.renderer.execCommand(VF.command.clearFormat)}))}}])}(Jg);Object.defineProperty(RXe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:VF.pluginName});var SXe=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"match",value:function(e){return!0}},{key:"process",value:function(e){var t=e.clipboardData;e._files=Array.from(t.items).map((function(e){return"file"===e.kind?e.getAsFile():null})).filter((function(e){return!!e})).map((function(e){return e instanceof File?e:new File(e,e.name)}));var n=t.getData("text/html");if(e._files.length>0){e.setTypes(["Files"]);do{if(n&&/<html xmlns:v="urn:schemas-microsoft-com:vml"/.test(n))break;if(n&&/^(<meta.+?>)?<img.+?>$/.test(n))return;var r=t.getData("text/plain");if(r&&(/^\S+\.\w+$/.test(r)||/^http(s)?:/.test(r)))return;if(!n&&!r)return void(this._checkChromeDuplicate(e._files)&&(e._files.length=1))}while(0)}e.setTypes(e.clipboardData.types.slice());var o=e.types.indexOf("Files"),i=e.types;-1!==o&&i.splice(o,1),e.setTypes(i)}},{key:"_checkChromeDuplicate",value:function(e){if(!Us.chrome||2!==e.length||"image.png"!==e[0].name)return!1;var t=e[1].name;return!!(t.length>12&&/^[a-z0-9_\-]+\.(png|jpg)$/i.test(t))}}])}(),TXe=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"match",value:function(e){return e.clipboardData.getData("text/html").includes('<article class="4ever-article" data-clipboard-cangjie=')}},{key:"process",value:function(e){var t=e.types.indexOf("text/html");if(-1!==t&&!e.types.includes("application/x-cangjie-fragment")&&e.types.includes("text/plain")){var n=e.types;n.splice(t,1),e.setTypes(n)}}}])}(),jXe=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"match",value:function(e){return"string"==typeof e.clipboardData.getData("text/html")&&!e.types.includes("text/ne-inode")}},{key:"process",value:function(e){var t=e.clipboardData.getData("text/html");try{var n=t.match(/^(<meta.+?>)?<ne-clipboard data="(.+?)"(?:[^>]*)><\/ne-clipboard>/);n&&"string"==typeof n[2]&&(e.setTypes([].concat((0,ln.A)(e.types),["text/ne-inode"])),e.setData("text/ne-inode",decodeURIComponent(n[2])))}catch(e){}}}])}(),IXe=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"match",value:function(e){return 1===e.types.length&&"text/uri-list"===e.types[0]}},{key:"process",value:function(e){var t=e.clipboardData.getData("text/uri-list");e.setTypes(["text/plain"]),e.setData("text/plain",t)}}])}(),BXe=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"match",value:function(e){return!e.types.includes("text/ne-inode")&&e.types.includes("text/plain")}},{key:"process",value:function(e){var t=e.clipboardData.getData("text/plain");yh.isFullHttpURL(t)&&e.setTypes(["text/plain"])}}])}(),MXe=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"match",value:function(e){var t=e.clipboardData.getData("text/html");return"string"==typeof t&&/^Version:/.test(t)&&/\nStartHTML:/.test(t)&&!e.types.includes("text/ne-inode")}},{key:"process",value:function(e){var t=e.clipboardData.getData("text/html");e.setData("text/html",t.slice(t.indexOf("<html")))}}])}(),FXe=function(){return(0,$e.A)((function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];(0,Ke.A)(this,e),Object.defineProperty(this,"_clipboardData",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_types",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_files",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_cache",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"preprocessors",{enumerable:!0,configurable:!0,writable:!0,value:[new SXe,new TXe,new jXe,new BXe,new IXe,new MXe]}),this._types=t.types.slice(),(n=this.preprocessors).push.apply(n,(0,ln.A)(r)),this._preprocess()}),[{key:"clipboardData",get:function(){return this._clipboardData}},{key:"types",get:function(){return this._types.slice()}},{key:"getData",value:function(e){return this._types.includes(e)?"Files"===e?this._files.slice():this._cache[e]?this._cache[e]:this._clipboardData.getData(e):null}},{key:"setData",value:function(e,t){this._cache[e]=t}},{key:"setTypes",value:function(e){this._types=e}},{key:"_preprocess",value:function(){var e=this;this.preprocessors.forEach((function(t){t.match(e)&&t.process(e)}))}}])}(),LXe=document.createElement("span");function UXe(){return LXe.isConnected||document.body.appendChild(LXe),LXe}function VXe(){LXe.remove()}function HXe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,zXe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function zXe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(zXe=function(){return!!e})()}LXe.className="ne-hidden-copy-node",LXe.innerText="ne-clipboard";var WXe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=HXe(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Yy);function qXe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,$Xe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function $Xe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($Xe=function(){return!!e})()}Object.defineProperty(WXe,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze("IClipboardRenderService")});var KXe=function(e){function t(){return(0,Ke.A)(this,t),qXe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getCopyNode",value:function(){return UXe()}},{key:"destroyCopyNode",value:function(){return VXe()}},{key:"registerPastePayloadProcessor",value:function(e){if(this.plugin.onGetPastePayload)throw new Error("another processor has been registered. Only one processor is allowed");this.plugin.onGetPastePayload=e}},{key:"destroy",value:function(){}}])}(WXe);function YXe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,GXe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function GXe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(GXe=function(){return!!e})()}var JXe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=YXe(this,t,arguments),Object.defineProperty(e,"commandName",{enumerable:!0,configurable:!0,writable:!0,value:""}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){VXe()}},{key:"getState",value:function(){return dt}},{key:"getValue",value:function(){return!1}},{key:"execute",value:function(e,t){var n=document.getSelection(),r=n.focusNode,o=n.focusOffset,i=n.anchorNode,a=n.anchorOffset,l=document.createRange();l.selectNodeContents(UXe()),n.removeAllRanges(),n.addRange(l);var u=null;e&&(u=this.renderer.engine.transformDOMRange(e)),this.plugin.setNextEventData({range:u,option:t});try{return document.execCommand(this.commandName)}catch(e){return console.error(e),!1}finally{this.plugin.clearNextEventData(),n.setBaseAndExtent(i,a,r,o)}}}])}(qy);function XXe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,QXe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function QXe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(QXe=function(){return!!e})()}var ZXe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=XXe(this,t,arguments),Object.defineProperty(e,"commandName",{enumerable:!0,configurable:!0,writable:!0,value:GF.command.copy}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(JXe);function eQe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,tQe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function tQe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(tQe=function(){return!!e})()}Object.defineProperty(ZXe,"ID",{enumerable:!0,configurable:!0,writable:!0,value:GF.command.copy});var nQe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=eQe(this,t,arguments),Object.defineProperty(e,"commandName",{enumerable:!0,configurable:!0,writable:!0,value:GF.command.cut}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(JXe);function rQe(e,t){e["text/plain"]||(e["text/plain"]=" "),e["text/html"]&&(e["text/ne-inode"]?e["text/html"]='<ne-clipboard data="'.concat(encodeURIComponent(e["text/ne-inode"]),'" source="').concat(encodeURIComponent(location.href),'"></ne-clipboard>').concat(e["text/html"]):e["text/html"]='<ne-clipboard source="'.concat(encodeURIComponent(location.href),'"></ne-clipboard>').concat(e["text/html"])),Object.keys(e).forEach((function(n){t.setData(n,e[n])}))}Object.defineProperty(nQe,"ID",{enumerable:!0,configurable:!0,writable:!0,value:GF.command.cut});var oQe=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Object.assign({},t)}),[{key:"payloadPreprocessors",get:function(){return this._option.payloadPreprocessors||[]}}])}();function iQe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,aQe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function aQe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(aQe=function(){return!!e})()}Object.defineProperty(oQe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:GF.pluginName});var lQe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=iQe(this,t,arguments),Object.defineProperty(e,"_nextEventData",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"processId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"onGetPastePayload",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_isForceTextParse",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_handleCopy",{enumerable:!0,configurable:!0,writable:!0,value:function(t){t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault(),e._doCopy(t)}}),Object.defineProperty(e,"_handleGlobalCopy",{enumerable:!0,configurable:!0,writable:!0,value:function(t){e._nextEventData&&(t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault(),e._doCopy(t))}}),Object.defineProperty(e,"_handleCut",{enumerable:!0,configurable:!0,writable:!0,value:function(t){t.stopPropagation(),t.preventDefault(),t.stopImmediatePropagation(),e._doCut(t)}}),Object.defineProperty(e,"_handleGlobalCut",{enumerable:!0,configurable:!0,writable:!0,value:function(t){e._nextEventData&&(t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault(),e._doCut(t))}}),Object.defineProperty(e,"_handleBeforePaste",{enumerable:!0,configurable:!0,writable:!0,value:function(t){e._isForceTextParse=!1,(86===t.keyCode||Ks.isChar(t,"v"))&&t.shiftKey&&(e._isForceTextParse=!0)}}),Object.defineProperty(e,"_handlePaste",{enumerable:!0,configurable:!0,writable:!0,value:function(t){t.preventDefault(),t.stopPropagation();var n=e._fromSelf(t),r=e.getPayload(t);e.kernel.execCommand(GF.command.paste,r,n,e._isForceTextParse),e._isForceTextParse=!1}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"nextEventData",get:function(){return this._nextEventData}},{key:"init",value:function(e){this.processId=Dr(),e.onRootNode("copy",this._handleCopy),e.onRootNode("cut",this._handleCut),e.onRootNode("keydown",this._handleBeforePaste),e.onRootNode("paste",this._handlePaste),pc(this,document,"copy",this._handleGlobalCopy,!1),pc(this,document,"cut",this._handleGlobalCut,!1)}},{key:"setNextEventData",value:function(e){this._nextEventData=e}},{key:"clearNextEventData",value:function(){this._nextEventData=null}},{key:"_doCopy",value:function(e){var t,n,r=e.clipboardData,o=this.kernel.execCommand(GF.command.copy,null===(t=this._nextEventData)||void 0===t?void 0:t.range,null===(n=this._nextEventData)||void 0===n?void 0:n.option);if(!o)return!1;rQe(o,r),this._markProcessId(e)}},{key:"_doCut",value:function(e){var t=e.clipboardData,n=this.kernel.execCommand(GF.command.cut);if(!n)return!1;rQe(n,t),this._markProcessId(e)}},{key:"_markProcessId",value:function(e){e.clipboardData.setData("processid",this.processId)}},{key:"_fromSelf",value:function(e){return e.clipboardData.getData("processid")===this.processId}},{key:"getPayload",value:function(e){if("function"==typeof this.onGetPastePayload){var t=this.onGetPastePayload(e);if(t)return t}return new FXe(e.clipboardData,this.option.payloadPreprocessors)}}])}(Jg);function uQe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,cQe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function cQe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(cQe=function(){return!!e})()}Object.defineProperty(lQe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:GF.pluginName}),Object.defineProperty(lQe,"Service",{enumerable:!0,configurable:!0,writable:!0,value:KXe}),Object.defineProperty(lQe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:oQe}),Object.defineProperty(lQe,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[ZXe,nQe]});var sQe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=uQe(this,t,arguments),Object.defineProperty(e,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_contentNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){this._rootNode=Ly.createElement("ne-code"),this._contentNode=Ly.createElement("ne-code-content"),this._rootNode.appendChild(this._contentNode),this._updateFontSize()}},{key:"$didUpdate",value:function(){this._updateFontSize()}},{key:"getMainDOMNode",value:function(){return this._rootNode}},{key:"getContentDOMNode",value:function(){return this._contentNode}},{key:"_updateFontSize",value:function(){var e=(this.viewNode.attrs||{}).contentFontsize;if(e&&e>0)this._contentNode.style.fontSize=e+"px";else if(0===e)this._contentNode.style.fontSize="";else{var t=dQe(this.viewNode.children);this._contentNode.style.fontSize=0===t?"":t+"px"}}}])}(Sy);function dQe(e){return(null==e?void 0:e.length)?Math.max.apply(Math,(0,ln.A)(e.map((function(e){return e.isFillerNode()||e.isTextNode()?e.attrs.fontsize||0:e.isElement()?dQe(e.children):0})))):0}function fQe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,hQe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function hQe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(hQe=function(){return!!e})()}var pQe=function(e){function t(){return(0,Ke.A)(this,t),fQe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerBoxNode("code",sQe);var t=e.requireService(kRe.ID);t&&t.registerHotKey(CEe.code.name,CEe.code.keys,(function(t){t.stop(),e.execCommand("code")}))}}])}(Jg);function vQe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,mQe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function mQe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mQe=function(){return!!e})()}Object.defineProperty(pQe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:hL.pluginName});var gQe=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=vQe(this,t),Object.defineProperty(n,"_renderOrViewer",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(n,"_map",{enumerable:!0,configurable:!0,writable:!0,value:new WeakMap}),Object.defineProperty(n,"clearGradient",{enumerable:!0,configurable:!0,writable:!0,value:function(e){e.style.removeProperty("--gradient-start-color"),e.style.removeProperty("--gradient-end-color"),e.removeAttribute("ne-text-gradient")}}),Object.defineProperty(n,"updateColor",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t){if(t.includes(",")){var r=GU(JU(t,n._renderOrViewer.theme)),o=(0,tn.A)(r,2),i=o[0],a=o[1];a?(e.style.setProperty("--gradient-start-color",i),e.style.setProperty("--gradient-end-color",a),e.setAttribute("ne-text-gradient","true")):n.clearGradient(e),e.style.color=i}else n.clearGradient(e),e.style.color=n._renderOrViewer.theme.toVisualValue(t)}}),Object.defineProperty(n,"handleAttrUpdate",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t){e.hasAttribute("ne-strikethrough")||e.hasAttribute("ne-underline")||e.hasAttribute("ne-bg-color")||e.hasAttribute("ne-emoji")?n.clearGradient(e):n.updateColor(e,t)}}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"translate",value:function(e,t){var n=this;return{type:fp.CUSTOM_NAME,name:"color",value:function(e){var r=function(){return n.handleAttrUpdate(e,t)},o=n._map.get(e);o&&e.removeEventListener("ne-after-attr-update",o),e.addEventListener("ne-after-attr-update",r),n._map.set(e,r),n.updateColor(e,t)},remove:function(e){var t=n._map.get(e);t&&(e.removeEventListener("ne-after-attr-update",t),n._map.delete(e)),e.style.color="",n.clearGradient(e)}}}}])}(fp);function bQe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,yQe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function yQe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(yQe=function(){return!!e})()}var wQe=function(e){function t(){return(0,Ke.A)(this,t),bQe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerAttrTranslator(jU.attr.color,new gQe(e))}}])}(Jg);Object.defineProperty(wQe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:jU.pluginName});var AQe="left",kQe="right",_Qe="lineHead",CQe="leftWord",NQe="rightWord";function OQe(e,t){var n=document.getSelection();if(0===n.rangeCount||!n.isCollapsed)return null;var r=n.focusNode,o=n.focusOffset;n.getRangeAt(0).cloneRange(),n.modify("move",e,t);var i=n.getRangeAt(0),a=i,l=a.startContainer,u=a.startOffset;return l===r&&u===o||(i=Od.createRange({startContainer:l,startOffset:u,endContainer:r,endOffset:o}),n.setBaseAndExtent(r,o,r,o),bt(!i.collapsed,"plugins/delete/src/render/helpers/_calc_range.ts:76")),i}function xQe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,EQe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function EQe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(EQe=function(){return!!e})()}var DQe=function(e){function t(){return(0,Ke.A)(this,t),xQe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this;e.onRootNode("keydown",(function(e){var n=function(e){return Us.macos?function(e){return Ks.isBackspace(e)?Ks.onlyAlt(e)||Ks.onlyCtrl(e)?CQe:Ks.onlyMeta(e)?_Qe:AQe:Ks.isChar(e,"H")&&Ks.onlyCtrl(e)?AQe:Ks.isChar(e,"D")&&Ks.onlyCtrl(e)?kQe:Ks.isDelete(e)?Ks.onlyAlt(e)||Ks.onlyCtrl(e)?NQe:kQe:Ks.isChar(e,"K")&&Ks.onlyCtrl(e)?"end":null}(e):function(e){return Ks.isBackspace(e)?Ks.onlyCtrl(e)?CQe:AQe:Ks.isDelete(e)?Ks.onlyCtrl(e)?NQe:kQe:null}(e)}(e);if(n)if(e.preventDefault(),t.engine.getViewSelection().isCollapsed)switch(n){case AQe:t.kernel.execCommand("delete",!0);break;case kQe:t.kernel.execCommand("delete",!1);break;case"end":t.kernel.execCommand("deleteToBlockEnd")||t.kernel.execCommand("delete",!1);break;case _Qe:t._deleteToLineHead();break;case CQe:t._deleteLeftWord();break;case NQe:t._deleteRightWord();break;default:console.warn("invalid delete action")}else t.kernel.execCommand("delete",!0)}))}},{key:"_deleteToLineHead",value:function(){this._deleteByRange(OQe("left","lineboundary"))}},{key:"_deleteLeftWord",value:function(){this._deleteByRange(OQe("left","word"))}},{key:"_deleteRightWord",value:function(){this._deleteByRange(OQe("right","word"))}},{key:"_deleteByRange",value:function(e){if(e)if(e.collapsed)this.kernel.execCommand("delete",!0);else{var t=this.engine.transformDOMRange(e),n=t.start,r=t.end,o=this.renderer.kernel.createModelRange(n,r);o.collapsed||this.kernel.execCommand("deleteByRange",o)}}}])}(Jg);function PQe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,RQe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function RQe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(RQe=function(){return!!e})()}Object.defineProperty(DQe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:ZV.pluginName});var SQe=function(e){function t(){return(0,Ke.A)(this,t),PQe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=e.domRootNode;e.onRootNode("drop",(function(n){if(t.contains(n.target)&&!n.dataTransfer.getData("text/ne-move")){var r=n.dataTransfer.files;if(r&&0!==r.length){n.preventDefault();var o=function(e){if(document.caretRangeFromPoint){var t=document.caretRangeFromPoint(e.clientX,e.clientY);return t?{node:t.startContainer,offset:t.startOffset}:null}if(document.caretPositionFromPoint){var n=document.caretPositionFromPoint(e.clientX,e.clientY);if(n)return{node:n.offsetNode,offset:n.offset}}return null}(n);o&&e.execCommand("selection",o),e.execCommand("dropFile",Array.from(r))}}}))}}])}(Jg);function TQe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,jQe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function jQe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(jQe=function(){return!!e})()}Object.defineProperty(SQe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:fH.pluginName});var IQe=function(e){function t(){return(0,Ke.A)(this,t),TQe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(){return this.renderer.isFocus()}},{key:"execute",value:function(e){(null==(e="string"!=typeof e?e:{pos:e})?void 0:e.pos)&&this.renderer.kernel.execCommand("focus",e.pos),(!this.renderer.isFocus()||this.renderer.isFocus()&&e)&&this.renderer.focus(e)}}])}(qy);function BQe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,MQe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function MQe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(MQe=function(){return!!e})()}Object.defineProperty(IQe,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Jz.command.focus});var FQe=function(e){function t(){return(0,Ke.A)(this,t),BQe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){}}])}(Jg);function LQe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,UQe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function UQe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(UQe=function(){return!!e})()}Object.defineProperty(FQe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:Jz.pluginName}),Object.defineProperty(FQe,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[IQe]});var VQe=function(e){function t(){return(0,Ke.A)(this,t),LQe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"translate",value:function(e,t){return{type:fp.ATTR_NAME,name:"ne-fontsize",value:t+""}}}])}(fp);function HQe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,zQe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function zQe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(zQe=function(){return!!e})()}var WQe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=HQe(this,t,arguments),Object.defineProperty(e,"_lastFillerNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_handleCleanFillerSize",{enumerable:!0,configurable:!0,writable:!0,value:function(){e._lastFillerNode&&(e._lastFillerNode.style.fontSize="",e._lastFillerNode=null)}}),Object.defineProperty(e,"_handleSelectionChange",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t,n;e._handleCleanFillerSize();var r=document.getSelection(),o=r.anchorNode,i=r.anchorOffset,a=r.isCollapsed;if(e.renderer.isFocus()&&o&&a&&!(null===(t=null==o?void 0:o.closest)||void 0===t?void 0:t.call(o,"ne-heading-content"))){if(o.nodeType===Node.TEXT_NODE){if(""!==o.textContent)return;o=o.parentNode.previousSibling||o.parentNode.nextSibling}if(function(e){return(null==e?void 0:e.nodeType)===Node.ELEMENT_NODE}(o)){var l=["ne-b-filler","ne-t-filler","ne-i-filler"];l.includes(o.className)?(o.style.fontSize=e.kernel.queryCommandValue("fontsize",!1)+"px",e._lastFillerNode=o):l.includes(null===(n=o.childNodes[i])||void 0===n?void 0:n.className)&&(o.childNodes[i].style.fontSize=e.kernel.queryCommandValue("fontsize",!1)+"px",e._lastFillerNode=o.childNodes[i])}}}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this;e.registerAttrTranslator("fontsize",new VQe),this.kernel.on("document.create",(function(){var t=e.queryCommandValue("defaultFontsize"),n=e.domRootNode.classList;n.remove.apply(n,(0,ln.A)(mW.map((function(e){return"fz".concat(e)})))),t&&n.add("fz".concat(t))})),e.on("contentchange",this._handleSelectionChange),e.on("selectionchange",(function(){return setTimeout(t._handleSelectionChange,0)})),e.kernel.onPluginEvent("defaultFontsizeChange",(function(t){var n=t.current,r=t.old,o=e.domRootNode.classList;o.remove("fz".concat(r)),n&&o.add("fz".concat(n)),e.emit("defaultFontsizeChange",{current:n,old:r})}))}}])}(Jg);function qQe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,$Qe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function $Qe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($Qe=function(){return!!e})()}Object.defineProperty(WQe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:lW.pluginName});var KQe=function(e){function t(){return(0,Ke.A)(this,t),qQe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"clearPaintFormat",value:function(){this.plugin.clearPaintFormat()}},{key:"hasPaintFormat",value:function(){return this.plugin.hasPaintFormat()}},{key:"recordPaintFormat",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.plugin.recordPaintFormat(e)}},{key:"destroy",value:function(){}}])}(wTe);function YQe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,GQe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function GQe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(GQe=function(){return!!e})()}var JQe="ne-paint-formatting",XQe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=YQe(this,t,arguments),Object.defineProperty(e,"_once",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_activeFormat",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_mouseDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_shouldDoSomething",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_cancelTask",{enumerable:!0,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(e,"recordPaintFormat",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.renderer.domRootNode.classList.add(JQe),e._once=t,e._activeFormat=e.renderer.queryCommandValue("paintFormat")}}),Object.defineProperty(e,"hasPaintFormat",{enumerable:!0,configurable:!0,writable:!0,value:function(){return!!e._activeFormat}}),Object.defineProperty(e,"clearPaintFormat",{enumerable:!0,configurable:!0,writable:!0,value:function(){e._activeFormat&&(e._once=!1,e._activeFormat=null,e.renderer.domRootNode.classList.remove(JQe),e.renderer.emitPluginEvent("clearPaintFormat"))}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this;e.onRootNode("keydown",(function(e){Ks.isEscape(e)&&t.clearPaintFormat()}),!1),e.onRootNode("mousedown",(function(){t._mouseDown=!0}),!1),e.onRootNode("mouseup",(function(){t._mouseDown=!1,t._shouldDoSomething&&(t._cancelTask=od((function(){var n,r=(null===(n=t.kernel.model.document)||void 0===n?void 0:n.selection.isCollapsed)||!1;t._shouldDoSomething&&t._activeFormat&&r&&e.execCommand("paintFormat",t._activeFormat),t._shouldDoSomething=!1}),100))}),!1),this.kernel.editing.on("afterExecCommand",(function(n){var r=n.commandName;if("undo"!==r&&"redo"!==r){if("selection"===r&&t._activeFormat){if(t._mouseDown)return void(t._shouldDoSomething=!0);t._shouldDoSomething=!1,e.execCommand("paintFormat",t._activeFormat),t._once&&t.clearPaintFormat()}}else t.clearPaintFormat()}));var n=e.requireService(kRe.ID);n&&n.registerHotKey(CEe.formatPainter.name,CEe.formatPainter.keys,(function(e){e.stop(),t.recordPaintFormat(!1),mC.info(sc("已开启格式刷，按 Esc 退出"))}))}},{key:"destroy",value:function(){var e;Tr((0,Je.A)(t.prototype),"destroy",this).call(this),null===(e=this._cancelTask)||void 0===e||e.call(this)}}])}(Jg);Object.defineProperty(XQe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:cq.pluginName}),Object.defineProperty(XQe,"Service",{enumerable:!0,configurable:!0,writable:!0,value:KQe});var QQe={anchor:!1,folding:!0},ZQe=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Ww()({},QQe,t)}),[{key:"anchor",get:function(){return!!this._option.anchor}},{key:"folding",get:function(){return!!this._option.folding}},{key:"generateHashLink",get:function(){return this._option.generateHashLink}}])}();Object.defineProperty(ZQe,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"heading"});var eZe=function(){return(0,$e.A)((function e(t,n,r,o,i){(0,Ke.A)(this,e),Object.defineProperty(this,"_url",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"_id",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"nodeName",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"generateHashLink",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"_anchorNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._anchorNode=ad("ne-heading-anchor"),this._anchorNode.innerHTML="<span></span>",t.appendChild(this._anchorNode),this._render()}),[{key:"destroy",value:function(){this._anchorNode.remove()}},{key:"_render",value:function(){var e=this;Gl().render(Gu().createElement(Qx,{placement:"topLeft",trigger:["hover","click"],title:sc("复制段落链接"),mouseEnterDelay:1,mouseLeaveDelay:0,overlayClassName:"ne-heading-anchor-tooltip",destroyTooltipOnHide:!0},Gu().createElement("span",{onMouseDown:function(e){return e.preventDefault()},onClick:function(){e._handleAnchorClick()}},Gu().createElement(SC,{type:"card-h".concat(this.nodeName.slice(-1))}))),this._anchorNode)}},{key:"_handleAnchorClick",value:function(){var e,t=this._url,n=this._id;if(t){var r=null===(e=this.generateHashLink)||void 0===e?void 0:e.call(this,t,n);r&&ls()(r,{format:"text/plain"})?mC.success(sc("复制成功")):mC.error(sc("复制失败"))}}}])}(),tZe={h1:1,h2:2,h3:3,h4:4,h5:5,h6:6,"ne-h1":1,"ne-h2":2,"ne-h3":3,"ne-h4":4,"ne-h5":5,"ne-h6":6};function nZe(e){return!!tZe[e.nodeName.toLowerCase()]}function rZe(e){return e.nodeName?tZe[e.nodeName.toLowerCase()]||Number.MAX_VALUE:0}function oZe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function iZe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,aZe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function aZe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(aZe=function(){return!!e})()}function lZe(e){var t=rZe(e),n=Array.prototype.slice.call(document.querySelectorAll('[data-fold-owner="'.concat(e.id,'"]'))||[],0);if(!t)return n;for(var r=e;(r=r.nextElementSibling)&&!(nZe(r)&&rZe(r)<=t);)n.includes(r)||n.push(r);return n}var uZe=function(e){function t(e,n,r,o){var i;return(0,Ke.A)(this,t),i=iZe(this,t),Object.defineProperty(i,"_headingNode",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(i,"_mountNode",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(i,"id",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(i,"_foldNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_options",{enumerable:!0,configurable:!0,writable:!0,value:{context:{_foldingInstances:{}},isCollapsed:function(){return!1},isDisabled:function(){return!1},queryState:function(){},handleCollapsedChange:function(){},tryUnfold:function(){}}}),Object.assign(i._options,o),i._foldNode=ad("ne-heading-fold",Us.mobile?{className:"mobile"}:void 0),n.appendChild(i._foldNode),i._render(),i._options.context._foldingInstances[i.id]=i,i}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"tryUnfold",value:function(){this._options.tryUnfold()}},{key:"destroy",value:function(){Gl().unmountComponentAtNode(this._foldNode),delete this._options.context._foldingInstances[this.id],this._foldNode.remove(),this.removeAllListeners()}},{key:"update",value:function(){this._render()}},{key:"updateDOM",value:function(){this._options.isCollapsed()?t.collapseHeadingNode(this._headingNode,this._foldNode):t.uncollapseHeadingNode(this._headingNode,this._foldNode)}},{key:"_render",value:function(){var e=this,t=this._options.isCollapsed(),n=this._options.isDisabled();t?this._foldNode.classList.add("ne-force-visible"):this._foldNode.classList.remove("ne-force-visible");var r=Gu().createElement("div",{className:Uf("ne-heading-folding-inner",t?"ne-heading-fold ":"",n?"ne-heading-fold-disabled":""),onMouseEnter:function(){return e._render()},onMouseDown:function(e){return e.preventDefault()},onClick:function(t){t.preventDefault(),t.stopPropagation(),n||e._options.handleCollapsedChange()}},Gu().createElement(SC,{type:t?"review-arrow-right":"review-arrow-down"}));Gl().render(Us.mobile?r:Gu().createElement(Qx,{trigger:"hover",mouseEnterDelay:1,mouseLeaveDelay:0,title:sc(n?"当前禁止操作":t?"展开":"收起")},r),this._foldNode)}}],[{key:"unfold",value:function(e,t){if(!e)return!1;var n=document.querySelector('[id="'.concat(e,'"]'));if(!n)return!1;var r,o=function(e){var t=rZe(e),n=[];if(!t)return n;n.push(e);for(var r=e;t>1&&(r=r.previousElementSibling);){var o=rZe(r);o&&o<t&&(t=o,n.push(r))}return n.reverse(),n}(n),i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return oZe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oZe(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(o);try{for(i.s();!(r=i.n()).done;){var a=r.value;t._foldingInstances[a.id]&&t._foldingInstances[a.id].tryUnfold()}}catch(e){i.e(e)}finally{i.f()}return!0}},{key:"collapseHeadingNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e||!e.id)return!1;var n=e.id;if(!(t=t||e.querySelector("ne-heading-fold")))return!1;var r=lZe(e);return t.classList.add("ne-force-visible"),r.forEach((function(e){var t=e.getAttribute("data-fold-owner");t&&t!==n||(e.classList.add("ne-force-fold"),e.setAttribute("data-fold-owner",n))})),!0}},{key:"uncollapseHeadingNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e||!e.id)return!1;var n=e.id;if(!(t=t||e.querySelector("ne-heading-fold")))return!1;var r=lZe(e);return e.classList.remove("ne-force-visible"),t.classList.remove("ne-force-visible"),r.forEach((function(e){var t=e.getAttribute("data-fold-owner");t&&t!==n||(e.classList.remove("ne-force-fold"),e.removeAttribute("data-fold-owner"))})),!0}}])}(it);function cZe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,sZe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function sZe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(sZe=function(){return!!e})()}var dZe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=cZe(this,t,arguments),Object.defineProperty(e,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_contentNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_extNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_anchorController",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_foldingController",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_clearDestroyAnchor",{enumerable:!0,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(e,"_clearDestroyFolder",{enumerable:!0,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(e,"clearFn",{enumerable:!0,configurable:!0,writable:!0,value:function(){}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this.viewNode.nodeName;this._rootNode=Ly.createElement("ne-".concat(t)),this._contentNode=Ly.createElement("ne-heading-content"),this._extNode=ad("ne-heading-ext",{contentEditable:!1}),Ly.setAttributeByChange(this._rootNode,e),this._rootNode.appendChild(this._extNode),this._rootNode.appendChild(this._contentNode);var n=!1;this._allowShowAnchor()&&(this._creatingAnthorController(),n=!0),this._allowFolding()&&(this._createFoldingController(),n=!0),n&&this.initEvent(),this.pluginContext.headingService.afterInit(this._rootNode,this.viewNode)}},{key:"initEvent",value:function(){var e=this,n=-1;this.clearFn=this.renderer.onForceRootNode("mouseover",(function(r){var o,i,a;r.target!==e.renderer.domRootNode&&t.hoveredNode&&((null===(i=(o=r.target).closest)||void 0===i?void 0:i.call(o,"ne-h1, ne-h2, ne-h3, ne-h4, ne-h5, ne-h6"))||(clearTimeout(n),null===(a=t.hoveredNode)||void 0===a||a.classList.remove("hovered"),t.hoveredNode=null))})),pc(this,this._rootNode,"mouseenter",(function(){clearTimeout(n),t.hoveredNode&&t.hoveredNode!==e._rootNode&&t.hoveredNode.classList.remove("hovered"),t.hoveredNode=e._rootNode,e._rootNode.classList.add("hovered")})),pc(this,this._rootNode,"mouseleave",(function(){n=window.setTimeout((function(){e._rootNode.classList.remove("hovered")}),300)}))}},{key:"refreshController",value:function(){var e=this;if(this._allowShowAnchor())this._clearDestroyAnchor(),this._creatingAnthorController();else if(this._anchorController){var t=setTimeout((function(){var t;null===(t=e._anchorController)||void 0===t||t.destroy(),e._anchorController=null}),300);this._clearDestroyAnchor=function(){return clearTimeout(t)}}if(this._allowFolding())this._clearDestroyFolder(),this._createFoldingController();else if(this._foldingController){var n=setTimeout((function(){var t;null===(t=e._foldingController)||void 0===t||t.destroy(),e._foldingController=null}),300);this._clearDestroyFolder=function(){return clearTimeout(n)}}}},{key:"$didUpdate",value:function(){this.refreshController()}},{key:"$didPositionChange",value:function(){this.refreshController()}},{key:"updateAttribute",value:function(e){var t,n,r=this;e.updated.filter((function(e){return"ne-collapsed"===e.name}))&&setTimeout((function(){var e,t;null===(e=r._foldingController)||void 0===e||e.update(),null===(t=r._foldingController)||void 0===t||t.updateDOM(),r.pluginContext.emitCollapsedChange(r.viewNode.id)})),Ly.syncDOMAttrChange(this._rootNode,e),null===(n=null===(t=this.pluginContext)||void 0===t?void 0:t.headingService)||void 0===n||n.afterUpdate(this._rootNode,this.viewNode)}},{key:"getMainDOMNode",value:function(){return this._rootNode}},{key:"getContentDOMNode",value:function(){return this._contentNode}},{key:"destroy",value:function(){var e,n;null===(n=null===(e=this.pluginContext)||void 0===e?void 0:e.headingService)||void 0===n||n.beforeDestroy(this.viewNode),t.hoveredNode===this._rootNode&&(t.hoveredNode=null),this.clearFn(),this._clearDestroyAnchor(),this._clearDestroyFolder(),this._foldingController&&this._foldingController.destroy(),this._foldingController=null,this._anchorController&&this._anchorController.destroy()}},{key:"_allowShowAnchor",value:function(){var e,t;return!!(null===(t=null===(e=this.pluginContext)||void 0===e?void 0:e.option)||void 0===t?void 0:t.anchor)&&!!this.viewNode.parentNode.isRootNode()}},{key:"_allowFolding",value:function(){var e,t;return!!(null===(t=null===(e=this.pluginContext)||void 0===e?void 0:e.option)||void 0===t?void 0:t.folding)&&!!this.viewNode.parentNode.isRootNode()}},{key:"_creatingAnthorController",value:function(){this._anchorController||(this._anchorController=new eZe(this._extNode,this.renderer.option.currentURL,this.viewNode.id,this.viewNode.nodeName,this.pluginContext.option.generateHashLink))}},{key:"_createFoldingController",value:function(){var e=this;this._foldingController||(this._foldingController=new uZe(this._rootNode,this._extNode,this.viewNode.id,{context:this.pluginContext,isCollapsed:function(){return"true"===e.viewNode.attrs.collapsed},isDisabled:function(){return!e.pluginContext.getHeadingCollapsable(e.viewNode.id)},handleCollapsedChange:function(){e.pluginContext.toggleCollapased(e.viewNode.id)}}))}}])}(Sy);function fZe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,hZe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function hZe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(hZe=function(){return!!e})()}Object.defineProperty(dZe,"hoveredNode",{enumerable:!0,configurable:!0,writable:!0,value:null});var pZe=function(e){function t(e,n,r){var o;return(0,Ke.A)(this,t),o=fZe(this,t),Object.defineProperty(o,"_option",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(o,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(o,"_headingService",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(o,"_foldingInstances",{enumerable:!0,configurable:!0,writable:!0,value:{}}),o}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"option",get:function(){return this._option}},{key:"headingService",get:function(){return this._headingService}},{key:"toggleCollapased",value:function(e){this.renderer.execCommand("headingCollapsed",e)}},{key:"getCollapasedState",value:function(e){return this.renderer.queryCommandValue("headingCollapsed",e)}},{key:"emitCollapsedChange",value:function(e){return this.renderer.emitPluginEvent("headingCollapseChange",e)}},{key:"getHeadingCollapsable",value:function(e){return this.renderer.queryCommandValue("headingCollapsable",e)}}])}(it);function vZe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,mZe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function mZe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mZe=function(){return!!e})()}var gZe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=vZe(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Yy);function bZe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return yZe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yZe(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function yZe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function wZe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,AZe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function AZe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(AZe=function(){return!!e})()}Object.defineProperty(gZe,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze("IHeadingRenderService")});var kZe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=wZe(this,t,arguments),Object.defineProperty(e,"processors",{enumerable:!0,configurable:!0,writable:!0,value:[]}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"registerHeadingProcessor",value:function(e){this.processors.push(e)}},{key:"afterInit",value:function(e,t){var n,r=bZe(this.processors);try{for(r.s();!(n=r.n()).done;)n.value.afterInit(e,t)}catch(e){r.e(e)}finally{r.f()}}},{key:"afterUpdate",value:function(e,t){var n,r=bZe(this.processors);try{for(r.s();!(n=r.n()).done;)n.value.afterUpdate(e,t)}catch(e){r.e(e)}finally{r.f()}}},{key:"beforeDestroy",value:function(e){var t,n=bZe(this.processors);try{for(n.s();!(t=n.n()).done;)t.value.beforeDestroy(e)}catch(e){n.e(e)}finally{n.f()}}},{key:"destroy",value:function(){this.processors.length=0}}])}(gZe);function _Ze(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,CZe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function CZe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(CZe=function(){return!!e})()}var NZe=function(e){function t(){return(0,Ke.A)(this,t),_Ze(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"translate",value:function(e,t){return{type:fp.ATTR_NAME,name:"ne-collapsed",value:t||"false"}}}])}(fp);function OZe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,xZe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function xZe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xZe=function(){return!!e})()}var EZe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=OZe(this,t,arguments),Object.defineProperty(e,"lastFocusInHeadingElement",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_headingNodes",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"tipDisabled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_focusHeading",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t,n;if(!e.tipDisabled){var r=!1,o=null,i=document.getSelection();if(i&&i.rangeCount){var a=i.getRangeAt(0),l=gc(a.commonAncestorContainer,"ne-heading-content");l&&null===gc(a.commonAncestorContainer,"ne-card")&&(r=!0,o=l.parentNode)}r?(bt(o,"plugins/heading/src/render/index.ts:182"),e.lastFocusInHeadingElement!==o&&(o.setAttribute("data-focus","true"),e.lastFocusInHeadingElement&&(null===(t=e.lastFocusInHeadingElement)||void 0===t||t.removeAttribute("data-focus"))),e.lastFocusInHeadingElement=o):e.lastFocusInHeadingElement&&(null===(n=e.lastFocusInHeadingElement)||void 0===n||n.removeAttribute("data-focus"),e.lastFocusInHeadingElement=null)}}}),Object.defineProperty(e,"_collapseDOMNode",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n,r,o,i,a,l,u,c=t.mainDOMNode,s=t.viewNode;if(c&&s&&s._modelNode){null===e._headingNodes&&(e._headingNodes=Ut.getHeadingNodes(s._modelNode.rootNode));var d=Ut.isInHeadingCollapsed(s._modelNode,e._headingNodes);if(d&&d.id){null===(r=null===(n=c.classList)||void 0===n?void 0:n.add)||void 0===r||r.call(n,"ne-force-fold"),null===(o=c.setAttribute)||void 0===o||o.call(c,"data-fold-owner",d.id);var f=e.engine.viewDocument.getNodeById(d.id);if(f){var h=null===(a=null===(i=f._virtualNode)||void 0===i?void 0:i.getMainDOMNode)||void 0===a?void 0:a.call(i);null===(u=null===(l=null==h?void 0:h.classList)||void 0===l?void 0:l.add)||void 0===u||u.call(l,"ne-force-visible")}}}}}),Object.defineProperty(e,"_fixCollapseDOM",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t,n,r,o,i,a,l,u,c=Array.from(null===(r=null===(n=null===(t=e.renderer)||void 0===t?void 0:t.domRootNode)||void 0===n?void 0:n.querySelectorAll)||void 0===r?void 0:r.call(n,"[data-fold-owner]"));if(c)for(var s=(e._headingNodes||[]).reduce((function(e,t){return e[t.id]=t,e}),{}),d=0,f=c;d<f.length;d++){var h=f[d],p=null===(o=h.dataset)||void 0===o?void 0:o.foldOwner;if(p)if(s[p]){var v=h._neRef;if(!v)continue;var m=Ut.isInHeadingCollapsed(v._modelNode,e._headingNodes);m?p!==m.id&&(null===(u=h.setAttribute)||void 0===u||u.call(h,"data-fold-owner",m.id)):(null===(a=null===(i=h.classList)||void 0===i?void 0:i.remove)||void 0===a||a.call(i,"ne-force-fold"),null===(l=h.removeAttribute)||void 0===l||l.call(h,"data-fold-owner"))}else{var g=h._neRef;if(!g)continue;var b=Ut.isInHeadingCollapsed(g._modelNode,e._headingNodes);b&&b.id?h.setAttribute("data-fold-owner",b.id):(h.classList.remove("ne-force-fold"),h.removeAttribute("data-fold-owner"))}}}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t,n,r){var o=this;this._context=new pZe(this.option,e,this.service),e.registerAttrTranslator("collapsed",new NZe),e.registerBoxNode({h1:dZe,h2:dZe,h3:dZe,h4:dZe,h5:dZe,h6:dZe},this._context);var i=e.getService(kRe.ID);i&&(i.registerHotKey(CEe.paragraph.name,CEe.paragraph.keys,(function(t){t.stop(),e.execCommand("style","p")})),[CEe.h1,CEe.h2,CEe.h3,CEe.h4,CEe.h5,CEe.h6].forEach((function(t){i.registerHotKey(t.name,t.keys,(function(n){n.stop();var r=e.queryCommandValue("style");t.name===r?e.execCommand("style","p"):e.execCommand("style",t.name)}))})),this.option.folding&&i.registerHotKey(CEe.breakLine.name,CEe.breakLine.keys,(function(e){r.queryCommandState("headingBreakLine")===pt.NOT_EXECUTED&&(e.stop(),r.execCommand("headingBreakLine"))}),dM)),e.on("selectionchange",Jbe()(this._focusHeading,200)),e.on("contentchange",Jbe()(this._focusHeading,200)),this.option.folding&&(r.editing.on("contentchange",(function(){var e;(null===(e=r.model)||void 0===e?void 0:e.document)&&(o._headingNodes=Ut.getHeadingNodes(r.model.document.rootNode))})),e.on("contentchange",this._fixCollapseDOM),e.onPluginEvent("headingCollapseChange",(function(){o.kernel.emitPluginEvent("collapseChange")})),e.on("renderUnitInited",this._collapseDOMNode)),e.onPluginEvent("uiSwitched",(function(e){var t=e.type;o.tipDisabled||[mM,gM].includes(t)&&(o.tipDisabled=!0)}))}}])}(Jg);function DZe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,PZe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function PZe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(PZe=function(){return!!e})()}Object.defineProperty(EZe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:qq.pluginName}),Object.defineProperty(EZe,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:ZQe}),Object.defineProperty(EZe,"Service",{enumerable:!0,configurable:!0,writable:!0,value:kZe});var RZe=function(e){function t(){return(0,Ke.A)(this,t),DZe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this.kernel,n=e.requireService(kRe.ID);n&&[CEe.undo,CEe.redo].forEach((function(e){var r=e.keys,o=e.name;n.registerHotKey(o,r,(function(e){e.stop(),t.execCommand(o)}))}))}}])}(Jg);Object.defineProperty(RZe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:A$.pluginName});var SZe=function(){return(0,$e.A)((function e(t){var n=this;(0,Ke.A)(this,e),Object.defineProperty(this,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_keyMaps",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_globalKeyMaps",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_named",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_globalIsInitialized",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._rootNode=t.domRootNode,t.onRootNode("keydown",(function(e){n._processKeyDown(e,!1)}),!1),this._ignoreAbnormalHotkeys(t)}),[{key:"_ignoreAbnormalHotkeys",value:function(e){e.onDocument("keydown",(function(e){var t;"BODY"===(null===(t=e.target)||void 0===t?void 0:t.nodeName)&&"z"===e.key&&(e.ctrlKey||e.metaKey)&&e.preventDefault()}))}},{key:"destroy",value:function(){delete this._keyMaps,delete this._named}},{key:"triggerHotKey",value:function(e){for(var t=Object.values(this._keyMaps).reduce((function(t,n){return n.forEach((function(n){n.name===e&&t.push(n)})),t}),[]),n=!0,r={stop:function(){n=!1},event:new KeyboardEvent("keydown")},o=0;n&&o<t.length;o++)t[o].handler(r)}},{key:"register",value:function(e,t,n,r,o){var i=this;bt(r>0,"plugins/hot-key/src/render/hot-key.ts:93");var a=cf.parseKeys(t);if(!a)return function(){};var l=a.keyName,u=a.modifier;if(!l)return function(){};var c=o?this._globalKeyMaps:this._keyMaps;return o&&this._listenGlobal(),c[l]||(c[l]=[]),function(e,t){if(0!==e.length){var n=t.priority;if(n>e[0].priority)e.unshift(t);else{for(var r=e.length-1;r>=0;r--)if(n<=e[r].priority)return void e.splice(r+1,0,t);bt(!1,"plugins/hot-key/src/render/hot-key.ts:257")}}else e.push(t)}(c[l],{name:e,modifier:u,handler:n,priority:r}),this._named[e]={keys:(0,ln.A)(t),text:of(t)},function(){!function(e,t){e=e.filter((function(e){return e.name===t}))}(c[l],e),i._named[e]&&delete i._named[e]}}},{key:"getKeyByName",value:function(e){return this._named[e]||null}},{key:"getAllKeys",value:function(){return Object.assign({},this._named)}},{key:"_getKeyHandlers",value:function(e,t){var n=e.key,r=e.keyCode,o=t?this._globalKeyMaps:this._keyMaps,i=o[n.toLowerCase()]||o[r];if(!i)return null;var a=[];return i.forEach((function(t){cf.isMatchModifier(e,t.modifier)&&a.push(t.handler)})),a.length?a:null}},{key:"_listenGlobal",value:function(){var e=this;this._globalIsInitialized||(this._globalIsInitialized=!0,this.renderer.onDocument("keydown",(function(t){e._processKeyDown(t,!0)})))}},{key:"_processKeyDown",value:function(e,t){var n=this._rootNode;if(e.keyCode!==Ws){if(t){if(function(e){var t=document.activeElement;if(t&&("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName))return!0;var n=document.getSelection();if(!n.rangeCount)return!1;var r=gc(n.getRangeAt(0).commonAncestorContainer,"[contenteditable]");return!!r&&r!==e}(this.renderer.domRootNode))return}else{var r=document.getSelection();if(r.rangeCount&&yc(r.getRangeAt(0).commonAncestorContainer,n))return}var o=this._getKeyHandlers(e,t);if(o)for(var i=!0,a={stop:function(){i=!1,e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()},event:e},l=0,u=o.length;l<u;l++)if((0,o[l])(a),!i)return}}}])}();function TZe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,jZe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function jZe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(jZe=function(){return!!e})()}var IZe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=TZe(this,t,arguments),Object.defineProperty(e,"hotKey",{enumerable:!0,configurable:!0,writable:!0,value:new SZe(e.renderer)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"registerHotKey",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fM;return this.hotKey.register(e,t,n,r)}},{key:"registerGlobalHotKey",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fM;return this.hotKey.register(e,t,n,r,!0)}},{key:"getHotKeyByName",value:function(e){return this.hotKey.getKeyByName(e)}},{key:"triggerHotKey",value:function(e){return this.hotKey.triggerHotKey(e)}},{key:"getAllHotKeys",value:function(){return this.hotKey.getAllKeys()}},{key:"destroy",value:function(){this.hotKey.destroy()}},{key:"getCardHotKeyHelper",value:function(){return this.plugin.cardHotKeyHelper}}])}(kRe),BZe=new cf(["cmd","c"]),MZe=new cf(["cmd","x"]),FZe={match:function(e){return Ks.isDelete(e)||Ks.isBackspace(e)}},LZe=function(){return(0,$e.A)((function e(t){var n=this;(0,Ke.A)(this,e),Object.defineProperty(this,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"copyCardSet",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"cutCardSet",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"deleteCardSet",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"activeCardId",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"domEventListener",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"bindDOMEvent",{enumerable:!0,configurable:!0,writable:!0,value:function(){n.domEventListener=new hd(n.renderer.id,n.renderer.domRootNode,n._domEventFilter),n.domEventListener.on("keydown",n._domEventHandler)}}),Object.defineProperty(this,"_domEventFilter",{enumerable:!0,configurable:!0,writable:!0,value:function(e){if(n.hasRegister){if(!e.target.isConnected||e.target!==n.renderer.domRootNode)return!1;var t=document.getSelection();if(1===t.rangeCount){var r=gc(t.getRangeAt(0).commonAncestorContainer,"ne-card");if(r)return n.activeCardId=r.getAttribute("id"),!0}}return!1}}),Object.defineProperty(this,"_domEventHandler",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t;bt(n.activeCardId,"plugins/hot-key/src/common/hot-key-helper.ts:74"),[{matcher:BZe,action:"_copyCard"},{matcher:MZe,action:"_cutCard"},{matcher:FZe,action:"_deleteCard"}].some((function(n){var r=n.matcher,o=n.action;return!!r.match(e)&&(t=o,!0)})),t&&n[t](e),n.activeCardId=""}}),Object.defineProperty(this,"_copyCard",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n.copyCardSet.has(n.activeCardId)&&n.renderer.execCommand("copy")}}),Object.defineProperty(this,"_cutCard",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n.cutCardSet.has(n.activeCardId)&&n.renderer.execCommand("cut")}}),Object.defineProperty(this,"_deleteCard",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n.deleteCardSet.has(n.activeCardId)&&(e.stopImmediatePropagation(),n.renderer.execCommand("deleteCard",n.activeCardId))}}),this.bindDOMEvent()}),[{key:"hasRegister",get:function(){return this.copyCardSet.size>0||this.cutCardSet.size>0||this.deleteCardSet.size>0}},{key:"register",value:function(e,t){bt(e,"plugins/hot-key/src/common/hot-key-helper.ts:125"),this.toggleCardRegister(t.copy,this.copyCardSet,e),this.toggleCardRegister(t.cut,this.cutCardSet,e),this.toggleCardRegister(t.delete,this.deleteCardSet,e)}},{key:"toggleCardRegister",value:function(e,t,n){e?t.add(n):t.delete(n)}},{key:"remove",value:function(e){e&&(this.copyCardSet.delete(e),this.cutCardSet.delete(e),this.deleteCardSet.delete(e))}}])}(),UZe=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"cardHotkeyManager",{enumerable:!0,configurable:!0,writable:!0,value:new LZe(this.renderer)})}),[{key:"register",value:function(e,t){this.cardHotkeyManager&&this.cardHotkeyManager.register(e,t)}},{key:"destroyHotKey",value:function(e){this.cardHotkeyManager&&this.cardHotkeyManager.remove(e)}},{key:"destroy",value:function(){this.cardHotkeyManager=null}}])}();function VZe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,HZe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function HZe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(HZe=function(){return!!e})()}var zZe=function(e){function t(){var e;return(0,Ke.A)(this,t),e=VZe(this,t,arguments),Object.defineProperty(e,"_service",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"cardHotKeyHelper",{enumerable:!0,configurable:!0,writable:!0,value:new UZe(e.renderer)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){this._service=new IZe(this.renderer,this.kernel,this),this.renderer.registerService(this._service);var t=this._service.hotKey;e.extendMethods({registerHotKey:function(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fM;return t.register(e,n,r,o)},getHotKeyByName:function(e){return t.getKeyByName(e)},getAllHotKeys:function(){return t.getAllKeys()}})}},{key:"destroy",value:function(){var e;null===(e=this._service)||void 0===e||e.destroy(),this.cardHotKeyHelper.destroy(),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}}])}(Jg);function WZe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,qZe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function qZe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qZe=function(){return!!e})()}Object.defineProperty(zZe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:Mse.pluginName});var $Ze=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=WZe(this,t),Object.defineProperty(n,"attrName",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"translate",value:function(e,t){return{type:fp.ATTR_NAME,name:"ne-".concat(this.attrName),value:t}}}])}(fp);function KZe(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,YZe()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function YZe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(YZe=function(){return!!e})()}var GZe=function(e){function t(){return(0,Ke.A)(this,t),KZe(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this.kernel;e.registerAttrTranslator({indent:new $Ze("indent"),textIndent:new $Ze("text-indent")});var n=e.getService(kRe.ID);n&&([CEe.indentForTab,CEe.outdentForTab].forEach((function(e){var r=e.name,o=e.keys,i=e.command;n.registerHotKey(r,o,(function(e){-1!==t.queryCommandState("canIndent")&&(e.stop(),t.execCommand(i,!0))}))})),[CEe.indent,CEe.outdent].forEach((function(e){var r=e.name,o=e.keys,i=e.command;n.registerHotKey(r,o,(function(e){e.stop(),t.execCommand(i)}))})))}}])}(Jg);function JZe(e,t){if(t.rangeCount&&t.isCollapsed){var n=t.getRangeAt(0),r=n.startContainer,o=n.startOffset;if(Sd(r)){var i=r.data[o-1]||"",a=r.parentNode,l=a._neRef||a._viewNode;if(l){e.repairByViewNode(l);var u=l.previousSibling,c=l.nextSibling;Us.safari&&(u&&u.isTextNode()&&e.repairByViewNode(u),c&&c.isTextNode()&&e.repairByViewNode(c))}else console.warn("输入清理",r),r.remove();return i}return null}}function XZe(e){var t=e.anchorNode,n=e.focusNode;return{anchor:QZe(t),focus:QZe(n)}}function QZe(e){for(var t=null;e&&!(t=e._viewNode);)e=e.parentNode;if(!t)return null;for(;t;){if(t.hasCategory(qe.Block))return t;var n=t.parentNode;if(!n||n.hasCategory([qe.Root,qe.LikeRoot]))return t;t=n}return null}function ZZe(e,t){var n=t.anchor,r=t.focus;(null==n?void 0:n.isConnected)&&e.repairByViewNode(n),r!==n&&(null==r?void 0:r.isConnected)&&e.repairByViewNode(r)}function e0e(e){return e?e.replace(/[\b]/g,""):""}Object.defineProperty(GZe,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:tY.pluginName});var t0e=Us.mobile?function(e,t,n){var r=document.getSelection(),o=!1,i=!1,a=!1,l=null;t.onRootNode("keydown",(function(e){e.keyCode!==Ws||o||(a=!0)}),!1),t.onRootNode("beforeinput",(function(t){if(a=!1,"insertCompositionText"!==t.inputType||l){if("deleteContentBackward"===t.inputType){var o=t.getTargetRanges();o.length&&!o[0].collapsed?e.emit("deleteBackward",o[0]):e.emit("deleteBackward")}}else l=function(){if(!r.rangeCount)return null;var e=r.getRangeAt(0);return n.transformDOMRange(e)||null}();"insertText"===t.inputType&&/(\r\n|\n|\r)/gm.test(t.data)&&(t.preventDefault(),e.emit("input",{composition:!1,data:t.data}))})),t.onRootNode("input",(function(t){if(jd(t)&&(i=!0,!o&&"deleteContentBackward"!==t.inputType)){i=!1;var n=t.data;n?e.emit("input",{data:n,composition:!1}):e.emit("inputCancel")}})),t.onRootNode("compositionstart",(function(){i=!1,o=!0,l=null,e.emit("compositionstart"),r.isCollapsed||t.execCommand("delete",!0,!1)}),!1),t.onRootNode("compositionend",(function(n){var u=a;if(o=!1,a=!1,i){JZe(t,r),i=!1,!u&&l&&e.emit("beforeReplace",l),l=null;var c=n.data;c?e.emit("input",{data:c,composition:!0}):e.emit("inputCancel")}}),!1)}:function(e,t){var n=document.getSelection(),r=!1,o=!1,i=null,a=!1,l=null;t.onRootNode("keydown",(function(e){if(l={timeStamp:e.timeStamp,key:e.key},r||e.keyCode===Ws)return e.stopPropagation(),void e.stopImmediatePropagation();n.isCollapsed||(i=XZe(n))}),!1),t.onRootNode("keyup",(function(){i=null}),!1),t.onRootNode("beforeinput",(function(i){if("insertText"===i.inputType){a=!0,JZe(t,n),r=!1;var u=e0e(i.data||"");if(!u)return void e.emit("inputCancel");if(":"===i.data&&":"!==(null==l?void 0:l.key)&&"："!==(null==l?void 0:l.key))return;if(","===i.data&&","!==(null==l?void 0:l.key)&&"，"!==(null==l?void 0:l.key))return;l=null,window.BEFORE_INPUT_PREVENT_DEFAULT||i.preventDefault();var c=i.getTargetRanges();c.length&&!1===c[0].collapsed&&e.emit("deleteBackward",c[0],i.data),e.emit("input",{data:u,composition:!0})}else{if("deleteContentBackward"===i.inputType){var s=i.getTargetRanges();return s.length?e.emit("deleteBackward",s[0]):e.emit("deleteBackward"),void(a=!0)}a=!1}o&&r&&!n.isCollapsed&&t.execCommand("delete",!0,!1),o=!1})),t.onRootNode("input",(function(u){if(jd(u))if(o=!1,a)a=!1;else if("deleteContentBackward"!==u.inputType)if(r)bt(!i,"plugins/input/src/render/input-observer/lib/chrome/pc.ts:152");else{var c=JZe(t,n);if(!(":"===u.data&&":"!==(null==l?void 0:l.key)&&"："!==(null==l?void 0:l.key)||","===u.data&&","!==(null==l?void 0:l.key)&&"，"!==(null==l?void 0:l.key))){l=null;var s=e0e(u.data||c);s?(e.emit("input",{data:s,composition:!1}),i&&(ZZe(t,i),i=null)):e.emit("inputCancel")}}})),t.onRootNode("compositionstart",(function(){r=!0,o=!0,e.emit("compositionstart");var t=n.focusNode,i=n.focusOffset;if(n.isCollapsed&&Sd(t)){var a=t.data;t.data=a.substring(0,i)+"​​​​​​"+a.substring(i),n.setBaseAndExtent(t,i,t,i)}}),!1),t.onRootNode("compositionend",(function(i){if(o=!1,a)a=!1;else if(JZe(t,n),r){r=!1;var l=e0e(i.data);l?e.emit("input",{data:l,composition:!0}):e.emit("inputCancel")}}),!1)};function n0e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,r0e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function r0e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(r0e=function(){return!!e})()}var o0e=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=n0e(this,t),Object.defineProperty(r,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r.renderer=e,r._init(e,n),r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"_init",value:function(e,t){Us.ios?function(e,t){var n,r=null;t.onRootNode("keydown",(function(e){e.keyCode===Ws&&(e.stopPropagation(),e.stopImmediatePropagation())}),!1),t.onRootNode("beforeinput",(function(t){var r,o,i=t.inputType,a=t.getTargetRanges(),l=function(){var r;if(a.length){var o=a[0];n=o,o.startContainer===o.endContainer&&o.startContainer.nodeType===Node.TEXT_NODE&&o.endOffset-o.startOffset>0&&e.emit("deleteBackward",o)}var i=null===(r=t.dataTransfer)||void 0===r?void 0:r.getData("text/plain");i&&e.emit("input",{composition:!1,data:i})};return"insertReplacementText"===i?(t.preventDefault(),void l()):"insertText"===i&&/(\r\n|\n|\r)/gm.test(t.data)&&!1!==(null===(r=a[0])||void 0===r?void 0:r.collapsed)?(t.preventDefault(),n&&(e.emit("deleteBackward",n),n=void 0),void e.emit("input",{composition:!1,data:t.data})):void("insertText"!==i||!1!==(null===(o=a[0])||void 0===o?void 0:o.collapsed)||l())}),!1),t.onRootNode("input",(function(t){if(jd(t)){var n=t.inputType;"deleteContentBackward"!==n?"insertCompositionText"!==n&&t.data&&e.emit("input",{data:t.data,composition:!1}):e.emit("deleteBackward")}}),!1),t.onRootNode("compositionstart",(function(){r=document.getSelection().focusNode}),!1),t.onRootNode("compositionend",(function(){try{if(Sd(r)||r._neRef.isFillerNode()){var e=r.parentNode,n=e._neRef||e._viewNode;n&&t.repairByViewNode(n)}}catch(e){}}),!1)}(this,e):Us.safari?function(e,t){var n=document.getSelection(),r=!1;t.onRootNode("keydown",(function(e){e.keyCode===Ws&&(e.stopPropagation(),e.stopImmediatePropagation())}),!1),t.onRootNode("input",(function(o){if(jd(o))if("deleteContentBackward"!==o.inputType){if(!r&&(JZe(t,n),o.data)){var i=o.getTargetRanges();i.length&&!1===i[0].collapsed&&e.emit("deleteBackward",i[0],o.data),e.emit("input",{data:o.data,composition:!1})}}else e.emit("deleteBackward")}),!1),t.onRootNode("beforeinput",(function(o){if("insertReplacementText"!==o.inputType)r||n.isCollapsed||t.execCommand("delete",!0,!1);else{o.preventDefault();var i=o.getTargetRanges();if(i.length){var a=i[0];a.startContainer===a.endContainer&&a.startContainer.nodeType===Node.TEXT_NODE&&a.endOffset-a.startOffset>0&&e.emit("deleteBackward",a)}var l=o.dataTransfer.getData("text/plain");e.emit("input",{composition:!1,data:l})}}),!1),t.onRootNode("compositionstart",(function(){r=!0,e.emit("compositionstart"),n.isCollapsed||t.execCommand("delete",!0,!1)}),!1),t.onRootNode("compositionend",(function(o){r=!1,JZe(t,n),o.data&&e.emit("input",{data:o.data,composition:!0})}),!1)}(this,e):Us.firefox?function(e,t){var n=document.getSelection(),r=null;t.onRootNode("keydown",(function(e){e.keyCode===Ws&&(e.stopPropagation(),e.stopImmediatePropagation()),n.isCollapsed||(r=XZe(n))}),!1),t.onRootNode("keyup",(function(){r=null}),!1),t.onRootNode("compositionstart",(function(){n.isCollapsed||t.execCommand("delete",!0,!1),e.emit("compositionstart")}),!1),t.onRootNode("input",(function(o){if(jd(o)&&!o.isComposing&&(JZe(t,n),o.data)){var i=o.getTargetRanges();i.length&&!1===i[0].collapsed&&e.emit("deleteBackward",i[0],o.data),e.emit("input",{data:o.data,composition:!1}),r&&(ZZe(t,r),r=null)}}))}(this,e):t0e(this,e,t)}},{key:"destroy",value:function(){this.removeAllListeners()}}])}(it),i0e=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Object.assign({},t)}),[{key:"autoSpacing",get:function(){return this._option.autoSpacing||!1}},{key:"autoClosing",get:function(){return this._option.autoClosing||!1}}])}();function a0e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,l0e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function l0e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(l0e=function(){return!!e})()}Object.defineProperty(i0e,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"input"});var u0e=function(e){function t(){return(0,Ke.A)(this,t),a0e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getValue",value:function(){return this.plugin.getAutoSpacing()}},{key:"execute",value:function(e){return this.plugin.setAutoSpacing(e),!0}}])}(qy);function c0e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,s0e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function s0e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s0e=function(){return!!e})()}Object.defineProperty(u0e,"ID",{enumerable:!0,configurable:!0,writable:!0,value:MY.command.autoSpacing});var d0e=function(e){function t(){return(0,Ke.A)(this,t),c0e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getValue",value:function(){return this.plugin.getAutoClosing()}},{key:"execute",value:function(e){return this.plugin.setAutoClosing(e),!0}}])}(qy);function f0e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,h0e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function h0e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h0e=function(){return!!e})()}Object.defineProperty(d0e,"ID",{enumerable:!0,configurable:!0,writable:!0,value:MY.command.autoClosing});var p0e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=f0e(this,t,arguments),Object.defineProperty(e,"_observer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_autoSpacing",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_autoClosing",{enumerable:!0,configurable:!0,writable:!0,value:!1}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t,n,r){var o=this;bt(e.hasExtendMethod("repaintSelection"),"plugins/input/src/render/index.ts:32");var i=new o0e(e,t),a=document.getSelection();this._autoSpacing=this.option.autoSpacing,this._autoClosing=this.option.autoClosing,this._observer=i,i.on("compositionstart",(function(){e.emit("compositionstart")})),i.on("input",(function(t){var n=t.data,i=t.composition;if(e.emit("input"),r.queryCommandState("canInput")!==st){var a=!1;"@"!==n&&"、"!==n&&"/"!==n||e.emitPluginEvent("beforeinput",{stop:function(){a=!0},data:"、"===n?"/":n,originData:n}),a||r.execCommand("input",n,i,o._autoSpacing,o._autoClosing),requestAnimationFrame((function(){v0e(e)}))}else requestAnimationFrame((function(){v0e(e)}))})),i.on("deleteBackward",(function(n,i){if(n)try{if(o._autoClosing&&i&&VY[i])return;var l=t.transformDOMRange(n),u=l.start,c=l.end,s=e.kernel.createModelRange(u,c);if(!s||s.start.node===s.end.node&&s.start.offset===s.end.offset)return;r.execCommand("deleteByRange",s)}catch(e){console.error(e),console.warn("failed to execute deleteBackward")}else a.isCollapsed&&r.execCommand("delete");requestAnimationFrame((function(){v0e(e)}))})),i.on("beforeReplace",(function(t){try{if(!t||t.start.node===t.end.node&&t.start.offset===t.end.offset)return;r.execCommand("deleteByRange",t)}catch(e){console.error(e),console.warn("failed to execute deleteByModelRange")}requestAnimationFrame((function(){v0e(e)}))})),i.on("inputCancel",(function(){e.repaintSelection(!0)}));var l=e.getService(kRe.ID);l&&(l.registerHotKey(CEe.newLine.name,CEe.newLine.keys,(function(e){e.stop(),r.queryCommandState("canInput")!==st&&r.execCommand("input","\n",!1)})),l.registerHotKey(CEe.tab.name,CEe.tab.keys,(function(e){e.stop(),r.queryCommandState("canInput")!==st&&r.execCommand("input","\t",!1)}),hM))}},{key:"destroy",value:function(){this._observer.destroy(),this._observer=null,Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}},{key:"setAutoSpacing",value:function(e){this._autoSpacing=e}},{key:"getAutoSpacing",value:function(){return this._autoSpacing}},{key:"setAutoClosing",value:function(e){this._autoClosing=e}},{key:"getAutoClosing",value:function(){return this._autoClosing}}])}(Jg);function v0e(e){var t,n=document.getSelection(),r=n.rangeCount?n.getRangeAt(0):null;if(r&&r.collapsed&&r.startContainer.nodeType===Node.TEXT_NODE){var o=null===(t=r.startContainer.parentNode)||void 0===t?void 0:t._neRef,i=null==o?void 0:o.closest(qe.Block),a=null==i?void 0:i.previousSibling,l=null==i?void 0:i.nextSibling;i&&(e.repairByViewNode(i),a&&e.repairByViewNode(a),l&&e.repairByViewNode(l),e.repaintSelection(!0))}}function m0e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,g0e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function g0e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(g0e=function(){return!!e})()}Object.defineProperty(p0e,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:MY.pluginName}),Object.defineProperty(p0e,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:i0e}),Object.defineProperty(p0e,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[u0e,d0e]});var b0e=function(e){function t(){return(0,Ke.A)(this,t),m0e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t,n,r){e.onRootNode("keydown",(function(t){if(299!==t.keyCode&&!t.metaKey&&!t.ctrlKey&&Ks.isEnter(t)){var n=r.queryCommandValue("getSelectLabel");n&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),e.emitPluginEvent("openLabelEditor",n))}}),!1)}}])}(Jg);function y0e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,w0e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function w0e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(w0e=function(){return!!e})()}Object.defineProperty(b0e,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:"label"});var A0e=function(e){function t(){return(0,Ke.A)(this,t),y0e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"translate",value:function(e,t){return{type:fp.ATTR_NAME,name:"ne-line-height",value:t}}}])}(fp);function k0e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,_0e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function _0e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_0e=function(){return!!e})()}var C0e=function(e){function t(){return(0,Ke.A)(this,t),k0e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerAttrTranslator("lineHeight",new A0e)}}])}(Jg);function N0e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,O0e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function O0e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(O0e=function(){return!!e})()}Object.defineProperty(C0e,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:CJ.pluginName});var x0e=function(e){function t(){return(0,Ke.A)(this,t),N0e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"insertLink",value:function(){return this.plugin._insertLink()}},{key:"extendLinkToolbar",value:function(e){this.plugin._extends.push(e)}},{key:"extendAppLinkToolbar",value:function(e){this.plugin._appExtends.push(e)}},{key:"destroy",value:function(){}}])}(TBe);function E0e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,D0e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function D0e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(D0e=function(){return!!e})()}var P0e=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=E0e(this,t,[e]),Object.defineProperty(n,"state",{enumerable:!0,configurable:!0,writable:!0,value:{text:"",src:"",visible:!0,valid:!0}}),Object.defineProperty(n,"_textRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(n,"_srcRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(n,"_clearTask",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_handleDescKeyDown",{enumerable:!0,configurable:!0,writable:!0,value:function(e){Ks.isEscape(e)?(e.preventDefault(),n.props.onClose(),n.props.onCancel()):Ks.isEnter(e)&&n._srcRef.current&&n._srcRef.current.focus()}}),Object.defineProperty(n,"_handleSrcKeyDown",{enumerable:!0,configurable:!0,writable:!0,value:function(e){if(Ks.isEscape(e))e.preventDefault(),n.props.onClose(),n.props.onCancel();else if(Ks.isEnter(e)){if(e.preventDefault(),!n.state.valid)return;if(n._textRef.current&&n._srcRef.current){var t=n._textRef.current.input.value,r=n._srcRef.current.input.value;t&&r&&(n.props.onClose(),n.props.onConfirm(t,r))}}}}),Object.defineProperty(n,"_handleTextChange",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n.setState({text:e.target.value})}}),Object.defineProperty(n,"_handleSrcChange",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t=e.target.value;n.setState({src:t,valid:!t||n.props.isValidURL(t)})}}),Object.defineProperty(n,"_handleSubmit",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e,t;n.setState({visible:!1}),n._textRef.current&&n._srcRef.current&&(e=n._textRef.current.input.value||sc("链接"),t=n._srcRef.current.input.value),n.props.onClose(),e&&t?n.props.onConfirm(e,t):n.props.onCancel()}}),n.state=Object.assign(Object.assign({},n.state),{visible:e.visible,text:e.text,src:e.src}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){var e=this,t=this._srcRef.current,n=this._textRef.current;this._clearTask=od((function(){if(n&&"text"===e.props.defaultSelect)return n.focus(),void n.select();t&&(e._clearTask=od((function(){t.focus(),t.select()})))}),100)}},{key:"componentWillUnmount",value:function(){var e;null===(e=this._clearTask)||void 0===e||e.call(this)}},{key:"render",value:function(){var e=this,t=this._renderEditor();return Gu().createElement(nR,{placement:["bottomLeft","bottomRight","topLeft","topRight"],targetNode:this.props.targetNode,uiEmitter:this.props.uiEmitter,onClose:function(){e.props.onClose(),e.props.onCancel()},className:"ne-ui-overlay-bar-wrap",visible:this.state.visible},t)}},{key:"_renderEditor",value:function(){return Gu().createElement("div",{className:"ne-link-editor"},Gu().createElement("div",{className:"ne-link-editor-field"},Gu().createElement("label",null,Gu().createElement("div",{className:"ne-link-editor-field-title"},sc("文本")),Gu().createElement(KP,{ref:this._textRef,disabled:!this.props.allowModifyText,placeholder:sc("添加描述"),onKeyDown:this._handleDescKeyDown,onChange:this._handleTextChange,value:this.state.text||""}))),Gu().createElement("div",{className:"ne-link-editor-field"},Gu().createElement("label",null,Gu().createElement("div",{className:"ne-link-editor-field-title"},sc("链接")),Gu().createElement(KP,{ref:this._srcRef,placeholder:sc("链接地址"),onKeyDown:this._handleSrcKeyDown,onChange:this._handleSrcChange,value:this._getUserSrc(this.state.src)||""})),this._renderTip()),Gu().createElement(Mye,{onClick:this._handleSubmit,disabled:!this.state.src||!this.state.valid},sc("确定")))}},{key:"_renderTip",value:function(){return this.state.valid?null:Gu().createElement("div",{className:"ne-link-error-tip"},sc("请输入正确的链接"))}},{key:"_getUserSrc",value:function(e){return e===nM?void 0:e}}])}(Yu.Component);function R0e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,S0e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function S0e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(S0e=function(){return!!e})()}Object.defineProperty(P0e,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{visible:!0,allowModifyText:!0,defaultSelect:"src",isValidURL:function(){return!1},onClose:function(){},onCancel:function(){},onConfirm:function(){}}});var T0e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=R0e(this,t,arguments),Object.defineProperty(e,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_contentNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_overlay",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_modeOverlay",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_modeMenuRef",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"defaultIndex",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_isShowMenu",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_keyDownHandler",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=e._modeMenuRef.current;if(n)if(Ks.isEnter(t)){if(n.getSelected){var r=n.getSelected();if(r)return t.preventDefault(),t.stopPropagation(),e._handleSubmit(r.item,r.index)}}else if(Ks.isArrowDown(t))t.preventDefault(),n.selectDown&&n.selectDown();else{if(!Ks.isArrowUp(t))return void e._closeMenu();t.preventDefault(),n.selectUp&&n.selectUp()}}}),Object.defineProperty(e,"_handleCompositionStart",{enumerable:!0,configurable:!0,writable:!0,value:function(){e._closeMenu()}}),Object.defineProperty(e,"_handleClick",{enumerable:!0,configurable:!0,writable:!0,value:function(){e._closeMenu()}}),Object.defineProperty(e,"_getItems",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=e.viewNode.attrs.src,n=e.pluginContext.getExtendLinkBtn({src:t,text:e._getLinkText()});return(n=n?n.filter(Boolean):[]).length&&n.push("|"),n=n.map((function(t){if("|"!==t&&t.onClick){var n=t.onClick;return Object.assign(Object.assign({},t),{onClick:function(){n(e.viewNode)}})}return t})),n=e.pluginContext.needShowDesktopButton(t)?[].concat((0,ln.A)(n),[{type:"button",icon:"o-desktop-open",tooltip:sc("打开文档"),onClick:function(){var t=e.viewNode.attrs.src;e.renderer.emitEvent("visitLocalLink",t)}},{type:"button",icon:"o-visit-link",tooltip:sc("浏览器访问"),onClick:function(){var t=e.viewNode.attrs.src;e.renderer.emitEvent("visitLink",t,!0)}}]):[].concat((0,ln.A)(n),[{type:"button",icon:"o-visit-link",tooltip:sc("访问链接"),onClick:function(){var t=e.viewNode.attrs.src;e.renderer.emitEvent("visitLink",t,!0)}}]),[].concat((0,ln.A)(n),[{type:"button",icon:"o-edit",tooltip:sc("编辑链接"),onClick:function(){e._openEditor({canRollbackHistory:!1,defaultSelect:"text"})}},{type:"button",icon:"action-copy",tooltip:sc("复制"),onClick:function(){var t=document.createRange();t.selectNode(e.viewNode._virtualNode._domNode),e.renderer.execCommand("copy",t)?mC.success(sc("复制成功")):mC.error(sc("复制失败"))}},{type:"button",icon:"o-unlink",tooltip:sc("取消链接"),onClick:function(){e.renderer.execCommand("unlink",e.viewNode.attrs.id)}}])}}),Object.defineProperty(e,"_handleSubmit",{enumerable:!0,configurable:!0,writable:!0,value:function(t,n){e._closeMenu(),t.onClick&&n!==e.defaultIndex&&t.onClick(e.viewNode),e.renderer.execCommand("focusCard",e.viewNode.attrs.id,lM)}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){this._rootNode=Ly.createElement("ne-link"),this._contentNode=Ly.createElement("ne-link-content"),this._modeMenuRef=Gu().createRef(),Ly.setAttributeByChange(this._rootNode,e),this._rootNode.appendChild(this._contentNode),this.afterInit()}},{key:"afterInit",value:function(){var e=this;this.pluginContext.on("openEditor",(function(t,n){var r=n.defaultSelect;t===e.viewNode.attrs.id&&e._openEditor({canRollbackHistory:!0,defaultSelect:r})})),this.pluginContext.on("openMenu",(function(t){t.id===e.viewNode.attrs.id&&e._openMenu()})),this.bindEvent()}},{key:"destroy",value:function(){var e;null===(e=this._overlay)||void 0===e||e.cancel(),this._closeMenu()}},{key:"updateAttribute",value:function(e){Ly.syncDOMAttrChange(this._rootNode,e)}},{key:"bindEvent",value:function(){var e=this,t=function(t){Ac(t)||e._isShowMenu||(e._overlay=aR.openOnlyByType("link",{containerNode:e.renderer.scrollableOverlayNode,targetNode:e._getTargetNode(),reactComponent:Gu().createElement(axe,{placement:["bottomLeft","topLeft","bottomRight","topRight"],items:e._getItems()})}))};Us.mobile?pc(this,this._rootNode,"click",t,!1):(this.pluginContext.hiddenPopMenu||pc(this,this._rootNode,"mouseenter",t,!1),this.pluginContext.renderer.on("selectionchange",(function(){var t;null===(t=e._overlay)||void 0===t||t.rerender({items:e._getItems()})})),pc(this,this._rootNode,"click",(function(t){if(!Ac(t)){var n=e.viewNode.attrs,r=n.external,o=n.src;e.pluginContext.needShowDesktopButton(o)&&!(Us.macos?t.metaKey:t.ctrlKey)?e.renderer.emitEvent("visitLocalLink",o):e.renderer.emitEvent("visitLink",o,!!(Us.macos?t.metaKey:t.ctrlKey)||r)}}),!1))}},{key:"bindMenuEvent",value:function(){pc(this,this.renderer.domRootNode,"keydown",this._keyDownHandler,!0),pc(this,this.renderer.domRootNode,"compositionstart",this._handleCompositionStart),pc(this,window,"click",this._handleClick)}},{key:"removeMenuEvent",value:function(){this.renderer.domRootNode.removeEventListener("keydown",this._keyDownHandler,!0),this.renderer.domRootNode.removeEventListener("compositionstart",this._handleCompositionStart),window.removeEventListener("click",this._handleClick)}},{key:"getMainDOMNode",value:function(){return this._rootNode}},{key:"getContentDOMNode",value:function(){return this._contentNode}},{key:"_getLinkText",value:function(){var e=this.viewNode.children;return e&&e.length?e.map((function(e){return e.isTextNode()?e.data:null})).filter(Boolean).join(""):sc("链接")}},{key:"_openEditor",value:function(e){var t=this,n=e.canRollbackHistory,r=void 0!==n&&n,o=e.defaultSelect,i=void 0===o?"src":o,a=this.renderer,l=this._getTargetNode();aR.open({containerNode:a.scrollableOverlayNode,targetNode:l,reactComponent:Gu().createElement(P0e,{text:this._getLinkText(),targetNode:l,src:this.pluginContext.sanitizeURL(this.viewNode.attrs.src),defaultSelect:i,isValidURL:this.pluginContext.isValidURL,onCancel:function(){r&&a.execCommand("rollbackHistory",1)},onConfirm:function(e,n){n=t.pluginContext.transformURL(n);var r=t.viewNode.attrs.src,o=a.queryCommandValue("linkText",t.viewNode.attrs.id);bt(o,"plugins/link/src/render/link-element.tsx:401"),e===o&&n===r||a.execCommand("updateLink",t.viewNode.attrs.id,{text:e!==o?e:null,src:n!==r?n:null})}}),closeCallback:function(){t.renderer.execCommand("focus",{preventScroll:!0})},autoClose:!1})}},{key:"_openMenu",value:function(){this._closeMenu();var e=this.renderer,t=this._getTargetNode(),n=[{name:"link-view",text:sc("链接"),icon:"t-link",disabled:!0}].concat((0,ln.A)((this.pluginContext.getExtendLinkBtn({src:this.viewNode.attrs.src})||[]).filter((function(e){return"|"!==e}))));n.length<=1||(this.defaultIndex=0,this._modeOverlay=aR.open({containerNode:e.scrollableOverlayNode,targetNode:t,overlayClassName:"ne-ui-link-mode-overlay",reactComponent:Gu().createElement(LNe,{ref:this._modeMenuRef,defaultIndex:this.defaultIndex,data:n,targetNode:t,onSubmit:this._handleSubmit}),autoClose:!1}),this._isShowMenu=!0,this.bindMenuEvent())}},{key:"_closeMenu",value:function(){var e;null===(e=this._modeOverlay)||void 0===e||e.cancel(),this._isShowMenu=!1,this.removeMenuEvent()}},{key:"_getTargetNode",value:function(){return this._contentNode.querySelector("ne-text")||this._contentNode}}])}(Sy);Object.defineProperty(T0e,"currentHover",{enumerable:!0,configurable:!0,writable:!0,value:null});const j0e=T0e;function I0e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,B0e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function B0e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(B0e=function(){return!!e})()}var M0e=Object.assign(Object.assign({},wX),{elementCtor:j0e}),F0e=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=I0e(this,t,[e]),Object.defineProperty(n,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n._option=Object.assign(Object.assign({},M0e),e),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"elementCtor",get:function(){return this._option.elementCtor}},{key:"hiddenPopMenu",get:function(){return!!this._option.hiddenPopMenu}}])}(AX);function L0e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,U0e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function U0e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(U0e=function(){return!!e})()}Object.defineProperty(F0e,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"link"});var V0e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=L0e(this,t,arguments),Object.defineProperty(e,"_extends",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(e,"_appExtends",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(e,"sanitizeURL",{enumerable:!0,configurable:!0,writable:!0,value:function(t){return e.option.sanitizeURL(t)}}),Object.defineProperty(e,"isValidURL",{enumerable:!0,configurable:!0,writable:!0,value:function(t){return e.option.isValidURL(t)}}),Object.defineProperty(e,"transformURL",{enumerable:!0,configurable:!0,writable:!0,value:function(t){return e.option.transformURL(t)}}),Object.defineProperty(e,"_insertLink",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=e.renderer,n=null;if(t.queryCommandEnabled("insertLink"))n=t.execCommand("insertLink",sc("链接"),nM,!0,!0);else{if(!t.queryCommandEnabled("link"))return;n=t.execCommand("link",nM,!0,!0)}bt(n,"plugins/link/src/render/index.ts:148"),e.emit("openEditor",n,{defaultSelect:"src"})}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this;e.registerBoxNode({link:{clazz:this.option.elementCtor,pluginContext:this}});var n=e.getService(kRe.ID);n&&n.registerHotKey(CEe.link.name,CEe.link.keys,(function(e){e.stop(),t._insertLink()}));var r=!1,o=[];this.kernel.editing.on("beforeExecCommand",(function(e){var t=e.commandName;e.args,"paste"===t&&(r=!0,o=[])})),this.kernel.editing.on("nodechange",(function(e){if(r){var t=e.node,n=e.type;t.isTextNode()&&"insert"===n&&o.push(t)}})),this.kernel.editing.on("afterExecCommand",(function(e){var n,i=e.commandName;if(e.args,"paste"===i){if(r=!1,1===Awe()(o,"id").length){var a=null===(n=o[0])||void 0===n?void 0:n.parentNode;"link"===(null==a?void 0:a.nodeName)&&t.emit("openMenu",a)}o=[]}}))}},{key:"getExtendLinkBtn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._extends,n=[];return t.forEach((function(t){var r=t(e);r&&(Array.isArray(r)||(r=[r]),n.push.apply(n,(0,ln.A)(r)))})),n.filter(Boolean)}},{key:"needShowDesktopButton",value:function(e){return this.option.allowToOpenLocal("link",e)}},{key:"hiddenPopMenu",get:function(){return!!this.option.hiddenPopMenu}}])}(Jg);Object.defineProperty(V0e,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:QJ.pluginName}),Object.defineProperty(V0e,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:F0e}),Object.defineProperty(V0e,"Service",{enumerable:!0,configurable:!0,writable:!0,value:x0e});var H0e={color:"color",bgColor:"backgroundColor"};function z0e(e,t,n){t=t.firstChild||t,n=n||{},GX.forEach((function(r){if("color"===r||"bgColor"===r)n[r]?t.style[H0e[r]]=e.theme.toVisualValue(n[r]):t.style[H0e[r]]="";else{var o="ne-".concat(r.toLowerCase());n[r]?t.setAttribute(o,n[r]):t.removeAttribute(o)}}))}function W0e(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return q0e(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q0e(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function q0e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var $0e=function(){return(0,$e.A)((function e(t){var n=this;(0,Ke.A)(this,e),Object.defineProperty(this,"iRender",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"monitorNodes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"node2DomMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"node2Context",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"hasRequestModify",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"removeEventListener",{enumerable:!0,configurable:!0,writable:!0,value:void 0});var r=!1;this.removeEventListener=t.kernel.onPluginEvent(JX,(function(){r=!0})),xc(this,t.kernel,"beforeSetDocument",(function(){r=!1,n.node2DomMap.clear(),n.node2Context.clear(),n.monitorNodes.length=0})),xc(this,t,"contentchange",(function(){r&&(r=!1,n.requestModify())}))}),[{key:"modify",value:function(){var e,t,n,r=this,o=null===(e=this.iRender.kernel.document)||void 0===e?void 0:e.rootNode;if(o){var i,a=[],l=[0,0,0,0,0,0],u=[],c=W0e(o.children);try{var s=function(){var e=i.value;if(e.hasCategory(qe.Heading)){var t=Number(e.nodeName.slice(1))-1;if(a=a.slice(0,t+1),"number"!=typeof e.attrs.indexType)return 0;l[t]=1,"number"==typeof a[t]?a[t]++:a[t]=0;var n=r.monitorNodes.find((function(t){return t.id===e.id})),o=n?r.node2DomMap.get(n):null;if(!o)return 0;u.push([o,n,t,a.slice(0)])}};for(c.s();!(i=c.n()).done;)s()}catch(e){c.e(e)}finally{c.f()}for(var d=l.reduce((function(e,t,n){return t&&(e[n]=e._currentIndex++),e}),{_currentIndex:0}),f=function(){var e=p[h],o=(0,tn.A)(e,4),i=o[0],a=o[1],u=o[2],c=pZ(o[3],(function(e,t,n){return l[n]&&n<=u&&e.push(t),e}),[]);z0e(r.iRender,i,(null===(t=a.firstChild)||void 0===t?void 0:t.attrs)||{}),r._resetIndexSymbol(c[d[u]],null===(n=null==a?void 0:a.attrs)||void 0===n?void 0:n.indexType,d[u],c.slice(0,d[u]),i)},h=0,p=u;h<p.length;h++)f()}}},{key:"_resetIndexSymbol",value:function(e,t,n,r,o){var i=Gu().createElement("span",{"data-level":n%3,"data-type":t,className:"ne-list-symbol"},this._getIndexText(e,t,n,r));Gl().render(Zx(sc("设置编号"),i,{placement:"top",mouseEnterDelay:.3}),o)}},{key:"_getIndexText",value:function(e,t,n,r){try{return hZ(e,n,r,t)}catch(e){console.error(e)}return""}},{key:"requestModify",value:function(){var e=this;this.hasRequestModify||(this.hasRequestModify=!0,bs((function(){e.hasRequestModify=!1,e.modify()})))}},{key:"afterInit",value:function(e,t){this.check(t)&&(this.monitorNodes.includes(t)||this.monitorNodes.push(t),this.createIndexDom(e,t),this.requestModify())}},{key:"afterUpdate",value:function(e,t){var n=this.monitorNodes.indexOf(t),r=this.node2DomMap.get(t);this.check(t)?(n<0&&this.monitorNodes.push(t),r||this.createIndexDom(e,t),this.requestModify()):n>-1&&this.beforeDestroy(t)}},{key:"beforeDestroy",value:function(e){var t=this.monitorNodes.indexOf(e),n=this.node2DomMap.get(e),r=this.node2Context.get(e);t>-1&&this.monitorNodes.splice(t,1),n&&n.remove(),r&&r.destroy(),this.node2Context.delete(e),this.node2DomMap.delete(e)}},{key:"createIndexDom",value:function(e,t){var n=this,r=Ly.createElement("ne-oli-i",{contentEditable:"false",className:"heading clickable"}),o={destroy:function(){}};return this.insertAtRootDOM(e,r),this.node2DomMap.set(t,r),this.node2Context.set(t,o),pc(o,r,"click",(function(e){n.iRender.emitPluginEvent("headingClickIndex",{event:e,dom:r,nodeId:t.id})})),r}},{key:"check",value:function(e){var t;return!("number"!=typeof e.attrs.indexType||e.attrs.indexType<0||e.hasCategory(qe.Heading)&&!(null===(t=e.parentNode)||void 0===t?void 0:t.hasCategory(qe.Root)))}},{key:"insertAtRootDOM",value:function(e,t){e.insertBefore(t,e.childNodes[e.childElementCount-1])}},{key:"destroy",value:function(){this.removeEventListener();var e,t=W0e(this.monitorNodes);try{for(t.s();!(e=t.n()).done;){var n=e.value,r=this.node2DomMap.get(n);r&&r.remove(),this.node2DomMap.delete(n)}}catch(e){t.e(e)}finally{t.f()}this.monitorNodes.length=0}}])}();function K0e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Y0e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Y0e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Y0e=function(){return!!e})()}var G0e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=K0e(this,t,arguments),Object.defineProperty(e,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_indexNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_contentNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){this._rootNode=Ly.createElement($X.domNode.oli),this._indexNode=Ly.createElement($X.domNode["oli-i"],{contentEditable:"false"}),this._contentNode=Ly.createElement($X.domNode["oli-c"],{className:"ne-oli-content"}),Ly.setAttributeByChange(this._rootNode,e),this._resetIndexSymbol(),this._rootNode.appendChild(this._indexNode),this._rootNode.appendChild(this._contentNode),this._bindEvent()}},{key:"destroy",value:function(){this._indexNode&&Gl().unmountComponentAtNode(this._indexNode)}},{key:"_bindEvent",value:function(){var e=this;xc(this,this.renderer.theme,"themeChange",(function(){z0e(e.renderer,e._indexNode,e.viewNode.attrs.indexStyle)})),this._indexNode.classList.add("clickable"),pc(this,this._indexNode,"click",(function(t){e.renderer.emitPluginEvent("orderListClickIndex",{event:t,dom:e._indexNode,nodeId:e.viewNode.id})}))}},{key:"updateAttribute",value:function(e){this._resetIndexSymbol(),Ly.syncDOMAttrChange(this._rootNode,e)}},{key:"repair",value:function(){var e=this._rootNode,t=this._indexNode,n=this._contentNode;n.parentNode!==e&&e.appendChild(n),t.parentNode!==e&&e.prepend(t),2!==e.childNodes.length&&Array.from(e.childNodes).forEach((function(e){e!==n&&e!==t&&e.remove()}))}},{key:"getMainDOMNode",value:function(){return this._rootNode}},{key:"getContentDOMNode",value:function(){return this._contentNode}},{key:"_resetIndexSymbol",value:function(){var e=this,t=this.viewNode.attrs,n=t.level,r=void 0===n?0:n,o=t.indexType,i=void 0===o?0:o,a=Gu().createElement("span",{"data-level":r%3,"data-type":i,className:"ne-list-symbol"},this._getIndexText());Gl().render(Zx(sc("设置编号"),a,{placement:"top",mouseEnterDelay:.3}),this._indexNode,(function(){z0e(e.renderer,e._indexNode,e.viewNode.attrs.indexStyle)}))}},{key:"_getIndexText",value:function(){var e=this.viewNode.attrs,t=e.index,n=e.parentIndex,r=void 0===n?[]:n,o=e.level,i=void 0===o?0:o,a=e.indexType,l=void 0===a?0:a;try{return hZ(t,i,r,l)}catch(e){console.error(e)}return""}}])}(Sy);function J0e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,X0e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function X0e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(X0e=function(){return!!e})()}var Q0e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=J0e(this,t,arguments),Object.defineProperty(e,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_checkbox",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_contentNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_taskListModel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_enableDynamic",{enumerable:!0,configurable:!0,writable:!0,value:!1}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this;this.pluginContext.useTaskListDataService()&&(this._taskListModel=this.pluginContext.initTaskListNodeModel(this.viewNode)),this._rootNode=Ly.createElement($X.domNode.tli),this._checkbox=Ly.createElement($X.domNode["tli-i"],{contentEditable:"false",className:["ne-checkbox",this.viewNode.attrs.checked?"ne-checkbox-checked":""]}),this._checkbox.appendChild(Ly.createElement("span",{className:"ne-checkbox-inner"})),this._contentNode=Ly.createElement($X.domNode["tli-c"],{className:"ne-oli-content"}),pc(this,this._checkbox,"mousedown",(function(e){e.preventDefault(),e.stopPropagation(),t.renderer.execCommand("taskStatus",t.viewNode.attrs.id)}),!1),Ly.setAttributeByChange(this._rootNode,e),this._rootNode.appendChild(this._checkbox),this._rootNode.appendChild(this._contentNode)}},{key:"destroy",value:function(){this._taskListModel&&Gy(this.viewNode)&&this._taskListModel.remove()}},{key:"updateAttribute",value:function(e,t,n){this.viewNode.attrs.checked?this._checkbox.classList.add("ne-checkbox-checked"):this._checkbox.classList.remove("ne-checkbox-checked"),this._taskListModel&&this._taskListModel.syncData(n),Ly.syncDOMAttrChange(this._rootNode,e)}},{key:"repair",value:function(){var e=this._rootNode,t=this._checkbox,n=this._contentNode;n.parentNode!==e&&e.appendChild(n),t.parentNode!==e&&e.prepend(t),2!==e.childNodes.length&&Array.from(e.childNodes).forEach((function(e){e!==n&&e!==t&&e.remove()}))}},{key:"getMainDOMNode",value:function(){return this._rootNode}},{key:"getContentDOMNode",value:function(){return this._contentNode}}])}(Sy);function Z0e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,e1e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function e1e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(e1e=function(){return!!e})()}var t1e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Z0e(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Yy);function n1e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,r1e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function r1e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(r1e=function(){return!!e})()}Object.defineProperty(t1e,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze("ITaskListRenderDataService")});var o1e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=n1e(this,t,arguments),Object.defineProperty(e,"_proxy",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"registerProxy",value:function(e){bt(null===this._proxy,"plugins/list/src/render/task-list-render-data-service.ts:9"),this._proxy=e}},{key:"getProxy",value:function(){return this._proxy}},{key:"destroy",value:function(){}}])}(t1e);function i1e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,a1e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function a1e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(a1e=function(){return!!e})()}var l1e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=i1e(this,t,arguments),Object.defineProperty(e,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_indexNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_contentNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this;this._rootNode=Ly.createElement($X.domNode.tli),this._indexNode=Ly.createElement($X.domNode["uli-i"],{contentEditable:"false"}),this._contentNode=Ly.createElement($X.domNode["uli-c"],{className:"ne-uli-content"}),Ly.setAttributeByChange(this._rootNode,e),this._resetIndexSymbol(),this._rootNode.appendChild(this._indexNode),this._rootNode.appendChild(this._contentNode),xc(this,this.renderer.theme,"themeChange",(function(){z0e(t.renderer,t._indexNode,t.viewNode.attrs.indexStyle)}))}},{key:"updateAttribute",value:function(e){this._resetIndexSymbol(),Ly.syncDOMAttrChange(this._rootNode,e)}},{key:"repair",value:function(){var e=this._rootNode,t=this._indexNode,n=this._contentNode;n.parentNode!==e&&e.appendChild(n),t.parentNode!==e&&e.prepend(t),2!==e.childNodes.length&&Array.from(e.childNodes).forEach((function(e){e!==n&&e!==t&&e.remove()}))}},{key:"getMainDOMNode",value:function(){return this._rootNode}},{key:"getContentDOMNode",value:function(){return this._contentNode}},{key:"_resetIndexSymbol",value:function(){this._indexNode.innerHTML='<span class="ne-list-symbol"><span>'.concat(this._getIndexText(),"</span></span>"),z0e(this.renderer,this._indexNode,this.viewNode.attrs.indexStyle)}},{key:"_getIndexText",value:function(){var e=this.viewNode.attrs.level;return FZ(void 0===e?0:e)}}])}(Sy),u1e=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"destroy",value:function(){}},{key:"read",value:function(e,t){var n;if(e.from===MT){e.hasState("list")||e.setState("list",{});var r=e.getState("list");if(null===(n=t.attrs)||void 0===n?void 0:n.list){var o=r[t.attrs.list];o||(o=Pr(),r[t.attrs.list]=o),ar.setAttribute(t,$X.attr.list,o)}else ar.setAttribute(t,$X.attr.list,Pr())}}}])}();function c1e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,s1e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function s1e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s1e=function(){return!!e})()}Object.defineProperty(u1e,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[$X.node.uli,$X.node.oli,$X.node.tli]});var d1e=function(e){function t(){return(0,Ke.A)(this,t),c1e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"translate",value:function(e,t){return{type:fp.ATTR_NAME,name:"index-type",value:t}}}])}(fp);function f1e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,h1e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function h1e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h1e=function(){return!!e})()}var p1e=function(e){function t(){return(0,Ke.A)(this,t),f1e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"translate",value:function(e,t){return{type:fp.ATTR_NAME,name:"ne-level",value:t}}}])}(fp);function v1e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,m1e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function m1e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m1e=function(){return!!e})()}var g1e=function(e){function t(){return(0,Ke.A)(this,t),v1e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerBoxNode($X.node.oli,G0e),e.registerBoxNode($X.node.uli,l1e),e.registerBoxNode($X.node.tli,Q0e,this);var t=e.kernel.getService(RT.ID);t&&t.registerINodeNodePreReader(u1e.NodeNames,new u1e),e.registerAttrTranslator({level:new p1e,indexType:new d1e}),this._initHotKey()}},{key:"afterInit",value:function(){var e=this.renderer.getService(gZe.ID);e&&e.registerHeadingProcessor(new $0e(this.renderer))}},{key:"useTaskListDataService",value:function(){var e;return this.option.enableDynamic&&(null===(e=this.service)||void 0===e?void 0:e.getProxy())}},{key:"initTaskListNodeModel",value:function(e){var t,n=null===(t=this.service)||void 0===t?void 0:t.getProxy();if(n)return new n(e,this.renderer)}},{key:"_initHotKey",value:function(){var e=this.renderer,t=e.getService(kRe.ID);t&&[CEe.unorderedList,CEe.orderedList,CEe.taskList].forEach((function(n){var r=n.keys,o=n.name;t.registerHotKey(o,r,(function(t){t.stop(),e.execCommand(o)}))}))}}])}(Jg);function b1e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,y1e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function y1e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(y1e=function(){return!!e})()}Object.defineProperty(g1e,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:$X.pluginName}),Object.defineProperty(g1e,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:ZQ}),Object.defineProperty(g1e,"Service",{enumerable:!0,configurable:!0,writable:!0,value:o1e});var w1e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=b1e(this,t,arguments),Object.defineProperty(e,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_contentNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){this._rootNode=Ly.createElement(N0.domNode.mark),this._contentNode=Ly.createElement(N0.domNode["mark-content"]),this._rootNode.appendChild(this._contentNode)}},{key:"getMainDOMNode",value:function(){return this._rootNode}},{key:"getContentDOMNode",value:function(){return this._contentNode}}])}(Sy);function A1e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,k1e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function k1e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(k1e=function(){return!!e})()}var _1e=function(e){function t(){return(0,Ke.A)(this,t),A1e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerBoxNode(N0.node.mark,w1e)}}])}(Jg);function C1e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,N1e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function N1e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(N1e=function(){return!!e})()}Object.defineProperty(_1e,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:N0.pluginName});var O1e=function(e){function t(){return(0,Ke.A)(this,t),C1e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=e.kernel.requireService(DS.ID),n=e.requireService(nFe.ID);n.registerQuickInput({trigger:"whiteSpace",match:function(e){return t.getMarkdownMatchContext(CS.whiteSpace,e)||!1}},(function(e){var t=e.matcher,n=e.info;t.exec(n)})),n.registerQuickInput({trigger:"enter",match:function(e){return t.getMarkdownMatchContext(CS.enter,e)||!1}},(function(e){var t=e.matcher,n=e.info;t.exec(n)}))}}])}(Jg);function x1e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,E1e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function E1e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(E1e=function(){return!!e})()}Object.defineProperty(O1e,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:OS.pluginName});var D1e=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=x1e(this,t),Object.defineProperty(r,"_apiURL",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(r,"_markdownText",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(r,"_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_request",{enumerable:!0,configurable:!0,writable:!0,value:null}),bt(n,"plugins/markdown-paste-parse/src/render/markdown-parse-task.ts:16"),r._id=Dr(),r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"markdownText",get:function(){return this._markdownText}},{key:"run",value:function(){var e=this;return this.emit(kte.EVENT_START),new Promise((function(t){e._request=ns({method:"post",url:e._apiURL,data:{from:"markdown",to:"lake",content:e._markdownText},success:function(n){var r,o=(null===(r=null==n?void 0:n.data)||void 0===r?void 0:r.content)||"";e.emit(kte.EVENT_SUCCESS,o),t({result:o})},error:function(n){n=ts(n),e.emit(kte.EVENT_ERROR,n),t({error:n})}})}))}},{key:"abort",value:function(){this._request&&this._request.xhr.abort()}}])}(kte),P1e=(0,$e.A)((function e(t,n){(0,Ke.A)(this,e),Object.defineProperty(this,"option",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"doParse",{enumerable:!0,configurable:!0,writable:!0,value:n})}));function R1e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,S1e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function S1e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(S1e=function(){return!!e})()}var T1e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=R1e(this,t,arguments),Object.defineProperty(e,"_opening",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_onClick",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.doParse(),e.close()}}),Object.defineProperty(e,"isOpening",{enumerable:!0,configurable:!0,writable:!0,value:function(){return e._opening}}),Object.defineProperty(e,"_setOpening",{enumerable:!0,configurable:!0,writable:!0,value:function(t){e._opening=t}}),Object.defineProperty(e,"close",{enumerable:!0,configurable:!0,writable:!0,value:function(){XOe.close?XOe.close(t.key):XOe.destroy&&1===XOe.destroy.length&&XOe.destroy(t.key)}}),Object.defineProperty(e,"open",{enumerable:!0,configurable:!0,writable:!0,value:function(){e._opening=!0,XOe.open({key:t.key,className:"ne-markdown-paste-parse-notify",message:sc("是否需要做样式转换？"),description:sc("检测到粘贴内容符合 Markdown 语法，是否需要做样式转换？"),duration:e.option.duration,btn:Gu().createElement(Mye,{type:"primary",size:"small",onMouseDown:function(e){return e.preventDefault()},onClick:e._onClick},sc("立即转换")),onClose:function(){e._setOpening(!1)}})}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(P1e);Object.defineProperty(T1e,"key",{enumerable:!0,configurable:!0,writable:!0,value:"markdown-paste-parse"});var j1e={convertURL:"",duration:null,NotificationManager:T1e},I1e=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Ww()({},j1e,t)}),[{key:"convertURL",get:function(){return this._option.convertURL}},{key:"duration",get:function(){return this._option.duration}},{key:"NotificationManager",get:function(){return this._option.NotificationManager}}])}();Object.defineProperty(I1e,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"markdownPasteParse"});var B1e=[/^\s*([\*\-\+]|\d+\.)\s+/m,/^\s*#{1,6}\s+/m,/\[(.*?)\]\(([\S]+?)\)/m,/\[(.*?)\]\(([\S]+?)\s+?["'][\S]+?["']\)/m,/^\s*>\s?/m,/(^|\r?\n)(`{3,})[\s\S]*?\1($|\r?\n)/,/^\s*\|(([^\|]+?)\|){2,}\s*$/m];function M1e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,F1e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function F1e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(F1e=function(){return!!e})()}var L1e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=M1e(this,t,arguments),Object.defineProperty(e,"_notificationManager",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_parseTask",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_markdownText",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(e,"_clearParseTask",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t,n;null===(t=e._parseTask)||void 0===t||t.abort(),null===(n=e._parseTask)||void 0===n||n.destroy(),e._parseTask=null,e._markdownText=""}}),Object.defineProperty(e,"_createParseTask",{enumerable:!0,configurable:!0,writable:!0,value:function(){if(bt(e._markdownText,"plugins/markdown-paste-parse/src/render/index.ts:70"),!e.option.convertURL&&e.kernel.getSupportedReaderTypes().includes("text/markdown"))try{var t=e.kernel.readData("text/markdown",e._markdownText);if(t)return void(e.renderer.queryCommandState("undo")===st?mC.error(sc("内容已变更，无法插入 Markdown 内容")):(e.renderer.execCommand("undo"),e.renderer.execCommand("markdownPasteParse",t)||mC.error(sc("未能插入内容"))))}catch(e){}e._parseTask=new D1e(e.option.convertURL,e._markdownText),e._parseTask.on("success",(function(t){e._clearParseTask(),t&&(e.renderer.queryCommandState("undo")===st?mC.error(sc("内容已变更，无法插入 Markdown 内容")):(e.renderer.execCommand("undo"),e.renderer.execCommand("markdownPasteParse",t)||mC.error(sc("未能插入内容"))))})),e._parseTask.on("error",(function(){e._clearParseTask(),mC.error(sc("markdown语法转换失败"))})),e._parseTask.run()}}),Object.defineProperty(e,"_matchedMarkdownText",{enumerable:!0,configurable:!0,writable:!0,value:function(t){e._clearParseTask(),e._markdownText=t,e._notificationManager.open()}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this,n=this.option.NotificationManager;n&&(this._notificationManager=new n(this.option,this._createParseTask),this.kernel.editing.on("afterExecCommand",(function(e){var n,r=e.commandName,o=e.args;if("paste"===r){var i=(0,tn.A)(o,1)[0],a=i.getData("text/plain"),l=i.getData("text/html");if(Array.isArray(i.types)&&i.types.includes("text/ne-inode"))return;"string"==typeof(n=l)&&n&&/<div .*?class="lake-content"/.test(n.slice(0,100))||!function(e){if("string"!=typeof e||!e)return!1;for(var t=0;t<B1e.length;t++)if(B1e[t].test(e))return!0;return!1}(a)||t._matchedMarkdownText(a)}})),e.on("contentchange",(function(){t._clearParseTask(),t._notificationManager.isOpening()&&t._notificationManager.close()})))}}])}(Jg);function U1e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,V1e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function V1e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(V1e=function(){return!!e})()}Object.defineProperty(L1e,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:q0.pluginName}),Object.defineProperty(L1e,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:I1e});var H1e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=U1e(this,t,arguments),Object.defineProperty(e,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){this._rootNode=Ly.createElement(c1.domNode.p),Ly.setAttributeByChange(this._rootNode,e)}},{key:"updateAttribute",value:function(e,t,n){Ly.syncDOMAttrChange(this._rootNode,e)}},{key:"getMainDOMNode",value:function(){return this._rootNode}}])}(Sy);function z1e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,W1e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function W1e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(W1e=function(){return!!e})()}var q1e=function(e){function t(){return(0,Ke.A)(this,t),z1e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerBoxNode(c1.node.p,{clazz:H1e})}}])}(Jg);function $1e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,K1e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function K1e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(K1e=function(){return!!e})()}Object.defineProperty(q1e,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:c1.pluginName});var Y1e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=$1e(this,t,arguments),Object.defineProperty(e,"_descriptors",{enumerable:!0,configurable:!0,writable:!0,value:{whiteSpace:[],slash:[],enter:[],at:[]}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"descriptors",get:function(){return this._descriptors}},{key:"destroy",value:function(){delete this._descriptors}},{key:"registerQuickInput",value:function(e,t){bt(this._descriptors[e.trigger],"plugins/quick-input/src/render/quick-input-renderer-service.ts:25"),this._descriptors[e.trigger].push({descriptor:e,handler:t})}}])}(nFe),G1e={" ":"whiteSpace","/":"slash","／":"slash","@":"at",Enter:"enter"},J1e=function(){return(0,$e.A)((function e(t,n){(0,Ke.A)(this,e),Object.defineProperty(this,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"service",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"quickInputKernelService",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.quickInputKernelService=this.renderer.kernel.requireService(j1.ID)}),[{key:"start",value:function(){var e=this;this.renderer.onPluginEvent("beforeinput",(function(t){var n=e.service.descriptors[G1e[t.data]];if(n){var r=e.quickInputKernelService.matchQuickInput(n);r&&(t.stop(),r.handler(r.info))}}))}},{key:"shouldIgnore",value:function(e){var t=e.keyCode;return!(!e.metaKey&&!e.ctrlKey)||t===Ws&&!Us.mobile}},{key:"handleQuickInput",value:function(e,t){if(e&&G1e[e]){var n=this.quickInputKernelService.matchQuickInput(this.service.descriptors[G1e[e]]);n&&(t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault(),n.handler(n.info))}}}])}();function X1e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Q1e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Q1e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Q1e=function(){return!!e})()}var Z1e=function(e){function t(){return(0,Ke.A)(this,t),X1e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"start",value:function(){var e=this;this.renderer.onRootNode("keydown",(function(t){e.shouldIgnore(t)||"Enter"===t.key&&e.handleQuickInput(t.key,t)}),!1),this.renderer.onRootNode("beforeinput",(function(t){if(!e.shouldIgnore(t)){var n=t.data;n||"insertParagraph"!==t.inputType||(n="Enter"),e.handleQuickInput(n,t)}}),!1),Tr((0,Je.A)(t.prototype),"start",this).call(this)}}])}(J1e);function e2e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,t2e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function t2e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(t2e=function(){return!!e})()}var n2e=function(e){function t(){return(0,Ke.A)(this,t),e2e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"start",value:function(){var e=this;this.renderer.onRootNode("keydown",(function(t){if(!e.shouldIgnore(t)){var n=t.key;e.handleQuickInput(n,t)}}),!1),Tr((0,Je.A)(t.prototype),"start",this).call(this)}}])}(J1e);function r2e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,o2e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function o2e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(o2e=function(){return!!e})()}var i2e=function(e){function t(){return(0,Ke.A)(this,t),r2e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){Us.safari||Us.mobile?new Z1e(this.renderer,this.service).start():new n2e(this.renderer,this.service).start()}},{key:"destroy",value:function(){delete this._descriptors,Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}}])}(Jg);function a2e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,l2e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function l2e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(l2e=function(){return!!e})()}Object.defineProperty(i2e,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:R1.pluginName}),Object.defineProperty(i2e,"Service",{enumerable:!0,configurable:!0,writable:!0,value:Y1e});var u2e=function(e){function t(){return(0,Ke.A)(this,t),a2e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(){return this.renderer.kernel.queryCommandState("quote")}},{key:"execute",value:function(){this.renderer.kernel.execCommand("quote"),this.renderer.focus({})}}])}(qy);function c2e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,s2e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function s2e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s2e=function(){return!!e})()}Object.defineProperty(u2e,"ID",{enumerable:!0,configurable:!0,writable:!0,value:H1.command.quote});var d2e=function(e){function t(){return(0,Ke.A)(this,t),c2e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=e.getService(nFe.ID),n=this.kernel.getService(q1.ID);t&&n&&t.registerQuickInput({trigger:"whiteSpace",atStart:!0,pattern:/^[>》]$/,matchPosition:function(e,t,n){if(!n)return e.acceptNode(t.node.nodeName,H1.node);var r=n.parentNode;return!(!r||!e.acceptNode(r.nodeName,H1.node))}},(function(e){n.wrapQuote(e)}));var r=e.getService(kRe.ID);r&&r.registerHotKey(CEe.quote.name,CEe.quote.keys,(function(t){t.stop(),e.execCommand("quote")}))}}])}(Jg);function f2e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,h2e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function h2e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h2e=function(){return!!e})()}Object.defineProperty(d2e,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:H1.pluginName}),Object.defineProperty(d2e,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[u2e]});var p2e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=f2e(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Yy);function v2e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,m2e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function m2e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m2e=function(){return!!e})()}Object.defineProperty(p2e,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze(Vse.service.IVisibilityRenderService)});var g2e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=v2e(this,t,arguments),Object.defineProperty(e,"requestAppearByNodeID",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=e.renderer.engine.viewDocument.getNodeById(t);(null==n?void 0:n._virtualNode)&&(n._virtualNode.isAppear||n._virtualNode.$appear())}}),Object.defineProperty(e,"delegateVisibleChange",{enumerable:!0,configurable:!0,writable:!0,value:function(t,n){var r;null===(r=e.plugin._visibilityController)||void 0===r||r.watchNode(t,n)}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){}}])}(p2e);function b2e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,y2e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function y2e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(y2e=function(){return!!e})()}var w2e=Us.macos?"metaKey":"ctrlKey",A2e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=b2e(this,t),Object.defineProperty(e,"_findDialogIsOpen",{enumerable:!0,configurable:!0,writable:!0,value:!1}),e._initEvent(),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){this.removeAllListeners()}},{key:"_initEvent",value:function(){var e,t=this;pc(this,window,"keydown",(function(e){e[w2e]&&"f"===e.key||e[w2e]&&"g"===e.key||e[w2e]&&e.shiftKey&&"g"===e.key?t._findDialogIsOpen=!0:"Escape"===e.key&&(t._findDialogIsOpen=!1,t.emit("maybePageSearchCancel"))})),pc(this,window,"blur",(function(){clearTimeout(e),e=setTimeout((function(){t._findDialogIsOpen&&"visible"===document.visibilityState&&t.emit("maybePageSearch")}),300)})),pc(this,window,"focus",(function(){clearTimeout(e),e=null}))}},{key:"reset",value:function(){this._findDialogIsOpen=!1}}])}(it),k2e=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_detector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_visibilityObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_lazyInitObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isRunning",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_pauseState",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_lazyInitNodes",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"_visibilityNodes",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),this._init()}),[{key:"_init",value:function(){var e=this;this._detector=new A2e,this._visibilityObserver=new IntersectionObserver((function(t){e._pauseState||t.forEach((function(t){var n=t.isIntersecting,r=t.target;r.isConnected&&e._perform(r,n)}))})),this._lazyInitObserver=new IntersectionObserver((function(t){e._pauseState||t.forEach((function(t){var n=t.target,r=t.isIntersecting;r&&(e._lazyInitNodes.delete(n),e._lazyInitObserver.unobserve(n),e._perform(n,r))}))})),this._detector.on("maybePageSearch",(function(){e._suspend()})),this._detector.on("maybePageSearchCancel",(function(){e._resume()}))}},{key:"watchNode",value:function(e,t){var n=t||{},r=n.lazyInit,o=n.visibility;(r||o)&&(this._pauseState&&this._perform(e,!0),o?(this._visibilityNodes.add(e),this._visibilityObserver.observe(e)):(this._lazyInitNodes.add(e),this._lazyInitObserver.observe(e)))}},{key:"destroy",value:function(){this._visibilityNodes.clear(),this._visibilityNodes=null,this._lazyInitNodes.clear(),this._lazyInitNodes=null,this._lazyInitObserver.disconnect(),this._visibilityObserver.disconnect(),this._detector.destroy()}},{key:"run",value:function(){var e=this;if(!this._isRunning){this._isRunning=!0;var t=this.renderer,n=null;t.on("contentchange",(function(t){var r=t.mode;r!==We.History&&r!==We.User||e._detector.reset(),window.clearTimeout(n),n=setTimeout((function(){e._resume()}),300)}))}}},{key:"_perform",value:function(e,t){var n,r=null===(n=e._neRef)||void 0===n?void 0:n._virtualNode;bt(r,"plugins/render-assistant/src/render/lib/visibility-controller/index.ts:135");var o=r.isAppear;t?o||r.$appear():o&&!e.classList.contains("ne-focused")&&r.$disappear()}},{key:"_resume",value:function(){this._pauseState&&(this._pauseState=!1,function(e,t){if(null==e?void 0:e.length){var n=t.getBoundingClientRect();n={top:n.top-0,bottom:n.bottom+0},e.forEach((function(e){var t;if(e.isConnected){var r=null===(t=e._neRef)||void 0===t?void 0:t._virtualNode;if(r){var o=r.isAppear,i=r.getMainDOMNode();if(null==i?void 0:i.isConnected){var a=i.parentNode.getBoundingClientRect();a.top>=n.bottom||a.bottom<=n.top?o&&!i.classList.contains("ne-focused")&&r.$disappear():o||r.$appear()}}}}))}}(Array.from(this._visibilityNodes),this.renderer.scrollNode))}},{key:"_suspend",value:function(){var e;this._pauseState||(this._pauseState=!0,this._lazyInitObserver.disconnect(),(e=Array.from(this._visibilityNodes).concat(Array.from(this._lazyInitNodes))).length&&e.forEach((function(e){var t;if(e.isConnected){var n=null===(t=e._neRef)||void 0===t?void 0:t._virtualNode;n&&(n.isAppear||n.$appear())}})))}}])}();function _2e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_2e=function(){return!!e})()}function C2e(e){return function(e){function t(){return(0,Ke.A)(this,t),function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,_2e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"afterInit",value:function(){this._registerHotKey(),Tr((0,Je.A)(t.prototype),"afterInit",this).call(this)}},{key:"destroy",value:function(){this._destroyHotKey(),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}},{key:"getHotKeyConfig",value:function(){return{copy:!0,cut:!0,delete:!0}}},{key:"_registerHotKey",value:function(){var e,t=null===(e=this.editor.renderer.getService(kRe.ID))||void 0===e?void 0:e.getCardHotKeyHelper();if(t){var n=this.getHotKeyConfig();n&&this.id&&t.register(this.id,n)}}},{key:"_destroyHotKey",value:function(){var e,t=null===(e=this.editor.renderer.getService(kRe.ID))||void 0===e?void 0:e.getCardHotKeyHelper();t&&this.id&&t.destroyHotKey(this.id)}}])}(e)}var N2e=function(){return(0,$e.A)((function e(t,n){var r=this;(0,Ke.A)(this,e),Object.defineProperty(this,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"option",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"onlineStatus",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"handleChange",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t,n=e.addedNodes,o=null===(t=null==n?void 0:n.filter((function(e){return e.hasCategory(qe.Card)})))||void 0===t?void 0:t.map((function(e){return r.renderer.getVirtualNode(e)}));r.onlineStatus||o.forEach((function(e){return r.offlineNode(e)}))}}),xc(this,t,"contentchange_private",this.handleChange)}),[{key:"offline",value:function(){var e,t=this;this.onlineStatus=!1;var n=null===(e=this.renderer.kernel.model.document)||void 0===e?void 0:e.getNodesByCategory(qe.Card).filter((function(e){return e.isConnected}));n&&n.map((function(e){return t.renderer.getViewNodeById(e.id)})).filter(Boolean).map((function(e){return t.renderer.getVirtualNode(e)})).forEach((function(e){return t.offlineNode(e)}))}},{key:"online",value:function(){var e,t=this;this.onlineStatus=!0;var n=null===(e=this.renderer.kernel.model.document)||void 0===e?void 0:e.getNodesByCategory(qe.Card).filter((function(e){return e.isConnected}));n&&n.map((function(e){return t.renderer.getViewNodeById(e.id)})).filter(Boolean).map((function(e){return t.renderer.getVirtualNode(e)})).forEach((function(e){return t.onlineNode(e)}))}},{key:"offlineNode",value:function(e){e&&this.option.offlineNode(e)}},{key:"onlineNode",value:function(e){e&&this.option.onlineNode(e)}},{key:"destroy",value:function(){}}])}(),O2e=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Ww()({},t)}),[{key:"offlineNode",value:function(e){var t,n;null===(n=(t=this._option).offlineNode)||void 0===n||n.call(t,e)}},{key:"onlineNode",value:function(e){var t,n;null===(n=(t=this._option).onlineNode)||void 0===n||n.call(t,e)}}])}();function x2e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,E2e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function E2e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(E2e=function(){return!!e})()}Object.defineProperty(O2e,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:Vse.pluginName});var D2e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=x2e(this,t,arguments),Object.defineProperty(e,"_visibilityController",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_cardNodeOffline",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){e.option.allowCardLazyInit&&(this._visibilityController=new k2e(e)),e.option.isTileRendering()?this._processTileRender():this._processDirectRender(),this._cardNodeOffline=new N2e(e,this.option),e.extend("cardOffline",this._cardNodeOffline)}},{key:"afterInit",value:function(){var e,t,n=this.renderer;n.option.virtualRendering&&(null===(e=n.getService(kRe.ID))||void 0===e||e.registerHotKey("",["cmd",38],(function(){n.execCommand("focus","start")})),null===(t=n.getService(kRe.ID))||void 0===t||t.registerHotKey("",["cmd",40],(function(){n.execCommand("focus","end")})))}},{key:"_processDirectRender",value:function(){var e=this;this.renderer.on("generalRenderCompleted",(function(){var t;null===(t=e._visibilityController)||void 0===t||t.run()}))}},{key:"_processTileRender",value:function(){var e=this;this.renderer.on("tileRenderCompleted",(function(){var t;null===(t=e._visibilityController)||void 0===t||t.run()}))}},{key:"destroy",value:function(){var e,t;null===(e=this._visibilityController)||void 0===e||e.destroy(),null===(t=this._cardNodeOffline)||void 0===t||t.destroy()}}])}(Jg);function P2e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,R2e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function R2e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(R2e=function(){return!!e})()}Object.defineProperty(D2e,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:Vse.pluginName}),Object.defineProperty(D2e,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:O2e}),Object.defineProperty(D2e,"Service",{enumerable:!0,configurable:!0,writable:!0,value:g2e});var S2e=function(e){function t(){return(0,Ke.A)(this,t),P2e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=e.getService(kRe.ID);t&&t.registerHotKey(CEe.save.name,CEe.save.keys,(function(t){t.stop(),e.emitPluginEvent("save")}))}}])}(Jg);Object.defineProperty(S2e,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:d2.pluginName});var T2e={global:!1},j2e=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Ww()({},T2e,t)}),[{key:"global",get:function(){return this._option.global}}])}();function I2e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,B2e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function B2e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(B2e=function(){return!!e})()}Object.defineProperty(j2e,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"selectAll"});var M2e=function(e){function t(){return(0,Ke.A)(this,t),I2e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this.kernel,n=!1;e.onRootNode("mousedown",(function(){n=!0,e.onceRootNode("mouseup",(function(){n=!1}))})),e.onRootNode("selectstart",(function(t){if(!n&&t.target===e.domRootNode){var r=document.getSelection();if(1===r.rangeCount){var o=r.getRangeAt(0).commonAncestorContainer,i=gc(o,"ne-card");if(i){var a=gc(o,'[contenteditable="true"]',i);if(a){var l=document.createRange();l.setStart(a.firstChild,0);var u=a.lastChild.childNodes.length;Sd(a.lastChild)&&(u=a.lastChild.length),l.setEnd(a.lastChild,u),r.removeAllRanges(),r.addRange(l),t.stopPropagation(),t.preventDefault()}}}}}));var r=e.getService(kRe.ID);r&&(r.registerHotKey(CEe.selectAll.name,CEe.selectAll.keys,(function(e){e.stop(),t.execCommand(b2.command.selectAll)})),this.option.global&&r.registerGlobalHotKey(CEe.selectAll.name,CEe.selectAll.keys,(function(n){n.stop(),e.focus({preventScroll:!0}),t.execCommand(b2.command.selectAll)})))}}])}(Jg);function F2e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,L2e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function L2e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(L2e=function(){return!!e})()}Object.defineProperty(M2e,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:b2.pluginName}),Object.defineProperty(M2e,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:j2e});var U2e=function(e){function t(){return(0,Ke.A)(this,t),F2e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e){e?this.plugin.setSelection(e.node,e.offset):this.plugin._syncSelection()}}])}(qy);Object.defineProperty(U2e,"ID",{enumerable:!0,configurable:!0,writable:!0,value:D2.command.selection});var V2e=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e),Object.defineProperty(this,"_currentTableNodes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_currentCardNodes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_currentCellNodes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_currentContainerHoldeNodes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_multipleTableNode",{enumerable:!0,configurable:!0,writable:!0,value:null})}),[{key:"destroy",value:function(){this._currentTableNodes=null,this._currentCardNodes=null,this._currentCellNodes=null,this._multipleTableNode=null}},{key:"reset",value:function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"unknown";e=e.map((function(e){return e._wrapNode})),this._resetFakeSelection(this._currentTableNodes,e),this._resetFakeSelection(this._currentCardNodes,t),this._resetFakeSelection(this._currentContainerHoldeNodes,r),this._resetTableCellFakeSelection(this._currentCellNodes,n,o),this._currentTableNodes=e,this._currentCardNodes=t,this._currentCellNodes=n,this._currentContainerHoldeNodes=r}},{key:"_resetFakeSelection",value:function(e,t){e.forEach((function(e){-1===t.indexOf(e)&&e.removeAttribute("ne-fake-selection")})),t.forEach((function(e){e.setAttribute("ne-fake-selection","true")}))}},{key:"_resetTableCellFakeSelection",value:function(e,t,n){if(e.forEach((function(e){-1===t.indexOf(e)&&e.removeAttribute("ne-fake-cell-selection")})),t.forEach((function(e,t){e.setAttribute("ne-fake-cell-selection","true")})),t.length){var r=t[0].closest("table, ne-columns");bt("TABLE"===r.nodeName||"NE-COLUMNS"===r.nodeName,"plugins/selection/src/render/painter/draw-context.ts:88"),this._multipleTableNode&&this._multipleTableNode!==r&&this._multipleTableNode.removeAttribute("ne-fake-table-selection"),r.setAttribute("ne-fake-table-selection","true"),this._multipleTableNode=r}else this._multipleTableNode&&(this._multipleTableNode.removeAttribute("ne-fake-table-selection"),this._multipleTableNode=null)}}])}();function H2e(e){var t=e.commonAncestorContainer;if(e.collapsed||t.nodeType!==Node.ELEMENT_NODE)return[];var n=t.querySelectorAll("ne-card");return Array.from(n).filter((function(t){return xd(e,t,!1)}))}function z2e(e,t){var n,r,o,i=e.rangeCount?e.getRangeAt(0):null,a=t.ranges,l=t.focus,u=t.anchor,c=a[0].startContainer;if(null===(n=Vy(c))||void 0===n?void 0:n.isCardNode()){if(i&&!c.contains(i.startContainer)){var s=document.createRange();s.setStart(a[0].startContainer,0),s.collapse(!0),fXe.setRange(e,[s],"start","start")}}else o=i,(r=a[0])&&o&&r.collapsed===o.collapsed&&r.startContainer===o.startContainer&&r.endContainer===o.endContainer&&r.startOffset===o.startOffset&&r.endOffset===o.endOffset||fXe.setRange(e,a,l,u)}var W2e=function(){return(0,$e.A)((function e(t){var n=this;(0,Ke.A)(this,e),Object.defineProperty(this,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_domDocument",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_domSelection",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_drawContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_last",{enumerable:!0,configurable:!0,writable:!0,value:null}),this._rootNode=t.domRootNode,this._domDocument=this._rootNode.ownerDocument,this._domSelection=this._domDocument.getSelection(),this._drawContext=new V2e,t&&xc(this,t,"activeNodesChange",Qm()((function(e,r){n._last&&"scroll"===r&&t.isFocus()&&n.refresh(n._last.selectionData,n._last.rootNode,!1,n._last.type)})))}),[{key:"destroy",value:function(){this._drawContext.destroy(),this._rootNode=null,this._domDocument=null,this._domSelection=null,this._drawContext=null}},{key:"clear",value:function(){this._drawContext.reset([],[],[],[])}},{key:"refresh",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unknown";this._last={selectionData:e,rootNode:t,resetRange:n,type:r},e.ranges.length>1?function(e,t,n,r){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"unknown",a=n.ranges;o&&z2e(t,n);var l=[],u=a.map((function(e){H2e(e).forEach((function(e){l.push(e)}));var t=gc(e.startContainer,"td, ne-column",r);return bt(t,"plugins/selection/src/render/painter/helpers/draw-multiple.ts:36"),t}));e.reset([],l,u,[],i)}(this._drawContext,this._domSelection,e,t,n,r):function(e,t,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"unknown";(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])&&z2e(t,n);var o=function(e){var t=e.commonAncestorContainer;if(!Td(t))return[];var n=t.querySelectorAll("table");return Array.from(n).filter((function(n){return xd(e,n,!1)&&!gc(n,"ne-card",t)}))}(n.ranges[0]),i=H2e(n.ranges[0]),a=function(e){var t=e.commonAncestorContainer;if(!Td(t))return[];var n=t.querySelectorAll("ne-collapse, ne-alert, ne-columns");return Array.from(n).filter((function(t){return xd(e,t,!1)}))}(n.ranges[0]);e.reset(o,i,[],a,r)}(this._drawContext,this._domSelection,e,n,r)}}])}(),q2e=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"isTab",value:function(e){var t=e.key,n=e.keyCode;return t?"Tab"===t:9===n}},{key:"isArrowUp",value:function(e){var t=e.key,n=e.keyCode;return t?"ArrowUp"===t:38===n}},{key:"isArrowDown",value:function(e){var t=e.key,n=e.keyCode;return t?"ArrowDown"===t:40===n}},{key:"isArrowLeft",value:function(e){var t=e.key,n=e.keyCode;return t?"ArrowLeft"===t:37===n}},{key:"isArrowRight",value:function(e){var t=e.key,n=e.keyCode;return t?"ArrowRight"===t:39===n}}])}(),$2e="NE-TABLE-HOLE",K2e="NE-HOLE",Y2e="NE-CONTAINER-HOLE",G2e="NE-ROOT-CARD-HOLE",J2e="NE-ALERT-HOLE";function X2e(){var e=fXe.getSelection(),t=e.focusNode,n=e.focusOffset;if(!t)return null;if(t.nodeType!==Node.ELEMENT_NODE)return null;var r=Vy(t),o=Hr.start;return r?(r.isFillerNode()?(o=0===r.offset?Hr.start:Hr.end,r=r.parentNode):o=0===n||1===n?Hr.start:Hr.end,r.hasCategory([qe.ContainerHole,qe.AlertHole,qe.Hole])?{holeNode:Hy(r).getContentDOMNode(),pos:o,range:e.getRangeAt(0)}:null):null}var Q2e=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"isAtContainerHole",value:function(){return!!X2e()}},{key:"move",value:function(e,t,n){if(!t)return null;var r,o=fXe.getSelection(),i=o.anchorNode,a=o.anchorOffset,l=X2e(),u=l.holeNode,c=l.pos;return bt(u,"plugins/selection/src/render/selection-observer/keyboard/general-keyboard/container-hole-move-helper.ts:189"),q2e.isArrowUp(e)?r=function(e,t){var n=e.firstChild,r=e.lastChild;if(bt(n.classList.contains("ne-i-filler"),"plugins/selection/src/render/selection-observer/keyboard/general-keyboard/container-hole-move-helper.ts:26"),bt(r.classList.contains("ne-i-filler"),"plugins/selection/src/render/selection-observer/keyboard/general-keyboard/container-hole-move-helper.ts:27"),t===hm)return{node:n,offset:0};var o=e.previousSibling;return!o||o.nodeName!==$2e&&o.nodeName!==K2e&&o.nodeName!==J2e&&o.nodeName!==G2e&&o.nodeName!==Y2e?null:{node:o,offset:0}}(u,c):q2e.isArrowDown(e)?r=function(e,t){var n=e.firstChild,r=e.lastChild;if(bt(n.classList.contains("ne-i-filler"),"plugins/selection/src/render/selection-observer/keyboard/general-keyboard/container-hole-move-helper.ts:61"),bt(r.classList.contains("ne-i-filler"),"plugins/selection/src/render/selection-observer/keyboard/general-keyboard/container-hole-move-helper.ts:62"),t===fm)return{node:r,offset:0};var o=e.nextSibling;return!o||o.nodeName!==$2e&&o.nodeName!==K2e&&o.nodeName!==G2e&&o.nodeName!==Y2e&&o.nodeName!==J2e?null:{node:o,offset:o.childNodes.length}}(u,c):q2e.isArrowLeft(e)?r=function(e,t){if(t===hm){var n=e.firstChild,r=e.lastChild;return bt(n.classList.contains("ne-i-filler"),"plugins/selection/src/render/selection-observer/keyboard/general-keyboard/container-hole-move-helper.ts:96"),bt(r.classList.contains("ne-i-filler"),"plugins/selection/src/render/selection-observer/keyboard/general-keyboard/container-hole-move-helper.ts:97"),{node:n,offset:0}}return null}(u,c):q2e.isArrowRight(e)&&(r=function(e,t){if(t===fm){var n=e.firstChild,r=e.lastChild;return bt(n.classList.contains("ne-i-filler"),"plugins/selection/src/render/selection-observer/keyboard/general-keyboard/container-hole-move-helper.ts:112"),bt(r.classList.contains("ne-i-filler"),"plugins/selection/src/render/selection-observer/keyboard/general-keyboard/container-hole-move-helper.ts:113"),{node:r,offset:0}}return null}(u,c)),r?(o.setBaseAndExtent(i,a,r.node,r.offset),{changed:!0,selectionData:fXe.transformRange(o.getRangeAt(0),n)}):null}}])}(),Z2e="NE-TABLE-HOLE",e3e="NE-HOLE",t3e="NE-CONTAINER-HOLE",n3e="NE-ROOT-CARD-HOLE",r3e="NE-ALERT-HOLE",o3e=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"isAtTableHole",value:function(){return!!i3e()}},{key:"move",value:function(e,t){var n=i3e(),r=n.tableHoleNode,o=n.pos;return bt(r,"plugins/selection/src/render/selection-observer/keyboard/general-keyboard/table-hole-move-helper.ts:29"),q2e.isArrowUp(e)?function(e,t,n){var r=t.firstChild,o=t.lastChild;if(bt(r.classList.contains("ne-i-filler"),"plugins/selection/src/render/selection-observer/keyboard/general-keyboard/table-hole-move-helper.ts:61"),bt(o.classList.contains("ne-i-filler"),"plugins/selection/src/render/selection-observer/keyboard/general-keyboard/table-hole-move-helper.ts:62"),"end"===n)return e?{changed:!0,selectionData:{focus:fm,anchor:hm,ranges:[fXe.createRange({startContainer:r,startOffset:0,endContainer:o,endOffset:0})]}}:{changed:!0,selectionData:{focus:fm,anchor:fm,ranges:[fXe.createRange({startContainer:r,startOffset:0,endContainer:r,endOffset:0})]}};var i=t.previousSibling;if(!i)return{changed:!0};if(i.nodeName===Z2e||i.nodeName===e3e||i.nodeName===n3e||i.nodeName===t3e||i.nodeName===r3e){if(!e){var a=i.lastChild,l=i,u=i.childNodes.length;return(null==a?void 0:a.classList.contains("ne-i-filler"))&&(l=a,u=0),{changed:!0,selectionData:{focus:fm,anchor:fm,ranges:[fXe.createRange({startContainer:l,startOffset:u,endContainer:l,endOffset:0})]}}}return{changed:!0,selectionData:{focus:fm,anchor:hm,ranges:[fXe.createRange({startContainer:i,startOffset:0,endContainer:t,endOffset:0})]}}}return null}(t,r,o):q2e.isArrowDown(e)?function(e,t,n){var r=t.firstChild,o=t.lastChild;if(bt(r.classList.contains("ne-i-filler"),"plugins/selection/src/render/selection-observer/keyboard/general-keyboard/table-hole-move-helper.ts:176"),bt(o.classList.contains("ne-i-filler"),"plugins/selection/src/render/selection-observer/keyboard/general-keyboard/table-hole-move-helper.ts:177"),"start"===n)return e?{changed:!0,selectionData:{focus:hm,anchor:fm,ranges:[fXe.createRange({startContainer:r,startOffset:0,endContainer:o,endOffset:0})]}}:{changed:!0,selectionData:{focus:fm,anchor:fm,ranges:[fXe.createRange({startContainer:o,startOffset:0,endContainer:o,endOffset:0})]}};var i=t.nextSibling;if(!i)return{changed:!0};if(i.nodeName===Z2e||i.nodeName===e3e||i.nodeName===n3e||i.nodeName===t3e||i.nodeName===r3e){if(!e){var a=i.firstChild,l=i,u=i.childNodes.length;return(null==a?void 0:a.classList.contains("ne-i-filler"))&&(l=a,u=0),{changed:!0,selectionData:{focus:fm,anchor:fm,ranges:[fXe.createRange({startContainer:l,startOffset:u,endContainer:l,endOffset:u})]}}}return{changed:!0,selectionData:{focus:hm,anchor:fm,ranges:[fXe.createRange({startContainer:t,startOffset:t.childNodes.length-1,endContainer:i,endOffset:i.childNodes.length})]}}}return null}(t,r,o):q2e.isArrowLeft(e)?function(e,t,n){if("end"===n){var r=t.firstChild,o=t.lastChild;if(bt(r.classList.contains("ne-i-filler"),"plugins/selection/src/render/selection-observer/keyboard/general-keyboard/table-hole-move-helper.ts:292"),bt(o.classList.contains("ne-i-filler"),"plugins/selection/src/render/selection-observer/keyboard/general-keyboard/table-hole-move-helper.ts:293"),e)return{changed:!0,selectionData:{focus:fm,anchor:hm,ranges:[fXe.createRange({startContainer:r,startOffset:0,endContainer:o,endOffset:0})]}};var i=t.querySelectorAll(".ne-td");if(i.length)return{changed:!0,selectionData:{focus:fm,anchor:hm,ranges:[fXe.createRange({startContainer:i[i.length-1],startOffset:0,endContainer:i[i.length-1],endOffset:0})]}}}return null}(t,r,o):q2e.isArrowRight(e)?function(e,t,n){if(e&&"start"===n){var r=t.firstChild,o=t.lastChild;return bt(r.classList.contains("ne-i-filler"),"plugins/selection/src/render/selection-observer/keyboard/general-keyboard/table-hole-move-helper.ts:348"),bt(o.classList.contains("ne-i-filler"),"plugins/selection/src/render/selection-observer/keyboard/general-keyboard/table-hole-move-helper.ts:349"),{changed:!0,selectionData:{focus:hm,anchor:fm,ranges:[fXe.createRange({startContainer:r,startOffset:0,endContainer:o,endOffset:0})]}}}return null}(t,r,o):null}}])}();function i3e(){var e=fXe.getSelection(),t=e.focusNode,n=e.focusOffset;if(!t)return null;if(t.nodeType!==Node.ELEMENT_NODE)return null;var r=Vy(t),o="start";return r?(r.isFillerNode()?(o=0===r.offset?"start":"end",r=r.parentNode):o=0===n||1===n?"start":"end",r.hasCategory(qe.TableHole)?{tableHoleNode:Hy(r).getContentDOMNode(),pos:o}:null):null}function a3e(e){for(e.nodeType===Node.TEXT_NODE&&(e=e.parentNode);e&&!e._viewNode;)e=e.parentNode;return(null==e?void 0:e._viewNode)||null}function l3e(e){var t,n=e.focusNode,r=e.focusOffset;if(n.nodeType===Node.TEXT_NODE&&0!==r)return null;if(n.nodeType===Node.ELEMENT_NODE&&n.childNodes[r-1]&&(t=a3e(n.childNodes[r-1])),!t){var o=a3e(n);t=null==o?void 0:o.previousSibling}return(null==t?void 0:t.isCardNode())?t:(null==t?void 0:t.isFillerNode())?t.previousSibling:null}function u3e(e){var t,n=e.focusNode,r=e.focusOffset;if(Sd(n)&&r!==n.data.length)return null;if(n.nodeType===Node.ELEMENT_NODE&&n.childNodes[r]&&(t=a3e(n.childNodes[r])),!t){var o=a3e(n);t=null==o?void 0:o.nextSibling}return(null==t?void 0:t.isCardNode())?t:(null==t?void 0:t.isFillerNode())?t.nextSibling:null}function c3e(e,t){var n=e.focusNode,r=e.focusOffset,o=a3e(n);if(null==o?void 0:o.isCardNode())return o;if(n.nodeType===Node.ELEMENT_NODE&&n.childNodes[r]&&(null==(o=a3e(n.childNodes[r]))?void 0:o.isCardNode()))return o;var i=gc(n,"ne-card",t);return i?a3e(i):null}function s3e(e,t,n){var r,o,i=e.focusNode,a=e.focusOffset,l=e.anchorNode,u=e.anchorOffset;n();var c=null;return"NE-COLUMN"===(null===(r=e.focusNode)||void 0===r?void 0:r.nodeName)&&1===e.focusOffset?(null===(o=e.focusNode)||void 0===o?void 0:o.nextElementSibling)&&(c=gc(e.focusNode.nextElementSibling,"ne-column",t)):c=gc(e.focusNode,"ne-column",t),e.setBaseAndExtent(l,u,i,a),Us.firefox&&(n(),e.focusNode===i&&e.focusOffset===a&&e.anchorNode===l&&e.anchorOffset===u||e.setBaseAndExtent(l,u,i,a)),c}function d3e(e,t){var n=fXe.getSelection(),r=gc(n.focusNode,"ne-column",e),o=gc(n.focusNode,"ne-card",e),i=gc(n.focusNode,"ne-container-hole",e),a=s3e(n,e,(function(){if(null==o?void 0:o.previousSibling){var e=document.createRange();e.selectNodeContents(o.previousSibling),e.collapse(),n.removeAllRanges(),n.addRange(e)}else n.modify(t?"extend":"move","left","character")}));return a?r===a?null:(n.modify(t?"extend":"move","left","character"),{changed:!0,selectionData:fXe.transformRange(n.getRangeAt(0),e)}):t?{changed:!0,selectionData:null}:(bt(i,"plugins/selection/src/render/selection-observer/keyboard/columns-keyboard/helper/move-left.ts:40"),{changed:!0,selectionData:{focus:fm,anchor:fm,ranges:[fXe.createRange({startContainer:i.firstChild,startOffset:0,endContainer:i.firstChild,endOffset:0})]}})}function f3e(e,t){var n=fXe.getSelection(),r=gc(n.focusNode,"ne-column",e),o=gc(n.focusNode,"ne-container-hole",e),i=s3e(n,e,(function(){n.modify(t?"extend":"move","right","character")}));if(!i)return t?{changed:!0,selectionData:null}:(bt(o,"plugins/selection/src/render/selection-observer/keyboard/columns-keyboard/helper/move-right.ts:34"),{changed:!0,selectionData:{focus:fm,anchor:fm,ranges:[fXe.createRange({startContainer:o.lastChild,startOffset:0,endContainer:o.lastChild,endOffset:0})]}});if(r===i)return null;var a=document.createRange(),l=i.querySelector("ne-column-content");return a.selectNodeContents(l),t?(a.setStart(n.focusNode,0),{changed:!0,selectionData:fXe.transformRange(a,e)}):(a.collapse(!0),{changed:!0,selectionData:fXe.transformRange(a,e)})}var h3e=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"isAllInColumnsNode",value:function(e,t){if(e.rangeCount<1)return null;var n=e.getRangeAt(0),r=n.startContainer,o=n.endContainer,i=n.collapsed,a=gc(r,"ne-columns",t);return a&&(i||a===gc(o,"ne-columns",t))?a:null}},{key:"_findIndex",value:function(e,t){for(var n=0;n<e.childNodes.length;n++)if(e.childNodes[n]===t)return n;return-1}},{key:"getColumnBoundary",value:function(e,t){var n=this,r=e.querySelector("ne-columns-content"),o=e.querySelectorAll("ne-column[ne-fake-cell-selection]");if(o.length<2)return null;var i=Number.MAX_VALUE,a=Number.MIN_VALUE;o.forEach((function(e){var t=n._findIndex(r,e);i=Math.min(t,i),a=Math.max(t,a)}));var l=t.getViewSelection().focus;return{columnsNode:r,anchor:"start"===l?a:i,focus:"start"===l?i:a}}},{key:"tryInterceptArrowKeyMove",value:function(e,t,n,r,o){return function(e,t,n,r){return Ks.isArrowUp(e)?function(e,t){return function(e,t){var n=fXe.getSelection(),r=gc(n.focusNode,"ne-column",e),o=gc(n.focusNode,"ne-card",e),i=gc(n.focusNode,"ne-container-hole",e),a=s3e(n,e,(function(){if(null==o?void 0:o.previousSibling){var e=document.createRange();e.selectNodeContents(o.previousSibling),e.collapse(),n.removeAllRanges(),n.addRange(e)}n.modify(t?"extend":"move","left","line")}));return a===r?(n.modify(t?"extend":"move","left","line"),{changed:!0,selectionData:fXe.transformRange(n.getRangeAt(0),e)}):t?{changed:!0}:(bt(i,"plugins/selection/src/render/selection-observer/keyboard/columns-keyboard/helper/move-up.ts:50"),{changed:!0,selectionData:{focus:fm,anchor:fm,ranges:[fXe.createRange({startContainer:i.firstChild,startOffset:0,endContainer:i.firstChild,endOffset:0})]}})}(e,t)}(r,t):Ks.isArrowDown(e)?function(e,t){return function(e,t){var n=fXe.getSelection(),r=gc(n.focusNode,"ne-column",e),o=gc(n.focusNode,"ne-card",e),i=gc(n.focusNode,"ne-container-hole",e),a=s3e(n,e,(function(){if(null==o?void 0:o.previousSibling){var e=document.createRange();e.selectNodeContents(o.previousSibling),e.collapse(),n.removeAllRanges(),n.addRange(e)}n.modify(t?"extend":"move","right","line")}));return a===r?(n.modify(t?"extend":"move","right","line"),{changed:!0,selectionData:fXe.transformRange(n.getRangeAt(0),e)}):t?{changed:!0}:(bt(i,"plugins/selection/src/render/selection-observer/keyboard/columns-keyboard/helper/move-down.ts:50"),{changed:!0,selectionData:{focus:fm,anchor:fm,ranges:[fXe.createRange({startContainer:i.lastChild,startOffset:0,endContainer:i.lastChild,endOffset:0})]}})}(e,t)}(r,t):Ks.isArrowLeft(e)?function(e,t,n){return n?function(e,t,n){var r=fXe.getSelection(),o=document.createRange(),i=n.columnsNode;return t?0===n.focus?{changed:!1}:(n.focus-1===n.anchor?(o.selectNodeContents(i.childNodes[n.anchor]),r.removeAllRanges(),r.addRange(o)):r.setBaseAndExtent(i.childNodes[n.anchor],0,i.childNodes[n.focus-1],0),{changed:!0,selectionData:fXe.transformRange(r.getRangeAt(0),e)}):(o.selectNode(i.childNodes[n.focus]),r.removeAllRanges(),r.addRange(o),d3e(e,!1))}(e,t,n):d3e(e,t)}(r,t,n):Ks.isArrowRight(e)?function(e,t,n){return n?function(e,t,n){var r=fXe.getSelection(),o=document.createRange(),i=n.columnsNode;return t?n.focus===i.childNodes.length-1?{changed:!1}:(n.focus+1===n.anchor?(o.selectNodeContents(i.childNodes[n.anchor]),r.removeAllRanges(),r.addRange(o)):r.setBaseAndExtent(i.childNodes[n.anchor],0,i.childNodes[n.focus+1],0),{changed:!0,selectionData:fXe.transformRange(r.getRangeAt(0),e)}):(o.selectNode(i.childNodes[n.focus]),r.removeAllRanges(),r.addRange(o),f3e(e,!1))}(e,t,n):f3e(e,t)}(r,t,n):Ks.isTab(e)?function(e,t,n,r){return n?function(e,t,n,r){r.preventDefault(),r.stopPropagation(),r.stopImmediatePropagation();var o=n.columnsNode;if(t){var i=Math.max(Math.min(n.anchor,n.focus)-1,0);return{changed:!0,selectionData:{focus:"end",anchor:"start",ranges:[fXe.createRangeByNodeContents(o.childNodes[i])]}}}var a=Math.min(Math.max(n.anchor,n.focus)+1,o.childNodes.length-1);return{changed:!0,selectionData:{focus:"end",anchor:"start",ranges:[fXe.createRangeByNodeContents(o.childNodes[a])]}}}(0,t,n,r):function(e,t,n){var r=fXe.getSelection(),o=gc(r.focusNode,"ne-column",e),i=s3e(r,e,(function(){if(!r.isCollapsed){var e=r.anchorNode,n=r.anchorOffset,o=r.focusNode,i=r.focusOffset;t?r.collapse(e,n):r.collapse(o,i)}r.modify("move",t?"left":"right","character")}));return o===i?null:(n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation(),i?{changed:!0,selectionData:{focus:"end",anchor:"start",ranges:[fXe.createRangeByNodeContents(i)]}}:null)}(e,t,r)}(r,t,n,e):null}(e,t,this.getColumnBoundary(n,o),r)}}])}(),p3e=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"tryInterceptKeyDown",value:function(e,t,n){var r=e.ctrlKey,o=e.metaKey,i=e.altKey,a=e.shiftKey;if(r||o||i)return null;var l=fXe.getSelection(),u=h3e.isAllInColumnsNode(l,t);if(u&&!Us.mobile){var c=h3e.tryInterceptArrowKeyMove(e,a,u,t,n);if(c)return c.selectionData||null}if(a&&Q2e.isAtContainerHole()){var s=Q2e.move(e,!0,t);if(s)return s.selectionData||null}return l.isCollapsed?function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(o3e.isAtTableHole()&&(n=o3e.move(t,r)))return n.selectionData||null;if(q2e.isArrowUp(t)){if(!r)return null;var o=m3e();if(o)return fXe.getTableHeadRangeByCellNode(fXe.getSelection(),o,r);var i=b3e();return i?fXe.getTableHeadRangeByCellNode(fXe.getSelection(),i,r):null}if(q2e.isArrowDown(t)){if(!r)return null;var a=v3e();if(a)return fXe.getTableTailRangeByCellNode(fXe.getSelection(),a,r);var l=y3e();return l?fXe.getTableTailRangeByCellNode(fXe.getSelection(),l,r):null}if(q2e.isArrowLeft(t)){if(!r)return _3e(e);var u=w3e();return u?fXe.getTableHeadRangeByCellNode(fXe.getSelection(),u,r):(C3e(),null)}if(q2e.isArrowRight(t)){if(!r)return function(e){var t,n,r=fXe.getSelection(),o=r.focusNode,i=r.focusOffset,a=r.anchorNode,l=r.anchorOffset,u=c3e(r,e);if(u){var c=null===(t=Hy(u.nextSibling))||void 0===t?void 0:t.getContentDOMNode();if(c&&!u.nextSibling.isBlockFillerNode())return{focus:fm,anchor:fm,ranges:[fXe.focusToStartOfNode(c)]}}else{var s=u3e(r);if(s){var d=null===(n=Hy(s))||void 0===n?void 0:n.getContentDOMNode();if(d)return{focus:fm,anchor:fm,ranges:[fXe.focusToStartOfNode(d)]}}}r.modify("move","right","character");var f,h=r.focusNode,p=r.focusOffset,v=h.nodeName.toLowerCase();return v===nw||v===rw||v===ow||"ne-oli"===v||"ne-uli"===v||"ne-tli"===v||(f=h.nodeType===Node.TEXT_NODE?a3e(h.parentNode):a3e(h))&&f.isTextFillerNode()&&(0===p||h===o)||r.setBaseAndExtent(a,l,o,i),null}(e);var c=A3e();if(c)return fXe.getTableTailRangeByCellNode(fXe.getSelection(),c,r);N3e()}return null}(t,e,a):function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t){var n=q2e.isArrowUp(e)||q2e.isArrowLeft(e),r=q2e.isArrowDown(e)||q2e.isArrowRight(e);if(!n&&!r)return null;var o=fXe.currentRange();bt(o,"plugins/selection/src/render/selection-observer/keyboard/general-keyboard/general-keyboard-helper.ts:222");var i=o.cloneRange();return i.collapse(n),{focus:fm,anchor:fm,ranges:[i]}}var a=fXe.getSelection(),l=a.anchorNode,u=a.anchorOffset,c=document.createRange();if(c.setStart(l,u),c.collapse(!0),q2e.isArrowUp(e)){var s=m3e();if(s)return fXe.getTableHeadRangeByCellNode(fXe.getSelection(),s,t);var d=b3e();if(d)return O3e(d,c)?fXe.getTableHeadRangeByCellNode(fXe.getSelection(),d,t):fXe.getTableTailRangeByCellNode(fXe.getSelection(),d,t)}if(q2e.isArrowDown(e)){var f=v3e();if(f)return fXe.getTableTailRangeByCellNode(fXe.getSelection(),f,t);var h=y3e();return h?O3e(h,c)?fXe.getTableHeadRangeByCellNode(fXe.getSelection(),h,t):fXe.getTableTailRangeByCellNode(fXe.getSelection(),h,t):null}if(q2e.isArrowLeft(e)){var p=m3e();if(p)return fXe.getTableHeadRangeByCellNode(fXe.getSelection(),p,t);var v=w3e();return v?fXe.getTableHeadRangeByCellNode(fXe.getSelection(),v,t):(C3e(),null)}if(q2e.isArrowRight(e)){var m=v3e();if(m)return fXe.getTableTailRangeByCellNode(fXe.getSelection(),m,t);var g=A3e();if(g)return fXe.getTableTailRangeByCellNode(fXe.getSelection(),g,t);N3e()}return null}(e,a)}}])}();function v3e(){var e=fXe.getSelection();return g3e(e.focusNode,e.focusOffset)}function m3e(){var e=fXe.getSelection();return g3e(e.focusNode,e.focusOffset-1)}function g3e(e,t){if(e.nodeType!==Node.ELEMENT_NODE||!e.childNodes[t])return null;var n=e.childNodes[t];return n.nodeName.toLowerCase()===nw?n.lastChild.firstChild.firstChild:null}function b3e(){var e=fXe.getSelection();return k3e((function(){e.modify("extend","left","line")}))}function y3e(){var e=fXe.getSelection();return k3e((function(){e.modify("extend","right","line")}))}function w3e(){var e=fXe.getSelection();return k3e((function(){e.modify("extend","left","character")}))}function A3e(){var e=fXe.getSelection();return k3e((function(){e.modify("extend","right","character")}))}function k3e(e){var t=fXe.getSelection(),n=t.focusNode,r=t.focusOffset,o=t.anchorNode,i=t.anchorOffset;e();var a=t.focusNode,l=t.focusOffset,u=gc(t.focusNode,"td");if(u)return u;var c=a.nodeName.toLowerCase();if(c===nw||c===rw||c===ow){var s=a.firstChild;if(bt("TABLE"===s.nodeName,"plugins/selection/src/render/selection-observer/keyboard/general-keyboard/general-keyboard-helper.ts:453"),1===l){var d=s.rows[s.tBodies[0].rows.length-1];return d.cells[d.cells.length-1]}return bt(0===l,"plugins/selection/src/render/selection-observer/keyboard/general-keyboard/general-keyboard-helper.ts:462"),s.tBodies[0].rows[0].cells[0]}return t.setBaseAndExtent(o,i,n,r),null}function _3e(e){var t,n,r=fXe.getSelection(),o=r.focusNode,i=r.focusOffset,a=r.anchorNode,l=r.anchorOffset,u=c3e(r,e);if(u){var c=null===(t=Hy(u.previousSibling))||void 0===t?void 0:t.getContentDOMNode();if(c)return{focus:fm,anchor:fm,ranges:[fXe.focusToEndOfNode(c)]}}else{var s=l3e(r);if(s){var d=null===(n=Hy(s))||void 0===n?void 0:n.getContentDOMNode();if(d)return{focus:fm,anchor:fm,ranges:[fXe.focusToEndOfNode(d)]}}}r.modify("move","left","character");var f,h=r.focusNode,p=r.focusOffset,v=h.nodeName.toLowerCase();if(v===nw||v===rw||v===ow)return null;if((f=h.nodeType===Node.TEXT_NODE?a3e(h.parentNode):a3e(h))&&f.isTextFillerNode()&&0===p){if(0===p&&0===i&&!o.previousSibling)return null;if(0===p||h===o)return _3e(e)}return r.setBaseAndExtent(a,l,o,i),null}function C3e(){var e,t=fXe.getSelection(),n=0,r=a3e(t.focusNode.nodeType===Node.TEXT_NODE?t.focusNode.parentNode:t.focusNode);do{n++,t.modify("extend","left","character");var o=t.focusNode,i=o.nodeName.toLowerCase();if(i!==nw&&i!==rw&&i!==ow&&"ne-oli"!==i&&"ne-uli"!==i&&"ne-tli"!==i){if(e=a3e(o.nodeType===Node.TEXT_NODE?o.parentNode:o),bt(e,"plugins/selection/src/render/selection-observer/keyboard/general-keyboard/general-keyboard-helper.ts:604"),!e.isTextFillerNode())break;if(r.isTextFillerNode()&&e!==r&&e.nextSibling!==r)break;r=e}else n--}while(n<=3);bt(e,"plugins/selection/src/render/selection-observer/keyboard/general-keyboard/general-keyboard-helper.ts:623"),t.modify("extend","right","character")}function N3e(){var e=fXe.getSelection();e.modify("extend","right","character");var t=e.focusNode.nodeName.toLowerCase();"ne-oli"!==t&&"ne-uli"!==t&&"ne-tli"!==t&&e.modify("extend","left","character")}function O3e(e,t){return-1===t.comparePoint(e,0)}function x3e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,E3e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function E3e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(E3e=function(){return!!e})()}var D3e=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=x3e(this,t),Object.defineProperty(r,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(r,"_tableKeyboard",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(r,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_isChanged",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(r,"_lastContentChangeTime",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(r,"isComposing",{enumerable:!0,configurable:!0,writable:!0,value:!1}),r._rootNode=e.domRootNode,r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){this.renderer=null,this._tableKeyboard=null,this._rootNode=null,this.removeAllListeners()}},{key:"start",value:function(){var e=this,t=this.renderer,n=this._rootNode,r=null;t.onRootNode("keydown",(function(t){if(e._isChanged=!1,e._lastContentChangeTime=Date.now(),Ks.isHome(t)&&!t.ctrlKey&&!t.shiftKey)return t.preventDefault(),void e._moveToLineBoundary(!0);if(Ks.isEnd(t)&&!t.ctrlKey&&!t.shiftKey)return t.preventDefault(),void e._moveToLineBoundary(!1);if(!(e._tableKeyboard.isProcessed||t.keyCode===Ws||t.isComposing||t.defaultPrevented||Ks.isShift(t)||0===document.getSelection().rangeCount)){var o=p3e.tryInterceptKeyDown(t,n,e.renderer.engine);if(o)return t.preventDefault(),void e.emit("change",o);e._isChanged=!0,r=t}}),!1),t.onRootNode("compositionstart",(function(){e.isComposing=!0})),t.onRootNode("compositionend",(function(){e.isComposing=!1})),t.onRootNode("input",(function(){e._isChanged=!1,e._lastContentChangeTime=Date.now()}),!1),t.onForceRootNode("mousedown",(function(){e._lastContentChangeTime=Date.now()}),!1),t.onForceRootNode("mousemove",(function(){e._lastContentChangeTime=Date.now()}),!1),t.onForceRootNode("mouseup",(function(){e._lastContentChangeTime=Date.now()}),!1);var o=t.id,i=t.domRootNode,a=document.getSelection(),l=function(){var t,l,u,c;if(e.renderer){var s=a.focusNode,d=a.focusOffset,f=a.isCollapsed;if(!(e.isComposing||s&&dd(s)!==o))if(f&&s&&(!document.activeElement||!i.contains(document.activeElement)&&i.contains(s))&&(i.focus({preventScroll:!0}),a.setBaseAndExtent(s,d,s,d)),Date.now()-e._lastContentChangeTime>300){var h=e.renderer.kernel.document.selection,p=h.firstRange,v=h.lastRange,m=null===(t=p.commonAncestorContainer)||void 0===t?void 0:t.hasCategory(qe.TableCell),g=null===(l=v.commonAncestorContainer)||void 0===l?void 0:l.hasCategory(qe.TableCell);if(a.rangeCount){var b=a.getRangeAt(0),y=b.startContainer===b.endContainer&&0===b.startOffset&&b.endOffset===b.commonAncestorContainer.childElementCount&&(null===(u=Vy(b.commonAncestorContainer))||void 0===u?void 0:u.hasCategory(qe.TableCell)),w=(null===(c=Vy(b.commonAncestorContainer))||void 0===c?void 0:c.id)===p.commonAncestorContainer.id;if(h.rangeCount>1&&m&&g&&y&&w)return}requestAnimationFrame((function(){e._syncSelectionFromDOM()}))}else if(e._isChanged){(Us.ipad||Us.ios)&&requestAnimationFrame((function(){e._syncSelectionFromDOM()})),e._isChanged=!1;var A=null;a.focusNode&&(fXe.isFocusInTable(a,n)&&!fXe.isAnchorInTable(a,n)?q2e.isArrowLeft(r)||q2e.isArrowUp(r)?A=fXe.getTableHeadRange(a,n):q2e.isArrowRight(r)||q2e.isArrowDown(r)?A=fXe.focusNodeInFirstCell(a,n)?fXe.getTableHeadRange(a,n):fXe.getTableTailRange(a,n):bt(!1,"plugins/selection/src/render/selection-observer/keyboard/general-keyboard/general-keyboard.ts:290"):A=fXe.transformRange(fXe.currentRange(),n),A&&e.emit("change",A))}}};Us.firefox&&(l=Qm()(l,17)),t.onDocument("selectionchange",l,!1)}},{key:"_syncSelectionFromDOM",value:function(){if(document.getSelection().focusNode){var e=fXe.currentRange();if(e){var t=fXe.transformRange(e,this._rootNode);t&&this.emit("change",t)}}}},{key:"updateRangeChangeTime",value:function(e){this._isChanged=!1,"content"===e&&(this._lastContentChangeTime=Date.now())}},{key:"_moveToLineBoundary",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];fXe.getSelection().modify("move",e?"left":"right","lineboundary");var t=fXe.transformRange(fXe.currentRange(),this._rootNode);this.emit("change",t)}}])}(it);function P3e(e,t,n){var r=e.focusNode,o=e.focusOffset,i=e.anchorNode,a=e.anchorOffset;n();var l=gc(e.focusNode,"td",t);return e.setBaseAndExtent(i,a,r,o),Us.firefox&&(n(),e.focusNode===r&&e.focusOffset===o&&e.anchorNode===i&&e.anchorOffset===a||e.setBaseAndExtent(i,a,r,o)),l}var R3e=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"generateLayout",value:function(e){return t=Vy(e.parentNode.parentNode.parentNode),n=[],r=t.attrs,o=r.rowCount,i=r.colCount,t.children.forEach((function(e,t){e.children.forEach((function(e){for(var r=e.attrs,o=r.rowSpan,i=void 0===o?1:o,a=r.colSpan,l=void 0===a?1:a,u=r.col,c=u+l-1,s=t+i-1,d=0;d<i;d++){var f=t+d;n[f]||(n[f]=[]);for(var h=0;h<l;h++)n[f][u+h]={minCol:u,maxCol:c,minRow:t,maxRow:s,viewNode:e,domNode:Hy(e).getMainDOMNode()}}})),bt(n[t].length===i,"plugins/selection/src/render/table-selection-helper.ts:502")})),bt(n.length===o,"plugins/selection/src/render/table-selection-helper.ts:505"),n;var t,n,r,o,i}},{key:"getBoundary",value:function(e,t){bt("TD"===e.nodeName&&"TD"===t.nodeName,"plugins/selection/src/render/table-selection-helper.ts:40");var n=e.parentNode.rowIndex,r=n+e.rowSpan-1,o=e.parentNode.rowIndex,i=o+t.rowSpan-1,a=parseInt(e.getAttribute("data-col"),10),l=a+e.colSpan-1,u=parseInt(t.getAttribute("data-col"),10),c=u+t.colSpan-1;return bt(a>=0&&u>=0,"plugins/selection/src/render/table-selection-helper.ts:53"),{minRow:Math.min(n,o),maxRow:Math.max(r,i),minCol:Math.min(a,u),maxCol:Math.max(l,c)}}},{key:"extendRight",value:function(e,t,n,r){bt("TABLE"===n.nodeName,"plugins/selection/src/render/table-selection-helper.ts:70");var o=Vy(n.parentNode.parentNode.parentNode);bt(o&&"table"===o.nodeName,"plugins/selection/src/render/table-selection-helper.ts:77");var i=t.getViewSelection(),a=i.anchor,l=i.focus,u=T3e(e,a,r),c=function(e,t,n,r){var o=T3e(e,t,r),i=T3e(e,n,r),a=L3e(e,r,o.maxCol,i);return null===a?null:S3e(e,{minRow:r.minRow,maxRow:r.maxRow,minCol:Math.min(a,i.minCol),maxCol:Math.max(a,i.maxCol)})}(e,l,a,r);return c?j3e(e,a,u,r,c):null}},{key:"moveRight",value:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=n.minRow,i=n.maxRow,a=n.minCol,l=n.maxCol;bt(o!==i||a!==l,"plugins/selection/src/render/table-selection-helper.ts:115");var u,c=e[o][l+1];return c&&c.viewNode.parentNode.offset===o?u=fXe.createRangeByNodeContents(c.domNode):(bt(e[o][l],"plugins/selection/src/render/table-selection-helper.ts:130"),u=fXe.createRangeByNodeContents(e[o][l].domNode)),r&&u.collapse(!0),{anchor:fm,focus:fm,ranges:[u]}}},{key:"extendLeft",value:function(e,t,n,r){bt("TABLE"===n.nodeName,"plugins/selection/src/render/table-selection-helper.ts:154");var o=Vy(n.parentNode.parentNode.parentNode);bt(o&&"table"===o.nodeName,"plugins/selection/src/render/table-selection-helper.ts:161");var i=t.getViewSelection(),a=i.anchor,l=function(e,t,n,r){var o=T3e(e,t,r),i=T3e(e,n,r),a=F3e(e,r,o.minCol,i);return null===a?null:S3e(e,{minRow:r.minRow,maxRow:r.maxRow,minCol:Math.min(a,i.minCol),maxCol:Math.max(a,i.maxCol)})}(e,i.focus,a,r);return l?j3e(e,a,T3e(e,a,r),r,l):null}},{key:"moveLeft",value:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=n.minRow,i=n.maxRow,a=n.minCol,l=n.maxCol;bt(o!==i||a!==l,"plugins/selection/src/render/table-selection-helper.ts:200");var u,c=e[o][a-1];return c&&c.viewNode.parentNode.offset===o?u=fXe.createRangeByNodeContents(c.domNode):(bt(e[o][a],"plugins/selection/src/render/table-selection-helper.ts:214"),u=fXe.createRangeByNodeContents(e[o][a].domNode)),r&&u.collapse(!0),{anchor:"start",focus:"start",ranges:[u]}}},{key:"extendUp",value:function(e,t,n,r){bt("TABLE"===n.nodeName,"plugins/selection/src/render/table-selection-helper.ts:237");var o=Vy(n.parentNode.parentNode.parentNode);bt(o&&"table"===o.nodeName,"plugins/selection/src/render/table-selection-helper.ts:244");var i=t.getViewSelection(),a=i.anchor,l=function(e,t,n,r){var o=T3e(e,t,r),i=T3e(e,n,r),a=M3e(e,r,o.minRow,i);return null===a?null:S3e(e,{minRow:Math.min(a,i.minRow),maxRow:Math.max(a,i.maxRow),minCol:r.minCol,maxCol:r.maxCol})}(e,i.focus,a,r);return l?j3e(e,a,T3e(e,a,r),r,l):null}},{key:"moveUp",value:function(e,t,n){var r,o=n.minRow,i=n.maxRow,a=n.minCol,l=n.maxCol,u=e[o-1]&&e[o-1][a];if(u)r=fXe.createRangeByNodeContents(u.domNode);else{var c=e[o][a];if(c.maxRow===i&&c.maxCol===l)return null;bt(e[o][a],"plugins/selection/src/render/table-selection-helper.ts:303"),r=fXe.createRangeByNodeContents(e[o][a].domNode)}return r.collapse(!0),{anchor:"start",focus:"start",ranges:[r]}}},{key:"extendDown",value:function(e,t,n,r){bt("TABLE"===n.nodeName,"plugins/selection/src/render/table-selection-helper.ts:325");var o=Vy(n.parentNode.parentNode.parentNode);bt(o&&"table"===o.nodeName,"plugins/selection/src/render/table-selection-helper.ts:332");var i=t.getViewSelection(),a=i.anchor,l=function(e,t,n,r){var o=T3e(e,t,r),i=T3e(e,n,r),a=B3e(e,r,o.maxRow,i);return null===a?null:S3e(e,{minRow:Math.min(a,i.minRow),maxRow:Math.max(a,i.maxRow),minCol:r.minCol,maxCol:r.maxCol})}(e,i.focus,a,r);return l?j3e(e,a,T3e(e,a,r),r,l):null}},{key:"moveDown",value:function(e,t,n){var r,o=n.minRow,i=n.maxRow,a=n.minCol,l=n.maxCol,u=e[i+1]&&e[i+1][a];if(u)r=fXe.createRangeByNodeContents(u.domNode);else{if(o===i&&a===l)return null;bt(e[i][a],"plugins/selection/src/render/table-selection-helper.ts:386"),r=fXe.createRangeByNodeContents(e[i][a].domNode)}return r.collapse(!0),{anchor:"start",focus:"start",ranges:[r]}}}])}();function S3e(e,t){for(var n=t.minRow,r=t.maxRow,o=t.minCol,i=t.maxCol,a=n,l=r,u=o,c=i,s=n;s<=r;s++)for(var d=o;d<=i;d++){var f=e[s][d];o=Math.min(o,f.minCol),n=Math.min(n,f.minRow),i=Math.max(i,f.maxCol),r=Math.max(r,f.maxRow)}return o!==u||i!==c||n!==a||r!==l?S3e(e,{minRow:n,maxRow:r,minCol:o,maxCol:i}):{minRow:n,maxRow:r,minCol:o,maxCol:i}}function T3e(e,t,n){return"start"===t?e[n.minRow][n.minCol]:"end"===t?e[n.maxRow][n.maxCol]:"topRight"===t?e[n.minRow][n.maxCol]:(bt("bottomLeft"===t,"plugins/selection/src/render/table-selection-helper.ts:527"),e[n.maxRow][n.minCol])}function j3e(e,t,n,r,o){var i=function(e,t){for(var n=new Set,r=S3e(e,t),o=r.minRow,i=r.maxRow,a=r.minCol,l=r.maxCol,u=o;u<=i;u++)for(var c=a;c<=l;c++){var s=e[u][c];n.add(s.viewNode)}return Array.from(n).map((function(e){return Hy(e).getMainDOMNode()}))}(e,o),a=document.createRange(),l=i.map((function(e){var t=a.cloneRange();return t.selectNodeContents(e),t}));if(1===l.length)return{focus:"start",anchor:"start",ranges:l};bt(l.length>1,"plugins/selection/src/render/table-selection-helper.ts:555");var u=function(e,t,n,r,o){var i=o.minRow,a=o.maxRow,l=o.minCol,u=o.maxCol,c=n.minRow,s=n.maxRow,d=n.minCol,f=n.maxCol;if(c===i&&d===l)return fm;if(s===a&&f===u)return hm;if(c===i&&f===u)return pm;if(s===a&&d===l)return vm;bt(s<=a&&f<=u&&c>=i&&d>=l,"plugins/selection/src/render/table-selection-helper.ts:604");var h=r.minRow===i,p=r.maxCol===u,v=r.maxRow===a,m=r.minCol===l;if(t===fm)return h?m||!p?fm:pm:m||!p?vm:hm;if(t===hm)return v?p||!m?hm:vm:p||!m?pm:fm;if(t===pm)return h?p||!m?pm:fm:p||!m?hm:vm;if(t===vm)return v?m||!p?vm:hm:m||!p?fm:pm;throw new Error("invalid anchor type")}(0,t,n,r,o);return{focus:I3e(u),anchor:u,ranges:l}}function I3e(e){return e===fm?hm:e===hm?fm:e===vm?pm:(bt(e===pm,"plugins/selection/src/render/table-selection-helper.ts:700"),vm)}function B3e(e,t,n,r){if((n+=1)===e.length)return null;for(var o=t.minCol,i=t.maxCol,a=Math.min(n,r.minRow),l=Math.max(n,r.maxRow),u=e[n],c=o;c<=i;c++){var s=u[c],d=s.minRow,f=s.maxRow;if(d<a||f>l)return B3e(e,t,n,r)}return n}function M3e(e,t,n,r){if((n-=1)<0)return null;for(var o=t.minCol,i=t.maxCol,a=Math.min(n,r.minRow),l=Math.max(n,r.maxRow),u=e[n],c=o;c<=i;c++){var s=u[c],d=s.minRow,f=s.maxRow;if(d<a||f>l)return M3e(e,t,n,r)}return n}function F3e(e,t,n,r){if((n-=1)<0)return null;for(var o=t.minRow,i=t.maxRow,a=Math.min(n,r.minCol),l=Math.max(n,r.maxCol),u=o;u<=i;u++){var c=e[u][n],s=c.minCol,d=c.maxCol;if(s<a||d>l)return F3e(e,t,n,r)}return n}function L3e(e,t,n,r){if((n+=1)===e[0].length)return null;for(var o=t.minRow,i=t.maxRow,a=Math.min(n,r.minCol),l=Math.max(n,r.maxCol),u=o;u<=i;u++){var c=e[u][n],s=c.minCol,d=c.maxCol;if(s<a||d>l)return L3e(e,t,n,r)}return n}function U3e(e,t,n,r,o,i,a){return o?function(e,t,n,r,o){return{changed:!0,selectionData:e?R3e.extendLeft(r,t,n,o):R3e.moveLeft(r,n,o)}}(e,t,n,r,o):V3e(e,t,n,r,i,a)}function V3e(e,t,n,r,o,i){var a,l,u=fXe.getSelection(),c=P3e(u,i,(function(){u.modify("extend","left","character")}));if(!c)return e||n._isMaxView?{changed:!0,selectionData:null}:function(e,t,n){var r=t.parentNode.parentNode.parentNode;bt(r.nodeName.toLowerCase()===nw,"plugins/selection/src/render/selection-observer/keyboard/table-keyboard/table-keyboard-helper/helper/move-left.ts:240");for(var o=10;o>0;){o--,e.modify("move","left","character");var i=gc(e.anchorNode,nw,n);if(!i||i!==r)break}var a=e.focusNode;return a.childNodes&&a.childNodes[e.focusOffset-1]&&a.childNodes[e.focusOffset-1].nodeName.toLowerCase()===A3&&e.modify("move","left","character"),{changed:!0,selectionData:fXe.transformRange(e.getRangeAt(0),n)}}(u,n,i);if(!e){var s=c3e(u,i);if(s){var d=null===(a=Hy(s.previousSibling))||void 0===a?void 0:a.getContentDOMNode();if(d)return{changed:!0,selectionData:{focus:fm,anchor:fm,ranges:[fXe.focusToEndOfNode(d)]}}}else{var f=l3e(u);if(f){var h=null===(l=Hy(f))||void 0===l?void 0:l.getContentDOMNode();if(h)return{changed:!0,selectionData:{focus:fm,anchor:fm,ranges:[fXe.focusToEndOfNode(h)]}}}}}if(!o||c===o){o||bt(!e,"plugins/selection/src/render/selection-observer/keyboard/table-keyboard/table-keyboard-helper/helper/move-left.ts:153");var p=u.focusNode;u.modify(e?"extend":"move","left","character");var v,m=u.focusNode,g=u.focusOffset;return(v=m.nodeType===Node.TEXT_NODE?a3e(m.parentNode):a3e(m))&&v.isTextFillerNode()&&0===g&&(0===g||m===p)?V3e(e,t,n,r,o,i):{changed:!0,selectionData:fXe.transformRange(u.getRangeAt(0),i)}}return function(e,t,n,r,o){bt(e,"plugins/selection/src/render/selection-observer/keyboard/table-keyboard/table-keyboard-helper/helper/move-left.ts:209");var i=Ad(o.parentNode),a=parseInt(o.getAttribute("data-col"),10);bt(a>=0&&i>=0,"plugins/selection/src/render/selection-observer/keyboard/table-keyboard/table-keyboard-helper/helper/move-left.ts:214");var l=R3e.getBoundary(o,o);return{changed:!0,selectionData:R3e.extendLeft(n,t,o.parentNode.parentNode.parentNode,l)}}(e,t,r,0,o)}var H3e=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"tryInterceptKeyDown",value:function(e,t,n,r,o,i,a){var l=e.shiftKey;if(q2e.isTab(e)){if(e.stopImmediatePropagation(),t.queryCommandState("canIndent")!==st)return e.preventDefault(),l?t.execCommand("outdent"):t.execCommand("indent"),{changed:!0};if(l)return function(e,t,n,r){var o;return o=n?R3e.moveLeft(t,e,n,!1):function(e,t,n){var r=gc(fXe.getSelection().focusNode,"td",n);bt(r,"plugins/selection/src/render/selection-observer/keyboard/table-keyboard/table-keyboard-helper/helper/move-left-by-tab.ts:49");var o=r.previousSibling;if(o)bt("TD"===o.nodeName,"plugins/selection/src/render/selection-observer/keyboard/table-keyboard/table-keyboard-helper/helper/move-left-by-tab.ts:54");else for(var i=e.tBodies[0].rows,a=r.parentNode.rowIndex-1;a>=0;a--)if(i[a].cells.length){o=i[a].cells[i[a].cells.length-1];break}return o?{focus:"start",anchor:"end",ranges:[fXe.createRangeByNodeContents(o)]}:null}(e,0,r),{changed:!0,selectionData:o}}(r,n,o,a);var u=function(e,t,n,r){var o;return o=n?R3e.moveRight(t,e,n,!1):function(e,t,n){var r=gc(fXe.getSelection().focusNode,"td",n);bt(r,"plugins/selection/src/render/selection-observer/keyboard/table-keyboard/table-keyboard-helper/helper/move-right-by-tab.ts:49");var o=r.nextSibling;if(o)bt("TD"===o.nodeName,"plugins/selection/src/render/selection-observer/keyboard/table-keyboard/table-keyboard-helper/helper/move-right-by-tab.ts:54");else for(var i=e.tBodies[0].rows,a=r.parentNode.rowIndex+1,l=i.length;a<l;a++)if(i[a].cells[0]){o=i[a].cells[0];break}return o?{focus:"start",anchor:"end",ranges:[fXe.createRangeByNodeContents(o)]}:null}(e,0,r),{changed:!0,selectionData:o}}(r,n,o,a);return u.selectionData||t.execCommand("tableInsertAfterRow",1,-1,!0),u}return q2e.isArrowLeft(e)?U3e(l,t,r,n,o,i,a):q2e.isArrowRight(e)?function(e,t,n,r,o,i,a){return o?function(e,t,n,r,o){return{changed:!0,selectionData:e?R3e.extendRight(r,t,n,o):R3e.moveRight(r,n,o)}}(e,t,n,r,o):function(e,t,n,r,o,i){var a,l,u=fXe.getSelection(),c=P3e(u,i,(function(){u.modify("extend","right","character")}));if(!e){var s=c3e(u,i);if(s){var d=null===(a=Hy(s.nextSibling))||void 0===a?void 0:a.getContentDOMNode();if(d)return{changed:!0,selectionData:{focus:fm,anchor:fm,ranges:[fXe.focusToEndOfNode(d)]}}}else{var f=u3e(u);if(f){var h=null===(l=Hy(f))||void 0===l?void 0:l.getContentDOMNode();if(h)return{changed:!0,selectionData:{focus:fm,anchor:fm,ranges:[fXe.focusToEndOfNode(h)]}}}}}return c?o&&c!==o?function(e,t,n,r,o){bt(e,"plugins/selection/src/render/selection-observer/keyboard/table-keyboard/table-keyboard-helper/helper/move-right.ts:177");var i=Ad(o.parentNode),a=parseInt(o.getAttribute("data-col"),10);bt(a>=0&&i>=0,"plugins/selection/src/render/selection-observer/keyboard/table-keyboard/table-keyboard-helper/helper/move-right.ts:182");var l=R3e.getBoundary(o,o),u=R3e.extendRight(n,t,o.parentNode.parentNode.parentNode,l);return bt(u,"plugins/selection/src/render/selection-observer/keyboard/table-keyboard/table-keyboard-helper/helper/move-right.ts:195"),{changed:!0,selectionData:u}}(e,t,r,0,o):(o||bt(!e,"plugins/selection/src/render/selection-observer/keyboard/table-keyboard/table-keyboard-helper/helper/move-right.ts:151"),u.modify(e?"extend":"move","right","character"),{changed:!0,selectionData:fXe.transformRange(u.getRangeAt(0),i)}):e||n._isMaxView?{changed:!0,selectionData:null}:function(e,t,n){var r=t.parentNode.parentNode.parentNode;bt(r.nodeName.toLowerCase()===nw,"plugins/selection/src/render/selection-observer/keyboard/table-keyboard/table-keyboard-helper/helper/move-right.ts:210");for(var o=10;o>0;){o--,e.modify("move","right","character");var i=gc(e.anchorNode,nw,n);if(!i||i!==r)break}var a=e.focusNode;return a.childNodes&&a.childNodes[e.focusOffset]&&a.childNodes[e.focusOffset].nodeName.toLowerCase()===A3&&e.modify("move","right","character"),{changed:!0,selectionData:fXe.transformRange(e.getRangeAt(0),n)}}(u,n,i)}(e,t,n,r,i,a)}(l,t,r,n,o,i,a):q2e.isArrowUp(e)?function(e,t,n,r,o,i){return o?function(e,t,n,r,o){return{changed:!0,selectionData:e?R3e.extendUp(r,t,n,o):R3e.moveUp(r,n,o)}}(e,t,n,r,o):function(e,t,n,r,o){var i=fXe.getSelection(),a=gc(i.focusNode,"td",o);return P3e(i,o,(function(){i.modify(e?"extend":"move","left","line")}))===a?(i.modify(e?"extend":"move","left","line"),{changed:!0,selectionData:fXe.transformRange(i.getRangeAt(0),o)}):function(e,t,n,r,o,i){var a=Ad(o.parentNode),l=parseInt(o.getAttribute("data-col"),10);bt(l>=0&&a>=0,"plugins/selection/src/render/selection-observer/keyboard/table-keyboard/table-keyboard-helper/helper/move-up.ts:121");var u=o.parentNode.parentNode.parentNode;bt("TABLE"===u.nodeName,"plugins/selection/src/render/selection-observer/keyboard/table-keyboard/table-keyboard-helper/helper/move-up.ts:125");var c,s=R3e.getBoundary(o,o);if(e)c=R3e.extendUp(n,t,u,s);else if(!(c=R3e.moveUp(n,u,s))&&!u._isMaxView)return function(e,t,n){var r=gc(e.focusNode,"td",n);if(r&&0===r.parentNode.rowIndex&&!gc(r,nw,n).previousSibling)return{changed:!0};var o=t.parentNode.parentNode.parentNode;bt(o.nodeName.toLowerCase()===nw,"plugins/selection/src/render/selection-observer/keyboard/table-keyboard/table-keyboard-helper/helper/move-up.ts:191");var i=o.parentNode,a=Ad(o);e.setBaseAndExtent(i,a,i,a);var l=o.previousSibling;if(l&&l.nodeName.toLowerCase()===nw){for(var u,c=l.querySelector("table").tBodies[0].rows,s=c.length-1;s>=0;s--){var d=c[s].cells;if(d.length){u=d[d.length-1];break}}bt(u,"plugins/selection/src/render/selection-observer/keyboard/table-keyboard/table-keyboard-helper/helper/move-up.ts:217"),e.setBaseAndExtent(u,u.childNodes.length,u,u.childNodes.length)}else e.modify("move","left","character"),e.modify("move","right","character");return{changed:!0,selectionData:fXe.transformRange(e.getRangeAt(0),n)}}(r,u,i);return{changed:!0,selectionData:c}}(e,t,r,i,a,o)}(e,t,0,r,i)}(l,t,r,n,o,a):q2e.isArrowDown(e)?function(e,t,n,r,o,i){return o?function(e,t,n,r,o){return{changed:!0,selectionData:e?R3e.extendDown(r,t,n,o):R3e.moveDown(r,n,o)}}(e,t,n,r,o):function(e,t,n,r,o){var i=fXe.getSelection(),a=gc(i.focusNode,"td",o);return P3e(i,o,(function(){i.modify("extend","right","line")}))===a?(i.modify(e?"extend":"move","right","line"),{changed:!0,selectionData:fXe.transformRange(i.getRangeAt(0),o)}):function(e,t,n,r,o,i){var a=Ad(o.parentNode),l=parseInt(o.getAttribute("data-col"),10);bt(l>=0&&a>=0,"plugins/selection/src/render/selection-observer/keyboard/table-keyboard/table-keyboard-helper/helper/move-down.ts:123");var u=o.parentNode.parentNode.parentNode;bt("TABLE"===u.nodeName,"plugins/selection/src/render/selection-observer/keyboard/table-keyboard/table-keyboard-helper/helper/move-down.ts:127");var c,s=R3e.getBoundary(o,o);if(e)c=R3e.extendDown(n,t,u,s);else if(!(c=R3e.moveDown(n,u,s))&&!u._isMaxView)return function(e,t,n){var r,o=t.parentNode.parentNode.parentNode;bt(o.nodeName.toLowerCase()===nw,"plugins/selection/src/render/selection-observer/keyboard/table-keyboard/table-keyboard-helper/helper/move-down.ts:169");var i=o.parentNode,a=Ad(o)+1;e.setBaseAndExtent(i,a,i,a);var l=o.nextSibling;if(l&&l.nodeName.toLowerCase()===nw){for(var u,c=l.querySelector("table").tBodies[0].rows,s=0,d=c.length;s<d;s++){var f=c[s].cells;if(f.length){u=f[0];break}}bt(u,"plugins/selection/src/render/selection-observer/keyboard/table-keyboard/table-keyboard-helper/helper/move-down.ts:195"),e.setBaseAndExtent(u,0,u,0)}else l&&(null===(r=Vy(l))||void 0===r?void 0:r.hasCategory(qe.TextContainer))&&(e.modify("move","right","character"),e.modify("move","left","character"));return{changed:!0,selectionData:fXe.transformRange(e.getRangeAt(0),n)}}(r,u,i);return{changed:!0,selectionData:c}}(e,t,r,i,a,o)}(e,t,0,r,i)}(l,t,r,n,o,a):null}}])}();function z3e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,W3e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function W3e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(W3e=function(){return!!e})()}var q3e=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=z3e(this,t),Object.defineProperty(r,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(r,"engine",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(r,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_dispose",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(r,"_isProcessed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),r._rootNode=e.domRootNode,r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){this.renderer=null,this.engine=null,this._rootNode=null,this.removeAllListeners()}},{key:"isProcessed",get:function(){return this._isProcessed}},{key:"start",value:function(){var e=this,t=this.renderer,n=this.engine,r=this._rootNode,o=null;t.onRootNode("keydown",(function(t){var i;e._isProcessed=!1;var a=fXe.currentRange();if(a&&e._isAllInTable(a)&&!(Ks.isHome(t)||Ks.isEnd(t)||t.keyCode===Ws||t.isComposing||t.defaultPrevented)){var l=t.ctrlKey,u=t.metaKey,c=t.altKey;if(!(l||u||c)){e._isProcessed=!0;var s=fXe.getSelection();if(Ks.isShift(t))o=gc(s.anchorNode,"td",r);else{o&&!t.shiftKey&&(o=null);var d=gc(s.anchorNode,"table",r),f=R3e.generateLayout(d);bt(d&&"TABLE"===d.nodeName,"plugins/selection/src/render/selection-observer/keyboard/table-keyboard/table-keyboard.ts:96");var h=function(e){var t=e.querySelectorAll("td[ne-fake-cell-selection]");if(0===t.length)return null;var n=t[0].parentNode.rowIndex,r=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER;return Array.from(t).forEach((function(e){var t=parseInt(e.getAttribute("data-col"),10),n=e.parentNode.rowIndex;bt(t>=0,"plugins/selection/src/render/selection-observer/keyboard/table-keyboard/table-keyboard.ts:203"),r=Math.min(r,t),o=Math.max(o,t+e.colSpan-1),i=Math.max(i,n+e.rowSpan-1)})),{minCol:r,maxCol:o,minRow:n,maxRow:i}}(d),p=H3e.tryInterceptKeyDown(t,n,f,d,h,o,r);p&&p.changed&&(t.preventDefault(),p.selectionData&&(e.emit("change",p.selectionData),null===(i=e._dispose)||void 0===i||i.dispose(),e._dispose=ys((function(){var e,t=gc(d,"ne-table-inner-wrap",r),n=fXe.getSelection().focusNode;if(!t||!n)return"nearest";var o=null===(e=gc(n,"td",r))||void 0===e?void 0:e.getBoundingClientRect(),i=t.getBoundingClientRect();return o&&o.left<i.left?"start":"nearest"}),(function(e){var t,n,o;null===(o=gc((null===(n=null===(t=p.selectionData)||void 0===t?void 0:t.ranges[0])||void 0===n?void 0:n.startContainer)||fXe.getSelection().focusNode,"td",r))||void 0===o||o.scrollIntoView({behavior:"smooth",block:"nearest",inline:e})}))))}}}}),!1),t.onRootNode("keyup",(function(e){Ks.isShift(e)&&(o=null)}))}},{key:"_isAllInTable",value:function(e){var t=e.startContainer,n=e.endContainer,r=e.collapsed,o=gc(t,"table",this._rootNode);return!(!o||!r&&o!==gc(n,"table",this._rootNode))}}])}(it);function $3e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,K3e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function K3e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(K3e=function(){return!!e})()}var Y3e=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=$3e(this,t),Object.defineProperty(r,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(r,"_tableKeyboard",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_generalKeyboard",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r._tableKeyboard=new q3e(e,n),r._generalKeyboard=new D3e(e,r._tableKeyboard),r._generalKeyboard.on("change",(function(e){r.emit("change",{selectionData:e,isComposing:!1})})),r._tableKeyboard.on("change",(function(e){r.emit("change",{selectionData:e,isComposing:!1})})),r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){this._tableKeyboard.destroy(),this._generalKeyboard.destroy(),this.renderer=null,this._tableKeyboard=null,this._generalKeyboard=null}},{key:"start",value:function(){this._tableKeyboard.start(),this._generalKeyboard.start()}},{key:"updateRangeChangeTime",value:function(e){this._generalKeyboard.updateRangeChangeTime(e)}}])}(it);function G3e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,J3e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function J3e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(J3e=function(){return!!e})()}var X3e=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=G3e(this,t),Object.defineProperty(n,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(n,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"isComposing",{enumerable:!0,configurable:!0,writable:!0,value:!1}),n._rootNode=e.domRootNode,n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){this.renderer=null,this._rootNode=null,this.removeAllListeners()}},{key:"start",value:function(){var e=this,t=this.renderer,n=this._rootNode,r=!1,o=function(){r&&(r=!1,e._emitChange(n,!1))};t.onRootNode("keydown",o),t.onRootNode("beforeinput",o),t.onRootNode("compositionstart",(function(){e.isComposing=!0})),t.onRootNode("compositionend",(function(){e.isComposing=!1})),t.onRootNode("touchstart",(function(o){var i;r=!0;var a=t.onceDocument("touchend",(function(){r=!1,clearTimeout(i)}),!1);i=window.setTimeout((function(){a(),requestAnimationFrame((function(){r=!1,e._emitChange(n,!1,o.target)}))}),1e3)})),t.onDocument("selectionchange",(function(){e.isComposing||t.kernel.document.selection.rangeCount>1||(Us.ipad||Us.ios)&&requestAnimationFrame((function(){e._syncSelectionFromDOM()}))}),!1)}},{key:"_syncSelectionFromDOM",value:function(){var e=document.getSelection();if(null==e?void 0:e.focusNode){var t=fXe.currentRange();if(t){var n=fXe.transformRange(t,this._rootNode);n&&this.emit("change",{selectionData:n,isComposing:!1})}}}},{key:"_emitChange",value:function(e,t,n){var r=this._rootNode,o=fXe.currentRange();if(o){n&&(o=function(e,t,n){return function(e,t,n){var r;if(!e.collapsed)return e;var o=e,i=o.startContainer,a=o.startOffset,l=gc(i,"ne-code",n);return l?l.contains(t)||i.nodeType!==Node.TEXT_NODE?e:(null===(r=Vy(i.parentNode))||void 0===r?void 0:r.isTextNode())?0===a?((e=e.cloneRange()).setStart(l.parentNode,Ad(l)),e.collapse(!0),e):a===i.data.length?((e=e.cloneRange()).setStart(l.parentNode,Ad(l)+1),e.collapse(!0),e):e:e:e}(e,t,n)}(o,n,e));var i=fXe.transformRange(o,r);i&&this.emit("change",{selectionData:i,isComposing:t})}}}])}(it);function Q3e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Z3e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Z3e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Z3e=function(){return!!e})()}var e4e=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=Q3e(this,t),Object.defineProperty(n,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(n,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_lastContentChangeTime",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(n,"_lastContentChangeRange",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"_latestClickTimes",{enumerable:!0,configurable:!0,writable:!0,value:0}),n._rootNode=e.domRootNode,n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){this.renderer=null,this._rootNode=null,this.removeAllListeners()}},{key:"start",value:function(){var e=this,t=this.renderer,n=this._rootNode,r=0,o=!1,i=!1,a=!1,l=function(){i&&(r=0,a=!1,i=!1,e._emitChange(!1))};t.onRootNode("keydown",l),t.onRootNode("beforeinput",l),t.onRootNode("mousedown",(function(l){if(o=!1,2===l.button||3===l.which){if(gc(l.target,"[ne-fake-cell-selection]",n))return void l.preventDefault();gc(l.target,"ne-card",n)||(o=!0)}r=l.timeStamp,i=!0,a=!0;var u=t.onDocument("mousemove",(function(e){r=e.timeStamp}),!1);t.onceDocument("mouseup",(function(){r=0,a=!1,u(),requestAnimationFrame((function(){i=!1,e._emitChange(!1,l)}))}),!1)}),!1),t.on("clickForSelection",(function(t){e._latestClickTimes=t})),t.onDocument("selectionchange",(function(){if(0!==r)o&&function(){var e=fXe.currentRange();if(e&&!e.collapsed){var t=e.startContainer,n=e.startOffset,r=e.endContainer,o=e.endOffset,i=function(e){for(;e;){if(e._neRef)return e._neRef;e=e.parentNode}return null}(t);if(i){var a=e.toString();if(i.isFillerNode()&&0===a.length){var l=Ad(t);fXe.getSelection().setBaseAndExtent(t.parentNode,l,t.parentNode,l)}else i.isTextNode()&&"\n"===a&&t===r&&n+1===o&&fXe.getSelection().setBaseAndExtent(t,n,t,n)}}}(),r=0,e._emitChange(a);else if(Date.now()-e._lastContentChangeTime<1e3&&e._lastContentChangeRange){var t=fXe.currentRange();t&&t.collapsed&&e._lastContentChangeRange.collapsed&&t.startContainer===e._lastContentChangeRange.startContainer&&t.startOffset===e._lastContentChangeRange.startOffset-1&&(e._lastContentChangeTime=1,e._emitChange(!1))}}),!1)}},{key:"setContentChangeRange",value:function(e){this._lastContentChangeTime=Date.now(),this._lastContentChangeRange=e}},{key:"_emitChange",value:function(e,t){var n,r=this._rootNode,o=fXe.currentRange();if(o){if(this._latestClickTimes>=3){var i=o,a=i.startContainer,l=i.endContainer,u=i.startOffset,c=Vy(a)?Vy(a):Vy(a.parentNode),s=Vy(l)?Vy(l):Vy(l.parentNode),d=(null==c?void 0:c.hasCategory(qe.TableCell))?c:null==c?void 0:c.closest(qe.TableCell),f=(null==s?void 0:s.hasCategory(qe.TableCell))?s:null==s?void 0:s.closest(qe.TableCell);if(d&&f&&d!==f){var h=Hy(d).getMainDOMNode();(o=document.createRange()).setStart(a,u),o.setEnd(h,h.childNodes.length)}}if(null==t?void 0:t.target){var p=t.target;if(!t.defaultPrevented){var v=gc(o.commonAncestorContainer,"ne-card",r);v&&!gc(p,"ne-card",r)&&(o=null!==(n=function(e,t){if(!e.isConnected)return null;var n=e.getBoundingClientRect(),r=document.createRange();return r.selectNode(e),r.collapse(t.x<=n.left+n.width/2),r}(v,t))&&void 0!==n?n:o)}o=function(e,t,n){return function(e,t,n){var r;if(!e.collapsed)return e;var o=e,i=o.startContainer,a=o.startOffset,l=gc(i,"ne-code",n);return l?l.contains(t)||i.nodeType!==Node.TEXT_NODE?e:(null===(r=Vy(i.parentNode))||void 0===r?void 0:r.isTextNode())?0===a?((e=e.cloneRange()).setStart(l.parentNode,Ad(l)),e.collapse(!0),e):a===i.data.length?((e=e.cloneRange()).setStart(l.parentNode,Ad(l)+1),e.collapse(!0),e):e:e:e}(e,t,n)}(o,p,r)}var m=fXe.transformRange(o,r);m&&this.emit("change",{selectionData:m,isComposing:e})}}}])}(it);function t4e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,n4e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function n4e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(n4e=function(){return!!e})()}var r4e=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=t4e(this,t),Object.defineProperty(r,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(r,"_keyboard",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_mouse",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_mobile",{enumerable:!0,configurable:!0,writable:!0,value:null}),r._keyboard=new Y3e(e,n),r._mouse=new e4e(e),Us.mobile&&(r._mobile=new X3e(e)),r._init(),r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"_init",value:function(){var e,t,n=this;this._keyboard.on("change",(function(e){n._onSelectionChange("keyboard",e)})),this._mouse.on("change",(function(e){n._onSelectionChange("mouse",e)})),null===(e=this._mobile)||void 0===e||e.on("change",(function(e){n._onSelectionChange("mobile",e)})),this._keyboard.start(),this._mouse.start(),null===(t=this._mobile)||void 0===t||t.start()}},{key:"destroy",value:function(){var e;this._keyboard.destroy(),this._mouse.destroy(),null===(e=this._mobile)||void 0===e||e.destroy(),this.renderer=null,this._keyboard=null,this._mouse=null,this._mobile=null,this.removeAllListeners()}},{key:"setContentChangeRange",value:function(e){this._mouse.setContentChangeRange(e)}},{key:"updateRangeChangeTime",value:function(e){this._keyboard.updateRangeChangeTime(e)}},{key:"_onSelectionChange",value:function(e,t){t&&(t.type=e,this.emit("change",t))}}])}(it);function o4e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,i4e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function i4e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(i4e=function(){return!!e})()}var a4e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=o4e(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Yy);function l4e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,u4e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function u4e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(u4e=function(){return!!e})()}Object.defineProperty(a4e,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze(D2.service.ISelectionRenderService)});var c4e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=l4e(this,t,arguments),Object.defineProperty(e,"forceSelectExec",{enumerable:!0,configurable:!0,writable:!0,value:!1}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){}},{key:"setForceSelectExec",value:function(e){this.forceSelectExec=e}}])}(a4e);function s4e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,d4e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function d4e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(d4e=function(){return!!e})()}var f4e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=s4e(this,t,arguments),Object.defineProperty(e,"_observer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_painter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_blockReset",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_preventSetSelection",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_clickTimes",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(e,"_tmpClickTimes",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(e,"_latestClickTimeStamp",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(e,"_latestClickEle",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){var n=this;this._observer=new r4e(e,t),this._painter=new W2e(e),this._observer.on("change",(function(r){var o=r.selectionData,i=r.isComposing,a=r.type;n._blockReset=!1,e.isFocus()&&(i?(n._blockReset=!0,e.emitPluginEvent("blockSelectionChange"),e.emitPluginEvent("uiSelectionChange",o.ranges),n._painter.refresh(o,e.domRootNode,!1,a),n._observer.updateRangeChangeTime("selection")):(n._blockReset=!1,e.emitPluginEvent("unblockSelectionChange",o),"keyboard"===a&&n._emitKeyboardEnterEvent(o,e,t),n._selectionChange(o,"mouse"!==a)))}));var r=e.domRootNode;e.extendMethods({repaintSelection:function(e){n._repaint(e)},focusCard:function(e){n.kernel.execCommand("selection",{ranges:[t.transformDOMRange(fXe.createRange({startContainer:e,startOffset:0,endContainer:e,endOffset:0}))],start:"start",end:"start"})}}),e.on("repaintSelection",(function(e){n._repaint(e)})),e.on("contentchange",(function(t){(n.service.forceSelectExec||e.isFocus()&&!n._blockReset)&&(n._painter.refresh(t,e.domRootNode,!0),n._observer.updateRangeChangeTime("content"),n._observer.setContentChangeRange(fXe.currentRange()))})),e.on("selectionchange",(function(r){if(e.isFocus()&&!n._blockReset){var o=!1;r.ranges.forEach((function(r){var i,a=r.endOffset;if(2===n._tmpClickTimes){var l=e.toViewRange(r),u=l.end.node;if(!l.collapsed&&(null==u?void 0:u.isTextNode())&&a>1&&" "===(null===(i=u.data)||void 0===i?void 0:i[a-1])){var c=document.createRange();c.setStart(r.startContainer,r.startOffset),c.setEnd(r.endContainer,r.endOffset-1),n.kernel.execCommand("selection",{ranges:[t.transformDOMRange(c)],anchor:"start",focus:"end"}),o=!0}n._tmpClickTimes=0}else n._tmpClickTimes>=3&&(n._tripleClick(r,t),n._tmpClickTimes=0)})),o||(n._painter.refresh(r,e.domRootNode,!0),n._observer.updateRangeChangeTime("selection"))}})),e.onPluginEvent("tableSelectionChange",(function(){n._painter.clear()})),e.onPluginEvent("requestSetRange",(function(e){n._selectionChange(e)})),e.onPluginEvent("blockReset",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n._blockReset=e}));var o=null;e.onForceRootNode("mousedown",(function(i){var a,l,u,c;i.timeStamp-n._latestClickTimeStamp<300?n._clickTimes=n._clickTimes+1:n._clickTimes=1,n._tmpClickTimes=n._clickTimes,n._latestClickTimeStamp=i.timeStamp,n._latestClickEle=i.target,e.emit("clickForSelection",n._clickTimes),o=null;var s=gc(i.target,"ne-card-root",r);if(s&&2!==i.button&&3!==i.which)t.getViewSelection().firstRange.start.node!==Vy(s.parentNode)&&(o=s,e.focusCard(s.parentNode));else if(Us.firefox){var d=document.getSelection().focusNode,f=t.getViewSelection();["INPUT","TEXTAREA"].includes(d.nodeName)&&(null===(l=(a=d).blur)||void 0===l||l.call(a),null===(c=null===(u=Hy(f.firstRange.start.node))||void 0===u?void 0:u.$blur)||void 0===c||c.call(u))}}),!1),e.onForceRootNode("mouseup",(function(){o&&e.focusCard(o.parentNode),o=null}),!1),e.onDocument("mousedown",(function(){n._preventSetSelection=!0;var t=e.onDocument("mousemove",(function(e){e.which||e.button?n._preventSetSelection=!0:(t(),n._preventSetSelection=!1)}),!1);e.onceDocument("mouseup",(function(){t(),n._preventSetSelection=!1}))}),!1),this.kernel.editing.on("operationRollback",(function(){e.isFocus()&&!n._blockReset&&n._repaint()}))}},{key:"destroy",value:function(){this._observer.destroy(),this._painter.destroy(),this._observer=null,this._painter=null,Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}},{key:"_syncSelection",value:function(){var e=fXe.transformRange(fXe.currentRange(),this.renderer.domRootNode);this._selectionChange(e)}},{key:"setSelection",value:function(e,t){var n=document.createRange();n.setStart(e,t),n.collapse(!0),this._selectionChange({ranges:[n]})}},{key:"_selectionChange",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.engine,r=!1,o=e.ranges.map((function(e){return r?null:n.transformDOMRange(e)||(r=!0,null)}));r||this.kernel.execCommand("selection",Object.assign(Object.assign({},e),{ranges:o}),t)}},{key:"_repaint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this._preventSetSelection){var t=this.engine,n=this.renderer,r=t.getViewSelection();if(r){var o=r.ranges.map((function(e){return t.viewRangeToDOMRange(e)})),i=!this._preventSetSelection&&e;this._painter.refresh({anchor:r.anchor,focus:r.focus,ranges:o},n.domRootNode,i),this._observer.updateRangeChangeTime("selection"),i&&fXe.refreshSelection()}}}},{key:"_emitKeyboardEnterEvent",value:function(e,t,n){var r=t.requireService(p2e.ID);try{var o=e.ranges.map((function(e){return n.transformDOMRange(e)||null})),i=this._checkCursorEnterDirec(o,n.getViewSelection().ranges);if(i){var a=o[0].start.node;a&&r.requestAppearByNodeID(a.id),t.emitPluginEvent("selection_enterCardByKeyboard:".concat(a.id),i)}}catch(e){return null}}},{key:"_checkCursorEnterDirec",value:function(e,t){var n=e[0].start.node,r=t[0]?t[0].start.node:null,o=n.isCardNode()?n:null,i=r&&r.isCardNode()?r:null;if(o===i)return null;if(!i&&o){var a="";return r.id===n.parentNode.id&&(a=t[0].start.offset>n.offset?lM:aM),r.parentNode.id===n.parentNode.id&&(a=r.offset>n.offset?lM:aM),a}return null}},{key:"_tripleClick",value:function(e,t){var n,r=e.commonAncestorContainer;if(3===r.nodeType){var o=r.parentElement;if(this._clickTimes>=3){var i=Vy(o);if(!(null==i?void 0:i.hasCategory(qe.Text)))return;var a=i.closest(qe.Block);if(!a)return;var l=null===(n=Hy(a))||void 0===n?void 0:n.getMainDOMNode();if(!l)return;var u=document.createRange();u.selectNodeContents(l),this.kernel.execCommand("selection",{ranges:[t.transformDOMRange(u)],anchor:"start",focus:"end"})}}}}])}(Jg);function h4e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,p4e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function p4e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(p4e=function(){return!!e})()}Object.defineProperty(f4e,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:D2.pluginName}),Object.defineProperty(f4e,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[U2e]}),Object.defineProperty(f4e,"Service",{enumerable:!0,configurable:!0,writable:!0,value:c4e});var v4e=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=h4e(this,t),Object.defineProperty(n,"attrName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n.attrName="ne-".concat(e),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"translate",value:function(){return{type:fp.ATTR_NAME,name:this.attrName,value:"true"}}}])}(fp);function m4e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,g4e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function g4e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(g4e=function(){return!!e})()}var b4e=function(e){function t(){return(0,Ke.A)(this,t),m4e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this.kernel;e.registerAttrTranslator({sub:new v4e(J2.attr.sub),sup:new v4e(J2.attr.sup)});var n=e.getService(kRe.ID);n&&[CEe.sup,CEe.sub].forEach((function(e){var r=e.keys,o=e.name;n.registerHotKey(o,r,(function(e){e.stop(),t.execCommand(o)}))}))}}])}(Jg);Object.defineProperty(b4e,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:J2.pluginName});var y4e=40;function w4e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,A4e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function A4e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(A4e=function(){return!!e})()}var k4e=function(e){function t(e,n,r,o){var i;return(0,Ke.A)(this,t),i=w4e(this,t),Object.defineProperty(i,"_viewNode",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(i,"_tableDOMNode",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(i,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(i,"_innerDOMNode",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(i,"_colGroup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_columns",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(i,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"dispose",{enumerable:!0,configurable:!0,writable:!0,value:null}),i.id=e.id,i._colGroup=document.createElement("colgroup"),i._tableDOMNode.prepend(i._colGroup),i}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"fitWidth",get:function(){return!!window.ResizeObserver&&!!this._viewNode.attrs.fitWidth}},{key:"destroy",value:function(){var e;this._colGroup.remove(),null===(e=this.dispose)||void 0===e||e.dispose(),t.colWidthsMap.delete(this.id)}},{key:"update",value:function(){this._updateColumnNode(),this._updateColumnWidth()}},{key:"updateSizeChange",value:function(){var e;this.fitWidth&&(null===(e=this.dispose)||void 0===e||e.dispose(),this._updateFitWidth())}},{key:"_updateColumnNode",value:function(){var e=this._columns,t=this._viewNode.attrs.colCount;if(e.length!==t)if(e.length>t)e.splice(t,e.length-t).forEach((function(e){e.parentNode.removeChild(e)}));else for(var n=e.length;n<t;n++){var r=document.createElement("col");this._colGroup.appendChild(r),e.push(r)}}},{key:"_updateNormalWidth",value:function(){var e=this._columns,t=this._viewNode.attrs.colWidths,n=e.length-1,r=0;e.forEach((function(e,o){var i=t[o];o===n&&(i-=1),r+=i,e.getAttribute("width")!==i+""&&e.setAttribute("width",i+"")})),this._tableDOMNode.style.width=r+1+"px"}},{key:"_map",value:function(e,t){var n=e.reduce((function(e,t){return e+t}),0),r=t/n,o=0,i=e.map((function(e){var t=Math.max(y4e,Math.floor(e*r));return o+=t,t})),a=t-o;if(a>0)for(var l=i.length-1,u=100;a>0&&u-- >0;)l<0&&(l=i.length-1),i[l]+=1,a--,l--;else if(a<0)for(var c=i.length-1,s=100;a<0&&s-- >0;)c<0&&(c=i.length-1),i[c]<=y4e||(i[c]-=1,a++),c--;return i}},{key:"_updateFitWidth",value:function(){var e=this;this.dispose=ys((function(){return e._innerDOMNode.getBoundingClientRect()}),(function(n){var r=e._columns,o=e._viewNode.attrs.colWidths,i=e._map(o,n.width);t.colWidthsMap.set(e.id,i);var a=r.length-1,l=0;r.forEach((function(e,t){var n=i[t];t===a&&(n-=1),l+=n,e.getAttribute("width")!==n+""&&e.setAttribute("width",n+"")})),e._tableDOMNode.style.width=l+1+"px",e.emit("needUpdateUI")}))}},{key:"_updateColumnWidth",value:function(){var e;null===(e=this.dispose)||void 0===e||e.dispose(),this.fitWidth?(this._rootNode.style.width="100%",this._updateFitWidth()):(this._rootNode.style.width="",this._updateNormalWidth())}}],[{key:"getColWidths",value:function(e){if(!e.attrs.fitWidth)return e.attrs.colWidths;var n=e.id,r=t.colWidthsMap.get(n);return r||(r=e.attrs.colWidths,t.colWidthsMap.set(n,r)),r}}])}(it);Object.defineProperty(k4e,"colWidthsMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map});var _4e="none",C4e="column",N4e="row",O4e="cell",x4e="all",E4e=14;function D4e(e,t,n){var r=t.startColumn,o=t.endColumn,i=e.columnWidths,a=Math.min(r,o),l=Math.max(r,o),u=function(e,t){var n=0;if(t<n)return null;for(var r=0,o=e.length;r<o;r++){if(t<=n+e[r]/2)return{index:r,x:n};if(t<=(n+=e[r]))return{index:r+1,x:n-(r===o-1?3:0)}}return{index:e.length,x:n-3}}(i,n);if(!u)return null;var c=u.index;return c>=a&&c<=l+1?null:c===e.columnCount?u:e.isCrossColumn(c)?null:u}var P4e=function(){return(0,$e.A)((function e(t,n,r,o,i){(0,Ke.A)(this,e),Object.defineProperty(this,"_dragNode",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_tableNode",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"themeSelector",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"canStart",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"_callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._callbacks=Object.assign({onStart:function(){},onMove:function(){},onCancel:function(){},onCompleted:function(){}},r),this._init()}),[{key:"_init",value:function(){var e=this,t=this._dragNode;pc(this,t,"mousedown",(function(e){e.stopPropagation()}),!1);var n=null;pc(this,t,"dragstart",(function(t){if(!e.canStart())return t.preventDefault(),!1;t.dataTransfer.effectAllowed="move",t.dataTransfer.dropEffect="move";var r="";e._callbacks.onStart({setTipText:function(e){r=e||""}}),(n=document.createElement("div")).className="ne-ui-table-moving-tip ".concat(e.themeSelector()),n.innerText=r,document.body.appendChild(n),t.dataTransfer.setDragImage(n,0,0),e._run((function(){null==n||n.remove()}))}),!1)}},{key:"_run",value:function(e){var t=this,n={destroy:function(){e()}},r=this._tableNode,o=!1,i=-1,a=-1,l=function(e){e.preventDefault();var n=r.getBoundingClientRect(),o=e.clientX-n.x,l=e.clientY-n.y;o===i&&l===a||(i=o,a=l,t._handleMove(o,l))};pc(n,document,"dragover",l,!1),pc(n,document,"dragenter",l,!1),pc(n,document,"drop",(function(e){e.preventDefault();var n=r.getBoundingClientRect(),l=e.clientX-n.x,u=e.clientY-n.y;i=-1,a=-1,o=!0,t._handleDragEnd(l,u)}),!1),pc(n,document,"dragend",(function(e){e.preventDefault(),n.destroy(),o||(i=-1,a=-1,t._handleCancel())}),!1)}},{key:"_handleMove",value:function(e,t){this._callbacks.onMove(e,t)}},{key:"_handleDragEnd",value:function(e,t){this._callbacks.onCompleted(e,t)}},{key:"_handleCancel",value:function(){this._callbacks.onCancel()}},{key:"destroy",value:function(){this._dragNode=null,this._tableNode=null,this._callbacks=null}}])}(),R4e=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),null,[{key:"listen",value:function(e,t,n,r,o){return new P4e(e,t,n,r,o).destroy}}])}();function S4e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,T4e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function T4e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(T4e=function(){return!!e})()}var j4e=function(e){function t(e,n,r,o){var i;return(0,Ke.A)(this,t),i=S4e(this,t),Object.defineProperty(i,"_controller",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(i,"_tableContext",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(i,"_tableSelectionContext",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(i,"_index",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(i,"_colNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_barRootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_moveNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_abortMoveHandler",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_canDrag",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e;return!(null===(e=i._tableContext.option.tableUIInject)||void 0===e?void 0:e.canDragColumn)||i._tableContext.option.tableUIInject.canDragColumn(i._tableContext.tableModelElement,i._tableSelectionContext.value)}}),i._colNode=n.tableDOMNode.firstChild.children[o],i._barRootNode=Ly.createElement("div",{className:"ne-ui-table-column-bar","data-col":o}),i._moveNode=Ly.createElement("div",{className:"ne-ui-table-column-bar-move",draggable:"true"}),i._moveNode.innerHTML='<svg width="10px" height="6px" viewBox="0 0 10 6" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g id="文档中表格优化-V3" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="编辑态优化" transform="translate(-331.000000, -1372.000000)" fill="#FFFFFF" fill-rule="nonzero">\n            <g id="04" transform="translate(20.000000, 1280.000000)">\n                <g id="3.2" transform="translate(0.000000, 23.000000)">\n                    <g id="编组-8备份" transform="translate(0.000000, 37.000000)">\n                        <g id="激活" transform="translate(219.000000, 29.000000)">\n                            <g id="1" transform="translate(3.000000, 0.000000)">\n                                <path d="M90,7 C89.5,7 89,7.5 89,8 C89,8.5 89.5,9 90,9 C90.5,9 91,8.5 91,8 C91,7.5 90.5,7 90,7 L90,7 Z M98,5 C98.5,5 99,4.5 99,4 C99,3.5 98.5,3 98,3 C97.5,3 97,3.5 97,4 C97,4.5 97.5,5 98,5 Z M90,3 C89.5,3 89,3.5 89,4 C89,4.5 89.5,5 90,5 C90.5,5 91,4.5 91,4 C91,3.5 90.5,3 90,3 L90,3 Z M98,7 C97.5,7 97,7.5 97,8 C97,8.5 97.5,9 98,9 C98.5,9 99,8.5 99,8 C99,7.5 98.5,7 98,7 Z M94,3 C93.5,3 93,3.5 93,4 C93,4.5 93.5,5 94,5 C94.5,5 95,4.5 95,4 C95,3.5 94.5,3 94,3 Z M94,7 C93.5,7 93,7.5 93,8 C93,8.5 93.5,9 94,9 C94.5,9 95,8.5 95,8 C95,7.5 94.5,7 94,7 Z" id="形状"></path>\n                            </g>\n                        </g>\n                    </g>\n                </g>\n            </g>\n        </g>\n    </g>\n</svg>',i._barRootNode._columnIndex=o,i._barRootNode.appendChild(i._moveNode),i._initEvent(),i}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){this._barRootNode.remove()}},{key:"_initEvent",value:function(){this._initMove()}},{key:"_initMove",value:function(){var e=this._tableContext,t=this._tableSelectionContext,n=this._controller;this._abortMoveHandler=R4e.listen(this._moveNode,this._tableContext.tableDOMNode,{onStart:function(e){var n=t.startColumn,r=t.endColumn;e.setTipText(sc("正在移动{count}列",{count:Math.abs(r-n)+1}))},onMove:function(r){var o=D4e(e,t,r);n.emit("_columnMoveIndexChange",{index:o?o.index:null,x:o?o.x:null,completed:!1})},onCompleted:function(r){var o=D4e(e,t,r);n.emit("_columnMoveIndexChange",{index:o?o.index:null,x:o?o.x:null,completed:!0})},onCancel:function(){n.emit("cancelMove")}},this._tableContext.getThemeSelector,this._canDrag)}},{key:"index",get:function(){return this._index}},{key:"setSelectState",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e?(t=this._barRootNode.classList).add.apply(t,(0,ln.A)(["ne-ui-selected",n?"ne-ui-active":null].filter(Boolean))):this._barRootNode.classList.remove("ne-ui-selected","ne-ui-active")}},{key:"appendTo",value:function(e){e.appendChild(this._barRootNode)}},{key:"reset",value:function(){var e=this._tableContext.getColumnDisplayRect(this._index).width;this._barRootNode.style.width="".concat(e,"px")}},{key:"getCoordinate",value:function(){return this._barRootNode.getBoundingClientRect()}}])}(it);function I4e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=Math.max(t,0),o=r,i=e.length-1-r,a=!1,l=function(t){a||"function"!=typeof n||t<0||t>=e.length||(a=n(t))};l(r);for(var u=1;u<=Math.min(o,i);u++)l(r-u),l(r+u);if(o>i)for(var c=1;c<=o-i;c++)l(r-i-c);else if(o<i)for(var s=1;s<=i-o;s++)l(r+o+s)}var B4e=function(){return(0,$e.A)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};(0,Ke.A)(this,e),Object.defineProperty(this,"_domNode",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"canDrag",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"_handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]})}),[{key:"destroy",value:function(){var e=this;this._handlers.forEach((function(t){e._domNode.removeEventListener("mousedown",t,!1)}))}},{key:"listen",value:function(e){var t=this._domNode,n=this.canDrag,r=function(r){function o(t){t.stopPropagation(),t.preventDefault(),e("move",t)}n()&&(r.preventDefault(),e("start",r),t.ownerDocument.addEventListener("mousemove",o,!1),t.ownerDocument.addEventListener("mouseup",(function n(r){r.stopPropagation(),r.preventDefault(),t.ownerDocument.removeEventListener("mousemove",o,!1),t.ownerDocument.removeEventListener("mouseup",n,!1),e("end",r)}),!1))};t.addEventListener("mousedown",r,!1),this._handlers.push(r)}}])}();function M4e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,F4e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function F4e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(F4e=function(){return!!e})()}var L4e=function(e){function t(e,n,r,o){var i;return(0,Ke.A)(this,t),i=M4e(this,t),Object.defineProperty(i,"_tableContext",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(i,"_tableSelectionContext",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(i,"isControllerEnable",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(i,"movingLine",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(i,"_containerNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_containerNodeInner",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_containerNodeTextMask",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_deleteButton",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_addColumnButton",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_addColumnButtonTrack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_debounceShowAddColumnButton",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(i,"_bars",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(i,"_listener",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_dragSelector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_lastSelectInfo",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(i,"_isVisible",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(i,"_mouseX",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(i,"_addColType",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(i,"_addColIndex",{enumerable:!0,configurable:!0,writable:!0,value:-1}),i._containerNode=Ly.createElement("div",{className:"ne-ui-table-column-controller",contentEditable:!1}),i._containerNodeInner=Ly.createElement("div",{className:"ne-ui-table-column-controller-inner"}),i._containerNodeTextMask=Ly.createElement("div",{className:"ne-ui-table-column-controller-text-mask"}),i._deleteButton=Ly.createElement("div",{className:"ne-ui-table-column-delete-button"}),i._addColumnButton=Ly.createElement("div",{className:"ne-ui-table-column-add-button"}),i._addColumnButtonTrack=Ly.createElement("div",{className:"ne-ui-table-column-add-button-track"}),i._containerNode.appendChild(i._containerNodeInner),i._containerNode.appendChild(i._containerNodeTextMask),i._containerNodeInner.appendChild(i._deleteButton),i._containerNodeInner.appendChild(i._addColumnButtonTrack),i._addColumnButtonTrack.appendChild(i._addColumnButton),i._initCommonEvent(),!Us.mobile&&i._initEvent(),i}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"bars",get:function(){return this._bars}},{key:"destroy",value:function(){var e;this._containerNode.remove(),this.removeAllListeners(),null===(e=this._listener)||void 0===e||e.destroy()}},{key:"appendTo",value:function(e){e.appendChild(this._containerNode)}},{key:"_initCommonEvent",value:function(){var e=this;xc(this,this._tableContext,"change",(function(){e._refresh()})),xc(this,this._tableSelectionContext,"focus",(function(){e._refresh()})),xc(this,this._tableSelectionContext,"change",(function(){e._updateSelection()}))}},{key:"_initEvent",value:function(){var e=this,t=this._tableContext;this._initMovingEvent(),this._listener=new hd(t.renderer.id,this._containerNode),this._listener.on("mousedown",(function(t){if(t.target===e._containerNodeTextMask)return!0;t.preventDefault(),t.stopPropagation()})),this._dragSelector=new B4e(this._containerNode,(function(){var t;return!(null===(t=e._tableContext.option.tableUIInject)||void 0===t?void 0:t.canDragColumn)||e._tableContext.option.tableUIInject.canDragColumn(e._tableContext.tableModelElement,e._tableSelectionContext.value)})),pc(this,this._containerNode,"click",(function(n){if(n.target.classList.contains("ne-ui-table-column-bar")){n.stopPropagation();var r=parseInt(n.target.getAttribute("data-col"),10),o=t.findColumnBoundary(r);if(!n.shiftKey)return e.emit("selectChange",{isComposing:!1,start:o.min,end:o.max}),e._mouseX=n.clientX,void e._showAddColumnButton(!0);var i=e._tableSelectionContext.startColumn;o.min>=i?e.emit("selectChange",{isComposing:!1,start:i,end:o.max}):e.emit("selectChange",{isComposing:!1,start:i,end:o.min})}}),!1),pc(this,this._deleteButton,"mouseenter",(function(t){t.stopPropagation(),e._tableSelectionContext.highlight(!0,"column")}),!1),pc(this,this._deleteButton,"mousemove",(function(e){e.stopPropagation()}),!1),pc(this,this._deleteButton,"mouseleave",(function(){e._tableSelectionContext.highlight(!1)}),!1),pc(this,this._deleteButton,"mousedown",(function(e){e.preventDefault()}),!1),pc(this,this._deleteButton,"click",(function(t){t.preventDefault(),t.stopPropagation(),e._tableSelectionContext.highlight(!1),e._tableContext.execute("tableDeleteColumn")}),!1);var n=!1;pc(this,this._containerNode,"mouseenter",(function(e){n=!0}),!1),this._debounceShowAddColumnButton=Qm()((function(){n&&e._showAddColumnButton()}),30,{leading:!0}),pc(this,this._containerNode,"mousemove",(function(t){var n;e._mouseX=t.clientX,null===(n=e._debounceShowAddColumnButton)||void 0===n||n.call(e)}),!1),pc(this,this._containerNode,"mouseleave",(function(){n=!1,e._hideAddColumnButton()}),!1),pc(this,this._containerNodeTextMask,"click",(function(t){e._tableContext.isMaxView()||(e._tableSelectionContext.clear(),Od.setRangeToPoint(t.clientX,t.clientY))}),!1),pc(this,this._addColumnButton,"mousedown",(function(e){e.stopPropagation(),e.preventDefault()}),!1),pc(this,this._addColumnButton,"mousemove",(function(e){e.stopPropagation(),e.preventDefault()}),!1),pc(this,this._addColumnButton,"click",(function(t){t.stopPropagation();var n=e._addColumnButton.getAttribute("data-pos"),r=parseInt(e._addColumnButton.getAttribute("data-index"),10);r>=0&&("before"===n?e._tableContext.execute("tableInsertBeforeColumn",1,r):e._tableContext.execute("tableInsertAfterColumn",1,r),e._tableContext.fitWidth&&e._hideAddColumnButton())}),!1),xc(this,this,"resizeEnd",(function(t){var n=t.originalEvent;e._mouseX=n.clientX,e._tableSelectionContext.type===C4e&&e._showDeleteButton()}))}},{key:"_initMovingEvent",value:function(){var e=this;this.on("_columnMoveIndexChange",(function(t){var n,r=t.index,o=t.x,i=t.completed;if(!(null===(n=e._tableContext.tableUIInject)||void 0===n?void 0:n.canDragColumnTo)||e._tableContext.tableUIInject.canDragColumnTo(e._tableContext.tableModelElement,e._tableSelectionContext.value,r))return i?(e.movingLine.hide(),void e.emit("moveColumn",r)):void(null===r?e.movingLine.hide():e.movingLine.show({x:o}));e.movingLine.hide()})),this.on("cancelMove",(function(){e.movingLine.hide()}))}},{key:"_refresh",value:function(){this._generateBars(this._tableContext.columnCount).forEach((function(e,t){bt(e.index===t,"plugins/table/src/render/elements/lib/table-ui/column-controller.ts:411"),e.reset()}))}},{key:"_generateBars",value:function(e){var t=this._bars,n=t.length;if(e===n)return t;if(e<n){for(var r=e;r<n;r++)t[r].destroy();return t.splice(e,n-e),t}for(var o=n;o<e;o++){var i=new j4e(this,this._tableContext,this._tableSelectionContext,o);t.push(i),i.appendTo(this._containerNodeInner)}return t}},{key:"_updateSelection",value:function(){var e=this._tableSelectionContext,t=e.type,n=e.startColumn,r=e.endColumn;if(this._clearAllSelect(),this.isControllerEnable()){this._show();var o=Math.min(n,r),i=Math.max(n,r);if(this._lastSelectInfo={type:t,start:o,end:i},t===C4e?this._showDeleteButton():this._hideDeleteButton(),t===x4e)this._containerNode.classList.add("ne-ui-selected","ne-ui-active");else if(t===N4e)this._containerNode.classList.add("ne-ui-selected");else for(var a=o;a<=i;a++)this._bars[a].setSelectState(!0,t!==O4e)}else this._hide()}},{key:"_clearAllSelect",value:function(){if(this._lastSelectInfo){this._hideDeleteButton();var e=this._lastSelectInfo.type;e===x4e||e===N4e?this._containerNode.classList.remove("ne-ui-selected","ne-ui-active"):this._bars.forEach((function(e){e.setSelectState(!1)})),this._lastSelectInfo=null}}},{key:"_hide",value:function(){this._isVisible&&(this._isVisible=!1,this._containerNodeInner.style.display="none")}},{key:"_show",value:function(){this._isVisible||(this._isVisible=!0,this._containerNodeInner.style.display="flex")}},{key:"_getDeleteButtonPositionX",value:function(){var e=this._tableSelectionContext,t=e.startColumn,n=e.endColumn,r=Math.min(t,n),o=Math.max(t,n),i=this._tableSelectionContext.getColumnRect(r,o);return i.x+i.width/2}},{key:"_showDeleteButton",value:function(){var e;if((null===(e=this._tableContext.tableUIInject)||void 0===e?void 0:e.canDeleteColumn)&&!this._tableContext.tableUIInject.canDeleteColumn(this._tableContext.tableModelElement,this._tableSelectionContext.value))return this._hideDeleteButton();var t=this._getDeleteButtonPositionX();this._deleteButton.style.cssText="left: ".concat(t,"px; display: flex")}},{key:"_hideDeleteButton",value:function(){this._deleteButton.style.cssText=""}},{key:"_showAddColumnButton",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this._tableContext.tableDOMNode.getBoundingClientRect().x,o=this._bars,i=this._mouseX,a=null,l=-1;if(I4e(o,this._addColIndex,(function(n){var r=o[n].index,u=o[n].getCoordinate(),c=u.x,s=u.width;return i>=c&&i<c+s&&(l=r,e=c,t=s,a=i<c+s/2?"before":"after",!0)})),a&&a!==this._addColType||l>=0&&l!==this._addColIndex||n)return this._addColType=a,this._addColIndex=l,this._containerNode.classList.add("ne-add-column-btn-show"),this._showAddColumnButtonByPosition(this._addColType,this._addColIndex,e-r,t)}},{key:"_showAddColumnButtonByPosition",value:function(e,t,n,r){var o;if((null===(o=this._tableContext.tableUIInject)||void 0===o?void 0:o.canAddColumn)&&!this._tableContext.tableUIInject.canAddColumn(this._tableContext.tableModelElement,"after"===e?t+1:t))return this._hideAddColumnButton();var i=this._tableSelectionContext.type;this._addColumnButton.setAttribute("data-pos",e),this._addColumnButton.setAttribute("data-index",t+"");var a=0,l="",u="";if("before"===e)a=n-12,0===t&&(a=n,u="before"),l="left: ".concat(a,"px; display: flex;");else{a=n+r-12;var c=this._tableContext.tableInnerWrapNode,s=c.clientWidth+c.scrollLeft;n+r+12>=s&&s>=n+r-12&&(u="after",a=s>n+r?n+r-24:s-24),l="left: ".concat(a,"px; display: flex;")}if(i===C4e){var d=this._getDeleteButtonPositionX()-12,f="";a>d||a===d&&"before"===e?(l+="justify-content: flex-end;",f="margin-right: -".concat(Math.max(0,28-a+d),"px")):(a<d||a===d&&"after"===e)&&(l+="justify-content: flex-start;",f="margin-left: -".concat(Math.max(0,28-d+a),"px")),this._addColumnButton.style.cssText=f}this._addColumnButtonTrack.style.cssText=l,u?this._addColumnButtonTrack.classList.add("ne-ui-table-column-add-button-fixed-offset-".concat(u)):this._addColumnButtonTrack.classList.remove("ne-ui-table-column-add-button-fixed-offset-before","ne-ui-table-column-add-button-fixed-offset-after")}},{key:"_hideAddColumnButton",value:function(){this._mouseX=-1,this._addColType=null,this._addColIndex=-1,this._addColumnButtonTrack.style.cssText="",this._addColumnButton.style.cssText="",this._containerNode.classList.remove("ne-add-column-btn-show")}}])}(it);function U4e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,V4e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function V4e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(V4e=function(){return!!e})()}var H4e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=U4e(this,t,arguments),Object.defineProperty(e,"_rootNodeRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"_beforeRowRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"_afterRowRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"_beforeColRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"_afterColRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"_queueNoRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"canAddRow",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n;return!(null===(n=e.tableUIInject)||void 0===n?void 0:n.canAddRow)||e.tableUIInject.canAddRow(e.tableElement,t)}}),Object.defineProperty(e,"canAddColumn",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n;return!(null===(n=e.tableUIInject)||void 0===n?void 0:n.canAddColumn)||e.tableUIInject.canAddColumn(e.tableElement,t)}}),Object.defineProperty(e,"canDeleteRow",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t;return!(null===(t=e.tableUIInject)||void 0===t?void 0:t.canDeleteRow)||e.tableUIInject.canDeleteRow(e.tableElement,e.props.tableSelectionContext.value)}}),Object.defineProperty(e,"canDeleteColumn",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t;return!(null===(t=e.tableUIInject)||void 0===t?void 0:t.canDeleteColumn)||e.tableUIInject.canDeleteColumn(e.tableElement,e.props.tableSelectionContext.value)}}),Object.defineProperty(e,"_cut",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.props.onClose(),e.props.tableContext.execute("cut")}}),Object.defineProperty(e,"_copy",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.props.onClose(),e.props.tableContext.execute("copy")}}),Object.defineProperty(e,"_insertBeforeRow",{enumerable:!0,configurable:!0,writable:!0,value:function(t){e._insertRow("tableInsertBeforeRow",t)}}),Object.defineProperty(e,"_insertAfterRow",{enumerable:!0,configurable:!0,writable:!0,value:function(t){e._insertRow("tableInsertAfterRow",t)}}),Object.defineProperty(e,"_insertBeforeColumn",{enumerable:!0,configurable:!0,writable:!0,value:function(t){e._insertColumn("tableInsertBeforeColumn",t)}}),Object.defineProperty(e,"_insertAfterColumn",{enumerable:!0,configurable:!0,writable:!0,value:function(t){e._insertColumn("tableInsertAfterColumn",t)}}),Object.defineProperty(e,"_addQueueNO",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=e.props.tableContext;e.props.onClose(),t.execute("tableInsertBeforeColumn",1,0,!0)}}),Object.defineProperty(e,"_setQueueNo",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=e.props.tableContext;e.props.onClose(),n.execute("tableSetQueueNo",t),n.renderer.emitPluginEvent("userAction",{type:"cardToolbar",name:"tableSetQueueNo",source:"table"})}}),Object.defineProperty(e,"_deleteTable",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.props.onClose(),e.props.tableContext.execute("deleteTable")}}),Object.defineProperty(e,"_deleteColumn",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.props.onClose(),e.props.tableSelectionContext.highlight(!1),e.props.tableContext.execute("tableDeleteColumn")}}),Object.defineProperty(e,"_hoverInDeleteTable",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.props.tableSelectionContext.highlight(!0,"table")}}),Object.defineProperty(e,"_hoverOutDeleteTable",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.props.tableSelectionContext.highlight(!1)}}),Object.defineProperty(e,"_hoverInDeleteColumn",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.props.tableSelectionContext.highlight(!0,"column")}}),Object.defineProperty(e,"_hoverOutDeleteColumn",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.props.tableSelectionContext.highlight(!1)}}),Object.defineProperty(e,"_hoverInDeleteRow",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.props.tableSelectionContext.highlight(!0,"row")}}),Object.defineProperty(e,"_hoverOutDeleteRow",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.props.tableSelectionContext.highlight(!1)}}),Object.defineProperty(e,"_deleteRow",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.props.onClose(),e.props.tableSelectionContext.highlight(!1),e.props.tableContext.execute("tableDeleteRow")}}),Object.defineProperty(e,"_mergeCell",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.props.onClose(),e.props.tableContext.execute("tableMergeCell")}}),Object.defineProperty(e,"_unmergeCell",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.props.onClose(),e.props.tableContext.execute("tableUnmergeCell")}}),Object.defineProperty(e,"_clearTableContent",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.props.onClose(),e.props.tableContext.execute("tableClearContent")}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"tableElement",get:function(){return this.props.tableContext.tableModelElement}},{key:"tableUIInject",get:function(){return this.props.tableContext.tableUIInject}},{key:"componentDidMount",value:function(){var e=this;ud(this,this._rootNodeRef.current,"mousedown",(function(e){"INPUT"!==e.target.nodeName&&e.preventDefault()}),!1),sd(this,this.props.tableSelectionContext,"change",(function(){e.props.onClose()}))}},{key:"render",value:function(){return Gu().createElement(nR,{visible:!0,placement:["bottomRight","topRight"],targetNode:this.props.targetNode,point:this.props.point,boundaryNode:this.props.boundaryNode,adjustment:!0,onClose:this.props.onClose},Gu().createElement("div",{className:"ne-ui-table-context-menu",ref:this._rootNodeRef},this._renderClipboard(),this._renderRowColumn(),this._renderDelete(),this._renderMerge(),Gu().createElement("div",{className:"ne-ui-table-context-menu-item",onClick:this._clearTableContent},Gu().createElement("div",{className:"ne-ui-icon-box"}),Gu().createElement("span",{className:"ne-ui-table-context-menu-item-text"},sc("清除内容")))))}},{key:"_insertRow",value:function(e,t){(t=Number(t))>0&&Number.isInteger(t)&&(this.props.onClose(),this.props.tableContext.execute(e,t))}},{key:"_insertColumn",value:function(e,t){if((t=Number(t))>0&&Number.isInteger(t)){var n=this.props.tableContext;this.props.onClose(),n.execute(e,t)}}},{key:"_renderClipboard",value:function(){var e=this.props.tableSelectionContext.ranges.length>1;return e?[Gu().createElement("div",{key:"cut",className:"ne-ui-table-context-menu-item",onClick:e?this._cut:void 0},Gu().createElement("div",{className:"ne-ui-icon-box"}),Gu().createElement("span",{className:"ne-ui-table-context-menu-item-text"},sc("剪切")),Gu().createElement("span",{className:"ne-ui-table-context-menu-item-hotkey"},of(["cmd","X"]))),Gu().createElement("div",{key:"copy",className:"ne-ui-table-context-menu-item",onClick:e?this._copy:void 0},Gu().createElement("div",{className:"ne-ui-icon-box"}),Gu().createElement("span",{className:"ne-ui-table-context-menu-item-text"},sc("复制")),Gu().createElement("span",{className:"ne-ui-table-context-menu-item-hotkey"},of(["cmd","C"]))),Gu().createElement("div",{key:"copy-div",className:"ne-ui-table-context-menu-divider"})]:null}},{key:"_renderRowColumn",value:function(){var e=this.props.tableSelectionContext,t=e.startRow,n=e.endRow,r=e.startColumn,o=e.endColumn,i=(e.type,Math.abs(n-t)+1),a=Math.abs(o-r)+1,l=this.props.tableContext.tableQueueStartAndEnd(),u=[];this.canAddRow(t)&&u.push(this._createInputItem("up-arrow",i,sc("向上插入"),sc("行"),this._beforeRowRef,this._insertBeforeRow,of(["cmd","option","shift","↑"]))),this.canAddRow(n+1)&&u.push(this._createInputItem("down-arrow",i,sc("向下插入"),sc("行"),this._afterRowRef,this._insertAfterRow,of(["cmd","option","shift","↓"])));var c=[];this.canAddColumn(r)&&c.push(this._createInputItem("left-arrow",a,sc("向左插入"),sc("列"),this._beforeColRef,this._insertBeforeColumn,of(["cmd","option","shift","←"]))),this.canAddColumn(o)&&c.push(this._createInputItem("right-arrow",a,sc("向右插入"),sc("列"),this._afterColRef,this._insertAfterColumn,of(["cmd","option","shift","→"])));var s=[].concat(u,c);return 0===r&&0===o&&s.push(this._createInputItem("insertion-order",t+1,sc("从第"),sc("行起自动编号"),this._queueNoRef,this._setQueueNo,void 0,"add-queue-first-col")),l||this.canAddColumn(0)&&s.push(Gu().createElement("div",{key:"add-queue-table",className:"ne-ui-table-context-menu-item",onClick:this._addQueueNO,"data-testid":"add-queue-table"},Gu().createElement("div",{className:"ne-ui-icon-box"},Gu().createElement(SC,{type:"insertion-order"})),Gu().createElement("span",{className:"ne-ui-table-context-menu-item-text"},sc("插入序号列到最左侧")))),s.length&&s.push(Gu().createElement("div",{key:"insert-div",className:"ne-ui-table-context-menu-divider"})),s}},{key:"_renderDelete",value:function(){var e=this.props,t=e.tableSelectionContext,n=e.tableContext,r=t.type,o=n.isMaxView()?null:Gu().createElement("div",{key:"delete-table",className:"ne-ui-table-context-menu-item",onMouseOver:this._hoverInDeleteTable,onMouseOut:this._hoverOutDeleteTable,onClick:this._deleteTable},Gu().createElement("div",{className:"ne-ui-icon-box"}),Gu().createElement("span",{className:"ne-ui-table-context-menu-item-text"},sc("删除表格"))),i=this.canDeleteColumn()?Gu().createElement("div",{key:"delete-column",className:"ne-ui-table-context-menu-item",onMouseOver:this._hoverInDeleteColumn,onMouseOut:this._hoverOutDeleteColumn,onClick:this._deleteColumn},Gu().createElement("div",{className:"ne-ui-icon-box"}),Gu().createElement("span",{className:"ne-ui-table-context-menu-item-text"},sc("删除所选列"))):null,a=this.canDeleteRow()?Gu().createElement("div",{key:"delete-row",className:"ne-ui-table-context-menu-item",onMouseOver:this._hoverInDeleteRow,onMouseOut:this._hoverOutDeleteRow,onClick:this._deleteRow},Gu().createElement("div",{className:"ne-ui-icon-box"}),Gu().createElement("span",{className:"ne-ui-table-context-menu-item-text"},sc("删除所选行"))):null;if(r===x4e)return[o];if(r===C4e)return[i,o];if(r===N4e)return[a,o];var l=[a,i,o].filter(Boolean);return l.length&&l.push(Gu().createElement("div",{key:"delete-div",className:"ne-ui-table-context-menu-divider"})),l}},{key:"_renderMerge",value:function(){var e,t=this.props.tableContext,n=t.canMergeCell,r=t.canUnmergeCell;return n||r?(n?e=Gu().createElement("div",{key:"merge-cell",className:"ne-ui-table-context-menu-item",onClick:this._mergeCell},Gu().createElement("div",{className:"ne-ui-icon-box"}),Gu().createElement("span",{className:"ne-ui-table-context-menu-item-text"},sc("合并单元格"))):(bt(r,"plugins/table/src/render/elements/lib/table-ui/context-menu/component/context-menu-view.tsx:537"),e=Gu().createElement("div",{key:"unmerge-cell",className:"ne-ui-table-context-menu-item",onClick:this._unmergeCell},Gu().createElement("div",{className:"ne-ui-icon-box"}),Gu().createElement("span",{className:"ne-ui-table-context-menu-item-text"},sc("拆分单元格")))),[e,Gu().createElement("div",{key:"cell-merge-divider",className:"ne-ui-table-context-menu-divider"})]):null}},{key:"_createInputItem",value:function(e,t,n,r,o,i,a,l){var u=null,c=Gu().createElement("div",Object.assign({key:e,className:"ne-ui-table-context-menu-item ne-ui-input-item",onMouseDown:function(e){e.stopPropagation(),u=e.target},onClick:function(e){"INPUT"!==e.target.nodeName&&(u&&"INPUT"===u.nodeName||i(parseInt(o.current.input.value,10)))}},l?{"data-testid":l}:{}),Gu().createElement("div",{className:"ne-ui-icon-box"},Gu().createElement(SC,{type:e})),Gu().createElement("span",{className:"ne-ui-table-context-menu-item-text"},n,Gu().createElement(KP,{type:"text",onKeyDown:function(e){!Ks.isEnter(e)||e.shiftKey||e.altKey||e.metaKey||e.ctrlKey||i(parseInt(o.current.input.value,10))},ref:o,defaultValue:t,className:"ne-ui-table-context-menu-input"}),r));return a?Gu().createElement(Qx,{overlayClassName:"ne-ui-table-context-menu-tooltip-overlay ".concat(this.props.className),key:e,placement:"right",title:a},c):c}}])}(Yu.Component);function z4e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,W4e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function W4e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(W4e=function(){return!!e})()}Object.defineProperty(H4e,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{onClose:function(){}}});var q4e=function(e){function t(e,n,r,o,i){var a;return(0,Ke.A)(this,t),a=z4e(this,t),Object.defineProperty(a,"_tableContext",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(a,"_tableSelectionContext",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(a,"_tableWrapNode",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(a,"_overlayNode",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(a,"_scrollNode",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(a,"_overlay",{enumerable:!0,configurable:!0,writable:!0,value:null}),a._init(),a}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){this._overlay&&this._overlay.cancel()}},{key:"_init",value:function(){var e=this;Us.mobile?cd(this,this._tableWrapNode,(function(t){var n=t.touches[0];setTimeout((function(){e._openContextMenu(n.clientX,n.clientY)}),100)}),1e3):pc(this,this._tableWrapNode,"contextmenu",(function(t){gc(t.target,'[data-event-boundary="overlay"]')||(t.stopPropagation(),t.preventDefault(),e._tableSelectionContext.isFocus()&&setTimeout((function(){e._openContextMenu(t.clientX,t.clientY)}),100))}),!1)}},{key:"_openContextMenu",value:function(e,t){var n,r,o,i,a=this;this._overlay&&this._overlay.cancel(),this._overlay=aR.open({containerNode:this._overlayNode,targetNode:this._tableWrapNode,reactComponent:Gu().createElement(H4e,{className:null===(i=null===(o=null===(r=null===(n=this._tableContext)||void 0===n?void 0:n.renderer)||void 0===r?void 0:r.theme)||void 0===o?void 0:o.getThemeSelector)||void 0===i?void 0:i.call(o),point:{x:e,y:t},tableContext:this._tableContext,tableSelectionContext:this._tableSelectionContext,targetNode:this._tableWrapNode,boundaryNode:this._scrollNode}),closeCallback:function(){a._overlay=null}})}}])}(it);function $4e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,K4e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function K4e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(K4e=function(){return!!e})()}var Y4e=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=$4e(this,t),Object.defineProperty(r,"_tableContext",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(r,"_tableSelectionContext",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(r,"_pointNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_pointNodeWrapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_isVisible",{enumerable:!0,configurable:!0,writable:!0,value:!1}),r._pointNode=Ly.createElement("div",{className:"ne-ui-table-control-point"}),r._pointNodeWrapper=Ly.createElement("div",{className:"ne-ui-table-control-point-wrapper"}),r._pointNodeWrapper.appendChild(r._pointNode),r._initEvent(),r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"_isEnable",get:function(){return this._tableSelectionContext.isFocus()&&!this._tableContext.headDisabled}},{key:"destroy",value:function(){this.removeAllListeners()}},{key:"_initEvent",value:function(){var e=this;pc(this,this._pointNode,"click",(function(){e.emit("click")}),!1),xc(this,this._tableSelectionContext,"change",(function(){e._updateState()}))}},{key:"appendTo",value:function(e){e.appendChild(this._pointNodeWrapper)}},{key:"_updateState",value:function(){var e=this._tableSelectionContext.type;this._isEnable?(this._show(),e===x4e?this._pointNode.classList.add("ne-ui-active"):this._pointNode.classList.remove("ne-ui-active")):this._hide()}},{key:"_hide",value:function(){this._isVisible&&(this._isVisible=!1,this._pointNodeWrapper.style.display="none")}},{key:"_show",value:function(){this._isVisible||(this._isVisible=!0,this._pointNodeWrapper.style.display="block")}}])}(it);function G4e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,J4e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function J4e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(J4e=function(){return!!e})()}var X4e="ne-ui-table-resize-mask-last-col",Q4e=function(e){function t(e,n,r,o,i,a,l){var u;return(0,Ke.A)(this,t),u=G4e(this,t),Object.defineProperty(u,"_tableContext",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(u,"_tableSelectionContext",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(u,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(u,"_rowController",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(u,"_columnController",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(u,"movingLineRow",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(u,"movingLineColumn",{enumerable:!0,configurable:!0,writable:!0,value:l}),Object.defineProperty(u,"_maskNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(u,"_activeCellNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(u,"_cellInfo",{enumerable:!0,configurable:!0,writable:!0,value:{rowIndex:-1,colIndex:-1,rowSpan:1,colSpan:1}}),Object.defineProperty(u,"_listener",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(u,"_isResizing",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(u,"_isVLineVisible",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(u,"_isHLineVisible",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(u,"_topResizeSelector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(u,"_rightResizeSelector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(u,"_bottomResizeSelector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(u,"_leftResizeSelector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),u._maskNode=Ly.createElement("div",{className:"ne-ui-table-resize-mask",contentEditable:"false"}),u._maskNode.top=Ly.createElement("div",{className:"ne-ui-table-resize-top"}),u._maskNode.right=Ly.createElement("div",{className:"ne-ui-table-resize-right"}),u._maskNode.bottom=Ly.createElement("div",{className:"ne-ui-table-resize-bottom"}),u._maskNode.left=Ly.createElement("div",{className:"ne-ui-table-resize-left"}),u._maskNode.appendChild(u._maskNode.top),u._maskNode.appendChild(u._maskNode.right),u._maskNode.appendChild(u._maskNode.bottom),u._maskNode.appendChild(u._maskNode.left),u._initEvent(),u}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){this._activeCellNode=null,this._topResizeSelector.destroy(),this._rightResizeSelector.destroy(),this._bottomResizeSelector.destroy(),this._leftResizeSelector.destroy(),this.removeAllListeners()}},{key:"appendTo",value:function(e){e.appendChild(this._maskNode)}},{key:"_initEvent",value:function(){var e=this,t=this._tableContext,n=t.tableDOMNode,r=t.tableInnerWrapNode;pc(this,n,"mousemove",(function(t){var n=gc(t.target,"td");if(!e._isResizing&&n&&n!==e._activeCellNode)e._activeCellNode=n,e._refreshMask();else if(!n){if(t.button||t.buttons||t.which)return;e._resetMask()}}),!1),pc(this,this._maskNode.top,"mousemove",(function(){var t=e._cellInfo.rowIndex;e._showHLine(t-1)})),pc(this,this._maskNode.right,"mousemove",(function(){var t=e._cellInfo,n=t.colIndex,r=t.colSpan;e._showVLine(n+r-1)})),pc(this,this._maskNode.bottom,"mousemove",(function(){var t=e._cellInfo,n=t.rowIndex,r=t.rowSpan;e._showHLine(n+r-1)})),pc(this,this._maskNode.left,"mousemove",(function(){var t=e._cellInfo.colIndex;e._showVLine(t-1)})),pc(this,this._maskNode,"mouseout",(function(){e._hideVLine(),e._hideHLine()})),this._tableContext.on("change",(function(){e._refreshMask()})),pc(this,r,"scroll",(function(){e._refreshMask()}),{passive:!0}),xc(this,this._tableSelectionContext,"focus",(function(){e._refreshMask()})),xc(this,this._tableSelectionContext,"blur",(function(){e._refreshMask()})),this.renderer.on("contentchange",(function(){e._refreshMask()})),this._listener=new hd(this.renderer.id,this._maskNode),this._listener.on("mousedown",(function(e){e.preventDefault(),e.stopPropagation()})),this._initResizer()}},{key:"_initResizer",value:function(){var e=this,t=function(t){var n=e._columnController,r=e._tableContext.tableInnerWrapNode,o=0,i=0,a=0,l=!1;return function(u,c){var s,d=e._cellInfo,f=d.colIndex,h=d.colSpan,p=d.lastCol;if(s=t?f-1:f+h-1,"start"===u)e._isResizing=!0,l=!1,o=0,e._tableContext.tableWidth,i=+e._tableContext.tableDOMNode.firstElementChild.children[s].width+(p?1:0),o=c.clientX,n.emit("resizeStart",s),r.parentNode.classList.add("ne-ui-table-column-resizing"),e._tableContext.trySetColumnWidth(s,y4e).width===i&&(l=!0);else if("move"===u){var v=c.clientX-o;e._updateVLinePosition(i,v,l,s)}else{bt("end"===u,"plugins/table/src/render/elements/lib/table-ui/resize-mask.ts:245"),l=!1;var m=c.clientX-o,g=Math.max(i+m,y4e),b=e._tableContext.trySetColumnWidth(s,g);a=b.width,e._tableContext.emit("_requestResetCols",b.rows),e._isResizing=!1,a>=y4e&&e._resizeWidth(a,s),e._hideVLine(),r.parentNode.classList.remove("ne-ui-table-column-resizing"),n.emit("resizeEnd",{index:s,originalEvent:c}),o=0,i=0,a=0}}},n=function(t){var n=e._rowController,r=e._tableContext.tableInnerWrapNode,o=0,i=0,a=0,l=!1;return function(u,c){var s,d=e._cellInfo,f=d.rowIndex,h=d.rowSpan;if(s=t?f-1:f+h-1,"start"===u)e._isResizing=!0,l=!1,n.emit("resizeStart",s),o=c.clientY,a=0,i=e._tableContext.getRowDisplayRect(s).height,r.parentNode.classList.add("ne-ui-table-row-resizing"),e._tableContext.trySetRowHeight(s,33)===i&&(l=!0);else if("move"===u)e._updateHLinePosition(i,c.clientY-o,l);else{bt("end"===u,"plugins/table/src/render/elements/lib/table-ui/resize-mask.ts:320"),e._isResizing=!1,l=!1;var p=Math.max(i+c.clientY-o,33);(a=e._tableContext.trySetRowHeight(s,p))>=33&&e._resizeHeight(a,s),e._hideHLine(),r.parentNode.classList.remove("ne-ui-table-row-resizing"),n.emit("resizeEnd",{index:s,originalEvent:c}),o=0,i=0,a=0}}};this._rightResizeSelector=new B4e(this._maskNode.right),this._rightResizeSelector.listen(t(!1)),this._leftResizeSelector=new B4e(this._maskNode.left),this._leftResizeSelector.listen(t(!0)),this._bottomResizeSelector=new B4e(this._maskNode.bottom),this._bottomResizeSelector.listen(n(!1)),this._topResizeSelector=new B4e(this._maskNode.top),this._topResizeSelector.listen(n(!0))}},{key:"_showVLine",value:function(e){if(!this._isResizing&&!this._isVLineVisible){var t=this._tableContext,n=t.tableInnerWrapNode,r=t.colCount,o=n.getBoundingClientRect().x,i=this._tableContext.getColumnDisplayRect(e),a=i.x+i.width+n.scrollLeft-o-1+(e===r-1?-2:0);this.movingLineColumn.show({x:a}),this._isVLineVisible=!0}}},{key:"_hideVLine",value:function(){!this._isResizing&&this._isVLineVisible&&(this.movingLineColumn.hide(),this._isVLineVisible=!1)}},{key:"_updateVLinePosition",value:function(e,t,n,r){var o=this,i=this._tableContext.colCount,a=n?e:y4e,l=Math.max(e+t,a)-e+(r===i-1?1:0);requestAnimationFrame((function(){o.movingLineColumn.node.style.transform="translateX(".concat(l,"px)"),o._refreshMask()}))}},{key:"_resizeWidth",value:function(e,t){this._columnController.emit("columnWidthChange",{index:t,width:e})}},{key:"_showHLine",value:function(e){if(!this._isResizing&&!this._isHLineVisible){var t=this._tableContext.tableDOMNode.getBoundingClientRect().y,n=this._tableContext.getRowDisplayRect(e),r=n.y+n.height-t;this.movingLineRow.show({y:r}),this._isHLineVisible=!0}}},{key:"_hideHLine",value:function(){!this._isResizing&&this._isHLineVisible&&(this.movingLineRow.hide(),this._isHLineVisible=!1)}},{key:"_updateHLinePosition",value:function(e,t,n){var r=this,o=n?e:33,i=Math.max(e+t,o);t=i-e-(this._cellInfo.lastRow?1:0),requestAnimationFrame((function(){r.movingLineRow.node.style.transform="translateY(".concat(t,"px)"),r._refreshMask()}))}},{key:"_resizeHeight",value:function(e,t){this._rowController.emit("rowHeightChange",{index:t,height:Math.max(e,33)})}},{key:"_refreshMask",value:function(){var e=this;this._activeCellNode&&this._activeCellNode.parentNode?requestAnimationFrame((function(){var t=e._tableContext,n=t.tableInnerWrapNode,r=t.colCount,o=t.rowCount,i=e._activeCellNode;if(n.isConnected&&(null==i?void 0:i.isConnected)){var a=n.getBoundingClientRect(),l=a.x,u=a.y,c=e._activeCellNode.getBoundingClientRect(),s=c.height,d=c.width,f=c.x,h=c.y,p=parseInt(i.getAttribute("data-col"),10),v=i.parentNode,m=Array.from(v.parentNode.children).indexOf(v),g=parseInt(i.getAttribute("rowspan")||"1",10),b=parseInt(i.getAttribute("colspan")||"1",10);e._cellInfo={colIndex:p,rowIndex:m,rowSpan:g,colSpan:b,firstCol:0===p,firstRow:0===m,lastCol:b?p+b-1==r-1:p===r-1,lastRow:m===o-1},e._setMaskStyle({height:s+6+1,width:d+6+1,left:n.scrollLeft+f-l-3,top:h-u-3})}})):this._maskNode.style.display="none"}},{key:"_setMaskStyle",value:function(e){var t=e.height,n=e.width,r=e.left,o=e.top;this._cellInfo.firstCol?(n-=3,r+=3,this._maskNode.left.style.display="none"):this._maskNode.left.style.display="block",this._cellInfo.lastCol?(n-=4,this._maskNode.classList.add(X4e)):this._maskNode.classList.remove(X4e),this._cellInfo.firstRow?(t-=4,o+=4,this._maskNode.top.style.display="none"):this._maskNode.top.style.display="block",this._maskNode.style.height="".concat(t,"px"),this._maskNode.style.width="".concat(n,"px"),this._maskNode.style.left="".concat(r,"px"),this._maskNode.style.top="".concat(o,"px"),this._maskNode.style.display=""}},{key:"_resetMask",value:function(){this._activeCellNode=null,this._cellInfo={rowIndex:-1,colIndex:-1,rowSpan:1,colSpan:1},this._maskNode.style.width="0",this._maskNode.style.height="0",this._maskNode.style.left="auto",this._maskNode.style.top="auto",this._maskNode.left.style.display="block",this._maskNode.top.style.display="block",this._maskNode.classList.remove(X4e)}}])}(it);function Z4e(e,t,n){var r=t.startRow,o=t.endRow,i=e.rowHeights,a=Math.min(r,o),l=Math.max(r,o),u=function(e,t){var n=0;if(t<n)return null;for(var r=0,o=e.length;r<o;r++){if(t<=n+e[r]/2)return{index:r,y:n};if(t<=(n+=e[r]))return{index:r+1,y:n-(r===o-1?3:0)}}return{index:e.length,y:n-3}}(i,n);if(!u)return null;var c=u.index;return c>=a&&c<=l+1?null:c===e.rowCount?u:e.isCrossRow(c)?null:u}var e5e=function(){return(0,$e.A)((function e(t,n,r,o){var i=this;(0,Ke.A)(this,e),Object.defineProperty(this,"_controller",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_tableContext",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"_tableSelectionContext",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"_index",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"_rowNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_barRootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_moveNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_height",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"_canDrag",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e;return!(null===(e=i._tableContext.option.tableUIInject)||void 0===e?void 0:e.canDragRow)||i._tableContext.option.tableUIInject.canDragRow(i._tableContext.tableModelElement,i._tableSelectionContext.value)}}),this._rowNode=n.tableDOMNode.tBodies[0].rows[o],this._barRootNode=Ly.createElement("div",{className:"ne-ui-table-row-bar","data-row":o}),this._moveNode=Ly.createElement("div",{className:"ne-ui-table-row-bar-move",draggable:"true"}),this._moveNode.innerHTML='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="6px" height="10px" viewBox="0 0 6 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g id="文档中表格优化-V3" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="编辑态优化" transform="translate(-747.000000, -1699.000000)" fill="#FFFFFF" fill-rule="nonzero">\n            <g id="05" transform="translate(20.000000, 1560.000000)">\n                <g id="编组-5" transform="translate(700.000000, 45.000000)">\n                    <g id="激活" transform="translate(24.000000, 44.000000)">\n                        <g id="1备份" transform="translate(0.000000, 37.000000)">\n                            <path d="M2,19 C1.5,19 1,19.5 1,20 C1,20.5 1.5,21 2,21 C2.5,21 3,20.5 3,20 C3,19.5 2.5,19 2,19 L2,19 Z M9.99999999,17 C10.5,17 11,16.5 11,16 C11,15.5 10.5,15 9.99999999,15 C9.49999999,15 8.99999999,15.5 8.99999999,16 C8.99999999,16.5 9.49999999,17 9.99999999,17 Z M2,15 C1.5,15 1,15.5 1,16 C1,16.5 1.5,17 2,17 C2.5,17 3,16.5 3,16 C3,15.5 2.5,15 2,15 L2,15 Z M9.99999999,19 C9.49999999,19 8.99999999,19.5 8.99999999,20 C8.99999999,20.5 9.49999999,21 9.99999999,21 C10.5,21 11,20.5 11,20 C11,19.5 10.5,19 9.99999999,19 Z M6,15 C5.5,15 5,15.5 5,16 C5,16.5 5.5,17 6,17 C6.5,17 7,16.5 7,16 C7,15.5 6.5,15 6,15 Z M6,19 C5.5,19 5,19.5 5,20 C5,20.5 5.5,21 6,21 C6.5,21 7,20.5 7,20 C7,19.5 6.5,19 6,19 Z" id="形状" transform="translate(6.000000, 18.000000) rotate(90.000000) translate(-6.000000, -18.000000) "></path>\n                        </g>\n                    </g>\n                </g>\n            </g>\n        </g>\n    </g>\n</svg>',this._barRootNode.appendChild(this._moveNode),this._barRootNode._rowIndex=o,this._initEvent()}),[{key:"destroy",value:function(){this._barRootNode.remove()}},{key:"_initEvent",value:function(){this._initMove()}},{key:"_initMove",value:function(){var e=this._tableContext,t=this._tableSelectionContext,n=this._controller;R4e.listen(this._moveNode,this._tableContext.tableDOMNode,{onStart:function(e){var n=t.startRow,r=t.endRow;e.setTipText(sc("正在移动{count}行",{count:Math.abs(r-n)+1}))},onMove:function(r,o){var i=Z4e(e,t,o);n.emit("_rowMoveIndexChange",{index:i?i.index:null,y:i?i.y:null,completed:!1})},onCompleted:function(r,o){var i=Z4e(e,t,o);n.emit("_rowMoveIndexChange",{index:i?i.index:null,y:i?i.y:null,completed:!0})},onCancel:function(){n.emit("_cancelMove")}},this._tableContext.getThemeSelector,this._canDrag)}},{key:"index",get:function(){return this._index}},{key:"appendTo",value:function(e){e.appendChild(this._barRootNode)}},{key:"forceSetDOMHeight",value:function(e){this._barRootNode.style.height=e+"px"}},{key:"reset",value:function(){var e=this._tableContext.getRowDisplayRect(this._index).height;this._height=e,this._barRootNode.style.height="".concat(e,"px"),this._rowNode=this._tableContext.tableDOMNode.tBodies[0].rows[this._index]}},{key:"setSelectState",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e?(t=this._barRootNode.classList).add.apply(t,(0,ln.A)(["ne-ui-selected",n?"ne-ui-active":null].filter(Boolean))):this._barRootNode.classList.remove("ne-ui-selected","ne-ui-active")}},{key:"getCoordinate",value:function(){return this._barRootNode.getBoundingClientRect()}}])}();function t5e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,n5e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function n5e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(n5e=function(){return!!e})()}var r5e=function(e){function t(e,n,r,o){var i;return(0,Ke.A)(this,t),i=t5e(this,t),Object.defineProperty(i,"_tableContext",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(i,"_tableSelectionContext",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(i,"isControllerEnable",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(i,"movingLine",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(i,"_containerNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_containerNodeInner",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_deleteButton",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_addRowButton",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_bars",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(i,"_lastSelectInfo",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(i,"_isVisible",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(i,"_resizing",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(i,"_mouseY",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(i,"_addRowType",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(i,"_addRowIndex",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(i,"_firstRowBeforeTimer",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(i,"_listener",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_resizeObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_debounceShowAddRowButton",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),i._containerNode=Ly.createElement("div",{className:"ne-ui-table-row-controller"}),i._containerNodeInner=Ly.createElement("div",{className:"ne-ui-table-row-controller-inner"}),i._deleteButton=Ly.createElement("div",{className:"ne-ui-table-row-delete-button"}),i._addRowButton=Ly.createElement("div",{className:"ne-ui-table-row-add-button"}),i._containerNode.appendChild(i._containerNodeInner),i._containerNodeInner.appendChild(i._deleteButton),i._containerNodeInner.appendChild(i._addRowButton),i._initCommonEvent(),!Us.mobile&&i._initEvent(),i._initResizeObserver(),i}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"bars",get:function(){return this._bars}},{key:"destroy",value:function(){this._resizeObserver.disconnect(),this.removeAllListeners(),this._containerNode.remove()}},{key:"appendTo",value:function(e){e.appendChild(this._containerNode)}},{key:"_initCommonEvent",value:function(){var e=this;xc(this,this._tableContext,"change",(function(){e._refresh()})),xc(this,this._tableSelectionContext,"focus",(function(){e._refresh()})),xc(this,this._tableSelectionContext,"change",(function(){setTimeout((function(){e._updateSelection()}),0)}))}},{key:"_initEvent",value:function(){var e=this,t=this._tableContext;this._initMovingEvent(),xc(this,this._tableContext,"_requestResetCols",(function(t){bt(t.length===e._bars.length,"plugins/table/src/render/elements/lib/table-ui/row-controller.ts:123"),e._bars.forEach((function(n,r){n.forceSetDOMHeight(t[r]+(r===e._bars.length-1?-1:0))}))})),this._listener=new B4e(this._containerNode,(function(){var t;return!(null===(t=e._tableContext.option.tableUIInject)||void 0===t?void 0:t.canDragRow)||e._tableContext.option.tableUIInject.canDragRow(e._tableContext.tableModelElement,e._tableSelectionContext.value)})),pc(this,this._containerNode,"click",(function(n){if(n.target.classList.contains("ne-ui-table-row-bar")){n.stopPropagation();var r=n.target._rowIndex,o=t.findRowBoundary(r);if(n.shiftKey){var i=e._tableSelectionContext.startRow;o.min>=i?e.emit("selectChange",{isComposing:!1,start:i,end:o.max}):e.emit("selectChange",{isComposing:!1,start:i,end:o.min})}else e.emit("selectChange",{isComposing:!1,start:o.min,end:o.max})}}),!1),pc(this,this._deleteButton,"mouseenter",(function(t){t.stopPropagation(),e._tableSelectionContext.highlight(!0,"row")}),!1),pc(this,this._deleteButton,"mousemove",(function(e){e.stopPropagation()}),!1),pc(this,this._deleteButton,"mouseleave",(function(){e._tableSelectionContext.highlight(!1)}),!1),pc(this,this._deleteButton,"mousedown",(function(t){t.preventDefault(),e._hideAddRowButton()}),!1),pc(this,this._deleteButton,"click",(function(t){t.preventDefault(),e._tableSelectionContext.highlight(!1),e._tableContext.execute("tableDeleteRow")}),!1);var n=!1;pc(this,this._containerNode,"mouseenter",(function(e){n=!0}),!1),this._debounceShowAddRowButton=Qm()((function(){n&&e._showAddRowButton()}),30,{leading:!0}),pc(this,this._containerNode,"mousemove",(function(t){e._mouseY=t.clientY,e._debounceShowAddRowButton()}),!1),pc(this,this._containerNode,"mouseleave",(function(){n=!1,e._hideAddRowButton()}),!1),pc(this,this._addRowButton,"click",(function(){var t=e._addRowButton.getAttribute("data-pos"),n=parseInt(e._addRowButton.getAttribute("data-index"),10);n>=0&&("before"===t?e._tableContext.execute("tableInsertBeforeRow",1,n):e._tableContext.execute("tableInsertAfterRow",1,n))}),!1),pc(this,this._addRowButton,"mouseenter",(function(){var t=e._tableContext.tableDOMNode.getBoundingClientRect(),n=e._addRowButton.getBoundingClientRect().y-t.y+12,r=e._addRowButton.getAttribute("data-index");parseInt(r,10)===e._bars.length-1&&(n-=1),e.movingLine.show({y:n})}),!1),pc(this,this._addRowButton,"mouseleave",(function(){e.movingLine.hide()}),!1),xc(this,this,"resizeStart",(function(){e._resizing=!0,e._hideAddRowButton()})),xc(this,this,"resizeEnd",(function(){e._resizing=!1,e._tableSelectionContext.type===N4e&&e._showDeleteButton(),e._showAddRowButton()}))}},{key:"_initResizeObserver",value:function(){var e=this,t=-1,n=new ResizeObserver((function(n){var r,o;if(e._resizing)t=-1;else if(null===(o=null===(r=e._tableContext)||void 0===r?void 0:r.tableDOMNode)||void 0===o?void 0:o.isConnected){bt(1===n.length,"plugins/table/src/render/elements/lib/table-ui/row-controller.ts:374");var i=n[0].contentRect;-1!==t?i.height!==t&&(t=i.height,requestAnimationFrame((function(){e._refresh()}))):t=i.height}}));n.observe(this._tableContext.tableDOMNode),this._resizeObserver=n}},{key:"_initMovingEvent",value:function(){var e=this;this.on("_rowMoveIndexChange",(function(t){var n,r=t.index,o=t.y,i=t.completed;if(!(null===(n=e._tableContext.tableUIInject)||void 0===n?void 0:n.canDragRowTo)||e._tableContext.tableUIInject.canDragRowTo(e._tableContext.tableModelElement,e._tableSelectionContext.value,r))return i?(e.movingLine.hide(),void e.emit("moveRow",r)):void(null===r?e.movingLine.hide():e.movingLine.show({y:o}));e.movingLine.hide()})),this.on("_cancelMove",(function(){e.movingLine.hide()}))}},{key:"_refresh",value:function(){this._generateBars(this._tableContext.rowCount).forEach((function(e,t){bt(e.index===t,"plugins/table/src/render/elements/lib/table-ui/row-controller.ts:433"),e.reset()}))}},{key:"_generateBars",value:function(e){var t=this._bars,n=t.length;if(e===n)return t;if(e<n){for(var r=e;r<n;r++)t[r].destroy();return t.splice(e,n-e),t}for(var o=n;o<e;o++){var i=new e5e(this,this._tableContext,this._tableSelectionContext,o);t.push(i),i.appendTo(this._containerNodeInner)}return t}},{key:"_updateSelection",value:function(){var e=this._tableSelectionContext,t=e.type,n=e.startRow,r=e.endRow;if(this._clearAllSelect(),this.isControllerEnable()){this._show();var o=Math.min(n,r),i=Math.max(n,r);if(this._lastSelectInfo={type:t,start:o,end:i},t===N4e?this._showDeleteButton():this._hideDeleteButton(),t===x4e)this._containerNode.classList.add("ne-ui-selected","ne-ui-active");else if(t===C4e)this._containerNode.classList.add("ne-ui-selected");else for(var a=o;a<=i;a++)this._bars[a].setSelectState(!0,t!==O4e)}else this._hide()}},{key:"_clearAllSelect",value:function(){if(this._lastSelectInfo){var e=this._lastSelectInfo.type;this._hideDeleteButton(),e===x4e||e===C4e?this._containerNode.classList.remove("ne-ui-selected","ne-ui-active"):this._bars.forEach((function(e){e.setSelectState(!1)})),this._lastSelectInfo=null}}},{key:"_hide",value:function(){this._isVisible&&(this._isVisible=!1,this._containerNodeInner.style.display="none")}},{key:"_show",value:function(){this._isVisible||(this._isVisible=!0,this._containerNodeInner.style.display="block")}},{key:"_showDeleteButton",value:function(){var e;if((null===(e=this._tableContext.tableUIInject)||void 0===e?void 0:e.canDeleteRow)&&!this._tableContext.tableUIInject.canDeleteRow(this._tableContext.tableModelElement,this._tableSelectionContext.value))return this._hideDeleteButton();var t=this._tableSelectionContext,n=t.startRow,r=t.endRow,o=Math.min(n,r),i=Math.max(n,r),a=this._tableSelectionContext.getRowRect(o,i);this._deleteButton.style.cssText="top: ".concat(a.y+E4e-24-4,"px; display: flex")}},{key:"_hideDeleteButton",value:function(){this._deleteButton.style.cssText=""}},{key:"_showAddRowButton",value:function(){var e=this;if(!this._resizing){var t,n,r,o,i=this._tableContext.tableDOMNode.getBoundingClientRect().y,a=this._bars,l=this._mouseY;I4e(a,this._addRowIndex,(function(e){var i=a[e].index,u=a[e].getCoordinate(),c=u.y,s=u.height;return l>=c&&l<c+s&&(n=i,r=c,o=s,t=l<c+s/2?"before":"after",!0)})),(t&&t!==this._addRowType||n>=0&&n!==this._addRowIndex)&&(this._addRowType=t,this._addRowIndex=n,this._containerNode.classList.add("ne-add-row-btn-show"),this._firstRowBeforeTimer&&clearTimeout(this._firstRowBeforeTimer),"before"===t&&0===n?this._firstRowBeforeTimer=window.setTimeout((function(){e._showAddRowButtonByPosition(e._addRowType,e._addRowIndex,r-i,o)}),300):this._showAddRowButtonByPosition(this._addRowType,this._addRowIndex,r-i,o))}}},{key:"_showAddRowButtonByPosition",value:function(e,t,n,r){var o;if((null===(o=this._tableContext.tableUIInject)||void 0===o?void 0:o.canAddRow)&&!this._tableContext.tableUIInject.canAddRow(this._tableContext.tableModelElement,"after"===e?t+1:t))return this._hideAddRowButton();this._addRowButton.setAttribute("data-pos",e),this._addRowButton.setAttribute("data-index",t+""),this._addRowButton.style.cssText="before"===e?"top: ".concat(n-12,"px; display: flex;"):"top: ".concat(n+r-12,"px; display: flex"),this.emit("showAddRowButton",!0)}},{key:"_hideAddRowButton",value:function(){this._mouseY=-1,this._addRowType=null,this._addRowIndex=-1,this._addRowButton.style.cssText="",this._containerNode.classList.remove("ne-add-row-btn-show"),clearTimeout(this._firstRowBeforeTimer),this._firstRowBeforeTimer=-1,this.emit("showAddRowButton",!1)}}])}(it);function o5e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,i5e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function i5e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(i5e=function(){return!!e})()}var a5e=function(e){function t(e,n,r,o,i){var a;return(0,Ke.A)(this,t),a=o5e(this,t),Object.defineProperty(a,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(a,"_viewNode",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(a,"_tableDOMNode",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(a,"_pluginContext",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(a,"_tableNodeInstance",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_tableFootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_tableFootRowNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_maxViewStatus",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(a,"_tableBoxNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_tableInnerWrapNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"getThemeSelector",{enumerable:!0,configurable:!0,writable:!0,value:function(){return a.renderer.theme.getThemeSelector()}}),a._tableNodeInstance=e,a._tableBoxNode=o.parentNode,a._tableInnerWrapNode=o.parentNode.parentNode,a._tableFootNode=Ly.createElement("tfoot"),a._tableFootRowNode=Ly.createElement("tr"),a._tableFootNode.appendChild(a._tableFootRowNode),a.tableDOMNode.appendChild(a._tableFootNode),a}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){this._tableFootNode.remove(),this.removeAllListeners()}},{key:"refresh",value:function(){this.emit("change")}},{key:"tableModelElement",get:function(){return this._tableNodeInstance.viewNode._modelNode}},{key:"option",get:function(){return this._pluginContext.option}},{key:"tableUIInject",get:function(){return this.option.tableUIInject}},{key:"tableDOMNode",get:function(){return this._tableDOMNode}},{key:"tableBoxNode",get:function(){return this._tableBoxNode}},{key:"tableWrapNode",get:function(){return this._tableInnerWrapNode.parentNode}},{key:"tableInnerWrapNode",get:function(){return this._tableInnerWrapNode}},{key:"columnCount",get:function(){return this._viewNode.attrs.colCount}},{key:"rowCount",get:function(){return this._viewNode.attrs.rowCount}},{key:"columnWidths",get:function(){return k4e.getColWidths(this._viewNode)}},{key:"fitWidth",get:function(){return!!this._viewNode.attrs.fitWidth}},{key:"rowHeights",get:function(){bt(this._tableDOMNode.isConnected,"plugins/table/src/render/elements/lib/table-ui/table-context.ts:96");var e=this._tableDOMNode.tBodies[0].rows;return Array.from(e).map((function(e){return e.getBoundingClientRect().height}))}},{key:"colCount",get:function(){return this._viewNode.attrs.colCount}},{key:"canMergeCell",get:function(){return this.renderer.queryCommandState("tableMergeCell")===dt}},{key:"canUnmergeCell",get:function(){return this.renderer.queryCommandState("tableUnmergeCell")===dt}},{key:"tableWidth",get:function(){return this._viewNode.attrs.colWidths.reduce((function(e,t){return e+t}),0)}},{key:"isBorderVisible",get:function(){return!1!==this._viewNode.attrs.borderVisible}},{key:"headDisabled",get:function(){return this._pluginContext.headDisabled}},{key:"isMaxView",value:function(){return this._maxViewStatus}},{key:"setMaxView",value:function(){this._maxViewStatus=!0}},{key:"clearMaxView",value:function(){this._maxViewStatus=!1}},{key:"getColumnDisplayRect",value:function(e){return this._tableFootRowNode.children[e]||(this._tableFootRowNode.innerHTML="<td>".concat(new Array(this._viewNode.attrs.colCount).join("</td><td>"),"</td>")),this._tableFootRowNode.children[e].getBoundingClientRect()}},{key:"getRowDisplayRect",value:function(e){return this._tableDOMNode.isConnected&&this._tableDOMNode.tBodies[0].rows[e]?this._tableDOMNode.tBodies[0].rows[e].getBoundingClientRect():{y:0,height:0}}},{key:"isCrossColumn",value:function(e){return 0!==e&&this._viewNode.children.some((function(t){for(var n=t.children,r=0,o=n.length;r<o;r++){var i=n[r].attrs,a=i.col,l=i.colSpan;if(a<e&&e<=a+(void 0===l?1:l)-1)return!0}return!1}))}},{key:"isCrossRow",value:function(e){if(0===e)return!1;for(var t=this._viewNode,n=t.attrs.colCount,r=t.children[e],o=0,i=0,a=r.children.length;i<a;i++){var l=r.children[i].attrs,u=l.col,c=l.colSpan;if(u!==o)return!0;o=u+(void 0===c?1:c)}return o!==n}},{key:"findColumnBoundary",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;bt(e<=t,"plugins/table/src/render/elements/lib/table-ui/table-context.ts:240");var n=e,r=t;return this._viewNode.children.forEach((function(n){n.children.forEach((function(n){var r=n.attrs,o=r.col,i=r.colSpan,a=o,l=o+(void 0===i?1:i)-1;l<e||a>t||(e=Math.min(e,a),t=Math.max(t,l))}))})),e!==n||t!==r?this.findColumnBoundary(e,t):{min:e,max:t}}},{key:"findRowBoundary",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;bt(e<=t,"plugins/table/src/render/elements/lib/table-ui/table-context.ts:286");var n=e,r=t;return this._viewNode.children.forEach((function(n,r){n.children.forEach((function(n){var o=n.attrs.rowSpan,i=r,a=r+(void 0===o?1:o)-1;a<e||i>t||(e=Math.min(e,i),t=Math.max(t,a))}))})),e!==n||t!==r?this.findRowBoundary(e,t):{min:e,max:t}}},{key:"execute",value:function(e){var t;switch(e){case"copy":return void document.execCommand("copy");case"cut":return void document.execCommand("cut");case"deleteTable":return void this.renderer.execCommand("deleteTable",this._viewNode.attrs.id);default:for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return void(t=this.renderer).execCommand.apply(t,[e].concat(r))}}},{key:"tableQueueStartAndEnd",value:function(){return this.renderer.queryCommandValue("tableSetQueueNo")}},{key:"trySetColumnWidth",value:function(e,t){var n=this._tableDOMNode.firstElementChild.children[e],r=n.width,o=Number.parseInt(this._tableDOMNode.style.width,10);n.width=t+"";var i=t-r;o&&(this._tableDOMNode.style.width=o+i+"px");var a=this.getColumnDisplayRect(e).width;return n.width=r,this._tableDOMNode.style.width=o?o+"px":"",{width:a,rows:Array.from(this._tableDOMNode.tBodies[0].rows).map((function(e){return e.getBoundingClientRect().height}))}}},{key:"trySetRowHeight",value:function(e,t){var n=this._tableDOMNode.tBodies[0].children[e],r=Number.parseInt(n.style.height,10);n.style.height=t+"px";var o=n.getBoundingClientRect().height;return n.style.height=r?r+"px":"",o}}])}(it),l5e=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_tableSelectionContext",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_selectionRootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_bgNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._selectionRootNode=Ly.createElement("div",{className:"ne-ui-table-selection"}),this._bgNode=ad("div",{className:"ne-ui-table-selection-bg"}),this._selectionRootNode.appendChild(this._bgNode),this._initEvent()}),[{key:"destroy",value:function(){}},{key:"appendTo",value:function(e){e.appendChild(this._selectionRootNode)}},{key:"_initEvent",value:function(){var e=this;xc(this,this._tableSelectionContext,"change",(function(){setTimeout((function(){e._repaint()}),0)}))}},{key:"_repaint",value:function(){var e,t=this._tableSelectionContext,n=t.type,r=t.stable,o=t.startRow,i=t.endRow,a=t.startColumn,l=t.endColumn;if(r||n===_4e||n===O4e)"none"!==this._bgNode.style.display&&(this._bgNode.style.display="none");else{n===C4e?e=this._tableSelectionContext.getColumnRect(a,l):n===N4e||n===x4e?e=this._tableSelectionContext.getRowRect(o,i):bt(!1,"plugins/table/src/render/elements/lib/table-ui/table-selection.ts:68");var u=this._bgNode.style;u.display="block",u.top=e.y+"px",u.left=e.x+"px",u.width=e.width+"px",u.height=e.height+"px"}}}])}(),u5e=function(){return(0,$e.A)((function e(t,n){(0,Ke.A)(this,e),Object.defineProperty(this,"_tableSelectionContext",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_tableNode",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"_highlightNode",{enumerable:!0,configurable:!0,writable:!0,value:null})}),[{key:"destroy",value:function(){var e;this._tableSelectionContext=null,this._tableNode=null,null===(e=this._highlightNode)||void 0===e||e.remove(),this._highlightNode=null}},{key:"show",value:function(e){var t=this._getInnerWrapNode();this._highlightNode||(this._highlightNode=document.createElement("div"),this._highlightNode.className="ne-table-highlight",this._getTableBoxNode().appendChild(this._highlightNode)),t.parentNode.classList.add("ne-ui-selection-highlight","ne-ui-selection-highlight-".concat(e)),"column"===e?this._showColumn():"row"===e?this._showRow():"table"===e&&this._showTable()}},{key:"hide",value:function(){this._getInnerWrapNode().parentNode.classList.remove("ne-ui-selection-highlight","ne-ui-selection-highlight-table","ne-ui-selection-highlight-row","ne-ui-selection-highlight-column"),this._highlightNode&&(this._highlightNode.style.display="none")}},{key:"_showColumn",value:function(){var e=this._tableSelectionContext,t=e.startColumn,n=e.endColumn,r=this._tableSelectionContext.getColumnRect(t,n),o=r.x,i=r.width,a=r.height;this._highlightNode.style.cssText="display: block; width: ".concat(i+1,"px; height: ").concat(a-1,"px; left: ").concat(o,"px; top: 0px;")}},{key:"_showRow",value:function(){var e=this._tableSelectionContext,t=e.startRow,n=e.endRow,r=this._tableSelectionContext.getRowRect(t,n),o=r.y,i=r.width,a=r.height;this._highlightNode.style.cssText="display: block; width: ".concat(i+1,"px; height: ").concat(a+1,"px; left: -1px; top: ").concat(o,"px;")}},{key:"_showTable",value:function(){var e=this._tableSelectionContext.getRowRect(0,this._tableNode.tBodies[0].rows.length-1),t=e.y,n=e.width,r=e.height;this._highlightNode.style.cssText="display: block; width: ".concat(n+1,"px; height: ").concat(r+1,"px; left: -1px; top: ").concat(t,"px;")}},{key:"_getInnerWrapNode",value:function(){return this._tableNode.parentNode.parentNode}},{key:"_getTableBoxNode",value:function(){return this._tableNode.parentNode}}])}();function c5e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,s5e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function s5e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s5e=function(){return!!e})()}var d5e=function(e){function t(e,n,r){var o;return(0,Ke.A)(this,t),o=c5e(this,t),Object.defineProperty(o,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(o,"_viewNode",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(o,"_tableDOMNode",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(o,"_type",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(o,"_stable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(o,"_startColumn",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(o,"_endColumn",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(o,"_startRow",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(o,"_endRow",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(o,"_ranges",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(o,"_highlightManager",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),o._highlightManager=new u5e(o,r),o}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"value",get:function(){return{startCol:this._startColumn,endCol:this._endColumn,startRow:this._startRow,endRow:this._endRow}}},{key:"destroy",value:function(){this.removeAllListeners(),this._highlightManager.destroy()}},{key:"refresh",value:function(){this.emit("change")}},{key:"type",get:function(){return this._type}},{key:"stable",get:function(){return this._stable}},{key:"startColumn",get:function(){return this._startColumn}},{key:"endColumn",get:function(){return this._endColumn}},{key:"startRow",get:function(){return this._startRow}},{key:"endRow",get:function(){return this._endRow}},{key:"ranges",get:function(){return this._ranges}},{key:"viewNode",get:function(){return this._viewNode}},{key:"highlight",value:function(e,t){e?this._highlightManager.show(t):this._highlightManager.hide()}},{key:"getColumnRect",value:function(e,t){bt(this._tableDOMNode.isConnected,"plugins/table/src/render/elements/lib/table-ui/table-selection-context.ts:95");for(var n=this._tableDOMNode.tBodies[0].rows,r=k4e.getColWidths(this._viewNode),o=n[0],i=n[n.length-1].getBoundingClientRect().bottom-o.getBoundingClientRect().top,a=Math.min(e,t),l=Math.max(e,t),u=0,c=0,s=0;s<a;s++)u+=r[s];for(var d=a;d<=l;d++)c+=r[d];return{x:u,y:0,width:c,height:i}}},{key:"getRowRect",value:function(e,t){bt(this._tableDOMNode.isConnected,"plugins/table/src/render/elements/lib/table-ui/table-selection-context.ts:128");var n=this._tableDOMNode.tBodies[0].rows,r=this._tableDOMNode.getBoundingClientRect(),o=Math.min(e,t),i=Math.max(e,t),a=n[o].getBoundingClientRect(),l=n[i].getBoundingClientRect();return{x:0,y:a.y-r.y,width:a.width,height:l.bottom-a.top}}},{key:"setRanges",value:function(e){this._ranges=e}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.startColumn,r=void 0===n?-1:n,o=t.endColumn,i=void 0===o?-1:o,a=t.startRow,l=void 0===a?-1:a,u=t.endRow,c=void 0===u?-1:u,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d=this._type,f=this._stable,h=this._startColumn,p=this._endColumn,v=this._startRow,m=this._endRow;e===x4e&&(l=0,r=0,c=this._viewNode.attrs.rowCount-1,i=this._viewNode.attrs.colCount-1),this._type=e,this._stable=s,this._startColumn=r,this._endColumn=i,this._startRow=l,this._endRow=c,d===e&&f===s&&h===r&&p===i&&v===l&&m===c||(this.emit("change"),e===_4e?d&&d!==e&&this.emit("blur"):d&&d!==_4e||this.emit("focus"))}},{key:"isFocus",value:function(){return this._type!==_4e}},{key:"clear",value:function(){this.update(_4e),this._ranges=null}}])}(it);function f5e(e){return Us.ipad?"pad-".concat(e):Us.mobile?"h5-".concat(e):e}var h5e=function(){return(0,$e.A)((function e(t,n,r){(0,Ke.A)(this,e),Object.defineProperty(this,"tableContext",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"containerNode",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"isControllerEnable",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.node=Ly.createElement("div",{className:"ne-ui-table-row-moving-line"}),this.containerNode.appendChild(this.node)}),[{key:"hide",value:function(){this.node.style.display="none"}},{key:"show",value:function(e){var t=e.y,n=Math.min(this.tableContext.tableBoxNode.clientWidth,this.tableContext.tableInnerWrapNode.clientWidth),r=this.isControllerEnable()?n+E4e:n,o=this.isControllerEnable()?0:E4e,i="number"==typeof t?t+E4e:0;this.node.style.cssText="top: ".concat(i,"px; left: ").concat(o,"px; display: block; width: ").concat(r,"px")}}])}(),p5e=function(){return(0,$e.A)((function e(t,n,r){(0,Ke.A)(this,e),Object.defineProperty(this,"tableContext",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"containerNode",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"isControllerEnable",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.node=Ly.createElement("div",{className:"ne-ui-table-column-moving-line"}),this.containerNode.appendChild(this.node)}),[{key:"hide",value:function(){this.node.style.display="none"}},{key:"show",value:function(e){var t=e.x,n=this.tableContext.tableBoxNode.clientHeight,r=this.tableContext.tableInnerWrapNode.scrollLeft,o=this.isControllerEnable()?0:E4e,i=this.isControllerEnable()?n+E4e:n,a="number"==typeof t?t+E4e-1-r:0;this.node.style.cssText="top: ".concat(o,"px; height: ").concat(i,"px; left: ").concat(a,"px; display: block")}}])}();function v5e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,m5e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function m5e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m5e=function(){return!!e})()}var g5e=new cf(["cmd","shift","F"]),b5e=new cf(["cmd","option","shift","arrowup"]),y5e=new cf(["cmd","option","shift","arrowdown"]),w5e=new cf(["cmd","option","shift","arrowleft"]),A5e=new cf(["cmd","option","shift","arrowright"]),k5e=function(e){function t(e,n,r,o,i){var a;(0,Ke.A)(this,t),a=v5e(this,t),Object.defineProperty(a,"_pluginContext",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(a,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(a,"_wrapDOMNode",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(a,"_viewNode",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(a,"_innerWrapNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_tableContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_tableSelectionContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_tableUINode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_rowController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_tableNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_columnController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_tableSelection",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_contextMenu",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_listener",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(a,"_controlPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_resizeMask",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"movingLineColumn",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"movingLineRow",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_maxViewContext",{enumerable:!0,configurable:!0,writable:!0,value:{destroy:function(){}}}),Object.defineProperty(a,"isControllerEnable",{enumerable:!0,configurable:!0,writable:!0,value:function(){return a._tableSelectionContext.isFocus()&&!a._tableContext.headDisabled}}),a._tableUINode=Ly.createElement("div",{className:"ne-ui-table",contentEditable:"false"});var l=o.firstChild,u=l.firstChild.firstChild;return a._tableNode=u,a._tableContext=new a5e(e,r,i,u,n),a._innerWrapNode=l,a._tableSelectionContext=new d5e(r,i,u),a.movingLineRow=new h5e(a._tableContext,a._tableUINode,a.isControllerEnable),a._rowController=new r5e(a._tableContext,a._tableSelectionContext,a.isControllerEnable,a.movingLineRow),a.movingLineColumn=new p5e(a._tableContext,a._tableUINode,a.isControllerEnable),a._columnController=new L4e(a._tableContext,a._tableSelectionContext,a.isControllerEnable,a.movingLineColumn),a._controlPoint=new Y4e(a._tableContext,a._tableSelectionContext),a._resizeMask=new Q4e(a._tableContext,a._tableSelectionContext,r,a._rowController,a._columnController,a.movingLineRow,a.movingLineColumn),a._tableSelection=new l5e(a._tableSelectionContext),a._contextMenu=new q4e(a._tableContext,a._tableSelectionContext,o,r.scrollableOverlayNode,r.scrollNode),o.prepend(a._tableUINode),a._rowController.appendTo(a._tableUINode),a._controlPoint.appendTo(a._tableUINode),a._columnController.appendTo(l),a._resizeMask.appendTo(l),a._tableSelection.appendTo(l),r.emitPluginEvent("tableUIDisplayChange",{wrapDOMNode:o}),a._initEvent(),a}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){var e;this.renderer.emitPluginEvent("tableDestroy",{tableId:this._viewNode.attrs.id,wrapDOMNode:this._wrapDOMNode,tableNode:this._tableNode}),this._tableUINode.remove(),this._tableContext.destroy(),this._tableSelectionContext.destroy(),this._rowController.destroy(),this._columnController.destroy(),this._controlPoint.destroy(),this._tableSelection.destroy(),this._contextMenu.destroy(),null===(e=this._listener)||void 0===e||e.destroy(),this.removeAllListeners()}},{key:"viewNode",get:function(){return this._viewNode}},{key:"wrapDOMNode",get:function(){return this._wrapDOMNode}},{key:"tableNode",get:function(){return this._tableNode}},{key:"tableUINode",get:function(){return this._tableUINode}},{key:"refresh",value:function(){this._tableContext.refresh(),this._tableContext.isBorderVisible?this._wrapDOMNode.classList.remove("ne-table-hide-border"):this._wrapDOMNode.classList.add("ne-table-hide-border")}},{key:"refreshSelection",value:function(e){e.ranges&&this._tableSelectionContext.setRanges(e.ranges),this._tableSelectionContext.update(e.type,e,!0)}},{key:"clearSelection",value:function(){this._tableSelectionContext.clear()}},{key:"enterMaxView",value:function(){var e=this._tableNode;e._isMaxView=!0,this._tableContext.setMaxView(),this._pluginContext.setTableMaxContext(),this.renderer.emit("elementEnterMaxView",this._tableNode,this.viewNode.id),pc(this._maxViewContext,this._wrapDOMNode,"mousedown",(function(t){e.contains(t.target)||(t.preventDefault(),t.stopPropagation())}),!1)}},{key:"leaveMaxView",value:function(){this._tableNode._isMaxView=!1,this._tableContext.clearMaxView(),this._pluginContext.clearTableMaxContext(),this.renderer.emit("elementLeaveMaxView",this._tableNode,this.viewNode.id),this._maxViewContext.destroy()}},{key:"_initEvent",value:function(){var e=this;this._listener=new hd(this.renderer.id,this._tableUINode),this._listener.on("mousedown",(function(e){if(e.target.closest(".ne-ui-container-toolbar-trigger"))return!0;e.preventDefault(),e.stopPropagation()})),this._columnController.on("selectChange",(function(t){var n=t.isComposing,r=t.start,o=t.end;e._toggleSelectState(n,C4e,r,o),e._isFullColumn(r,o)?e._tableSelectionContext.update(x4e):e._tableSelectionContext.update(C4e,{startColumn:r,endColumn:o})})),this._columnController.on("columnWidthChange",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.emit.apply(e,["columnWidthChange"].concat(n))})),this._columnController.on("moveColumn",(function(t){e.emit("columnMoveTo",t)})),this._rowController.on("moveRow",(function(t){e.emit("rowMoveTo",t)})),this._rowController.on("selectChange",(function(t){var n=t.isComposing,r=t.start,o=t.end;e._toggleSelectState(n,N4e,r,o),e._isFullRow(r,o)?e._tableSelectionContext.update(x4e):e._tableSelectionContext.update(N4e,{startRow:r,endRow:o})})),this._rowController.on("rowHeightChange",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.emit.apply(e,["rowHeightChange"].concat(n))})),this._rowController.on("showAddRowButton",(function(t){e.renderer.emitPluginEvent("showAddRowButton",t)})),this._controlPoint.on("click",(function(){e._toggleSelectState(!1,C4e,0,e._viewNode.attrs.colCount-1),e._tableSelectionContext.update(x4e)})),this._tableSelectionContext.on("focus",(function(){e._wrapDOMNode.classList.add("ne-table-focus","ne-focused"),e._wrapDOMNode.classList.add(f5e("ne-table-focus")),e.renderer.emitPluginEvent("tableFocus",{tableId:e._viewNode.attrs.id,tableUI:e,wrapDOMNode:e._wrapDOMNode,tableNode:e._tableNode})})),this._tableSelectionContext.on("blur",(function(){e._wrapDOMNode.classList.remove("ne-table-focus","ne-focused"),e._wrapDOMNode.classList.remove(f5e("ne-table-focus")),e.renderer.emitPluginEvent("tableBlur",{tableId:e._viewNode.attrs.id,tableUI:e,wrapDOMNode:e._wrapDOMNode,tableNode:e._tableNode})})),this.renderer.onRootNode("keydown",(function(t){if(e._tableSelectionContext.isFocus()){var n=!1;g5e.match(t)&&e._tableSelectionContext.isFocus()&&(n=!0,e.renderer.emitPluginEvent("tableMaximize",{tableId:e._viewNode.attrs.id,tableUI:e,wrapDOMNode:e._wrapDOMNode,tableNode:e._tableNode})),b5e.match(t)&&(n=!0,e._tableContext.execute("tableInsertBeforeRow",1)),y5e.match(t)&&(n=!0,e._tableContext.execute("tableInsertAfterRow",1)),w5e.match(t)&&(n=!0,e._tableContext.execute("tableInsertBeforeColumn",1)),A5e.match(t)&&(n=!0,e._tableContext.execute("tableInsertAfterColumn",1)),n&&(t.preventDefault(),t.stopPropagation())}})),this.renderer.onPluginEvent("uiSwitched",(function(t){t.isInitSwitch||(e.refresh(),e._tableSelectionContext.refresh())}))}},{key:"_toggleSelectState",value:function(e,t,n,r){e?this._wrapDOMNode.classList.add("ne-ui-selecting"):this._wrapDOMNode.classList.remove("ne-ui-selecting"),this.renderer.emitPluginEvent("tableSelectionChange"),e||this.emit("tableSelectionChange",{type:t,start:n,end:r,anchor:n>r?"end":"start",focus:r>n?"end":"start"})}},{key:"_isFullRow",value:function(e,t){var n=Math.min(e,t),r=Math.max(e,t);return 0===n&&r===this._viewNode.attrs.rowCount-1}},{key:"_isFullColumn",value:function(e,t){var n=Math.min(e,t),r=Math.max(e,t);return 0===n&&r===this._viewNode.attrs.colCount-1}}])}(it);function _5e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,C5e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function C5e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(C5e=function(){return!!e})()}var N5e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=_5e(this,t,arguments),Object.defineProperty(e,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_innerWrapNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_tableBoxNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_tableNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_contentNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_columnManager",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_tableUI",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_isFocused",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_delayRefreshTimer",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(e,"_resizeObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_hoverTimer",{enumerable:!0,configurable:!0,writable:!0,value:0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"TableUI",get:function(){return k5e}},{key:"init",value:function(e){var t=this;this._rootNode=Ly.createElement(nw),this._innerWrapNode=Ly.createElement(rw),this._tableNode=Ly.createElement("table",{className:"ne-table"}),this._contentNode=Ly.createElement("tbody",{className:"ne-table-inner"}),this._rootNode._tableNode=this._tableNode,this._tableNode._wrapNode=this._rootNode;var n=Ly.createElement(ow);n.appendChild(this._tableNode),this._tableNode.appendChild(this._contentNode),this._innerWrapNode.appendChild(n),this._rootNode.appendChild(this._innerWrapNode),this._tableBoxNode=n,Ly.setAttributeByChange(this._tableNode,e),this._columnManager=new k4e(this.viewNode,this._tableNode,this._rootNode,this._innerWrapNode),this._columnManager.update(),this._tableUI=new this.TableUI(this,this.pluginContext,this.renderer,this._rootNode,this.viewNode),this._initEvent(),ss((function(){var e;null===(e=t._tableUI)||void 0===e||e.refresh(),t._resetShadow()}))}},{key:"_afterInit",value:function(){this._refreshSpacing(),this._refreshWidthMode();var e=this._rootNode.parentNode;e&&e.classList.add(f5e("ne-table-hole"));var t=this.renderer.getService(p2e.ID);null==t||t.delegateVisibleChange(this._rootNode,{visibility:!0})}},{key:"destroy",value:function(){this._columnManager.destroy(),this._tableUI.destroy(),this._resizeObserver.disconnect(),this._tableUI=null,Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}},{key:"$appear",value:function(){Ch.appear(this)}},{key:"$disappear",value:function(){Ch.disappear(this,this._rootNode)}},{key:"$didUpdate",value:function(){this._refreshSpacing(),this._refreshWidthMode(),this._tableUI.refresh()}},{key:"_initEvent",value:function(){var e,t=this;xc(this,this.pluginContext,"resetSelection",(function(e){e.tableNode!==t._tableNode?(t._isFocused=!1,t._tableUI.clearSelection()):(t._isFocused=!0,t._tableUI.refreshSelection(e),e.isStable&&t.renderer.emitPluginEvent("stableSelectionChange",{tableId:t.viewNode.attrs.id,tableUI:t._tableUI,wrapDOMNode:t._rootNode,tableNode:t._tableNode}))})),this._tableUI.on("tableSelectionChange",(function(e){var n=e.type,r=e.start,o=e.end,i=e.anchor,a=e.focus;t.pluginContext.updateTableSelection(t._tableNode,n,r,o,i,a)})),this._tableUI.on("columnWidthChange",(function(e){var n=e.index,r=e.width,o=k4e.getColWidths(t.viewNode);t.pluginContext.resizeColumnWidth(t.viewNode.attrs.id,n,r,o)})),this._tableUI.on("rowHeightChange",(function(e){var n=e.index,r=e.height;t.pluginContext.resizeRowHeight(t.viewNode.attrs.id,n,r)})),this._tableUI.on("rowMoveTo",(function(e){t.pluginContext.rowMoveTo(e),t._startDelayRefresh()})),this._tableUI.on("columnMoveTo",(function(e){t.pluginContext.columnMoveTo(e)})),pc(this,this._innerWrapNode,"scroll",(function(){e&&clearTimeout(e),e=window.setTimeout((function(){t._resetShadow()}),32)}),{passive:!0}),pc(this,this._innerWrapNode,"mouseenter",(function(){t._hoverTimer=window.setTimeout((function(){t.renderer.emitPluginEvent("tableHover",{tableId:t.viewNode.attrs.id,tableUI:t._tableUI,wrapDOMNode:t._rootNode,tableNode:t._tableNode})}),200)})),pc(this,this._innerWrapNode,"mouseleave",(function(){t._hoverTimer&&clearTimeout(t._hoverTimer)})),pc(this,this._tableNode,"table-cell-attr-change",(function(){t._startDelayRefresh()})),xc(this,this._columnManager,"needUpdateUI",(function(){var e;null===(e=t._tableUI)||void 0===e||e.refresh(),t._resetShadow()})),this._resizeObserver=new ResizeObserver(Qm()((function(){t._innerWrapNode.isConnected&&(t._resetShadow(),t._columnManager.updateSizeChange())}),300)),this._resizeObserver.observe(this._innerWrapNode)}},{key:"updateAttribute",value:function(e){Ly.syncDOMAttrChange(this._tableNode,e),this._columnManager.update(),this._resetShadow()}},{key:"getMainDOMNode",value:function(){return this._rootNode}},{key:"getContentDOMNode",value:function(){return this._contentNode}},{key:"_resetShadow",value:function(){var e=this._rootNode,t=this._innerWrapNode,n=this.viewNode,r=e.classList,o=f5e("ne-ui-table-left-shadow"),i=f5e("ne-ui-table-right-shadow");n.attrs.fitWidth&&(r.remove(o),r.remove(i));var a=t.scrollWidth,l=t.clientWidth,u=Math.ceil(t.scrollLeft),c=u>0,s=!1;l+u<a&&parseInt(getComputedStyle(t).getPropertyValue("padding-left").slice(0,-2),10)+this._tableBoxNode.clientWidth>=l&&(s=!0),c?r.add(o):r.remove(o),s?r.add(i):r.remove(i)}},{key:"_startDelayRefresh",value:function(){var e=this;clearTimeout(this._delayRefreshTimer),this._delayRefreshTimer=window.setTimeout((function(){var t;null===(t=e._tableUI)||void 0===t||t.refresh()}))}},{key:"_refreshSpacing",value:function(){var e,t=this,n=this._rootNode.parentNode;n&&(!1!==(null===(e=this.viewNode.attrs)||void 0===e?void 0:e.spacing)?n.hasAttribute("data-no-spacing")&&n.removeAttribute("data-no-spacing"):n.hasAttribute("data-no-spacing")||(n.setAttribute("data-no-spacing","true"),Us.macos&&ys((function(){return hc()}),(function(e){var n;e||!1!==(null===(n=t.viewNode.attrs)||void 0===n?void 0:n.spacing)?t._innerWrapNode.style.paddingBottom="":t._innerWrapNode.style.paddingBottom="15px"}))))}},{key:"_refreshWidthMode",value:function(){var e,t=this._rootNode.parentNode;t&&((null===(e=this.viewNode.attrs)||void 0===e?void 0:e.widthMode)===Dl?t.classList.add("ne-full-width"):t.classList.remove("ne-full-width"))}}])}(Sy),O5e={elementCtor:N5e},x5e=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Ww()({},O5e,t)}),[{key:"elementCtor",get:function(){return this._option.elementCtor}},{key:"tableUIInject",get:function(){return this._option.tableUIInject}}])}();function E5e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,D5e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function D5e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(D5e=function(){return!!e})()}Object.defineProperty(x5e,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"table"});var P5e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=E5e(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(rt);function R5e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,S5e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function S5e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(S5e=function(){return!!e})()}Object.defineProperty(P5e,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze("IDeleteKernelService")});var T5e=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=R5e(this,t),Object.defineProperty(r,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(r,"option",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(r,"_headDisabled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"updateTableSelection",value:function(e,t,n,r,o,i){bt(o&&i,"plugins/table/src/render/table-plugin-context.ts:32");var a=function(e,t,n,r){var o=Array.from(e.tBodies[0].rows),i=[],a=document.createRange();if(t===N4e)for(var l=n;l<=r;l++)Array.from(o[l].cells).forEach((function(e){var t=a.cloneRange();t.selectNodeContents(e),i.push(t)}));else t===C4e&&o.forEach((function(e){for(var t=e.cells,o=0,l=t.length;o<l;o++){var u=t[o],c=parseInt(u.getAttribute("data-col"),10);if(bt(c>=0,"plugins/table/src/render/helper/transform-to-range.ts:34"),c>r)break;if(c>=n&&c<=r){var s=a.cloneRange();s.selectNodeContents(u),i.push(s)}}}));return i}(e,t,Math.min(n,r),Math.max(n,r));this.renderer.emitPluginEvent("requestSetRange",{focus:i,anchor:o,ranges:a})}},{key:"resizeColumnWidth",value:function(e,t,n,r){this.renderer.execCommand("tableColumnWidth",e,t,n,r)}},{key:"resizeRowHeight",value:function(e,t,n){this.renderer.execCommand("tableRowHeight",e,t,n)}},{key:"rowMoveTo",value:function(e){this.renderer.execCommand("tableRowMoveTo",e)}},{key:"columnMoveTo",value:function(e){this.renderer.execCommand("tableColumnMoveTo",e)}},{key:"setTableMaxContext",value:function(){var e,t=this.renderer.kernel;null===(e=t.getService(P5e.ID))||void 0===e||e.disableDeleteTable(),t.hasExtendMethod("setOnlyTableSelect")&&t.setOnlyTableSelect(!0);var n=t.getService(m$.ID);null==n||n.lockHistory()}},{key:"clearTableMaxContext",value:function(){var e,t=this.renderer.kernel;null===(e=t.getService(P5e.ID))||void 0===e||e.enableDeleteTable(),t.hasExtendMethod("setOnlyTableSelect")&&t.setOnlyTableSelect(!1);var n=t.getService(m$.ID);null==n||n.unlockHistory()}},{key:"headDisabled",get:function(){return this._headDisabled},set:function(e){"boolean"==typeof e&&(this._headDisabled=e)}}])}(it);function j5e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,I5e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function I5e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(I5e=function(){return!!e})()}var B5e=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=j5e(this,t),Object.defineProperty(n,"theme",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"translate",value:function(e,t){return"rowHead"===e?this.translateRowHead(t):"colHead"===e?this.translateColHead(t):{type:fp.ATTR_NAME,name:"data-".concat(e),value:t+""}}},{key:"setTableHeadStyleProperty",value:function(e,n){this.removeTableHeadStyleProperty(e);var r=n.split(";"),o=(0,tn.A)(r,2),i=o[0],a=o[1];if("string"==typeof i&&"string"==typeof a){var l=GU(JU(i,this.theme)),u=(0,tn.A)(l,2),c=u[0];u[1],e.style.setProperty(t.TABLE_HEAD_BG_COLOR_CSS_VAR,c);var s=GU(JU(a,this.theme)),d=(0,tn.A)(s,2),f=d[0],h=d[1];h?(e.setAttribute(t.TEXT_GRADIENT_ATTR,"true"),e.style.setProperty(t.TABLE_HEAD_TEXT1_COLOR_CSS_VAR,f),e.style.setProperty(t.TABLE_HEAD_TEXT2_COLOR_CSS_VAR,h)):e.style.setProperty(t.TABLE_HEAD_TEXT_COLOR_CSS_VAR,f),e.style.setProperty(t.TABLE_HEAD_BG_COLOR_CSS_VAR,n)}}},{key:"removeTableHeadStyleProperty",value:function(e){e.style.removeProperty(t.TABLE_HEAD_BG_COLOR_CSS_VAR),e.style.removeProperty(t.TABLE_HEAD_TEXT_COLOR_CSS_VAR),e.style.removeProperty(t.TABLE_HEAD_TEXT1_COLOR_CSS_VAR),e.style.removeProperty(t.TABLE_HEAD_TEXT2_COLOR_CSS_VAR),e.removeAttribute(t.TEXT_GRADIENT_ATTR)}},{key:"translateRowHead",value:function(e){var n=this;return{type:fp.CUSTOM_NAME,name:"rowHead",value:function(r){var o="TABLE"===r.nodeName?r:r.querySelector("table");"string"==typeof e&&o&&(o.setAttribute(t.ROW_HEAD_ATTR,"true"),n.setTableHeadStyleProperty(o,e))},remove:function(e){var n="TABLE"===e.nodeName?e:e.querySelector("table");n&&n.removeAttribute(t.ROW_HEAD_ATTR)}}}},{key:"translateColHead",value:function(e){var n=this;return{type:fp.CUSTOM_NAME,name:"colHead",value:function(r){var o="TABLE"===r.nodeName?r:r.querySelector("table");"string"==typeof e&&o&&(o.setAttribute(t.COL_HEAD_ATTR,"true"),n.setTableHeadStyleProperty(o,e))},remove:function(e){var n="TABLE"===e.nodeName?e:e.querySelector("table");n&&n.removeAttribute(t.COL_HEAD_ATTR)}}}}])}(fp);function M5e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,F5e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function F5e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(F5e=function(){return!!e})()}Object.defineProperty(B5e,"ROW_HEAD_ATTR",{enumerable:!0,configurable:!0,writable:!0,value:"ne-table-row-head"}),Object.defineProperty(B5e,"COL_HEAD_ATTR",{enumerable:!0,configurable:!0,writable:!0,value:"ne-table-col-head"}),Object.defineProperty(B5e,"TEXT_GRADIENT_ATTR",{enumerable:!0,configurable:!0,writable:!0,value:"ne-table-head-text-gradient"}),Object.defineProperty(B5e,"TABLE_HEAD_BG_COLOR_CSS_VAR",{enumerable:!0,configurable:!0,writable:!0,value:"--table-head-bg-color"}),Object.defineProperty(B5e,"TABLE_HEAD_TEXT_COLOR_CSS_VAR",{enumerable:!0,configurable:!0,writable:!0,value:"--table-head-text-color"}),Object.defineProperty(B5e,"TABLE_HEAD_TEXT1_COLOR_CSS_VAR",{enumerable:!0,configurable:!0,writable:!0,value:"--table-head-text1-color"}),Object.defineProperty(B5e,"TABLE_HEAD_TEXT2_COLOR_CSS_VAR",{enumerable:!0,configurable:!0,writable:!0,value:"--table-head-text2-color"});var L5e=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=M5e(this,t),Object.defineProperty(n,"_renderOrViewer",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"translate",value:function(e,t){return{type:fp.STYLE_NAME,name:"background-color",value:this._renderOrViewer.theme.toVisualValue(t)}}}])}(fp);function U5e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,V5e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function V5e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(V5e=function(){return!!e})()}var H5e=function(e){function t(){return(0,Ke.A)(this,t),U5e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"translate",value:function(e,t){return{type:fp.ATTR_NAME,name:e,value:t+""}}}])}(fp);function z5e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,W5e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function W5e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(W5e=function(){return!!e})()}var q5e=function(e){function t(){return(0,Ke.A)(this,t),z5e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"translate",value:function(e,t){return{type:fp.STYLE_NAME,name:e,value:"".concat(t,"px")}}}])}(fp);function $5e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,K5e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function K5e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(K5e=function(){return!!e})()}var Y5e=function(e){function t(){return(0,Ke.A)(this,t),$5e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"translate",value:function(e,t){return{type:fp.STYLE_NAME,name:"vertical-align",value:t+""}}}])}(fp);function G5e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,J5e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function J5e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(J5e=function(){return!!e})()}var X5e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=G5e(this,t,arguments),Object.defineProperty(e,"_contentNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_breakNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this;this._rootNode=Ly.createElement("td",{className:"ne-td"}),this._contentNode=Ly.createElement("div",{className:"ne-td-content"}),this._breakNode=Ly.createElement("div",{className:"ne-td-break",contentEditable:!1}),this._breakNode.innerHTML="<br>",this._rootNode.appendChild(this._contentNode),this._rootNode.appendChild(this._breakNode),this._updateAttributes({removed:[],updated:e}),xc(this,this.renderer.theme,"themeChange",(function(){var e=t.viewNode.attrs.cellBgColor;e&&Ly.syncDOMAttr(t.renderer.registry,t._rootNode,"cellBgColor",e)}))}},{key:"$didUpdate",value:function(){this._rootNode.dispatchEvent(new Event("table-cell-attr-change",{bubbles:!0,cancelable:!0}))}},{key:"updateAttribute",value:function(e){this._updateAttributes(e)}},{key:"repair",value:function(){var e=this._rootNode,t=this._contentNode,n=this._breakNode;t.parentNode!==e&&e.prepend(t),n.parentNode!==e&&e.appendChild(n),Array.from(e.childNodes).forEach((function(e){e!==t&&e!==n&&e.remove()}))}},{key:"getMainDOMNode",value:function(){return this._rootNode}},{key:"getContentDOMNode",value:function(){return this._contentNode}},{key:"_updateAttributes",value:function(e){Ly.syncDOMAttrChange(this._rootNode,e)}}])}(Sy);function Q5e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Z5e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Z5e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Z5e=function(){return!!e})()}var e6e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Q5e(this,t,arguments),Object.defineProperty(e,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){this._rootNode=Ly.createElement("tr",{className:"ne-tr"}),Ly.setAttributeByChange(this._rootNode,e)}},{key:"$didUpdate",value:function(){this._rootNode.dispatchEvent(new Event("table-cell-attr-change",{bubbles:!0,cancelable:!0}))}},{key:"updateAttribute",value:function(e){Ly.syncDOMAttrChange(this._rootNode,e)}},{key:"getMainDOMNode",value:function(){return this._rootNode}},{key:"repair",value:function(){var e=this.getMainDOMNode(),t=Array.from(e.childNodes).filter((function(e){return"TD"!==e.nodeName}));t.forEach((function(e){return e.remove()}))}}])}(Sy);function t6e(e){var t=gc(e.commonAncestorContainer,"td");bt(t,"plugins/table/src/render/helper/find-table-position.ts:91");var n=parseInt(t.getAttribute("data-col"),10),r=t.parentNode.rowIndex,o=t.colSpan,i=t.rowSpan;return bt(n>=0&&r>=0,"plugins/table/src/render/helper/find-table-position.ts:98"),{minColumn:n,maxColumn:n+o-1,minRow:r,maxRow:r+i-1}}function n6e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,r6e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function r6e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(r6e=function(){return!!e})()}var o6e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=n6e(this,t,arguments),Object.defineProperty(e,"_isFocusAtTable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this;this._context=new T5e(e,this.option),e.registerBoxNode((0,Ha.A)((0,Ha.A)((0,Ha.A)({},w3.node.table,{clazz:this.option.elementCtor,pluginContext:this._context}),w3.node.tr,e6e),w3.node.td,X5e)),e.registerAttrTranslator((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)({},w3.attr.width,new q5e),w3.attr.height,new q5e),w3.attr.rowSpan,new H5e),w3.attr.colSpan,new H5e),w3.attr.col,new B5e(this.renderer.theme)),w3.attr.colHead,new B5e(this.renderer.theme)),w3.attr.rowHead,new B5e(this.renderer.theme)),w3.attr.cellBgColor,new L5e(e)),w3.attr.verticalAlign,new Y5e));var n=-1,r=!1;e.on("unblockSelectionChange",(function(){r=!1})),e.on("blockSelectionChange",(function(){r=!0})),e.on("selectionchange",(function(e){var o=e.ranges,i=e.anchor;if(!r){var a=Date.now();requestAnimationFrame((function(){n>a||(t._updateTableSelection(!0,o,i),t._checkSelectionChange(o))}))}})),e.on("contentchange",(function(e){var o=e.ranges,i=e.anchor;r||(n=Date.now(),requestAnimationFrame((function(){t._updateTableSelection(!0,o,i),t._checkSelectionChange(o)})))})),e.onPluginEvent("uiSelectionChange",(function(e){t._updateTableSelection(!1,e)})),e.onPluginEvent("uiSwitched",(function(e){var n=e.type;t._context.headDisabled=[mM,gM].includes(n)}))}},{key:"_updateTableSelection",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fm,r=t[0].commonAncestorContainer,o=gc(r,"table");o&&"NE-CARD"!==r.nodeName?this._context.emit("resetSelection",Object.assign({tableNode:o,isStable:e,ranges:t},function(e,t,n){var r=e.attrs,o=r.rowCount,i=r.colCount,a=function(e){if(1===e.length)return t6e(e[0]);var t=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER;return e.forEach((function(e){var i=t6e(e);t=Math.min(t,i.minColumn),n=Math.max(n,i.maxColumn),r=Math.min(r,i.minRow),o=Math.max(o,i.maxRow)})),{minColumn:t,maxColumn:n,minRow:r,maxRow:o}}(t),l=a.minColumn,u=a.maxColumn,c=a.minRow,s=a.maxRow,d=0===c&&s===o-1,f=0===l&&u===i-1,h=O4e;d&&f?h=x4e:d&&i>1?h=C4e:f&&o>1&&(h=N4e);var p=l,v=u,m=c,g=s;return"end"!==n&&"topRight"!==n||(p=u,v=l),"end"!==n&&"bottomLeft"!==n||(m=s,g=c),{type:h,startColumn:p,endColumn:v,startRow:m,endRow:g}}(Vy(o.parentNode.parentNode.parentNode),t,n))):this._context.emit("resetSelection",{tableNode:null,isStable:e})}},{key:"_checkSelectionChange",value:function(e){var t=gc(e[0].commonAncestorContainer,"table"),n=this._isFocusAtTable;this._isFocusAtTable=!!t,n!==this._isFocusAtTable&&(this._context.headDisabled||this.renderer.emitPluginEvent("afterTableSelectionChanged",{tableNode:t}))}}])}(Jg);function i6e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,a6e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function a6e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(a6e=function(){return!!e})()}Object.defineProperty(o6e,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:w3.pluginName}),Object.defineProperty(o6e,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:x5e});var l6e=function(e){function t(){return(0,Ke.A)(this,t),i6e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this;this.kernel.on("document.create",(function(){var n=e.queryCommandValue("typography"),r=e.domRootNode.classList;r.remove("ne-typography-".concat(n$),"ne-typography-".concat(t$),"ne-paragraph-spacing-relax"),r.add("ne-typography-".concat(n)),r.remove("ne-paragraph-spacing-relax"),t.kernel.requireService(aW.ID).getParagraphSpacing()===w6&&r.add("ne-paragraph-spacing-relax")})),e.kernel.onPluginEvent("typographyChange",(function(t){var n=t.current,r=t.old,o=e.domRootNode.classList;o.remove("ne-typography-".concat(r)),o.add("ne-typography-".concat(n)),e.emit("typographyChange",{current:n,old:r})})),e.kernel.onPluginEvent("paragraphSpacingChange",(function(t){var n=t.current,r=t.old,o=e.domRootNode.classList;o.remove("ne-paragraph-spacing-relax"),n===w6&&o.add("ne-paragraph-spacing-relax"),e.emit("paragraphSpacingChange",{current:n,old:r})}))}},{key:"destroy",value:function(){this.renderer.domRootNode.classList.remove("ne-typography-".concat(n$),"ne-typography-".concat(t$),"ne-paragraph-spacing-relax"),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}}])}(Jg);function u6e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,c6e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function c6e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c6e=function(){return!!e})()}Object.defineProperty(l6e,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:rW.pluginName});var s6e=.08,d6e=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=u6e(this,t),Object.defineProperty(n,"pluginContent",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(n,"_isResizing",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(n,"_widths",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(n,"_displayWidths",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(n,"_currentColumnsNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"_columnNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"_currentIndex",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(n,"lastLeft",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(n,"lastRight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(n,"_handleMove",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t=n._currentColumnsNode;bt(t,"plugins/columns/src/render/controllers/resizing-controller.ts:54");var r=n._widths,o=t.getBoundingClientRect().width,i=o-12*r.length+12,a=e/i;a>0?r[n._currentIndex]+=n.tryMoveToRight(r,n._currentIndex+1,a):r[n._currentIndex+1]+=n.tryMoveToLeft(r,n._currentIndex,-a),n._displayWidths=r.slice(0),n._tryAdjustWidths(n._displayWidths,o);for(var l=0,u=n._displayWidths.length;l<u;l++)t.children[l].style.flex=n._displayWidths[l]+"";n._updateNumber(n._displayWidths,i)}}),Object.defineProperty(n,"_handleEnd",{enumerable:!0,configurable:!0,writable:!0,value:function(){n._isResizing=!1,n.pluginContent.emit("finishResizing",{columnsNode:n._currentColumnsNode,widths:n._displayWidths}),n._columnNode.classList.remove("ne-columns-resizing"),n._columnNode=null,n._currentColumnsNode=null,n._widths=[],n._currentIndex=-1,n.lastLeft=0,n.lastRight=0}}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"startResize",value:function(e){var t=e.columnsContentNode,n=e.columnNode,r=e.viewNode,o=e.event;this._isResizing=!0,this._currentColumnsNode=t,this._columnNode=n,this._currentIndex=this._findIndex(t,n),this._widths=r.children.map((function(e){return e.attrs.width})),bt(this._currentIndex>=0,"plugins/columns/src/render/controllers/resizing-controller.ts:44"),this._columnNode.classList.add("ne-columns-resizing"),$d(o,this._handleMove,this._handleEnd,!0),this._updateNumber(this._widths,1e3)}},{key:"_getAdjustAtTenWidth",value:function(e,t,n){for(var r=.5*n/t,o=10;o<100;o+=10){var i=n*o/t;if(Math.abs(i-e)<=r)return i}return-1}},{key:"_isAdjustAtEqual",value:function(e,t,n){return Math.abs(e-t)<=n}},{key:"_tryAdjustWidths",value:function(e,t){var n=3===e.length?99:6===e.length?102:100,r=t/e.length,o=.5*t/n,i=e[this._currentIndex]*t,a=e[this._currentIndex+1]*t;if(Math.abs(r-i)<=o){var l=e[this._currentIndex];e[this._currentIndex]=r/t,e[this._currentIndex+1]+=l-e[this._currentIndex]}else if(Math.abs(r-a)<=o){var u=e[this._currentIndex+1];e[this._currentIndex+1]=r/t,e[this._currentIndex]+=u-e[this._currentIndex+1]}else{var c=this._getAdjustAtTenWidth(i,n,t),s=this._getAdjustAtTenWidth(a,n,t);if(-1!==c){var d=e[this._currentIndex];e[this._currentIndex]=c/t,e[this._currentIndex+1]+=d-e[this._currentIndex]}else if(-1!==s){var f=e[this._currentIndex+1];e[this._currentIndex+1]=s/t,e[this._currentIndex]+=f-e[this._currentIndex+1]}}}},{key:"_updateNumber",value:function(e,t){for(var n=3===e.length?99:6===e.length?102:100,r=t/e.length,o=this._currentColumnsNode,i=.5*t/n,a=0,l=e.length;a<l;a++){var u=o.children[a].children[2],c=e[a]*t;this._isAdjustAtEqual(c,r,i)?u.classList.add("is-adjust"):u.classList.remove("is-adjust"),u.innerText=(e[a]*n).toFixed(0)+"%"}}},{key:"_findIndex",value:function(e,t){for(var n=0,r=e.children.length;n<r;n++)if(e.children[n]===t)return n;return-1}},{key:"tryMoveToLeft",value:function(e,t,n){if(this.lastRight>0){var r=n;n-=this.lastRight,this.lastRight=Math.max(0,this.lastRight-r)}if(n<=0)return 0;for(var o=n;o>0&&t>=0;){if(e[t]-o>=s6e){e[t]-=o,o=0;break}o-=e[t]-s6e,e[t]=s6e,t--}return this.lastLeft+=o,n-o}},{key:"tryMoveToRight",value:function(e,t,n){if(this.lastLeft>0){var r=n;n-=this.lastLeft,this.lastLeft=Math.max(0,this.lastLeft-r)}if(n<=0)return 0;for(var o=n;o>0&&t<e.length;){if(e[t]-o>=s6e){e[t]-=o,o=0;break}o-=e[t]-s6e,e[t]=s6e,t++}return this.lastRight+=o,n-o}}])}(it);function f6e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,h6e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function h6e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h6e=function(){return!!e})()}var p6e=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=f6e(this,t),Object.defineProperty(n,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(n,"_resizingController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_headDisabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n._resizingController=new d6e(n),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"resizingController",get:function(){return this._resizingController}},{key:"_emitEvent",value:function(e,t,n){var r=gc(t,H9.domNode.columnsContent);r&&this.emit(e,{columnsNode:r.parentNode,columnsContentNode:r,columnNode:t,event:n})}},{key:"startResizing",value:function(e,t){0===t.button&&this._emitEvent("startResizing",e,t)}},{key:"hoverInColumn",value:function(e){this._emitEvent("hoverInColumn",e)}},{key:"hoverOutColumn",value:function(e){this._emitEvent("hoverOutColumn",e)}},{key:"enterColumnController",value:function(e,t){this._emitEvent("enterColumnController",e,t)}},{key:"leaveColomnController",value:function(e,t){this._emitEvent("leaveColumnController",e,t)}},{key:"emitColumnsShowAdd",value:function(e,t,n){this.renderer&&this.renderer.emitPluginEvent("columnsShowAdd",{domNode:e,columnsId:t,index:n})}},{key:"emitColumnsHideAdd",value:function(e){this.renderer&&this.renderer.emitPluginEvent("columnsHideAdd",{domNode:e})}},{key:"trySelectColumnEnd",value:function(e){return this.renderer.execCommand(H9.command.selectColumnEnd,e)}},{key:"deleteColumn",value:function(e){return this.renderer.execCommand(H9.command.columnDelete,e)}},{key:"deleteColumnByIndex",value:function(e,t){return this.renderer.execCommand(H9.command.columnDeleteByIndex,e,t)}},{key:"addColumn",value:function(e,t){return this.renderer.execCommand(H9.command.columnsAddColumn,e,t)}},{key:"updateWidths",value:function(e,t){this.renderer.execCommand(H9.command.columnsWidths,e,t)}},{key:"moveColumn",value:function(e,t,n){this.renderer.execCommand(H9.command.moveColumn,e,t,n)}},{key:"headDisabled",get:function(){return this._headDisabled},set:function(e){"boolean"==typeof e&&(this._headDisabled=e)}}])}(it);function v6e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,m6e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function m6e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m6e=function(){return!!e})()}var g6e=function(e){function t(){return(0,Ke.A)(this,t),v6e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"translate",value:function(e,t){return{type:fp.STYLE_NAME,name:"flex",value:t}}}])}(fp);function b6e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,y6e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function y6e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(y6e=function(){return!!e})()}var w6e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=b6e(this,t,arguments),Object.defineProperty(e,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_contentNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_controllerNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_borderNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_numberShowNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_adderNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_hoverNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_hoverIn",{enumerable:!0,configurable:!0,writable:!0,value:!1}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){this._rootNode=Ly.createElement(H9.domNode.column),this._contentNode=Ly.createElement(H9.domNode.columnContent),this._borderNode=Ly.createElement(H9.domNode.columnBorder),this._hoverNode=Ly.createElement(H9.domNode.columnHover),this._controllerNode=Ly.createElement(H9.domNode.columnController),this._numberShowNode=Ly.createElement("div"),this._adderNode=Ly.createElement("div"),this._controllerNode.contentEditable="false",this._borderNode.contentEditable="false",this._hoverNode.contentEditable="false",this._numberShowNode.className="ne-number-show",this._adderNode.className="columns-adder",this._borderNode.appendChild(this._hoverNode),this._rootNode.appendChild(this._borderNode),this._rootNode.appendChild(this._contentNode),this._rootNode.appendChild(this._numberShowNode),this._rootNode.appendChild(this._controllerNode),this._controllerNode.appendChild(this._adderNode),this._initEvent(),Ly.setAttributeByChange(this._rootNode,e)}},{key:"destroy",value:function(){delete this._rootNode,delete this._contentNode,delete this._controllerNode,delete this._borderNode,delete this._numberShowNode,delete this._adderNode,delete this._hoverNode,Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}},{key:"_initEvent",value:function(){var e=this;pc(this,this._rootNode,"mousedown",(function(t){t.target!==e._rootNode&&t.target!==e._borderNode||(t.preventDefault(),e.pluginContext.trySelectColumnEnd(e.viewNode.id))})),pc(this,this._controllerNode,"mousedown",(function(t){e.pluginContext.startResizing(e._rootNode,t)})),pc(this,this._adderNode,"mousedown",(function(e){e.stopPropagation(),e.preventDefault()}));var t=Qm()((function(t){e._hoverIn!==t&&(e._hoverIn=t,t?e.pluginContext.hoverInColumn(e._rootNode):e.pluginContext.hoverOutColumn(e._rootNode))}),50);pc(this,[this._borderNode,this._contentNode],"mouseover",(function(){t(!0)})),pc(this,[this._borderNode,this._contentNode],"mouseout",(function(){t(!1)})),pc(this,this._adderNode,"mouseenter",(function(t){e.pluginContext.enterColumnController(e._rootNode,t)})),pc(this,this._adderNode,"mouseleave",(function(t){e.pluginContext.leaveColomnController(e._rootNode,t)}))}},{key:"updateAttribute",value:function(e){Ly.syncDOMAttrChange(this._rootNode,e)}},{key:"getMainDOMNode",value:function(){return this._rootNode}},{key:"getContentDOMNode",value:function(){return this._contentNode}}])}(Sy);function A6e(e){var t=e.onClick;return Gu().createElement("div",{className:"columns-add-button",onClick:t},Gu().createElement(SC,{type:"t-add"}))}function k6e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,_6e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function _6e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_6e=function(){return!!e})()}var C6e=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=k6e(this,t),Object.defineProperty(r,"_columnsNode",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(r,"_addNode",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(r,"_currentIndex",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(r,"_handleClickAdd",{enumerable:!0,configurable:!0,writable:!0,value:function(){r.emit("add",r._currentIndex)}}),Gl().render(Gu().createElement(A6e,{onClick:r._handleClickAdd}),n),r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){delete this._columnsNode,delete this._addNode}},{key:"enterStartEndNode",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;e&&-1!==n&&requestAnimationFrame((function(){var r=t._columnsNode.getBoundingClientRect().left,o=e.getBoundingClientRect().x;t._addNode.style.left=o>r?o-r+11+"px":o-r+7+"px",t._currentIndex=n,t.emit("showAdd",n)}))}},{key:"enterColumnController",value:function(e){var t=this,n=e.querySelector("ne-column-controller");if(n){var r=this._findIndex(this._columnsNode,e);-1!==r&&requestAnimationFrame((function(){var e=t._columnsNode.getBoundingClientRect().left,o=n.getBoundingClientRect().x;t._addNode.style.left=o-e+5+"px",t._currentIndex=r+1,t.emit("showAdd",r+1)}))}}},{key:"_findIndex",value:function(e,t){for(var n=0,r=e.children.length;n<r;n++)if(e.children[n]===t)return n;return-1}}])}(it),N6e=document.createElement("div"),O6e=document.createElement("div");function x6e(e){var t=e.controller,n=e.onClick,r=e.onDragStart,o=e.onDragMove,i=e.onDragEnd,a=e.onDragCancel,l=e.onMouseEnter,u=e.onMouseLeave,c=e.onSelectChange,s=(0,Yu.useState)(!1),d=(0,tn.A)(s,2),f=d[0],h=d[1],p=(0,Yu.useState)(!1),v=(0,tn.A)(p,2),m=v[0],g=v[1],b=(0,Yu.useCallback)((function(){g(!0),t.emit("moveInRemoveBtn",!0)}),[g]),y=(0,Yu.useCallback)((function(){g(!1),t.emit("moveInRemoveBtn",!1)}),[g]),w=(0,Yu.useCallback)((function(){h(!f),c(!f)}),[f,h]),A=(0,Yu.useCallback)((function(e){e.dataTransfer.effectAllowed="move",e.dataTransfer.dropEffect="move",O6e.dataset.content=sc("正在移动1列分栏"),document.body.appendChild(N6e),e.dataTransfer.setDragImage(N6e,0,0);var t={destroy:function(){N6e.remove()}},n=!1,l=Wd((function(e){n||o(e.clientX,e.clientY)}),(function(e){return e.preventDefault(),{clientX:e.clientX,clientY:e.clientY}}));pc(t,document,"dragover",l,!1),pc(t,document,"dragenter",l,!1),pc(t,document,"drop",(function(e){n=!0,l.cancel(),e.preventDefault(),i(e.clientX,e.clientY)}),!1),pc(t,document,"dragend",(function(e){n=!0,l.cancel(),e.preventDefault(),t.destroy(),a()}),!1),r()}),[]);(0,Yu.useEffect)((function(){var e=function(){return h(!1)};return t.on("unlock",e),function(){t.off("unlock",e)}}),[t,h]);var k=Gu().createElement("div",{className:"columns-remove-button",onClick:n,draggable:!1,onMouseEnter:b,onMouseLeave:y},Gu().createElement(SC,{type:"t-remove"}));return Gu().createElement("div",{className:nk()("columns-drag-button",{selected:f,inRemoveBtn:m}),draggable:!m,onDragStart:A,onMouseEnter:l,onMouseLeave:u,onClick:w},k)}function E6e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,D6e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function D6e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(D6e=function(){return!!e})()}N6e.className="ne-ui-columns-drag-moving-tip",O6e.className="ne-ui-columns-drag-text",N6e.appendChild(O6e);var P6e="ne-column-drag-border",R6e="ne-column-dragging",S6e="selected",T6e="columns-in-selected",j6e="columns-remove-overlay",I6e=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=E6e(this,t),Object.defineProperty(r,"_columnsNode",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(r,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(r,"_columnNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(r,"_currentIndex",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(r,"_isInRemoveBtn",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(r,"_inLock",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(r,"_overlay",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(r,"_boundaryRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(r,"isColumnsNearRendererTop",{enumerable:!0,configurable:!0,writable:!0,value:function(){return r._columnsNode.getBoundingClientRect().top<r.renderer.getEditWrapRect().top}}),Object.defineProperty(r,"_handleDragCancel",{enumerable:!0,configurable:!0,writable:!0,value:function(){r.emit("hideDragPosInspector"),r._columnNode&&r._columnNode.classList.remove(R6e)}}),Object.defineProperty(r,"_handleDragEnd",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t=r._columnsNode.getBoundingClientRect(),n=t.left,o=t.right,i=Array.from(r._columnsNode.children).map((function(e){return e.getBoundingClientRect()})).reduce((function(e,t,r,o){return 0===r?e.push(n-12):e.push(o[r-1].right+5),e}),[]);i.push(o+10);var a=0;if(e>i[0])for(var l=0;l<i.length-1;l++)if(e>i[l]&&e<i[l+1]){a=Math.abs(i[l]-e)<Math.abs(e-i[l+1])?l:l+1;break}a!==r._currentIndex&&a!==r._currentIndex+1&&r.emit("dragEnd",{currentIndex:r._currentIndex,newIndex:a}),r.emit("hideDragPosInspector"),r._columnNode&&r._columnNode.classList.remove(R6e),r._inLock=!1,r._columnsNode&&r._columnsNode.parentNode.classList.remove(T6e),r.emit("unlock"),r.leaveColumnNode()}}),Object.defineProperty(r,"_handleMouseLeaveRemove",{enumerable:!0,configurable:!0,writable:!0,value:function(){r._inLock||(r._columnNode&&r._columnNode.classList.remove(P6e),r._isInRemoveBtn=!1,r.emit("leaveRemoveBtn"))}}),Object.defineProperty(r,"_handleClickRemove",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t;e.stopPropagation(),null===(t=r._overlay)||void 0===t||t.cancel(),r._overlay=null,r.emit("remove",r._currentIndex)}}),Object.defineProperty(r,"_handleLockSelect",{enumerable:!0,configurable:!0,writable:!0,value:function(e){r._columnNode&&e?(r._inLock=!0,r._columnsNode.parentNode.classList.add(T6e),r._columnNode.classList.add(S6e)):e||(r._columnNode&&(r._columnsNode.parentNode.classList.remove(T6e),r._columnNode.classList.remove(S6e)),r._inLock=!1)}}),Object.defineProperty(r,"_handleMouseEnterRemove",{enumerable:!0,configurable:!0,writable:!0,value:function(){r._columnNode&&r._columnNode.classList.add(P6e),r._isInRemoveBtn=!0}}),Object.defineProperty(r,"_handleDragStart",{enumerable:!0,configurable:!0,writable:!0,value:function(){r._columnNode&&r._columnNode.classList.add(R6e),r.emit("dragStart")}}),Object.defineProperty(r,"_handleDragMove",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t=r._columnsNode.getBoundingClientRect(),n=t.left,o=t.right,i=Array.from(r._columnsNode.children).map((function(e){return e.getBoundingClientRect()})).reduce((function(e,t,r,o){return 0===r?e.push(n-12):e.push(o[r-1].right+5),e}),[]);i.push(o+10);var a=i[0],l=0;if(e>i[0])for(var u=0;u<i.length-1;u++)if(e>i[u]&&e<i[u+1]){Math.abs(i[u]-e)<Math.abs(e-i[u+1])?(a=i[u],l=u):(a=i[u+1],l=u+1);break}l!==r._currentIndex&&l!==r._currentIndex+1?r.emit("showDragPosInspector",{pos:a-n}):r.emit("hideDragPosInspector")}}),Object.defineProperty(r,"forceRemove",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e;r._inLock=!1,r._isInRemoveBtn=!1,r._columnsNode&&r._columnsNode.parentNode.classList.remove(T6e),r._columnNode&&(null===(e=r._columnNode)||void 0===e||e.classList.remove(S6e)),r.leaveColumnNode(),r.emit("unlock")}}),Object.defineProperty(r,"updatePos",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e;r._columnNode&&r._columnsNode&&(r.isColumnsNearRendererTop()?r.forceRemove():(null===(e=r._boundaryRef.current)||void 0===e||e.updatePos(),r.emit("showRemove",r._currentIndex)))}}),r.initListen(),r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"isInRemoveBtn",get:function(){return this._isInRemoveBtn}},{key:"openOverlay",value:function(){this._columnNode&&(this.isColumnsNearRendererTop()||(this._overlay&&this._overlay.cancel(),this._overlay=aR.open({overlayClassName:j6e,autoClose:!1,targetNode:this._columnNode,containerNode:this.renderer.globalOverlayNode,reactComponent:Gu().createElement(nR,{targetNode:this._columnNode,placement:"top",allowClose:!1,visible:!0,offset:8,ref:this._boundaryRef},Gu().createElement(x6e,{controller:this,onClick:this._handleClickRemove,onSelectChange:this._handleLockSelect,onMouseEnter:this._handleMouseEnterRemove,onMouseLeave:this._handleMouseLeaveRemove,onDragStart:this._handleDragStart,onDragEnd:this._handleDragEnd,onDragCancel:this._handleDragCancel,onDragMove:this._handleDragMove}))})))}},{key:"initListen",value:function(){var e=this;pc(this,document,"click",(function(t){var n,r,o,i;if(Td(t.target)&&e._inLock&&e._columnNode){var a=null===(r=(n=t.target).closest)||void 0===r?void 0:r.call(n,"."+j6e),l=null===(i=(o=t.target).closest)||void 0===i?void 0:i.call(o,"ne-column");if(l===e._columnNode||a)return;e.forceRemove(),l&&e._columnsNode.contains(l)&&(e._columnNode=l,e._currentIndex=e._findIndex(e._columnsNode,l),e.openOverlay())}})),pc(this,document,"scroll",(function(){cs((function(){e.updatePos()}))}),!0),pc(this,window,"resize",(function(){cs((function(){e.updatePos()}))}))}},{key:"leaveColumnNode",value:function(){var e;this._columnNode&&(this._columnNode.classList.remove(S6e),this._columnNode.classList.remove(R6e),this._columnNode.classList.remove("ne-column-removing-border"),this._columnNode.classList.remove(P6e)),this._columnNode=null,null===(e=this._overlay)||void 0===e||e.cancel(),this._overlay=null}},{key:"_findIndex",value:function(e,t){for(var n=0,r=e.children.length;n<r;n++)if(e.children[n]===t)return n;return-1}},{key:"enterColumnNode",value:function(e){var t=this;if(!this._inLock){var n=this._findIndex(this._columnsNode,e);if(-1===n)return this.leaveColumnNode();this._columnNode!==e&&(this._columnNode&&this._columnNode.classList.remove(P6e),this._columnNode=e,requestAnimationFrame((function(){t._currentIndex=n,t.openOverlay(),t.emit("showRemove",n)})))}}},{key:"destroy",value:function(){var e;this.removeAllListeners(),null===(e=this._overlay)||void 0===e||e.cancel(),this._overlay=null,delete this._columnsNode,delete this._removeNode}}])}(it);function B6e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,M6e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function M6e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(M6e=function(){return!!e})()}var F6e="ne-columns-inserting",L6e="ne-columns-removable",U6e="ne-columns-resizing",V6e="ne-max-cols",H6e="show",z6e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=B6e(this,t,arguments),Object.defineProperty(e,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_contentNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_addNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_removeNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_addEndNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_moveInspector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_controller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_removeController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_isFocused",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_isResizing",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_isMaxCols",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_cancelLeaveAddTask",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_startResizing",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n,r,o=t.columnsNode,i=t.columnsContentNode,a=t.columnNode,l=t.event;e._rootNode===o?(e._isResizing=!0,e._rootNode.classList.add(U6e),null===(r=null===(n=e.pluginContext)||void 0===n?void 0:n.resizingController)||void 0===r||r.startResize({columnsContentNode:i,columnNode:a,event:l,viewNode:e.viewNode})):e._isResizing&&bt(!1,"plugins/columns/src/render/elements/columns-element.ts:276")}}),Object.defineProperty(e,"_finishResizing",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=t.columnsNode,r=t.widths;e._contentNode===n&&(bt(e._isResizing,"plugins/columns/src/render/elements/columns-element.ts:292"),e._isResizing=!1,e._rootNode.classList.remove(U6e),e.pluginContext.updateWidths(e.viewNode.id,r),e._removeController&&e._removeController.updatePos())}}),Object.defineProperty(e,"_mouseEnterAddArea",{enumerable:!0,configurable:!0,writable:!0,value:function(){e._rootNode.classList.add(F6e)}}),Object.defineProperty(e,"_handleAddColumn",{enumerable:!0,configurable:!0,writable:!0,value:function(t){bt(e.viewNode.isElement(),"plugins/columns/src/render/elements/columns-element.ts:315");var n=e.viewNode.childCount;e._rootNode.classList.remove(F6e),e.pluginContext.addColumn(e.viewNode.id,t)&&n+1>=Lr&&!e._isMaxCols&&(e._isMaxCols=!0,e._rootNode.classList.add(V6e)),e._rootNode.dataset.cols=e.viewNode.childCount+""}}),Object.defineProperty(e,"_showRemoveBtn",{enumerable:!0,configurable:!0,writable:!0,value:function(){bt(e.viewNode.isElement(),"plugins/columns/src/render/elements/columns-element.ts:333"),e.viewNode.childCount>1?e._rootNode.classList.add(L6e):e._rootNode.classList.remove(L6e)}}),Object.defineProperty(e,"_handleRemoveColumn",{enumerable:!0,configurable:!0,writable:!0,value:function(t){bt(e.viewNode.isElement(),"plugins/columns/src/render/elements/columns-element.ts:354"),e.pluginContext.deleteColumnByIndex(e.viewNode.id,t)&&(e.tryRemoveMaxColsSelector(),e._rootNode.dataset.cols=e.viewNode.childCount+"")}}),Object.defineProperty(e,"_tryDeleteEmptyColumn",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=t.needRepair;bt(e.viewNode.isElement(),"plugins/columns/src/render/elements/columns-element.ts:368"),(null==n?void 0:n.closest("columns"))===e.viewNode&&e.viewNode.children.forEach((function(t,n){if(e.viewNode.isConnected&&(t.isEmpty()||1===t.childCount&&t.firstChild.isFillerNode()))return e._handleRemoveColumn(n)}))}}),Object.defineProperty(e,"_deleteColumn",{enumerable:!0,configurable:!0,writable:!0,value:function(t){bt(e.viewNode.isElement(),"plugins/columns/src/render/elements/columns-element.ts:391"),Ks.isBackspace(t)&&e.pluginContext.deleteColumn(e.viewNode.id)&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault(),e.tryRemoveMaxColsSelector(),e._rootNode.dataset.cols=e.viewNode.childCount+"")}}),Object.defineProperty(e,"_enterColumnNode",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=t.columnNode,r=t.columnsNode;e._rootNode===r&&e._controller&&e._controller.enterColumnController(n)}}),Object.defineProperty(e,"_leaveColumnNode",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=t.columnsNode;e._rootNode===n&&(e._cancelLeaveAddTask=od((function(){e._rootNode.classList.remove(F6e)}),300))}}),Object.defineProperty(e,"_enterAddNode",{enumerable:!0,configurable:!0,writable:!0,value:function(t){e._controller.enterStartEndNode(t.currentTarget,void 0===t.currentTarget?0:Number.MAX_VALUE)}}),Object.defineProperty(e,"_leaveAddNode",{enumerable:!0,configurable:!0,writable:!0,value:function(){e._cancelLeaveAddTask=od((function(){e._rootNode.classList.remove(F6e)}),300)}}),Object.defineProperty(e,"_enterAddButton",{enumerable:!0,configurable:!0,writable:!0,value:function(){e._cancelLeaveAddTask&&e._cancelLeaveAddTask()}}),Object.defineProperty(e,"_handleShowDragPosInspector",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=t.pos;e._moveInspector&&(e._moveInspector.classList.contains(H6e)||e._moveInspector.classList.add(H6e),e._moveInspector.style.left=n+"px")}}),Object.defineProperty(e,"_handleHideDragPosInspector",{enumerable:!0,configurable:!0,writable:!0,value:function(){e._moveInspector&&e._moveInspector.classList.remove(H6e)}}),Object.defineProperty(e,"_handleDragStart",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.renderer.emitPluginEvent("columnDragging",{columnsId:e.viewNode.id})}}),Object.defineProperty(e,"_handleDragEnd",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=t.currentIndex,r=t.newIndex;e.pluginContext&&e.pluginContext.moveColumn(e.viewNode.id,n,r)}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){this._rootNode=Ly.createElement(H9.domNode.columns),this._contentNode=Ly.createElement(H9.domNode.columnsContent),this._addNode=Ly.createElement("div"),this._removeNode=Ly.createElement("div"),this._addEndNode=Ly.createElement("div"),this._moveInspector=Ly.createElement("div"),this._rootNode.contentEditable="false",this._contentNode.contentEditable="true",this._addNode.className="columns-add",this._removeNode.className="columns-remove",this._addEndNode.className="columns-end-add",this._moveInspector.className="columns-move-inspector",bt(this.viewNode.isElement(),"plugins/columns/src/render/elements/columns-element.ts:69"),this._isMaxCols=this.viewNode.childCount>=Lr,this._isMaxCols&&this._rootNode.classList.add(V6e),this._rootNode.dataset.cols=this.viewNode.childCount+"",Us.mobile&&this._rootNode.classList.add("ne-columns-h5"),this._rootNode.appendChild(this._contentNode),this._rootNode.appendChild(this._addNode),this._rootNode.appendChild(this._removeNode),this._rootNode.appendChild(this._addEndNode),this._rootNode.appendChild(this._moveInspector),this._controller=new C6e(this._contentNode,this._addNode),this._removeController=new I6e(this._contentNode,this.renderer),this._initEvent(),Ly.setAttributeByChange(this._rootNode,e)}},{key:"_initEvent",value:function(){var e,t=this;xc(this,this.pluginContext,"resetSelection",(function(e){var n,r,o,i=e.columnsNode;t._rootNode===i||t._rootNode.parentNode===i?(t._isFocused||(t._isFocused=!0,t._rootNode.classList.add("ne-columns-focus","ne-focused")),t.renderer.emitPluginEvent("columnsFocus",{columnsId:t.viewNode.id,domNode:t._rootNode})):t._isFocused&&(t._isFocused=!1,null===(o=null===(r=null===(n=t._rootNode)||void 0===n?void 0:n.classList)||void 0===r?void 0:r.remove)||void 0===o||o.call(r,"ne-columns-focus","ne-focused",L6e),t.renderer.emitPluginEvent("columnsBlur",{columnsId:t.viewNode.id,domNode:t._rootNode}))})),pc(this,this._rootNode,"mouseover",(function(n){var r,o;if(clearTimeout(e),Td(n.target)&&!(null===(o=(r=n.target).closest)||void 0===o?void 0:o.call(r,"ne-card, ne-alert"))){var i={destroy:function(){}},a=t._rootNode,l=t.viewNode.id;e=setTimeout((function(){i.destroy(),t.renderer.emitPluginEvent("columnsFocus",{columnsId:l,domNode:a})}),200),pc(i,t._rootNode,"mouseleave",(function(){i.destroy(),clearTimeout(e)}))}})),pc(this,this._addNode,"mouseenter",this._enterAddButton),pc(this,this._addEndNode,"mouseenter",this._enterAddNode),pc(this,this._addEndNode,"mouseleave",this._leaveAddNode),pc(this,this._addNode,"mouseleave",this._leaveAddNode),xc(this,this.pluginContext,"enterColumnController",this._enterColumnNode),xc(this,this.pluginContext,"leaveColumnController",this._leaveColumnNode),xc(this,this.pluginContext,"startResizing",this._startResizing),xc(this,this.pluginContext,"finishResizing",this._finishResizing);var n=0;xc(this,this.pluginContext,"hoverInColumn",(function(e){var r=e.columnNode;e.columnsNode===t._rootNode&&(clearTimeout(n),t._removeController.enterColumnNode(r))})),xc(this,this._removeController,"leaveRemoveBtn",(function(){n=window.setTimeout((function(){var e,n,r;null===(r=null===(n=null===(e=t._rootNode)||void 0===e?void 0:e.classList)||void 0===n?void 0:n.remove)||void 0===r||r.call(n,L6e),t._removeController.leaveColumnNode()}),100)})),xc(this,this.pluginContext,"hoverOutColumn",(function(e){e.columnsNode!==t._rootNode||t._removeController.isInRemoveBtn||(n=window.setTimeout((function(){var e,n,r;null===(r=null===(n=null===(e=t._rootNode)||void 0===e?void 0:e.classList)||void 0===n?void 0:n.remove)||void 0===r||r.call(n,L6e),t._removeController.leaveColumnNode()}),100))})),xc(this,this.renderer,"contentchange",(function(){t._removeController.updatePos(),t.tryRemoveMaxColsSelector()})),xc(this,this._controller,"showAdd",this._mouseEnterAddArea),xc(this,this._controller,"add",this._handleAddColumn),xc(this,this._removeController,"showRemove",this._showRemoveBtn),xc(this,this._removeController,"remove",this._handleRemoveColumn),xc(this,this._removeController,"dragStart",this._handleDragStart),xc(this,this._removeController,"dragEnd",this._handleDragEnd),xc(this,this._removeController,"showDragPosInspector",this._handleShowDragPosInspector),xc(this,this._removeController,"hideDragPosInspector",this._handleHideDragPosInspector),pc(this,this._contentNode,"keydown",this._deleteColumn,!1),this.renderer.onPluginEvent("afterBrickMove",this._tryDeleteEmptyColumn)}},{key:"updateAttribute",value:function(e){Ly.syncDOMAttrChange(this._rootNode,e)}},{key:"getMainDOMNode",value:function(){return this._rootNode}},{key:"getContentDOMNode",value:function(){return this._contentNode}},{key:"tryRemoveMaxColsSelector",value:function(){bt(this.viewNode.isElement(),"plugins/columns/src/render/elements/columns-element.ts:344"),this.viewNode.childCount<Lr&&(this._isMaxCols=!1,this._rootNode.classList.remove(V6e))}},{key:"destroy",value:function(){Tr((0,Je.A)(t.prototype),"destroy",this).call(this),this.renderer.emitPluginEvent("columnsBlur",{columnsId:this.viewNode.id,domNode:this._rootNode}),this._controller&&this._controller.destroy(),delete this._controller,this._removeController&&this._removeController.destroy(),delete this._removeController}},{key:"_afterInit",value:function(){this._refreshWidthMode()}},{key:"$didUpdate",value:function(){this._refreshWidthMode()}},{key:"_refreshWidthMode",value:function(){var e,t=this._rootNode.parentNode;t&&((null===(e=this.viewNode.attrs)||void 0===e?void 0:e.widthMode)===Dl?t.classList.add("ne-full-width"):t.classList.remove("ne-full-width"))}}])}(Sy);function W6e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,q6e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function q6e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(q6e=function(){return!!e})()}var $6e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=W6e(this,t,arguments),Object.defineProperty(e,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this;this._context=new p6e(e),e.registerAttrTranslator(H9.attr.width,new g6e),e.registerBoxNode({columns:{clazz:z6e,pluginContext:this._context},column:{clazz:w6e,pluginContext:this._context}});var n=0;e.on("selectionchange",(function(e){var r=e.ranges,o=Date.now();requestAnimationFrame((function(){n>o||t._updateColumnsSelection(r)}))})),e.on("contentchange",(function(e){var r=e.ranges;n=Date.now(),requestAnimationFrame((function(){t._updateColumnsSelection(r)}))}))}},{key:"_updateColumnsSelection",value:function(e){var t,n=null===(t=e[0])||void 0===t?void 0:t.commonAncestorContainer;if(n){var r=gc(n,'ne-columns, ne-container-hole[data-card="columns"]');if(r){var o=gc(n,"ne-column");this._context.emit("resetSelection",{columnsNode:r,columnNode:o,ranges:e})}else this._context.emit("resetSelection",{columnsNode:null,columnNode:null,ranges:null})}}}])}(Jg);Object.defineProperty($6e,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:H9.pluginName});var K6e={tip:"",emptyParagraphTip:""},Y6e=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.setOption(t)}),[{key:"setOption",value:function(e){"string"==typeof e&&(e={tip:e}),this._option=Object.assign(Object.assign({},K6e),e)}},{key:"tip",get:function(){return this._option.tip}},{key:"emptyParagraphTip",get:function(){return this._option.emptyParagraphTip}}])}();function G6e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,J6e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function J6e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(J6e=function(){return!!e})()}Object.defineProperty(Y6e,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"placeholder"});var X6e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=G6e(this,t,arguments),Object.defineProperty(e,"_handler",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_lastTargetNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_handleParaPlaceholder",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t,n,r,o,i,a,l,u,c,s,d=e,f=d.renderer,h=d.engine,p=h.viewDocument.rootNode;do{var v=h.getViewSelection(),m=v.collapsed,g=v.anchorPosition;if(!m)break;if(!e.option.emptyParagraphTip&&p.childCount>2)break;if(g.node===p&&g.offset===p.childCount-1){s=p.children[g.offset];break}if(g.offset>1)break;if("right"===(null===(t=f.queryCommandValue("alignment"))||void 0===t?void 0:t[0]))break;if(Us.android&&0===g.offset&&(null===(n=g.node.nextSibling)||void 0===n?void 0:n.isBlockFillerNode())&&""!==(null===(o=null===(r=f.getVirtualNode(g.node.nextSibling))||void 0===r?void 0:r.getMainDOMNode())||void 0===o?void 0:o.innerText.trim()))break;var b=g.node.closest(qe.TextContainer);if("p"===(null==b?void 0:b.nodeName)&&(null===(a=null===(i=b.parent)||void 0===i?void 0:i.hasCategory)||void 0===a?void 0:a.call(i,[Rt]))&&b.parent.childCount<=2)break;"p"===(null==b?void 0:b.nodeName)&&((null==b?void 0:b.parent)===p||(null===(u=null===(l=null==b?void 0:b.parent)||void 0===l?void 0:l.hasCategory)||void 0===u?void 0:u.call(l,[Rt,Fr])))&&Q6e(b)&&(s=b)}while(0);if(e._clear(),s){var y=null===(c=f.getVirtualNode(s))||void 0===c?void 0:c.getMainDOMNode();e._addParaPlaceholder("#blockFiller"===s.nodeName?y:null==y?void 0:y.firstChild,e.getPlaceholder(p,s))}}}),Object.defineProperty(e,"_addParaPlaceholder",{enumerable:!0,configurable:!0,writable:!0,value:function(t,n){e._lastTargetNode&&e._lastTargetNode!==t&&(e._lastTargetNode.removeAttribute("data-placeholder"),e._lastTargetNode=null),t&&t.nodeType===Node.ELEMENT_NODE&&(e._lastTargetNode=t,t.setAttribute("data-placeholder",n))}}),Object.defineProperty(e,"_clear",{enumerable:!0,configurable:!0,writable:!0,value:function(){e._lastTargetNode&&(e._lastTargetNode.removeAttribute("data-placeholder"),e._lastTargetNode=null)}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this;this.option.tip&&(e.extendMethods({updatePlaceholder:function(e){t.option.setOption(e),t._handleParaPlaceholder()}}),e.on("contentchange",this._handleParaPlaceholder),e.on("selectionchange",this._handleParaPlaceholder),e.onRootNode("compositionstart",(function(){t._clear()})),e.onRootNode("compositionend",this._handleParaPlaceholder))}},{key:"getPlaceholder",value:function(e,t){return e.childCount>2?this.option.emptyParagraphTip:1===e.childCount||e.children[0]===t&&"#blockFiller"===e.children[1].nodeName?this.option.tip:this.option.emptyParagraphTip}}])}(Jg);function Q6e(e){var t,n,r;return!!e.isEmpty()||!(null===(t=e.attrs)||void 0===t?void 0:t.textIndent)&&!(null===(n=e.attrs)||void 0===n?void 0:n.indent)&&!(null===(r=e.attrs)||void 0===r?void 0:r.indent)&&e.children.every((function(e){return e.isTextNode()&&e.isEmpty()||e.isFillerNode()}))}Object.defineProperty(X6e,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:"placeholder"}),Object.defineProperty(X6e,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:Y6e});var Z6e=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0});var n={summaryPlaceholder:sc("请输入折叠卡片标题"),contentPlaceholder:sc("在此输入内容")};this._option=Object.assign(Object.assign({},n),t)}),[{key:"summaryPlaceholder",get:function(){return this._option.summaryPlaceholder||""}},{key:"contentPlaceholder",get:function(){return this._option.contentPlaceholder||""}}])}();function e8e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,t8e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function t8e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(t8e=function(){return!!e})()}Object.defineProperty(Z6e,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:Rt});var n8e=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=e8e(this,t),Object.defineProperty(r,"option",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(r,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:n}),r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"toggleFold",value:function(e){this.renderer.execCommand("collapseOpen",e)}},{key:"getFoldState",value:function(e){return this.renderer.queryCommandValue("collapseClosable",e)}},{key:"emitOpenChangeEvent",value:function(){return this.renderer.emitPluginEvent("collapseChange")}},{key:"getOption",value:function(){return this.option}}])}(it);function r8e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,o8e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function o8e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(o8e=function(){return!!e})()}var i8e=function(e){function t(){return(0,Ke.A)(this,t),r8e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=this.renderer.kernel).execCommand.apply(e,["collapse"].concat(n)),this.renderer.focus({})}}])}(qy);function a8e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,l8e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function l8e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(l8e=function(){return!!e})()}Object.defineProperty(i8e,"ID",{enumerable:!0,configurable:!0,writable:!0,value:V7.command.collapse});var u8e=function(e){function t(){return(0,Ke.A)(this,t),a8e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"translate",value:function(e,t){return{type:fp.ATTR_NAME,name:"ne-open",value:t}}}])}(fp);function c8e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,s8e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function s8e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s8e=function(){return!!e})()}var d8e=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=c8e(this,t),Object.defineProperty(r,"_foldNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r._context=n,r._foldNode=ad("div"),r._foldNode.className="ne-collapse-fold-container",e.appendChild(r._foldNode),r._render(),r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){this._foldNode.remove(),this._foldNode=null}},{key:"update",value:function(){this._render()}},{key:"_render",value:function(){var e=this,t=this._context.isOpen(),n=this._context.isDisabled();Gl().render(Gu().createElement(Qx,{trigger:"hover",title:sc(n?"当前禁止操作":t?"收起":"展开")},Gu().createElement("div",{className:Uf("ne-collapse-folding-inner",t?"":"ne-collapse-fold",n?"ne-collapse-fold-disabled":""),onMouseEnter:function(){e._context.queryState()},onMouseDown:function(e){return e.preventDefault()},onClick:function(){n||e._context.toggleOpen()}},Gu().createElement(SC,{type:t?"ReviewArrowDown":"ReviewArrowRight",size:16}))),this._foldNode)}}])}(it);function f8e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,h8e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function h8e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h8e=function(){return!!e})()}function p8e(e){return!(e.children.length>2)&&e.children.slice(1).every((function(e){var t,n,r;return(null===(t=e.isEmpty)||void 0===t?void 0:t.call(e))||(null===(r=null===(n=e.children)||void 0===n?void 0:n.every)||void 0===r?void 0:r.call(n,(function(e){var t,n,r;return(null===(t=e.isTextNode)||void 0===t?void 0:t.call(e))&&(null===(n=e.isEmpty)||void 0===n?void 0:n.call(e))||(null===(r=e.isFillerNode)||void 0===r?void 0:r.call(e))})))}))}var v8e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=f8e(this,t,arguments),Object.defineProperty(e,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_contentNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_controllerNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_prevPlaceholderNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_foldController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_isFocused",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_hasPlaceholder",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_observer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_onDOMChange",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t="";if(!p8e(e.viewNode)||e._contentNode.children.length>2)t="notEmpty";else for(var n=1;n<e._contentNode.children.length;n++)t+=e._contentNode.children[n].textContent;e._setPlaceholder(0===t.length),e._setEmptyCls(0===t.length)}}),Object.defineProperty(e,"_togglePlaceHolder",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=p8e(e.viewNode);e._setPlaceholder(t),e._setEmptyCls(t)}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this;this._rootNode=Ly.createElement("ne-collapse"),this._controllerNode=Ly.createElement("div"),this._contentNode=Ly.createElement("ne-collapse-content"),this._controllerNode.className="collapse-controller",this._rootNode.contentEditable="false",this._contentNode.contentEditable="true",this._rootNode.appendChild(this._contentNode),this._rootNode.appendChild(this._controllerNode),this._rootNode.appendChild(this._contentNode),this._foldController=new d8e(this._controllerNode,{isOpen:function(){var e,n;return"true"===(null===(n=null===(e=t.viewNode)||void 0===e?void 0:e.attrs)||void 0===n?void 0:n.open)},toggleOpen:function(){var e;t.pluginContext.toggleFold(null===(e=t.viewNode)||void 0===e?void 0:e.id)},isDisabled:function(){var e;return t.pluginContext.getFoldState(null===(e=t.viewNode)||void 0===e?void 0:e.id)===pt.UNAVAILABLE},queryState:function(){t._foldController.update()}}),this._bindEvents(),Ly.setAttributeByChange(this._rootNode,e)}},{key:"_afterInit",value:function(){this._refreshWidthMode()}},{key:"$didUpdate",value:function(){this._refreshWidthMode()}},{key:"_bindEvents",value:function(){var e,t=this;pc(this,this._rootNode,"mouseover",(function(n){var r,o;if(clearTimeout(e),Td(n.target)&&!(null===(o=(r=n.target).closest)||void 0===o?void 0:o.call(r,"ne-hole"))){var i={destroy:function(){}},a=t._rootNode,l=t.viewNode.id;e=window.setTimeout((function(){i.destroy(),t.renderer.emitPluginEvent("collapseHover",{collapseId:l,domNode:a})}),200),pc(i,t._rootNode,"mouseleave",(function(){i.destroy(),clearTimeout(e)}))}})),xc(this,this.pluginContext,"resetSelection",(function(e){var n,r=e.collapseNode;t._rootNode===r?(t._isFocused=!0,t._rootNode.classList.add("ne-columns-focus","ne-focused"),t.renderer.emitPluginEvent("collapseFocus",{collapseId:t.viewNode.id,domNode:t._rootNode})):t._isFocused&&(t._isFocused=!1,null===(n=t._rootNode)||void 0===n||n.classList.remove("ne-columns-focus","ne-focused"),t.renderer.emitPluginEvent("collapseBlur",{collapseId:t.viewNode.id,domNode:t._rootNode}))})),xc(this,this.renderer,"contentchange",this._togglePlaceHolder),this._observer=Js(this._onDOMChange),this._observer.observe(this._contentNode,{subtree:!0,characterData:!0,characterDataOldValue:!0,childList:!0})}},{key:"updateAttribute",value:function(e){var t=this;e.updated&&setTimeout((function(){var e,n;null===(n=null===(e=t._foldController)||void 0===e?void 0:e.update)||void 0===n||n.call(e),t.pluginContext.emitOpenChangeEvent()})),Ly.syncDOMAttrChange(this._rootNode,e)}},{key:"getMainDOMNode",value:function(){return this._rootNode}},{key:"getContentDOMNode",value:function(){return this._contentNode}},{key:"destroy",value:function(){var e,t;this.renderer.emitPluginEvent("collapseBlur",{collapseId:this.viewNode.id,domNode:this._rootNode}),this._foldController.destroy(),delete this._foldController,this._prevPlaceholderNode&&delete this._prevPlaceholderNode.dataset.placeholder,this._prevPlaceholderNode=null,null===(t=null===(e=this._observer)||void 0===e?void 0:e.disconnect)||void 0===t||t.call(e),this._observer=null,delete this._rootNode}},{key:"_refreshWidthMode",value:function(){var e,t=this._rootNode.parentNode;t&&((null===(e=this.viewNode.attrs)||void 0===e?void 0:e.widthMode)===Dl?t.classList.add("ne-full-width"):t.classList.remove("ne-full-width"))}},{key:"_getPlaceholderNode",value:function(){var e=this._contentNode.children[1];return"NE-P"!==(null==e?void 0:e.nodeName)?null:e}},{key:"_setPlaceholder",value:function(e){var t,n,r,o,i=this._getPlaceholderNode();e?this._hasPlaceholder&&(null===(t=null==i?void 0:i.dataset)||void 0===t?void 0:t.placeholder)||(this._hasPlaceholder=!0,this._prevPlaceholderNode&&this._prevPlaceholderNode!==i&&delete this._prevPlaceholderNode.dataset.placeholder,i&&(this._prevPlaceholderNode=i,i.dataset.placeholder=null===(o=null===(r=null===(n=this.pluginContext)||void 0===n?void 0:n.getOption)||void 0===r?void 0:r.call(n))||void 0===o?void 0:o.contentPlaceholder)):this._hasPlaceholder&&(this._hasPlaceholder=!1,this._prevPlaceholderNode&&(delete this._prevPlaceholderNode.dataset.placeholder,this._prevPlaceholderNode=null))}},{key:"_setEmptyCls",value:function(e){e?this._rootNode.classList.contains("content-empty")||this._rootNode.classList.add("content-empty"):this._rootNode.classList.contains("content-empty")&&this._rootNode.classList.remove("content-empty")}}])}(Sy);function m8e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,g8e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function g8e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(g8e=function(){return!!e})()}var b8e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=m8e(this,t,arguments),Object.defineProperty(e,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_hasPlaceHolder",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_observer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_onDOMChange",{enumerable:!0,configurable:!0,writable:!0,value:function(){e._setPlaceholder(0===e._rootNode.textContent.length)}}),Object.defineProperty(e,"_togglePlaceHolder",{enumerable:!0,configurable:!0,writable:!0,value:function(){e._setPlaceholder(function(e){var t,n,r;return!!e&&(!!(null===(t=e.isEmpty)||void 0===t?void 0:t.call(e))||!!e.isElement()&&(null===(r=null===(n=e.children)||void 0===n?void 0:n.every)||void 0===r?void 0:r.call(n,(function(e){var t,n,r;return(null===(t=e.isTextNode)||void 0===t?void 0:t.call(e))&&(null===(n=e.isEmpty)||void 0===n?void 0:n.call(e))||(null===(r=e.isFillerNode)||void 0===r?void 0:r.call(e))}))))}(e.viewNode))}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){this._rootNode=Ly.createElement("ne-summary"),this._bindEvents()}},{key:"_bindEvents",value:function(){xc(this,this.renderer,"contentchange",this._togglePlaceHolder),this._observer=Js(this._onDOMChange),this._observer.observe(this._rootNode,{subtree:!0,characterData:!0,characterDataOldValue:!0})}},{key:"destroy",value:function(){var e,n;Tr((0,Je.A)(t.prototype),"destroy",this).call(this),null===(n=null===(e=this._observer)||void 0===e?void 0:e.disconnect)||void 0===n||n.call(e),this._observer=null,delete this._rootNode}},{key:"getMainDOMNode",value:function(){return this._rootNode}},{key:"_setPlaceholder",value:function(e){var t,n,r;e?this._hasPlaceHolder||(this._hasPlaceHolder=!0,this._rootNode.dataset.placeholder=null===(r=null===(n=null===(t=this.pluginContext)||void 0===t?void 0:t.getOption)||void 0===n?void 0:n.call(t))||void 0===r?void 0:r.summaryPlaceholder):this._hasPlaceHolder&&(this._hasPlaceHolder=!1,delete this._rootNode.dataset.placeholder)}}])}(Sy);function y8e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,w8e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function w8e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(w8e=function(){return!!e})()}var A8e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=y8e(this,t,arguments),Object.defineProperty(e,"_isFocusAtColumns",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t,n,r){var o,i=this;this._context=new n8e(this.option,e),e.registerBoxNode({collapse:{clazz:v8e,pluginContext:this._context},summary:{clazz:b8e,pluginContext:this._context}}),e.registerAttrTranslator("open",new u8e),null===(o=e.getService(kRe.ID))||void 0===o||o.registerHotKey(CEe.breakLine.name,CEe.breakLine.keys,(function(e){r.queryCommandState("collapseBreakLine")===pt.NOT_EXECUTED&&(e.stop(),r.execCommand("collapseBreakLine"))}),dM);var a=0;e.on("selectionchange",(function(e){var t=e.ranges,n=(e.anchor,Date.now());requestAnimationFrame((function(){a>n||(i._updateCollapseSelection(t),i._checkSelectionChange(t))}))})),e.on("contentchange",(function(e){var t=e.ranges;a=Date.now(),requestAnimationFrame((function(){i._updateCollapseSelection(t),i._checkSelectionChange(t)}))})),e.on("collapseChange",(function(){i.kernel.emitPluginEvent("collapseChange")}))}},{key:"_updateCollapseSelection",value:function(e){var t,n=null===(t=e[0])||void 0===t?void 0:t.commonAncestorContainer;if(n&&!gc(n,"ne-hole")){var r=gc(n,"ne-collapse");r?this._context.emit("resetSelection",{collapseNode:r,ranges:e}):this._context.emit("resetSelection",{collapseNode:null})}}},{key:"_checkSelectionChange",value:function(e){var t=e[0].commonAncestorContainer,n=gc(t,"ne-hole"),r=gc(t,"ne-collapse");this._isFocusAtColumns=!n&&!!r}}])}(Jg);Object.defineProperty(A8e,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:V7.pluginName}),Object.defineProperty(A8e,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:Z6e}),Object.defineProperty(A8e,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[i8e]});var k8e={focus:!0,dropFile:!0,undo:!0,redo:!0,rollbackHistory:!0,insertCard:!0,deleteCard:!0,breakLine:!0,bold:!0,italic:!0,underline:!0,strikethrough:!0,color:!0,clearColor:!0,bgColor:!0,clearBgColor:!0,fontsize:!0,delete:!0,deleteByRange:!0,deleteToBlockEnd:!0,table:!0,deleteTable:!0,cut:!0,paste:!0,input:!0,indent:!0,outdent:!0,link:!0,insertLink:!0,linkText:!0,updateLink:!0,lineHeight:!0,paintFormat:!0,clearFormat:!0,translate:!0,label:!0,hr:!0,quote:!0,sub:!0,sup:!0,code:!0,search:!0,replaceText:!0,collapseBreakLine:!0},_8e={lineHeight:!0,fontsize:!0,color:!0,bold:!0,italic:!0,underline:!0,strikethrough:!0,clearColor:!0,bgColor:!0,clearBgColor:!0};function C8e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,N8e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function N8e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(N8e=function(){return!!e})()}var O8e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=C8e(this,t,arguments),Object.defineProperty(e,"shouldIgnoreScroll",{enumerable:!0,configurable:!0,writable:!0,value:!1}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"shouldIgnore",get:function(){return this.shouldIgnoreScroll}},{key:"shouldIgnoreAlways",value:function(){this.shouldIgnoreScroll=!0}},{key:"reset",value:function(){this.shouldIgnoreScroll=!1}},{key:"destroy",value:function(){}}])}(Lqe);function x8e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,E8e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function E8e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(E8e=function(){return!!e})()}var D8e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=x8e(this,t,arguments),Object.defineProperty(e,"_prevDispose",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this;this.kernel.editing.on("afterExecCommand",Qm()((function(n){var r=n.commandName;t.service.shouldIgnore||e.isFocus()&&k8e[r]&&(t._prevDispose&&t._prevDispose.dispose(),t._prevDispose=ys((function(){try{if(!_8e[r])return!0;var t=document.getSelection();if(!t||t.rangeCount<1)return!0;var n=t.getRangeAt(0).getBoundingClientRect(),o=e.getEditWrapRect();return!(n.top<o.bottom&&n.bottom>o.top)}catch(e){return!0}}),(function(t){t&&e.scrollToCurrentSelection(!1)})))}))),e.option.virtualRendering&&e.onPluginEvent("unblockSelectionChange",(function(n){var r=document.getSelection();if((null==r?void 0:r.rangeCount)&&n.ranges){var o=r.getRangeAt(0);if(o.startContainer===n.ranges[0].startContainer&&o.startOffset===n.ranges[0].startOffset&&o.endContainer===n.ranges[0].endContainer&&o.endOffset===n.ranges[0].endOffset)return}t._prevDispose&&t._prevDispose.dispose(),t._prevDispose=ys((function(){try{var t=document.getSelection();if(!t||t.rangeCount<1)return!0;var n=t.getRangeAt(0).getBoundingClientRect(),r=e.getEditWrapRect();return!(n.top<r.bottom&&n.bottom>r.top)}catch(e){return!0}}),(function(t){t&&e.scrollToCurrentSelection(!1)}))}))}},{key:"destroy",value:function(){var e;null===(e=this._prevDispose)||void 0===e||e.dispose()}}])}(Jg);function P8e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function R8e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,S8e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function S8e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(S8e=function(){return!!e})()}Object.defineProperty(D8e,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:jse.pluginName}),Object.defineProperty(D8e,"Service",{enumerable:!0,configurable:!0,writable:!0,value:O8e});var T8e=function(e){function t(e,n,r,o,i){var a;return(0,Ke.A)(this,t),a=R8e(this,t),Object.defineProperty(a,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(a,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(a,"nodeSearchMap",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(a,"searchText",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(a,"option",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(a,"_count",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(a,"_result",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(a,"_idMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(a,"_prevResult",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(a,"_ranges",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(a,"drawUI",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"handleChange",{enumerable:!0,configurable:!0,writable:!0,value:Qm()((function(){a._result.forEach((function(e){var t;null===(t=e.leave)||void 0===t||t.call(e)})),a._result.forEach((function(e){e.destroy()})),a._result=[],a._ranges=[],a._count=0,a.doSearch()}),300)}),Object.defineProperty(a,"viewportChange",{enumerable:!0,configurable:!0,writable:!0,value:function(e){a._result.forEach((function(e){var t;null===(t=e.viewportChange)||void 0===t||t.call(e)}))}}),a.drawUI=new sEe(n,a.activeColor,a.normalColor),a}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"count",get:function(){return this._count}},{key:"isIgnoreCase",get:function(){var e;return!!(null===(e=this.option)||void 0===e?void 0:e.ignoreCase)}},{key:"activeColor",get:function(){return this.option.activeColor||""}},{key:"normalColor",get:function(){return this.option.normalColor||""}},{key:"init",value:function(){xc(this,this.renderer,"contentchange",this.handleChange),xc(this,this.renderer,"viewportNodesChange",this.viewportChange)}},{key:"tryUnfoldId",value:function(e){this.renderer.execCommand("headingUnfold",e),this.renderer.execCommand("tryUnfoldCollapse",e)}},{key:"countChange",value:function(){var e=this;this._count=0,this._result.forEach((function(t){e._count+=t.count})),this.emit("change")}},{key:"doSearch",value:function(){var e,t=this;this._idMap.clear(),(null===(e=this.kernel.model.document)||void 0===e?void 0:e.rootNode)&&j8e(this.kernel.model.document.rootNode,(function(e){var n=t.nodeSearchMap.get(e.nodeName);if(!n)return!0;var r=n.onSearch(t,e,t.searchText);return r&&(t._idMap.set(r,e.id),t._result.push(r)),!1})),this._result=this._result.filter((function(e){return t._count+=e.count,e.count>0})),this.drawUI.drawRanges(this._ranges),this.emit("change")}},{key:"searchNode",value:function(e){var t=this.nodeSearchMap.get(e.nodeName);return t?t.onSearch(this,e,this.searchText):null}},{key:"createRange",value:function(e){var t,n,r=null===(t=this.renderer.kernel.document)||void 0===t?void 0:t.getNodeById(e.start.id),o=null===(n=this.renderer.kernel.document)||void 0===n?void 0:n.getNodeById(e.end.id);return bt((null==r?void 0:r.isConnected)&&(null==o?void 0:o.isConnected),"无法构造选区，节点不存在","plugins/search/src/render/helper/search-context.ts:142"),new Vt(new At(r,e.start.offset),new At(o,e.end.offset))}},{key:"addRange",value:function(e){var t,n=this;Array.isArray(e)?(t=this._ranges).push.apply(t,(0,ln.A)(e.map((function(e){return n.createRange(e)})))):this._ranges.push(this.createRange(e))}},{key:"jumpTo",value:function(e,t){var n=this,r=0;this.drawUI.setActive(null);var o=!1;return this._result.find((function(i){var a,l;if(e>=r&&e<r+i.count){n._prevResult&&(null===(l=(a=n._prevResult).leave)||void 0===l||l.call(a)),n._prevResult=i;var u=n._idMap.get(i);return u&&n.tryUnfoldId(u),i.jumpTo(e-r,t),o=(null==i?void 0:i.canReplace)?i.canReplace(e-r):!!(null==i?void 0:i.replace),!0}return r+=i.count,!1}))&&this.drawUI.refresh(),o}},{key:"jumpToRange",value:function(e,t,n){for(var r=-1,o=this._result.indexOf(e),i=0;i<o;i++)r+=this._result[i].searchRangeCount||0;(r+=t+1)<0||this.drawUI.jumpTo(r,n)}},{key:"replaceByRange",value:function(e,t){this.renderer.execCommand("replaceText",[e],t),this.handleChange()}},{key:"replace",value:function(e,t){var n=this,r=0;this.drawUI.setActive(null),this._result.find((function(o){var i,a,l;return e>=r&&e<r+o.count?(n._prevResult&&(null===(a=(i=n._prevResult).leave)||void 0===a||a.call(i)),n._prevResult=o,null===(l=null==o?void 0:o.replace)||void 0===l||l.call(o,e-r,t),!0):(r+=o.count,!1)}))&&this.handleChange()}},{key:"replaceAll",value:function(e){return this.renderer.execCommand("replaceAll",this._result,e)}},{key:"execCommand",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(t=this.renderer).execCommand.apply(t,[e].concat(r))}},{key:"setCardValue",value:function(e,t,n){var r=e.getNodeById(t);return!!r&&(e.setAttribute(r,"value",Object.assign(Object.assign({},r.attrs.value),n)),!0)}},{key:"scrollToViewNodeId",value:function(e){this.renderer.execCommand("headingUnfold",e),this.renderer.scrollByNodeId(e)}},{key:"destroy",value:function(){this.drawUI.destroy(),this._result.forEach((function(e){e.destroy()})),this._result=[],this._ranges=[]}}])}(it);function j8e(e,t){if(t(e)){var n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return P8e(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P8e(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(e.children);try{for(r.s();!(n=r.n()).done;)j8e(n.value,t)}catch(e){r.e(e)}finally{r.f()}}}function I8e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function B8e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,M8e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function M8e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(M8e=function(){return!!e})()}var F8e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=B8e(this,t,arguments),Object.defineProperty(e,"nodeSearchMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(e,"_currentContext",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"onSearch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.plugin.option;return this._currentContext&&this._currentContext.destroy(),this._currentContext=new T8e(this.kernel,this.renderer,this.nodeSearchMap,e,t),this._currentContext.init(),this._currentContext.doSearch(),this._currentContext}},{key:"registerNodeSearch",value:function(e,t){if(!Array.isArray(e))return this.registerNodeSearch([e],t);var n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return I8e(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I8e(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(e);try{for(r.s();!(n=r.n()).done;){var o=n.value;this.nodeSearchMap.set(o,t)}}catch(e){r.e(e)}finally{r.f()}}},{key:"destroy",value:function(){this._currentContext&&(this._currentContext.destroy(),this._currentContext=null),this.nodeSearchMap.clear()}}])}(fBe),L8e=function(){return(0,$e.A)((function e(t,n,r){var o=this;(0,Ke.A)(this,e),Object.defineProperty(this,"ctx",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"results",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_prevResult",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_count",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_searchRangeCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),n.forEach((function(e){if(Array.isArray(e)){var n,i=o.searchOnTextArray(e,r);i.length>0&&(o._count+=i.length,o._searchRangeCount+=i.length,(n=o.results).push.apply(n,(0,ln.A)(i)),t.addRange(i))}else o.results.push(e),o._count+=e.count}))}),[{key:"count",get:function(){return this._count}},{key:"searchRangeCount",get:function(){return this._searchRangeCount}},{key:"searchOnTextArray",value:function(e,t){var n=this,r=e.map((function(e){return e.isTextNode()?e.data:""})).join(""),o=gn.search(r,t,this.ctx.isIgnoreCase);return o?o.map((function(t){return{start:n.indexToPosition(e,t.from),end:n.indexToPosition(e,t.to)}})):[]}},{key:"indexToPosition",value:function(e,t){for(var n=0,r=0;r<e.length;r++){var o=e[r];bt(o.isTextNode(),"plugins/search/src/render/helper/text-container-search.ts:76");var i=o.data;if(n+i.length>t)return{id:o.id,offset:t-n};n+=i.length}var a=e[e.length-1];return bt(a.isTextNode(),"plugins/search/src/render/helper/text-container-search.ts:88"),{id:a.id,offset:a.data.length}}},{key:"jumpTo",value:function(e,t){var n=this,r=0;this.results.find((function(o){return"count"in o?e<r+o.count?(n.leave(),n._prevResult=o,o.jumpTo(e-r,t),!0):(r+=o.count,!1):e===r?(n.ctx.jumpToRange(n,n.searchRangeIndex(e),t),n.leave(),!0):(r+=1,!1)}))}},{key:"searchRangeIndex",value:function(e){for(var t=-1,n=0;n<=e;n++)"count"in this.results[n]||t++;return t}},{key:"canReplace",value:function(e){var t=0,n=!1;return this.results.find((function(r){return"count"in r?e<t+r.count?(n=r.canReplace?r.canReplace(e-t):!!r.replace,!0):(t+=r.count,!1):e===t?(n=!0,!0):(t+=1,!1)})),n}},{key:"replace",value:function(e,t){var n=this,r=0;this.results.find((function(o){var i;return"count"in o?e<r+o.count?(n.leave(),n._prevResult=o,null===(i=o.replace)||void 0===i||i.call(o,e-r,t),!0):(r+=o.count,!1):e===r?(n.ctx.replaceByRange(o,t),!0):(r+=1,!1)}))}},{key:"replaceAll",value:function(e,t){var n=[];if(this.results.forEach((function(r){var o;"count"in r?null===(o=r.replaceAll)||void 0===o||o.call(r,e,t):n.push(e.newRange(e.newPosition(e.getNodeById(r.start.id),r.start.offset),e.newPosition(e.getNodeById(r.end.id),r.end.offset)))})),n.length>0)return Go.replaceText(e,n,t)}},{key:"viewportChange",value:function(){this.results.forEach((function(e){var t;"count"in e&&(null===(t=e.viewportChange)||void 0===t||t.call(e))}))}},{key:"leave",value:function(){var e,t;this._prevResult&&(null===(t=(e=this._prevResult).leave)||void 0===t||t.call(e)),this._prevResult=null}},{key:"destroy",value:function(){this.results.forEach((function(e){"count"in e&&e.destroy()})),this.results.length=0}}])}(),U8e=function(){return(0,$e.A)((function e(){(0,Ke.A)(this,e)}),[{key:"onSearch",value:function(e,t,n){var r=[],o=null;return t.children.forEach((function(t){if("#text"===t.nodeName)Array.isArray(o)?o.push(t):(o=[t],r.push(o));else if(t.hasCategory(qe.Card)){o=null;var n=e.searchNode(t);n&&r.push(n)}else t.isElement()&&(o=null,t.children.forEach((function(t){if("#text"===t.nodeName)Array.isArray(o)?o.push(t):(o=[t],r.push(o));else if(t.hasCategory(qe.Card)){o=null;var n=e.searchNode(t);n&&r.push(n)}else o=null})),o=null)})),new L8e(e,r,n)}}])}();function V8e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,H8e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function H8e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(H8e=function(){return!!e})()}var z8e=function(e){function t(){return(0,Ke.A)(this,t),V8e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"execute",value:function(e){return this.plugin.service.onSearch(e,this.plugin.option)}}])}(qy);Object.defineProperty(z8e,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Iie.command.search});var W8e={ignoreCase:!1,activeColor:"#f00",normalColor:"#ff0"},q8e=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Ww()({},W8e,t)}),[{key:"ignoreCase",get:function(){return this._option.ignoreCase}},{key:"activeColor",get:function(){return this._option.activeColor}},{key:"normalColor",get:function(){return this._option.normalColor}}])}();function $8e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,K8e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function K8e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(K8e=function(){return!!e})()}Object.defineProperty(q8e,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:Iie.pluginName});var Y8e=function(e){function t(){return(0,Ke.A)(this,t),$8e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){this.service.registerNodeSearch(["p","oli","tli","uli","h1","h2","h3","h4","h5","h6"],new U8e)}}])}(Jg);Object.defineProperty(Y8e,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:Iie.pluginName}),Object.defineProperty(Y8e,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:q8e}),Object.defineProperty(Y8e,"Service",{enumerable:!0,configurable:!0,writable:!0,value:F8e}),Object.defineProperty(Y8e,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[z8e]});var G8e={error:"error",perf:"perf",user:"user"};function J8e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,X8e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function X8e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(X8e=function(){return!!e})()}var Q8e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=J8e(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),Object.defineProperty(e,"performance",{enumerable:!0,configurable:!0,writable:!0,value:new Jie}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Dw);function Z8e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,e9e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function e9e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(e9e=function(){return!!e})()}Object.defineProperty(Q8e,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze("IViewerMonitorService")});var t9e=function(e){function t(){return(0,Ke.A)(this,t),Z8e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length)eae(t[0],this.plugin.option),tae(t[0],this.plugin.option);else{var r=t[0],o=t[1],i=t[2];this.viewer.emitEvent("monitorLog",{code:r,data:o,error:i})}}},{key:"destroy",value:function(){this.performance.destroy()}}])}(Q8e),n9e=oUe()("ne:monitor"),r9e="editor_parse";function o9e(e,t,n){var r,o=t.kernel;if(n&&o){var i=n.plugin,a=n.performance,l=(null===(r=i.option.perfMonitor)||void 0===r?void 0:r.maxThreshold)||$ie;o.once("beforeSetDocument",(function(r,i){function u(){var o;if(a){a.markGroup(r9e,"renderEnd");var u=a.markGroupEnd(r9e);if(u){var c=u.parseEnd,s=u.renderEnd;if(!(c>l||s>l)){var d={m1:c||0,m2:s||0,m3:"string"==typeof i?i.length:(null===(o=i.children)||void 0===o?void 0:o.length)||0,m4:t.domRootNode.querySelectorAll("*").length,m5:c||0,m6:s||0},f={type:"perf",name:"docInitPerf",timestamp:Date.now(),data:{docType:r,parseTime:d.m1,renderTime:d.m2,nodeLength:d.m4}};n9e("parseTotal",d),"render"===e&&n.log(55,d),n.log(f)}}}}i&&a&&(a.markGroupStart(r9e),o.once("afterSetDocument",(function(){a.markGroup(r9e,"parseEnd")})),"render"===e&&(t.once("generalRenderCompleted",u),t.once("tileRenderCompleted",u)),"viewer"===e&&t.once("firstRender",u))}))}}function i9e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,a9e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function a9e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(a9e=function(){return!!e})()}var l9e=function(e){function t(){return(0,Ke.A)(this,t),i9e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){this.option.enable&&(this.setupParseTotal(),this.monitorUserAction())}},{key:"setupParseTotal",value:function(){o9e("viewer",this.viewer,this.service)}},{key:"monitorUserAction",value:function(){var e,t=this;(null===(e=this.option.userMonitor)||void 0===e?void 0:e.enable)&&this.viewer.on("userAction",(function(e){var n=e.type,r=e.name,o=e.source;"cardToolbar"===n&&t.service.log({type:"user",name:"miniToolbar",timestamp:Date.now(),data:{name:r,target:o}})}))}}])}(Sw);function u9e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,c9e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function c9e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c9e=function(){return!!e})()}Object.defineProperty(l9e,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:qie.pluginName}),Object.defineProperty(l9e,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:Qy(Gie)}),Object.defineProperty(l9e,"Service",{enumerable:!0,configurable:!0,writable:!0,value:t9e});var s9e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=u9e(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),Object.defineProperty(e,"performance",{enumerable:!0,configurable:!0,writable:!0,value:new Jie}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Yy);function d9e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,f9e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function f9e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(f9e=function(){return!!e})()}Object.defineProperty(s9e,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze("IMonitorService")});var h9e=function(e){function t(){return(0,Ke.A)(this,t),d9e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length)eae(t[0],this.plugin.option),tae(t[0],this.plugin.option);else{var r=t[0],o=t[1],i=t[2];this.renderer.emitEvent("monitorLog",{code:r,data:o,error:i})}}},{key:"destroy",value:function(){this.performance.destroy()}}])}(s9e),p9e={total:0,min:Number.MAX_VALUE,max:0},v9e=Object.assign({},p9e),m9e=Object.assign({},p9e),g9e=Object.assign({},p9e),b9e=0,y9e={keydown:0,input:0};function w9e(){1===y9e.keydown&&(performance.mark("keydown/end"),y9e.keydown=2)}function A9e(){performance.mark("input/start"),y9e.input=1,setTimeout(_9e)}function k9e(){1===y9e.input&&(performance.mark("input/end"),y9e.input=2)}function _9e(){2===y9e.keydown&&2===y9e.input&&(performance.mark("inputlatency/end"),performance.measure("keydown","keydown/start","keydown/end"),performance.measure("input","input/start","input/end"),performance.measure("inputlatency","inputlatency/start","inputlatency/end"),C9e("keydown",p9e),C9e("input",v9e),C9e("inputlatency",g9e),b9e++,performance.clearMarks("keydown/start"),performance.clearMarks("keydown/end"),performance.clearMarks("input/start"),performance.clearMarks("input/end"),performance.clearMarks("inputlatency/start"),performance.clearMarks("inputlatency/end"),performance.clearMeasures("keydown"),performance.clearMeasures("input"),performance.clearMeasures("inputlatency"),y9e.keydown=0,y9e.input=0)}function C9e(e,t){var n=performance.getEntriesByName(e)[0].duration;t.total+=n,t.min=Math.min(t.min,n),t.max=Math.max(t.max,n)}function N9e(e){return{average:e.total/b9e,max:e.max,min:e.min}}function O9e(e){e.total=0,e.min=Number.MAX_VALUE,e.max=0}var x9e=function(){_9e(),performance.mark("inputlatency/start"),performance.mark("keydown/start"),y9e.keydown=1,ch(w9e)},E9e=A9e,D9e=function(){0===y9e.input&&A9e(),ch(k9e)},P9e=function(){_9e()},R9e=function(){_9e()},S9e=function(){if(0!==b9e){var e={keydown:N9e(p9e),input:N9e(v9e),total:N9e(g9e),sampleCount:b9e};return O9e(p9e),O9e(v9e),O9e(m9e),O9e(g9e),b9e=0,e}};function T9e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var j9e=oUe()("ne:monitor"),I9e=function(){return(0,$e.A)((function e(t,n,r,o){(0,Ke.A)(this,e),Object.defineProperty(this,"service",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"option",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"_clearFns",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"lastMeasure",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}),[{key:"init",value:function(){this.startListen(),this.logYuyan()}},{key:"startListen",value:function(){var e;window.performance&&(this._clearFns.push(this.renderer.onRootNode("keydown",x9e,!0)),(null===(e=this.option.perfMonitor)||void 0===e?void 0:e.enable)&&this._clearFns.push(this.renderer.onRootNode("keydown",this.onKeydownLog.bind(this),!0)),this._clearFns.push(this.renderer.onRootNode("keyup",R9e,!0)),this._clearFns.push(this.renderer.onRootNode("beforeinput",E9e,!0)),this._clearFns.push(this.renderer.onRootNode("input",D9e,!0)),this._clearFns.push(this.renderer.onRootNode("selectionchange",P9e,!0)))}},{key:"logYuyan",value:function(){var e=this;this._clearFns.push(od((function(){var t=S9e()||e.lastMeasure;if(t&&e.service&&(e.lastMeasure=t,!(t.total.average>$ie))){var n={m1:t.total.average||0,m2:t.total.max||0,m3:t.keydown.average,d1:e.renderer.option.virtualRendering?"virtualRendering":e.renderer.option.isTileRendering()?"tileRendering":"normal"};j9e("inputLatency",n),e.service.log(9001,n)}}),6e4))}},{key:"onKeydownLog",value:function(){var e,t=this;this.timeout||(this.timeout=setTimeout((function(){var e,n,r=S9e()||t.lastMeasure;if(r&&(t.lastMeasure=r,!(r.total.average>((null===(e=t.option.perfMonitor)||void 0===e?void 0:e.maxThreshold)||$ie)))){var o={type:"perf",name:"inputPerf",timestamp:Date.now(),data:{inputLatency:r.total.average,keydownLatency:r.keydown.average,nodeLength:(null===(n=t.kernel.document)||void 0===n?void 0:n.rootNode.childCount)||0}};t.service.log(o),t.timeout=void 0}}),(null===(e=this.option.perfMonitor)||void 0===e?void 0:e.editTimeout)||Kie))}},{key:"destroy",value:function(){var e,t=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return T9e(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T9e(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(this._clearFns);try{for(t.s();!(e=t.n()).done;){var n=e.value;"function"==typeof n&&n()}}catch(e){t.e(e)}finally{t.f()}this.lastMeasure=void 0,this._clearFns=[],this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0)}}])}();function B9e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,M9e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function M9e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(M9e=function(){return!!e})()}var F9e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=B9e(this,t,arguments),Object.defineProperty(e,"monitorInputLatency",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){this.option.enable&&(this.setupParseTotal(),this.monitorCommandError(),this.monitorInputLatency=new I9e(this.service,this.renderer,this.kernel,this.option),this.monitorInputLatency.init())}},{key:"destroy",value:function(){var e;Tr((0,Je.A)(t.prototype),"destroy",this).call(this),null===(e=this.monitorInputLatency)||void 0===e||e.destroy(),this.monitorInputLatency=null}},{key:"setupParseTotal",value:function(){o9e("render",this.renderer,this.service)}},{key:"monitorCommandError",value:function(){var e,t=this;(null===(e=this.option.errorMonitor)||void 0===e?void 0:e.enable)&&this.renderer.on("commandExecuteError",(function(e){var n=e.error,r=e.detail;t.service.log({type:"error",name:"commandError",timestamp:Date.now(),data:{error:n,rank:1,commandName:r.commandName,args:r.args}})}))}}])}(Jg);function L9e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,U9e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function U9e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(U9e=function(){return!!e})()}Object.defineProperty(F9e,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:qie.pluginName}),Object.defineProperty(F9e,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:Gie}),Object.defineProperty(F9e,"Service",{enumerable:!0,configurable:!0,writable:!0,value:h9e});var V9e=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=L9e(this,t,[e]),Object.defineProperty(n,"state",{enumerable:!0,configurable:!0,writable:!0,value:{src:"",visible:!0,valid:!0}}),Object.defineProperty(n,"_srcRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(n,"_handleSrcKeyDown",{enumerable:!0,configurable:!0,writable:!0,value:function(e){if(Ks.isEscape(e))e.preventDefault(),n.props.onClose(),n.props.onCancel();else if(Ks.isEnter(e)){if(e.preventDefault(),!n.state.valid)return;if(n._srcRef.current){var t=n._srcRef.current.input.value;t&&(n.props.onClose(),n.props.onConfirm(t))}}}}),Object.defineProperty(n,"_handleSrcChange",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t=e.target.value;n.setState({src:t,valid:!t||n.props.isValidURL(t)})}}),Object.defineProperty(n,"_handleSubmit",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e;n.setState({visible:!1}),n._srcRef.current&&(e=n._srcRef.current.input.value),n.props.onClose(),e?n.props.onConfirm(e):n.props.onCancel()}}),n.state=Object.assign(Object.assign({},n.state),{visible:e.visible,src:e.src||""}),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){var e=this._srcRef.current;e&&(e.focus(),e.select())}},{key:"render",value:function(){var e=this,t=this._renderEditor();return Gu().createElement(nR,{targetNode:this.props.targetNode,placement:["rightBottom"],boundaryNode:this.props.boundaryNode,point:this.props.point,uiEmitter:this.props.uiEmitter,onClose:function(){e.props.onClose(),e.props.onCancel()},className:"ne-ui-overlay-bar-wrap",visible:this.state.visible},t)}},{key:"_renderEditor",value:function(){return Gu().createElement("div",{className:"ne-link-editor"},Gu().createElement("div",{className:"ne-link-editor-field"},Gu().createElement("label",null,Gu().createElement("div",{className:"ne-link-editor-field-title"},sc("链接")),Gu().createElement(KP,{ref:this._srcRef,placeholder:sc("链接地址"),onKeyDown:this._handleSrcKeyDown,onChange:this._handleSrcChange,value:this._getUserSrc(this.state.src)||""})),this._renderTip()),Gu().createElement(Mye,{onClick:this._handleSubmit,disabled:!this.state.src||!this.state.valid},sc("确定")))}},{key:"_renderTip",value:function(){return this.state.valid?null:Gu().createElement("div",{className:"ne-link-error-tip"},sc("请输入正确的链接"))}},{key:"_getUserSrc",value:function(e){return e===nM?void 0:e}}])}(Yu.Component);function H9e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,z9e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function z9e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(z9e=function(){return!!e})()}Object.defineProperty(V9e,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{visible:!0,allowModifyText:!0,isValidURL:function(e){return!1},onClose:function(){},onCancel:function(){},onConfirm:function(e){}}});var W9e=function(e){function t(){return(0,Ke.A)(this,t),H9e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this;e.onPluginEvent("insertBookmark",(function(){t._openEditor()}))}},{key:"_openEditor",value:function(){var e,t=this,n=this.renderer,r=this.renderer.kernel.requireService(KJ.ID),o=null===(e=document.getSelection())||void 0===e?void 0:e.getRangeAt(0);if(o&&n.domRootNode.contains(o.startContainer)){var i=n.domRootNode.getBoundingClientRect(),a=o.getBoundingClientRect();n.domRootNode===o.startContainer&&(a=o.startContainer.childNodes[o.startOffset].getBoundingClientRect()),a.x||(a=o.startContainer.parentNode.getBoundingClientRect());var l=i.x+16,u=Math.min(window.visualViewport.height-150,a.y+20);aR.open({containerNode:n.globalOverlayNode,targetNode:n.domRootNode,overlayClassName:n.theme.getThemeSelector(),reactComponent:Gu().createElement(V9e,{targetNode:n.domRootNode,uiEmitter:n.uiEmitter,boundaryNode:n.globalOverlayNode,isValidURL:function(e){return r.isValidURL(e)},point:{x:l,y:u},onCancel:function(){},onConfirm:function(e){e=r.transformURL(e),n.kernel.execCommand("insertBookmark",{src:e,text:e})}}),closeCallback:function(){t.renderer.execCommand("focus")}})}}}])}(Jg);function q9e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,$9e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function $9e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($9e=function(){return!!e})()}Object.defineProperty(W9e,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:"bookmark"});var K9e=function(e){function t(){return(0,Ke.A)(this,t),q9e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t,n,r){e.onRootNode("keydown",(function(t){if(299!==t.keyCode&&!t.metaKey&&!t.ctrlKey&&Ks.isEnter(t)){var n=r.queryCommandValue(xce.command.getSelectDateCard);n&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),e.emitPluginEvent(xce.eventName.openDateCardIdEditor,n))}}),!1)}}])}(Jg);Object.defineProperty(K9e,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:xce.pluginName});var Y9e=[D8e,jJe,D2e,f4e,i2e,zZe,$Je,QJe,oXe,lXe,EXe,RXe,lQe,pQe,wQe,DQe,SQe,FQe,WQe,XQe,EZe,RZe,UJe,GZe,p0e,b0e,C0e,V0e,g1e,_1e,O1e,L1e,q1e,d2e,S2e,M2e,pqe,b4e,o6e,l6e,$6e,X6e,A8e,Y8e,F9e,W9e,K9e];function G9e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,J9e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function J9e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(J9e=function(){return!!e})()}var X9e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=G9e(this,t,arguments),Object.defineProperty(e,"getClassName",{enumerable:!0,configurable:!0,writable:!0,value:Xs("ne-card-file")}),Object.defineProperty(e,"handleClick",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n;null===(n=e.props)||void 0===n||n.onClick(t)}}),Object.defineProperty(e,"renderIcon",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=e.props.cardData.getStatus(),n=e.props.getExtIcon(e.props.cardData);return t===zH.Done?Gu().createElement("span",{className:e.getClassName("icon")},Gu().createElement(SC,{type:"ext-".concat(n)})):null}}),Object.defineProperty(e,"renderName",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=e.props.cardData.getName();return Gu().createElement("span",{className:e.getClassName("name"),"data-testid":e.getClassName("viewer-name")},t)}}),Object.defineProperty(e,"renderFileSize",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=e.props.cardData.getSize();if(t){var n=Dh(t);if(n)return Gu().createElement("span",{className:e.getClassName("size"),"data-testid":e.getClassName("viewer-size")},"(",n,")")}return null}}),Object.defineProperty(e,"renderSimpleMode",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=e.props.getDownloadUrl(),n=e.props.cardData.getName();return Gu().createElement(Qx,{overlayClassName:e.getClassName("inline-tooltip"),title:e.props.tooltip||null},Gu().createElement("a",{href:e.props.canDownload(e.props.cardData)?yh.sanitizeUrl(t):"",target:"_blank",onClick:function(t){t.preventDefault(),t.stopPropagation(),e.handleClick(t.nativeEvent)}},"📎",n))}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"renderError",value:function(){var e=this.props.cardData.getName(),t=this.props.cardData.getMessage(),n=this.props.cardData.toJSON();return Gu().createElement(J_e,{block:!1,cardIcon:Gu().createElement(SC,{type:"upload-error",size:20}),message:n},sc(t||"文件上传失败，请重试")," ",e)}},{key:"render",value:function(){var e=this,t=this.props.cardData.getStatus();if(t!==zH.Done)return this.renderError();if(this.props.viewerMode===Vw.Simple)return this.renderSimpleMode();var n=!this.props.canDownload(this.props.cardData)&&!this.props.canPreview(this.props.cardData),r=this.getClassName()+(n?" disable":"");return Gu().createElement("span",{className:r,"data-status":t,"data-testid":this.getClassName("viewer"),onClick:function(t){return e.handleClick(t.nativeEvent)}},Gu().createElement(Qx,{overlayClassName:this.getClassName("inline-tooltip"),title:this.props.tooltip||null},this.renderIcon(),this.renderName(),this.renderFileSize()))}}])}(Yu.Component);function Q9e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Q9e=function(){return!!e})()}function Z9e(e){return function(e){function t(){var e;return(0,Ke.A)(this,t),e=function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Q9e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,arguments),Object.defineProperty(e,"uiViewProxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"getOrigin",{enumerable:!0,configurable:!0,writable:!0,value:function(){return e.pluginOption.origin||("undefined"!=typeof location?location.origin:"")}}),Object.defineProperty(e,"downloadFile",{enumerable:!0,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(e,"getExtIcon",{enumerable:!0,configurable:!0,writable:!0,value:function(){return"default"}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e,t,n=this;this.uiViewProxy=Vye.render(X9e,{viewerMode:this.viewer.option.viewerMode,cardData:this.cardData,onClick:function(e){if(n.pluginOption.onViewerInlineFileClick)return n.pluginOption.onViewerInlineFileClick(e,n);var t=n.viewer.option.viewerMode===Vw.Present;Us.mobile||t||!n.pluginOption.canDownload(n.cardData)||n.downloadFile()},getDownloadUrl:this.getDownloadUrl,getExtIcon:this.getExtIcon,canDownload:this.pluginOption.canDownload,canPreview:this.pluginOption.canPreview,tooltip:null===(t=(e=this.pluginOption).viewerTooltip)||void 0===t?void 0:t.call(e,this)},this.containerNode)}},{key:"destroy",value:function(){Gl().unmountComponentAtNode(this.containerNode),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}},{key:"getFrom",value:function(){return this.pluginOption.from||this.viewer.option.currentURL||"undefined"!=typeof location?location.href:""}},{key:"getDownloadUrl",value:function(){return""}}])}(e)}var e7e=Z9e;function t7e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,n7e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function n7e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(n7e=function(){return!!e})()}var r7e=function(e){function t(e){var n;(0,Ke.A)(this,t),n=t7e(this,t,[e]),Object.defineProperty(n,"getClassName",{enumerable:!0,configurable:!0,writable:!0,value:Xs("ne-card-local-doc")}),Object.defineProperty(n,"renderCardView",{enumerable:!0,configurable:!0,writable:!0,value:function(){return Gu().createElement(uSe,{cardData:n.props.cardData,getPreviewUrl:n.props.getPreviewUrl,getDownloadUrl:n.props.getDownloadUrl,downloadFile:n.props.downloadFile,allowDownload:n.props.canDownload(n.props.cardData),allowPreview:n.props.canPreview(n.props.cardData),onPreview:n.props.onPreview,getExtIcon:n.props.getExtIcon,tooltip:n.props.tooltip})}}),Object.defineProperty(n,"renderEmbedView",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=n.props.cardData.getStatus(),t=null;return(e===zH.Uploading||e===zH.Pending)&&(t=Gu().createElement("div",{className:n.getClassName("expand-content-loading")},Gu().createElement(SC,{type:"loading",size:36,className:n.getClassName("expand-content-loading-icon")}))),Gu().createElement(fSe,{scrollNode:document.body,cardData:n.props.cardData,contentNode:t,renderIFrameUrl:n.state.renderIFrameUrl,getPreviewUrl:n.props.getPreviewUrl,getDownloadUrl:n.props.getDownloadUrl,getIFrameUrl:n.props.getIFrameUrl,downloadFile:n.props.downloadFile,allowDownload:n.props.canDownload(n.props.cardData),allowPreview:n.props.canPreview(n.props.cardData),onPreview:n.props.onPreview,getExtIcon:n.props.getExtIcon,tooltip:n.props.tooltip})}}),Object.defineProperty(n,"renderError",{enumerable:!0,configurable:!0,writable:!0,value:function(){return Gu().createElement(vSe,{cardData:n.props.cardData})}}),Object.defineProperty(n,"renderSimpleMode",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=n.props.canDownload(n.props.cardData)?n.props.getDownloadUrl():"";if(e){var t=n.props.cardData.getName();return Gu().createElement("a",{href:yh.sanitizeUrl(e),target:"_blank",onClick:function(e){e.preventDefault(),e.stopPropagation(),n.props.downloadFile()}},t)}return null}});var r=!1;return e.cardData.getStatus()===zH.Done&&(r=!0),n.state={renderIFrameUrl:r},n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){if(this.props.viewerMode===Vw.Simple)return this.renderSimpleMode();var e,t=this.props.cardData.getStatus(),n=this.props.cardData.isCardMode();return e=t===zH.Error?this.renderError():n?this.renderCardView():this.renderEmbedView(),Gu().createElement("div",{className:this.getClassName(),"data-testid":this.getClassName("viewer")},e)}}])}(Yu.Component);function o7e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(o7e=function(){return!!e})()}function i7e(e){return function(e){function t(){var e;return(0,Ke.A)(this,t),e=function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,o7e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,arguments),Object.defineProperty(e,"uiViewProxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"getFrom",{enumerable:!0,configurable:!0,writable:!0,value:function(){return e.pluginOption.from||e.viewer.option.currentURL||("undefined"!=typeof location?location.href:"")}}),Object.defineProperty(e,"getOrigin",{enumerable:!0,configurable:!0,writable:!0,value:function(){return e.pluginOption.origin||("undefined"!=typeof location?location.origin:"")}}),Object.defineProperty(e,"getPreviewUrl",{enumerable:!0,configurable:!0,writable:!0,value:function(){return""}}),Object.defineProperty(e,"getDownloadUrl",{enumerable:!0,configurable:!0,writable:!0,value:function(){return""}}),Object.defineProperty(e,"getIFrameUrl",{enumerable:!0,configurable:!0,writable:!0,value:function(){return""}}),Object.defineProperty(e,"downloadFile",{enumerable:!0,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(e,"getExtIcon",{enumerable:!0,configurable:!0,writable:!0,value:function(){return"default"}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e,t,n=this;this.uiViewProxy=Vye.render(r7e,{cardData:this.cardData,tooltip:null===(t=(e=this.pluginOption).viewerTooltip)||void 0===t?void 0:t.call(e,this),getPreviewUrl:this.getPreviewUrl,getDownloadUrl:this.getDownloadUrl,getIFrameUrl:this.getIFrameUrl,downloadFile:this.downloadFile,getExtIcon:this.getExtIcon,viewerMode:this.viewer.option.viewerMode,onPreview:function(){n.viewer.emitEvent("visitLink",yh.sanitizeUrl(n.getPreviewUrl()),!0)},canDownload:this.pluginOption.canDownload,canPreview:this.pluginOption.canPreview},this.containerNode)}},{key:"destroy",value:function(){Gl().unmountComponentAtNode(this.containerNode),this.uiViewProxy=null,Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}}])}(e)}var a7e=i7e;function l7e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,u7e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function u7e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(u7e=function(){return!!e})()}var c7e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=l7e(this,t,arguments),Object.defineProperty(e,"_ui",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){this.pluginOption.viewerBlockUI&&(t.$CardUI=this.pluginOption.viewerBlockUI),this._ui=this.viewer.createCardUI(this)}},{key:"destroy",value:function(){this._ui&&this._ui.destroy()}}])}(Mw);function s7e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,d7e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function d7e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(d7e=function(){return!!e})()}Object.defineProperty(c7e,"$CardData",{enumerable:!0,configurable:!0,writable:!0,value:ZH}),Object.defineProperty(c7e,"$CardUI",{enumerable:!0,configurable:!0,writable:!0,value:i7e(QA()())});var f7e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=s7e(this,t,arguments),Object.defineProperty(e,"_ui",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){this.pluginOption.viewerInlineUI&&(t.$CardUI=this.pluginOption.viewerInlineUI),this._ui=this.viewer.createCardUI(this)}},{key:"destroy",value:function(){var e;null===(e=this._ui)||void 0===e||e.destroy(),this._ui=null}}])}(Bw);function h7e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,p7e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function p7e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(p7e=function(){return!!e})()}Object.defineProperty(f7e,"$CardData",{enumerable:!0,configurable:!0,writable:!0,value:ZH}),Object.defineProperty(f7e,"$CardUI",{enumerable:!0,configurable:!0,writable:!0,value:Z9e(QA()())});var v7e=function(e){function t(){return(0,Ke.A)(this,t),h7e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerInlineCard(this,eM.FILE.NODE_NAME,f7e),e.registerInlineCard(this,eM.LOCAL_DOC.NODE_NAME,c7e)}}])}(Sw);Object.defineProperty(v7e,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:ez.pluginName}),Object.defineProperty(v7e,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:ISe});var m7e={copy:function(e,t){var n=document.createRange();n.selectNode(t.cardRootNode.parentNode),e.execCommand("copy",n)?mC.success(sc("复制成功")):mC.error(sc("复制失败"))},delete:function(e,t){e.execCommand("deleteCard",t.id),e.execCommand("focus",{preventScroll:!0})},copyLink:function(e,t){var n=e.option,r=n.currentURL,o=n.generateCardLink;if(r){var i=null==o?void 0:o(r,t.id);i?(ls()(i,{format:"text/plain"}),mC.success(sc("复制成功"))):mC.error(sc("复制失败"))}},spacing:function(e,t){t.cardData&&(t.cardData.toggleCardSpacing(),t.cardData.sync(!1))},maximize:function(e,t,n){t.enterMaxView(n.option)},widthMode:function(e,t){var n,r;null===(n=null==t?void 0:t.cardData)||void 0===n||n.toggleWidthMode(),null===(r=null==t?void 0:t.cardData)||void 0===r||r.sync(!1)}};function g7e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mini",n=arguments.length>2?arguments[2]:void 0;if(!e)return e;e=e.map((function(e){if("|"===e)return e;var r=e;if("string"!=typeof e?(r=e.name,e=Object.assign({onClick:m7e[r]},e)):e={name:r,onClick:m7e[r]},"copyLink"===r&&"function"!=typeof n.editor.option.generateCardLink)return null;var o=Object.assign(Object.assign({name:r},e),{cardData:n.cardData,onClick:function(){"string"!=typeof e&&e.onClick&&e.onClick(n.editor,n,e),n.editor.emitEvent("userAction",{type:"cardToolbar",name:r,source:"".concat(n.cardNode.viewNode.nodeName,"|").concat(t)})},onSelect:function(){var o;"string"!=typeof e&&e.onSelect&&(o=e).onSelect.apply(o,arguments),n.editor.emitEvent("userAction",{type:"cardToolbar",name:"".concat(r,"|").concat(arguments.length<=0?void 0:arguments[0]),source:"".concat(n.cardNode.viewNode.nodeName,"|").concat(t)})}});return"spacing"===r&&(o.isChecked=function(){var e;return(null===(e=n.cardData)||void 0===e?void 0:e.hasCardSpacing())||!1}),o})).filter(Boolean),n.editor.kernel&&n.editor.kernel.hasExtendMethod("isParagraphSpacingRelax")&&n.editor.kernel.isParagraphSpacingRelax()&&(e=UR.filter(e,["spacing"]));var r=n.editor.getService($R.ID);return r&&(e=UR.filter(e,r.getDisabledMiniToolbarItems())),n.editor.hasExtendMethod("getFilterMiniToolbarItems")&&(e=UR.filter(e,n.editor.getFilterMiniToolbarItems(n.cardNode.viewNode,e))),function(e){return gc(e,".ne-table")||gc(e,"ne-container-hole")||gc(e,"ne-alert-hole")}(n.cardRootNode)&&(e=UR.filter(e,["widthMode"])),UR.generateToolbarItems(e)}function b7e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b7e=function(){return!!e})()}function y7e(e){return function(e){function t(){var e;return(0,Ke.A)(this,t),e=function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,b7e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,arguments),Object.defineProperty(e,"_cardToolbar",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getCardToolbarConfig",value:function(){return null}},{key:"showCardToolbar",value:function(){var e,t=this.editor,n=t.scrollNode,r=t.innerOverlayContainer;this._cardToolbar=UR.updateCardToolbar(this.cardRootNode,r,n,g7e(this.getCardToolbarConfig(),"mini",this),{autoClose:this.handleCardToolbarAutoClose.bind(this),showMiniToolbarWhen:null===(e=this.pluginOption)||void 0===e?void 0:e.showMiniToolbarWhen})}},{key:"updateCardToolbarPos",value:function(){UR.updateCardToolbarPos(this.cardRootNode)}},{key:"destroyCardToolbar",value:function(){UR.destroyCardToolbar(this.cardRootNode),this._cardToolbar=null}},{key:"handleCardToolbarAutoClose",value:function(){var e;return"focus"!==(null===(e=this.pluginOption)||void 0===e?void 0:e.showMiniToolbarWhen)}}])}(e)}function w7e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(w7e=function(){return!!e})()}function A7e(e){return function(e){function t(){return(0,Ke.A)(this,t),function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,w7e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getContainerRightToolbarConfig",value:function(){return null}},{key:"onClickContainerRightToolbarBackground",value:function(){this.focusCardTo(aM)}},{key:"showContainerRightToolbar",value:function(){var e,t;if(!(null===(t=(e=this.editor).isNoteMiniEditor)||void 0===t?void 0:t.call(e))){var n=this.editor,r=n.editBox,o=n.innerOverlayContainer;UR.updateContainerRightToolbar(this.cardRootNode,r,o,this._transformContainerRightToolbarConfig(this.getContainerRightToolbarConfig()))}}},{key:"updateContainerRightToolbarPos",value:function(){UR.updateContainerRightToolbarPos(this.cardRootNode)}},{key:"destroyContainerRightToolbar",value:function(){UR.destroyContainerRightToolbar(this.cardRootNode)}},{key:"_transformContainerRightToolbarConfig",value:function(e){return e?Object.assign(Object.assign({},e),{items:g7e(e.items,"containerRight",this),minHeight:this.cardRootNode.getBoundingClientRect().height,paddingLeft:VR,clickBackgroundHandle:this.onClickContainerRightToolbarBackground.bind(this)}):e}}])}(e)}function k7e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(k7e=function(){return!!e})()}function _7e(e){return function(e){function t(){return(0,Ke.A)(this,t),function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,k7e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getContainerToolbarConfig",value:function(){return null}},{key:"onClickContainerToolbarBackground",value:function(){}},{key:"onContainerToolbarDragStart",value:function(){}},{key:"handleCardContainerToolbarAutoClose",value:function(){var e;return"focus"!==(null===(e=this.pluginOption)||void 0===e?void 0:e.showMiniToolbarWhen)}},{key:"showContainerToolbar",value:function(){var e,t,n=this;if(!(null===(t=(e=this.editor).isNoteMiniEditor)||void 0===t?void 0:t.call(e))){var r=this.editor,o=r.editBox,i=r.innerOverlayContainer,a=r.renderer,l=r.scrollNode,u=UR.updateContainerToolbar(this.cardRootNode,o,i,l,this._transformContainerToolbarConfig(this.getContainerToolbarConfig()));u&&u.on("menuVisibleChange",(function(e){e&&a.focusCard(n.cardRootNode.parentNode)}))}}},{key:"updateContainerToolbarPos",value:function(){UR.updateContainerToolbarPos(this.cardRootNode)}},{key:"destroyContainerToolbar",value:function(){UR.destroyContainerToolbar(this.cardRootNode)}},{key:"_transformContainerToolbarConfig",value:function(e){var t,n=this;if(!e)return e;var r=this.editor.renderer;return Object.assign(Object.assign({},e),{onDragStart:this.onContainerToolbarDragStart.bind(this),onDrop:function(t){var o=t.node,i=t.offset,a=document.createRange();a.setStart(o,i),a.collapse(!0);var l=n.editor.engine.transformDOMRange(a);r.execCommand("moveCard",n._cardID,l.start),e.onDropEnd&&e.onDropEnd({node:o,offset:i})},autoClose:this.handleCardContainerToolbarAutoClose.bind(this),showMiniToolbarWhen:null===(t=this.pluginOption)||void 0===t?void 0:t.showMiniToolbarWhen,items:g7e(e.items,"container",this),minHeight:this.cardRootNode.getBoundingClientRect().height,clickBackgroundHandle:this.onClickContainerToolbarBackground.bind(this)})}}])}(e)}function C7e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(C7e=function(){return!!e})()}function N7e(e){return function(e){function t(){var e;(0,Ke.A)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];e=function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,C7e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,[].concat(r)),Object.defineProperty(e,"_needReset",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_cancelRefreshToolbarListener",{enumerable:!0,configurable:!0,writable:!0,value:void 0});var i=e.editor;return xc(e,i.editing,"afterExecCommand",(function(t){"alignment"===t.commandName&&e._refreshToolbar()})),e.editor.option.scene===pM&&(xc(e,i,"focusstatuschange",(function(t){t.focused||e.hideAllToolbar()})),pc(e,window,"blur",(function(){e.hideAllToolbar()}))),e._cancelRefreshToolbarListener=i.onPluginEvent("miniToolbar.requestRefreshToolbar",(function(){e._refreshToolbar()})),i.on("layoutChange",(function(){e._needReset&&e._refreshToolbar()})),i.renderer.onScroll((function(){e._needReset&&e._refreshToolbar()})),e.cardData&&(e.cardData.on("spacingChange",(function(){e._refreshToolbar()})),e.cardData.on("widthModeChange",(function(){e._refreshToolbar()}))),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"destroy",value:function(){var e;null===(e=this._cancelRefreshToolbarListener)||void 0===e||e.call(this),this._destroyToolbar(),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}},{key:"shouldHideToolbar",value:function(){return!0}},{key:"getToolbarControllerConfig",value:function(){}},{key:"refreshToolbar",value:function(){this._refreshToolbar()}},{key:"showAllToolbar",value:function(){this._refreshToolbar()}},{key:"refreshToolbarPos",value:function(){this._updateToolbarPos()}},{key:"hideAllToolbar",value:function(){this._destroyToolbar()}},{key:"_refreshToolbar",value:function(){this.shouldHideToolbar()?this._destroyToolbar():this._showToolbar()}},{key:"_showToolbar",value:function(){var e,t;this.editor.isMaxView||"never"===(null===(e=this.pluginOption)||void 0===e?void 0:e.showMiniToolbarWhen)||(this._needReset=!0,null===(t=this.getToolbarControllerConfig())||void 0===t||t.show())}},{key:"_updateToolbarPos",value:function(){var e;this.editor.isMaxView||null===(e=this.getToolbarControllerConfig())||void 0===e||e.updatePos()}},{key:"_destroyToolbar",value:function(){var e;this._needReset=!1,null===(e=this.getToolbarControllerConfig())||void 0===e||e.destroy()}}])}(e)}function O7e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,x7e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function x7e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(x7e=function(){return!!e})()}var E7e=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":(0,Gn.A)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};function D7e(e){var t=function(e){function t(){return(0,Ke.A)(this,t),O7e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t)}(e);return function(e){function t(){return(0,Ke.A)(this,t),O7e(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"shouldHideToolbar",value:function(){return!(this.isFocused||this.isHovered||this._cardToolbar&&this._cardToolbar.isFocusOrHover())}},{key:"getToolbarControllerConfig",value:function(){var e=this;return{show:function(){e.showContainerRightToolbar(),e.showCardToolbar(),e.showContainerToolbar()},updatePos:function(){e.updateContainerRightToolbarPos(),e.updateCardToolbarPos(),e.updateContainerToolbarPos()},destroy:function(){e.destroyContainerRightToolbar(),e.destroyCardToolbar(),e.destroyContainerToolbar()}}}},{key:"hover",value:function(e){this.showAllToolbar()}},{key:"handleCardToolbarAutoClose",value:function(){return!0}}])}(t=E7e([ap,y7e,_7e,N7e,A7e],t))}function P7e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function R7e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,S7e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function S7e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(S7e=function(){return!!e})()}var T7e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=R7e(this,t,arguments),Object.defineProperty(e,"miniToolbarPreOption",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getCardToolbarConfig",value:function(){if(!this.miniToolbarPreOption)return null;var e=this.miniToolbarPreOption(this);if(!e)return null;var t,n=[],r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return P7e(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P7e(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(e);try{var o=function(){var e=t.value;n.push({type:"react",name:e.name,render:function(){return Gu().createElement(e.component,{})}})};for(r.s();!(t=r.n()).done;)o()}catch(e){r.e(e)}finally{r.f()}return n}}])}(Hh.extend(D7e));function j7e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function I7e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,B7e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function B7e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(B7e=function(){return!!e})()}var M7e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=I7e(this,t,arguments),Object.defineProperty(e,"miniToolbarPreOption",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getCardToolbarConfig",value:function(){if(!this.miniToolbarPreOption)return null;var e=this.miniToolbarPreOption(this);if(!e)return null;var t,n=[],r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return j7e(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j7e(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(e);try{var o=function(){var e=t.value;n.push({type:"react",name:e.name,render:function(){return Gu().createElement(e.component,{})}})};for(r.s();!(t=r.n()).done;)o()}catch(e){r.e(e)}finally{r.f()}return n}}])}(XA.extend(uS));function F7e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,L7e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function L7e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(L7e=function(){return!!e})()}function U7e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,V7e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function V7e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(V7e=function(){return!!e})()}var H7e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=U7e(this,t,arguments),Object.defineProperty(e,"prevImgUrl",{enumerable:!0,configurable:!0,writable:!0,value:""}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentWillMount",value:function(){this.prevImgUrl=this.props.cardData.getDisplaySrc()}},{key:"render",value:function(){var e=this,t=this.props,n=t.cardData,r=t.ocr,o=t.lazyLoad,i=t.allowClickToMaximize,a=t.isIntersecting,l=t.innerButtonWidgets;if(n.isValid()){var u=!n.getLink(),c=Gu().createElement(nPe,{lazyLoad:o,allowMaximize:!0,clickToMaximize:u&&i,cardData:n,ocr:r,failConfig:this.props.failConfig,onPreviewImage:this.props.onPreviewImage,onImageSizeResolved:this.props.onImageSizeResolved,onLoaded:this.props.onLoaded,isIntersecting:a,generateDisplayUrl:this.props.generateDisplayUrl,setDisplayUrl:this.props.setDisplayUrl,innerButtonWidgets:l,themeSelector:this.props.themeSelector});if(n.getLink()){var s=n.isOpenLinkInSelf()?{}:{target:"_blank",rel:"noopener noreferrer"};return Gu().cloneElement(c,Object.assign(Object.assign({},c.props),{linkProps:Object.assign(Object.assign({href:yh.sanitizeUrl(n.getLink())},s),{onClick:function(t){"function"==typeof e.props.onOpenLink&&(t.preventDefault(),e.props.onOpenLink())}})}))}return c}return Gu().createElement(kDe,{width:n.getDisplayWidth(),height:n.getDisplayHeight(),onLoaded:this.props.onLoaded})}}])}(Yu.Component);function z7e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(z7e=function(){return!!e})()}function W7e(e){return function(e){function t(){var e;return(0,Ke.A)(this,t),e=function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,z7e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,arguments),Object.defineProperty(e,"_displayUrl",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"uiViewProxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"setDisplayUrl",{enumerable:!0,configurable:!0,writable:!0,value:function(t){e._displayUrl=t}}),Object.defineProperty(e,"getDisplayUrl",{enumerable:!0,configurable:!0,writable:!0,value:function(){return e.cardData.getDisplaySrc()}}),Object.defineProperty(e,"previewAllImage",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=e.cardNode.getAllImages();if(t){var n=0,r=t.map((function(t,r){return t.id===e.id&&(n=r),{src:t.src,msrc:t.msrc,size:t.size,w:t.width,h:t.height,layoutSelf:t.layoutSelf}}));e.viewer.emitEvent("previewImgs",r,n)}}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"isAsyncUI",value:function(){return!0}},{key:"init",value:function(){var e=this,t=!1;if(this.plugin.intersectionObserver&&this.pluginOption.lazyLoad){var n=this.containerNode.closest("ne-card");this.plugin.intersectionObserver.observe(n,(function(t,n){t.isIntersecting&&(e.uiViewProxy.rerender({isIntersecting:!0}),n.unobserve(t.target))})),pc(this,window,"beforeprint",(function t(){e.uiViewProxy.rerender({isIntersecting:!0}),e.plugin.intersectionObserver.unobserve(n),window.removeEventListener("beforeprint",t)}))}else t=!0;this.uiViewProxy=Vye.render(H7e,{themeSelector:function(){return e.viewer.theme.getThemeSelector()},cardData:this.cardData,ocr:this.pluginOption.isShowOcr()&&(this.pluginOption.supportImgOCR||!!this.plugin.viewer.option.get("supportImgOCR")),lazyLoad:this.pluginOption.lazyLoad,allowClickToMaximize:this.pluginOption.allowClickToMaximize,isIntersecting:t,generateDisplayUrl:this.getDisplayUrl,failConfig:this.pluginOption.failConfig,setDisplayUrl:this.setDisplayUrl,onPreviewImage:this.previewAllImage,onImageSizeResolved:function(t){var n=t.width,r=t.height;e.cardData.setImageOriginSize(n,r)},onLoaded:function(){e.loaded()},onOpenLink:function(){var t=e.cardData.isOpenLinkInSelf(),n=e.cardData.getLink();n&&e.viewer.emitEvent("visitLink",n,!t)},innerButtonWidgets:this.pluginOption.innerButtonWidgets.map((function(t){return Object.assign(Object.assign({},t),{execute:function(){t.execute(e)},enable:"function"==typeof t.enable?function(){return t.enable(e)}:function(){return!!t.enable}})}))},this.containerNode),this.cardData.showTitle()&&this.cardRootNode.classList.add("ne-image-card-show-title")}},{key:"destroy",value:function(){this.plugin.intersectionObserver&&this.plugin.intersectionObserver.unobserve(this.containerNode.closest("ne-card")),Gl().unmountComponentAtNode(this.containerNode),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}}])}(e)}var q7e=W7e;function $7e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,K7e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function K7e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(K7e=function(){return!!e})()}var Y7e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=$7e(this,t,arguments),Object.defineProperty(e,"_cardUI",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){this.pluginOption.viewerUI&&(t.$CardUI=this.pluginOption.viewerUI),this._cardUI=this.viewer.createCardUI(this)}},{key:"destroy",value:function(){var e;Tr((0,Je.A)(t.prototype),"destroy",this).call(this),null===(e=this._cardUI)||void 0===e||e.destroy(),this._cardUI=null}},{key:"getImageDisplaySrc",value:function(){return this._cardUI.getDisplayUrl()}},{key:"getAllImages",value:function(){var e=this.plugin.cardNodes;return e?e.map((function(e){if(!e.isConnected)return null;var t=e.cardData,n=t.getPreviewSrc();if(!n)return null;var r={id:e.id,src:n,msrc:e.getImageDisplaySrc()||n,size:t.getSize(),width:t.getRotationCropWidth(),height:t.getRotationCropHeight(),style:t.getStyle(),__spacing:t.getCardSpacing()};return t.isAfterEdit()&&t.isAfterEdit()&&(r.layoutSelf=function(){var e=document.createElement("div");return(null==n?void 0:n.startsWith("javascript:"))||(e.innerHTML='<div style="'.concat(pDe.toDivInlineStyle(t),'"></div>')),e}),r})).filter(Boolean):null}}])}(Bw);function G7e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,J7e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function J7e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(J7e=function(){return!!e})()}Object.defineProperty(Y7e,"$CardUI",{enumerable:!0,configurable:!0,writable:!0,value:W7e(QA()())}),Object.defineProperty(Y7e,"$CardData",{enumerable:!0,configurable:!0,writable:!0,value:KT}),window.addEventListener("beforeprint",(function(){document.querySelectorAll('.ne-viewer img[loading="lazy"]').forEach((function(e){e.loading="eager"}))}));var X7e=function(e){function t(){var e;return(0,Ke.A)(this,t),e=G7e(this,t,arguments),Object.defineProperty(e,"_intersectionObserver",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerInlineCard(this,QT.cardName,Y7e)}},{key:"intersectionObserver",get:function(){var e=!!new URL(document.location).searchParams.get("translate");return this._intersectionObserver||e||(this._intersectionObserver=As((function(){}),{rootMargin:"1000px 0px"})),this._intersectionObserver}}])}(Sw);function Q7e(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Z7e()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Z7e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Z7e=function(){return!!e})()}function eet(e){var t,n,r,o;e.upload||(e.upload={}),(null===(t=e.file)||void 0===t?void 0:t.getFileExtname)&&!(null===(n=e.upload)||void 0===n?void 0:n.getFileExtname)&&(e.upload.getFileExtname=e.file.getFileExtname),(null===(r=e.file)||void 0===r?void 0:r.acceptUtil)&&!(null===(o=e.upload)||void 0===o?void 0:o.acceptUtil)&&(e.upload.acceptUtil=e.file.acceptUtil)}Object.defineProperty(X7e,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:QT.pluginName}),Object.defineProperty(X7e,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:IPe});var tet=["className","component","viewBox","spin","rotate","tabIndex","onClick","children"],net=Yu.forwardRef((function(e,t){var n=e.className,r=e.component,o=e.viewBox,i=e.spin,a=e.rotate,l=e.tabIndex,u=e.onClick,c=e.children,s=(0,ak.A)(e,tet);hk(Boolean(r||c),"Should have `component` prop or `children`."),wk();var d=Yu.useContext(lk),f=d.prefixCls,h=void 0===f?"anticon":f,p=d.rootClassName,v=nk()(p,h,n),m=nk()((0,Ha.A)({},"".concat(h,"-spin"),!!i)),g=a?{msTransform:"rotate(".concat(a,"deg)"),transform:"rotate(".concat(a,"deg)")}:void 0,b=(0,ok.A)((0,ok.A)({},yk),{},{className:m,style:g,viewBox:o});o||delete b.viewBox;var y=l;return void 0===y&&u&&(y=-1),Yu.createElement("span",(0,ok.A)((0,ok.A)({role:"img"},s),{},{ref:t,tabIndex:y,onClick:u,className:v}),r?Yu.createElement(r,(0,ok.A)({},b),c):c?(hk(Boolean(o)||1===Yu.Children.count(c)&&Yu.isValidElement(c)&&"use"===Yu.Children.only(c).type,"Make sure that you provide correct `viewBox` prop (default `0 0 1024 1024`) to the icon."),Yu.createElement("svg",(0,ok.A)((0,ok.A)({},b),{},{viewBox:o}),c)):null)}));net.displayName="AntdIcon";const ret=net;var oet=["type","children"],iet=new Set;function aet(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=e[n];if(t=r,Boolean("string"==typeof t&&t.length&&!iet.has(t))){var o=document.createElement("script");o.setAttribute("src",r),o.setAttribute("data-namespace",r),e.length>n+1&&(o.onload=function(){aet(e,n+1)},o.onerror=function(){aet(e,n+1)}),iet.add(r),document.body.appendChild(o)}}function uet(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,cet()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function cet(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(cet=function(){return!!e})()}var set={"t-bold":"icon-bold","t-italic":"icon-italic","t-strikethrough":"icon-strikethrough","t-underline":"icon-underline","t-fullscreen":"icon-expand","t-exit-fullscreen":"icon-collapse","t-border-visible":"icon-editor-toggleBorder","t-table-cell-merge":"icon-editor-mergeCell","t-equally-column":"icon-t-equally-column","c-tb-maximize":"icon-maximize","c-tb-width-mode-fold":"icon-normal-width","c-tb-width-mode-unfold":"icon-full-width","toc-hide":"icon-toc-hide","toc-eye":"icon-toc-eye","toc-fold":"icon-toc-fold","toc-unfold":"icon-toc-unfold","icon-loading-desk":"icon-loading-desk","insertion-order":"icon-insertion-order",question:"icon-question","card-columns-2":"icon-card-columns-2","card-columns-3":"icon-card-columns-3","card-columns-4":"icon-card-columns-4","card-image":"icon-image","card-tb-title-view":"icon-tb-title-view","card-tb-card-view":"icon-tb-card-view","t-alignment-left":"icon-textalign-left","t-alignment-right":"icon-textalign-right","t-alignment-center":"icon-textalign-center","t-alignment-justify":"icon-textalign-justify","t-middle-align":"icon-textalign-middle","t-bottom-align":"icon-textalign-bottom","t-top-align":"icon-textalign-top","t-insert-card":"icon-insert-card","t-moremark":"icon-t-moremark","t-superscript":"icon-editor-sup","t-subscript":"icon-editor-sub","t-code":"icon-editor-inlinecode","t-unorder-list":"icon-editor-unorderedList","t-order-list":"icon-editor-orderedList","t-task-list":"icon-editor-taskList","t-quote":"icon-editor-quote","t-link":"icon-editor-link","t-hr":"icon-editor-hr","t-searchreplace":"icon-editor-findandreplace",check:"icon-check",close:"icon-delete",download:"icon-download",add:"icon-add","index-todo-list":"icon-index-todo-list","o-visit-link":"icon-o-visit-link","o-edit":"icon-o-edit","o-unlink":"icon-o-unlink","editor-indent":"icon-indent","editor-outdent":"icon-outdent","column-adaptation":"icon-column-adaptation","editor-undo":"icon-undo","editor-redo":"icon-redo","action-copy":"icon-action-copy","icon-delete":"icon-action-delete","c-tb-copy":"icon-action-copy","c-tb-delete":"icon-action-delete","t-remove":"icon-action-delete","more-horizontal":"icon-more-horizontal","arrow-up":"icon-arrow-up","arrow-left":"icon-arrow-left","arrow-down":"icon-arrow-down","arrow-right":"icon-arrow-right","menu-card-right-arrow":"icon-arrow-right","review-arrow-up":"icon-review-arrow-up","review-arrow-left":"icon-review-arrow-left","review-arrow-down":"icon-review-arrow-down",ReviewArrowDown:"icon-review-arrow-down",collapsed:"icon-review-arrow-down","review-arrow-right":"icon-review-arrow-right",ReviewArrowRight:"icon-review-arrow-right","up-arrow":"icon-up-arrow","left-arrow":"icon-left-arrow","down-arrow":"icon-down-arrow","right-arrow":"icon-right-arrow",drag:"icon-drag","menu-card-search":"icon-search","field-created-at":"icon-field-created-at","editor-format-painter":"icon-editor-formatPainter","editor-clear-format":"icon-editor-clearFormat","editor-lineHeight":"icon-editor-lineHeight","editor-fontsize":"icon-editor-fontsize","card-h1":"icon-editor-h1","card-h2":"icon-editor-h2","card-h3":"icon-editor-h3","card-h4":"icon-editor-h4","card-h5":"icon-editor-h5","card-h6":"icon-editor-h6","editor-main-image":"icon-图片-light","editor-main-imageDark":"icon-图片","editor-main-table":"icon-表格-light","editor-main-tableDark":"icon-表格","editor-main-attachment":"icon-附件-light","editor-main-attachmentDark":"icon-附件","editor-main-status":"icon-状态-light","editor-main-statusDark":"icon-状态","editor-main-reference":"icon-引用-light","editor-main-referenceDark":"icon-引用","editor-main-split-line":"icon-分割线-light","editor-main-split-lineDark":"icon-分割线","editor-main-highlight-block":"icon-高亮块-light","editor-main-highlight-blockDark":"icon-高亮块","editor-main-column-splitting":"icon-分栏-light","editor-main-column-splittingDark":"icon-分栏","editor-main-three-columns":"icon-三栏-light","editor-main-three-columnsDark":"icon-三栏","editor-main-four-columns":"icon-四栏-light","editor-main-four-columnsDark":"icon-四栏","editor-main-folding-block":"icon-折叠块-light","editor-main-folding-blockDark":"icon-折叠块","editor-main-code-block":"icon-代码块-light","editor-main-code-blockDark":"icon-代码块","editor-main-formula":"icon-公式-light","editor-main-formulaDark":"icon-公式","editor-main-local-file":"icon-本地文件-light","editor-main-local-fileDark":"icon-本地文件","editor-main-local-video":"icon-本地视频-light","editor-main-local-audio":"icon-本地音频-light","editor-main-local-audioDark":"icon-本地音频","editor-main-local-videoDark":"icon-本地视频","editor-main-task-list":"icon-任务列表-light","editor-main-task-listDark":"icon-任务列表","editor-main-ordered-list":"icon-有序列表-light","editor-main-ordered-listDark":"icon-有序列表","editor-main-unordered-list":"icon-无序列表-light","editor-main-unordered-listDark":"icon-无序列表","editor-main-title-1":"icon-标题1-light","editor-main-title-1Dark":"icon-标题1","editor-main-title-2":"icon-标题2-light","editor-main-title-2Dark":"icon-标题2","editor-main-title-3":"icon-标题3-light","editor-main-title-3Dark":"icon-标题3","editor-main-title-4":"icon-标题4-light","editor-main-title-4Dark":"icon-标题4","editor-main-title-5":"icon-标题5-light","editor-main-title-5Dark":"icon-标题5","editor-main-title-6":"icon-标题6-light","editor-main-title-6Dark":"icon-标题6","editor-main-inline-code":"icon-行内代码-light","editor-main-inline-codeDark":"icon-行内代码","editor-main-link":"icon-链接-light","editor-main-linkDark":"icon-链接link","editor-main-aite":"icon-艾特-light","editor-main-aiteDark":"icon-艾特","editor-main-calendar":"icon-日历-light","editor-main-calendarDark":"icon-日历","editor-main-text-drawing":"icon-文本绘图-light","editor-main-text-drawingDark":"icon-文本绘图","editor-main-date-dark":"icon-editor-main-date-dark","editor-main-date":"icon-editor-main-date","editor-main-vote":"icon-投票-light","editor-main-voteDark":"icon-投票","editor-main-drawing-board":"icon-画板-light","editor-main-drawing-boardDark":"icon-画板","editor-main-mind-map":"icon-思维导图-light","editor-main-mind-mapDark":"icon-思维导图","editor-main-uml":"icon-UML-light","editor-main-umlDark":"icon-UML","editor-main-flowchart":"icon-流程图-light","editor-main-flowchartDark":"icon-流程图","preview-new":"icon-ne-preview-new","card-mention-person":"icon-card-mention-person","card-mention-doc":"icon-card-mention-doc","ext-default":"icon-ext-default","table-head":"icon-table-head","row-head":"icon-row-head",brush:"icon-brush","col-head":"icon-col-head","card-tb-embed-view":"icon-embed-view"},det=function(e){function t(){var e;return(0,Ke.A)(this,t),e=uet(this,t,arguments),Object.defineProperty(e,"_cancelObserveThemeChange",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){var e,t=this;this._cancelObserveThemeChange=(null===(e=SC.themeObserver)||void 0===e?void 0:e.observe((function(){t.forceUpdate()})))||null}},{key:"componentWillUnmount",value:function(){var e;null===(e=this._cancelObserveThemeChange)||void 0===e||e.call(this)}},{key:"render",value:function(){var e;if(!this.props.type)return null;var t=this._transformLarkIconName(this.props.type);t=set[t]?t:this.props.type;var n=this.props.size,r=Uf(this.props.className,"ne-icon","ne-icon-kitchen","ne-icon-"+t),o={};n&&(o.fontSize=n+"px");var i="dark"===(null===(e=SC.themeObserver)||void 0===e?void 0:e.current)&&set[t+"Dark"]?set[t+"Dark"]:set[t],a=Gu().createElement("svg",{className:"ne-icon-symbol","aria-hidden":!0},Gu().createElement("use",{xlinkHref:"#".concat(i)}));return Gu().createElement("div",{className:r,"data-name":t,style:o},a)}},{key:"_transformLarkIconName",value:function(e){return e.replace(/^[a-z]|-[a-z0-9]/g,(function(e){return(e=e.toUpperCase())[1]||e[0]}))}}])}(Gu().Component);!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.KITCHEN_URL||"https://mdn.alipayobjects.com/design_kitchencore/afts/file/Z6SbTrmqJ1wAAAAAAAAAAAAADhulAQBr";(new Image).src="https://test.yuque.com/kitchen_v2.js",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.scriptUrl,n=e.extraCommonProps,r=void 0===n?{}:n;t&&"undefined"!=typeof document&&"undefined"!=typeof window&&"function"==typeof document.createElement&&(Array.isArray(t)?aet(t.reverse()):aet([t])),Yu.forwardRef((function(e,t){var n=e.type,o=e.children,i=(0,ak.A)(e,oet),a=null;return e.type&&(a=Yu.createElement("use",{xlinkHref:"#".concat(n)})),o&&(a=o),Yu.createElement(ret,(0,ok.A)((0,ok.A)((0,ok.A)({},r),i),{},{ref:t}),a)})).displayName="Iconfont"}({scriptUrl:e})}(),SC.shouldRenderCustom=function(e){return!!set[e]},SC.renderCustom=function(e){return Gu().createElement(det,Object.assign({},e))},SC.getSvgIcon=function(){return null},SC.renderFallback=function(e){return Gu().createElement(det,Object.assign({},e))};var fet=(new _y).registerEditorPlugin(yJe).registerRenderPlugin(Y9e).registerKernelPlugin(Nse);function het(e,t,n){var r,o,i;if(n){var a=(null===(r=n.editorPlugins)||void 0===r?void 0:r.filter((function(e){return!fet.editorPlugins.includes(e)})))||[],l=(null===(o=n.renderPlugins)||void 0===o?void 0:o.filter((function(e){return!fet.renderPlugins.includes(e)})))||[],u=(null===(i=n.kernelPlugins)||void 0===i?void 0:i.filter((function(e){return!fet.kernelPlugins.includes(e)})))||[];fet.registerEditorPlugin(a).registerRenderPlugin(l).registerKernelPlugin(u)}var c=function(e){var t;return e.file&&(t=e.file)&&(!t.editBlockUI&&t.blockMiniToolbar&&(t.editBlockUI=function(e){function n(){var e;return(0,Ke.A)(this,n),e=F7e(this,n,arguments),Object.defineProperty(e,"miniToolbarPreOption",{enumerable:!0,configurable:!0,writable:!0,value:null==t?void 0:t.blockMiniToolbar}),e}return(0,Xe.A)(n,e),(0,$e.A)(n)}(T7e.extend(wSe))),!t.editInlineUI&&t.inlineMiniToolbar&&(t.editInlineUI=function(e){function n(){var e;return(0,Ke.A)(this,n),e=F7e(this,n,arguments),Object.defineProperty(e,"miniToolbarPreOption",{enumerable:!0,configurable:!0,writable:!0,value:null==t?void 0:t.inlineMiniToolbar}),e}return(0,Xe.A)(n,e),(0,$e.A)(n)}(T7e.extend(USe)))),e.image&&function(e){e&&(e.editUI||(!e.showMiniToolbarWhen&&(e.showMiniToolbarWhen="focus"),e.editUI=function(t){function n(){var t;return(0,Ke.A)(this,n),t=Q7e(this,n,arguments),Object.defineProperty(t,"miniToolbarPreOption",{enumerable:!0,configurable:!0,writable:!0,value:null==e?void 0:e.miniToolbar}),t}return(0,Xe.A)(n,t),(0,$e.A)(n,[{key:"shouldHideToolbar",value:function(){var e,t=null===(e=this.pluginOption)||void 0===e?void 0:e.showMiniToolbarWhen,n=!0;return"hover"!==t&&t||(n=!(this.isFocused||this.isHovered||this._cardToolbar&&this._cardToolbar.isFocusOrHover())),"focus"===t&&(n=!(this.isFocused||this._cardToolbar&&this._cardToolbar.isFocusOrHover())),n}},{key:"onAfterCardFocus",value:function(){this.refreshToolbar()}},{key:"onBeforeCardBlur",value:function(){this.hideAllToolbar()}}])}(T7e.extend(lPe))))}(e.image),eet(e),e}(t);return fet.createEditor(e,Wf(function(e){return{typography:"classic",layout:"adapt",scrollNode:function(){return e.querySelector(".ne-editor-wrap")||document.scrollingElement||document.body},alert:fEe,toolbar:gye,slash:ude,file:Ese,fileReader:Pse,image:Rse,mention:Tse,video:bye,link:Sse,toc:yye,upload:pEe}}(e),c))}var pet=[pde.tableCellBgColor,pde.tableBorderVisible,pde.tableVerticalAlign,pde.tableMergeCell],vet=function(){function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.items=t||gye.agentConfig.table.items}return(0,$e.A)(e,[{key:"append",value:function(e){return this.items=this.items.concat(e),this}},{key:"insertBefore",value:function(e,t){if(!t)return this.append(e);var n=this.items.indexOf(t);return-1===n?(this.append(e),this):(this.items=[].concat((0,ln.A)(this.items.slice(0,n)),(0,ln.A)(Array.isArray(e)?e:[e]),(0,ln.A)(this.items.slice(n))),this)}},{key:"removeItems",value:function(e){return Array.isArray(e)?(this.items=this.items.filter((function(t){return!e.includes(t)})),this):this.removeItems([e])}},{key:"filterTablesItems",value:function(){return this.items.filter((function(e){return!pet.includes(e)}))}},{key:"getOption",value:function(){return{agentConfig:Object.assign(Object.assign({},gye.agentConfig),(0,Ha.A)((0,Ha.A)({},hde.TABLE,{items:this.items}),hde.DEFAULT,{items:this.filterTablesItems()})),force:!0,customComponent:Object.assign({},gye.customComponent)}}}],[{key:"start",value:function(t){return new e(t)}}])}();Object.defineProperty(vet,"toolbarItems",{enumerable:!0,configurable:!0,writable:!0,value:pde});var met={anchor:!1,folding:!0},get={protectURL:!0};function bet(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,yet()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function yet(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(yet=function(){return!!e})()}var wet=function(e){function t(){var e;return(0,Ke.A)(this,t),e=bet(this,t,arguments),Object.defineProperty(e,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){this._rootNode=ad("ne-alert")}},{key:"getMainDOMNode",value:function(){return this._rootNode}}])}(Qw);function Aet(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,ket()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function ket(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ket=function(){return!!e})()}var _et=function(e){function t(){return(0,Ke.A)(this,t),Aet(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerAttrTranslator("type",new RJe),e.registerBoxNode("alert",wet)}}])}(Sw);function Cet(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Net()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Net(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Net=function(){return!!e})()}Object.defineProperty(_et,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:"alert"}),Object.defineProperty(_et,"Colors",{enumerable:!0,configurable:!0,writable:!0,value:cT});var Oet=function(e){function t(){return(0,Ke.A)(this,t),Cet(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerAttrTranslator(rB.attr.alignment,new zJe)}}])}(Sw);function xet(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Eet()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Eet(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Eet=function(){return!!e})()}Object.defineProperty(Oet,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:rB.pluginName});var Det=function(e){function t(){return(0,Ke.A)(this,t),xet(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerAttrTranslator({bold:new GJe("bold"),italic:new GJe("italic"),underline:new GJe("underline"),strikethrough:new GJe("strikethrough"),emoji:new GJe("emoji")})}}])}(Sw);function Pet(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Ret()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Ret(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ret=function(){return!!e})()}Object.defineProperty(Det,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:OB.pluginName});var Tet=function(e){function t(){return(0,Ke.A)(this,t),Pet(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerAttrTranslator(FM.attr.bgColor,new tXe(e))}}])}(Sw);Object.defineProperty(Tet,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:FM.pluginName});var jet={isExport:!1,exportType:"",preventCopy:!1,preventCopyContainer:null,preventCopyMessage:null,optimizeGlobalViewerCopy:!1,optimizeViewerCopy:!0,docMaxWidth:void 0,globalCopyHelper:!0},Iet=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Ww()({},jet,t)}),[{key:"isExport",get:function(){return this._option.isExport}},{key:"exportType",get:function(){return this._option.exportType}},{key:"preventCopy",get:function(){return this._option.preventCopy}},{key:"preventCopyContainer",get:function(){return this._option.preventCopyContainer}},{key:"preventCopyMessage",get:function(){return this._option.preventCopyMessage}},{key:"optimizeGlobalViewerCopy",get:function(){return"function"==typeof this._option.optimizeGlobalViewerCopy?this._option.optimizeGlobalViewerCopy():this._option.optimizeGlobalViewerCopy}},{key:"optimizeViewerCopy",get:function(){return"function"==typeof this._option.optimizeViewerCopy?this._option.optimizeViewerCopy():this._option.optimizeViewerCopy}},{key:"docMaxWidth",get:function(){return this._option.docMaxWidth}},{key:"globalCopyHelper",get:function(){return this._option.globalCopyHelper}}])}();function Bet(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Met()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Met(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Met=function(){return!!e})()}Object.defineProperty(Iet,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"clipboard"});var Fet=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Bet(this,t,arguments),Object.defineProperty(e,"_copyNode",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("span")}),Object.defineProperty(e,"_initted",{enumerable:!0,configurable:!0,writable:!0,value:!1}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(){return dt}},{key:"getValue",value:function(){return!1}},{key:"init",value:function(){this._initted||(this._copyNode.className="ne-viewer-hidden-copy-node",this._copyNode.innerText="",document.body.appendChild(this._copyNode),this._initted=!0)}},{key:"execute",value:function(e){this.init();var t=document.getSelection();if(t){var n=t.focusNode,r=t.focusOffset,o=t.anchorNode,i=t.anchorOffset,a=document.createRange();a.selectNodeContents(this._copyNode),t.removeAllRanges(),t.addRange(a);var l=null;e&&(l=this.viewer.transformDOMRangeToViewRange(e)),this.plugin.setNextEventData({range:l});try{return document.execCommand("copy")}catch(e){return console.error(e),!1}finally{this.plugin.clearNextEventData(),t.setBaseAndExtent(o,i,n,r)}}}}])}(Ow);Object.defineProperty(Fet,"ID",{enumerable:!0,configurable:!0,writable:!0,value:GF.command.copy});var Let="text/html";function Uet(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Vet()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Vet(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Vet=function(){return!!e})()}var Het=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Uet(this,t,arguments),Object.defineProperty(e,"_nextEventData",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_handlePreventCopy",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=fXe.currentRange(),r=e.option,o=r.preventCopyContainer,i=r.preventCopyMessage;if(o||(o=e.viewer.domRootNode),n&&o){var a=n.startContainer,l=n.endContainer,u=n.commonAncestorContainer;(o.contains(a)||o.contains(l)||u.contains(o))&&(null==i||i(),t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault())}}}),Object.defineProperty(e,"_handleGlobalCopy",{enumerable:!0,configurable:!0,writable:!0,value:function(t){e.option.optimizeViewerCopy&&e._nextEventData&&(t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault(),e._doCopy(t))}}),Object.defineProperty(e,"_handleCopy",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n;if(e.option.optimizeViewerCopy){var r=null===(n=document.getSelection())||void 0===n?void 0:n.getRangeAt(0);if(r){var o=e.viewer.domRootNode;yc(r.commonAncestorContainer,o)||wc(r.startContainer,"block",o)||wc(r.endContainer,"block",o)||e._isInSameViewer(r)&&(t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault(),e._doCopy(t))}}}}),Object.defineProperty(e,"_isInSameViewer",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=e._getViewerNode(t.startContainer),r=e._getViewerNode(t.endContainer);return n&&r&&n===r}}),Object.defineProperty(e,"_getViewerNode",{enumerable:!0,configurable:!0,writable:!0,value:function(e){return gc(e,qw)}}),Object.defineProperty(e,"_isViewerSelection",{enumerable:!0,configurable:!0,writable:!0,value:function(t){return null!==e._getViewerNode(t)}}),Object.defineProperty(e,"_handleCrossCopy",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=t.clipboardData,r=fXe.currentRange();if(r&&!e._isInSameViewer(r)){var o=e._isViewerSelection(r.startContainer),i="";o&&(i=gc(r.startContainer,qw).getAttribute("id"));var a=e._isViewerSelection(r.endContainer),l="";a&&(l=gc(r.endContainer,qw).getAttribute("id"));var u=r.cloneContents(),c=(0,ln.A)(u.querySelectorAll(qw));if((null==c?void 0:c.length)>0){t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault(),c.forEach((function(e){var t,n,o=e.getAttribute("id"),a=document.querySelector('[id="'.concat(o,'"]')),u=a.querySelector($w),c=a._viewer,s=document.createElement("div");if(o===i||o===l){var d=document.createRange();o===i?(d.setStart(r.startContainer,r.startOffset),d.setEnd(u.lastChild,(null===(n=null===(t=u.lastChild)||void 0===t?void 0:t.childNodes)||void 0===n?void 0:n.length)||0)):(d.setStart(u.firstChild,0),d.setEnd(r.endContainer,r.endOffset));var f=fXe.transformRange(d,a).ranges[0],h=c.viewer.transformDOMRangeToViewRange(f);if(h){var p=c._kernel.execCommand(GF.command.copy,h);s.innerHTML=p[Let]||""}else s.innerHTML=""}else s.innerHTML=c.getDocument(Let,{mode:uM});e.parentNode.replaceChild(s,e)}));var s=document.createElement("div");s.appendChild(u),n.setData(Let,s.innerHTML),n.setData("text/plain",s.innerText)}}}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this;this.option.preventCopy&&(e.onDocument("copy",(function(e){return t._handlePreventCopy(e)})),e.onForceRootNode("copy",(function(e){return t._handlePreventCopy(e)})),(this.option.preventCopyContainer||this.viewer.domRootNode).addEventListener("contextmenu",(function(e){e.preventDefault()}))),e.onForceRootNode("copy",(function(e){return t._handleCopy(e)})),pc(this,document,"copy",this._handleGlobalCopy,!1),this.option.optimizeGlobalViewerCopy}},{key:"setNextEventData",value:function(e){this._nextEventData=e}},{key:"clearNextEventData",value:function(){this._nextEventData=null}},{key:"_doCopy",value:function(e){var t,n=e.clipboardData,r=this.kernel.execCommand(GF.command.copy,null===(t=this._nextEventData)||void 0===t?void 0:t.range,{isExport:this.option.isExport,exportType:this.option.exportType,docMaxWidth:this.option.docMaxWidth});if(!r||!n)return!1;rQe(r,n)}}])}(Sw);function zet(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Wet()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Wet(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Wet=function(){return!!e})()}Object.defineProperty(Het,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:GF.pluginName}),Object.defineProperty(Het,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:Qy(Iet)}),Object.defineProperty(Het,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[Fet]});var qet=function(e){function t(){var e;return(0,Ke.A)(this,t),e=zet(this,t,arguments),Object.defineProperty(e,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_contentNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){this._rootNode=ad("ne-code"),this._contentNode=ad("ne-code-content"),this._rootNode.appendChild(this._contentNode),this._updateFontSize()}},{key:"getMainDOMNode",value:function(){return this._rootNode}},{key:"getContentDOMNode",value:function(){return this._contentNode}},{key:"_updateFontSize",value:function(){var e=Math.max.apply(Math,(0,ln.A)(this.modelNode.children.map((function(e){return e.attrs.fontsize||0}))));this._contentNode.style.fontSize=0===e?"":e+"px"}}])}(Qw);function $et(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Ket()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Ket(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ket=function(){return!!e})()}var Yet=function(e){function t(){return(0,Ke.A)(this,t),$et(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){e.registerBoxNode("code",qet)}}])}(Sw);function Get(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Jet()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Jet(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Jet=function(){return!!e})()}Object.defineProperty(Yet,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:hL.pluginName});var Xet=function(e){function t(){return(0,Ke.A)(this,t),Get(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerAttrTranslator(jU.attr.color,new gQe(e))}}])}(Sw);function Qet(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Zet()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Zet(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Zet=function(){return!!e})()}Object.defineProperty(Xet,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:jU.pluginName});var ett=function(e){function t(){return(0,Ke.A)(this,t),Qet(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e=this;lEe(this.cardRootNode,(function(t,n,r){e.viewer.emitEvent("visitLink",n,r)})),this.cardRootNode.innerHTML='\n    <div class="ne-fallback-block-card">\n      <div class="inner-content">\n        <img src="'.concat(t.imgResource,'" class="ne-fallback-img">\n        <div class="inner-tips">\n          <div class="main-tip">').concat(this.pluginOption.getMainTip(),'</div>\n          <div class="sub-tip">').concat(this.pluginOption.getSubTip(),"</div>\n        </div>\n      </div>\n    </div>\n  ")}}])}(Mw);function ttt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,ntt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function ntt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ntt=function(){return!!e})()}Object.defineProperty(ett,"imgResource",{enumerable:!0,configurable:!0,writable:!0,value:"https://gw.alipayobjects.com/zos/bmw-prod/dc01c10b-e433-4bb3-bf7e-8b679725b823.svg"});var rtt=function(e){function t(){return(0,Ke.A)(this,t),ttt(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e=this;lEe(this.cardRootNode,(function(t,n,r){e.viewer.emitEvent("visitLink",n,r)})),this.cardRootNode.innerHTML='\n    <div class="ne-fallback-inline-card">\n      <div class="inner-content">\n        <img src="'.concat(t.imgResource,'" class="ne-fallback-img">\n        <div class="inner-tips">\n          <div class="main-tip">').concat(this.pluginOption.getMainTip(),'</div>\n          <div class="sub-tip">\n            <div class="sub-tip-content">').concat(this.pluginOption.getSubTip(),"</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  ").replace(/\s*\n+\s*/g,"")}}])}(Bw);function ott(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,itt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function itt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(itt=function(){return!!e})()}Object.defineProperty(rtt,"imgResource",{enumerable:!0,configurable:!0,writable:!0,value:"https://gw.alipayobjects.com/zos/bmw-prod/1a587ec9-10ac-4204-96f4-f259c5f6c2c7.svg"});var att=function(e){function t(){return(0,Ke.A)(this,t),ott(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){e.registerBlockCard(this,"block",ett),e.registerInlineCard(this,"inline",rtt)}}])}(Sw);function ltt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,utt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function utt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(utt=function(){return!!e})()}Object.defineProperty(att,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:AH.pluginName}),Object.defineProperty(att,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:Qy(KRe)});var ctt=function(e){function t(){return(0,Ke.A)(this,t),ltt(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){e.registerAttrTranslator("fontsize",new VQe),t.on("document.create",(function(){var t=e.queryCommandValue("defaultFontsize");t&&e.domRootNode.classList.add("fz".concat(t))}))}}])}(Sw);function stt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function dtt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,ftt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function ftt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ftt=function(){return!!e})()}Object.defineProperty(ctt,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:lW.pluginName});var htt=function(e){function t(e,n,r){var o;return(0,Ke.A)(this,t),o=dtt(this,t),Object.defineProperty(o,"_headingPlugin",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(o,"viewer",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(o,"headingViewerService",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(o,"_cacheHeadingDOM",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(o,"_needCollapsed",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(o,"_foldingInstances",{enumerable:!0,configurable:!0,writable:!0,value:{}}),o}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"option",get:function(){return this._headingPlugin.option}},{key:"isSimpleMode",get:function(){return this.viewer.option.viewerMode===Vw.Simple}},{key:"registerHeadingDOM",value:function(e,t){var n,r;this._needCollapsed[e]&&(delete this._needCollapsed[e],null===(r=null===(n=t.classList)||void 0===n?void 0:n.add)||void 0===r||r.call(n,"ne-force-visible")),this._cacheHeadingDOM[e]=t}},{key:"removeHeadingDOM",value:function(e){this._cacheHeadingDOM&&this._cacheHeadingDOM[e]&&delete this._cacheHeadingDOM[e]}},{key:"collapseHeadingDOM",value:function(e){var t,n;this._cacheHeadingDOM[e]?null===(n=null===(t=this._cacheHeadingDOM[e].classList)||void 0===t?void 0:t.add)||void 0===n||n.call(t,"ne-force-visible"):this._needCollapsed[e]=!0}},{key:"onFoldingStatusChange",value:function(){var e;if(this.viewer){this.viewer.emitPluginEvent("foldingStatusChange"),this.viewer.emit("foldingStatusChange"),this.viewer.emitEvent("foldingStatusChange");var t,n=[],r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return stt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?stt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(this.viewer.inCollapsedNodes);try{for(r.s();!(t=r.n()).done;){var o=t.value;o.isInCollapsed||(null===(e=o.$unCollapsed)||void 0===e||e.call(o),n.push(o))}}catch(e){r.e(e)}finally{r.f()}this.viewer.removeInCollapsedNodes(n)}}},{key:"destroy",value:function(){this._headingPlugin=null,this.viewer=null,this._cacheHeadingDOM=null,this._needCollapsed=null,this.removeAllListeners()}}])}(it);function ptt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,vtt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function vtt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vtt=function(){return!!e})()}var mtt=function(e){function t(){var e;return(0,Ke.A)(this,t),e=ptt(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Dw);function gtt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return btt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?btt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function btt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ytt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,wtt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function wtt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wtt=function(){return!!e})()}Object.defineProperty(mtt,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze("IHeadingViewerService")});var Att=function(e){function t(){var e;return(0,Ke.A)(this,t),e=ytt(this,t,arguments),Object.defineProperty(e,"processors",{enumerable:!0,configurable:!0,writable:!0,value:[]}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"registerHeadingProcessor",value:function(e){this.processors.push(e)}},{key:"afterInit",value:function(e,t){var n,r=gtt(this.processors);try{for(r.s();!(n=r.n()).done;)n.value.afterInit(e,t)}catch(e){r.e(e)}finally{r.f()}}},{key:"beforeDestroy",value:function(e){var t,n=gtt(this.processors);try{for(n.s();!(t=n.n()).done;)t.value.beforeDestroy(e)}catch(e){n.e(e)}finally{n.f()}}},{key:"destroy",value:function(){this.processors.length=0}}])}(mtt);function ktt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,_tt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function _tt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_tt=function(){return!!e})()}var Ctt=function(e){function t(){var e;return(0,Ke.A)(this,t),e=ktt(this,t,arguments),Object.defineProperty(e,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_contentNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_extNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_anchorController",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_foldingController",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_isCollapsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_oldState",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_handleBeforePrint",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t,n,r;e._oldState=e._isCollapsed,e._isCollapsed=!1,e.modelNode.attrs.collapsed=e._isCollapsed?"true":"false",null===(t=e._foldingController)||void 0===t||t.update(),null===(n=e._foldingController)||void 0===n||n.updateDOM(),null===(r=e.pluginContext)||void 0===r||r.onFoldingStatusChange()}}),Object.defineProperty(e,"_handleAfterPrint",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t,n,r;e._isCollapsed=e._oldState,e.modelNode.attrs.collapsed=e._isCollapsed?"true":"false",null===(t=e._foldingController)||void 0===t||t.update(),null===(n=e._foldingController)||void 0===n||n.updateDOM(),null===(r=e.pluginContext)||void 0===r||r.onFoldingStatusChange()}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e,t,n,r=this,o=this.modelNode.nodeName;if(this._rootNode=ad("ne-".concat(o)),this._rootNode.setAttribute("id",this.modelNode.id),this._rootNode.setAttribute("data-lake-id",this.modelNode.id),this._contentNode=ad("ne-heading-content"),this._extNode=ad("ne-heading-ext"),this._rootNode.appendChild(this._extNode),this._rootNode.appendChild(this._contentNode),this._allowShowAnchor()&&(this._anchorController=new eZe(this._extNode,this.viewer.option.currentURL,this.modelNode.id,this.modelNode.nodeName,this.pluginContext.option.generateHashLink)),this._allowFolding()){this._isCollapsed="true"===this.modelNode.attrs.collapsed;var i=function(){var e,t,n;r.viewer.execCommand("headingCollapsed",r.modelNode.id),null===(e=r._foldingController)||void 0===e||e.update(),null===(t=r._foldingController)||void 0===t||t.updateDOM(),null===(n=r.pluginContext)||void 0===n||n.onFoldingStatusChange()};this._foldingController=new uZe(this._rootNode,this._extNode,this.modelNode.id,{context:this.pluginContext,isCollapsed:function(){return r._isCollapsed},handleCollapsedChange:function(){r._isCollapsed=!r._isCollapsed,i()},tryUnfold:function(){r._isCollapsed&&(r._isCollapsed=!1,i())}}),window.addEventListener("beforeprint",this._handleBeforePrint),window.addEventListener("afterprint",this._handleAfterPrint)}null===(e=this.pluginContext)||void 0===e||e.headingViewerService.afterInit(this._rootNode,this.modelNode),null===(n=null===(t=this.pluginContext)||void 0===t?void 0:t.registerHeadingDOM)||void 0===n||n.call(t,this.modelNode.id,this._rootNode)}},{key:"destroy",value:function(){var e,n,r,o,i;null===(e=this.pluginContext)||void 0===e||e.headingViewerService.beforeDestroy(this.modelNode),null===(n=this._foldingController)||void 0===n||n.destroy(),null===(r=this._anchorController)||void 0===r||r.destroy(),null===(i=null===(o=this.pluginContext)||void 0===o?void 0:o.removeHeadingDOM)||void 0===i||i.call(o,this.modelNode.id),window.removeEventListener("beforeprint",this._handleBeforePrint),window.removeEventListener("afterprint",this._handleAfterPrint),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}},{key:"unfold",value:function(){var e;null===(e=this._foldingController)||void 0===e||e.tryUnfold()}},{key:"_allowFolding",value:function(){var e,t,n,r;return!(null===(e=this.pluginContext)||void 0===e?void 0:e.isSimpleMode)&&!!(null===(n=null===(t=this.pluginContext)||void 0===t?void 0:t.option)||void 0===n?void 0:n.folding)&&!!(null===(r=this.modelNode.parentNode)||void 0===r?void 0:r.isRootNode())}},{key:"_allowShowAnchor",value:function(){var e,t,n;return!!(null===(t=null===(e=this.pluginContext)||void 0===e?void 0:e.option)||void 0===t?void 0:t.anchor)&&!!(null===(n=this.modelNode.parentNode)||void 0===n?void 0:n.isRootNode())}},{key:"getMainDOMNode",value:function(){return this._rootNode}},{key:"getContentDOMNode",value:function(){return this._contentNode}}])}(Qw),Ntt={anchor:!0,folding:!1},Ott=function(){return(0,$e.A)((function e(t,n){(0,Ke.A)(this,e),Object.defineProperty(this,"kernelOption",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Ww()({},Ntt,t)}),[{key:"anchor",get:function(){return this._option.anchor}},{key:"folding",get:function(){return this._option.folding}},{key:"generateHashLink",get:function(){return this._option.generateHashLink}}])}();function xtt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Ett()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Ett(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ett=function(){return!!e})()}Object.defineProperty(Ott,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"heading"});var Dtt=function(e){function t(){return(0,Ke.A)(this,t),xtt(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(){return dt}},{key:"getValue",value:function(){return!1}},{key:"execute",value:function(e){if(!e)return!1;var t=this.viewer.domRootNode.querySelector('[id="'.concat(e,'"]'));if(!t)return!1;var n=function(e){for(var t=null;e&&!(t=ew(e));)e=e.parentNode;if(!t||t.isRootNode())return null;for(;t;){var n=t.parentNode;if(!n||n.isRootNode())break;t=n}for(;t;){if(t.hasCategory(qe.Heading))return t;t=t.previousSibling}return null}(t);return!!n&&(uZe.unfold(n.modelNode.id,this.plugin._ctx),!0)}}])}(Ow);function Ptt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Rtt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Rtt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Rtt=function(){return!!e})()}Object.defineProperty(Dtt,"ID",{enumerable:!0,configurable:!0,writable:!0,value:"tryUnfold"});var Stt=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Ptt(this,t,arguments),Object.defineProperty(e,"_ctx",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_headingNodes",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_collapseDOMNode",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n,r,o,i,a,l=t.mainDOMNode,u=t.modelNode;if(l&&u&&u){null===e._headingNodes&&(e._headingNodes=Ut.getHeadingNodes(u.rootNode));var c=Ut.isInHeadingCollapsed(u,e._headingNodes);c&&c.id&&(null===(r=null===(n=l.classList)||void 0===n?void 0:n.add)||void 0===r||r.call(n,"ne-force-fold"),null===(o=l.setAttribute)||void 0===o||o.call(l,"data-fold-owner",c.id),null===(a=null===(i=e._ctx)||void 0===i?void 0:i.collapseHeadingDOM)||void 0===a||a.call(i,c.id))}}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this;this._ctx=new htt(this,e,this.service),e.registerBoxNode({h1:Ctt,h2:Ctt,h3:Ctt,h4:Ctt,h5:Ctt,h6:Ctt},this._ctx),e.onPluginEvent("tocPositionChange",(function(e){uZe.unfold(e,t._ctx)})),this._ctx.isSimpleMode||e.on("viewerNodeInited",this._collapseDOMNode)}},{key:"destroy",value:function(){var e;null===(e=this._ctx)||void 0===e||e.destroy(),this._ctx=null,Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}}])}(Sw);function Ttt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,jtt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function jtt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(jtt=function(){return!!e})()}Object.defineProperty(Stt,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:qq.pluginName}),Object.defineProperty(Stt,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:Ott}),Object.defineProperty(Stt,"Service",{enumerable:!0,configurable:!0,writable:!0,value:Att}),Object.defineProperty(Stt,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[Dtt]});var Itt=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Ttt(this,t,arguments),Object.defineProperty(e,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){this._rootNode=ad("div",{className:"ne-hr"}),this.cardRootNode.appendChild(this._rootNode)}},{key:"getMainDOMNode",value:function(){return this._rootNode}}])}(Mw);function Btt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Mtt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Mtt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Mtt=function(){return!!e})()}var Ftt=function(e){function t(){return(0,Ke.A)(this,t),Btt(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerBlockCard(this,"hr",Itt)}}])}(Sw);function Ltt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Utt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Utt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Utt=function(){return!!e})()}Object.defineProperty(Ftt,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:q$.pluginName});var Vtt=function(e){function t(){return(0,Ke.A)(this,t),Ltt(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerAttrTranslator({indent:new $Ze("indent"),textIndent:new $Ze("text-indent")})}}])}(Sw);function Htt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,ztt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function ztt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ztt=function(){return!!e})()}Object.defineProperty(Vtt,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:tY.pluginName});var Wtt=function(e){function t(){return(0,Ke.A)(this,t),Htt(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){var e=this.props.viewModel.getColorIndex(),t=this._calcStyle();return Gu().createElement("div",{className:"ne-card-label"},Gu().createElement("div",{className:Uf("ne-card-label-text","ne-label-color-".concat(e)),style:t},this._getText()))}},{key:"_getText",value:function(){return this.props.viewModel.getLabel()||sc("设置状态")}},{key:"_calcStyle",value:function(){return{opacity:this.props.viewModel.getLabel()?1:.45}}}])}(Yu.Component);function qtt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qtt=function(){return!!e})()}function $tt(e){return function(e){function t(){return(0,Ke.A)(this,t),function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,qtt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){Vye.render(Wtt,{viewModel:new YIe(this.cardData)},this.containerNode)}},{key:"destroy",value:function(){this.containerNode&&Vye.unmount(this.containerNode),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}}])}(e)}var Ktt=$tt;function Ytt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Gtt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Gtt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Gtt=function(){return!!e})()}var Jtt=function(e){function t(){return(0,Ke.A)(this,t),Ytt(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){this.pluginOption.viewerUI&&(t.$CardUI=this.pluginOption.viewerUI),this.viewer.createCardUI(this)}}])}(Bw);function Xtt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Qtt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Qtt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Qtt=function(){return!!e})()}Object.defineProperty(Jtt,"$CardData",{enumerable:!0,configurable:!0,writable:!0,value:pG}),Object.defineProperty(Jtt,"$CardUI",{enumerable:!0,configurable:!0,writable:!0,value:$tt(QA()())});var Ztt=function(e){function t(){return(0,Ke.A)(this,t),Xtt(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerInlineCard(this,"label",Jtt)}}])}(Sw);function ent(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,tnt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function tnt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(tnt=function(){return!!e})()}Object.defineProperty(Ztt,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:"label"}),Object.defineProperty(Ztt,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:Qy(cBe)}),Object.defineProperty(Ztt,"Colors",{enumerable:!0,configurable:!0,writable:!0,value:dG});var nnt=function(e){function t(){var e;return(0,Ke.A)(this,t),e=ent(this,t,arguments),Object.defineProperty(e,"_isFirstCall",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(e,"_isScrollbarVisible",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_isTOCOpened",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_isTOCPinned",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_prevLayoutStatus",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(e,"_layout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=e.kernel;this.addLayoutClassName(this.option.layout),this._layout=this.option.layout;var n=t.requireService(uJ.ID);this._bindDocEvent(n),this._bindMaxViewEvent(n),this._bindTOCEvent(),this._emitLayoutChange()}},{key:"destroy",value:function(){this.removeLayoutClassName("*"),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}},{key:"isScrollbarVisible",value:function(){return this._isFirstCall&&(this._isFirstCall=!1,this._isScrollbarVisible=hc()),this._isScrollbarVisible}},{key:"getLayout",value:function(){return this._layout}},{key:"_bindDocEvent",value:function(e){var t=this,n=this.viewer.kernel;n.on("document.create",(function(){var n=e.getLayout();t._layout=n,t._toggleToolbarSetting(n),t.removeLayoutClassName("*"),t.addLayoutClassName(n),t._emitLayoutChange()})),n.onPluginEvent("layoutChange",(function(e){var n=e.current,r=e.prev;t._layout=n,t.removeLayoutClassName(r),t.addLayoutClassName(n),t._toggleToolbarSetting(n),t.viewer.emit("layoutChange",{current:n,prev:r}),t._emitLayoutChange()}))}},{key:"_bindMaxViewEvent",value:function(e){var t=this;this.viewer.on("maxViewChange",(function(n){var r=e.getLayout();n?t.removeLayoutClassName(r):t.addLayoutClassName(r)})),this.viewer.on("enterMaxView",(function(){var n=e.getLayout();t.removeLayoutClassName(n)})),this.viewer.on("leaveMaxView",(function(){var n=e.getLayout();t.addLayoutClassName(n)}))}},{key:"_bindTOCEvent",value:function(){var e=this;this.viewer.onPluginEvent("tocOpenStatusChange",(function(t){e._isTOCOpened=t,e._emitLayoutChange()})),this.viewer.onPluginEvent("tocPinStatusChange",(function(t){e._isTOCPinned=t,e._emitLayoutChange()}))}},{key:"_emitLayoutChange",value:function(){var e=this,t={layout:this._layout,isTOCOpened:this._isTOCOpened,isTOCPinned:this._isTOCPinned};t.layout===e._prevLayoutStatus.layout&&t.isTOCOpened===e._prevLayoutStatus.isTOCOpened&&t.isTOCPinned===e._prevLayoutStatus.isTOCPinned||(this.viewer.emit("viewportLayoutChange",t,this._prevLayoutStatus),this.viewer.emitEvent("viewportLayoutChange",t,this._prevLayoutStatus)),this._prevLayoutStatus=Object.assign({},t)}},{key:"_getLayoutClassName",value:function(e){return"*"===e&&(e=[tJ,nJ]),"string"==typeof e&&(e=[e]),e.map((function(e){return"ne-viewer-layout-mode-".concat(e)}))}},{key:"addLayoutClassName",value:function(e){var t;(t=this.viewer.domRootNode.classList).add.apply(t,(0,ln.A)(this._getLayoutClassName(e)))}},{key:"removeLayoutClassName",value:function(){var e;(e=this.viewer.domRootNode.classList).remove.apply(e,(0,ln.A)(this._getLayoutClassName.apply(this,arguments)))}},{key:"_toggleToolbarSetting",value:function(e){var t=this.viewer.getService($R.ID);t&&(e===nJ||Us.mobile?t.addDisabledMiniToolbarItems("widthMode"):t.removeDisabledMiniToolbarItems("widthMode"))}}])}(Sw);function rnt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,ont()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function ont(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ont=function(){return!!e})()}Object.defineProperty(nnt,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:fJ.pluginName}),Object.defineProperty(nnt,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:yJ});var int=function(e){function t(){return(0,Ke.A)(this,t),rnt(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerAttrTranslator("lineHeight",new A0e)}}])}(Sw);function ant(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,lnt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function lnt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(lnt=function(){return!!e})()}Object.defineProperty(int,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:CJ.pluginName});var unt=function(e){function t(){var e;return(0,Ke.A)(this,t),e=ant(this,t,arguments),Object.defineProperty(e,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_contentNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_overlay",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"openToolbar",{enumerable:!0,configurable:!0,writable:!0,value:function(t){if(!Ac(t)){var n=e.getItems();n.length&&(e._overlay=aR.openOnlyByType("link",{containerNode:e.viewer.innerOverlayContainer,targetNode:e.getTargetNode(),reactComponent:Gu().createElement(axe,{placement:["top","bottom"],items:n,onClose:function(){}})}))}}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e=this.modelNode.attrs||{},t=e.external,n=e.src,r={className:["ne-link"],href:yh.sanitizeUrl(n)||""};t&&(r.target="_blank",r.rel="noopener"),this._rootNode=ad("a",r),this.bindEvent()}},{key:"bindEvent",value:function(){var e,t=this;pc(this,this._rootNode,"click",(function(e){if(!Ac(e,t.viewer.domRootNode)){e.preventDefault();var n=t.modelNode.attrs,r=n.external,o=n.src;e[Us.macos?"metaKey":"ctrlKey"]&&(r=!0),t.viewer.emitEvent("visitLink",o,r)}}),!1),pc(this,this._rootNode,"mouseenter",this.openToolbar,!1),null===(e=this.pluginContext.viewer.kernel.document)||void 0===e||e.on("selectionchange",(function(){var e,n;t.getItems().length?null===(n=t._overlay)||void 0===n||n.rerender({items:t.getItems()}):(null===(e=t._overlay)||void 0===e||e.cancel(),t._overlay=null)}))}},{key:"getItems",value:function(){var e,t,n=this,r=null===(t=(e=this.pluginContext.option).vMiniToolbar)||void 0===t?void 0:t.call(e,this);return r?r.map((function(e){return{type:"button",icon:e.icon,tooltip:e.tooltip,onClick:function(){var t;null===(t=e.onClick)||void 0===t||t.call(e,n)}}})):[]}},{key:"getTargetNode",value:function(){var e;return(null===(e=this._rootNode)||void 0===e?void 0:e.querySelector("ne-text"))||this._rootNode}},{key:"getMainDOMNode",value:function(){return this._rootNode}},{key:"destroy",value:function(){var e;null===(e=this._overlay)||void 0===e||e.cancel(),this._overlay=null}}])}(Qw),cnt=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Ww()({},t)}),[{key:"vMiniToolbar",get:function(){return this._option.vMiniToolbar}}])}();function snt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,dnt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function dnt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(dnt=function(){return!!e})()}Object.defineProperty(cnt,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"link"});var fnt=function(e){function t(){return(0,Ke.A)(this,t),snt(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){e.registerBoxNode({link:{clazz:unt,pluginContext:this}})}}])}(Sw);function hnt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,pnt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function pnt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pnt=function(){return!!e})()}Object.defineProperty(fnt,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:QJ.pluginName}),Object.defineProperty(fnt,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:Qy(cnt)});var vnt=function(e){function t(){var e;return(0,Ke.A)(this,t),e=hnt(this,t,arguments),Object.defineProperty(e,"id",{enumerable:!0,configurable:!0,writable:!0,value:et(t.ID)}),e}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Dw);function mnt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,gnt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function gnt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(gnt=function(){return!!e})()}Object.defineProperty(vnt,"ID",{enumerable:!0,configurable:!0,writable:!0,value:Ze("ITaskListViewerDataService")});var bnt=function(e){function t(){var e;return(0,Ke.A)(this,t),e=mnt(this,t,arguments),Object.defineProperty(e,"_proxy",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"registerProxy",value:function(e){bt(null===this._proxy,"plugins/list/src/viewer/task-list-viewer-data-service.ts:9"),this._proxy=e}},{key:"getProxy",value:function(){return this._proxy}},{key:"destroy",value:function(){}}])}(vnt);function ynt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,wnt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function wnt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wnt=function(){return!!e})()}var Ant=function(e){function t(){var e;return(0,Ke.A)(this,t),e=ynt(this,t,arguments),Object.defineProperty(e,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_indexNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_contentNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e=this;this._rootNode=ad($X.domNode.oli),this._indexNode=ad($X.domNode["oli-i"]),this._contentNode=ad($X.domNode["oli-c"],{className:"ne-oli-content"}),this._resetIndexSymbol(),this._contentNode.setAttribute("id",this.modelNode.id),this._contentNode.setAttribute("data-lake-id",this.modelNode.id),this._rootNode.appendChild(this._indexNode),this._rootNode.appendChild(this._contentNode);xc(this,this.viewer.theme,"themeChange",(function(){z0e(e.viewer,e._indexNode,e.modelNode.attrs.indexStyle)})),this.document.once("beforedestroy",(function(){}))}},{key:"getMainDOMNode",value:function(){return this._rootNode}},{key:"getContentDOMNode",value:function(){return this._contentNode}},{key:"_resetIndexSymbol",value:function(){var e=this.modelNode.attrs,t=e.indexType,n=void 0===t?0:t,r=e.level,o=void 0===r?0:r;this._indexNode.innerHTML='<span class="ne-list-symbol" data-type="'.concat(n,'"  data-level="').concat(o%3,'"><span>').concat(this._getIndexText(),"</span></span>"),z0e(this.viewer,this._indexNode,this.modelNode.attrs.indexStyle)}},{key:"_getIndexText",value:function(){var e=this.modelNode.attrs,t=e.index,n=e.level,r=void 0===n?0:n,o=e.parentIndex,i=void 0===o?[]:o,a=e.indexType;return hZ(t,r,i,void 0===a?0:a)}}])}(Qw);function knt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,_nt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function _nt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_nt=function(){return!!e})()}var Cnt=function(e){function t(){var e;return(0,Ke.A)(this,t),e=knt(this,t,arguments),Object.defineProperty(e,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_checkbox",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_contentNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_checkedClassName",{enumerable:!0,configurable:!0,writable:!0,value:"ne-checkbox-checked"}),Object.defineProperty(e,"_taskListModel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_enableDynamic",{enumerable:!0,configurable:!0,writable:!0,value:!1}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){this._rootNode=ad($X.domNode.tli),this._checkbox=ad($X.domNode["tli-i"],{className:["ne-checkbox",this.modelNode.attrs.checked?this._checkedClassName:"",this._enableDynamic?"":"ne-checkbox-cursor-default"]}),this._checkbox.appendChild(ad("span",{className:"ne-checkbox-inner"})),this._contentNode=ad($X.domNode["tli-c"],{className:"ne-oli-content"}),this._contentNode.setAttribute("id",this.modelNode.id),this._contentNode.setAttribute("data-lake-id",this.modelNode.id),this._rootNode.appendChild(this._checkbox),this._rootNode.appendChild(this._contentNode),this.pluginContext.useTaskListDataService()&&(this._taskListModel=this.pluginContext.initTaskListNodeModel(this.modelNode),this._bindDOMEvent())}},{key:"_bindDOMEvent",value:function(){var e=this;pc(this,this._checkbox,"click",(function(){e.viewer.execCommand("taskStatus",e.modelNode.id)}),!1)}},{key:"getMainDOMNode",value:function(){return this._rootNode}},{key:"getContentDOMNode",value:function(){return this._contentNode}},{key:"updateAttribute",value:function(e){this.syncAttr(),this._taskListModel&&this._taskListModel.syncData(),ZA.syncDOMAttrChange(this._rootNode,e)}},{key:"syncAttr",value:function(){var e=this._checkbox;this.modelNode.attrs.checked?e.classList.add(this._checkedClassName):e.classList.remove(this._checkedClassName)}}])}(Qw);function Nnt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Ont()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Ont(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ont=function(){return!!e})()}var xnt=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Nnt(this,t,arguments),Object.defineProperty(e,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_indexNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_contentNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e=this;this._rootNode=ad($X.domNode.uli),this._indexNode=ad($X.domNode["uli-i"]),this._contentNode=ad($X.domNode["uli-c"],{className:"ne-uli-content"}),this._contentNode.setAttribute("id",this.modelNode.id),this._contentNode.setAttribute("data-lake-id",this.modelNode.id),this._resetIndexSymbol(),this._rootNode.appendChild(this._indexNode),this._rootNode.appendChild(this._contentNode);var t={destroy:function(){}};xc(t,this.viewer.theme,"themeChange",(function(){z0e(e.viewer,e._indexNode,e.modelNode.attrs.indexStyle)})),this.document.once("beforedestroy",(function(){t.destroy()}))}},{key:"getMainDOMNode",value:function(){return this._rootNode}},{key:"getContentDOMNode",value:function(){return this._contentNode}},{key:"_resetIndexSymbol",value:function(){this._indexNode.innerHTML='<span class="ne-list-symbol"><span>'.concat(this._getIndexText(),"</span></span>"),z0e(this.viewer,this._indexNode,this.modelNode.attrs.indexStyle)}},{key:"_getIndexText",value:function(){var e=this.modelNode.attrs.level;return FZ(void 0===e?0:e)}}])}(Qw);function Ent(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Dnt=function(){return(0,$e.A)((function e(t,n){(0,Ke.A)(this,e),Object.defineProperty(this,"viewer",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"getInitialIndex",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"monitorNodes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"node2DomMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"hasRequestModify",{enumerable:!0,configurable:!0,writable:!0,value:!1})}),[{key:"afterInit",value:function(e,t){this.check(t)&&(this.monitorNodes.includes(t)||this.monitorNodes.push(t),this.createIndexDom(e,t),this.requestModify())}},{key:"beforeDestroy",value:function(e){var t=this.monitorNodes.indexOf(e),n=this.node2DomMap.get(e);t>-1&&this.monitorNodes.splice(t,1),n&&n.remove(),this.node2DomMap.delete(e)}},{key:"getInitialHeadingIndex",value:function(){var e=this.getInitialIndex(this.viewer),t=e.pop(),n=Number.MAX_VALUE;return Array.isArray(t)?n=e.pop():(n=t,t=[0,0,0,0,0,0]),[e,n,t]}},{key:"modify",value:function(){var e,t,n=this,r=null===(e=this.viewer.kernel.document)||void 0===e?void 0:e.rootNode;if(r){var o,i=this.getInitialHeadingIndex(),a=(0,tn.A)(i,3),l=a[0],u=a[1],c=a[2],s=[],d=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ent(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ent(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(r.children);try{var f=function(){var e=o.value;if(e.hasCategory(qe.Heading)){var t=Number(e.nodeName.slice(1))-1;if(l=l.slice(0,t+1),"number"!=typeof e.attrs.indexType)return 0;c[t]=1;var r=n.monitorNodes.find((function(t){return t.id===e.id})),i=r?n.node2DomMap.get(r):null;if(!i)return 0;u=Math.min(u,t),"number"==typeof l[t]?l[t]++:l[t]=0,s.push({dom:i,viewNode:r,headingLevel:t,headingIndex:l.slice(0)})}};for(d.s();!(o=d.n()).done;)f()}catch(e){d.e(e)}finally{d.f()}for(var h=c.reduce((function(e,t,n){return t&&(e[n]=e._currentIndex++),e}),{_currentIndex:0}),p=function(){var e=m[v],r=e.viewNode,o=e.dom,i=e.headingLevel,a=pZ(e.headingIndex,(function(e,t,n){return c[n]&&n<=i&&e.push(t),e}),[]);z0e(n.viewer,o,(null===(t=r.firstChild)||void 0===t?void 0:t.attrs)||{}),n._resetIndexSymbol(a[h[i]],null==r?void 0:r.attrs.indexType,h[i],a.slice(0,h[i]),o)},v=0,m=s;v<m.length;v++)p()}}},{key:"_resetIndexSymbol",value:function(e,t,n,r,o){o.innerHTML='<span data-level="'.concat(n%3,'" data-type="').concat(t,'" class="ne-list-symbol">').concat(this._getIndexText(e,t,n,r),"</span>")}},{key:"_getIndexText",value:function(e,t,n,r){try{return hZ(e,n,r,t)}catch(e){console.error(e)}return""}},{key:"requestModify",value:function(){var e=this;this.hasRequestModify||(this.hasRequestModify=!0,bs((function(){e.hasRequestModify=!1,e.modify()})))}},{key:"createIndexDom",value:function(e,t){var n=Ly.createElement("ne-oli-i",{contentEditable:"false",className:"heading"});return this.insertAtRootDOM(e,n),this.node2DomMap.set(t,n),n}},{key:"insertAtRootDOM",value:function(e,t){e.insertBefore(t,e.childNodes[e.childElementCount-1])}},{key:"check",value:function(e){var t;return!("number"!=typeof e.attrs.indexType||e.attrs.indexType<0||e.hasCategory(qe.Heading)&&!(null===(t=e.parentNode)||void 0===t?void 0:t.hasCategory(qe.Root)))}}])}();function Pnt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Rnt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Rnt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Rnt=function(){return!!e})()}var Snt=function(e){function t(){return(0,Ke.A)(this,t),Pnt(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t;e.registerBoxNode($X.node.oli,Ant),e.registerBoxNode($X.node.uli,xnt),e.registerBoxNode($X.node.tli,Cnt,this),e.registerAttrTranslator({level:new p1e,indexType:new d1e}),null===(t=e.getService(mtt.ID))||void 0===t||t.registerHeadingProcessor(new Dnt(e,this.option.getInitialHeadingIndex)),this.option.onAfterViewerPluginInit&&this.option.onAfterViewerPluginInit(this.viewer)}},{key:"useTaskListDataService",value:function(){var e;return this.option.enableDynamic&&(null===(e=this.service)||void 0===e?void 0:e.getProxy())}},{key:"initTaskListNodeModel",value:function(e){var t,n=null===(t=this.service)||void 0===t?void 0:t.getProxy();if(n)return new n(e,this.viewer)}}])}(Sw);function Tnt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,jnt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function jnt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(jnt=function(){return!!e})()}Object.defineProperty(Snt,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:$X.pluginName}),Object.defineProperty(Snt,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:eZ}),Object.defineProperty(Snt,"Service",{enumerable:!0,configurable:!0,writable:!0,value:bnt});var Int=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Tnt(this,t,arguments),Object.defineProperty(e,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_contentNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){this._rootNode=ad(N0.domNode.mark),this._contentNode=ad(N0.domNode["mark-content"]),this._rootNode.appendChild(this._contentNode),this._updateFontSize()}},{key:"getMainDOMNode",value:function(){return this._rootNode}},{key:"getContentDOMNode",value:function(){return this._contentNode}},{key:"_updateFontSize",value:function(){var e=Math.max.apply(Math,(0,ln.A)(this.modelNode.children.map((function(e){return e.attrs.fontsize||0}))));this._contentNode.style.fontSize=0===e?"":e+"px"}}])}(Qw);function Bnt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Mnt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Mnt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Mnt=function(){return!!e})()}var Fnt=function(e){function t(){return(0,Ke.A)(this,t),Bnt(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){e.registerBoxNode(N0.node.mark,Int)}}])}(Sw);function Lnt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Unt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Unt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Unt=function(){return!!e})()}Object.defineProperty(Fnt,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:N0.pluginName});var Vnt=function(e){function t(e,n,r){var o;return(0,Ke.A)(this,t),o=Lnt(this,t),Object.defineProperty(o,"viewer",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(o,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(o,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(o,"setDisabledMiniToolbarItems",{enumerable:!0,configurable:!0,writable:!0,value:function(e){Tr((0,Je.A)(t.prototype),"setDisabledMiniToolbarItems",o).call(o,e),o.viewer.emitPluginEvent("miniToolbar.requestRefreshToolbar")}}),Object.defineProperty(o,"addDisabledMiniToolbarItems",{enumerable:!0,configurable:!0,writable:!0,value:function(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];(e=Tr((0,Je.A)(t.prototype),"addDisabledMiniToolbarItems",o)).call.apply(e,[o].concat(r)),o.viewer.emitPluginEvent("miniToolbar.requestRefreshToolbar")}}),Object.defineProperty(o,"removeDisabledMiniToolbarItems",{enumerable:!0,configurable:!0,writable:!0,value:function(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];(e=Tr((0,Je.A)(t.prototype),"removeDisabledMiniToolbarItems",o)).call.apply(e,[o].concat(r)),o.viewer.emitPluginEvent("miniToolbar.requestRefreshToolbar")}}),o._disabledItems=(0,ln.A)(r.option.disabledItems),o}return(0,Xe.A)(t,e),(0,$e.A)(t)}(uMe);function Hnt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,znt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function znt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(znt=function(){return!!e})()}var Wnt=function(e){function t(){return(0,Ke.A)(this,t),Hnt(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){}}])}(Sw);function qnt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,$nt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function $nt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($nt=function(){return!!e})()}Object.defineProperty(Wnt,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:zR.pluginName}),Object.defineProperty(Wnt,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:mMe}),Object.defineProperty(Wnt,"Service",{enumerable:!0,configurable:!0,writable:!0,value:Vnt});var Knt=function(e){function t(){return(0,Ke.A)(this,t),qnt(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Sw);function Ynt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Gnt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Gnt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Gnt=function(){return!!e})()}Object.defineProperty(Knt,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:c1.pluginName});var Jnt=function(e){function t(){return(0,Ke.A)(this,t),Ynt(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t)}(Sw);function Xnt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Qnt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Qnt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Qnt=function(){return!!e})()}Object.defineProperty(Jnt,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:H1.pluginName});var Znt=function(e){function t(){return(0,Ke.A)(this,t),Xnt(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this,n=e.domRootNode;pc(this,document,"keydown",(function(e){if(Ks.isChar(e,"A")&&(e.metaKey||e.ctrlKey)){var r=document.getSelection();if(!r||0===r.rangeCount)return e.preventDefault(),void t._selectAll();var o=r.getRangeAt(0).commonAncestorContainer;n.contains(o)&&!gc(o,"ne-card",n)&&(e.preventDefault(),t._selectAll())}}))}},{key:"_selectAll",value:function(){var e=this,t=document.createRange();t.selectNodeContents(this.viewer.domRootNode);var n=document.getSelection();n&&(n.removeAllRanges(),n.addRange(t)),setTimeout((function(){var t,n,r;(null===(r=null===(n=null===(t=e.viewer)||void 0===t?void 0:t.kernel)||void 0===n?void 0:n.model)||void 0===r?void 0:r.document)&&e.viewer.execCommand(b2.command.selectAllDoc)}))}}])}(Sw);Object.defineProperty(Znt,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:b2.pluginName});var ert={selectionMapping:!0,cardFocusStatus:!0},trt=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Ww()({},ert,t)}),[{key:"selectionMapping",get:function(){return"function"==typeof this._option.selectionMapping?this._option.selectionMapping():this._option.selectionMapping}},{key:"cardFocusStatus",get:function(){return this._option.cardFocusStatus}}])}();function nrt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,rrt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function rrt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rrt=function(){return!!e})()}Object.defineProperty(trt,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"selection"});var ort=function(e){function t(){var e;return(0,Ke.A)(this,t),e=nrt(this,t,arguments),Object.defineProperty(e,"_focusedCard",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_cardFocus",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n,r,o=gc(t.target,"ne-card",e.viewer.domRootNode);if(o){var i=null==o?void 0:o._neRef;e._focusedCard!==i&&(null===(n=e._focusedCard)||void 0===n||n.$blur(),e._focusedCard=i,null===(r=e._focusedCard)||void 0===r||r.$focus())}}}),Object.defineProperty(e,"_cardBlur",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n;if(e._focusedCard){if(Ac(t))return;var r=gc(t.target,"ne-card",e.viewer.domRootNode);if(r&&(null==r?void 0:r._neRef)===e._focusedCard)return;null===(n=e._focusedCard)||void 0===n||n.$blur(),e._focusedCard=null}}}),Object.defineProperty(e,"_selectionChange",{enumerable:!0,configurable:!0,writable:!0,value:function(){if(e.option.selectionMapping)try{var t=fXe.currentRange();if(!t)return;if(!e._isInSameViewer(t))return;var n=e.viewer.domRootNode,r=fXe.transformRange(t,n),o=!1,i=r.ranges.map((function(t){return o?null:e.viewer.transformDOMRangeToViewRange(t)||(o=!0,null)}));if(o)return;e.viewer.emitPluginEvent("selectionChange",{domRanges:r.ranges,viewRanges:i}),e.kernel.execCommand("selection",Object.assign(Object.assign({},r),{ranges:i}))}catch(e){console.error("viewer selection error",e)}}}),Object.defineProperty(e,"_filterEndEmptySelect",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=fXe.currentRange();if(t&&e._isInSameViewer(t)){var n=e.viewer.domRootNode;fXe.transformRange(t,n).ranges.map((function(t){var n,r=e.viewer.transformDOMRangeToViewRange(t),o=t.startContainer,i=t.startOffset,a=t.endContainer,l=t.endOffset,u=r.end.node;return!t.collapsed&&u.hasCategory(qe.Text)&&l>1&&" "===(null===(n=u.data)||void 0===n?void 0:n[l-1])&&document.getSelection().setBaseAndExtent(o,i,a,l-1),r}))}}}),Object.defineProperty(e,"_isInSameViewer",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=e._getViewerNode(t.startContainer),r=e._getViewerNode(t.endContainer);return n&&r&&n===r}}),Object.defineProperty(e,"_getViewerNode",{enumerable:!0,configurable:!0,writable:!0,value:function(t){return gc(t,qw,e.viewer.domRootNode)}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this;e.onDocument("selectionchange",this._selectionChange),e.onRootNode("click",(function(e){var n,r=e;if(r.detail>=3){var o=null===(n=r.target)||void 0===n?void 0:n._neRef;if(!(null==o?void 0:o.hasCategory(qe.Text)))return;var i=o.closest(qe.Block);if(!i)return;var a=i.getMainDOMNode();if(!a)return;var l=document.createRange();l.selectNodeContents(a);var u=document.getSelection(),c=l.startContainer,s=l.startOffset,d=l.endContainer,f=l.endOffset;u.setBaseAndExtent(c,s,d,f)}2===r.detail&&t._filterEndEmptySelect()})),this.option.cardFocusStatus&&(e.onForceRootNode("mousedown",(function(e){return t._cardFocus(e)})),pc(this,document,"mouseup",this._cardBlur))}}])}(Sw);function irt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,art()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function art(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(art=function(){return!!e})()}Object.defineProperty(ort,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:D2.pluginName}),Object.defineProperty(ort,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:Qy(trt)});var lrt=function(e){function t(){return(0,Ke.A)(this,t),irt(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerAttrTranslator({sub:new v4e(J2.attr.sub),sup:new v4e(J2.attr.sup)})}}])}(Sw);Object.defineProperty(lrt,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:J2.pluginName});var urt=function(){return(0,$e.A)((function e(t){(0,Ke.A)(this,e),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Ww()({},t)}),[{key:"onVTableScroll",get:function(){return this._option.onVTableScroll}},{key:"onVTableWidthModeChange",get:function(){return this._option.onVTableWidthModeChange}}])}();function crt(e){var t=e.length-1,n=e.map((function(e,n){return"string"!=typeof e&&n===t&&(e-=1),'<col width="'.concat(e,'">')}));return"<colgroup>".concat(n.join(""),"</colgroup>")}Object.defineProperty(urt,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"table"});var srt=function(){return(0,$e.A)((function e(t,n,r,o){var i=this;(0,Ke.A)(this,e),Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_tableDOMNode",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"_innerDOMNode",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"_colGroup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_columns",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"dispose",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_resizeObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._colGroup=document.createElement("colgroup"),this._tableDOMNode.prepend(this._colGroup),this._rootNode.style.width="100%",this._innerDOMNode.style.width="100%",this._resizeObserver=new ResizeObserver(Qm()((function(){var e;i._innerDOMNode.isConnected&&(null===(e=i.dispose)||void 0===e||e.dispose(),i._updateFitWidth())}),300)),this._resizeObserver.observe(this._innerDOMNode)}),[{key:"destroy",value:function(){var e;this._colGroup.remove(),null===(e=this.dispose)||void 0===e||e.dispose(),this._columns.length=0,this._resizeObserver.disconnect()}},{key:"update",value:function(){this._updateColumnNode(),this._updateFitWidth()}},{key:"_updateColumnNode",value:function(){var e=this._columns,t=this._node.attrs.colCount;if(e.length!==t)if(e.length>t)e.splice(t,e.length-t).forEach((function(e){e.parentNode.removeChild(e)}));else for(var n=e.length;n<t;n++){var r=document.createElement("col");this._colGroup.appendChild(r),e.push(r)}}},{key:"_map",value:function(e,t){var n=e.reduce((function(e,t){return e+t}),0),r=t/n,o=0,i=e.map((function(e){var t=Math.max(y4e,Math.floor(e*r));return o+=t,t})),a=t-o;if(a>0)for(var l=i.length-1,u=100;a>0&&u-- >0;)l<0&&(l=i.length-1),i[l]+=1,a--,l--;else if(a<0)for(var c=i.length-1,s=100;a<0&&s-- >0;)c<0&&(c=i.length-1),i[c]<=y4e||(i[c]-=1,a++),c--;return i}},{key:"_updateFitWidth",value:function(){var e=this;this.dispose=ys((function(){return e._innerDOMNode.getBoundingClientRect()}),(function(t){var n=e._columns,r=e._node.attrs.colWidths,o=e._map(r,t.width),i=n.length-1,a=0;n.forEach((function(e,t){var n=o[t];t===i&&(n-=1),a+=n,e.getAttribute("width")!==n+""&&e.setAttribute("width",n+"")})),e._tableDOMNode.style.width=a+1+"px"}))}}])}();function drt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,frt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function frt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(frt=function(){return!!e})()}var hrt=function(e){function t(){var e;return(0,Ke.A)(this,t),e=drt(this,t,arguments),Object.defineProperty(e,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_innerWrapNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_tableNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_contentNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_vToolbar",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_columnManager",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"id",get:function(){return this.modelNode.id}},{key:"init",value:function(){var e,t,n,r,o,i=this,a=[];!1===(null===(t=null===(e=this.modelNode)||void 0===e?void 0:e.attrs)||void 0===t?void 0:t.borderVisible)&&a.push("ne-table-hide-border");var l=!!(null===(r=null===(n=this.modelNode)||void 0===n?void 0:n.attrs)||void 0===r?void 0:r.fitWidth);this._rootNode=ad(nw,{className:a}),this._rootNode.setAttribute("id",this.modelNode.id),this._rootNode.setAttribute("data-lake-id",this.modelNode.id),this._innerWrapNode=ad(rw),this._tableNode=ad("table",{className:"ne-table"}),this._contentNode=ad("tbody",{className:"ne-table-inner"});var u=(null===(o=this.modelNode.attrs)||void 0===o?void 0:o.colWidths)||[],c=u.reduce((function(e,t){return e+t}),0),s=[];if(u.forEach((function(e,t){s[t]="".concat((e/c*100).toFixed(2),"%")})),this.viewer.option.viewerMode===Vw.Simple){this._tableNode.innerHTML=crt(s);var d=this.viewer.getViewerDisplayWidth();c<d&&(this._tableNode.style.width=c+"px")}else l?this._columnManager=new srt(this.modelNode,this._tableNode,this._rootNode,this._innerWrapNode):(this._tableNode.innerHTML=crt(u),this._tableNode.style.width=c+"px");var f=ad(ow);f.appendChild(this._tableNode),this._tableNode.appendChild(this._contentNode),this._innerWrapNode.appendChild(f),this._rootNode.appendChild(this._innerWrapNode),this.viewer.option.disableToolbar||(this._vToolbar=new KR(this.viewer,this,this._rootNode,{getWidthMode:function(){return i.viewer.queryCommandValue("tableToggleWidthMode",i.id)}},this.getToolbarConfig,this.viewer.option.viewerMode===Vw.Present?null:this.getContainerToolbarConfig,this.getContainerRightToolbarConfig)),this.viewer.onPluginEvent("viewSizeChange",(function(){i._resetShadow()}))}},{key:"$afterInit",value:function(){var e,t,n,r=this,o=this._rootNode.parentNode;o&&o.classList.add(f5e("ne-table-hole")),null===(e=this._vToolbar)||void 0===e||e.init(),!1===(null===(t=this.modelNode.attrs)||void 0===t?void 0:t.spacing)&&(this._rootNode.parentNode.setAttribute("data-no-spacing","true"),Us.macos&&ys((function(){return hc()}),(function(e){var t;e||!1!==(null===(t=r.modelNode.attrs)||void 0===t?void 0:t.spacing)?r._innerWrapNode.style.paddingBottom="":r._innerWrapNode.style.paddingBottom="15px"})));var i=null;pc(this,this._innerWrapNode,"scroll",(function(){i&&clearTimeout(i),i=window.setTimeout((function(){r._resetShadow()}),32),r.pluginContext.onVTableScroll&&r.pluginContext.onVTableScroll(r.viewer,r._rootNode)}),{passive:!0}),setTimeout((function(){r._resetShadow()}),32),this._refreshWidthMode(),null===(n=this._columnManager)||void 0===n||n.update()}},{key:"destroy",value:function(){var e;Tr((0,Je.A)(t.prototype),"destroy",this).call(this),null===(e=this._columnManager)||void 0===e||e.destroy()}},{key:"getMainDOMNode",value:function(){return this._rootNode}},{key:"getContentDOMNode",value:function(){return this._contentNode}},{key:"updateAttribute",value:function(){var e;this._refreshWidthMode(),this._resetShadow(),null===(e=this._vToolbar)||void 0===e||e.refresh()}},{key:"getContainerToolbarConfig",value:function(){var e=this,t=["copyLink","|","maximize"];if(Math.min(this._innerWrapNode.offsetWidth,750)<this._tableNode.offsetWidth){var n=this.id,r=this.viewer;t.push({name:"widthMode",onClick:function(){r.execCommand("tableToggleWidthMode",n),e.pluginContext.onVTableWidthModeChange&&e.pluginContext.onVTableWidthModeChange(e.viewer)}})}return{items:t}}},{key:"getContainerRightToolbarConfig",value:function(){return{items:["comment"]}}},{key:"enterMaxView",value:function(e){var t=this;this.beforeMaximizeChanged(!0),this.hideAllToolbar(),this.destroyToolbar(),this.viewer.enterMaxView(this._rootNode.parentNode,e,this,(function(){t.beforeMaximizeChanged(!1)}),(function(){Promise.resolve().then((function(){t.showAllToolbar()})),t.afterMaximizeChanged(!1)})),this.afterMaximizeChanged(!0)}},{key:"createComment",value:function(){this.viewer.createComment(this._rootNode)}},{key:"showAllToolbar",value:function(){var e;null===(e=this._vToolbar)||void 0===e||e.showToolbar()}},{key:"hideAllToolbar",value:function(){var e;null===(e=this._vToolbar)||void 0===e||e.hideToolbar()}},{key:"destroyToolbar",value:function(){var e;null===(e=this._vToolbar)||void 0===e||e.destroyToolbar()}},{key:"beforeMaximizeChanged",value:function(e){}},{key:"afterMaximizeChanged",value:function(e){this._resetShadow()}},{key:"_resetShadow",value:function(){var e=this._rootNode,t=this._innerWrapNode,n=t.scrollWidth,r=Math.ceil(t.scrollLeft),o=e.classList,i=r>0,a=!1;t.clientWidth+r<n&&(a=!0);var l=f5e("ne-ui-table-left-shadow"),u=f5e("ne-ui-table-right-shadow");i?o.add(l):o.remove(l),a?o.add(u):o.remove(u)}},{key:"_refreshWidthMode",value:function(){var e,t,n=this._rootNode.parentNode;n&&((null===(t=null===(e=this.modelNode)||void 0===e?void 0:e.attrs)||void 0===t?void 0:t.widthMode)===Dl?n.classList.add("ne-full-width"):n.classList.remove("ne-full-width"))}}])}(Qw);function prt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,vrt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function vrt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vrt=function(){return!!e})()}var mrt=function(e){function t(){var e;return(0,Ke.A)(this,t),e=prt(this,t,arguments),Object.defineProperty(e,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_contentNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_breakNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e=this;this._rootNode=ad("td",{className:"ne-td"}),this._contentNode=ad("div",{className:"ne-td-content"}),this._breakNode=ad("div",{className:"ne-td-break",contentEditable:!1}),this._rootNode.appendChild(this._contentNode),this._rootNode.appendChild(this._breakNode);var t=this.modelNode.attrs.cellBgColor;if(t){var n={destroy:function(){}};xc(n,this.viewer.theme,"themeChange",(function(){Ly.syncDOMAttr(e.viewer.registry,e._rootNode,"cellBgColor",t)})),this.document.once("beforedestroy",(function(){n.destroy()}))}}},{key:"destroy",value:function(){}},{key:"getMainDOMNode",value:function(){return this._rootNode}},{key:"getContentDOMNode",value:function(){return this._contentNode}}])}(Qw);function grt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,brt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function brt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(brt=function(){return!!e})()}var yrt=function(e){function t(){var e;return(0,Ke.A)(this,t),e=grt(this,t,arguments),Object.defineProperty(e,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){this._rootNode=ad("tr",{className:"ne-tr"})}},{key:"getMainDOMNode",value:function(){return this._rootNode}}])}(Qw);function wrt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Art()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Art(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Art=function(){return!!e})()}var krt=function(e){function t(){return(0,Ke.A)(this,t),wrt(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerBoxNode((0,Ha.A)((0,Ha.A)((0,Ha.A)({},w3.node.table,hrt),w3.node.tr,yrt),w3.node.td,mrt),this.option),e.registerAttrTranslator((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)((0,Ha.A)({},w3.attr.width,new q5e),w3.attr.height,new q5e),w3.attr.rowSpan,new H5e),w3.attr.colSpan,new H5e),w3.attr.col,new B5e(this.viewer.theme)),w3.attr.colHead,new B5e(this.viewer.theme)),w3.attr.rowHead,new B5e(this.viewer.theme)),w3.attr.cellBgColor,new L5e(e)),w3.attr.verticalAlign,new Y5e));var t=e.getService($R.ID);null==t||t.registerFilterMiniToolbarItems(zFe)}}])}(Sw);function _rt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Crt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Crt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Crt=function(){return!!e})()}Object.defineProperty(krt,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:w3.pluginName}),Object.defineProperty(krt,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:Qy(urt)});var Nrt=function(e){function t(){return(0,Ke.A)(this,t),_rt(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){var n=this;t.on("document.create",(function(){var t=e.queryCommandValue("typography");e.domRootNode.classList.add("ne-typography-".concat(t)),n.kernel.requireService(aW.ID).getParagraphSpacing()===w6&&e.domRootNode.classList.add("ne-paragraph-spacing-relax")}))}}])}(Sw);function Ort(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,xrt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function xrt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xrt=function(){return!!e})()}Object.defineProperty(Nrt,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:rW.pluginName});var Ert=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Ort(this,t,arguments),Object.defineProperty(e,"_viewResizeObserver",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){this.option.enable&&(this._viewResizeObserver=new GLe(e.domRootNode),this._viewResizeObserver.on("viewSizeChange",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.emitPluginEvent.apply(e,["viewSizeChange"].concat(n))})))}},{key:"destroy",value:function(){var e;null===(e=this._viewResizeObserver)||void 0===e||e.destroy(),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}}])}(Sw);Object.defineProperty(Ert,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:qse.pluginName}),Object.defineProperty(Ert,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:ZLe});const Drt=function(e){var t=e.code,n=function(){t&&(us(t)?mC.success(sc("复制成功")):mC.error(sc("复制失败")))};if(e.tips)return Gu().createElement(Qx,{title:sc("复制代码")},Gu().createElement("div",{className:"ne-codeblock-copy-icon",onClick:n},Gu().createElement(SC,{type:"code-copy",size:24})));var r=Gu().createElement("span",{className:nk()("ne-codeblock-copy",{"small-mode":e.isSmallMode}),onClick:n},Gu().createElement(SC,{type:"action-copy",size:14}),!e.isSmallMode&&sc("复制代码"));return e.isSmallMode?Gu().createElement(Qx,{title:sc("复制代码")},r):r},Prt=function(e){var t=e.code,n=e.onExplain,r=Gu().createElement("span",{className:nk()("ne-codeblock-copy",{"small-mode":e.isSmallMode}),onClick:function(){return n(t)}},Gu().createElement(SC,{type:"theme",size:14}),!e.isSmallMode&&sc("解释代码"));return e.isSmallMode?Gu().createElement(Qx,{title:sc("解释代码")},r):r},Rrt=function(e){var t=e.mode;return Gu().createElement("span",{className:"ne-codeblock-mode-name"},function(e){return(lUe.find((function(t){return t.value===e}))||lUe[0]).name}(t))};function Srt(e){var t=e.cardData,n=e.preventCopy,r=e.onExplain,o=(0,Yu.useState)(null),i=(0,tn.A)(o,2),a=i[0],l=i[1],u=RUe(OUe,a)<=NUe,c=(0,Yu.useCallback)((function(e){!e&&a?l(null):e&&e.parentElement!==a&&l(e.parentElement)}),[a]);return Gu().createElement("div",{className:"codeblock-menu",ref:c},Gu().createElement("div",{className:"start-nav"},e.children),Gu().createElement("div",{className:"end-nav"},!u&&Gu().createElement(Gu().Fragment,null,Gu().createElement(Rrt,{key:"lang-name",mode:t.mode}),Gu().createElement($_e,{type:"vertical",className:"ne-embed-nav-divider"})),!n&&Gu().createElement(Drt,{key:"copy-button",code:t.code,isSmallMode:u}),r&&Gu().createElement(Prt,{key:"explain-button",onExplain:r,code:t.code,isSmallMode:u})))}function Trt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,jrt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function jrt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(jrt=function(){return!!e})()}var Irt=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=Trt(this,t,[e]),Object.defineProperty(n,"codemirror",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"cmRootRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(n,"collapseIconRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(n,"_clearTask",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"toggleCollapse",{enumerable:!0,configurable:!0,writable:!0,value:function(){n.setState({collapsed:!n.state.collapsed})}}),Object.defineProperty(n,"_createCodeMirror",{enumerable:!0,configurable:!0,writable:!0,value:function(){window.removeEventListener("beforeprint",n._handleBeforePrint),window.removeEventListener("afterprint",n._handleAfterPrint);var e=n.props.cardData,t=e.mode,r=e.code,o=e.foldLines,i=e.lineNumbers,a=r;try{a=(a||"").replace(/\u00a0/g," ")}catch(e){}"string"==typeof a&&n.props.viewerMode===Vw.Simple&&(a=a.split(/\n/).slice(0,602).join("\n")),vUe(n.cmRootRef.current,t,n.props.codeMirrorURL,a,!0,n._getOptions()).then((function(e){n.codemirror=e,o&&n.codemirror.foldLines(o),n.setState({iconMgLeft:fUe.calcMarginLeft(e.lineCount(),!!i)}),n.props.onReady(n.cmRootRef.current.querySelector(".cm-scroller")),n.setState({hasInit:!0}),window.addEventListener("beforeprint",n._handleBeforePrint),window.addEventListener("afterprint",n._handleAfterPrint)})).catch((function(e){console.warn(e)}))}}),Object.defineProperty(n,"_handleBeforePrint",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e,t;null===(e=n.codemirror)||void 0===e||e.setOption("viewportMargin",600),null===(t=n.codemirror)||void 0===t||t.refresh()}}),Object.defineProperty(n,"_handleAfterPrint",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e,t;null===(e=n.codemirror)||void 0===e||e.setOption("viewportMargin",10),null===(t=n.codemirror)||void 0===t||t.refresh()}}),n.state={collapsed:e.viewerMode!==Vw.Simple&&!!e.cardData.collapsed,iconMgLeft:sUe,hasInit:!1},n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){this.state.collapsed||(this._clearTask=od(this._createCodeMirror,100))}},{key:"componentDidUpdate",value:function(e,t){var n;this.state.hasInit||this.state.collapsed||!t.collapsed||this._createCodeMirror(),this.props.isDark!==e.isDark&&(null===(n=this.codemirror)||void 0===n||n.setOption("theme",bUe(this.props.cardData.theme,this.props.isDark)))}},{key:"componentWillUnmount",value:function(){var e;null===(e=this._clearTask)||void 0===e||e.call(this),window.removeEventListener("beforeprint",this._handleBeforePrint),window.removeEventListener("afterprint",this._handleAfterPrint),this.codemirror=null}},{key:"render",value:function(){var e=this.props,t=e.cardData,n=e.preventCopy,r=e.onExplain,o=this.state,i=o.collapsed,a=o.iconMgLeft,l=this._getOptions();return Gu().createElement("div",{"data-codeblock-mode":t.mode,className:nk()("ne-code ne-codeblock ne-code-viewer",{"ne-codeblock-height-limit":t.isHeightLimit(),"ne-codeblock-auto-wrap":l.autoWrap,"ne-codeblock-collapsed":i,"hide-toolbar":t.hideToolbar}),theme:l.theme},!t.hideToolbar&&Gu().createElement(Srt,{preventCopy:n,onExplain:r,cardData:this.props.cardData},Gu().createElement(CUe,{onClick:this.toggleCollapse,collapsed:i,marginLeft:i?sUe:a,ref:this.collapseIconRef}),t.name&&Gu().createElement(wUe,{name:t.name})),Gu().createElement("div",{ref:this.cmRootRef,style:{display:i?"none":"block"},className:"ne-codeblock-inner"}),t.hideToolbar&&!n&&Gu().createElement(Drt,{key:"copy-button",tips:!0,code:t.code}))}},{key:"_getOptions",value:function(){var e=this.props.cardData,t=e.theme,n=e.autoWrap,r=e.indentWithTab,o=e.tabSize,i=e.mode,a=e.lightLines,l=e.lineNumbers,u=e.customStyle,c=this.props,s=c.preventCopy,d=c.isDark;return this.props.viewerMode===Vw.Simple&&(n=!0),o=o||fUe.getCodeMirrorTabSizeByMode({mode:i}),{theme:bUe(t,d),autoWrap:n,tabSize:o,indentWithTab:r,indentUnit:o,lightLines:a,lineNumbers:l,preventCopy:s,printing:this.props.viewerMode===Vw.Simple,customStyle:u}}}])}(Yu.PureComponent);Object.defineProperty(Irt,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{onReady:function(){}}});const Brt=Irt;function Mrt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Mrt=function(){return!!e})()}function Frt(e){return function(e){function t(){var e;return(0,Ke.A)(this,t),e=function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Mrt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,arguments),Object.defineProperty(e,"_codeMirrorScrollNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_hasInit",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"destroyed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"uiViewProxy",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_clearTask",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_handleBeforePrint",{enumerable:!0,configurable:!0,writable:!0,value:function(){try{e._hasInit||e._delayInit(),e.containerNode.style.height&&(e.containerNode.style.height=null,e.containerNode.children[0]&&(e.containerNode.children[0].style.display=null))}catch(e){}}}),Object.defineProperty(e,"_delayInit",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t,n,r,o,i=(null===(o=null===(r=null===(n=null===(t=e.viewer)||void 0===t?void 0:t.option)||void 0===n?void 0:n.get)||void 0===r?void 0:r.call(n,"clipboard"))||void 0===o?void 0:o.preventCopy)||!1;e._hasInit=!0,e.uiViewProxy=Vye.render(Brt,{codeMirrorURL:e.pluginOption.codemirrorURL,cardData:e.cardData,viewerMode:e.viewer.option.viewerMode,preventCopy:i,isDark:e.viewer.theme.isDark(),onReady:function(t){e.containerNode.style.height&&(e.containerNode.style.height=null),e._clearTask=od((function(){return e.viewer.emitEvent("codeblockReady",e.id)})),e._codeMirrorScrollNode=t,e.handleReady(),ys((function(){return e.containerNode.getBoundingClientRect()}),(function(t){var n,r,o;e.containerNode.dataset.width=t.width,e.containerNode.dataset.height=t.height,e._codeMirrorScrollNode&&(e._codeMirrorScrollNode.scrollTop=0,null===(o=null===(r=null===(n=e.uiViewProxy)||void 0===n?void 0:n.getReactRef())||void 0===r?void 0:r.codemirror)||void 0===o||o.refresh())}))}},e.containerNode),xc(e,e.viewer.theme,"themeChange",(function(){var t;e.destroyed||null===(t=e.uiViewProxy)||void 0===t||t.rerender({isDark:e.viewer.theme.isDark()})}));var a=ad("span",{className:"ne-v-codeblock-hold"});a.innerText="​",e.cardRootNode.prepend(a)}}),Object.defineProperty(e,"_codeExplainClose",{enumerable:!0,configurable:!0,writable:!0,value:[]}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"calcCodeHeight",value:function(){return this.cardData.code&&!this.cardData.collapsed?Math.floor(20.3*this.cardData.code.split(/\n/g).length)+(this.cardData.hideToolbar?0:30)+"px":"initial"}},{key:"init",value:function(){var e=this;window.addEventListener("beforeprint",this._handleBeforePrint),this.viewer.option.viewerMode===Vw.Simple?this._delayInit():this.plugin.intersectionObserver?(this.containerNode&&(this.containerNode.style.height=this.calcCodeHeight()),this.plugin.intersectionObserver.observe(this.containerNode,(function(t){!e._hasInit&&t.isIntersecting&&e._delayInit()}))):(this.containerNode&&(this.containerNode.style.height=this.calcCodeHeight()),this._clearTask=od(this._delayInit,K6))}},{key:"destroy",value:function(){var e,n;null===(e=this._clearTask)||void 0===e||e.call(this),null===(n=this.uiViewProxy)||void 0===n||n.destroy(),this.destroyed=!0,Tr((0,Je.A)(t.prototype),"destroy",this).call(this),window.removeEventListener("beforeprint",this._handleBeforePrint),this._codeExplainClose.forEach((function(e){return e()})),this._codeExplainClose.length=0}},{key:"handleReady",value:function(){}}])}(e)}function Lrt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Urt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Urt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Urt=function(){return!!e})()}var Vrt=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Lrt(this,t,arguments),Object.defineProperty(e,"resizeTarget",{enumerable:!0,configurable:!0,writable:!0,value:function(){return e._codeMirrorScrollNode}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"handleReady",value:function(){Tr((0,Je.A)(t.prototype),"handleReady",this).call(this),this.resizeCardHeight()}}])}(XA.extend(Frt,oS));function Hrt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,zrt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function zrt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(zrt=function(){return!!e})()}var Wrt=function(e){function t(){return(0,Ke.A)(this,t),Hrt(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){this.viewer.createCardUI(this)}}])}(Mw);function qrt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function $rt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Krt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Krt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Krt=function(){return!!e})()}Object.defineProperty(Wrt,"$CardData",{enumerable:!0,configurable:!0,writable:!0,value:X6}),Object.defineProperty(Wrt,"$CardUI",{enumerable:!0,configurable:!0,writable:!0,value:Vrt});var Yrt=function(e){function t(){var e;return(0,Ke.A)(this,t),e=$rt(this,t,arguments),Object.defineProperty(e,"_intersectionObserver",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_handleInterSectionCallback",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return qrt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qrt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,o=r.target,i=r.intersectionRatio,a=o;i>=.01?(a.style.height=null,a.children[0]&&(a.children[0].style.display=null)):0===i&&(a.style.height=a.offsetHeight+"px",a.children[0]&&(a.children[0].style.display="none"))}}catch(e){n.e(e)}finally{n.f()}}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){window.STOP_INTERSECTION||(this._intersectionObserver=As(this._handleInterSectionCallback,{threshold:[0,.01,1],rootMargin:"800px 0%"})),e.registerBlockCard(this,eM.CODEBLOCK.NODE_NAME,Wrt)}},{key:"intersectionObserver",get:function(){return this._intersectionObserver}}])}(Sw);function Grt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Jrt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Jrt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Jrt=function(){return!!e})()}Object.defineProperty(Yrt,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:eM.CODEBLOCK.PLUGIN_NAME}),Object.defineProperty(Yrt,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:rVe});var Xrt=function(e){function t(){return(0,Ke.A)(this,t),Grt(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){return Gu().createElement(PVe,{renderUI:function(e){return e},cardData:this.props.cardData,onOpenLink:this.props.onOpenLink,generateMentionInfo:this.props.generateMentionInfo})}}])}(Yu.Component);function Qrt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Qrt=function(){return!!e})()}function Zrt(e){return function(e){function t(){return(0,Ke.A)(this,t),function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Qrt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e=this;Vye.render(Xrt,{cardData:this.cardData,generateMentionInfo:this.pluginOption.generateMentionInfo,onOpenLink:function(t){var n=e.pluginOption.generateMentionInfo(e.cardData.getUserInfo()),r=n.url,o=n.externalOpen;r&&e.viewer.emitEvent("openMentionLink",r,o||t)}},this.containerNode)}},{key:"destroy",value:function(){this.containerNode&&Vye.unmount(this.containerNode),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}}])}(e)}var eot=Zrt;function tot(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,not()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function not(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(not=function(){return!!e})()}var rot=function(e){function t(){return(0,Ke.A)(this,t),tot(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){this.pluginOption.viewerUI&&(t.$CardUI=this.pluginOption.viewerUI),this.viewer.createCardUI(this)}}])}(Bw);function oot(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,iot()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function iot(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(iot=function(){return!!e})()}Object.defineProperty(rot,"$CardData",{enumerable:!0,configurable:!0,writable:!0,value:W8}),Object.defineProperty(rot,"$CardUI",{enumerable:!0,configurable:!0,writable:!0,value:Zrt(QA()())});var aot=function(e){function t(){return(0,Ke.A)(this,t),oot(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e,t){e.registerInlineCard(this,"mention",rot)}}])}(Sw);Object.defineProperty(aot,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:"mention"}),Object.defineProperty(aot,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:XVe});var lot=null;function uot(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,cot()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function cot(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(cot=function(){return!!e})()}var sot=function(e){function t(){var e;return(0,Ke.A)(this,t),e=uot(this,t,arguments),Object.defineProperty(e,"renderError",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=e.props.ErrorComponent;return t?Gu().createElement(t,{cardData:e.props.cardData}):Gu().createElement(mHe,{cardData:e.props.cardData})}}),Object.defineProperty(e,"renderSuccess",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=e.props.SuccessComponent;return t?Gu().createElement(t,{cardData:e.props.cardData}):Gu().createElement(yHe,{cardData:e.props.cardData,getVideoUrl:e.props.getVideoUrl,getVideoCover:e.props.getVideoCover,withPip:e.props.withPip})}}),Object.defineProperty(e,"renderSimpleMode",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=e.props.getVideoUrl();if(t){var n=e.props.cardData.getName();return Gu().createElement("a",{href:yh.sanitizeUrl(t),target:"_blank",onClick:function(n){n.preventDefault(),n.stopPropagation(),e.props.visitLink(yh.sanitizeUrl(t),!0)}},n)}return null}}),Object.defineProperty(e,"renderContent",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=e.props.cardData.getStatus();return t===c9.Error?e.renderError():t!==c9.Uploaded&&t!==c9.Done||!e.props.getVideoUrl()?null:e.renderSuccess()}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){if(this.props.viewerMode===Vw.Simple)return this.renderSimpleMode();var e=this.renderContent();return Gu().createElement("div",{className:"ne-card-video","data-testid":"ne-card-video-viewer"},e)}}])}(Yu.Component);function dot(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(dot=function(){return!!e})()}function fot(e){return function(e){function t(){var e;return(0,Ke.A)(this,t),e=function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,dot()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,arguments),Object.defineProperty(e,"_uiViewProxy",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_videoUrl",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"SuccessComponent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"ErrorComponent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"getVideoUrl",{enumerable:!0,configurable:!0,writable:!0,value:function(){return e.cardData.getUrl()}}),Object.defineProperty(e,"getVideoCover",{enumerable:!0,configurable:!0,writable:!0,value:function(){return e.cardData.getCover()}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e,t=this;this._uiViewProxy=Vye.render(sot,{visitLink:function(e,n){t.viewer.emitEvent("visitLink",e,n)},cardData:this.cardData,getVideoUrl:this.getVideoUrl,getVideoCover:this.getVideoCover,viewerMode:this.viewer.option.viewerMode,withPip:null===(e=this.pluginOption._option)||void 0===e?void 0:e.withPip,SuccessComponent:this.SuccessComponent,ErrorComponent:this.ErrorComponent},this.containerNode)}},{key:"destroy",value:function(){Gl().unmountComponentAtNode(this.containerNode),Tr((0,Je.A)(t.prototype),"destroy",this).call(this),this._uiViewProxy=null}},{key:"updateData",value:function(e){this._uiViewProxy.rerender(e)}}])}(e)}var hot=fot;function pot(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,vot()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function vot(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vot=function(){return!!e})()}var mot=function(e){function t(){var e;return(0,Ke.A)(this,t),e=pot(this,t,arguments),Object.defineProperty(e,"_cardUI",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){this.pluginOption.viewerUI&&(t.$CardUI=this.pluginOption.viewerUI),this._cardUI=this.viewer.createCardUI(this)}},{key:"destroy",value:function(){var e;null===(e=this._cardUI)||void 0===e||e.destroy(),this._cardUI=null}}])}(Mw);function got(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,bot()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function bot(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bot=function(){return!!e})()}Object.defineProperty(mot,"$CardUI",{enumerable:!0,configurable:!0,writable:!0,value:fot(QA()())}),Object.defineProperty(mot,"$CardData",{enumerable:!0,configurable:!0,writable:!0,value:h9}),document.addEventListener("pointerdown",(function(e){var t,n,r;if(null===(t=e.target)||void 0===t?void 0:t.closest(".ne-viewer")){if(document.fullscreenElement)return;lot=null!==(r=null===(n=document.scrollingElement)||void 0===n?void 0:n.scrollTop)&&void 0!==r?r:null}})),document.addEventListener("fullscreenchange",(function(){null!==lot&&document.scrollingElement&&document.scrollingElement.scrollTop!==lot&&(document.scrollingElement.scrollTop=lot)}));var yot=function(e){function t(){return(0,Ke.A)(this,t),got(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerBlockCard(this,eM.VIDEO.NODE_NAME,mot)}}])}(Sw);function wot(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Aot()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Aot(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Aot=function(){return!!e})()}Object.defineProperty(yot,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:"video"}),Object.defineProperty(yot,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:LHe});var kot=function(e){function t(){var e;return(0,Ke.A)(this,t),e=wot(this,t,arguments),Object.defineProperty(e,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){this._rootNode=ad(H9.domNode.column)}},{key:"getMainDOMNode",value:function(){return this._rootNode}}])}(Qw);function _ot(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Cot()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Cot(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Cot=function(){return!!e})()}var Not=function(e){function t(){var e;return(0,Ke.A)(this,t),e=_ot(this,t,arguments),Object.defineProperty(e,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_contentNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){this._rootNode=ad(H9.domNode.columns),this._contentNode=ad(H9.domNode.columnsContent),this._rootNode.appendChild(this._contentNode),Us.mobile&&this._rootNode.classList.add("ne-columns-h5")}},{key:"getMainDOMNode",value:function(){return this._rootNode}},{key:"getContentDOMNode",value:function(){return this._contentNode}},{key:"$afterInit",value:function(){this._refreshWidthMode()}},{key:"$didUpdate",value:function(){this._refreshWidthMode()}},{key:"_refreshWidthMode",value:function(){var e,t=this._rootNode.parentNode;t&&((null===(e=this.modelNode.attrs)||void 0===e?void 0:e.widthMode)===Dl?t.classList.add("ne-full-width"):t.classList.remove("ne-full-width"))}}])}(Qw);function Oot(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,xot()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function xot(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xot=function(){return!!e})()}var Eot=function(e){function t(){return(0,Ke.A)(this,t),Oot(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerAttrTranslator(H9.attr.width,new g6e),e.registerBoxNode({columns:Not,column:kot})}}])}(Sw);Object.defineProperty(Eot,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:H9.pluginName});var Dot={emptySummaryTip:sc("无标题折叠块")},Pot=function(){return(0,$e.A)((function e(t,n){(0,Ke.A)(this,e),Object.defineProperty(this,"kernelOption",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Object.assign(Object.assign({},Dot),t)}),[{key:"emptySummaryTip",get:function(){return this._option.emptySummaryTip||""}}])}();function Rot(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Sot()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Sot(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Sot=function(){return!!e})()}Object.defineProperty(Pot,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:Rt});var Tot=function(e){function t(e,n){var r;return(0,Ke.A)(this,t),r=Rot(this,t),Object.defineProperty(r,"collapsePlugin",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(r,"viewer",{enumerable:!0,configurable:!0,writable:!0,value:n}),r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"emptySummaryTip",get:function(){return this.collapsePlugin.option.emptySummaryTip}},{key:"isSimpleMode",get:function(){return this.viewer.option.viewerMode===Vw.Simple}}])}(it);function jot(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Iot()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Iot(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Iot=function(){return!!e})()}function Bot(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Mot(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mot(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function Mot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Fot=function(e){function t(){return(0,Ke.A)(this,t),jot(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"getState",value:function(){return dt}},{key:"getValue",value:function(){return!1}},{key:"execute",value:function(e){if(!e)return!1;var t=this.viewer.domRootNode.querySelector('[id="'.concat(e,'"]'));if(!t)return!1;var n=function(e){for(var t=null;e;){if(e._neRef){t=e._neRef;break}e=e.parentNode}if(!t||t.isRootNode())return null;for(;t;){if(t.hasCategory(qe.ContainerHole)){var n,r=Bot(t.children);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.hasCategory(Rt))return o}}catch(e){r.e(e)}finally{r.f()}}if(t.hasCategory(Rt))return t;t=t.parent}return null}(t);return!!n&&(this.plugin.emit("unfold",n.modelNode),!0)}}])}(Ow);function Lot(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Uot()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Uot(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Uot=function(){return!!e})()}Object.defineProperty(Fot,"ID",{enumerable:!0,configurable:!0,writable:!0,value:V7.command.tryUnfoldCollapse});var Vot=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Lot(this,t,arguments),Object.defineProperty(e,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_contentNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_controllerNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_isOpen",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_isInitial",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(e,"_oldState",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_foldController",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_handleBeforePrint",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t,n;e._oldState=e._isOpen,e._isOpen||(e._isOpen=!0,null===(t=e._rootNode)||void 0===t||t.setAttribute("ne-open","true"),null===(n=e._foldController)||void 0===n||n.update())}}),Object.defineProperty(e,"_handleAfterPrint",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t,n;e._isOpen!==e._oldState&&(e._isOpen=e._oldState,null===(t=e._rootNode)||void 0===t||t.setAttribute("ne-open",e._isOpen?"true":"false"),null===(n=e._foldController)||void 0===n||n.update())}}),Object.defineProperty(e,"unfold",{enumerable:!0,configurable:!0,writable:!0,value:function(){e._isInitial&&(e._isInitial=!1,e._rootNode.classList.remove("collapse-initial")),e._isOpen||(e._rootNode.setAttribute("ne-open","true"),e._isOpen=!0,e._foldController.update(),e.modelNode._attrs.open="true",e.pluginContext.emit("afterUnfold",e.modelNode))}}),Object.defineProperty(e,"_toggleOpen",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t,n,r;e._isOpen?(null===(t=e._rootNode)||void 0===t||t.setAttribute("ne-open","false"),e.modelNode._attrs.open="false"):(null===(n=e._rootNode)||void 0===n||n.setAttribute("ne-open","true"),e.modelNode._attrs.open="true",e.pluginContext.emit("afterUnfold",e.modelNode)),e._isOpen=!e._isOpen,null===(r=e._foldController)||void 0===r||r.update()}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e,t,n=this;this._rootNode=ad("ne-collapse"),this._controllerNode=ad("div"),this._contentNode=ad("ne-collapse-content"),this._controllerNode.className="collapse-controller",this._rootNode.appendChild(this._contentNode),this._rootNode.appendChild(this._controllerNode),this._rootNode.appendChild(this._contentNode),this.modelNode.children.slice(1).every((function(e){return e.isEmpty()||e.children.every((function(e){return e.isTextNode()&&e.isEmpty()}))}))&&this._rootNode.classList.add("content-empty"),this._rootNode.setAttribute("id",this.modelNode.id),this._isOpen=this.pluginContext.isSimpleMode||"true"===(null===(t=null===(e=this.modelNode)||void 0===e?void 0:e.attrs)||void 0===t?void 0:t.open),this._foldController=new d8e(this._controllerNode,{isOpen:function(){return n._isOpen},toggleOpen:this._toggleOpen,isDisabled:function(){return!1},queryState:function(){}}),xc(this,this.pluginContext,"unfold",(function(e){if(e===n.modelNode){var t=function(e){for(var t=Number.MAX_VALUE,n=[],r=e;t>1&&(r=r.previousElementSibling);){var o=rZe(r);o&&o<t&&(t=o,n.push(r))}return n.reverse(),n}(n._rootNode.parentNode);t.forEach((function(e){var t,n,r;null===(r=null===(n=null===(t=e._neRef)||void 0===t?void 0:t._instance)||void 0===n?void 0:n.unfold)||void 0===r||r.call(n)})),n.unfold()}})),window.addEventListener("beforeprint",this._handleBeforePrint),window.addEventListener("afterprint",this._handleAfterPrint)}},{key:"$afterInit",value:function(){var e;this._refreshWidthMode(),this._isOpen&&(null===(e=this._rootNode)||void 0===e||e.setAttribute("ne-open","true"))}},{key:"$didUpdate",value:function(){this._refreshWidthMode()}},{key:"_refreshWidthMode",value:function(){var e,t,n=null===(e=this._rootNode)||void 0===e?void 0:e.parentNode;n&&((null===(t=this.modelNode.attrs)||void 0===t?void 0:t.widthMode)===Dl?n.classList.add("ne-full-width"):n.classList.remove("ne-full-width"))}},{key:"getMainDOMNode",value:function(){return this._rootNode}},{key:"getContentDOMNode",value:function(){return this._contentNode}},{key:"destroy",value:function(){var e,t;window.removeEventListener("beforeprint",this._handleBeforePrint),window.removeEventListener("afterprint",this._handleAfterPrint),null===(t=null===(e=this._foldController)||void 0===e?void 0:e.destroy)||void 0===t||t.call(e),this._foldController=null}}])}(Qw);function Hot(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,zot()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function zot(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(zot=function(){return!!e})()}var Wot=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Hot(this,t,arguments),Object.defineProperty(e,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e;this._rootNode=ad("ne-summary"),this._rootNode.setAttribute("id",this.modelNode.id),((e=this.modelNode).isEmpty()||e.children.every((function(e){return e.isTextNode()&&e.isEmpty()})))&&(this._rootNode.dataset.placeholder=this.pluginContext.emptySummaryTip)}},{key:"getMainDOMNode",value:function(){return this._rootNode}}])}(Qw);function qot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function $ot(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Kot()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Kot(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Kot=function(){return!!e})()}var Yot=function(e){function t(){return(0,Ke.A)(this,t),$ot(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=new Tot(this,e);e.registerAttrTranslator("open",new u8e),t.on("afterUnfold",(function(){var t,n,r,o=[],i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return qot(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qot(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(e.inCollapsedNodes);try{for(i.s();!(r=i.n()).done;){var a=r.value;a.isInCollapsed||(null===(n=(t=a).$unCollapsed)||void 0===n||n.call(t),o.push(a))}}catch(e){i.e(e)}finally{i.f()}e.removeInCollapsedNodes(o)})),e.registerBoxNode({collapse:{clazz:Vot,pluginContext:t},summary:{clazz:Wot,pluginContext:t}})}}])}(Sw);function Got(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Jot()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Jot(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Jot=function(){return!!e})()}Object.defineProperty(Yot,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:V7.pluginName}),Object.defineProperty(Yot,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:Pot}),Object.defineProperty(Yot,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[Fot]});var Xot=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Got(this,t,arguments),Object.defineProperty(e,"state",{enumerable:!0,configurable:!0,writable:!0,value:{kaTexError:!1}}),Object.defineProperty(e,"handleError",{enumerable:!0,configurable:!0,writable:!0,value:function(t){e.setState({kaTexError:t})}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){var e=this.state.kaTexError,t=this.props.cardData;return t.code&&!e?Gu().createElement("span",{className:"ne-math-entry ne-math-code"},Gu().createElement(Rze,{katexURL:this.props.katexURL,code:t.code,onError:this.handleError})):e?Gu().createElement("span",{className:"ne-math-placeholder"},sc("非法 TeX 公式")):t.isEmpty()?Gu().createElement("span",{className:"ne-math-placeholder"},sc("添加 TeX 公式")):null}}])}(Yu.PureComponent);function Qot(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Zot()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Zot(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Zot=function(){return!!e})()}Object.defineProperty(Xot,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{onLoaded:function(){}}});var eit=UUe(0,(function(e){return function(e){function t(){var e;return(0,Ke.A)(this,t),e=Qot(this,t,arguments),Object.defineProperty(e,"_ui",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"destroyed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"updateProps",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n;null===(n=e._ui)||void 0===n||n.rerender(t)}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"isAsyncUI",value:function(){return!0}},{key:"init",value:function(){var e=this;this._ui=Vye.render(Xot,{cardData:this.cardData,isDark:this.viewer.theme.isDark(),katexURL:this.pluginOption.katexURL,onLoaded:function(){e.loaded()}},this.containerNode),xc(this,this.viewer.theme,"themeChange",(function(){var t;e.destroyed||null===(t=e._ui)||void 0===t||t.rerender({isDark:e.viewer.theme.isDark()})}))}},{key:"destroy",value:function(){var e;null===(e=this._ui)||void 0===e||e.destroy(),Tr((0,Je.A)(t.prototype),"destroy",this).call(this),this.destroyed=!0}}])}(e)}));function tit(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,nit()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function nit(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nit=function(){return!!e})()}var rit=function(e){function t(){return(0,Ke.A)(this,t),tit(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){this.viewer.createCardUI(this)}}])}(Mw);function oit(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,iit()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function iit(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(iit=function(){return!!e})()}Object.defineProperty(rit,"$CardData",{enumerable:!0,configurable:!0,writable:!0,value:Kee}),Object.defineProperty(rit,"$CardUI",{enumerable:!0,configurable:!0,writable:!0,value:XA.extend(eit)});var ait=function(e){function t(){return(0,Ke.A)(this,t),oit(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerInlineCard(this,eM.MATH.NODE_NAME,rit)}}])}(Sw);function lit(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,uit()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function uit(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(uit=function(){return!!e})()}Object.defineProperty(ait,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:eM.MATH.PLUGIN_NAME}),Object.defineProperty(ait,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:Qze});var cit=function(e){function t(){var e;return(0,Ke.A)(this,t),e=lit(this,t,arguments),Object.defineProperty(e,"renderSimpleMode",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=e.props.cardData.getSrc();return Gu().createElement("a",{href:yh.sanitizeUrl(t),target:"_blank",onClick:function(n){n.preventDefault(),n.stopPropagation(),e.props.visitLink(yh.sanitizeUrl(t),!0)}},t)}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){return this.props.viewerMode===Vw.Simple?this.renderSimpleMode():Gu().createElement(uWe,{cardData:this.props.cardData})}}])}(Yu.Component);function sit(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(sit=function(){return!!e})()}function dit(e){return function(e){function t(){return(0,Ke.A)(this,t),function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,sit()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e=this;Vye.render(cit,{visitLink:function(t,n){e.viewer.emitEvent("visitLink",t,n)},cardData:this.cardData,viewerMode:this.viewer.option.viewerMode},this.containerNode),this.cardData.getSrc()||(this.cardRootNode.style.display="none")}},{key:"destroy",value:function(){this.containerNode&&Vye.unmount(this.containerNode),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}}])}(e)}var fit=dit;function hit(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,pit()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function pit(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pit=function(){return!!e})()}var vit=function(e){function t(){return(0,Ke.A)(this,t),hit(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){this.pluginOption.viewerUI&&(t.$CardUI=this.pluginOption.viewerUI),this.viewer.createCardUI(this)}}])}(Mw);function mit(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,git()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function git(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(git=function(){return!!e})()}Object.defineProperty(vit,"$CardData",{enumerable:!0,configurable:!0,writable:!0,value:Rre}),Object.defineProperty(vit,"$CardUI",{enumerable:!0,configurable:!0,writable:!0,value:dit(QA()())});var bit=function(e){function t(){return(0,Ke.A)(this,t),mit(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerBlockCard(this,"thirdparty",vit)}}])}(Sw);Object.defineProperty(bit,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:"thirdparty"}),Object.defineProperty(bit,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:Qy(Vre)});var yit={enable:!1,allowModifyHash:!0,getContainer:null},wit=function(){return(0,$e.A)((function e(t,n){(0,Ke.A)(this,e),Object.defineProperty(this,"kernelOption",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Ww()({},yit,t)}),[{key:"enable",get:function(){return this._option.enable}},{key:"isAllowModifyHash",value:function(){return!0===this._option.allowModifyHash}},{key:"getContainer",value:function(){return"function"==typeof this._option.getContainer?this._option.getContainer():null}}])}();function Ait(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,kit()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function kit(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(kit=function(){return!!e})()}Object.defineProperty(wit,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"toc"});var _it=function(e){function t(e,n){var r,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];(0,Ke.A)(this,t),r=Ait(this,t),Object.defineProperty(r,"viewer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_mountNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(r,"_view",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(r,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_eventEmitter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_pinStatus",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(r,"_hoverTimeout",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(r,"_tocData",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(r,"_currentPinStatus",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(r,"_parentNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(r,"_cancelPrevScroll",{enumerable:!0,configurable:!0,writable:!0,value:null}),r.viewer=e,r._option=n,r._eventEmitter=new it,r._tocData=i,r._eventEmitter.on("pinStatusChange",(function(e){r._pinStatus=e,r._currentPinStatus=e,r.setPinStatus(e),r.refresh(),r.viewer.emitPluginEvent("tocPinStatusChange",e)}));var a=r._option.getContainer();return a||(a=r.viewer.domRootNode),r._parentNode=a,o&&r.init(a),r}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this;this._mountNode=ad("div",{className:"ne-viewer-toc-sidebar"});var n=this._mountNode;this._mountNode.addEventListener("mouseenter",(function(){t._hoverTimeout=setTimeout((function(){n.classList.add("ne-viewer-toc-sidebar-hover"),t._hoverTimeout=null}),350)})),this._mountNode.addEventListener("mouseleave",(function(){t._hoverTimeout&&(clearTimeout(t._hoverTimeout),t._hoverTimeout=null),n.classList.remove("ne-viewer-toc-sidebar-hover")})),e.appendChild(this._mountNode),this._view=Vye.render(qWe,{toc:[],eventEmitter:this._eventEmitter,scrollNode:this.viewer.scrollNode,contentNode:this.viewer.viewerBodyNode,offsetTop:this.viewer.option.boundaryTopOffset,checkOutside:!0,allowShowHash:!0,onClick:function(e){t.emit("tocPositionChange",e),t._scrollTo(e)}},this._mountNode)}},{key:"destroy",value:function(){var e,t;this.removeAllListeners(),this._mountNode&&(Vye.unmount(this._mountNode),null===(t=(e=this._mountNode).remove)||void 0===t||t.call(e))}},{key:"update",value:function(e){var t,n;this._tocData=e,null===(n=null===(t=this._view)||void 0===t?void 0:t.rerender)||void 0===n||n.call(t,{toc:e})}},{key:"refresh",value:function(){this._eventEmitter.emit("change")}},{key:"getPinStatus",value:function(){return this._pinStatus}},{key:"open",value:function(){var e;null===(e=this._mountNode&&this._mountNode.parentNode)||void 0===e||e.classList.add("ne-viewer-toc-visible")}},{key:"close",value:function(){var e;null===(e=this._mountNode&&this._mountNode.parentNode)||void 0===e||e.classList.remove("ne-viewer-toc-visible")}},{key:"toggle",value:function(){var e;null===(e=this._mountNode&&this._mountNode.parentNode)||void 0===e||e.classList.toggle("ne-viewer-toc-visible")}},{key:"setPinStatus",value:function(e){var t;null===(t=this._mountNode&&this._mountNode.parentNode)||void 0===t||t.setAttribute("ne-viewer-toc-pin",String(e))}},{key:"setOutsideStatus",value:function(e){var t;null===(t=this._mountNode&&this._mountNode.parentNode)||void 0===t||t.setAttribute("ne-viewer-toc-outside",String(e))}},{key:"setNormalViewStatus",value:function(e){var t;this._view&&(null===(t=this._view.getReactRef())||void 0===t||t.setNormalViewStatus(e))}},{key:"_scrollTo",value:function(e){var t,n=this;this._option.isAllowModifyHash()&&(location.hash=e);var r=this.viewer.domRootNode.querySelector('[id="'.concat(e,'"]'));r&&(null===(t=this._cancelPrevScroll)||void 0===t||t.dispose(),function e(t){n._cancelPrevScroll=ys((function(){var e=r.getBoundingClientRect(),o=n.viewer.scrollNode.getBoundingClientRect(),i=n.viewer.scrollNode.scrollTop,a=i+e.top-o.top;return n.viewer.scrollNode===document.scrollingElement&&(a=Math.abs(o.top-e.top+n.viewer.option.boundaryTopOffset)),{dist:a,shouldRedo:t>0&&i!==a}}),(function(r){var o=r.dist,i=r.shouldRedo;n.viewer.scrollNode.scrollTop=o,i?e(t-1):n._cancelPrevScroll=null}))}(10))}}])}(it);function Cit(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Nit()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Nit(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Nit=function(){return!!e})()}var Oit=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Cit(this,t,arguments),Object.defineProperty(e,"_tocSidebar",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"_tocData",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(e,"_tocCollapse",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this;this.option.enable&&(this._tocCollapse=new QWe,e.on("afterContentChange",(function(){var e;null===(e=t._tocSidebar)||void 0===e||e.refresh()})),e.on("ready",(function(){var e,n,r;null===(e=t._tocSidebar)||void 0===e||e.update(t._tocData),null===(n=t._tocSidebar)||void 0===n||n.open(),null===(r=t._tocSidebar)||void 0===r||r.refresh()})),e.kernel.onPluginEvent("tocChange",(function(n){var r,o,i;t._tocData=n,e.emitPluginEvent("tocPinStatusChange",(null===(r=t._tocData)||void 0===r?void 0:r.length)>0),(null===(o=t._tocData)||void 0===o?void 0:o.length)>0&&(t._tocSidebar=new _it(e,t.option,!0,n),t._tocSidebar.on("tocPositionChange",(function(t){e.emitPluginEvent("tocPositionChange",t)})),null===(i=t._tocCollapse)||void 0===i||i.setTOCSidebar(t._tocSidebar),t._tocSidebar.open(),e.emitPluginEvent("tocOpenStatusChange",!0))})),e.on("enterMaxView",(function(){var e;null===(e=t._tocSidebar)||void 0===e||e.close()})),e.on("leaveMaxView",(function(){var e;null===(e=t._tocSidebar)||void 0===e||e.open()})),e.onPluginEvent("viewSizeChange",(function(){var e,n;null===(n=t._tocCollapse)||void 0===n||(e=n).checkIgnoreForce.apply(e,arguments)})))}},{key:"destroy",value:function(){var e;null===(e=this._tocSidebar)||void 0===e||e.destroy(),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}}])}(Sw);function xit(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Eit()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Eit(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Eit=function(){return!!e})()}Object.defineProperty(Oit,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:"toc"}),Object.defineProperty(Oit,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:wit});var Dit=function(e){function t(){return(0,Ke.A)(this,t),xit(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){return Gu().createElement(D$e,{cardData:this.props.cardData,clickable:!0,isLoadingError:!0,onOpenLink:this.props.onOpenLink})}}])}(Yu.Component);function Pit(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Pit=function(){return!!e})()}function Rit(e){return function(e){function t(){var e;return(0,Ke.A)(this,t),e=function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Pit()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,arguments),Object.defineProperty(e,"_uiViewProxy",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e=this;this._uiViewProxy=Vye.render(Dit,{cardData:this.cardData,onOpenLink:function(){var t=e.cardData.getSrc();t&&e.viewer.emitEvent("visitLink",t,!0)}},this.containerNode)}},{key:"destroy",value:function(){var e;null===(e=this._uiViewProxy)||void 0===e||e.destroy(),this._uiViewProxy=null,Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}}])}(e)}function Sit(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Tit()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Tit(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Tit=function(){return!!e})()}var jit=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Sit(this,t,arguments),Object.defineProperty(e,"_ui",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){this._ui=this.viewer.createCardUI(this)}},{key:"destroy",value:function(){var e;Tr((0,Je.A)(t.prototype),"destroy",this).call(this),null===(e=this._ui)||void 0===e||e.destroy(),this._ui=null}}])}(Mw);function Iit(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Bit()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Bit(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Bit=function(){return!!e})()}Object.defineProperty(jit,"$CardUI",{enumerable:!0,configurable:!0,writable:!0,value:XA.extend(Rit)}),Object.defineProperty(jit,"$CardData",{enumerable:!0,configurable:!0,writable:!0,value:Pae});var Mit=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Iit(this,t,arguments),Object.defineProperty(e,"_ui",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){this._ui=this.viewer.createCardUI(this)}},{key:"destroy",value:function(){var e;null===(e=this._ui)||void 0===e||e.destroy(),this._ui=null,Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}}])}(Mw);function Fit(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Lit()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Lit(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Lit=function(){return!!e})()}Object.defineProperty(Mit,"$CardUI",{enumerable:!0,configurable:!0,writable:!0,value:XA.extend(Rit)}),Object.defineProperty(Mit,"$CardData",{enumerable:!0,configurable:!0,writable:!0,value:Pae});var Uit=function(e){function t(){return(0,Ke.A)(this,t),Fit(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerBlockCard(this,"bookmark",jit),e.registerInlineCard(this,"bookmarkInline",Mit)}}])}(Sw);function Vit(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Hit()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Hit(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Hit=function(){return!!e})()}Object.defineProperty(Uit,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:"bookmark"});var zit=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Vit(this,t,arguments),Object.defineProperty(e,"_oldObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"current",get:function(){return"dark"}},{key:"observe",value:function(e){this.viewer.theme.on("themeChange",e)}},{key:"init",value:function(e){this.option.isEnable&&(this._oldObserver=SC.themeObserver,SC.themeObserver=this,e.theme.registerTheme("dark-mode",new tKe(ou.DARK)),e.theme.setActiveTheme("dark-mode"))}},{key:"destroy",value:function(){Tr((0,Je.A)(t.prototype),"destroy",this).call(this),this.option.isEnable&&(SC.themeObserver=this._oldObserver)}}])}(Sw);function Wit(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,qit()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function qit(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qit=function(){return!!e})()}Object.defineProperty(zit,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:nKe.pluginName}),Object.defineProperty(zit,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:Qy(rKe)});var $it=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Wit(this,t,arguments),Object.defineProperty(e,"ref",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"getClassName",{enumerable:!0,configurable:!0,writable:!0,value:Xs("ne-card-calendar-schedule-line")}),Object.defineProperty(e,"handleOpenSchedule",{enumerable:!0,configurable:!0,writable:!0,value:function(t){t.stopPropagation(),t.preventDefault();var n=fKe(e.props),r=e.ref.current.getBoundingClientRect(),o={x:0===n.indexOf("left")?r.left:r.right,y:r.top};e.props.onOpen(e.props.schedule,Object.assign(Object.assign({},o),{placement:n}))}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){var e=this.props,t=e.schedule,n=e.date,r=e.activeScheduleId,o=t.isStartDate(n),i=t.id===r,a=dKe(this.props),l=a.lineStyle,u=a.labelStyle,c=a.leftArrowStyle,s=a.rightArrowStyle,d=a.isShowControl;return Gu().createElement("div",{className:this.getClassName(),ref:this.ref,style:l,"data-id":t.id,"data-active":i,"data-is-start":o,onClick:this.handleOpenSchedule},o?Gu().createElement("div",{className:this.getClassName("label"),style:u}):Gu().createElement("div",{className:this.getClassName("right-arrow"),style:s}),Gu().createElement("div",{className:this.getClassName("title"),"data-not-title":!t.title},t.title||sc("添加日程标题")),d?null:Gu().createElement("div",{className:this.getClassName("left-arrow"),style:c}))}}])}(Yu.Component),Kit=/(?:[\u0100-\uffff\s]|^)https?:\/\/(?:[^/.]+?\.)+?[^/.]+?(?:\/\S*?)?(?:(?=[\u0100-\uffff\s])|$)/g;function Yit(e){if(!e)return e;var t=/\s/;return(e=vd.encodeHTML(e)).replace(Kit,(function(e){var n="",r="";return"h"!==e[0]&&(n=e[0],e=e.substring(1)),t.test(e[e.length-1])&&(r=e[e.length-1],e=e.substring(0,e.length-1)),"".concat(n,'<a href="').concat(yh.sanitizeUrl(encodeURI(e)),'" target="_blank">').concat(e,"</a>").concat(r)}))}function Git(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Jit()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Jit(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Jit=function(){return!!e})()}var Xit=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Git(this,t,arguments),Object.defineProperty(e,"getClassName",{enumerable:!0,configurable:!0,writable:!0,value:Xs("ne-card-calendar-schedule-panel")}),Object.defineProperty(e,"descRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(e,"renderItem",{enumerable:!0,configurable:!0,writable:!0,value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return Gu().createElement("div",{className:e.getClassName("item",r)},Gu().createElement("div",{className:e.getClassName("item-side")},t),Gu().createElement("div",{className:e.getClassName("item-content")},n))}}),Object.defineProperty(e,"renderTitle",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=e.props.theme,n=e.props.schedule,r=n.title,o=n.colorIndex,i=Ile[o];return i||(i=Ile[0]),e.renderItem(Gu().createElement("div",{className:e.getClassName("color"),style:{background:t.getColorByToken(i.line)}}),Gu().createElement("div",{className:e.getClassName("title")},r))}}),Object.defineProperty(e,"renderDivider",{enumerable:!0,configurable:!0,writable:!0,value:function(){return e.renderItem(null,Gu().createElement($_e,{className:e.getClassName("divider")}))}}),Object.defineProperty(e,"renderDate",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=e.props.schedule,n=t.startDate,r=t.endDate;return e.renderItem(Gu().createElement("div",{className:e.getClassName("icon","icon-calendar","icon-calendar-v")}),Gu().createElement("div",{className:e.getClassName("date")},Gu().createElement("span",null,n.format("YYYY-MM-DD")),Gu().createElement("span",{className:e.getClassName("date-split")},"~"),Gu().createElement("span",null,r.format("YYYY-MM-DD"))))}}),Object.defineProperty(e,"renderDesc",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=e.props.schedule.desc;return e.renderItem(Gu().createElement("div",{className:e.getClassName("icon","icon-desc","icon-desc-v")}),Gu().createElement("div",{className:e.getClassName("desc"),ref:e.descRef,dangerouslySetInnerHTML:{__html:Yit(t)||""}}),"margin-top")}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){var e=this;this.descRef.current&&lEe(this.descRef.current,(function(t,n,r){e.props.visitLink(n,r)}))}},{key:"render",value:function(){return Gu().createElement("div",{className:this.getClassName()},this.renderTitle(),this.renderDivider(),this.renderDate(),this.renderDesc())}}])}(Yu.Component);function Qit(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Zit()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Zit(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Zit=function(){return!!e})()}var eat=function(e){function t(e){var n;return(0,Ke.A)(this,t),n=Qit(this,t,[e]),Object.defineProperty(n,"getClassName",{enumerable:!0,configurable:!0,writable:!0,value:Xs("ne-card-calendar-popover")}),Object.defineProperty(n,"handleVisibleChange",{enumerable:!0,configurable:!0,writable:!0,value:function(e){n.setState({isShowPopover:e}),!1===e&&n.props.onClose()}}),n.state={isShowPopover:!0},n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){return Gu().createElement(bR,{className:this.getClassName(),visible:this.state.isShowPopover,placement:this.props.pos.placement,trigger:"click",onVisibleChange:this.handleVisibleChange,content:Gu().createElement(Xit,{schedule:this.props.schedule,theme:this.props.theme,visitLink:this.props.visitLink})},Gu().createElement("div",{className:this.getClassName("fake-line"),style:{left:this.props.pos.x,top:this.props.pos.y}}))}}])}(Yu.Component);function tat(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,nat()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function nat(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nat=function(){return!!e})()}var rat=function(e){function t(e){var n;(0,Ke.A)(this,t),n=tat(this,t,[e]),Object.defineProperty(n,"containerRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(n,"boxRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(n,"getClassName",{enumerable:!0,configurable:!0,writable:!0,value:Xs("ne-card-calendar")}),Object.defineProperty(n,"handleOpenSchedule",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t){var r=n.containerRef.current.getBoundingClientRect();n.setState({isShowPopover:!0,activeScheduleId:e.id,popoverInfo:{pos:Object.assign(Object.assign({},t),{x:t.x-r.left,y:t.y-r.top}),schedule:e}})}}),Object.defineProperty(n,"handleCloseSchedule",{enumerable:!0,configurable:!0,writable:!0,value:function(e){null==e||e.stopPropagation(),n.setState({isShowPopover:!1,popoverInfo:{},activeScheduleId:""})}}),Object.defineProperty(n,"renderHeader",{enumerable:!0,configurable:!0,writable:!0,value:function(){return Gu().createElement(EKe,{cardData:n.props.cardData,onClick:n.handleCloseSchedule,onCurrentDateChange:n.props.onCurrentDateChange})}}),Object.defineProperty(n,"renderWeekNames",{enumerable:!0,configurable:!0,writable:!0,value:function(){return Gu().createElement(RKe,{cardData:n.props.cardData})}}),Object.defineProperty(n,"renderCalendarCellSchedule",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t,r){var o=n.props.theme,i=n.props.cardData.getScheduleList(),a=n.props.cardData.getDateScheduleMap(),l=n.state.activeScheduleId,u=Dle(e),c=i.filter((function(e){return e.include(u)})).sort((function(e,t){var n=a[u];return(n[e.id]||0)-(n[t.id]||0)}));return c.map((function(i){return i.isStartDate(u)||0===t?Gu().createElement($it,{theme:o,key:i.id,date:e,colIndex:t,rowIndex:r,schedule:i,activeScheduleId:l,onOpen:n.handleOpenSchedule}):Gu().createElement("div",{key:e.unix()+i.id,className:n.getClassName("content-box-row-cell-schedule-holder")})}))}}),Object.defineProperty(n,"renderCalendarCell",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t,r){var o=n.state.date;return Gu().createElement("div",{className:n.getClassName("content-box-row-cell"),key:e.unix()},Gu().createElement("div",{className:n.getClassName("content-box-row-cell-date"),"data-today":e.isToday(),"data-fade":e.month()!==o.month()},Gu().createElement("div",{className:n.getClassName("content-box-row-cell-date-text")},e.format("D"))),n.renderCalendarCellSchedule(e,t,r))}}),Object.defineProperty(n,"renderCalendarBox",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=n.props.cardData.getDateRows(),t=n.state.date;return Gu().createElement("div",{className:n.getClassName("content-box"),ref:n.boxRef},e.map((function(r,o){return Gu().createElement("div",{className:n.getClassName("content-box-row"),key:"".concat(t.month(),"-").concat(o),"data-last":o===e.length-1},r.map((function(e,t){return n.renderCalendarCell(e,t,o)})))})))}}),Object.defineProperty(n,"renderContent",{enumerable:!0,configurable:!0,writable:!0,value:function(){return Gu().createElement("div",{className:n.getClassName("content")},n.renderWeekNames(),n.renderCalendarBox())}}),Object.defineProperty(n,"renderPopover",{enumerable:!0,configurable:!0,writable:!0,value:function(){return n.state.isShowPopover?Gu().createElement(eat,{visitLink:n.props.visitLink,schedule:n.state.popoverInfo.schedule,pos:n.state.popoverInfo.pos,onClose:n.handleCloseSchedule,theme:n.props.theme}):null}}),Object.defineProperty(n,"renderMask",{enumerable:!0,configurable:!0,writable:!0,value:function(){return n.state.isShowPopover?Gu().createElement("div",{className:n.getClassName("mask"),onClick:n.handleCloseSchedule}):null}});var r=e.cardData.getCurrentDate();return n.state={currentDate:r,date:Ple(r),isShowPopover:!1,popoverInfo:{},activeScheduleId:""},n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){return Gu().createElement("div",{className:this.getClassName(),ref:this.containerRef},this.renderHeader(),this.renderContent(),this.renderPopover(),this.renderMask())}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.cardData.getCurrentDate();return n!==t.currentDate?{currentDate:n,activeScheduleId:"",date:Ple(n)}:null}}])}(Yu.Component);function oat(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(oat=function(){return!!e})()}function iat(e){return function(e){function t(){var e;return(0,Ke.A)(this,t),e=function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,oat()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,arguments),Object.defineProperty(e,"uiViewProxy",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){var e=this;this.uiViewProxy=Vye.render(rat,{visitLink:function(t,n){e.viewer.emitEvent("visitLink",t,n)},theme:this.viewer.theme,cardData:this.cardData,onCurrentDateChange:function(t){e.cardData.setCurrentDate(t),e.cardData.setExtendInfo(),e.cardData.afterChange()}},this.containerNode),xc(this,this.viewer.theme,"themeChange",(function(){var t;null===(t=e.uiViewProxy)||void 0===t||t.rerender({theme:e.viewer.theme})}))}},{key:"destroy",value:function(){Gl().unmountComponentAtNode(this.containerNode),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}}])}(e)}function aat(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,lat()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function lat(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(lat=function(){return!!e})()}var uat=function(e){function t(){var e;return(0,Ke.A)(this,t),e=aat(this,t,arguments),Object.defineProperty(e,"_ui",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){this.pluginOption.viewerUI&&(t.$CardUI=this.pluginOption.viewerUI),this._ui=this.viewer.createCardUI(this)}},{key:"destroy",value:function(){this._ui&&this._ui.destroy()}}])}(Mw);function cat(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,sat()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function sat(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(sat=function(){return!!e})()}Object.defineProperty(uat,"$CardUI",{enumerable:!0,configurable:!0,writable:!0,value:XA.extend(iat)}),Object.defineProperty(uat,"$CardData",{enumerable:!0,configurable:!0,writable:!0,value:Vle});var dat=function(e){function t(){return(0,Ke.A)(this,t),cat(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerBlockCard(this,eM.CALENDAR.NODE_NAME,uat)}}])}(Sw);Object.defineProperty(dat,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:"calendar"}),Object.defineProperty(dat,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:qKe}),Object.defineProperty(dat,"Colors",{enumerable:!0,configurable:!0,writable:!0,value:Ble});var fat={loadingAction:"",loadingStatus:"",loadingError:null};function hat(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,pat()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function pat(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pat=function(){return!!e})()}var vat=function(e){function t(e){var n,r;(0,Ke.A)(this,t),n=hat(this,t,[e]),Object.defineProperty(n,"containerRef",{enumerable:!0,configurable:!0,writable:!0,value:Gu().createRef()}),Object.defineProperty(n,"contentRef",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"getClassName",{enumerable:!0,configurable:!0,writable:!0,value:Xs("ne-card-vote-viewer")}),Object.defineProperty(n,"isInvalid",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=n.props.cardData.getVoteId(),t=n.props.cardData.getItems();return!e||!t}}),Object.defineProperty(n,"isError",{enumerable:!0,configurable:!0,writable:!0,value:function(){return n.props.loadingStatus===aue&&n.props.loadingAction===lue.QueryDetail&&n.props.loadingError}}),Object.defineProperty(n,"isQueryDetail",{enumerable:!0,configurable:!0,writable:!0,value:function(){return n.props.loadingStatus===iue&&n.props.loadingAction===lue.QueryDetail}}),Object.defineProperty(n,"_isVoted",{enumerable:!0,configurable:!0,writable:!0,value:function(e){return Object.keys(e).filter((function(t){return e[t]})).length>0}}),Object.defineProperty(n,"isBeforeDeadline",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=Xf()(),t=n.props.cardData.getDeadline();return e.isBefore(Xf()(t))}}),Object.defineProperty(n,"isAllowVote",{enumerable:!0,configurable:!0,writable:!0,value:function(){return n.props.allowVote&&n.isBeforeDeadline()}}),Object.defineProperty(n,"handleSelectVoteId",{enumerable:!0,configurable:!0,writable:!0,value:function(e){return function(t){n.props.cardData.getType()===sue?n.setState({voteData:(0,Ha.A)({},e,t.target.checked)}):n.setState({voteData:Object.assign(Object.assign({},n.state.voteData),(0,Ha.A)({},e,t.target.checked))})}}}),Object.defineProperty(n,"handleVote",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=n.state.voteData,t=[];Object.keys(e).forEach((function(n){n&&e[n]&&-1===t.indexOf(n)&&t.push(n)})),n.setState({view:"result"},(function(){var e,t=0;(null===(e=n.containerRef)||void 0===e?void 0:e.current)&&(t=n.containerRef.current.getBoundingClientRect().height),n.setState({lastContainerHeight:t})})),n.props.onVote({items:t.join(",")})}}),Object.defineProperty(n,"handleViewData",{enumerable:!0,configurable:!0,writable:!0,value:function(){n.setState({view:"result"},(function(){n.props.onViewData()}))}}),Object.defineProperty(n,"handleReVote",{enumerable:!0,configurable:!0,writable:!0,value:function(){n.setState({view:"form"})}}),Object.defineProperty(n,"renderVoteItems",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=n.props.cardData.getType(),t=n.props.cardData.getItems(),r=e===sue;return Gu().createElement("div",{className:n.getClassName("vote-items"),"data-testid":n.getClassName("vote-items")},t.map((function(e,t){return Gu().createElement("label",{className:n.getClassName("vote-item"),key:e.id},Gu().createElement("div",{className:n.getClassName("vote-item-op")},r?Gu().createElement(Axe,{onChange:n.handleSelectVoteId(e.id),checked:n.state.voteData[e.id],"data-testid":n.getClassName("vote-item-op"),"data-testindex":t}):Gu().createElement(RAe,{onChange:n.handleSelectVoteId(e.id),checked:n.state.voteData[e.id],"data-testid":n.getClassName("vote-item-op"),"data-testindex":t})),Gu().createElement("div",{className:n.getClassName("vote-item-text"),"data-testid":n.getClassName("vote-item-text"),"data-testindex":t},e.value))})))}}),Object.defineProperty(n,"renderVoteFooter",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=n.isAllowVote();return Gu().createElement("div",{className:n.getClassName("content-footer")},Gu().createElement(Mye,{className:n.getClassName("content-footer-vote-button"),onClick:n.handleVote,disabled:!e,"data-testid":n.getClassName("vote-button")},sc("投票")),Gu().createElement("span",{className:n.getClassName("content-footer-view-data")},n.state.voted&&sc("已投票"),Gu().createElement("span",{className:n.getClassName("content-footer-view-data-link"),onClick:n.handleViewData},sc("查看结果"))))}}),Object.defineProperty(n,"renderResultVoteDetail",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t=Gu().createElement("div",{className:n.getClassName("result-item-info-data-detail")},Gu().createElement("span",null,sc("{count} 票",{count:e.count})),Gu().createElement("span",null,"".concat(e.percent,"%")));if(e.members.length){var r=Gu().createElement("div",{className:n.getClassName("result-item-info-data-members")},e.members.join(" "));return Gu().createElement(bR,{overlayClassName:n.getClassName("result-popover-overlay"),trigger:"hover",content:r,getPopupContainer:function(){return n.containerRef.current}},t)}return t}}),Object.defineProperty(n,"renderResultItems",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=n.props.detail;return e?Gu().createElement("div",{className:n.getClassName("result-items"),"data-testid":n.getClassName("result-items")},e.items.map((function(e,t){return Gu().createElement("div",{className:n.getClassName("result-item"),key:e.id,"data-voted":e.isVoted},Gu().createElement("div",{className:n.getClassName("result-item-info")},Gu().createElement("div",{className:n.getClassName("result-item-info-name"),"data-testid":n.getClassName("result-item-name"),"data-testindex":t},e.value),Gu().createElement("div",{className:n.getClassName("result-item-info-data")},n.renderResultVoteDetail(e))),Gu().createElement("div",{className:n.getClassName("result-item-line")},Gu().createElement("div",{className:n.getClassName("result-item-line-length"),style:{width:"".concat(e.percent,"%")}})))}))):null}}),Object.defineProperty(n,"renderResultFooter",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=n.props,t=e.detail,r=e.allowVote;if(!t)return null;var o=Xf()(n.props.cardData.getDeadline()),i=Xf()().isAfter(o);return Gu().createElement("div",{className:n.getClassName("content-footer")},Gu().createElement("div",{className:n.getClassName("content-footer-member-count")},t.memberCount," ",sc("人已投票")),Gu().createElement("div",{className:n.getClassName("content-footer-deadline")},i?sc("已截止"):"".concat(o.format("YYYY-MM-DD HH:mm:ss")," ").concat(sc("截止"))),i||!r?null:Gu().createElement("div",{className:n.getClassName("content-footer-re-vote"),onClick:n.handleReVote,"data-testid":n.getClassName("re-vote-button")},sc("重新投票")))}}),Object.defineProperty(n,"renderContent",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=n.props.cardData.getType(),t=n.props.cardData.getTitle(),r=due[e],o="form"===n.state.view;return Gu().createElement("div",{className:n.getClassName("content"),ref:n.contentRef},Gu().createElement("div",{className:n.getClassName("content-header")},Gu().createElement("div",{className:n.getClassName("content-header-type"),"data-testid":n.getClassName("type")},sc(r)),Gu().createElement("div",{className:n.getClassName("content-header-title"),"data-testid":n.getClassName("title")},t)),o?n.renderVoteItems():n.renderResultItems(),o?n.renderVoteFooter():n.renderResultFooter())}}),Object.defineProperty(n,"renderVotingMask",{enumerable:!0,configurable:!0,writable:!0,value:function(){return n.props.loadingStatus===iue&&n.props.loadingAction===lue.Vote?Gu().createElement("div",{className:n.getClassName("voting-mask")},Gu().createElement(SC,{type:"loading"}),sc("投票中...")):null}}),Object.defineProperty(n,"renderQueryDetailLoading",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e={};return 0!==n.state.lastContainerHeight&&(e.height=n.state.lastContainerHeight),Gu().createElement("div",{className:n.getClassName(),style:e},Gu().createElement("div",{className:n.getClassName("query-detail-loading")},Gu().createElement(SC,{type:"loading"}),Gu().createElement("span",null,sc("正在获取投票数据..."))))}}),Object.defineProperty(n,"renderError",{enumerable:!0,configurable:!0,writable:!0,value:function(e){return Gu().createElement("div",{className:n.getClassName()},Gu().createElement("div",{className:n.getClassName("error-tip")},sc(e)))}}),Object.defineProperty(n,"renderSimpleMode",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=n.props.getCardReadUrl();return Gu().createElement("div",null,sc("此处为语雀投票卡片，点击链接查看："),Gu().createElement("a",{href:yh.sanitizeUrl(e),target:"_blank",onClick:function(t){t.preventDefault(),t.stopPropagation(),n.props.visitLink(yh.sanitizeUrl(e),!0)}},e))}});var o=(null===(r=n.props)||void 0===r?void 0:r.voteData)||{},i=n._isVoted(o);return n.state={view:i?"result":"form",voted:i,voteData:o,lastContainerHeight:0},i&&n.props.onViewData(),n}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"componentDidMount",value:function(){var e=this;!this.isBeforeDeadline()&&this.props.isOwner&&("result"!==this.state.view&&setTimeout((function(){e.props.onViewData()}),100),this.setState({view:"result"}))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){!e.voteData||io()(e.voteData,this.props.voteData)||io()(e.voteData,this.state.voteData)||(0!==Object.keys(e.voteData).length?("result"!==this.state.view&&this.props.onViewData(),this.setState({voteData:e.voteData,voted:!0,view:"result"})):this.setState({voteData:e.voteData,voted:!1}))}},{key:"render",value:function(){return this.props.viewerMode===Vw.Simple?this.renderSimpleMode():this.isInvalid()?this.renderError("投票数据异常"):this.isError()?this.renderError("获取投票数据失败"):this.isQueryDetail()?this.renderQueryDetailLoading():Gu().createElement("div",{className:this.getClassName(),ref:this.containerRef},this.renderContent(),this.renderVotingMask())}}])}(Yu.Component);function mat(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mat=function(){return!!e})()}function gat(e){return function(e){function t(){var e;return(0,Ke.A)(this,t),e=function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,mat()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,arguments),Object.defineProperty(e,"uiViewProxy",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"updateProps",{enumerable:!0,configurable:!0,writable:!0,value:function(t){e.uiViewProxy.rerender(t)}}),Object.defineProperty(e,"getCardReadUrl",{enumerable:!0,configurable:!0,writable:!0,value:function(){return""}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){var t=this;this.uiViewProxy=Vye.render(vat,Object.assign(Object.assign({},e),{visitLink:function(e,n){t.viewer.emitEvent("visitLink",e,n)},viewerMode:this.viewer.option.viewerMode,cardData:this.cardData,allowVote:this.pluginOption.allowVote,isOwner:this.pluginOption.isOwner,onVote:function(e){t.emit("vote",e)},onViewData:function(e){t.emit("viewData")},getCardReadUrl:this.getCardReadUrl}),this.containerNode)}},{key:"destroy",value:function(){Tr((0,Je.A)(t.prototype),"destroy",this).call(this),Gl().unmountComponentAtNode(this.containerNode),this.uiViewProxy=null}}])}(e)}var bat=gat;function yat(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,wat()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function wat(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wat=function(){return!!e})()}var Aat=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))},kat=function(e){function t(){var e;return(0,Ke.A)(this,t),e=yat(this,t,arguments),Object.defineProperty(e,"_ui",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"parseDetail",{enumerable:!0,configurable:!0,writable:!0,value:function(t){if(!t)return null;var n=e.cardData.getItems(),r=0,o={},i=new Set;t.items.forEach((function(e){r+=e.count,o[e.id]=e})),t.items.forEach((function(e){o[e.id].percent=Math.floor((e.count||0)/r*1e4)/100}));var a=n.map((function(e){var n,r,a,l=o[e.id]||null;return l&&l.members.forEach((function(e){i.add(e)})),Object.assign(Object.assign({},e),{id:e.id,value:e.value,count:null!==(n=null==l?void 0:l.count)&&void 0!==n?n:0,members:null!==(r=null==l?void 0:l.members)&&void 0!==r?r:[],percent:null!==(a=null==l?void 0:l.percent)&&void 0!==a?a:0,isVoted:-1!==t.voted.indexOf(e.id)})}));return Object.assign(Object.assign({},t),{totalCount:r,items:a,memberCount:i.size})}}),Object.defineProperty(e,"filterDetail",{enumerable:!0,configurable:!0,writable:!0,value:function(t){if(e.cardData.getType()!==sue)return t;var n={},r=(t.items||[]).map((function(e){var t=e.count;if(0===t)return e;var r=(e.members||[]).filter((function(r){return n[r]?(t-=1,!1):(n[r]=e.id,!0)}));return Object.assign(Object.assign({},e),{count:t,members:r})})),o=t.voted[0]||[];return Object.assign(Object.assign({},t),{items:r,voted:o})}}),Object.defineProperty(e,"loadingWrapper",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=t.loadingAction,r=t.exec,o=t.error,i=t.done;return Aat(e,void 0,void 0,Cc().mark((function e(){var t;return Cc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._ui.updateProps({loadingStatus:iue,loadingAction:n,loadingError:null}),t=null,e.prev=2,e.next=5,r();case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),o&&o(),t=e.t0;case 11:return e.prev=11,this._ui.updateProps({loadingStatus:aue,loadingAction:n,loadingError:t}),e.finish(11);case 14:i&&i();case 15:case"end":return e.stop()}}),e,this,[[2,7,11,14]])})))}}),Object.defineProperty(e,"requestVoteDetail",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=e.cardData.getVoteId(),n=e.cardData.getDeadline(),r=e.cardData.getItems();return new Promise((function(o,i){ns({url:e.pluginOption.queryDetailUrl,method:"get",data:{vote_id:t,deadline:Xf()(n).toISOString(),items:r.map((function(e){return e.id})).join(",")},success:function(e){o(e.data)},error:function(e){i(e)}})}))}}),Object.defineProperty(e,"requestVoteCheck",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=e.cardData.getVoteId(),n=e.cardData.getDeadline();return new Promise((function(r,o){ns({url:e.pluginOption.queryCheckUrl,method:"get",data:{vote_id:t,deadline:Xf()(n).toISOString()},success:function(e){r(e.data)},error:function(e){o(e)}})}))}}),Object.defineProperty(e,"queryVoteDetail",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.loadingWrapper({loadingAction:lue.QueryDetail,exec:function(){return Aat(e,void 0,void 0,Cc().mark((function e(){var t,n;return Cc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.requestVoteDetail();case 2:t=e.sent,n=this.filterDetail(t),this._ui.updateProps({detail:this.parseDetail(n)});case 5:case"end":return e.stop()}}),e,this)})))}})}}),Object.defineProperty(e,"requestVote",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n=t.items,r=e.cardData.getVoteId();return new Promise((function(t,o){ns({url:e.pluginOption.voteUrl,method:"post",data:{vote_id:r,items:n},success:function(e){t(e.data)},error:function(e){o(e)}})}))}}),Object.defineProperty(e,"vote",{enumerable:!0,configurable:!0,writable:!0,value:function(t){e.loadingWrapper({loadingAction:lue.Vote,exec:function(){return Aat(e,void 0,void 0,Cc().mark((function e(){return Cc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.requestVote(t);case 2:mC.success(sc("投票成功"));case 3:case"end":return e.stop()}}),e,this)})))},done:function(){e.queryVoteDetail()}})}}),Object.defineProperty(e,"check",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.loadingWrapper({loadingAction:lue.queryCheck,exec:function(){return Aat(e,void 0,void 0,Cc().mark((function e(){var t,n;return Cc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.requestVoteCheck();case 2:t=e.sent,n={},t.forEach((function(e){n[e.vote_item_id]=!0})),this._ui.updateProps({voteData:n});case 6:case"end":return e.stop()}}),e,this)})))}})}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){this.pluginOption.viewerUI&&(t.$CardUI=this.pluginOption.viewerUI),this._ui=this.viewer.createCardUI(this,fat),this._ui.on("vote",this.vote),this._ui.on("viewData",this.queryVoteDetail),this.check()}},{key:"destroy",value:function(){this._ui&&this._ui.destroy()}}])}(Mw);function _at(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Cat()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Cat(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Cat=function(){return!!e})()}Object.defineProperty(kat,"$CardUI",{enumerable:!0,configurable:!0,writable:!0,value:gat(QA()())}),Object.defineProperty(kat,"$CardData",{enumerable:!0,configurable:!0,writable:!0,value:gue});var Nat=function(e){function t(){return(0,Ke.A)(this,t),_at(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerBlockCard(this,eM.VOTE.NODE_NAME,kat)}}])}(Sw);function Oat(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,xat()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function xat(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xat=function(){return!!e})()}Object.defineProperty(Nat,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:"vote"}),Object.defineProperty(Nat,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:Qy(aYe)});var Eat=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Oat(this,t,arguments),Object.defineProperty(e,"onDiagramLoad",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t,n,r,o;null===(n=(t=e.props).onLoad)||void 0===n||n.call(t),null===(o=(r=e.props).onLoaded)||void 0===o||o.call(r)}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){var e,t=this.props,n=t.cardData,r=t.className,o=void 0===r?"":r,i=t.url,a=t.error,l=t.height,u=t.width,c=n.type;if(null!==a)e=Gu().createElement("pre",{ref:this.props.onLoaded},a);else if(i){var s={};u&&(s.width=u),l&&(s.height=l),e=Gu().createElement("img",{src:yh.sanitizeUrl(i),onLoad:this.onDiagramLoad,onError:this.props.onLoaded,"data-testid":"ne-text-diagram-img",style:s,onDragStart:function(e){e.preventDefault(),e.stopPropagation()}})}else e=Gu().createElement("div",{className:"ne-text-diagram-loading"},Gu().createElement(SC,{type:"icon-loading-desk",size:36}));return Gu().createElement("div",{"data-diagram":c,className:"ne-text-diagram-viewer ".concat(o)},e)}}])}(Gu().PureComponent);function Dat(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Dat=function(){return!!e})()}Object.defineProperty(Eat,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{onLoad:function(){},onLoaded:function(){},onBeforeRenderImage:function(e){return e}}});var Pat=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))},Rat=oUe()("ne:text-diagram:vui");function Sat(e){return function(e){function t(){var e;return(0,Ke.A)(this,t),e=function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Dat()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,arguments),Object.defineProperty(e,"_convertSvgImage",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_ui",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"updateProps",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var n;null===(n=e._ui)||void 0===n||n.rerender(t)}}),Object.defineProperty(e,"_syncUrl",{enumerable:!0,configurable:!0,writable:!0,value:function(t){e.cardData.update({url:t}),e.cardData.sync(!0)}}),Object.defineProperty(e,"_checkTextDiagramImage",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t){var n=new Image;n.addEventListener("error",(function(){null==t||t()})),n.src=e}}),Object.defineProperty(e,"_setTextDiagramImage",{enumerable:!0,configurable:!0,writable:!0,value:function(){return Pat(e,void 0,void 0,Cc().mark((function e(){var t,n,r,o,i,a;return Cc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.cardData.code,n=this.cardData.url,t||n){e.next=4;break}return e.abrupt("return");case 4:if(!n){e.next=18;break}if(!this._convertSvgImage){e.next=15;break}return e.next=8,nd(n);case 8:return r=e.sent,o=r.url,i=r.height,a=r.width,this.updateProps({url:o,width:a,height:i}),this._syncUrl(o),e.abrupt("return");case 15:return this.updateProps({url:n}),this._checkTextDiagramImage(n,this._genTextDiagramImage),e.abrupt("return");case 18:return e.next=20,this._genTextDiagramImage();case 20:case"end":return e.stop()}}),e,this)})))}}),Object.defineProperty(e,"_genTextDiagramImage",{enumerable:!0,configurable:!0,writable:!0,value:function(){return Pat(e,void 0,void 0,Cc().mark((function e(){var t,n,r,o,i,a,l,u;return Cc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.cardData.type,n=this.cardData.code,e.next=4,this.preview({type:t,code:n});case 4:if((r=e.sent).success){e.next=8;break}return this.updateProps({error:r.message}),e.abrupt("return");case 8:if(!this._convertSvgImage){e.next=18;break}return e.next=11,td(r.svg);case 11:return o=e.sent,i=o.url,a=o.width,l=o.height,this.updateProps({url:i,width:a,height:l}),this._syncUrl(i),e.abrupt("return");case 18:u=dh.toDataURL(r.svg),this.updateProps({url:u});case 20:case"end":return e.stop()}}),e,this)})))}}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"isAsyncUI",value:function(){return!0}},{key:"preview",value:function(e){return Rat(e),Promise.resolve({success:!1,message:""})}},{key:"init",value:function(){var e=this,t=this.cardData.toGraph();this._convertSvgImage=this.pluginOption.convertSvgImage,Rat("init use",t),this._ui=Vye.render(Eat,{cardData:this.cardData,error:null,preview:this.preview,onLoaded:function(){e.loaded()}},this.containerNode),setTimeout((function(){e._setTextDiagramImage().catch((function(t){console.error("convert text-diagram image error:",t),e.updateProps({error:e.cardData.code})}))}))}},{key:"destroy",value:function(){var e;null===(e=this._ui)||void 0===e||e.destroy(),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}}])}(e)}function Tat(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,jat()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function jat(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(jat=function(){return!!e})()}var Iat=function(e){function t(){return(0,Ke.A)(this,t),Tat(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){this.pluginOption.viewerUI&&(t.$CardUI=this.pluginOption.viewerUI),this.viewer.createCardUI(this)}}])}(Mw);function Bat(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Mat()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Mat(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Mat=function(){return!!e})()}Object.defineProperty(Iat,"$CardData",{enumerable:!0,configurable:!0,writable:!0,value:Mue}),Object.defineProperty(Iat,"$CardUI",{enumerable:!0,configurable:!0,writable:!0,value:XA.extend(Sat)});var Fat=function(e){function t(){return(0,Ke.A)(this,t),Bat(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerBlockCard(this,eM.TEXT_DIAGRAM.NODE_NAME,Iat)}}])}(Sw);function Lat(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Uat()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Uat(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Uat=function(){return!!e})()}Object.defineProperty(Fat,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:eM.TEXT_DIAGRAM.PLUGIN_NAME}),Object.defineProperty(Fat,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:qYe});var Vat=function(e){function t(){return(0,Ke.A)(this,t),Lat(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"render",value:function(){var e=this;return Gu().createElement(bR,{trigger:"click",getPopupContainer:function(t){return e.props.overlayContainer||t},overlayClassName:"ne-date-card-overlay",placement:"bottomLeft",content:this._renderInput()},Gu().createElement("div",{className:"ne-card-date-card"},Gu().createElement(SC,{type:"index-todo-list"}),Gu().createElement("span",null,this._getText())))}},{key:"_getText",value:function(){return Vce(this.props.cardData.getDate())}},{key:"_renderInput",value:function(){return Gu().createElement(UGe,{hideFooter:!0,value:oh(this.props.cardData.getDate())})}}])}(Yu.Component);function Hat(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,zat()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function zat(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(zat=function(){return!!e})()}var Wat=UUe(0,(function(e){return function(e){function t(){return(0,Ke.A)(this,t),Hat(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){Vye.render(Vat,{cardData:this.cardData,overlayContainer:document.body},this.containerNode)}},{key:"destroy",value:function(){this.containerNode&&Vye.unmount(this.containerNode),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}}])}(e)}));function qat(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,$at()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function $at(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($at=function(){return!!e})()}var Kat=function(e){function t(){return(0,Ke.A)(this,t),qat(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(){this.pluginOption.viewerUI&&(t.$CardUI=this.pluginOption.viewerUI),this.viewer.createCardUI(this)}}])}(Bw);function Yat(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Gat()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Gat(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Gat=function(){return!!e})()}Object.defineProperty(Kat,"$CardData",{enumerable:!0,configurable:!0,writable:!0,value:Bce}),Object.defineProperty(Kat,"$CardUI",{enumerable:!0,configurable:!0,writable:!0,value:XA.extend(Wat)});var Jat=function(e){function t(){return(0,Ke.A)(this,t),Yat(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){e.registerInlineCard(this,xce.cardName,Kat)}}])}(Sw);function Xat(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,Qat()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function Qat(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Qat=function(){return!!e})()}Object.defineProperty(Jat,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:xce.pluginName}),Object.defineProperty(Jat,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:Qy(ZGe)});var Zat=function(e){function t(){var e;return(0,Ke.A)(this,t),e=Xat(this,t,arguments),Object.defineProperty(e,"_oldObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"current",get:function(){return"custom"}},{key:"observe",value:function(e){this.viewer.theme.on("themeChange",e)}},{key:"init",value:function(e){this.option.enable&&(this._oldObserver=SC.themeObserver,SC.themeObserver=this,e.theme.registerTheme("custom",new oJe(ou.LIGHT,this.option)),e.theme.setActiveTheme("custom"))}},{key:"destroy",value:function(){Tr((0,Je.A)(t.prototype),"destroy",this).call(this),this.option.enable&&(SC.themeObserver=this._oldObserver)}}])}(Sw);Object.defineProperty(Zat,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:yT.pluginName}),Object.defineProperty(Zat,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:Qy(Ase)});var elt=[_et,Oet,Det,Tet,Het,Yet,Xet,att,v7e,ctt,Stt,Ftt,X7e,Vtt,Ztt,nnt,int,fnt,Snt,Fnt,Wnt,Knt,Jnt,Znt,ort,lrt,krt,Nrt,MVe,Ert,Yrt,aot,yot,Eot,Yot,ait,bit,Oit,Oqe,l9e,Uit,zit,dat,Nat,Fat,IGe,Jat,Zat],tlt=(new mS).registerViewerPlugin(elt).registerKernelPlugin(Nse);function nlt(e,t,n){var r,o;if(n){var i=(null===(r=n.kernelPlugins)||void 0===r?void 0:r.filter((function(e){return!tlt.kernelPlugins.includes(e)})))||[],a=(null===(o=n.viewerPlugins)||void 0===o?void 0:o.filter((function(e){return!tlt.viewerPlugins.includes(e)})))||[];tlt.registerViewerPlugin(a).registerKernelPlugin(i)}var l=function(e){var t;return e.file&&(t=e.file)&&(!t.viewerBlockUI&&t.blockMiniToolbar&&(t.viewerBlockUI=function(e){function n(){var e;return(0,Ke.A)(this,n),e=F7e(this,n,arguments),Object.defineProperty(e,"miniToolbarPreOption",{enumerable:!0,configurable:!0,writable:!0,value:null==t?void 0:t.blockMiniToolbar}),e}return(0,Xe.A)(n,e),(0,$e.A)(n)}(M7e.extend(i7e))),!t.editInlineUI&&t.inlineMiniToolbar&&(t.viewerInlineUI=function(e){function n(){var e;return(0,Ke.A)(this,n),e=F7e(this,n,arguments),Object.defineProperty(e,"miniToolbarPreOption",{enumerable:!0,configurable:!0,writable:!0,value:null==t?void 0:t.inlineMiniToolbar}),e}return(0,Xe.A)(n,e),(0,$e.A)(n)}(M7e.extend(Z9e)))),e.image&&function(e){e&&(e.viewerUI||(e.viewerUI=function(t){function n(){var t;return(0,Ke.A)(this,n),t=Q7e(this,n,arguments),Object.defineProperty(t,"miniToolbarPreOption",{enumerable:!0,configurable:!0,writable:!0,value:null==e?void 0:e.miniToolbar}),t}return(0,Xe.A)(n,t),(0,$e.A)(n)}(M7e.extend(W7e))))}(e.image),eet(e),e}(t);return tlt.createViewer(e,Wf({link:get,heading:met},l))}function rlt(e){try{var t=decodeURIComponent(atob(e));return JSON.parse(t)}catch(e){throw console.error(e),new Error("read cangjie failed")}}function olt(e){return e}var ilt=(0,$e.A)((function e(){(0,Ke.A)(this,e)}));function alt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(alt=function(){return!!e})()}function llt(e){return function(e){function t(){var e;(0,Ke.A)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,alt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,[].concat(r)),Object.defineProperty(e,"_requestCardToolbarTimer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_toolbarRaf",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"requestCardToolbarDestroy",{enumerable:!0,configurable:!0,writable:!0,value:function(){e._requestCardToolbarTimer&&clearTimeout(e._requestCardToolbarTimer),UR.destroyCardToolbar(e._boxNodeInstance.getBrickDOMNode())}}),Object.defineProperty(e,"requestCardToolbarShow",{enumerable:!0,configurable:!0,writable:!0,value:function(){e._requestCardToolbarTimer=window.setTimeout((function(){e._showCardToolbar()}),200)}}),pc(e,e._boxNodeInstance.getBrickDOMNode(),"mouseenter",(function(){e._toolbarRaf=requestAnimationFrame((function(){var t;!1!==(null===(t=e.beforeCardToolbarShow)||void 0===t?void 0:t.call(e,"mouseenter"))&&(e._requestCardToolbarTimer&&clearTimeout(e._requestCardToolbarTimer),e.requestCardToolbarShow())}))})),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"beforeCardToolbarShow",value:function(e){return!0}},{key:"getCardToolbarConfig",value:function(){return null}},{key:"_showCardToolbar",value:function(){var e,t=null===(e=this.getCardToolbarConfig)||void 0===e?void 0:e.call(this);if(t){var n=this.editor,r=n.scrollNode,o=n.innerOverlayContainer;UR.updateCardToolbar(this._boxNodeInstance.getBrickDOMNode(),o,r,UR.generateToolbarItems(t),{offset:4})}}},{key:"destroy",value:function(){this._requestCardToolbarTimer&&clearTimeout(this._requestCardToolbarTimer),this._toolbarRaf&&cancelAnimationFrame(this._toolbarRaf),this.requestCardToolbarDestroy(),Tr((0,Je.A)(t.prototype),"destroy",this).call(this)}}])}(e)}var ult=function(e){if("children"in e){var t=e.children.filter((function(e){return!(e.isFillerNode()||e.isTextNode()&&!e.data)}));return 1===t.length&&"image"===t[0].nodeName?t[0]:null}return null};function clt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(clt=function(){return!!e})()}function slt(e){return function(e){function t(){var e;(0,Ke.A)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,clt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,[].concat(r)),Object.defineProperty(e,"_visibility",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e.cardNode.registerUIEventCallback("appear",e.appear),e.cardNode.registerUIEventCallback("disappear",e.disappear),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"isVisible",get:function(){return this.cardNode.isVisible}},{key:"afterInit",value:function(){var e=this.cardNode.constructor,n=e.$LAZY_INIT,r=e.$VISIBILITY;(n||r)&&this.editor.renderer.requireService(p2e.ID).delegateVisibleChange(this.cardRootNode.parentNode,{lazyInit:!!n,visibility:!!r}),Tr((0,Je.A)(t.prototype),"afterInit",this).call(this)}},{key:"getDisappearNode",value:function(){return null}},{key:"appear",value:function(e,t){Ch.appear(this)}},{key:"disappear",value:function(){Ch.disappear(this,this.getDisappearNode())}}])}(e)}function dlt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(dlt=function(){return!!e})()}function flt(e){return function(e){function t(){var e;return(0,Ke.A)(this,t),e=function(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,dlt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}(this,t,arguments),Object.defineProperty(e,"tableId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"tableNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"tableUI",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"wrapDOMNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"setTableEditorPlugin",value:function(e){this.plugin=e}},{key:"init",value:function(){var e;this.cardData=this;var t=this.viewNode.id;this.tableId=t,this.tableUI=null===(e=this._boxNodeInstance)||void 0===e?void 0:e._tableUI,this.wrapDOMNode=this.tableUI.wrapDOMNode,this.tableNode=this.tableUI.tableNode}}])}(e)}function hlt(e,t,n){return t=(0,Je.A)(t),(0,Ge.A)(e,plt()?Reflect.construct(t,n||[],(0,Je.A)(e).constructor):t.apply(e,n))}function plt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(plt=function(){return!!e})()}var vlt=function(e){function t(){return(0,Ke.A)(this,t),hlt(this,t,arguments)}return(0,Xe.A)(t,e),(0,$e.A)(t,[{key:"init",value:function(e){}}])}(Fh);Object.defineProperty(vlt,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:rW.pluginName})})(),i})()));